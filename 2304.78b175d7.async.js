(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2304],{64958:function(lt,S,d){"use strict";d.d(S,{sg:function(){return A0},yi:function(){return L0},aC:function(){return B0},x1:function(){return X0},Kj:function(){return H0},Ex:function(){return Q0},Fk:function(){return q0},TZ:function(){return im},m:function(){return vm},cQ:function(){return pm},kB:function(){return xm}});var m={};d.r(m),d.d(m,{Base:function(){return xa},Circle:function(){return ew},Ellipse:function(){return iw},Image:function(){return aw},Line:function(){return sw},Marker:function(){return hw},Path:function(){return lh},Polygon:function(){return ww},Polyline:function(){return Cw},Rect:function(){return Tw},Text:function(){return Pw}});var L={};d.r(L),d.d(L,{Canvas:function(){return ov},Event:function(){return Er.Event},Group:function(){return ah},Shape:function(){return m},__esModule:function(){return Lw.X},version:function(){return Dw}});var I={};d.r(I),d.d(I,{Base:function(){return da},Circle:function(){return zw},Dom:function(){return Vw},Ellipse:function(){return Ww},Image:function(){return Uw},Line:function(){return Kw},Marker:function(){return Qw},Path:function(){return qw},Polygon:function(){return eS},Polyline:function(){return iS},Rect:function(){return lS},Text:function(){return dS}});var P={};d.r(P),d.d(P,{Canvas:function(){return pv},Event:function(){return Er.Event},Group:function(){return hh},Shape:function(){return I},version:function(){return FS}});var _={};d.r(_),d.d(_,{Chart:function(){return ib},ComponentController:function(){return zo},DIRECTION:function(){return gt},Event:function(){return qr},Facet:function(){return Vr},Geometry:function(){return Wa},GeometryLabel:function(){return el},Interaction:function(){return Pa},InteractionAction:function(){return me},LAYER:function(){return mt},Types:function(){return kb},Util:function(){return rd},VERSION:function(){return Ob},View:function(){return Uu},getActionClass:function(){return Dr},getAnimation:function(){return Ku},getEngine:function(){return nt},getFacet:function(){return Ut},getGeometryLabel:function(){return Lc},getGeometryLabelLayout:function(){return Ic},getInteraction:function(){return Va},getShapeFactory:function(){return Qu},getTheme:function(){return ht},registerAction:function(){return Re},registerAnimation:function(){return dn},registerComponentController:function(){return xi},registerEngine:function(){return J},registerFacet:function(){return Kt},registerGeometry:function(){return ma},registerGeometryLabel:function(){return ds},registerGeometryLabelLayout:function(){return Co},registerInteraction:function(){return Fi},registerShape:function(){return Ai},registerShapeFactory:function(){return oo},registerTheme:function(){return It}});var T={};d.r(T),d.d(T,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var M={};d.r(M),d.d(M,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var A={};d.r(A),d.d(A,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var p={};d.r(p),d.d(p,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var w={};d.r(w),d.d(w,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var y={};d.r(y),d.d(y,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var b={};d.r(b),d.d(b,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var x={};d.r(x),d.d(x,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var E={};d.r(E),d.d(E,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var k={};d.r(k),d.d(k,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var D={};d.r(D),d.d(D,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var N={};d.r(N),d.d(N,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var z={};d.r(z),d.d(z,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var W={};d.r(W),d.d(W,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var X={};d.r(X),d.d(X,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var U={};d.r(U),d.d(U,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var et={};d.r(et),d.d(et,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var Q={};d.r(Q),d.d(Q,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var ct={};d.r(ct),d.d(ct,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var Lt={};d.r(Lt),d.d(Lt,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var _t={};d.r(_t),d.d(_t,{EVENT_MAP:function(){return Si},onEvent:function(){return vn}});var yt={};d.r(yt),d.d(yt,{calculationItemsBBox:function(){return wm},cloneEvent:function(){return Jl},formatPadding:function(){return If},isNaN:function(){return Ja},isViewportChanged:function(){return bm},processParallelEdges:function(){return mR}});var bt={};d.r(bt),d.d(bt,{getColorsWithSubjectColor:function(){return Pm},mixColor:function(){return Ia}});var Mt={};d.r(Mt),d.d(Mt,{Line:function(){return Bo},applyMatrix:function(){return ks},distance:function(){return Os},floydWarshall:function(){return Ff},fractionToLine:function(){return Gf},getAdjMatrix:function(){return Rf},getBBoxBoundLine:function(){return Yf},getCircleCenterByPoints:function(){return Df},getCircleIntersectByPoint:function(){return Vm},getDegree:function(){return iu},getEllipseIntersectByPoint:function(){return Hm},getLineIntersect:function(){return Is},getPointsCenter:function(){return Qm},getRectIntersectByPoint:function(){return Xm},intersectBBox:function(){return Km},invertMatrix:function(){return Wm},isPointInPolygon:function(){return Bs},isPointsOverlap:function(){return zf},isPolygonsIntersect:function(){return Nf},itemIntersectByLine:function(){return $m},move:function(){return Zm},pointLineSquareDist:function(){return Jm},pointRectSquareDist:function(){return qm},rotate:function(){return JR},scale:function(){return QR},scaleMatrix:function(){return jm},squareDist:function(){return nu},translate:function(){return Um}});var xt={};d.r(xt),d.d(xt,{getClosedSpline:function(){return Xf},getControlPoint:function(){return au},getSpline:function(){return tx},paddedHull:function(){return ox},pathToPoints:function(){return ou},pointsToPolygon:function(){return ex},roundedHull:function(){return ax}});var Bt={};d.r(Bt),d.d(Bt,{getBBox:function(){return lu},getChartRegion:function(){return CN},getComboBBox:function(){return Uf},getLabelPosition:function(){return uu},getLetterWidth:function(){return xx},getLoopCfgs:function(){return gx},getTextSize:function(){return bx},plainCombosToTrees:function(){return Wf},radialLayout:function(){return mx},reconstructTree:function(){return jf},traverseTree:function(){return Wn},traverseTreeUp:function(){return ga}});var wt={};d.r(wt),d.d(wt,{adjMatrix:function(){return _u},breadthFirstSearch:function(){return m8},degree:function(){return a1},depthFirstSearch:function(){return Y1},detectAllCycles:function(){return w8},detectAllDirectedCycle:function(){return V1},detectAllUndirectedCycle:function(){return X1},detectDirectedCycle:function(){return S8},findAllPath:function(){return T8},findShortestPath:function(){return A8},floydWarshall:function(){return u1},getConnectedComponents:function(){return z1},getPageRank:function(){return F8},minimumSpanningTree:function(){return B8}});var H=d(59301),K=d(50058),B=d(44614),h=d(26169),mt;(function(n){n.FORE="fore",n.MID="mid",n.BG="bg"})(mt||(mt={}));var gt;(function(n){n.TOP="top",n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.RIGHT="right",n.RIGHT_TOP="right-top",n.RIGHT_BOTTOM="right-bottom",n.LEFT="left",n.LEFT_TOP="left-top",n.LEFT_BOTTOM="left-bottom",n.BOTTOM="bottom",n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n.RADIUS="radius",n.CIRCLE="circle",n.NONE="none"})(gt||(gt={}));var Vt;(function(n){n.AXIS="axis",n.GRID="grid",n.LEGEND="legend",n.TOOLTIP="tooltip",n.ANNOTATION="annotation",n.OTHER="other"})(Vt||(Vt={}));var Jt={FORE:3,MID:2,BG:1},zt;(function(n){n.BEFORE_RENDER="beforerender",n.AFTER_RENDER="afterrender",n.BEFORE_PAINT="beforepaint",n.AFTER_PAINT="afterpaint",n.BEFORE_CHANGE_DATA="beforechangedata",n.AFTER_CHANGE_DATA="afterchangedata",n.BEFORE_CLEAR="beforeclear",n.AFTER_CLEAR="afterclear",n.BEFORE_DESTROY="beforedestroy"})(zt||(zt={}));var Qt;(function(n){n.MOUSE_ENTER="plot:mouseenter",n.MOUSE_DOWN="plot:mousedown",n.MOUSE_MOVE="plot:mousemove",n.MOUSE_UP="plot:mouseup",n.MOUSE_LEAVE="plot:mouseleave",n.TOUCH_START="plot:touchstart",n.TOUCH_MOVE="plot:touchmove",n.TOUCH_END="plot:touchend",n.TOUCH_CANCEL="plot:touchcancel",n.CLICK="plot:click",n.DBLCLICK="plot:dblclick",n.CONTEXTMENU="plot:contextmenu",n.LEAVE="plot:leave",n.ENTER="plot:enter"})(Qt||(Qt={}));var oe;(function(n){n.ACTIVE="active",n.INACTIVE="inactive",n.SELECTED="selected",n.DEFAULT="default"})(oe||(oe={}));var se=["color","shape","size"],jt="_origin",Pt=1,pt=1,st=.25,Ct={};function nt(n){var r=Ct[n];if(!r)throw new Error("G engine '"+n+"' is not exist, please register it at first.");return r}function J(n,r){Ct[n]=r}var vt=d(44717),Tt=d(62870);function Ht(n){var r=getComputedStyle(n);return{width:(n.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10),height:(n.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)}}function ue(n){return typeof n=="number"&&!isNaN(n)}function Ce(n,r,t,e){var i=t,a=e;if(r){var o=Ht(n);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(ue(i)?i:Pt,Pt),height:Math.max(ue(a)?a:pt,pt)}}function Fe(n){var r=n.parentNode;r&&r.removeChild(n)}var Ve=d(49336),dr=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this)||this;e.destroyed=!1;var i=t.visible,a=i===void 0?!0:i;return e.visible=a,e}return r.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},r.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},r.prototype.destroy=function(){this.off(),this.destroyed=!0},r.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},r}(Ve.default),xr=dr,Er=d(23443),Yr=d(63638),gr=d(76499),ri=d(36652),bi=d(14533),Qr=d(65624),gi=d(41026),hn=gi.Axis.Line,mn=gi.Axis.Circle,Cn=gi.Grid.Line,Xn=gi.Grid.Circle,Xt=gi.Legend.Category,$t=gi.Legend.Continuous,he=gi.Tooltip.Html,ce=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function we(n){var r="linear";return ce.test(n)?r="time":(0,h.isString)(n)&&(r="cat"),r}function Ee(n,r,t){var e=r||[];if((0,h.isNumber)(n)||(0,h.isNil)((0,h.firstValue)(e,n))&&(0,h.isEmpty)(t)){var i=(0,Qr.getScale)("identity");return new i({field:n.toString(),values:[n]})}var a=(0,h.valuesOfKey)(e,n),o=(0,h.get)(t,"type",we(a[0])),s=(0,Qr.getScale)(o);return new s((0,B.__assign)({field:n,values:a},t))}function _e(n,r){if(n.type!=="identity"&&r.type!=="identity"){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);n.change(t)}}function Le(n){return n.alias||n.field}var xe=d(7124);function er(n){var r,t;switch(n){case gt.TOP:r={x:0,y:1},t={x:1,y:1};break;case gt.RIGHT:r={x:1,y:0},t={x:1,y:1};break;case gt.BOTTOM:r={x:0,y:0},t={x:1,y:0};break;case gt.LEFT:r={x:0,y:0},t={x:0,y:1};break;default:r=t={x:0,y:0}}return{start:r,end:t}}function Xe(n){var r,t;return n.isTransposed?(r={x:0,y:0},t={x:1,y:0}):(r={x:0,y:0},t={x:0,y:1}),{start:r,end:t}}function hr(n,r){var t={start:{x:0,y:0},end:{x:0,y:0}};n.isRect?t=er(r):n.isPolar&&(t=Xe(n));var e=t.start,i=t.end;return{start:n.convert(e),end:n.convert(i)}}function Ar(n,r){if(n.isRect)return n.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(r)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(r)?-1:1;if(n.isPolar){var t=n.x.start;return t<0?-1:1}return 1}function fr(n){var r=n.start,t=n.end;return r.x===t.x}function Sr(n,r){var t=n.start,e=n.end,i=fr(n);return i?(t.y-e.y)*(r.x-t.x)>0?1:-1:(e.x-t.x)*(t.y-r.y)>0?-1:1}function yr(n,r){return(0,h.get)(n,["components","axis",r],{})}function Or(n){var r=n.x,t=n.y,e=n.circleCenter,i=t.start>t.end,a=n.isTransposed?n.convert({x:i?0:1,y:0}):n.convert({x:0,y:i?0:1}),o=[a.x-e.x,a.y-e.y],s=[1,0],l=a.y>e.y?xe.angle(o,s):xe.angle(o,s)*-1,u=l+(r.end-r.start),f=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2));return{center:e,radius:f,startAngle:l,endAngle:u}}function lr(n,r){return(0,h.isBoolean)(n)?n===!1?!1:{}:(0,h.get)(n,[r])}function Fr(n,r){return(0,h.get)(n,"position",r)}function Kr(n,r){return(0,h.get)(r,["title","text"],Le(n))}var Vr=function(){function n(r,t){this.destroyed=!1,this.facets=[],this.view=r,this.cfg=(0,h.deepMix)({},this.getDefaultCfg(),t)}return n.prototype.init=function(){this.container||(this.container=this.createContainer());var r=this.view.getData();this.facets=this.generateFacets(r)},n.prototype.render=function(){this.renderViews()},n.prototype.update=function(){},n.prototype.clear=function(){this.clearFacetViews()},n.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},n.prototype.facetToView=function(r){var t=r.region,e=r.data,i=r.padding,a=i===void 0?this.cfg.padding:i,o=this.view.createView({region:t,padding:a});o.data(e||[]),r.view=o,this.beforeEachView(o,r);var s=this.cfg.eachView;return s&&s(o,r),this.afterEachView(o,r),o},n.prototype.createContainer=function(){var r=this.view.getLayer(mt.FORE);return r.addGroup()},n.prototype.renderViews=function(){this.createFacetViews()},n.prototype.createFacetViews=function(){var r=this;return this.facets.map(function(t){return r.facetToView(t)})},n.prototype.clearFacetViews=function(){var r=this;(0,h.each)(this.facets,function(t){t.view&&(r.view.removeView(t.view),t.view=void 0)})},n.prototype.getFieldValues=function(r,t){var e=[],i={};return(0,h.each)(r,function(a){var o=a[t];!(0,h.isNil)(o)&&!i[o]&&(e.push(o),i[o]=!0)}),e},n.prototype.getRegion=function(r,t,e,i){var a=1/(t===0?1:t),o=1/(r===0?1:r),s={x:a*e,y:o*i},l={x:a*(e+1),y:o*(i+1)};return{start:s,end:l}},n.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},n.prototype.getDefaultTitleCfg=function(){var r=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:r}}},n.prototype.processAxis=function(r,t){var e=r.getOptions(),i=e.coordinate,a=r.geometries,o=(0,h.get)(i,"type","rect");if(o==="rect"&&a.length){(0,h.isNil)(e.axes)&&(e.axes={});var s=e.axes,l=a[0].getXYFields(),u=l[0],f=l[1],c=lr(s,u),v=lr(s,f);c!==!1&&(e.axes[u]=this.getXAxisOption(u,s,c,t)),v!==!1&&(e.axes[f]=this.getYAxisOption(f,s,v,t))}},n.prototype.getFacetDataFilter=function(r){return function(t){return(0,h.every)(r,function(e){var i=e.field,a=e.value;return!(0,h.isNil)(a)&&i?t[i]===a:!0})}},n}(),Zr={},Ut=function(n){return Zr[(0,h.lowerCase)(n)]},Kt=function(n,r){Zr[(0,h.lowerCase)(n)]=r},ie=function(){function n(r,t){this.context=r,this.cfg=t,r.addAction(this)}return n.prototype.applyCfg=function(r){(0,h.assign)(this,r)},n.prototype.init=function(){this.applyCfg(this.cfg)},n.prototype.destroy=function(){this.context.removeAction(this),this.context=null},n}(),me=ie,Me=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.execute=function(){this.callback&&this.callback(this.context)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.callback=null},r}(me),Pe=Me,Je={};function sr(n,r){var t=Je[n],e=null;if(t){var i=t.ActionClass,a=t.cfg;e=new i(r,a),e.name=n,e.init()}return e}function Dr(n){var r=Je[n];return(0,h.get)(r,"ActionClass")}function Re(n,r,t){Je[n]={ActionClass:r,cfg:t}}function Tr(n){delete Je[n]}function vi(n,r){var t=new Pe(r);return t.callback=n,t.name="callback",t}function Mi(n){if((0,h.isEmpty)(n))return null;var r=n[0].x,t=n[0].x,e=n[0].y,i=n[0].y;return(0,h.each)(n,function(a){r=r>a.x?a.x:r,t=t<a.x?a.x:t,e=e>a.y?a.y:e,i=i<a.y?a.y:i}),{minX:r,maxX:t,minY:e,maxY:i,centerX:(r+t)/2,centerY:(e+i)/2}}function oi(n,r,t,e){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function di(n,r,t,e,i,a){a===void 0&&(a=0);var o=oi(n,r,t,e),s=oi(n,r,t,i),l=oi(n,r,a,e),u=oi(n,r,a,i);if(i-e==Math.PI*2){var f=oi(n,r,t,e+Math.PI),c=oi(n,r,a,e+Math.PI),v=[["M",o.x,o.y],["A",t,t,0,1,1,f.x,f.y],["A",t,t,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(v.push(["A",a,a,0,1,0,c.x,c.y]),v.push(["A",a,a,0,1,0,u.x,u.y])),v.push(["M",o.x,o.y]),v.push(["Z"]),v}var g=i-e<=Math.PI?0:1,C=[["M",o.x,o.y],["A",t,t,0,g,1,s.x,s.y],["L",u.x,u.y]];return a&&C.push(["A",a,a,0,g,0,l.x,l.y]),C.push(["L",o.x,o.y]),C.push(["Z"]),C}function Li(n,r,t,e,i){var a=oi(n,r,t,e),o=oi(n,r,t,i);if((0,h.isNumberEqual)(i-e,Math.PI*2)){var s=oi(n,r,t,e+Math.PI);return[["M",a.x,a.y],["A",t,t,0,1,1,s.x,s.y],["A",t,t,0,1,1,a.x,a.y],["A",t,t,0,1,0,s.x,s.y],["A",t,t,0,1,0,a.x,a.y],["Z"]]}var l=i-e<=Math.PI?0:1;return[["M",a.x,a.y],["A",t,t,0,l,1,o.x,o.y]]}function qi(n,r){var t=n.points,e=Mi(t),i,a,o=r.startAngle,s=r.endAngle,l=s-o;return r.isTransposed?(i=e.maxY*l,a=e.minY*l):(i=e.maxX*l,a=e.minX*l),i+=o,a+=o,{startAngle:a,endAngle:i}}function fn(n,r){if((0,h.isNumber)(n)&&(0,h.isNumber)(r))return[n,r];for(var t=-1,e=0,i=0,a,o=n.length-1,s,l=0;++t<n.length;)a=o,o=t,l+=s=n[a]*r[o]-n[o]*r[a],e+=(n[a]+n[o])*s,i+=(r[a]+r[o])*s;return l*=3,[e/l,i/l]}function Ii(n,r){var t=n.attr(),e=r.attr();return(0,h.each)(t,function(i,a){e[a]===void 0&&(e[a]=void 0)}),e}function pn(n,r,t){var e=Math.min(r,t),i=Math.max(r,t);return n>=e&&n<=i}function Ln(n,r,t){if((0,h.isString)(n))return n.padEnd(r,t);if((0,h.isArray)(n)){var e=n.length;if(e<r)for(var i=r-e,a=0;a<i;a++)n.push(t)}return n}function Et(n,r){return r.forEach(function(t){delete n[t]}),n}function ft(n,r,t){r===void 0&&(r=[]),t===void 0&&(t={});for(var e=0,i=n;e<i.length;e++){var a=i[e];t[a]||(r.push(a),t[a]=!0)}return r}function it(n){if(n.isPolar&&!n.isTransposed)return(n.endAngle-n.startAngle)*n.getRadius();var r=n.convert({x:0,y:0}),t=n.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}function ot(n){if(n.isPolar){var r=n.startAngle,t=n.endAngle;return t-r==Math.PI*2}return!1}function Ot(n,r){var t=n.getCenter();return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}function Zt(n,r){var t=!1;if(n)if(n.type==="theta"){var e=n.start,i=n.end;t=pn(r.x,e.x,i.x)&&pn(r.y,e.y,i.y)}else{var a=n.invert(r);t=pn(a.x,0,1)&&pn(a.y,0,1)}return t}function de(n,r){var t=n.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function pe(n,r){r===void 0&&(r=0);var t=n.start,e=n.end,i=n.getWidth(),a=n.getHeight();if(n.isPolar){var o=n.startAngle,s=n.endAngle,l=n.getCenter(),u=n.getRadius();return{type:"path",startState:{path:di(l.x,l.y,u+r,o,o)},endState:function(c){var v=(s-o)*c+o,g=di(l.x,l.y,u+r,o,v);return{path:g}},attrs:{path:di(l.x,l.y,u+r,o,s)}}}var f;return n.isTransposed?f={height:a+r*2}:f={width:i+r*2},{type:"rect",startState:{x:t.x-r,y:e.y-r,width:n.isTransposed?i+r*2:0,height:n.isTransposed?0:a+r*2},endState:f,attrs:{x:t.x-r,y:e.y-r,width:i+r*2,height:a+r*2}}}function ye(n,r){var t=[];if(n.length){t.push(["M",n[0].x,n[0].y]);for(var e=1,i=n.length;e<i;e+=1){var a=n[e];t.push(["L",a.x,a.y])}r&&t.push(["Z"])}return t}function Ge(n,r){for(var t=[n[0]],e=1,i=n.length;e<i;e=e+2){var a=r.convert({x:n[e],y:n[e+1]});t.push(a.x,a.y)}return t}function $e(n,r,t){var e=t.isTransposed,i=t.startAngle,a=t.endAngle,o={x:n[1],y:n[2]},s={x:r[1],y:r[2]},l=[],u=e?"y":"x",f=Math.abs(s[u]-o[u])*(a-i),c=s[u]>=o[u]?1:0,v=f>Math.PI?1:0,g=t.convert(s),C=Ot(t,g);if(C>=.5)if(f===Math.PI*2){var O={x:(s.x+o.x)/2,y:(s.y+o.y)/2},F=t.convert(O);l.push(["A",C,C,0,v,c,F.x,F.y]),l.push(["A",C,C,0,v,c,g.x,g.y])}else l.push(["A",C,C,0,v,c,g.x,g.y]);return l}function je(n){(0,h.each)(n,function(r,t){var e=r;if(e[0].toLowerCase()==="a"){var i=n[t-1],a=n[t+1];a&&a[0].toLowerCase()==="a"?i&&i[0].toLowerCase()==="l"&&(i[0]="M"):i&&i[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var mr=function(n,r,t,e){var i=[],a,o,s=!!e,l,u;if(s){l=[Infinity,Infinity],u=[-Infinity,-Infinity];for(var f=0,c=n.length;f<c;f++){var v=n[f];l=xe.min([0,0],l,v),u=xe.max([0,0],u,v)}l=xe.min([0,0],l,e[0]),u=xe.max([0,0],u,e[1])}for(var f=0,g=n.length;f<g;f++){var v=n[f];if(t)a=n[f?f-1:g-1],o=n[(f+1)%g];else if(f===0||f===g-1){i.push(v);continue}else a=n[f-1],o=n[f+1];var C=[0,0];C=xe.sub(C,o,a),C=xe.scale(C,C,r);var O=xe.distance(v,a),F=xe.distance(v,o),G=O+F;G!==0&&(O/=G,F/=G);var Y=xe.scale([0,0],C,-O),$=xe.scale([0,0],C,F),q=xe.add([0,0],v,Y),ut=xe.add([0,0],v,$);s&&(q=xe.max([0,0],q,l),q=xe.min([0,0],q,u),ut=xe.max([0,0],ut,l),ut=xe.min([0,0],ut,u)),i.push(q),i.push(ut)}return t&&i.push(i.shift()),i};function vr(n,r,t){for(var e=!!r,i=[],a=0,o=n.length;a<o;a+=2)i.push([n[a],n[a+1]]);for(var s=mr(i,.4,e,t),l=i.length,u=[],f,c,v,a=0;a<l-1;a++)f=s[a*2],c=s[a*2+1],v=i[a+1],u.push(["C",f[0],f[1],c[0],c[1],v[0],v[1]]);return e&&(f=s[l],c=s[l+1],v=i[0],u.push(["C",f[0],f[1],c[0],c[1],v[0],v[1]])),u}function He(n,r){return ye(n,r)}function kr(n,r,t){var e=[],i=n[0],a=null;if(n.length<=2)return He(n,r);for(var o=0,s=n.length;o<s;o++){var l=n[o];(!a||!(a.x===l.x&&a.y===l.y))&&(e.push(l.x),e.push(l.y),a=l)}var u=t||[[0,0],[1,1]],f=vr(e,r,u);return f.unshift(["M",i.x,i.y]),f}function ti(n,r){var t=[];return(0,h.each)(r,function(e){var i=e[0];switch(i.toLowerCase()){case"m":case"l":case"c":t.push(Ge(e,n));break;case"z":default:t.push(e);break}}),t}function dt(n,r){var t=[],e,i,a,o;return(0,h.each)(r,function(s,l){var u=s[0];switch(u.toLowerCase()){case"m":case"c":case"q":t.push(Ge(s,n));break;case"l":e=r[l-1],i=s,a=n.isTransposed,o=a?e[e.length-2]===i[1]:e[e.length-1]===i[2],o?t=t.concat($e(e,i,n)):t.push(Ge(s,n));break;case"z":default:t.push(s);break}}),je(t),t}var rt=function(){function n(r,t,e,i){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=r,this.y=t,this.height=i,this.width=e}return n.fromRange=function(r,t,e,i){return new n(r,t,e-r,i-t)},Object.defineProperty(n.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(r){return this.x===r.x&&this.y===r.y&&this.width===r.width&&this.height===r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.add=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=this.clone();return(0,h.each)(r,function(i){e.x=Math.min(i.x,e.x),e.y=Math.min(i.y,e.y),e.width=Math.max(i.maxX,e.maxX)-e.x,e.height=Math.max(i.maxY,e.maxY)-e.y}),e},n.prototype.merge=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=this.clone();return(0,h.each)(r,function(i){e.x=Math.max(i.x,e.x),e.y=Math.max(i.y,e.y),e.width=Math.min(i.maxX,e.maxX)-e.x,e.height=Math.min(i.maxY,e.maxY)-e.y}),e},n.prototype.cut=function(r,t){var e=r.width,i=r.height;switch(t){case gt.TOP:case gt.TOP_LEFT:case gt.TOP_RIGHT:return n.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case gt.RIGHT:case gt.RIGHT_TOP:case gt.RIGHT_BOTTOM:return n.fromRange(this.minX,this.minY,this.maxX-e,this.maxY);case gt.BOTTOM:case gt.BOTTOM_LEFT:case gt.BOTTOM_RIGHT:return n.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case gt.LEFT:case gt.LEFT_TOP:case gt.LEFT_BOTTOM:return n.fromRange(this.minX+e,this.minY,this.maxX,this.maxY);default:return this}},n.prototype.shrink=function(r){var t=r[0],e=r[1],i=r[2],a=r[3];return new n(this.x+a,this.y+t,this.width-a-e,this.height-t-i)},n.prototype.exceed=function(r){return[Math.max(-this.minY+r.minY,0),Math.max(this.maxX-r.maxX,0),Math.max(this.maxY-r.maxY,0),Math.max(-this.minX+r.minX,0)]},n.prototype.size=function(){return this.width*this.height},n}(),j=function(n,r){var t=r.start,e=r.end;return new rt(n.x+n.width*t.x,n.y+n.height*t.y,n.width*Math.abs(e.x-t.x),n.height*Math.abs(e.y-t.y))};function Z(n){return[[n.minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}var St=d(65410);function Dt(n,r){var t=n.event,e=t.target,i=e.getCanvasBBox();return i.width>=r||i.height>=r?i:null}function qt(n,r){var t=n.event,e=t.target,i=e.getCanvasBBox();return i.width>=r||i.height>=r?e.attr("path"):null}function ae(n){var r=n.event,t,e=r.target;return e&&(t=e.get("element")),t}function ne(n){var r=n.event,t=r.target,e;return t&&(e=t.get("delegateObject")),e}function Oe(n){var r=n.event.gEvent;return!(r&&r.fromShape&&r.toShape&&r.fromShape.get("element")===r.toShape.get("element"))}function Ie(n){return n&&n.component&&n.component.isList()}function De(n){return n&&n.component&&n.component.isSlider()}function or(n){var r=n.event,t=r.target;return t&&t.get("name")==="mask"}function nr(n,r){var t=n.event.target;if(t.get("type")==="path"){var e=qt(n,r);return e?Oi(n.view,e):void 0}var i=Dt(n,r);return i?ur(n.view,i):null}function ze(n,r,t){var e=Dt(n,t);if(!e)return null;var i=n.view,a=ea(i,r,{x:e.x,y:e.y}),o=ea(i,r,{x:e.maxX,y:e.maxY}),s={minX:a.x,minY:a.y,maxX:o.x,maxY:o.y};return ur(r,s)}function cr(n){var r=n.geometries,t=[];return(0,h.each)(r,function(e){var i=e.elements;t=t.concat(i)}),n.views&&n.views.length&&(0,h.each)(n.views,function(e){t=t.concat(cr(e))}),t}function Rr(n,r,t){var e=cr(n);return e.filter(function(i){return $r(i,r)===t})}function Jr(n,r){var t=n.geometries,e=[];return(0,h.each)(t,function(i){var a=i.getElementsBy(function(o){return o.hasState(r)});e=e.concat(a)}),e}function $r(n,r){var t=n.getModel(),e=t.data,i;return(0,h.isArray)(e)?i=e[0][r]:i=e[r],i}function Pr(n,r){return!(r.minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)}function ur(n,r){var t=cr(n),e=[];return(0,h.each)(t,function(i){var a=i.shape,o=a.getCanvasBBox();Pr(r,o)&&e.push(i)}),e}function ii(n){var r=[];return(0,h.each)(n,function(t){var e=t[0];if(e!=="A")for(var i=1;i<t.length;i=i+2)r.push([t[i],t[i+1]]);else{var a=t.length;r.push([t[a-2],t[a-1]])}}),r}function Oi(n,r){var t=cr(n),e=ii(r),i=t.filter(function(a){var o=a.shape,s;if(o.get("type")==="path")s=ii(o.attr("path"));else{var l=o.getCanvasBBox();s=Z(l)}return(0,St.default)(e,s)});return i}function Wi(n){return n.getComponents().map(function(r){return r.component})}function an(n,r){var t=r.x-n.x,e=r.y-n.y;return Math.sqrt(t*t+e*e)}function oa(n,r){if(n.length<=2)return He(n,!1);var t=n[0],e=[];(0,h.each)(n,function(a){e.push(a.x),e.push(a.y)});var i=vr(e,r,null);return i.unshift(["M",t.x,t.y]),i}function Vn(n,r){return n.x<=r.x&&n.maxX>=r.x&&n.y<=r.y&&n.maxY>r.y}function xn(n){var r=n.parent,t=null;return r&&(t=r.views.filter(function(e){return e!==n})),t}function ha(n,r){var t=n.getCoordinate();return t.invert(r)}function ea(n,r,t){var e=ha(n,t);return r.getCoordinate().convert(e)}function _a(n,r,t,e){var i=!1;return(0,h.each)(n,function(a){if(a[t]===r[t]&&a[e]===r[e])return i=!0,!1}),i}function fa(n,r){var t=n.getScaleByField(r);return!t&&n.views&&(0,h.each)(n.views,function(e){if(t=fa(e,r),t)return!1}),t}var wo=function(){function n(r){this.actions=[],this.event=null,this.cacheMap={},this.view=r}return n.prototype.cache=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)return this.cacheMap[r[0]];r.length===2&&(this.cacheMap[r[0]]=r[1])},n.prototype.getAction=function(r){return this.actions.find(function(t){return t.name===r})},n.prototype.addAction=function(r){this.actions.push(r)},n.prototype.removeAction=function(r){var t=this.actions,e=this.actions.indexOf(r);e>=0&&t.splice(e,1)},n.prototype.getCurrentPoint=function(){var r=this.event;if(r)if(r.target instanceof HTMLElement){var t=this.view.getCanvas(),e=t.getPointByClient(r.clientX,r.clientY);return e}else return{x:r.x,y:r.y};return null},n.prototype.getCurrentShape=function(){return(0,h.get)(this.event,["gEvent","shape"])},n.prototype.isInPlot=function(){var r=this.getCurrentPoint();return r?this.view.isPointInPlot(r):!1},n.prototype.isInShape=function(r){var t=this.getCurrentShape();return t?t.get("name")===r:!1},n.prototype.isInComponent=function(r){var t=Wi(this.view),e=this.getCurrentPoint();return e?!!t.find(function(i){var a=i.getBBox();return r?i.get("name")===r&&Vn(a,e):Vn(a,e)}):!1},n.prototype.destroy=function(){this.view=null,this.event=null,(0,h.each)(this.actions.slice(),function(r){r.destroy()}),this.actions=null,this.cacheMap=null},n}(),za=wo,So=function(){function n(r,t){this.view=r,this.cfg=t}return n.prototype.init=function(){this.initEvents()},n.prototype.initEvents=function(){},n.prototype.clearEvents=function(){},n.prototype.destroy=function(){this.clearEvents()},n}(),Pa=So;function Xa(n,r){var t=n.split(":"),e=t[0],i=r.getAction(e)||sr(e,r);if(!i)throw new Error("There is no action named "+e);var a=t[1];return{action:i,methodName:a}}function Un(n){var r=n.action,t=n.methodName;if(r[t])r[t]();else throw new Error("Action("+r.name+") doesn't have a method called "+t)}var bn={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},ro=function(n){(0,B.__extends)(r,n);function r(t,e){var i=n.call(this,t,e)||this;return i.callbackCaches={},i.emitCaches={},i.steps=e,i}return r.prototype.init=function(){this.initContext(),n.prototype.init.call(this)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},r.prototype.initEvents=function(){var t=this;(0,h.each)(this.steps,function(e,i){(0,h.each)(e,function(a){var o=t.getActionCallback(i,a);o&&t.bindEvent(a.trigger,o)})})},r.prototype.clearEvents=function(){var t=this;(0,h.each)(this.steps,function(e,i){(0,h.each)(e,function(a){var o=t.getActionCallback(i,a);o&&t.offEvent(a.trigger,o)})})},r.prototype.initContext=function(){var t=this.view,e=new za(t);this.context=e;var i=this.steps;(0,h.each)(i,function(a){(0,h.each)(a,function(o){if((0,h.isFunction)(o.action))o.actionObject={action:vi(o.action,e),methodName:"execute"};else if((0,h.isString)(o.action))o.actionObject=Xa(o.action,e);else if((0,h.isArray)(o.action)){var s=o.action;o.actionObject=[],(0,h.each)(s,function(l){o.actionObject.push(Xa(l,e))})}})})},r.prototype.isAllowStep=function(t){var e=this.currentStepName,i=this.steps;if(e===t||t===bn.SHOW_ENABLE)return!0;if(t===bn.PROCESSING)return e===bn.START;if(t===bn.START)return e!==bn.PROCESSING;if(t===bn.END)return e===bn.PROCESSING||e===bn.START;if(t===bn.ROLLBACK){if(i[bn.END])return e===bn.END;if(e===bn.START)return!0}return!1},r.prototype.isAllowExcute=function(t,e){if(this.isAllowStep(t)){var i=this.getKey(t,e);return e.once&&this.emitCaches[i]?!1:e.isEnable?e.isEnable(this.context):!0}return!1},r.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},r.prototype.afterExecute=function(t,e){t!==bn.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var i=this.getKey(t,e);this.emitCaches[i]=!0},r.prototype.getKey=function(t,e){return t+e.trigger+e.action},r.prototype.getActionCallback=function(t,e){var i=this,a=this.context,o=this.callbackCaches,s=e.actionObject;if(e.action&&s){var l=this.getKey(t,e);if(!o[l]){var u=function(f){a.event=f,i.isAllowExcute(t,e)?((0,h.isArray)(s)?(0,h.each)(s,function(c){a.event=f,Un(c)}):(a.event=f,Un(s)),i.afterExecute(t,e),e.callback&&(a.event=f,e.callback(a))):a.event=null};e.debounce?o[l]=(0,h.debounce)(u,e.debounce.wait,e.debounce.immediate):e.throttle?o[l]=(0,h.throttle)(u,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):o[l]=u}return o[l]}return null},r.prototype.bindEvent=function(t,e){var i=t.split(":");i[0]==="window"?window.addEventListener(i[1],e):i[0]==="document"?document.addEventListener(i[1],e):this.view.on(t,e)},r.prototype.offEvent=function(t,e){var i=t.split(":");i[0]==="window"?window.removeEventListener(i[1],e):i[0]==="document"?document.removeEventListener(i[1],e):this.view.off(t,e)},r}(Pa),io=ro,Zn={};function Va(n){return Zn[(0,h.lowerCase)(n)]}function Fi(n,r){Zn[(0,h.lowerCase)(n)]=r}function no(n,r,t){var e=Va(n);if(!e)return null;if((0,h.isPlainObject)(e)){var i=(0,h.mix)((0,h.clone)(e),t);return new io(r,i)}else{var a=e;return new a(r,t)}}var cn=d(44414),Ri=d(50669);function ao(n){var r,t={point:{default:{fill:n.pointFillColor,r:n.pointSize,stroke:n.pointBorderColor,lineWidth:n.pointBorder,fillOpacity:n.pointFillOpacity},active:{stroke:n.pointActiveBorderColor,lineWidth:n.pointActiveBorder},selected:{stroke:n.pointSelectedBorderColor,lineWidth:n.pointSelectedBorder},inactive:{fillOpacity:n.pointInactiveFillOpacity,strokeOpacity:n.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:n.hollowPointFillColor,lineWidth:n.hollowPointBorder,stroke:n.hollowPointBorderColor,strokeOpacity:n.hollowPointBorderOpacity,r:n.hollowPointSize},active:{stroke:n.hollowPointActiveBorderColor,strokeOpacity:n.hollowPointActiveBorderOpacity},selected:{lineWidth:n.hollowPointSelectedBorder,stroke:n.hollowPointSelectedBorderColor,strokeOpacity:n.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:n.hollowPointInactiveBorderOpacity}},area:{default:{fill:n.areaFillColor,fillOpacity:n.areaFillOpacity,stroke:null},active:{fillOpacity:n.areaActiveFillOpacity},selected:{fillOpacity:n.areaSelectedFillOpacity},inactive:{fillOpacity:n.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:n.hollowAreaBorderColor,lineWidth:n.hollowAreaBorder,strokeOpacity:n.hollowAreaBorderOpacity},active:{fill:null,lineWidth:n.hollowAreaActiveBorder},selected:{fill:null,lineWidth:n.hollowAreaSelectedBorder},inactive:{strokeOpacity:n.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:n.intervalFillColor,fillOpacity:n.intervalFillOpacity},active:{stroke:n.intervalActiveBorderColor,lineWidth:n.intervalActiveBorder},selected:{stroke:n.intervalSelectedBorderColor,lineWidth:n.intervalSelectedBorder},inactive:{fillOpacity:n.intervalInactiveFillOpacity,strokeOpacity:n.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:n.hollowIntervalFillColor,stroke:n.hollowIntervalBorderColor,lineWidth:n.hollowIntervalBorder,strokeOpacity:n.hollowIntervalBorderOpacity},active:{stroke:n.hollowIntervalActiveBorderColor,lineWidth:n.hollowIntervalActiveBorder,strokeOpacity:n.hollowIntervalActiveBorderOpacity},selected:{stroke:n.hollowIntervalSelectedBorderColor,lineWidth:n.hollowIntervalSelectedBorder,strokeOpacity:n.hollowIntervalSelectedBorderOpacity},inactive:{stroke:n.hollowIntervalInactiveBorderColor,lineWidth:n.hollowIntervalInactiveBorder,strokeOpacity:n.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:n.lineBorderColor,lineWidth:n.lineBorder,strokeOpacity:n.lineBorderOpacity,fill:null,lineAppendWidth:10},active:{lineWidth:n.lineActiveBorder},selected:{lineWidth:n.lineSelectedBorder},inactive:{strokeOpacity:n.lineInactiveBorderOpacity}}},e={title:{autoRotate:!0,position:"center",style:{fill:n.axisTitleTextFillColor,fontSize:n.axisTitleTextFontSize,lineHeight:n.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:n.fontFamily}},label:{autoRotate:!0,autoEllipsis:!0,autoHide:!0,offset:16,style:{fill:n.axisLabelFillColor,fontSize:n.axisLabelFontSize,lineHeight:n.axisLabelLineHeight,textBaseline:"middle",fontFamily:n.fontFamily}},line:{style:{lineWidth:n.axisLineBorder,stroke:n.axisLineBorderColor}},tickLine:{style:{lineWidth:n.axisTickLineBorder,stroke:n.axisTickLineBorderColor},alignTick:!0,length:n.axisTickLineLength},subTickLine:null,animate:!0},i={line:{type:"line",style:{stroke:n.axisGridBorderColor,lineWidth:n.axisGridBorder,lineDash:n.axisGridLineDash}},alignTick:!0,animate:!0},a={title:null,marker:{symbol:"circle",style:{r:n.legendCircleMarkerSize,fill:n.legendMarkerColor}},itemName:{spacing:5,style:{fill:n.legendItemNameFillColor,fontFamily:n.fontFamily,fontSize:n.legendItemNameFontSize,lineHeight:n.legendItemNameLineHeight,fontWeight:n.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:.2};return{background:n.backgroundColor,defaultColor:n.brandColor,padding:"auto",fontFamily:n.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:n.paletteQualitative10,colors20:n.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(o){var s=o.geometry.coordinate;if(s.isPolar&&s.isTransposed){var l=qi(o.getModel(),s),u=l.startAngle,f=l.endAngle,c=(u+f)/2,v=7.5,g=v*Math.cos(c),C=v*Math.sin(c);return{matrix:Ri.transform(null,[["t",g,C]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,B.__assign)((0,B.__assign)({},t.line.default),{lineDash:[1,1]})},active:{style:(0,B.__assign)((0,B.__assign)({},t.line.active),{lineDash:[1,1]})},inactive:{style:(0,B.__assign)((0,B.__assign)({},t.line.inactive),{lineDash:[1,1]})},selected:{style:(0,B.__assign)((0,B.__assign)({},t.line.selected),{lineDash:[1,1]})}},dash:{default:{style:(0,B.__assign)((0,B.__assign)({},t.line.default),{lineDash:[5.5,1]})},active:{style:(0,B.__assign)((0,B.__assign)({},t.line.active),{lineDash:[5.5,1]})},inactive:{style:(0,B.__assign)((0,B.__assign)({},t.line.inactive),{lineDash:[5.5,1]})},selected:{style:(0,B.__assign)((0,B.__assign)({},t.line.selected),{lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}}},components:{axis:{top:(0,h.deepMix)({},e,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:(0,h.deepMix)({},e,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:(0,h.deepMix)({},e,{position:"left",label:{offset:8},title:null,line:null,tickLine:null,grid:i,verticalLimitLength:1/3}),right:(0,h.deepMix)({},e,{position:"right",label:{offset:8},title:null,line:null,tickLine:null,grid:i,verticalLimitLength:1/3}),circle:(0,h.deepMix)({},e,{title:null,label:{offset:8},grid:(0,h.deepMix)({},i,{line:{type:"line"}})}),radius:(0,h.deepMix)({},e,{title:null,label:{offset:8},grid:(0,h.deepMix)({},i,{line:{type:"circle"}})})},legend:{right:(0,h.deepMix)({},a,{layout:"vertical"}),left:(0,h.deepMix)({},a,{layout:"vertical"}),top:(0,h.deepMix)({},a,{layout:"horizontal"}),bottom:(0,h.deepMix)({},a,{layout:"horizontal"}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:n.sliderRailHeight,defaultLength:n.sliderRailWidth,style:{fill:n.sliderRailFillColor,stroke:n.sliderRailBorderColor,lineWidth:n.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:n.sliderLabelTextFillColor,fontSize:n.sliderLabelTextFontSize,lineHeight:n.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:n.fontFamily}},handler:{size:n.sliderHandlerWidth,style:{fill:n.sliderHandlerFillColor,stroke:n.sliderHandlerBorderColor}},slidable:!0},margin:[0,0,0,0]},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:n.tooltipCrosshairsBorderColor,lineWidth:n.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(r={},r[""+cn.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:n.tooltipContainerFillColor,opacity:n.tooltipContainerFillOpacity,boxShadow:n.tooltipContainerShadow,borderRadius:n.tooltipContainerBorderRadius+"px",color:n.tooltipTextFillColor,fontSize:n.tooltipTextFontSize+"px",fontFamily:n.fontFamily,lineHeight:n.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},r[""+cn.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},r[""+cn.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},r[""+cn.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},r[""+cn.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},r[""+cn.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},r)},annotation:{arc:{style:{stroke:n.annotationArcBorderColor,lineWidth:n.annotationArcBorder},animate:!0},line:{style:{stroke:n.annotationLineBorderColor,lineDash:n.annotationLineDash,lineWidth:n.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,textAlign:"start",fontFamily:n.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:n.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:n.annotationRegionBorder,stroke:n.annotationRegionBorderColor,fill:n.annotationRegionFillColor,fillOpacity:n.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:n.brandColor,lineWidth:2}},line:{style:{stroke:n.annotationLineBorderColor,lineWidth:n.annotationLineBorder},length:n.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,fontFamily:n.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:n.annotationRegionFillColor,fillOpacity:n.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:n.annotationTextFillColor,stroke:n.annotationTextBorderColor,lineWidth:n.annotationTextBorder,fontSize:n.annotationTextFontSize,fontFamily:n.fontFamily}},animate:!0}}},labels:{offset:12,style:{fill:n.labelFillColor,fontSize:n.labelFontSize,fontFamily:n.fontFamily,stroke:n.labelBorderColor,lineWidth:n.labelBorder},autoRotate:!0},innerLabels:{style:{fill:n.innerLabelFillColor,fontSize:n.innerLabelFontSize,fontFamily:n.fontFamily,stroke:n.innerLabelBorderColor,lineWidth:n.innerLabelBorder},autoRotate:!0},pieLabels:{labelHeight:14,offset:30,labelLine:{style:{lineWidth:n.labelLineBorder}},autoRotate:!0}}}var Ni={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Ha={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Gt=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],at=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],R={backgroundColor:"transparent",brandColor:Gt[0],paletteQualitative10:Gt,paletteQualitative20:at,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:Ni[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:Ni[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:Ni[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:Ni[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:Ni[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:Ni[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:Ni[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Gt[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Ni[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:Ni[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Ni[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ni[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ni[25],annotationArcBorderColor:Ni[15],annotationArcBorder:.5,annotationLineBorderColor:Ni[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:Ni[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:Ha[95],annotationTextBorder:1.5,annotationRegionFillColor:Ni[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Ni[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Ni[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Ni[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ha[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:Ni[25],pointFillColor:Gt[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ha[100],pointBorderOpacity:1,pointActiveBorderColor:Ni[100],pointSelectedBorder:2,pointSelectedBorderColor:Ni[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Gt[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Ha[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Ni[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Ni[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Gt[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Gt[0],areaFillOpacity:.25,areaActiveFillColor:Gt[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Gt[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Gt[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Ni[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Ni[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Gt[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Ni[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Ni[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Gt[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ha[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Ni[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Ni[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},V=ao(R),tt={default:V};function ht(n){return(0,h.get)(tt,(0,h.lowerCase)(n),tt.default)}function It(n,r){tt[(0,h.lowerCase)(n)]=(0,h.deepMix)({},tt.default,r)}function Yt(n,r,t){var e=t.translate(n),i=t.translate(r);return(0,h.isNumberEqual)(e,i)}function re(n,r){var t=r.coordinate,e=r.getXScale(),i=e.range,a=i[i.length-1],o=i[0],s=t.invert(n),l=s.x;return t.isPolar&&l>(1+a)/2&&(l=o),e.translate(e.invert(l))}function le(n,r,t){var e=t.coordinate,i=t.getYScale(),a=i.field,o=e.invert(r),s=i.invert(o.y),l=(0,h.find)(n,function(u){var f=u[jt];return f[a][0]<=s&&f[a][1]>=s});return l||n[n.length-1]}var be=(0,h.memoize)(function(n){if(n.isCategory)return 1;for(var r=n.values,t=r.length,e=n.translate(r[0]),i=e,a=0;a<t;a++){var o=r[a],s=n.translate(o);s<e&&(e=s),s>i&&(i=s)}return(i-e)/(t-1)});function Ae(n,r,t){var e=t;if(!t){var i=r.getAttribute("position"),a=i.getFields();e=a[0]}var o=r.scales;return o[e]?o[e].getText(n[e]):(0,h.hasKey)(n,e)?n[e]:e}function We(n){var r=(0,h.values)(n.attributes);return(0,h.filter)(r,function(t){return(0,h.contains)(se,t.type)})}function qe(n){for(var r=We(n),t,e=0,i=r;e<i.length;e++){var a=i[e],o=a.getScale(a.type);if(o&&o.isLinear){t=o;break}}var s=n.getXScale(),l=n.getYScale();return t||l||s}function Cr(n,r){var t=r.field,e=n[t];if((0,h.isArray)(e)){var i=e.map(function(a){return r.getText(a)});return i.join("-")}return r.getText(e)}function jr(n,r){var t,e=r.getGroupScales();if(e.length&&(t=e[0]),t){var i=t.field;return t.getText(n[i])}var a=qe(r);return Le(a)}function Gr(n,r,t){if(r.length===0)return null;var e=t.type,i=t.getXScale(),a=t.getYScale(),o=i.field,s=a.field,l=null;if(e==="heatmap"||e==="point"){for(var u=t.coordinate,f=u.invert(n),c=i.invert(f.x),v=a.invert(f.y),g=Infinity,C=0;C<r.length;C++){var O=r[C],F=O[jt],G=Math.pow(F[o]-c,2)+Math.pow(F[s]-v,2);G<g&&(g=G,l=O)}return l}var Y=r[0],$=r[r.length-1],q=re(n,t),ut=Y[jt][o],kt=Y[jt][s],Nt=$[jt][o],Wt=a.isLinear&&(0,h.isArray)(kt);if((0,h.isArray)(ut)){for(var C=0;C<r.length;C++){var Ft=r[C],F=Ft[jt];if(i.translate(F[o][0])<=q&&i.translate(F[o][1])>=q)if(Wt)(0,h.isArray)(l)||(l=[]),l.push(Ft);else{l=Ft;break}}(0,h.isArray)(l)&&(l=le(l,n,t))}else{var ee=void 0;if(!i.isLinear&&i.type!=="timeCat"){for(var C=0;C<r.length;C++){var Ft=r[C],F=Ft[jt];if(Yt(F[o],q,i))if(Wt)(0,h.isArray)(l)||(l=[]),l.push(Ft);else{l=Ft;break}else i.translate(F[o])<=q&&($=Ft,ee=r[C+1])}(0,h.isArray)(l)&&(l=le(l,n,t))}else{if((q>i.translate(Nt)||q<i.translate(ut))&&(q>i.max||q<i.min))return null;for(var ve=0,fe=r.length-1,Te=void 0;ve<=fe;){Te=Math.floor((ve+fe)/2);var Be=r[Te][jt][o];if(Yt(Be,q,i))return r[Te];i.translate(Be)<=i.translate(q)?(ve=Te+1,$=r[Te],ee=r[Te+1]):(fe===0&&($=r[0]),fe=Te-1)}}$&&ee&&Math.abs(i.translate($[jt][o])-q)>Math.abs(i.translate(ee[jt][o])-q)&&($=ee)}var ke=be(t.getXScale());return!l&&Math.abs(i.translate($[jt][o])-q)<=ke/2&&(l=$),l}function mi(n,r,t){t===void 0&&(t="");var e=n[jt],i=Ae(e,r,t),a=r.tooltipOption,o=r.theme.defaultColor,s=[],l,u;function f(kt,Nt){if(!(0,h.isNil)(Nt)&&Nt!==""){var Wt={title:i,data:e,mappingData:n,name:kt,value:Nt,color:n.color||o,marker:!0};s.push(Wt)}}if((0,h.isObject)(a)){var c=a.fields,v=a.callback;if(v){var g=c.map(function(kt){return n[jt][kt]}),C=v.apply(void 0,g),O=(0,B.__assign)({data:n[jt],mappingData:n,title:i,color:n.color||o,marker:!0},C);s.push(O)}else for(var F=r.scales,G=0,Y=c;G<Y.length;G++){var $=Y[G];if(!(0,h.isNil)(e[$])){var q=F[$];l=Le(q),u=q.getText(e[$]),f(l,u)}}}else{var ut=qe(r);(0,h.isNil)(e[ut.field])||(u=Cr(e,ut),l=jr(e,r),f(l,u))}return s}var wi={};function xi(n,r){wi[n]=r}function At(n){delete wi[n]}function te(){return Object.keys(wi)}function ge(n){return wi[n]}var Se=function(){function n(r){this.option=this.wrapperOption(r)}return n.prototype.update=function(r){return this.option=this.wrapperOption(r),this},n.prototype.hasAction=function(r){var t=this.option.actions;return(0,h.some)(t,function(e){return e[0]===r})},n.prototype.create=function(r,t){var e=this.option,i=e.type,a=e.cfg,o=i==="theta",s=(0,B.__assign)({start:r,end:t},a),l=(0,bi.getCoordinate)(o?"polar":i);return this.coordinate=new l(s),this.coordinate.type=i,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},n.prototype.adjust=function(r,t){return this.coordinate.update({start:r,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},n.prototype.rotate=function(r){return this.option.actions.push(["rotate",r]),this},n.prototype.reflect=function(r){return this.option.actions.push(["reflect",r]),this},n.prototype.scale=function(r,t){return this.option.actions.push(["scale",r,t]),this},n.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},n.prototype.getOption=function(){return this.option},n.prototype.getCoordinate=function(){return this.coordinate},n.prototype.wrapperOption=function(r){return(0,B.__assign)({type:"rect",actions:[],cfg:{}},r)},n.prototype.execActions=function(r){var t=this,e=this.option.actions;(0,h.each)(e,function(i){var a,o=i[0],s=i.slice(1),l=(0,h.isNil)(r)?!0:r.includes(o);l&&(a=t.coordinate)[o].apply(a,s)})},n}(),Ye=Se,pr=function(){function n(r,t,e){this.view=r,this.gEvent=t,this.data=e,this.type=t.type}return Object.defineProperty(n.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[Event (type="+this.type+")]"},n.prototype.clone=function(){return new n(this.view,this.gEvent,this.data)},n}(),qr=pr;function Bi(n){return!(0,h.isNumber)(n)&&!(0,h.isArray)(n)}function Mn(n){n===void 0&&(n=0);var r=(0,h.isArray)(n)?n:[n];switch(r.length){case 0:r=[0,0,0,0];break;case 1:r=new Array(4).fill(r[0]);break;case 2:r=(0,B.__spreadArrays)(r,r);break;case 3:r=(0,B.__spreadArrays)(r,[r[1]]);break;default:r=r.slice(0,4);break}return r}var ra=function(){function n(r,t,e,i){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.top=r,this.right=t,this.bottom=e,this.left=i}return n.prototype.shrink=function(r){var t=r[0],e=r[1],i=r[2],a=r[3];return this.top+=t,this.right+=e,this.bottom+=i,this.left+=a,this},n.prototype.inc=function(r,t){var e=r.width,i=r.height;switch(t){case gt.TOP:case gt.TOP_LEFT:case gt.TOP_RIGHT:this.top+=i;break;case gt.RIGHT:case gt.RIGHT_TOP:case gt.RIGHT_BOTTOM:this.right+=e;break;case gt.BOTTOM:case gt.BOTTOM_LEFT:case gt.BOTTOM_RIGHT:this.bottom+=i;break;case gt.LEFT:case gt.LEFT_TOP:case gt.LEFT_BOTTOM:this.left+=e;break;default:break}return this},n.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},n}();function sa(n){var r=n.padding;if(!Bi(r))return Mn(r);var t=n.viewBBox,e=n.autoPadding,i=new ra;(0,h.each)(n.getComponents(),function(s){var l=s.component,u=s.type;if(!(u===Vt.GRID||u===Vt.TOOLTIP)){var f=l.getLayoutBBox(),c=new rt(f.x,f.y,f.width,f.height);if(u===Vt.AXIS){var v=c.exceed(t);i.shrink(v)}else{var g=s.direction;i.inc(c,g)}}});var a=i.getPadding();if(e){var o=Mn(n.appendPadding);return[Math.max(e[0]-o[0],a[0]),Math.max(e[1]-o[1],a[1]),Math.max(e[2]-o[2],a[2]),Math.max(e[3]-o[3],a[3])]}return a}function vs(n){var r=n.getController("axis"),t=n.getController("legend"),e=n.getController("annotation"),i=n.getController("slider"),a=sa(n);n.coordinateBBox=n.viewBBox.shrink(a).shrink(Mn(n.appendPadding)),n.adjustCoordinate(),[r,i,t,e].forEach(function(o){o&&o.layout()})}var eb=function(){function n(){this.scales=new Map,this.syncScales=new Map}return n.prototype.createScale=function(r,t,e,i){var a=e,o=this.getScaleMeta(i);if(t.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),a=(0,h.deepMix)(l,o.scaleDef,e)}var u=Ee(r,t,a);return this.cacheScale(u,e,i),u},n.prototype.sync=function(){var r=this;this.syncScales.forEach(function(t,e){var i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=[];(0,h.each)(t,function(s){var l=r.getScale(s);a=(0,h.isNumber)(l.max)?Math.max(a,l.max):a,i=(0,h.isNumber)(l.min)?Math.min(i,l.min):i,(0,h.each)(l.values,function(u){o.includes(u)||o.push(u)})}),(0,h.each)(t,function(s){var l=r.getScale(s);l.isContinuous?l.change({min:i,max:a,values:o}):l.isCategory&&l.change({values:o})})})},n.prototype.cacheScale=function(r,t,e){var i=this.getScaleMeta(e);i&&i.scale.type===r.type?(_e(i.scale,r),i.scaleDef=t):(i={key:e,scale:r,scaleDef:t},this.scales.set(e,i));var a=this.getSyncKey(i);if(i.syncKey=a,this.removeFromSyncScales(e),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(e)}},n.prototype.getScale=function(r){var t=this.getScaleMeta(r);if(!t){var e=(0,h.last)(r.split("-")),i=this.syncScales.get(e);i&&i.length&&(t=this.getScaleMeta(i[0]))}return t&&t.scale},n.prototype.deleteScale=function(r){var t=this.getScaleMeta(r);if(t){var e=t.syncKey,i=this.syncScales.get(e);if(i&&i.length){var a=i.indexOf(r);a!==-1&&i.splice(a,1)}}this.scales.delete(r)},n.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},n.prototype.removeFromSyncScales=function(r){var t=this;this.syncScales.forEach(function(e,i){var a=e.indexOf(r);if(a!==-1)return e.splice(a,1),e.length===0&&t.syncScales.delete(i),!1})},n.prototype.getSyncKey=function(r){var t=r.scale,e=r.scaleDef,i=t.field,a=(0,h.get)(e,["sync"]);return a===!0?i:a===!1?void 0:a},n.prototype.getScaleMeta=function(r){return this.scales.get(r)},n}(),bc=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,{visible:t.visible})||this;e.id=(0,h.uniqueId)("view"),e.views=[],e.geometries=[],e.controllers=[],e.interactions={},e.limitInPlot=!1,e.options={data:[],animate:!0},e.usedControllers=te(),e.scalePool=new eb,e.layoutFunc=vs,e.isPreMouseInPlot=!1,e.isDataChanged=!1,e.isCoordinateChanged=!1,e.createdScaleKeys=new Map,e.onCanvasEvent=function(F){var G=F.name;if(!G.includes(":")){var Y=e.createViewEvent(F);e.doPlotEvent(Y),e.emit(G,Y)}},e.onDelegateEvents=function(F){var G=F.name;if(!!G.includes(":")){var Y=e.createViewEvent(F);e.emit(G,Y)}};var i=t.parent,a=t.canvas,o=t.backgroundGroup,s=t.middleGroup,l=t.foregroundGroup,u=t.region,f=u===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:u,c=t.padding,v=t.appendPadding,g=t.theme,C=t.options,O=t.limitInPlot;return e.parent=i,e.canvas=a,e.backgroundGroup=o,e.middleGroup=s,e.foregroundGroup=l,e.region=f,e.padding=c,e.appendPadding=v,e.options=(0,B.__assign)((0,B.__assign)({},e.options),C),e.limitInPlot=O,e.themeObject=(0,h.isObject)(g)?(0,h.deepMix)({},ht("default"),g):ht(g),e.init(),e}return r.prototype.setLayout=function(t){this.layoutFunc=t},r.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.coordinateController=new Ye(this.options.coordinate),this.initOptions();for(var t=this.views,e=0;e<t.length;e++)t[e].init()},r.prototype.render=function(t){t===void 0&&(t=!1),this.emit(zt.BEFORE_RENDER),this.paint(t),this.emit(zt.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var t=this;this.emit(zt.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,i=0;i<e.length;i++)e[i].clear();this.geometries=[];for(var a=this.controllers,i=0;i<a.length;i++)a[i].clear();this.createdScaleKeys.forEach(function(s,l){t.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,i=0;i<o.length;i++)o[i].clear();this.emit(zt.AFTER_CLEAR)},r.prototype.destroy=function(){this.emit(zt.BEFORE_DESTROY);var t=this.interactions;(0,h.each)(t,function(s){s&&s.destroy()}),this.clear();for(var e=this.controllers,i=0,a=e.length;i<a;i++){var o=e[i];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),n.prototype.destroy.call(this)},r.prototype.changeVisible=function(t){n.prototype.changeVisible.call(this,t);for(var e=this.geometries,i=0,a=e.length;i<a;i++){var o=e[i];o.changeVisible(t)}for(var s=this.controllers,i=0,a=s.length;i<a;i++){var l=s[i];l.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},r.prototype.data=function(t){return(0,h.set)(this.options,"data",t),this.isDataChanged=!0,this},r.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},r.prototype.filter=function(t,e){return(0,h.isFunction)(e)?((0,h.set)(this.options,["filters",t],e),this):(!e&&(0,h.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},r.prototype.axis=function(t,e){return(0,h.isBoolean)(t)?(0,h.set)(this.options,["axes"],t):(0,h.set)(this.options,["axes",t],e),this},r.prototype.legend=function(t,e){return(0,h.isBoolean)(t)?(0,h.set)(this.options,["legends"],t):(0,h.isString)(t)?(0,h.set)(this.options,["legends",t],e):(0,h.set)(this.options,["legends"],t),this},r.prototype.scale=function(t,e){var i=this;return(0,h.isString)(t)?(0,h.set)(this.options,["scales",t],e):(0,h.isObject)(t)&&(0,h.each)(t,function(a,o){(0,h.set)(i.options,["scales",o],a)}),this},r.prototype.tooltip=function(t){return(0,h.set)(this.options,"tooltip",t),this},r.prototype.annotation=function(){return this.getController("annotation")},r.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},r.prototype.coordinate=function(t,e){return(0,h.isString)(t)?(0,h.set)(this.options,"coordinate",{type:t,cfg:e}):(0,h.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},r.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},r.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var i=Ut(t);if(!i)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new i(this,(0,B.__assign)((0,B.__assign)({},e),{type:t})),this},r.prototype.animate=function(t){return(0,h.set)(this.options,"animate",t),this},r.prototype.updateOptions=function(t){return this.clear(),(0,h.mix)(this.options,t),this.initOptions(),this},r.prototype.option=function(t,e){if(r.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return(0,h.set)(this.options,t,e),this},r.prototype.theme=function(t){return this.themeObject=(0,h.isObject)(t)?(0,h.deepMix)({},this.themeObject,t):ht(t),this},r.prototype.interaction=function(t,e){var i=this.interactions[t];i&&i.destroy();var a=no(t,this,e);return a&&(a.init(),this.interactions[t]=a),this},r.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},r.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(zt.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var e=this.views,i=0,a=e.length;i<a;i++){var o=e[i];o.changeData(t)}this.emit(zt.AFTER_CHANGE_DATA)},r.prototype.createView=function(t){var e={data:this.options.data,scales:(0,h.clone)(this.options.scales),axes:(0,h.clone)(this.options.axes),coordinate:(0,h.clone)(this.coordinateController.getOption()),tooltip:(0,h.clone)(this.options.tooltip),legends:(0,h.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},i=new r((0,B.__assign)((0,B.__assign)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Jt.BG}),middleGroup:this.middleGroup.addGroup({zIndex:Jt.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Jt.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,B.__assign)((0,B.__assign)({},e),(0,h.get)(t,"options",{}))}));return this.views.push(i),i},r.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},r.prototype.removeView=function(t){var e=(0,h.remove)(this.views,function(i){return i===t})[0];return e&&e.destroy(),e},r.prototype.getCoordinate=function(){return this.coordinateInstance},r.prototype.getTheme=function(){return this.themeObject},r.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},r.prototype.getYScales=function(){var t={};return this.geometries.map(function(e){var i=e.getYScale(),a=i.field;if(!t[a])return t[a]=!0,i})},r.prototype.getScalesByDim=function(t){for(var e=this.geometries,i={},a=0,o=e.length;a<o;a++){var s=e[a],l=t==="x"?s.getXScale():s.getYScale();l&&!i[l.field]&&(i[l.field]=l)}return i},r.prototype.getScaleByField=function(t,e){var i=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(i)},r.prototype.getOptions=function(){return this.options},r.prototype.getData=function(){return this.filteredData},r.prototype.getLayer=function(t){return t===mt.BG?this.backgroundGroup:t===mt.MID?this.middleGroup:t===mt.FORE?this.foregroundGroup:this.foregroundGroup},r.prototype.isPointInPlot=function(t){return Zt(this.getCoordinate(),t)},r.prototype.getLegendAttributes=function(){return(0,h.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},r.prototype.getGroupScales=function(){var t=this.geometries.map(function(e){return e.getGroupScales()});return ft((0,h.flatten)(t))},r.prototype.getCanvas=function(){return this.getRootView().canvas},r.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},r.prototype.getXY=function(t){var e=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,s;if((0,h.each)(t,function(l,u){i[u]&&(o=i[u].scale(l)),a[u]&&(s=a[u].scale(l))}),!(0,h.isNil)(o)&&!(0,h.isNil)(s))return e.convert({x:o,y:s})},r.prototype.getController=function(t){return(0,h.find)(this.controllers,function(e){return e.name===t})},r.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},r.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},r.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},r.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},r.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},r.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},r.prototype.getSnapRecords=function(t){for(var e=this.geometries,i=[],a=0,o=e.length;a<o;a++){var s=e[a],l=s.dataArray;s.sort(l);for(var u=void 0,f=0,c=l.length;f<c;f++){var v=l[f];u=Gr(t,v,s),u&&i.push(u)}}for(var g=this.views,a=0,o=g.length;a<o;a++){var C=g[a],O=C.getSnapRecords(t);i=i.concat(O)}return i},r.prototype.getComponents=function(){for(var t=[],e=this.controllers,i=0,a=e.length;i<a;i++){var o=e[i];t=t.concat(o.getComponents())}return t},r.prototype.filterData=function(t){var e=this.options.filters;return(0,h.size)(e)===0?t:(0,h.filter)(t,function(i,a){var o=Object.keys(e);return o.every(function(s){var l=e[s];return l(i[s],i,a)})})},r.prototype.filterFieldData=function(t,e){var i=this.options.filters,a=(0,h.get)(i,t);return(0,h.isUndefined)(a)?e:e.filter(function(o,s){return a(o[t],o,s)})},r.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),e=t.start,i=t.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if((0,h.isEqual)(e,a)&&(0,h.isEqual)(i,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},r.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(zt.BEFORE_PAINT),this.renderBackgroundStyleShape(),this.renderLayoutRecursive(t),this.renderPaintRecursive(t),this.emit(zt.AFTER_PAINT),this.isDataChanged=!1},r.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,h.get)(this.themeObject,"background");if(t){this.backgruondStyleRectShape||(this.backgruondStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{zIndex:-1}}));var e=this.viewBBox,i=e.x,a=e.y,o=e.width,s=e.height;this.backgruondStyleRectShape.attr({fill:t,x:i,y:a,width:o,height:s})}else this.backgruondStyleRectShape&&(this.backgruondStyleRectShape.remove(!0),this.backgruondStyleRectShape=void 0)}},r.prototype.renderLayoutRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.doLayout();var e=this.viewBBox,i=this.coordinateBBox;Bi(this.padding)&&(this.autoPadding=[i.tl.y-e.tl.y,e.tr.x-i.tr.x,e.bl.y-i.bl.y,i.tl.x-e.tl.x]);for(var a=this.views,o=0,s=a.length;o<s;o++){var l=a[o];l.renderLayoutRecursive(t)}},r.prototype.renderPaintRecursive=function(t){if(this.limitInPlot){var e=this.middleGroup,i=pe(this.coordinateInstance),a=i.type,o=i.attrs;e.setClip({type:a,attrs:o})}this.paintGeometries(t),this.renderComponents(t);for(var s=this.views,l=0,u=s.length;l<u;l++){var f=s[l];f.renderPaintRecursive(t)}},r.prototype.createScale=function(t,e,i,a){var o=(0,h.get)(this.options.scales,[t]),s=(0,B.__assign)((0,B.__assign)({},o),i);return this.parent?this.parent.createScale(t,e,s,a):this.scalePool.createScale(t,e,s,a)},r.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,i=0,a=e.length;i<a;i++){var o=e[i];o.renderDataRecursive(t)}},r.prototype.calculateViewBBox=function(){var t,e,i,a;if(this.parent){var o=this.parent.coordinateBBox;t=o.x,e=o.y,i=o.width,a=o.height}else t=0,e=0,i=this.canvas.get("width"),a=this.canvas.get("height");var s=this.region,l=s.start,u=s.end,f=new rt(t+i*l.x,e+a*l.y,i*(u.x-l.x),a*(u.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(f))&&(this.viewBBox=new rt(t+i*l.x,e+a*l.y,i*(u.x-l.x),a*(u.y-l.y)),this.coordinateBBox=this.viewBBox)},r.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},r.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,i=t.length;e<i;e++){var a=t[e],o=ge(a);o&&this.controllers.push(new o(this))}},r.prototype.createViewEvent=function(t){var e=t.shape,i=t.name,a=e?e.get("origin"):null,o=new qr(this,t,a);return o.type=i,o},r.prototype.doPlotEvent=function(t){var e=t.type,i=t.x,a=t.y,o={x:i,y:a},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(e)){var l=this.isPointInPlot(o);if(l){var u="plot:"+e;t.type=u,this.emit(u,t),(e==="mouseleave"||e==="touchend")&&(this.isPreMouseInPlot=!1)}e==="mousemove"||e==="touchmove"?(this.isPreMouseInPlot&&!l?(e==="mousemove"&&(t.type=Qt.MOUSE_LEAVE,this.emit(Qt.MOUSE_LEAVE,t)),t.type=Qt.LEAVE,this.emit(Qt.LEAVE,t)):!this.isPreMouseInPlot&&l&&(e==="mousemove"&&(t.type=Qt.MOUSE_ENTER,this.emit(Qt.MOUSE_ENTER,t)),t.type=Qt.ENTER,this.emit(Qt.ENTER,t)),this.isPreMouseInPlot=l):(e==="mouseleave"||e==="touchend")&&this.isPreMouseInPlot&&(e==="mouseleave"&&(t.type=Qt.MOUSE_LEAVE,this.emit(Qt.MOUSE_LEAVE,t)),t.type=Qt.LEAVE,this.emit(Qt.LEAVE,t),this.isPreMouseInPlot=!1)}},r.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},r.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),i=(0,h.get)(this.options,"scales",{}),a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.scales=this.getGeometryScales();var u={coordinate:e,scaleDefs:i,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?l.update(u):l.init(u)}this.adjustScales()},r.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),i=this.getOptions(),a=i.data,o=i.scales,s=o===void 0?{}:o,l=this.filteredData,u=0,f=t.length;u<f;u++){var c=t[u],v=s[c],g=this.getScaleKey(c);this.createScale(c,e.includes(c)?a:l,v,g),this.createdScaleKeys.set(g,!0)}},r.prototype.syncScale=function(){this.getRootView().scalePool.sync()},r.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},i=0;i<t.length;i++){var a=t[i];e[a]=this.getScaleByField(a)}return e},r.prototype.getScaleFields=function(){for(var t=[],e={},i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getScaleFields();ft(s,t,e)}return t},r.prototype.getGroupedFields=function(){for(var t=[],e={},i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getGroupFields();ft(s,t,e)}return t},r.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},r.prototype.adjustCategoryScaleRange=function(){var t=this,e=(0,B.__spreadArrays)([this.getXScale()],this.getYScales()).filter(function(o){return!!o}),i=this.getCoordinate(),a=this.options.scales;(0,h.each)(e,function(o){var s=o.field,l=o.values,u=o.isCategory,f=o.isIdentity;if((u||f)&&l&&!(0,h.get)(a,[s,"range"])){var c=l.length,v=void 0;if(c===1)v=[.5,1];else{var g=1,C=0;ot(i)?i.isTransposed?(g=(0,h.get)(t.theme,"widthRatio.multiplePie",1/1.3),C=1/c*g,v=[C/2,1-C/2]):v=[0,1-1/c]:(C=1/c/2,v=[C,1-C])}o.range=v}})},r.prototype.initComponents=function(t){for(var e=this.controllers,i=0;i<e.length;i++){var a=e[i];t?a.update():(a.clear(),a.render())}},r.prototype.doLayout=function(){this.layoutFunc(this)},r.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},r.prototype.paintGeometries=function(t){for(var e=this.options.animate,i=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=i,l.canvasRegion=a,e||l.animate(!1),l.paint(t)}},r.prototype.renderComponents=function(t){for(var e=0;e<this.getComponents().length;e++){var i=this.getComponents()[e];i.component.render()}},r.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},r.prototype.initOptions=function(){for(var t=this.options,e=t.geometries,i=e===void 0?[]:e,a=t.interactions,o=a===void 0?[]:a,s=t.views,l=s===void 0?[]:s,u=t.annotations,f=u===void 0?[]:u,c=0;c<i.length;c++){var v=i[c];this.createGeometry(v)}for(var g=0;g<o.length;g++){var C=o[g],O=C.type,F=C.cfg;this.interaction(O,F)}for(var G=0;G<l.length;G++){var Y=l[G];this.createView(Y)}for(var $=this.getController("annotation"),q=0;q<f.length;q++){var ut=f[q];$.annotation(ut)}},r.prototype.createGeometry=function(t){var e=t.type,i=t.cfg,a=i===void 0?{}:i;if(this[e]){var o=this[e](a);(0,h.each)(t,function(s,l){(0,h.isFunction)(o[l])&&o[l](s)})}},r.prototype.getScaleKey=function(t){return this.id+"-"+t},r}(xr);function ma(n,r){bc.prototype[n.toLowerCase()]=function(t){t===void 0&&(t={});var e=(0,B.__assign)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),i=new r(e);return this.geometries.push(i),i}}var Uu=bc,rb=function(n){(0,B.__extends)(r,n);function r(t){var e=this,i=t.container,a=t.width,o=t.height,s=t.autoFit,l=s===void 0?!1:s,u=t.padding,f=t.appendPadding,c=t.renderer,v=c===void 0?"canvas":c,g=t.pixelRatio,C=t.localRefresh,O=C===void 0?!0:C,F=t.visible,G=F===void 0?!0:F,Y=t.defaultInteractions,$=Y===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:Y,q=t.options,ut=t.limitInPlot,kt=t.theme,Nt=(0,h.isString)(i)?document.getElementById(i):i,Wt=(0,vt.Z)('<div style="position:relative;"></div>');Nt.appendChild(Wt);var Ft=Ce(Nt,l,a,o),ee=nt(v),ve=new ee.Canvas((0,B.__assign)({container:Wt,pixelRatio:g,localRefresh:O},Ft));return e=n.call(this,{parent:null,canvas:ve,backgroundGroup:ve.addGroup({zIndex:Jt.BG}),middleGroup:ve.addGroup({zIndex:Jt.MID}),foregroundGroup:ve.addGroup({zIndex:Jt.FORE}),padding:u,appendPadding:f,visible:G,options:q,limitInPlot:ut,theme:kt})||this,e.onResize=(0,h.debounce)(function(){e.forceFit()},300),e.ele=Nt,e.canvas=ve,e.width=Ft.width,e.height=Ft.height,e.autoFit=l,e.localRefresh=O,e.renderer=v,e.wrapperElement=Wt,e.updateCanvasStyle(),e.bindAutoFit(),e.initDefaultInteractions($),e}return r.prototype.initDefaultInteractions=function(t){var e=this;(0,h.each)(t,function(i){e.interaction(i)})},r.prototype.changeSize=function(t,e){return this.width===t&&this.height===e?this:(this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Fe(this.wrapperElement),this.wrapperElement=null},r.prototype.changeVisible=function(t){return n.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},r.prototype.forceFit=function(){if(!this.destroyed){var t=Ce(this.ele,!0,this.width,this.height),e=t.width,i=t.height;this.changeSize(e,i)}},r.prototype.updateCanvasStyle=function(){(0,Tt.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},r.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},r.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},r}(Uu),ib=rb,zo=function(){function n(r){this.visible=!0,this.components=[],this.view=r}return n.prototype.clear=function(){(0,h.each)(this.components,function(r){r.component.destroy()}),this.components=[]},n.prototype.destroy=function(){this.clear()},n.prototype.getComponents=function(){return this.components},n.prototype.changeVisible=function(r){this.visible!==r&&(this.components.forEach(function(t){r?t.component.show():t.component.hide()}),this.visible=r)},n}(),wc=0,nb=1/2,ab=1/2,ob=.05,sb=function(){function n(r){var t=r.xField,e=r.yField,i=r.adjustNames,a=i===void 0?["x","y"]:i,o=r.dimValuesMap;this.adjustNames=a,this.xField=t,this.yField=e,this.dimValuesMap=o}return n.prototype.isAdjust=function(r){return this.adjustNames.indexOf(r)>=0},n.prototype.getAdjustRange=function(r,t,e){var i=this.yField,a=e.indexOf(t),o=e.length,s,l;return!i&&this.isAdjust("y")?(s=0,l=1):o>1?(s=e[a===0?0:a-1],l=e[a===o-1?o-1:a+1],a!==0?s+=(t-s)/2:s-=(l-t)/2,a!==o-1?l-=(l-t)/2:l+=(t-e[o-2])/2):(s=t===0?0:t-.5,l=t===0?1:t+.5),{pre:s,next:l}},n.prototype.adjustData=function(r,t){var e=this,i=this.getDimValues(t);h.each(r,function(a,o){h.each(i,function(s,l){e.adjustDim(l,s,a,o)})})},n.prototype.groupData=function(r,t){return h.each(r,function(e){e[t]===void 0&&(e[t]=wc)}),h.groupBy(r,t)},n.prototype.adjustDim=function(r,t,e,i){},n.prototype.getDimValues=function(r){var t=this,e=t.xField,i=t.yField,a=h.assign({},this.dimValuesMap),o=[];if(e&&this.isAdjust("x")&&o.push(e),i&&this.isAdjust("y")&&o.push(i),o.forEach(function(l){a&&a[l]||(a[l]=h.valuesOfKey(r,l).sort(function(u,f){return u-f}))}),!i&&this.isAdjust("y")){var s="y";a[s]=[wc,1]}return a},n}(),Qs=sb,Sc={},Cc=function(n){return Sc[n.toLowerCase()]},Js=function(n,r){if(Cc(n))throw new Error("Adjust type '"+n+"' existed.");Sc[n.toLowerCase()]=r},Rt=d(51467),lb=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;e.cacheMap={},e.adjustDataArray=[],e.mergeData=[];var i=t.marginRatio,a=i===void 0?nb:i,o=t.dodgeRatio,s=o===void 0?ab:o,l=t.dodgeBy,u=t.intervalPadding,f=t.dodgePadding,c=t.xDimensionLength,v=t.groupNum,g=t.defaultSize,C=t.maxColumnWidth,O=t.minColumnWidth,F=t.columnWidthRatio,G=t.customOffset;return e.marginRatio=a,e.dodgeRatio=s,e.dodgeBy=l,e.intervalPadding=u,e.dodgePadding=f,e.xDimensionLegenth=c,e.groupNum=v,e.defaultSize=g,e.maxColumnWidth=C,e.minColumnWidth=O,e.columnWidthRatio=F,e.customOffset=G,e}return r.prototype.process=function(t){var e=h.clone(t),i=h.flatten(e),a=this.dodgeBy,o=a?h.group(i,a):e;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=i,this.adjustData(o,i),this.adjustDataArray=[],this.mergeData=[],e},r.prototype.adjustDim=function(t,e,i,a){var o=this,s=this.customOffset,l=this.getDistribution(t),u=this.groupData(i,t);return h.each(u,function(f,c){var v;e.length===1?v={pre:e[0]-1,next:e[0]+1}:v=o.getAdjustRange(t,parseFloat(c),e),h.each(f,function(g){var C=g[t],O=l[C],F=O.indexOf(a);if(h.isNil(s))g[t]=o.getDodgeOffset(v,F,O.length);else{var G=v.pre,Y=v.next;g[t]=h.isFunction(s)?s(g,v):(G+Y)/2+s}})}),[]},r.prototype.getDodgeOffset=function(t,e,i){var a=this,o=a.dodgeRatio,s=a.marginRatio,l=a.intervalPadding,u=a.dodgePadding,f=t.pre,c=t.next,v=c-f,g;if(!h.isNil(l)&&h.isNil(u)&&l>=0){var C=this.getIntervalOnlyOffset(i,e);g=f+C}else if(!h.isNil(u)&&h.isNil(l)&&u>=0){var C=this.getDodgeOnlyOffset(i,e);g=f+C}else if(!h.isNil(l)&&!h.isNil(u)&&l>=0&&u>=0){var C=this.getIntervalAndDodgeOffset(i,e);g=f+C}else{var O=v*o/i,F=s*O,C=1/2*(v-i*O-(i-1)*F)+((e+1)*O+e*F)-1/2*O-1/2*v;g=(f+c)/2+C}return g},r.prototype.getIntervalOnlyOffset=function(t,e){var i=this,a=i.defaultSize,o=i.intervalPadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.dodgeRatio,f=i.maxColumnWidth,c=i.minColumnWidth,v=i.columnWidthRatio,g=o/s,C=(1-(l-1)*g)/l*u/(t-1),O=((1-g*(l-1))/l-C*(t-1))/t;if(O=h.isNil(v)?O:1/l/t*v,!h.isNil(f)){var F=f/s;O=Math.min(O,F)}if(!h.isNil(c)){var G=c/s;O=Math.max(O,G)}O=a?a/s:O,C=((1-(l-1)*g)/l-t*O)/(t-1);var Y=((1/2+e)*O+e*C+1/2*g)*l-g/2;return Y},r.prototype.getDodgeOnlyOffset=function(t,e){var i=this,a=i.defaultSize,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.marginRatio,f=i.maxColumnWidth,c=i.minColumnWidth,v=i.columnWidthRatio,g=o/s,C=1*u/(l-1),O=((1-C*(l-1))/l-g*(t-1))/t;if(O=v?1/l/t*v:O,!h.isNil(f)){var F=f/s;O=Math.min(O,F)}if(!h.isNil(c)){var G=c/s;O=Math.max(O,G)}O=a?a/s:O,C=(1-(O*t+g*(t-1))*l)/(l-1);var Y=((1/2+e)*O+e*g+1/2*C)*l-C/2;return Y},r.prototype.getIntervalAndDodgeOffset=function(t,e){var i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=a/s,f=o/s,c=((1-u*(l-1))/l-f*(t-1))/t,v=((1/2+e)*c+e*f+1/2*u)*l-u/2;return v},r.prototype.getDistribution=function(t){var e=this.adjustDataArray,i=this.cacheMap,a=i[t];return a||(a={},h.each(e,function(o,s){var l=h.valuesOfKey(o,t);l.length||l.push(0),h.each(l,function(u){a[u]||(a[u]=[]),a[u].push(s)})}),i[t]=a),a},r}(Qs),ub=lb;function hb(n,r){return(r-n)*Math.random()+n}var fb=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.process=function(t){var e=h.clone(t),i=h.flatten(e);return this.adjustData(e,i),e},r.prototype.adjustDim=function(t,e,i){var a=this,o=this.groupData(i,t);return h.each(o,function(s,l){return a.adjustGroup(s,t,parseFloat(l),e)})},r.prototype.getAdjustOffset=function(t){var e=t.pre,i=t.next,a=(i-e)*ob;return hb(e+a,i-a)},r.prototype.adjustGroup=function(t,e,i,a){var o=this,s=this.getAdjustRange(e,i,a);return h.each(t,function(l){l[e]=o.getAdjustOffset(s)}),t},r}(Qs),cb=fb,Zu=h.Cache,vb=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this,i=t.adjustNames,a=i===void 0?["y"]:i,o=t.height,s=o===void 0?NaN:o,l=t.size,u=l===void 0?10:l,f=t.reverseOrder,c=f===void 0?!1:f;return e.adjustNames=a,e.height=s,e.size=u,e.reverseOrder=c,e}return r.prototype.process=function(t){var e=this,i=e.yField,a=e.reverseOrder,o=i?this.processStack(t):this.processOneDimStack(t);return a?this.reverse(o):o},r.prototype.reverse=function(t){return t.slice(0).reverse()},r.prototype.processStack=function(t){var e=this,i=e.xField,a=e.yField,o=e.reverseOrder,s=o?this.reverse(t):t,l=new Zu,u=new Zu;return s.map(function(f){return f.map(function(c){var v,g=h.get(c,i,0),C=h.get(c,[a]),O=g.toString();if(C=h.isArray(C)?C[1]:C,!h.isNil(C)){var F=C>=0?l:u;F.has(O)||F.set(O,0);var G=F.get(O),Y=C+G;return F.set(O,Y),(0,Rt.__assign)((0,Rt.__assign)({},c),(v={},v[a]=[G,Y],v))}return c})})},r.prototype.processOneDimStack=function(t){var e=this,i=this,a=i.xField,o=i.height,s=i.reverseOrder,l="y",u=s?this.reverse(t):t,f=new Zu;return u.map(function(c){return c.map(function(v){var g,C=e.size,O=v[a],F=C*2/o;f.has(O)||f.set(O,F/2);var G=f.get(O);return f.set(O,G+F),(0,Rt.__assign)((0,Rt.__assign)({},v),(g={},g[l]=G,g))})})},r}(Qs),db=vb,pb=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.process=function(t){var e=h.flatten(t),i=this,a=i.xField,o=i.yField,s=this.getXValuesMaxMap(e),l=Math.max.apply(Math,Object.keys(s).map(function(u){return s[u]}));return h.map(t,function(u){return h.map(u,function(f){var c,v,g=f[o],C=f[a];if(h.isArray(g)){var O=(l-s[C])/2;return(0,Rt.__assign)((0,Rt.__assign)({},f),(c={},c[o]=h.map(g,function(G){return O+G}),c))}var F=(l-g)/2;return(0,Rt.__assign)((0,Rt.__assign)({},f),(v={},v[o]=[F,g+F],v))})})},r.prototype.getXValuesMaxMap=function(t){var e=this,i=this,a=i.xField,o=i.yField,s=h.groupBy(t,function(l){return l[a]});return h.mapValues(s,function(l){return e.getDimMaxValue(l,o)})},r.prototype.getDimMaxValue=function(t,e){var i=h.map(t,function(o){return h.get(o,e,[])}),a=h.flatten(i);return Math.max.apply(Math,a)},r}(Qs),gb=pb;Js("Dodge",ub),Js("Jitter",cb),Js("Stack",db),Js("Symmetric",gb);var Mc={};function Ku(n){return Mc[n.toLowerCase()]}function dn(n,r){Mc[n.toLowerCase()]=r}var Xo={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},yb={interval:function(n){return{enter:{animation:n.isRect?n.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:n.isPolar&&n.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Ec={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(n){var r;return n.isRect?r=n.isTransposed?"grow-in-x":"grow-in-y":(r="grow-in-xy",n.isPolar&&n.isTransposed&&(r="wave-in")),{animation:r}},schema:function(n){var r;return n.isRect?r=n.isTransposed?"grow-in-x":"grow-in-y":r="grow-in-xy",{animation:r}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function mb(n,r){return{delay:(0,h.isFunction)(n.delay)?n.delay(r):n.delay,easing:(0,h.isFunction)(n.easing)?n.easing(r):n.easing,duration:(0,h.isFunction)(n.duration)?n.duration(r):n.duration,callback:n.callback}}function Ac(n,r,t){var e=yb[n];return e&&((0,h.isFunction)(e)&&(e=e(r)),e=(0,h.deepMix)({},Xo,e),t)?e[t]:e}function Vo(n,r,t){var e=(0,h.get)(n.get("origin"),"data",jt),i=r.animation,a=mb(r,e);if(i){var o=Ku(i);o&&o(n,a,t)}else n.animate(t.toAttrs,a)}function xb(n,r,t,e,i){if(Ec[t]){var a=Ec[t](e),o=Ku((0,h.get)(a,"animation",""));if(o){var s=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},Xo.appear),a),r);n.stopAnimate(),o(n,s,{coordinate:e,minYPoint:i,toAttrs:null})}}}var bb=d(82614),wb=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;e.states=[];var i=t.shapeFactory,a=t.container,o=t.offscreenGroup,s=t.visible,l=s===void 0?!0:s;return e.shapeFactory=i,e.container=a,e.offscreenGroup=o,e.visible=l,e}return r.prototype.draw=function(t,e){e===void 0&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),this.visible===!1&&this.changeVisible(!1)},r.prototype.update=function(t){var e=this,i=e.shapeFactory,a=e.shape;if(!!a){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(a,t);var o=this.getOffscreenGroup(),s=i.drawShape(this.shapeType,t,o);s.cfg.data=this.data,s.cfg.origin=t,this.syncShapeStyle(a,s,"",this.getAnimateCfg("update"))}},r.prototype.destroy=function(){var t=this,e=t.shapeFactory,i=t.shape;if(i){var a=this.getAnimateCfg("leave");a?Vo(i,a,{coordinate:e.coordinate,toAttrs:(0,B.__assign)({},i.attr())}):i.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,n.prototype.destroy.call(this)},r.prototype.changeVisible=function(t){n.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(e){e.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(e){e.hide()}))},r.prototype.setState=function(t,e){var i=this,a=this,o=a.states,s=a.shapeFactory,l=a.model,u=a.shape,f=a.shapeType,c=o.indexOf(t);if(e){if(c>-1)return;o.push(t),(t==="active"||t==="selected")&&u.toFront()}else{if(c===-1)return;o.splice(c,1),(t==="active"||t==="selected")&&u.toBack()}var v=s.drawShape(f,l,this.getOffscreenGroup());o.length?o.forEach(function(C){i.syncShapeStyle(u,v,C,null)}):this.syncShapeStyle(u,v,"reset",null),v.remove(!0);var g={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",g),(0,bb.propagationDelegate)(this.shape,"statechange",g)},r.prototype.clearStates=function(){var t=this,e=this.states;(0,h.each)(e,function(i){t.setState(i,!1)}),this.states=[]},r.prototype.hasState=function(t){return this.states.includes(t)},r.prototype.getStates=function(){return this.states},r.prototype.getData=function(){return this.data},r.prototype.getModel=function(){return this.model},r.prototype.getBBox=function(){var t=this,e=t.shape,i=t.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(a=e.getCanvasBBox()),i&&i.forEach(function(o){var s=o.getCanvasBBox();a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y),a.minX=Math.min(s.minX,a.minX),a.minY=Math.min(s.minY,a.minY),a.maxX=Math.max(s.maxX,a.maxX),a.maxY=Math.max(s.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},r.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,i=t.geometry,a=t.shapeFactory,o=i.stateOption,s=a.defaultShapeType,l=a.theme[e]||a.theme[s];this.statesStyle=(0,h.deepMix)({},l,o)}return this.statesStyle},r.prototype.getStateStyle=function(t,e){var i=this.getStatesStyle(),a=(0,h.get)(i,[t,"style"],{}),o=a[e]||a;return(0,h.isFunction)(o)?o(this):o},r.prototype.getAnimateCfg=function(t){var e=this.animate;return e?e[t]:null},r.prototype.drawShape=function(t,e){e===void 0&&(e=!1);var i=this,a=i.shapeFactory,o=i.container,s=i.shapeType;if(this.shape=a.drawShape(s,t,o),this.shape){this.setShapeInfo(this.shape,t);var l=this.shape.cfg.name;l?(0,h.isString)(l)&&(this.shape.cfg.name=["element",l]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var u=e?"enter":"appear",f=this.getAnimateCfg(u);f&&Vo(this.shape,f,{coordinate:a.coordinate,toAttrs:(0,B.__assign)({},this.shape.attr())})}},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},r.prototype.setShapeInfo=function(t,e){var i=this;if(t.cfg.origin=e,t.cfg.element=this,t.isGroup()){var a=t.get("children");a.forEach(function(o){i.setShapeInfo(o,e)})}},r.prototype.syncShapeStyle=function(t,e,i,a,o){if(i===void 0&&(i=""),o===void 0&&(o=0),t.isGroup())for(var s=t.get("children"),l=e.get("children"),u=0;u<s.length;u++)this.syncShapeStyle(s[u],l[u],i,a,o+u);else{if(i&&i!=="reset"){var f=t.get("name");(0,h.isArray)(f)&&(f=f[1]);var c=this.getStateStyle(i,f||o);e.attr(c)}var v=Ii(t,e);this.animate?a?Vo(t,a,{coordinate:this.shapeFactory.coordinate,toAttrs:v,shapeModel:this.model}):i?(t.stopAnimate(),t.animate(v,{duration:300})):t.attr(v):t.attr(v)}},r.prototype.getShapeType=function(t){var e=(0,h.get)(t,"shape");return(0,h.isArray)(e)?e[0]:e},r}(xr),Tc=wb,_c={},Pc={};function Lc(n){return _c[n.toLowerCase()]}function ds(n,r){_c[n.toLowerCase()]=r}function Ic(n){return Pc[n.toLowerCase()]}function Co(n,r){Pc[n.toLowerCase()]=r}var qs=d(62029),Sb={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(n,r){var t=this.getShape(n);return t.getPoints?t.getPoints(r):this.getDefaultPoints(r)},getShape:function(n){var r=this[n]||this[this.defaultShapeType];return r.coordinate=this.coordinate,r},getDefaultPoints:function(){return[]},getMarker:function(n,r){var t=this.getShape(n);if(!t.getMarker){var e=this.defaultShapeType;t=this.getShape(e)}var i=this.theme,a=(0,h.get)(i,[n,"default"],{}),o=t.getMarker(r);return(0,h.deepMix)({},a,o)},drawShape:function(n,r,t){var e=this.getShape(n);return e.draw(r,t)}},Cb={coordinate:null,parsePath:function(n){var r=this.coordinate,t=(0,qs.parsePathString)(n);return r.isPolar?t=dt(r,t):t=ti(r,t),t},parsePoint:function(n){var r=this.coordinate;return r.convert(n)},parsePoints:function(n){var r=this.coordinate;return n.map(function(t){return r.convert(t)})},draw:function(n,r){}},$u={};function oo(n,r){var t=(0,h.upperFirst)(n),e=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},Sb),r),{geometryType:n});return $u[t]=e,e}function Ai(n,r,t){var e=(0,h.upperFirst)(n),i=$u[e],a=(0,B.__assign)((0,B.__assign)({},Cb),t);return i[r]=a,a}function Qu(n){var r=(0,h.upperFirst)(n);return $u[r]}function Mb(n,r,t){if(t===void 0&&(t={}),!r)return[n];var e=(0,h.groupToMap)(n,r),i=[];if(r.length===1&&t[r[0]])for(var a=t[r[0]],o=0,s=a;o<s.length;o++){var l=s[o],u=e["_"+l];u&&i.push(u)}else for(var f in e)if(e.hasOwnProperty(f)){var c=e[f];i.push(c)}return i}function kc(n,r){return(0,h.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,h.isEqual)(n[t],r[t])})}function ps(n){return(0,h.isArray)(n)?n:n.split("*")}function Eb(n,r){var t=[];return(0,h.each)(r,function(e,i){var a=i.split(" ")[0];a===n&&t.push(e)}),t}var Ab=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;e.type="base",e.attributes={},e.elements=[],e.elementsMap={},e.animateOption=!0,e.attributeOption={},e.lastElementsMap={},e.generatePoints=!1,e.beforeMappingData=null,e.adjusts={},e.idFields=[],e.hasSorted=!1,e.isCoordinateChanged=!1;var i=t.container,a=t.labelsContainer,o=t.coordinate,s=t.data,l=t.sortable,u=l===void 0?!1:l,f=t.visible,c=f===void 0?!0:f,v=t.theme,g=t.scales,C=g===void 0?{}:g,O=t.scaleDefs,F=O===void 0?{}:O;return e.container=i,e.labelsContainer=a,e.coordinate=o,e.data=s,e.sortable=u,e.visible=c,e.userTheme=v,e.scales=C,e.scaleDefs=F,e}return r.prototype.position=function(t){var e=t;(0,h.isPlainObject)(t)||(e={fields:ps(t)});var i=(0,h.get)(e,"fields");return i.length===1&&(i.unshift("1"),(0,h.set)(e,"fields",i)),(0,h.set)(this.attributeOption,"position",e),this},r.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},r.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},r.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},r.prototype.adjust=function(t){var e=t;return((0,h.isString)(t)||(0,h.isPlainObject)(t))&&(e=[t]),(0,h.each)(e,function(i,a){(0,h.isObject)(i)||(e[a]={type:i})}),this.adjustOption=e,this},r.prototype.style=function(t,e){if((0,h.isString)(t)){var i=ps(t);this.styleOption={fields:i,callback:e}}else{var a=t,i=a.fields,o=a.callback,s=a.cfg;i||o||s?this.styleOption=t:this.styleOption={cfg:t}}return this},r.prototype.tooltip=function(t,e){if((0,h.isString)(t)){var i=ps(t);this.tooltipOption={fields:i,callback:e}}else this.tooltipOption=t;return this},r.prototype.animate=function(t){return this.animateOption=t,this},r.prototype.label=function(t,e,i){if((0,h.isString)(t)){var a={},o=ps(t);a.fields=o,(0,h.isFunction)(e)?a.callback=e:(0,h.isPlainObject)(e)&&(a.cfg=e),i&&(a.cfg=i),this.labelOption=a}else this.labelOption=t;return this},r.prototype.state=function(t){return this.stateOption=t,this},r.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},r.prototype.update=function(t){t===void 0&&(t={});var e=t.data,i=t.isDataChanged,a=t.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;(0,h.isEqual)(s,l)?e&&(i||!(0,h.isEqual)(e,this.data))?(this.setCfg(t),this.processData(e)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=a},r.prototype.paint=function(t){var e=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,h.deepMix)({},Ac(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var i=this.getOffscreenGroup();i.clear();for(var a=this.beforeMappingData,o=this.beforeMapping(a),s=[],l=0,u=o.length;l<u;l++){var f=o[l],c=this.mapping(f);s.push(c),this.createElements(c,l,t)}if(this.canDoGroupAnimation(t)){var v=this.container,g=this.type,C=this.coordinate,O=(0,h.get)(this.animateOption,"appear"),F=this.getYScale(),G=C.convert({x:0,y:F.scale(this.getYMinValue())});xb(v,O,g,C,G)}this.labelOption&&this.renderLabels((0,h.flatten)(s),t),this.dataArray=s,(0,h.each)(this.lastElementsMap,function(Y){Y.animate=e.animateOption,Y.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=(0,B.__assign)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var t=this,e=t.container,i=t.geometryLabel,a=t.offscreenGroup;e&&e.clear(),i&&i.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},r.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,n.prototype.destroy.call(this)},r.prototype.getGroupScales=function(){return this.groupScales},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},r.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},r.prototype.getGroupAttributes=function(){var t=[];return(0,h.each)(this.attributes,function(e){se.includes(e.type)&&t.push(e)}),t},r.prototype.getDefaultValue=function(t){var e,i=this.getAttribute(t);return i&&(0,h.isEmpty)(i.scales)&&(e=i.values[0]),e},r.prototype.getAttributeValues=function(t,e){for(var i=[],a=t.scales,o=0,s=a.length;o<s;o++){var l=a[o],u=l.field;l.isIdentity?i.push(l.values):i.push(e[u])}return t.mapping.apply(t,i)},r.prototype.getAdjust=function(t){return this.adjusts[t]},r.prototype.getShapeMarker=function(t,e){var i=this.getShapeFactory();return i.getMarker(t,e)},r.prototype.getElementsBy=function(t){return this.elements.filter(function(e){return t(e)})},r.prototype.getElementId=function(t){t=(0,h.isArray)(t)?t[0]:t;var e=t[jt];if(this.idFields.length){for(var i=e[this.idFields[0]],a=1;a<this.idFields.length;a++)i+="-"+e[this.idFields[a]];return i}var o=this.type,s=this.getXScale(),l=this.getYScale(),u=s.field||"x",f=l.field||"y",c=e[f],v;s.type==="identity"?v=s.values[0]:v=e[u];var g;o==="interval"||o==="schema"?g=v:o==="line"||o==="area"||o==="path"?g=o:g=v+"-"+c;for(var C=this.groupScales,a=0,O=C.length;a<O;a++){var F=C[a],G=F.field;g=g+"-"+e[G]}var Y=this.getAdjust("dodge");if(Y){var $=Y.dodgeBy;$&&(g=g+"-"+e[$])}return this.getAdjust("jitter")&&(g=g+"-"+t.x+"-"+t.y),g},r.prototype.getScaleFields=function(){var t=[],e={},i=this,a=i.attributeOption,o=i.labelOption,s=i.tooltipOption;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];u.fields?ft(u.fields,t,e):u.values&&ft(u.values,t,e)}return o&&o.fields&&ft(o.fields,t,e),(0,h.isObject)(s)&&s.fields&&ft(s.fields,t,e),t},r.prototype.changeVisible=function(t){n.prototype.changeVisible.call(this,t);for(var e=this.elements,i=0,a=e.length;i<a;i++){var o=e[i];o.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},r.prototype.getGroupFields=function(){for(var t=[],e={},i=0,a=se.length;i<a;i++){var o=se[i],s=this.attributeOption[o];s&&s.fields&&ft(s.fields,t,e)}return t},r.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,e=t[0],i=t[1];return[e,i]},r.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},r.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),i=e.field,a=0;a<t.length;a++){var o=t[a];o.sort(function(s,l){return e.translate(s[jt][i])-e.translate(l[jt][i])})}this.hasSorted=!0},r.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},r.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!Qu(t))return this.shapeFactory||(this.shapeFactory=(0,h.clone)(Qu(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},r.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),i=this.getYScale(),a=this.normalizeValues(t[e.field],e),o;return i?o=this.normalizeValues(t[i.field],i):o=t.y?t.y:.1,{x:a,y:o,y0:i?i.scale(this.getYMinValue()):void 0}},r.prototype.createElement=function(t,e){e===void 0&&(e=!1);var i=this.container,a=this.getDrawCfg(t),o=this.getShapeFactory(),s=new Tc({shapeFactory:o,container:i,offscreenGroup:this.getOffscreenGroup()});return s.animate=this.animateOption,s.geometry=this,s.draw(a,e),s},r.prototype.getDrawCfg=function(t){var e=t[jt],i={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar},a=t.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),i.shape=a;var o=this.theme.geometries[this.shapeType];i.defaultStyle=(0,h.get)(o,[a,"default"],{}).style;var s=this.styleOption;return s&&(i.style=this.getStyleCfg(s,e)),this.generatePoints&&(i.points=t.points,i.nextPoints=t.nextPoints),i},r.prototype.createElements=function(t,e,i){i===void 0&&(i=!1);for(var a=this,o=a.lastElementsMap,s=a.elementsMap,l=a.elements,u=0,f=t.length;u<f;u++){var c=t[u],v=this.getElementId(c);s[v]&&(v=v+"-"+e+"-"+u);var g=o[v];if(!g)g=this.createElement(c,i);else{var C=this.getDrawCfg(c),O=g.getModel();(this.isCoordinateChanged||kc(C,O))&&(g.animate=this.animateOption,g.update(C)),delete o[v]}l.push(g),s[v]=g}return l},r.prototype.getLabelType=function(){var t=this,e=t.labelOption,i=t.coordinate,a=t.type,o=i.type,s=(0,h.get)(e,["cfg","type"]);return s||(o==="polar"?s="polar":o==="theta"?s="pie":a==="interval"||a==="polygon"?s="interval":s="base"),s},r.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,i=t.max,a;return e>=0?a=e:i<=0?a=i:a=0,a},r.prototype.createAttrOption=function(t,e,i){if((0,h.isNil)(e)||(0,h.isObject)(e))(0,h.isObject)(e)&&(0,h.isEqual)(Object.keys(e),["values"])?(0,h.set)(this.attributeOption,t,{fields:e.values}):(0,h.set)(this.attributeOption,t,e);else{var a={};(0,h.isNumber)(e)?a.values=[e]:a.fields=ps(e),i&&((0,h.isFunction)(i)?a.callback=i:a.values=i),(0,h.set)(this.attributeOption,t,a)}},r.prototype.initAttributes=function(){var t=this,e=this,i=e.attributes,a=e.attributeOption,o=e.theme,s=e.shapeType;this.groupScales=[];var l={},u=function(v){if(a.hasOwnProperty(v)){var g=a[v];if(!g)return{value:void 0};var C=(0,B.__assign)({},g),O=C.callback,F=C.values,G=C.fields,Y=G===void 0?[]:G,$=Y.map(function(ut){var kt=t.scales[ut];return kt.isCategory&&!l[ut]&&se.includes(v)&&(t.groupScales.push(kt),l[ut]=!0),kt});C.scales=$,v!=="position"&&$.length===1&&$[0].type==="identity"?C.values=$[0].values:!O&&!F&&(v==="size"?C.values=o.sizes:v==="shape"?C.values=o.shapes[s]||[]:v==="color"&&($.length?C.values=$[0].values.length<=10?o.colors10:o.colors20:C.values=o.colors10));var q=(0,ri.getAttribute)(v);i[v]=new q(C)}};for(var f in a){var c=u(f);if(typeof c=="object")return c.value}},r.prototype.processData=function(t){this.hasSorted=!1;for(var e=this.getAttribute("position").scales,i=e.filter(function(ut){return ut.isCategory}),a=this.groupData(t),o=[],s=0,l=a.length;s<l;s++){for(var u=a[s],f=[],c=0,v=u.length;c<v;c++){var g=u[c],C={};for(var O in g)C[O]=g[O];C[jt]=g;for(var F=0,G=i;F<G.length;F++){var Y=G[F],$=Y.field;C[$]=Y.translate(C[$])}f.push(C)}o.push(f)}var q=this.adjustData(o);return this.beforeMappingData=q,q},r.prototype.adjustData=function(t){var e=this.adjustOption,i=t;if(e)for(var a=this.getXScale(),o=this.getYScale(),s=a.field,l=o?o.field:null,u=0,f=e.length;u<f;u++){var c=e[u],v=(0,B.__assign)({xField:s,yField:l},c),g=c.type;if(g==="dodge"){var C=[];if(a.isCategory||a.type==="identity")C.push("x");else if(!o)C.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");v.adjustNames=C,v.dodgeRatio=this.theme.columnWidthRatio}else if(g==="stack"){var O=this.coordinate;if(!o){v.height=O.getHeight();var F=this.getDefaultValue("size")||3;v.size=F}!O.isTransposed&&(0,h.isNil)(v.reverseOrder)&&(v.reverseOrder=!0)}var G=Cc(g),Y=new G(v);i=Y.process(i),this.adjusts[g]=Y}return i},r.prototype.groupData=function(t){for(var e=this.getGroupScales(),i=this.scaleDefs,a={},o=[],s=0;s<e.length;s++){var l=e[s],u=l.field;o.push(u),(0,h.get)(i,[u,"values"])&&(a[u]=i[u].values)}return Mb(t,o,a)},r.prototype.updateStackRange=function(t,e){for(var i=(0,h.flatten)(e),a=t.field,o=t.min,s=t.max,l=0;l<i.length;l++){var u=i[l],f=Math.min.apply(null,u[a]),c=Math.max.apply(null,u[a]);f<o&&(o=f),c>s&&(s=c)}var v=this.scaleDefs,g={};o<t.min&&!(0,h.get)(v,[a,"min"])&&(g.min=o),s>t.max&&!(0,h.get)(v,[a,"max"])&&(g.max=s),t.change(g)},r.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var i=0,a=e.length;i<a;i++){var o=e[i];this.generateShapePoints(o);var s=e[i+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return e},r.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),i=this.getAttribute("shape"),a=0;a<t.length;a++){var o=t[a],s=this.createShapePointsCfg(o),l=i?this.getAttributeValues(i,o):null,u=e.getShapePoints(l,s);o.points=u}},r.prototype.normalizeValues=function(t,e){var i=[];if((0,h.isArray)(t))for(var a=0;a<t.length;a++){var o=t[a];i.push(e.scale(o))}else i=e.scale(t);return i},r.prototype.mapping=function(t){for(var e=this.attributes,i=[],a=0;a<t.length;a++){var o=t[a],s={_origin:o[jt],points:o.points,nextPoints:o.nextPoints};for(var l in e)if(e.hasOwnProperty(l)){var u=e[l],f=u.names,c=this.getAttributeValues(u,o);if(f.length>1)for(var v=0;v<c.length;v+=1){var g=c[v],C=f[v];s[C]=(0,h.isArray)(g)&&g.length===1?g[0]:g}else s[f[0]]=c.length===1?c[0]:c}this.convertPoint(s),i.push(s)}return i},r.prototype.convertPoint=function(t){var e=t.x,i=t.y,a,o,s,l=this.coordinate;if((0,h.isArray)(e)&&(0,h.isArray)(i)){a=[],o=[];for(var u=0,f=0,c=e.length,v=i.length;u<c&&f<v;u+=1,f+=1)s=l.convert({x:e[u],y:i[f]}),a.push(s.x),o.push(s.y)}else if((0,h.isArray)(i)){o=[];for(var g=0;g<i.length;g++){var C=i[g];s=l.convert({x:e,y:C}),a&&a!==s.x?((0,h.isArray)(a)||(a=[a]),a.push(s.x)):a=s.x,o.push(s.y)}}else if((0,h.isArray)(e)){a=[];for(var g=0;g<e.length;g++){var O=e[g];s=l.convert({x:O,y:i}),o&&o!==s.y?((0,h.isArray)(o)||(o=[o]),o.push(s.y)):o=s.y,a.push(s.x)}}else{var F=l.convert({x:e,y:i});a=F.x,o=F.y}t.x=a,t.y=o},r.prototype.getStyleCfg=function(t,e){var i=t.fields,a=i===void 0?[]:i,o=t.callback,s=t.cfg;if(s)return s;var l=a.map(function(u){return e[u]});return o.apply(void 0,l)},r.prototype.setCfg=function(t){var e=this,i=t.coordinate,a=t.data,o=t.theme,s=t.scaleDefs;i&&(this.coordinate=i),a&&(this.data=a),s&&(this.scaleDefs=s,this.idFields=[],(0,h.each)(s,function(l,u){l&&l.key&&e.idFields.push(u)})),o&&(this.theme=this.userTheme?(0,h.deepMix)({},o,this.userTheme):o)},r.prototype.renderLabels=function(t,e){e===void 0&&(e=!1);var i=this.geometryLabel;if(!i){var a=this.getLabelType(),o=Lc(a);i=new o(this),this.geometryLabel=i}i.render(t,e);var s=i.labelsRenderer.shapesMap;(0,h.each)(this.elementsMap,function(l,u){var f=Eb(u,s);if(f.length){l.labelShape=f;for(var c=0;c<f.length;c++)for(var v=f[c],g=v.getChildren(),C=0;C<g.length;C++){var O=g[C];O.cfg.name=["element","label"],O.cfg.element=l}}})},r.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,h.get)(this.animateOption,"appear")===void 0||(0,h.get)(this.animateOption,"appear")&&(0,h.get)(this.animateOption,["appear","animation"])===void 0)},r}(xr),Wa=Ab,tl=Ri.transform;function Ju(n,r,t){var e=tl(n.getMatrix(),[["t",r,t]]);n.setMatrix(e)}function Oc(n,r){var t=n.attr(),e=t.x,i=t.y,a=tl(n.getMatrix(),[["t",-e,-i],["r",r],["t",e,i]]);n.setMatrix(a)}function wY(){return[1,0,0,0,1,0,0,0,1]}function Tb(n,r){var t=n.getBBox(),e=(t.minX+t.maxX)/2,i=(t.minY+t.maxY)/2;n.applyToMatrix([e,i,1]);var a=tl(n.getMatrix(),[["t",-e,-i],["s",r,r],["t",e,i]]);n.setMatrix(a)}var _b=function(){function n(r){this.shapesMap={},this.lastShapesMap={};var t=r.layout,e=r.container;this.layout=t,this.container=e}return n.prototype.render=function(r,t,e){var i=this;e===void 0&&(e=!1),this.shapesMap={};var a=this.container,o=this.createOffscreenGroup();if(r.length){for(var s=0,l=r;s<l.length;s++){var u=l[s];u&&this.renderLabel(u,o)}this.doLayout(r,t),this.renderLabelLine(r),this.adjustLabel(r)}var f=this.lastShapesMap,c=this.shapesMap;(0,h.each)(c,function(v,g){if(v.destroyed)delete c[g];else{if(f[g]){var C=v.get("data"),O=v.get("origin"),F=v.get("coordinate"),G=f[g],Y=v.get("animateCfg");G.set("data",C),G.set("origin",O),G.set("animateCfg",Y),G.set("coordinate",F);var $=(0,h.get)(Y,"update"),q=G.getChildren();v.getChildren().map(function(kt,Nt){var Wt=q[Nt];Wt.set("data",C),Wt.set("origin",O),Wt.set("animateCfg",Y),Wt.set("coordinate",F);var Ft=Ii(Wt,kt);$?Vo(Wt,$,{toAttrs:Ft,coordinate:F}):Wt.attr(Ft)}),i.shapesMap[g]=G}else{a.add(v);var ut=(0,h.get)(v.get("animateCfg"),e?"enter":"appear");ut&&Vo(v,ut,{toAttrs:(0,B.__assign)({},v.attr()),coordinate:v.get("coordinate")})}delete f[g]}}),(0,h.each)(f,function(v){var g=(0,h.get)(v.get("animateCfg"),"leave");g?Vo(v,g,{toAttrs:null,coordinate:v.get("coordinate")}):v.remove(!0)}),this.lastShapesMap=c,o.destroy()},n.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},n.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},n.prototype.renderLabel=function(r,t){var e=r.id,i=r.data,a=r.mappingData,o=r.coordinate,s=r.animate,l=r.content,u={id:e,data:i,origin:a,coordinate:o},f=t.addGroup((0,B.__assign)({name:"label",animateCfg:this.animate===!1||s===null||s===!1?!1:(0,h.deepMix)({},this.animate,s)},u)),c;if(l.isGroup&&l.isGroup()||l.isShape&&l.isShape()){var v=l.getCanvasBBox(),g=v.width,C=v.height,O=(0,h.get)(r,"textAlign","left"),F=r.x,G=r.y-C/2;O==="center"?F=F-g/2:(O==="right"||O==="end")&&(F=F-g),Ju(l,F,G),c=l,f.add(l)}else c=f.addShape("text",(0,B.__assign)({attrs:(0,B.__assign)({x:r.x,y:r.y,textAlign:r.textAlign,textBaseline:(0,h.get)(r,"textBaseline","middle"),text:r.content},r.style)},u));r.rotate&&Oc(c,r.rotate),this.shapesMap[e]=f},n.prototype.doLayout=function(r,t){var e=this;if(this.layout){var i=(0,h.isArray)(this.layout)?this.layout:[this.layout];(0,h.each)(i,function(a){var o=Ic((0,h.get)(a,"type",""));if(o){var s=[],l=[];(0,h.each)(e.shapesMap,function(u,f){s.push(u),l.push(t[f])}),o(r,s,l,e.region,a.cfg)}})}},n.prototype.renderLabelLine=function(r){var t=this;(0,h.each)(r,function(e){var i=(0,h.get)(e,"coordinate");if(!(!e||!i)){var a=i.getCenter(),o=i.getRadius();if(!!e.labelLine){var s=(0,h.get)(e,"labelLine",{}),l=e.id,u=s.path;if(!u){var f=oi(a.x,a.y,o,e.angle);u=[["M",f.x,f.y],["L",e.x,e.y]]}var c=t.shapesMap[l];c.destroyed||c.addShape("path",{capture:!1,attrs:(0,B.__assign)({path:u,stroke:e.color?e.color:(0,h.get)(e,["style","fill"],"#000"),fill:null},s.style),id:l,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}})},n.prototype.createOffscreenGroup=function(){var r=this.container,t=r.getGroupBase(),e=new t({});return e},n.prototype.adjustLabel=function(r){var t=this;(0,h.each)(r,function(e){if(e){var i=e.id,a=t.shapesMap[i];if(!a.destroyed){var o=a.find(function(s){return s.get("type")==="text"});o&&(e.offsetX&&o.attr("x",o.attr("x")+e.offsetX),e.offsetY&&o.attr("y",o.attr("y")+e.offsetY))}}})},n}(),Pb=_b;function Lb(n){var r=0;return(0,h.each)(n,function(t){r+=t}),r/n.length}var Ib=function(){function n(r){this.geometry=r}return n.prototype.getLabelItems=function(r){var t=this,e=[],i=this.getLabelCfgs(r);return(0,h.each)(r,function(a,o){var s=i[o];if(!s||(0,h.isNil)(a.x)||(0,h.isNil)(a.y)){e.push(null);return}var l=(0,h.isArray)(s.content)?s.content:[s.content];s.content=l;var u=l.length;(0,h.each)(l,function(f,c){if((0,h.isNil)(f)||f===""){e.push(null);return}var v=(0,B.__assign)((0,B.__assign)({},s),t.getLabelPoint(s,a,c));v.textAlign||(v.textAlign=t.getLabelAlign(v,c,u)),v.offset<=0&&(v.labelLine=null),e.push(v)})}),e},n.prototype.render=function(r,t){t===void 0&&(t=!1);var e=this.getLabelItems(r),i=this.getLabelsRenderer(),a=this.getGeometryShapes();i.render(e,a,t)},n.prototype.clear=function(){var r=this.labelsRenderer;r&&r.clear()},n.prototype.destroy=function(){var r=this.labelsRenderer;r&&r.destroy(),this.labelsRenderer=null},n.prototype.getCoordinate=function(){return this.geometry.coordinate},n.prototype.getDefaultLabelCfg=function(){return(0,h.get)(this.geometry.theme,"labels",{})},n.prototype.setLabelPosition=function(r,t,e,i){},n.prototype.getDefaultOffset=function(r){var t=this.getCoordinate(),e=this.getOffsetVector(r);return t.isTransposed?e[0]:e[1]},n.prototype.getLabelOffset=function(r,t,e){var i=this.getDefaultOffset(r.offset),a=this.getCoordinate(),o=a.isTransposed,s=o?"x":"y",l=o?1:-1,u={x:0,y:0};return t>0||e===1?u[s]=i*l:u[s]=i*l*-1,u},n.prototype.getLabelPoint=function(r,t,e){var i=this.getCoordinate(),a=r.content.length;function o(O,F){var G=O;return(0,h.isArray)(G)&&(r.content.length===1?G.length<=2?G=G[O.length-1]:G=Lb(G):G=G[F]),G}var s={content:r.content[e],x:0,y:0,start:{x:0,y:0},color:"#fff"};if(t&&this.geometry.type==="polygon"){var l=fn(t.x,t.y);s.x=l[0],s.y=l[1]}else s.x=o(t.x,e),s.y=o(t.y,e);var u=(0,h.isArray)(t.shape)?t.shape[0]:t.shape;if(u==="funnel"||u==="pyramid"){var f=(0,h.get)(t,"nextPoints"),c=(0,h.get)(t,"points");if(f){var v=i.convert(c[1]),g=i.convert(f[1]);s.x=(v.x+g.x)/2,s.y=(v.y+g.y)/2}else if(u==="pyramid"){var v=i.convert(c[1]),g=i.convert(c[2]);s.x=(v.x+g.x)/2,s.y=(v.y+g.y)/2}}r.position&&this.setLabelPosition(s,t,e,r.position);var C=this.getLabelOffset(r,e,a);return s.start={x:s.x,y:s.y},s.x+=C.x,s.y+=C.y,s.color=t.color,s},n.prototype.getLabelAlign=function(r,t,e){var i="center",a=this.getCoordinate();if(a.isTransposed){var o=this.getDefaultOffset(r.offset);o<0?i="right":o===0?i="center":i="left",e>1&&t===0&&(i==="right"?i="left":i==="left"&&(i="right"))}return i},n.prototype.getLabelId=function(r){var t=this.geometry,e=t.type,i=t.getXScale(),a=t.getYScale(),o=r[jt],s=t.getElementId(r);return e==="line"||e==="area"?s+=" "+o[i.field]:e==="path"&&(s+=" "+o[i.field]+"-"+o[a.field]),s},n.prototype.getLabelsRenderer=function(){var r=this.geometry,t=r.labelsContainer,e=r.labelOption,i=r.canvasRegion,a=r.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new Pb({container:t,layout:(0,h.get)(e,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=i,s.animate=a?Ac("label",o):!1,s},n.prototype.getLabelCfgs=function(r){var t=this,e=this.geometry,i=this.getDefaultLabelCfg(),a=e.type,o=e.theme,s=e.labelOption,l=e.scales,u=e.coordinate,f=s,c=f.fields,v=f.callback,g=f.cfg,C=c.map(function(F){return l[F]}),O=[];return(0,h.each)(r,function(F,G){var Y=F[jt],$=t.getLabelText(Y,C),q;if(v){var ut=c.map(function(Wt){return Y[Wt]});if(q=v.apply(void 0,ut),(0,h.isNil)(q)){O.push(null);return}}var kt=(0,B.__assign)((0,B.__assign)({id:t.getLabelId(F),data:Y,mappingData:F,coordinate:u},g),q),Nt=kt.content;(0,h.isFunction)(Nt)?kt.content=Nt(Y,F,G):(0,h.isUndefined)(Nt)&&(kt.content=$[0]),(0,h.isFunction)(kt.position)&&(kt.position=kt.position(Y,F,G)),a==="polygon"||kt.offset<0&&!["line","point","path"].includes(a)?kt=(0,h.deepMix)({},i,o.innerLabels,kt):kt=(0,h.deepMix)({},i,o.labels,kt),O.push(kt)}),O},n.prototype.getLabelText=function(r,t){var e=[];return(0,h.each)(t,function(i){var a=r[i.field];(0,h.isArray)(a)?a=a.map(function(o){return i.getText(o)}):a=i.getText(a),(0,h.isNil)(a)||a===""?e.push(null):e.push(a)}),e},n.prototype.getOffsetVector=function(r){r===void 0&&(r=0);var t=this.getCoordinate();return t.isTransposed?t.applyMatrix(r,0):t.applyMatrix(0,r)},n.prototype.getGeometryShapes=function(){var r=this.geometry,t={};return(0,h.each)(r.elementsMap,function(e,i){t[i]=e.shape}),(0,h.each)(r.getOffscreenGroup().getChildren(),function(e){var i=r.getElementId(e.get("origin").mappingData);t[i]=e}),t},n}(),el=Ib,kb=d(15451),Ob="4.0.15",Mo={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Ki={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},ca=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Bb=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Db={backgroundColor:"#141414",brandColor:ca[0],paletteQualitative10:ca,paletteQualitative20:Bb,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:Ki[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:Ki[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:Ki[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:Ki[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:Ki[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:Ki[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:Ki[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:ca[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Ki[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:Ki[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Ki[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Mo[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Mo[25],annotationArcBorderColor:Ki[15],annotationArcBorder:.5,annotationLineBorderColor:Ki[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:Ki[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:Mo[95],annotationTextBorder:1.5,annotationRegionFillColor:Ki[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Ki[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Ki[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Ki[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Mo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:Ki[25],pointFillColor:ca[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Mo[100],pointBorderOpacity:1,pointActiveBorderColor:Ki[100],pointSelectedBorder:2,pointSelectedBorderColor:Ki[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:ca[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Mo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Ki[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Ki[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:ca[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:ca[0],areaFillOpacity:.25,areaActiveFillColor:ca[0],areaActiveFillOpacity:.5,areaSelectedFillColor:ca[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:ca[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Ki[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Ki[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:ca[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Ki[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Ki[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:ca[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Mo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Ki[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Ki[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},In=d(83438),ki=d(55535),rl=d(91110),kn=d(21429),zi=d(91577),Fb=d(61823),Rb=d(62352),SY=d(47203),Nb=d(37250),Yb=d(88041);function Gb(){return window?window.devicePixelRatio:1}function Bc(n,r,t,e){var i=n-t,a=r-e;return Math.sqrt(i*i+a*a)}function Eo(n,r,t,e,i,a){return i>=n&&i<=n+t&&a>=r&&a<=r+e}function qu(n,r){return!(r.minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)}function zb(n,r){return!n||!r?n||r:{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}}function Dc(n,r){return n[0]===r[0]&&n[1]===r[1]}var CY=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,MY=/[^\s\,]+/gi,Xb=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Vb=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Hb=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Fc=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Rc(n,r){var t=n.match(Fc);(0,zi.default)(t,function(e){var i=e.split(":");r.addColorStop(i[0],i[1])})}function Wb(n,r,t){var e=Xb.exec(t),i=parseFloat(e[1])%360*(Math.PI/180),a=e[2],o=r.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),f=u*u,c=(l.x-s.x+u*(l.y-s.y))/(f+1)+s.x,v=u*(l.x-s.x+u*(l.y-s.y))/(f+1)+s.y,g=n.createLinearGradient(s.x,s.y,c,v);return Rc(a,g),g}function jb(n,r,t){var e=Vb.exec(t),i=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]),s=e[4];if(o===0){var l=s.match(Fc);return l[l.length-1].split(":")[1]}var u=r.getBBox(),f=u.maxX-u.minX,c=u.maxY-u.minY,v=Math.sqrt(f*f+c*c)/2,g=n.createRadialGradient(u.minX+f*i,u.minY+c*a,0,u.minX+f/2,u.minY+c/2,o*v);return Rc(s,g),g}function Ub(n,r,t){if(r.get("patternSource")&&r.get("patternSource")===t)return r.get("pattern");var e,i,a=Hb.exec(t),o=a[1],s=a[2];function l(){e=n.createPattern(i,o),r.set("pattern",e),r.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),e}function Zb(n,r,t){if((0,ki.default)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Wb(n,r,t);if(t[0]==="r")return jb(n,r,t);if(t[0]==="p")return Ub(n,r,t)}return t}}function Kb(n){var r=0,t=0,e=0,i=0;return(0,kn.default)(n)?n.length===1?r=t=e=i=n[0]:n.length===2?(r=e=n[0],t=i=n[1]):n.length===3?(r=n[0],t=i=n[1],e=n[2]):(r=n[0],t=n[1],e=n[2],i=n[3]):r=t=e=i=n,[r,t,e,i]}function il(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function th(n,r){return il(n)*il(r)?(n[0]*r[0]+n[1]*r[1])/(il(n)*il(r)):1}function Nc(n,r){return(n[0]*r[1]<n[1]*r[0]?-1:1)*Math.acos(th(n,r))}function Yc(n,r){var t=r[1],e=r[2],i=(0,Rb.default)((0,Fb.default)(r[3]),Math.PI*2),a=r[4],o=r[5],s=n[0],l=n[1],u=r[6],f=r[7],c=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-f)/2,v=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-f)/2,g=c*c/(t*t)+v*v/(e*e);g>1&&(t*=Math.sqrt(g),e*=Math.sqrt(g));var C=t*t*(v*v)+e*e*(c*c),O=C?Math.sqrt((t*t*(e*e)-C)/C):1;a===o&&(O*=-1),isNaN(O)&&(O=0);var F=e?O*t*v/e:0,G=t?O*-e*c/t:0,Y=(s+u)/2+Math.cos(i)*F-Math.sin(i)*G,$=(l+f)/2+Math.sin(i)*F+Math.cos(i)*G,q=[(c-F)/t,(v-G)/e],ut=[(-1*c-F)/t,(-1*v-G)/e],kt=Nc([1,0],q),Nt=Nc(q,ut);return th(q,ut)<=-1&&(Nt=Math.PI),th(q,ut)>=1&&(Nt=0),o===0&&Nt>0&&(Nt=Nt-2*Math.PI),o===1&&Nt<0&&(Nt=Nt+2*Math.PI),{cx:Y,cy:$,rx:Dc(n,[u,f])?0:t,ry:Dc(n,[u,f])?0:e,startAngle:kt,endAngle:kt+Nt,xRotation:i,arcFlag:a,sweepFlag:o}}var nl=Math.sin,al=Math.cos,eh=Math.atan2,ol=Math.PI;function Gc(n,r,t,e,i,a,o){var s=r.stroke,l=r.lineWidth,u=t-i,f=e-a,c=eh(f,u),v=new lh({type:"path",canvas:n.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*al(ol/6)+","+10*nl(ol/6)+" L0,0 L"+10*al(ol/6)+",-"+10*nl(ol/6),stroke:s,lineWidth:l}});v.translate(i,a),v.rotateAtPoint(i,a,c),n.set(o?"startArrowShape":"endArrowShape",v)}function zc(n,r,t,e,i,a,o){var s=r.startArrow,l=r.endArrow,u=r.stroke,f=r.lineWidth,c=o?s:l,v=c.d,g=c.fill,C=c.stroke,O=c.lineWidth,F=(0,B.__rest)(c,["d","fill","stroke","lineWidth"]),G=t-i,Y=e-a,$=eh(Y,G);v&&(i=i-al($)*v,a=a-nl($)*v);var q=new lh({type:"path",canvas:n.get("canvas"),isArrowShape:!0,attrs:(0,B.__assign)((0,B.__assign)({},F),{stroke:C||u,lineWidth:O||f,fill:g})});q.translate(i,a),q.rotateAtPoint(i,a,$),n.set(o?"startArrowShape":"endArrowShape",q)}function Ao(n,r,t,e,i){var a=eh(e-r,t-n);return{dx:al(a)*i,dy:nl(a)*i}}function rh(n,r,t,e,i,a){typeof r.startArrow=="object"?zc(n,r,t,e,i,a,!0):r.startArrow?Gc(n,r,t,e,i,a,!0):n.set("startArrowShape",null)}function ih(n,r,t,e,i,a){typeof r.endArrow=="object"?zc(n,r,t,e,i,a,!1):r.endArrow?Gc(n,r,t,e,i,a,!1):n.set("startArrowShape",null)}var Xc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Ho(n,r){var t=r.attr();for(var e in t){var i=t[e],a=Xc[e]?Xc[e]:e;a==="matrix"&&i?n.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&n.setLineDash?(0,h.isArray)(i)&&n.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=Zb(n,r,i):a==="globalAlpha"&&(i=i*n.globalAlpha),n[a]=i)}}function nh(n,r,t){for(var e=0;e<r.length;e++){var i=r[e];i.get("visible")?i.draw(n,t):i.skipDraw()}}function Vc(n,r,t,e){var i=t.path,a=t.startArrow,o=t.endArrow,s=[0,0],l=[0,0],u={dx:0,dy:0};r.beginPath();for(var f=0;f<i.length;f++){var c=i[f],v=c[0];if(f===0&&a&&a.d){var g=n.getStartTangent();u=Ao(g[0][0],g[0][1],g[1][0],g[1][1],a.d)}else if(f===i.length-2&&i[f+1][0]==="Z"&&o&&o.d){var C=i[f+1];if(C[0]==="Z"){var g=n.getEndTangent();u=Ao(g[0][0],g[0][1],g[1][0],g[1][1],o.d)}}else if(f===i.length-1&&o&&o.d&&i[0]!=="Z"){var g=n.getEndTangent();u=Ao(g[0][0],g[0][1],g[1][0],g[1][1],o.d)}var O=u.dx,F=u.dy;switch(v){case"M":r.moveTo(c[1]-O,c[2]-F),l=[c[1],c[2]];break;case"L":r.lineTo(c[1]-O,c[2]-F);break;case"Q":r.quadraticCurveTo(c[1],c[2],c[3]-O,c[4]-F);break;case"C":r.bezierCurveTo(c[1],c[2],c[3],c[4],c[5]-O,c[6]-F);break;case"A":{var G=void 0;e?(G=e[f],G||(G=Yc(s,c),e[f]=G)):G=Yc(s,c);var Y=G.cx,$=G.cy,q=G.rx,ut=G.ry,kt=G.startAngle,Nt=G.endAngle,Wt=G.xRotation,Ft=G.sweepFlag;if(r.ellipse)r.ellipse(Y,$,q,ut,Wt,kt,Nt,1-Ft);else{var ee=q>ut?q:ut,ve=q>ut?1:q/ut,fe=q>ut?ut/q:1;r.translate(Y,$),r.rotate(Wt),r.scale(ve,fe),r.arc(0,0,ee,kt,Nt,1-Ft),r.scale(1/ve,1/fe),r.rotate(-Wt),r.translate(-Y,-$)}break}case"Z":r.closePath();break;default:break}if(v==="Z")s=l;else{var Te=c.length;s=[c[Te-2],c[Te-1]]}}}function Hc(n,r){var t=n.get("canvas");t&&(r==="remove"&&(n._cacheCanvasBBox=n.get("cacheCanvasBBox")),n.get("hasChanged")||(t.refreshElement(n,r,t),t.get("autoDraw")&&t.draw(),n.set("hasChanged",!0)))}function $b(n){var r;if(n.destroyed)r=n._cacheCanvasBBox;else{var t=n.get("cacheCanvasBBox"),e=t&&!!(t.width&&t.height),i=n.getCanvasBBox(),a=i&&!!(i.width&&i.height);e&&a?r=zb(t,i):e?r=t:a&&(r=i)}return r}function Wc(n){if(!n.length)return null;var r=[],t=[],e=[],i=[];return(0,h.each)(n,function(a){var o=$b(a);o&&(r.push(o.minX),t.push(o.minY),e.push(o.maxX),i.push(o.maxY))}),{minX:Math.min.apply(null,r),minY:Math.min.apply(null,t),maxX:Math.max.apply(null,e),maxY:Math.max.apply(null,i)}}function Qb(n,r){return!n||!r||!qu(n,r)?null:{minX:Math.max(n.minX,r.minX),minY:Math.max(n.minY,r.minY),maxX:Math.min(n.maxX,r.maxX),maxY:Math.min(n.maxY,r.maxY)}}var jc=d(46479),Jb=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.onCanvasChange=function(t){Hc(this,t)},r.prototype.getShapeBase=function(){return m},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(t,e){e&&(t.save(),Ho(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},r.prototype.draw=function(t,e){var i=this.getChildren();i.length&&(t.save(),Ho(t,this),this._applyClip(t,this.getClip()),nh(t,i,e),t.restore()),this.set("cacheCanvasBBox",this.getCanvasBBox()),this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(Er.AbstractGroup),ah=Jb,qb=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.getShapeBase=function(){return m},r.prototype.getGroupBase=function(){return ah},r.prototype.onCanvasChange=function(t){Hc(this,t)},r.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),i=(0,jc.b)(t),a=i(this),o=e/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,f=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+e,height:a.height+e,maxX:u,maxY:f}},r.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},r.prototype.isStroke=function(){return!!this.attrs.stroke},r.prototype._applyClip=function(t,e){e&&(t.save(),Ho(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},r.prototype.draw=function(t,e){var i=this.getClip();if(e){var a=i?Wc([this,i]):this.getCanvasBBox();if(!qu(e,a)){this.set("hasChanged",!1);return}}t.save(),Ho(t,this),this._applyClip(t,this.getClip()),this.drawPath(t),t.restore(),this._afterDraw()},r.prototype._afterDraw=function(){var t=this.getCanvasBBox(),e=this.getCanvas();if(this.set("cacheCanvasBBox",t),e){var i=e.getViewRange();this.set("isInView",qu(t,i))}this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},r.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},r.prototype.fill=function(t){t.fill()},r.prototype.stroke=function(t){t.stroke()},r.prototype.strokeAndFill=function(t){var e=this.attrs,i=e.lineWidth,a=e.opacity,o=e.strokeOpacity,s=e.fillOpacity;this.isFill()&&(!(0,In.default)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&i>0&&(!(0,In.default)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},r.prototype.createPath=function(t){},r.prototype.afterDrawPath=function(t){},r.prototype.isInShape=function(t,e){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,i,a,o)},r.prototype.isInStrokeOrPath=function(t,e,i,a,o){return!1},r.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},r}(Er.AbstractShape),xa=qb,tw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,r:0})},r.prototype.isInStrokeOrPath=function(t,e,i,a,o){var s=this.attr(),l=s.x,u=s.y,f=s.r,c=o/2,v=Bc(l,u,t,e);return a&&i?v<=f+c:a?v<=f:i?v>=f-c&&v<=f+c:!1},r.prototype.createPath=function(t){var e=this.attr(),i=e.x,a=e.y,o=e.r;t.beginPath(),t.arc(i,a,o,0,Math.PI*2,!1),t.closePath()},r}(xa),ew=tw;function sl(n,r,t,e){return n/(t*t)+r/(e*e)}var rw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(t,e,i,a,o){var s=this.attr(),l=o/2,u=s.x,f=s.y,c=s.rx,v=s.ry,g=(t-u)*(t-u),C=(e-f)*(e-f);return a&&i?sl(g,C,c+l,v+l)<=1:a?sl(g,C,c,v)<=1:i?sl(g,C,c-l,v-l)>=1&&sl(g,C,c+l,v+l)<=1:!1},r.prototype.createPath=function(t){var e=this.attr(),i=e.x,a=e.y,o=e.rx,s=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,f=o>s?s/o:1;t.save(),t.translate(i,a),t.scale(u,f),t.arc(0,0,l,0,Math.PI*2),t.restore(),t.closePath()}},r}(xa),iw=rw;function Uc(n){return n instanceof HTMLElement&&(0,ki.default)(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"}var nw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(t){this._setImage(t.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(t){var e=this,i=this.attrs;if((0,ki.default)(t)){var a=new Image;a.onload=function(){if(e.destroyed)return!1;e.attr("img",a),e.set("loading",!1),e._afterLoading();var o=e.get("callback");o&&o.call(e)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):Uc(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},r.prototype.onAttrChange=function(t,e,i){n.prototype.onAttrChange.call(this,t,e,i),t==="img"&&this._setImage(e)},r.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var e=this.attr(),i=e.x,a=e.y,o=e.width,s=e.height,l=e.sx,u=e.sy,f=e.swidth,c=e.sheight,v=e.img;(v instanceof Image||Uc(v))&&(!(0,In.default)(l)&&!(0,In.default)(u)&&!(0,In.default)(f)&&!(0,In.default)(c)?t.drawImage(v,l,u,f,c,i,a,o,s):t.drawImage(v,i,a,o,s))},r}(xa),aw=nw,ja=d(50131);function so(n,r,t,e,i,a,o){var s=Math.min(n,t),l=Math.max(n,t),u=Math.min(r,e),f=Math.max(r,e),c=i/2;return a>=s-c&&a<=l+c&&o>=u-c&&o<=f+c?ja.default.pointToLine(n,r,t,e,a,o)<=i/2:!1}var ow=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,e,i){n.prototype.onAttrChange.call(this,t,e,i),this.setArrow()},r.prototype.setArrow=function(){var t=this.attr(),e=t.x1,i=t.y1,a=t.x2,o=t.y2,s=t.startArrow,l=t.endArrow;s&&rh(this,t,a,o,e,i),l&&ih(this,t,e,i,a,o)},r.prototype.isInStrokeOrPath=function(t,e,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,f=s.x2,c=s.y2;return so(l,u,f,c,o,t,e)},r.prototype.createPath=function(t){var e=this.attr(),i=e.x1,a=e.y1,o=e.x2,s=e.y2,l=e.startArrow,u=e.endArrow,f={dx:0,dy:0},c={dx:0,dy:0};l&&l.d&&(f=Ao(i,a,o,s,e.startArrow.d)),u&&u.d&&(c=Ao(i,a,o,s,e.endArrow.d)),t.beginPath(),t.moveTo(i+f.dx,a+f.dy),t.lineTo(o-c.dx,s-c.dy)},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),i=this.get("endArrowShape");e&&e.draw(t),i&&i.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,i=t.y1,a=t.x2,o=t.y2;return ja.default.length(e,i,a,o)},r.prototype.getPoint=function(t){var e=this.attr(),i=e.x1,a=e.y1,o=e.x2,s=e.y2;return ja.default.pointAt(i,a,o,s,t)},r}(xa),sw=ow,Zc=d(54401),lw={circle:function(n,r,t){return[["M",n-t,r],["A",t,t,0,1,0,n+t,r],["A",t,t,0,1,0,n-t,r]]},square:function(n,r,t){return[["M",n-t,r-t],["L",n+t,r-t],["L",n+t,r+t],["L",n-t,r+t],["Z"]]},diamond:function(n,r,t){return[["M",n-t,r],["L",n,r-t],["L",n+t,r],["L",n,r+t],["Z"]]},triangle:function(n,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",n-t,r+e],["L",n,r-e],["L",n+t,r+e],["Z"]]},"triangle-down":function(n,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",n-t,r-e],["L",n+t,r-e],["L",n,r+e],["Z"]]}},uw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.initAttrs=function(t){this._resetParamsCache()},r.prototype._resetParamsCache=function(){this.set("paramsCache",{})},r.prototype.onAttrChange=function(t,e,i){n.prototype.onAttrChange.call(this,t,e,i),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._getR=function(t){return(0,h.isNil)(t.r)?t.radius:t.r},r.prototype._getPath=function(){var t=this.attr(),e=t.x,i=t.y,a=t.symbol||"circle",o=this._getR(t),s,l;return(0,rl.default)(a)?(s=a,l=s(e,i,o),l=(0,Zc.Z)(l)):(s=r.Symbols[a],l=s(e,i,o)),s?l:(console.warn(a+" marker is not supported."),null)},r.prototype.createPath=function(t){var e=this._getPath(),i=this.get("paramsCache");Vc(this,t,{path:e},i)},r.Symbols=lw,r}(xa),hw=uw,ll=d(84104),fw=d(36021),cw=d(29423);function Kc(n,r,t){var e=(0,cw.getOffScreenContext)();return n.createPath(e),e.isPointInPath(r,t)}var vw=1e-6;function oh(n){return Math.abs(n)<vw?0:n<0?-1:1}function dw(n,r,t){return(t[0]-n[0])*(r[1]-n[1])==(r[0]-n[0])*(t[1]-n[1])&&Math.min(n[0],r[0])<=t[0]&&t[0]<=Math.max(n[0],r[0])&&Math.min(n[1],r[1])<=t[1]&&t[1]<=Math.max(n[1],r[1])}function $c(n,r,t){var e=!1,i=n.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=n[a],s=n[(a+1)%i];if(dw(o,s,[r,t]))return!0;oh(o[1]-t)>0!=oh(s[1]-t)>0&&oh(r-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(e=!e)}return e}var pw=d(63308);function gs(n,r,t,e,i,a,o,s){var l=(Math.atan2(s-r,o-n)+Math.PI*2)%(Math.PI*2);if(l<e||l>i)return!1;var u={x:n+t*Math.cos(l),y:r+t*Math.sin(l)};return Bc(u.x,u.y,o,s)<=a/2}var sh=d(58198),Qc=d(92541);function gw(n){for(var r=!1,t=n.length,e=0;e<t;e++){var i=n[e],a=i[0];if(a==="C"||a==="A"||a==="Q"){r=!0;break}}return r}function yw(n,r,t,e){for(var i=!1,a=r/2,o=0;o<n.length;o++){var s=n[o],l=s.currentPoint,u=s.params,f=s.prePoint,c=s.box;if(!(c&&!Eo(c.x-a,c.y-a,c.width+r,c.height+r,t,e))){switch(s.command){case"L":case"Z":i=so(f[0],f[1],l[0],l[1],r,t,e);break;case"Q":var v=pw.default.pointDistance(f[0],f[1],u[1],u[2],u[3],u[4],t,e);i=v<=r/2;break;case"C":var g=ll.default.pointDistance(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],t,e);i=g<=r/2;break;case"A":var C=s.arcParams,O=C.cx,F=C.cy,G=C.rx,Y=C.ry,$=C.startAngle,q=C.endAngle,ut=C.xRotation,kt=[t,e,1],Nt=[1,0,0,0,1,0,0,0,1],Wt=G>Y?G:Y,Ft=G>Y?1:G/Y,ee=G>Y?Y/G:1;sh.translate(Nt,Nt,[-O,-F]),sh.rotate(Nt,Nt,-ut),sh.scale(Nt,Nt,[1/Ft,1/ee]),Qc.transformMat3(kt,kt,Nt),i=gs(0,0,Wt,$,q,r,kt[0],kt[1]);break;default:break}if(i)break}}return i}function mw(n){for(var r=n.length,t=[],e=[],i=[],a=0;a<r;a++){var o=n[a],s=o[0];s==="M"?(i.length&&(e.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(t.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&e.push(i),{polygons:t,polylines:e}}var ul=(0,B.__assign)({hasArc:gw,extractPolygons:mw,isPointInStroke:yw},Er.PathUtil);function Jc(n,r,t){for(var e=!1,i=0;i<n.length;i++){var a=n[i];if(e=$c(a,r,t),e)break}return e}var xw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},r.prototype.onAttrChange=function(t,e,i){n.prototype.onAttrChange.call(this,t,e,i),t==="path"&&this._setPathArr(e),this.setArrow()},r.prototype._setPathArr=function(t){this.attrs.path=(0,Zc.Z)(t);var e=ul.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},r.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,fw.default)(this.attr("path")),this.set("segments",t)),t},r.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,i=t.endArrow;if(e){var a=this.getStartTangent();rh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();ih(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},r.prototype.isInStrokeOrPath=function(t,e,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i&&(u=ul.isPointInStroke(s,o,t,e)),!u&&a)if(l)u=Kc(this,t,e);else{var f=this.attr("path"),c=ul.extractPolygons(f);u=Jc(c.polygons,t,e)||Jc(c.polylines,t,e)}return u},r.prototype.createPath=function(t){var e=this.attr(),i=this.get("paramsCache");Vc(this,t,e,i)},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),i=this.get("endArrowShape");e&&e.draw(t),i&&i.draw(t)},r.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,h.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},r.prototype.getPoint=function(t){var e=this.get("tCache");e||(this._calculateCurve(),this._setTcache(),e=this.get("tCache"));var i,a,o=this.get("curve");if(!e||e.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,h.each)(e,function(f,c){t>=f[0]&&t<=f[1]&&(i=(t-f[0])/(f[1]-f[0]),a=c)});var s=o[a];if((0,h.isNil)(s)||(0,h.isNil)(a))return null;var l=s.length,u=o[a+1];return ll.default.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},r.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",ul.pathToCurve(t))},r.prototype._setTcache=function(){var t=0,e=0,i=[],a,o,s,l,u=this.get("curve");if(!!u){if((0,h.each)(u,function(f,c){s=u[c+1],l=f.length,s&&(t+=ll.default.length(f[l-2],f[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,h.each)(u,function(f,c){s=u[c+1],l=f.length,s&&(a=[],a[0]=e/t,o=ll.default.length(f[l-2],f[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),e+=o||0,a[1]=e/t,i.push(a))}),this.set("tCache",i)}},r.prototype.getStartTangent=function(){var t=this.getSegments(),e;if(t.length>1){var i=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;e=[],o?(e.push([i[0]-o[0],i[1]-o[1]]),e.push([i[0],i[1]])):(e.push([a[0],a[1]]),e.push([i[0],i[1]]))}return e},r.prototype.getEndTangent=function(){var t=this.getSegments(),e=t.length,i;if(e>1){var a=t[e-2].currentPoint,o=t[e-1].currentPoint,s=t[e-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},r}(xa),lh=xw;function qc(n,r,t,e,i){var a=n.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=n[o][0],l=n[o][1],u=n[o+1][0],f=n[o+1][1];if(so(s,l,u,f,r,t,e))return!0}if(i){var c=n[0],v=n[a-1];if(so(c[0],c[1],v[0],v[1],r,t,e))return!0}return!1}var bw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.isInStrokeOrPath=function(t,e,i,a,o){var s=this.attr().points,l=!1;return i&&(l=qc(s,o,t,e,!0)),!l&&a&&(l=$c(s,t,e)),l},r.prototype.createPath=function(t){var e=this.attr(),i=e.points;if(!(i.length<2)){t.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},r}(xa),ww=bw,tv=d(590),Sw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,e,i){n.prototype.onAttrChange.call(this,t,e,i),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,i=e.points,a=e.startArrow,o=e.endArrow,s=i.length,l=i[0][0],u=i[0][1],f=i[s-1][0],c=i[s-1][1];a&&rh(this,t,i[1][0],i[1][1],l,u),o&&ih(this,t,i[s-2][0],i[s-2][1],f,c)},r.prototype.isFill=function(){return!1},r.prototype.isInStrokeOrPath=function(t,e,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return qc(s,o,t,e,!1)},r.prototype.isStroke=function(){return!0},r.prototype.createPath=function(t){var e=this.attr(),i=e.points,a=e.startArrow,o=e.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],f=i[s-1][0],c=i[s-1][1];if(a&&a.d){var v=Ao(l,u,i[1][0],i[1][1],a.d);l+=v.dx,u+=v.dy}if(o&&o.d){var v=Ao(i[s-2][0],i[s-2][1],f,c,o.d);f-=v.dx,c-=v.dy}t.beginPath(),t.moveTo(l,u);for(var g=0;g<s-1;g++){var C=i[g];t.lineTo(C[0],C[1])}t.lineTo(f,c)}},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),i=this.get("endArrowShape");e&&e.draw(t),i&&i.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,h.isNil)(e)?(this.set("totalLength",tv.Z.length(t)),this.get("totalLength")):e},r.prototype.getPoint=function(t){var e=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return(0,h.each)(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),ja.default.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],a)},r.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var e=this.getTotalLength();if(!(e<=0)){var i=0,a=[],o,s;(0,h.each)(t,function(l,u){t[u+1]&&(o=[],o[0]=i/e,s=ja.default.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/e,a.push(o))}),this.set("tCache",a)}}},r.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},r.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,i=[];return i.push([t[e-1][0],t[e-1][1]]),i.push([t[e][0],t[e][1]]),i},r}(xa),Cw=Sw;function Mw(n,r,t,e,i,a,o){var s=i/2;return Eo(n-s,r-s,t,i,a,o)||Eo(n+t-s,r-s,i,e,a,o)||Eo(n+s,r+e-s,t,i,a,o)||Eo(n-s,r+s,i,e,a,o)}function Ew(n,r,t,e,i,a,o,s){var l=a/2;return so(n+i,r,n+t-i,r,a,o,s)||so(n+t,r+i,n+t,r+e-i,a,o,s)||so(n+t-i,r+e,n+i,r+e,a,o,s)||so(n,r+e-i,n,r+i,a,o,s)||gs(n+t-i,r+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||gs(n+t-i,r+e-i,i,0,.5*Math.PI,a,o,s)||gs(n+i,r+e-i,i,.5*Math.PI,Math.PI,a,o,s)||gs(n+i,r+i,i,Math.PI,1.5*Math.PI,a,o,s)}var Aw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.isInStrokeOrPath=function(t,e,i,a,o){var s=this.attr(),l=s.x,u=s.y,f=s.width,c=s.height,v=s.radius;if(v){var C=!1;return i&&(C=Ew(l,u,f,c,v,o,t,e)),!C&&a&&(C=Kc(this,t,e)),C}else{var g=o/2;if(a&&i)return Eo(l-g,u-g,f+g,c+g,t,e);if(a)return Eo(l,u,f,c,t,e);if(i)return Mw(l,u,f,c,o,t,e)}},r.prototype.createPath=function(t){var e=this.attr(),i=e.x,a=e.y,o=e.width,s=e.height,l=e.radius;if(t.beginPath(),l===0)t.rect(i,a,o,s);else{var u=Kb(l),f=u[0],c=u[1],v=u[2],g=u[3];t.moveTo(i+f,a),t.lineTo(i+o-c,a),c!==0&&t.arc(i+o-c,a+c,c,-Math.PI/2,0),t.lineTo(i+o,a+s-v),v!==0&&t.arc(i+o-v,a+s-v,v,0,Math.PI/2),t.lineTo(i+g,a+s),g!==0&&t.arc(i+g,a+s-g,g,Math.PI/2,Math.PI),t.lineTo(i,a+f),f!==0&&t.arc(i+f,a+f,f,Math.PI,Math.PI*1.5),t.closePath()}},r}(xa),Tw=Aw,ev=d(79343),_w=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.isOnlyHitBox=function(){return!0},r.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},r.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,ev.assembleFont)(t)},r.prototype._setText=function(t){var e=null;(0,ki.default)(t)&&t.indexOf(`
`)!==-1&&(e=t.split(`
`)),this.set("textArr",e)},r.prototype.onAttrChange=function(t,e,i){n.prototype.onAttrChange.call(this,t,e,i),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(e)},r.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,i=t.fontSize*1;return e?e-i:i*.14},r.prototype._drawTextArr=function(t,e,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,f=this._getSpaceingY(),c=(0,ev.getTextHeight)(a.text,a.fontSize,a.lineHeight),v;(0,zi.default)(e,function(g,C){v=l+C*(f+u)-c+u,o==="middle"&&(v+=c-u-(c-u)/2),o==="top"&&(v+=c-u),i?t.fillText(g,s,v):t.strokeText(g,s,v)})},r.prototype._drawText=function(t,e){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,e);else{var l=i.text;e?t.fillText(l,a,o):t.strokeText(l,a,o)}},r.prototype.strokeAndFill=function(t){var e=this.attrs,i=e.lineWidth,a=e.opacity,o=e.strokeOpacity,s=e.fillOpacity;this.isStroke()&&i>0&&(!(0,In.default)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,In.default)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},r.prototype.fill=function(t){this._drawText(t,!0)},r.prototype.stroke=function(t){this._drawText(t,!1)},r}(xa),Pw=_w,Lw=d(51271),EY=d(39058),Iw=d(34668),rv=d(27202);function kw(n,r){if(r){var t=(0,rv.U_)(r);return(0,rv.rG)(t,n)}return n}function iv(n,r,t){var e=n.getTotalMatrix();if(e){var i=kw([r,t,1],e),a=i[0],o=i[1];return[a,o]}return[r,t]}function nv(n,r,t){if(n.isCanvas&&n.isCanvas())return!0;if(!(0,Iw.isAllowCapture)(n)&&n.cfg.isInView===!1)return!1;if(n.cfg.clipShape){var e=iv(n,r,t),i=e[0],a=e[1];if(n.isClipped(i,a))return!1}var o=n.cfg.cacheCanvasBBox;return o||(o=n.getCanvasBBox()),r>=o.minX&&r<=o.maxX&&t>=o.minY&&t<=o.maxY}function av(n,r,t){if(!nv(n,r,t))return null;for(var e=null,i=n.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())e=av(s,r,t);else if(nv(s,r,t)){var l=s,u=iv(s,r,t),f=u[0],c=u[1];l.isInShape(f,c)&&(e=s)}if(e)break}return e}var Ow=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},r.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},r.prototype.getShapeBase=function(){return m},r.prototype.getGroupBase=function(){return ah},r.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Gb();return t>=1?Math.ceil(t):1},r.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},r.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},r.prototype.setDOMSize=function(t,e){n.prototype.setDOMSize.call(this,t,e);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*e,o>1&&i.scale(o,o)},r.prototype.clear=function(){n.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),e=this.get("el");t.clearRect(0,0,e.width,e.height)},r.prototype.getShape=function(t,e){return this.get("quickHit")?av(this,t,e):n.prototype.getShape.call(this,t,e,null)},r.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),e=this.getViewRange(),i;if(t.length&&t[0]===this)i=e;else if(i=Wc(t),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY);var a=this.get("clipView");a&&(i=Qb(i,e))}return i},r.prototype.refreshElement=function(t){var e=this.get("refreshElements");e.push(t)},r.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,Yb.default)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},r.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},r.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),i=this.getChildren();t.clearRect(0,0,e.width,e.height),Ho(t,this),nh(t,i),this.set("refreshElements",[])},r.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a&&(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),Ho(t,this),nh(t,i,a),t.restore()),(0,zi.default)(e,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},r.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,Nb.default)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",e))},r.prototype.skipDraw=function(){},r}(Er.AbstractCanvas),ov=Ow,Bw=d(40779),Dw=Bw.version,uh={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Ti={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},AY=null;function va(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function sv(n){var r=uh[n.type],t=n.getParent();if(!r)throw new Error("the type "+n.type+" is not supported by svg");var e=va(r);if(n.get("id")&&(e.id=n.get("id")),n.set("el",e),n.set("attrs",{}),t){var i=t.get("el");i||(i=t.createDom(),t.set("el",i)),i.appendChild(e)}return e}function lv(n,r){var t=n.get("el"),e=(0,h.toArray)(t.children).sort(r),i=document.createDocumentFragment();e.forEach(function(a){i.appendChild(a)}),t.appendChild(i)}function Fw(n,r){var t=n.parentNode,e=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=e[r],a=e.indexOf(n);if(i){if(a>r)t.insertBefore(n,i);else if(a<r){var o=e[r+1];o?t.insertBefore(n,o):t.appendChild(n)}}else t.appendChild(n)}function Rw(n,r){var t=n.cfg.el,e=n.attr(),i={dx:e.shadowOffsetX,dy:e.shadowOffsetY,blur:e.shadowBlur,color:e.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)t.removeAttribute("filter");else{var a=r.find("filter",i);a||(a=r.addShadow(i)),t.setAttribute("filter","url(#"+a+")")}}function ys(n){var r=n.attr().matrix;if(r){for(var t=n.cfg.el,e=[],i=0;i<9;i+=3)e.push(r[i]+","+r[i+1]);e=e.join(","),e.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+e+")"):console.warn("invalid matrix:",r)}}function ms(n,r){var t=n.getClip(),e=n.get("el");if(!t)e.removeAttribute("clip-path");else if(t&&!e.hasAttribute("clip-path")){sv(t),t.createPath(r);var i=r.addClip(t);e.setAttribute("clip-path","url(#"+i+")")}}function uv(n,r){r.forEach(function(t){t.draw(n)})}function hv(n,r){var t=n.get("canvas");if(t&&t.get("autoDraw")){var e=t.get("context"),i=n.getParent(),a=i?i.getChildren():[t],o=n.get("el");if(r==="remove"){var s=n.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(r==="show")o.setAttribute("visibility","visible");else if(r==="hide")o.setAttribute("visibility","hidden");else if(r==="zIndex")Fw(o,a.indexOf(n));else if(r==="sort"){var f=n.get("children");f&&f.length&&lv(n,function(c,v){return f.indexOf(c)-f.indexOf(v)?1:0})}else r==="clear"?o&&(o.innerHTML=""):r==="matrix"?ys(n):r==="clip"?ms(n,e):r==="attr"||r==="add"&&n.draw(e)}}var Nw=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.isEntityGroup=function(){return!0},r.prototype.createDom=function(){var t=va("g");this.set("el",t);var e=this.getParent();if(e){var i=e.get("el");i||(i=e.createDom(),e.set("el",i)),i.appendChild(t)}return t},r.prototype.afterAttrsChange=function(t){n.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");if(e&&e.get("autoDraw")){var i=e.get("context");this.createPath(i,t)}},r.prototype.onCanvasChange=function(t){hv(this,t)},r.prototype.getShapeBase=function(){return I},r.prototype.getGroupBase=function(){return r},r.prototype.draw=function(t){var e=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),ms(this,t),this.createPath(t),e.length&&uv(t,e))},r.prototype.createPath=function(t,e){var i=this.attr(),a=this.get("el");(0,h.each)(e||i,function(o,s){Ti[s]&&a.setAttribute(Ti[s],o)}),ys(this)},r}(Er.AbstractGroup),hh=Nw,Yw=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.afterAttrsChange=function(t){n.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");if(e&&e.get("autoDraw")){var i=e.get("context");this.draw(i,t)}},r.prototype.getShapeBase=function(){return I},r.prototype.getGroupBase=function(){return hh},r.prototype.onCanvasChange=function(t){hv(this,t)},r.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var i=(0,jc.b)(this.get("type"));i&&(e=i(this))}if(e){var a=e.x,o=e.y,s=e.width,l=e.height,u=this.getHitLineWidth(),f=u/2,c=a-f,v=o-f,g=a+s+f,C=o+l+f;return{x:c,y:v,minX:c,minY:v,maxX:g,maxY:C,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},r.prototype.isFill=function(){var t=this.attr(),e=t.fill,i=t.fillStyle;return(e||i||this.isClipShape())&&this.canFill},r.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,i=t.strokeStyle;return(e||i)&&this.canStroke},r.prototype.draw=function(t,e){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||sv(this),ms(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},r.prototype.createPath=function(t,e){},r.prototype.strokeAndFill=function(t,e){var i=e||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,f=i.strokeOpacity,c=i.lineWidth,v=this.get("el");this.canFill&&(e?"fill"in i?this._setColor(t,"fill",a):"fillStyle"in i&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),u&&v.setAttribute(Ti.fillOpacity,u)),this.canStroke&&c>0&&(e?"stroke"in i?this._setColor(t,"stroke",s):"strokeStyle"in i&&this._setColor(t,"stroke",l):this._setColor(t,"stroke",s||l),f&&v.setAttribute(Ti.strokeOpacity,f),c&&v.setAttribute(Ti.lineWidth,c))},r.prototype._setColor=function(t,e,i){var a=this.get("el");if(!i){a.setAttribute(Ti[e],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=t.find("gradient",i);o||(o=t.addGradient(i)),a.setAttribute(Ti[e],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=t.find("pattern",i);o||(o=t.addPattern(i)),a.setAttribute(Ti[e],"url(#"+o+")")}else a.setAttribute(Ti[e],i)},r.prototype.shadow=function(t,e){var i=this.attr(),a=e||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&Rw(this,t)},r.prototype.transform=function(t){var e=this.attr(),i=(t||e).matrix;i&&ys(this)},r.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},r.prototype.isPointInPath=function(t,e){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,l=e+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},r.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,i=t.lineAppendWidth;return this.isStroke()?e+i:0},r}(Er.AbstractShape),da=Yw,Gw=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,r:0})},r.prototype.createPath=function(t,e){var i=this.attr(),a=this.get("el");(0,h.each)(e||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Ti[s]&&a.setAttribute(Ti[s],o)})},r}(da),zw=Gw,Xw=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return r.prototype.createPath=function(t,e){var i=this.attr(),a=this.get("el");(0,h.each)(e||i,function(o,s){Ti[s]&&a.setAttribute(Ti[s],o)}),a.innerHTML=i.html},r}(da),Vw=Xw,Hw=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,rx:0,ry:0})},r.prototype.createPath=function(t,e){var i=this.attr(),a=this.get("el");(0,h.each)(e||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Ti[s]&&a.setAttribute(Ti[s],o)})},r}(da),Ww=Hw,jw=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,width:0,height:0})},r.prototype.createPath=function(t,e){var i=this,a=this.attr(),o=this.get("el");(0,h.each)(e||a,function(s,l){l==="img"?i._setImage(a.img):Ti[l]&&o.setAttribute(Ti[l],s)})},r.prototype.setAttr=function(t,e){this.attrs[t]=e,t==="img"&&this._setImage(e)},r.prototype._setImage=function(t){var e=this.attr(),i=this.get("el");if((0,h.isString)(t))i.setAttribute("href",t);else if(t instanceof window.Image)e.width||(i.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(i.setAttribute("height",t.height),this.attr("height",t.height)),i.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,h.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),e.width||(i.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(i.setAttribute("height",""+t.height),this.attr("height",t.height)),i.setAttribute("href",a.toDataURL())}},r}(da),Uw=jw,Zw=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.createPath=function(t,e){var i=this.attr(),a=this.get("el");(0,h.each)(e||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=(0,h.isObject)(o)?t.addArrow(i,Ti[s]):t.getDefaultArrow(i,Ti[s]);a.setAttribute(Ti[s],"url(#"+l+")")}else a.removeAttribute(Ti[s]);else Ti[s]&&a.setAttribute(Ti[s],o)})},r.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,i=t.y1,a=t.x2,o=t.y2;return ja.default.length(e,i,a,o)},r.prototype.getPoint=function(t){var e=this.attr(),i=e.x1,a=e.y1,o=e.x2,s=e.y2;return ja.default.pointAt(i,a,o,s,t)},r}(da),Kw=Zw,hl={circle:function(n,r,t){return[["M",n,r],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(n,r,t){return[["M",n-t,r-t],["L",n+t,r-t],["L",n+t,r+t],["L",n-t,r+t],["Z"]]},diamond:function(n,r,t){return[["M",n-t,r],["L",n,r-t],["L",n+t,r],["L",n,r+t],["Z"]]},triangle:function(n,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",n-t,r+e],["L",n,r-e],["L",n+t,r+e],["z"]]},triangleDown:function(n,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",n-t,r-e],["L",n+t,r-e],["L",n,r+e],["Z"]]}},fv={get:function(n){return hl[n]},register:function(n,r){hl[n]=r},remove:function(n){delete hl[n]},getAll:function(){return hl}},$w=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return r.prototype.createPath=function(t){var e=this.get("el");e.setAttribute("d",this._assembleMarker())},r.prototype._assembleMarker=function(){var t=this._getPath();return(0,h.isArray)(t)?t.map(function(e){return e.join(" ")}).join(""):t},r.prototype._getPath=function(){var t=this.attr(),e=t.x,i=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,h.isFunction)(o)?s=o:s=fv.get(o),s?s(e,i,a):(console.warn(s+" symbol is not exist."),null)},r.symbolsFactory=fv,r}(da),Qw=$w,Jw=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.createPath=function(t,e){var i=this,a=this.attr(),o=this.get("el");(0,h.each)(e||a,function(s,l){if(l==="path"&&(0,h.isArray)(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=(0,h.isObject)(s)?t.addArrow(a,Ti[l]):t.getDefaultArrow(a,Ti[l]);o.setAttribute(Ti[l],"url(#"+u+")")}else o.removeAttribute(Ti[l]);else Ti[l]&&o.setAttribute(Ti[l],s)})},r.prototype._formatPath=function(t){var e=t.map(function(i){return i.join(" ")}).join("");return~e.indexOf("NaN")?"":e},r.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},r.prototype.getPoint=function(t){var e=this.get("el"),i=this.getTotalLength(),a=e?e.getPointAtLength(t*i):null;return a?{x:a.x,y:a.y}:null},r}(da),qw=Jw,tS=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return r.prototype.createPath=function(t,e){var i=this.attr(),a=this.get("el");(0,h.each)(e||i,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Ti[s]&&a.setAttribute(Ti[s],o)})},r}(da),eS=tS,rS=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.onAttrChange=function(t,e,i){n.prototype.onAttrChange.call(this,t,e,i),["points"].indexOf(t)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.createPath=function(t,e){var i=this.attr(),a=this.get("el");(0,h.each)(e||i,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Ti[s]&&a.setAttribute(Ti[s],o)})},r.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,h.isNil)(e)?(this.set("totalLength",tv.Z.length(t)),this.get("totalLength")):e},r.prototype.getPoint=function(t){var e=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return(0,h.each)(i,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),ja.default.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],a)},r.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var e=this.getTotalLength();if(!(e<=0)){var i=0,a=[],o,s;(0,h.each)(t,function(l,u){t[u+1]&&(o=[],o[0]=i/e,s=ja.default.length(l[0],l[1],t[u+1][0],t[u+1][1]),i+=s,o[1]=i/e,a.push(o))}),this.set("tCache",a)}}},r.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},r.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,i=[];return i.push([t[e-1][0],t[e-1][1]]),i.push([t[e][0],t[e][1]]),i},r}(da),iS=rS,nS=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,aS=/[^\s\,]+/gi;function oS(n){var r=0,t=0,e=0,i=0;return(0,h.isArray)(n)?n.length===1?r=t=e=i=n[0]:n.length===2?(r=e=n[0],t=i=n[1]):n.length===3?(r=n[0],t=i=n[1],e=n[2]):(r=n[0],t=n[1],e=n[2],i=n[3]):r=t=e=i=n,{r1:r,r2:t,r3:e,r4:i}}function TY(n){if(n=n||[],isArray(n))return n;if(isString(n))return n=n.match(nS),each(n,function(r,t){if(r=r.match(aS),r[0].length>1){var e=r[0].charAt(0);r.splice(1,0,r[0].substr(1)),r[0]=e}each(r,function(i,a){isNaN(i)||(r[a]=+i)}),n[t]=r}),n}var sS=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.createPath=function(t,e){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];(0,h.each)(e||a,function(u,f){l.indexOf(f)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(f)===-1&&Ti[f]&&o.setAttribute(Ti[f],u)})},r.prototype._assembleRect=function(t){var e=t.x,i=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+e+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=oS(s);(0,h.isArray)(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(e+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},r}(da),lS=sS,uS=d(2035),cv=.3,hS={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},fS={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},cS={left:"left",start:"left",center:"middle",right:"end",end:"end"},vS=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=n.prototype.getDefaultAttrs.call(this);return(0,B.__assign)((0,B.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.createPath=function(t,e){var i=this,a=this.attr(),o=this.get("el");this._setFont(),(0,h.each)(e||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?ys(i):Ti[l]&&o.setAttribute(Ti[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},r.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),i=e.textBaseline,a=e.textAlign,o=(0,uS.detect)();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",fS[i]||"alphabetic"):t.setAttribute("alignment-baseline",hS[i]||"baseline"),t.setAttribute("text-anchor",cS[a]||"left")},r.prototype._setText=function(t){var e=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!t)e.innerHTML="";else if(~t.indexOf(`
`)){var l=t.split(`
`),u=l.length-1,f="";(0,h.each)(l,function(c,v){v===0?s==="alphabetic"?f+='<tspan x="'+a+'" dy="'+-u+'em">'+c+"</tspan>":s==="top"?f+='<tspan x="'+a+'" dy="0.9em">'+c+"</tspan>":s==="middle"?f+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+c+"</tspan>":s==="bottom"?f+='<tspan x="'+a+'" dy="-'+(u+cv)+'em">'+c+"</tspan>":s==="hanging"&&(f+='<tspan x="'+a+'" dy="'+(-(u-1)-cv)+'em">'+c+"</tspan>"):f+='<tspan x="'+a+'" dy="1em">'+c+"</tspan>"}),e.innerHTML=f}else e.innerHTML=t},r}(da),dS=vS,pS=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,gS=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,yS=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function vv(n){var r=n.match(yS);if(!r)return"";var t="";return r.sort(function(e,i){return e=e.split(":"),i=i.split(":"),Number(e[0])-Number(i[0])}),(0,h.each)(r,function(e){e=e.split(":"),t+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'}),t}function mS(n,r){var t=pS.exec(n),e=(0,h.mod)((0,h.toRadian)(parseFloat(t[1])),Math.PI*2),i=t[2],a,o;e>=0&&e<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=e&&e<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=e&&e<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(e),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,f=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;r.setAttribute("x1",a.x),r.setAttribute("y1",a.y),r.setAttribute("x2",u),r.setAttribute("y2",f),r.innerHTML=vv(i)}function xS(n,r){var t=gS.exec(n),e=parseFloat(t[1]),i=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];r.setAttribute("cx",e),r.setAttribute("cy",i),r.setAttribute("r",a),r.innerHTML=vv(o)}var bS=function(){function n(r){this.cfg={};var t=null,e=(0,h.uniqueId)("gradient_");return r.toLowerCase()[0]==="l"?(t=va("linearGradient"),mS(r,t)):(t=va("radialGradient"),xS(r,t)),t.setAttribute("id",e),this.el=t,this.id=e,this.cfg=r,this}return n.prototype.match=function(r,t){return this.cfg===t},n}(),wS=bS,SS={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},CS={x:"-40%",y:"-40%",width:"200%",height:"200%"},MS=function(){function n(r){this.type="filter",this.cfg={},this.type="filter";var t=va("filter");return(0,h.each)(CS,function(e,i){t.setAttribute(i,e)}),this.el=t,this.id=(0,h.uniqueId)("filter_"),this.el.id=this.id,this.cfg=r,this._parseShadow(r,t),this}return n.prototype.match=function(r,t){if(this.type!==r)return!1;var e=!0,i=this.cfg;return(0,h.each)(Object.keys(i),function(a){if(i[a]!==t[a])return e=!1,!1}),e},n.prototype.update=function(r,t){var e=this.cfg;return e[SS[r]]=t,this._parseShadow(e,this.el),this},n.prototype._parseShadow=function(r,t){var e=`<feDropShadow
      dx="`+(r.dx||0)+`"
      dy="`+(r.dy||0)+`"
      stdDeviation="`+(r.blur?r.blur/10:0)+`"
      flood-color="`+(r.color?r.color:"#000")+`"
      flood-opacity="`+(r.opacity?r.opacity:1)+`"
      />`;t.innerHTML=e},n}(),ES=MS,AS=function(){function n(r,t){this.cfg={};var e=va("marker"),i=(0,h.uniqueId)("marker_");e.setAttribute("id",i);var a=va("path");a.setAttribute("stroke",r.stroke||"none"),a.setAttribute("fill",r.fill||"none"),e.appendChild(a),e.setAttribute("overflow","visible"),e.setAttribute("orient","auto-start-reverse"),this.el=e,this.child=a,this.id=i;var o=r[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=r.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(r.lineWidth,a)),this}return n.prototype.match=function(){return!1},n.prototype._setDefaultPath=function(r,t){var e=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),e.setAttribute("refX",""+10*Math.cos(Math.PI/6)),e.setAttribute("refY",""+5)},n.prototype._setMarker=function(r,t){var e=this.el,i=this.cfg.path,a=this.cfg.d;(0,h.isArray)(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",i),e.appendChild(t),a&&e.setAttribute("refX",""+a/r)},n.prototype.update=function(r){var t=this.child;t.attr?t.attr("fill",r):t.setAttribute("fill",r)},n}(),dv=AS,TS=function(){function n(r){this.type="clip",this.cfg={};var t=va("clipPath");this.el=t,this.id=(0,h.uniqueId)("clip_"),t.id=this.id;var e=r.cfg.el;return t.appendChild(e),this.cfg=r,this}return n.prototype.match=function(){return!1},n.prototype.remove=function(){var r=this.el;r.parentNode.removeChild(r)},n}(),_S=TS,PS=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,LS=function(){function n(r){this.cfg={};var t=va("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var e=va("image");t.appendChild(e);var i=(0,h.uniqueId)("pattern_");t.id=i,this.el=t,this.id=i,this.cfg=r;var a=PS.exec(r),o=a[2];e.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return n.prototype.match=function(r,t){return this.cfg===t},n}(),IS=LS,kS=function(){function n(r){var t=va("defs"),e=(0,h.uniqueId)("defs_");t.id=e,r.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=r}return n.prototype.find=function(r,t){for(var e=this.children,i=null,a=0;a<e.length;a++)if(e[a].match(r,t)){i=e[a].id;break}return i},n.prototype.findById=function(r){for(var t=this.children,e=null,i=0;i<t.length;i++)if(t[i].id===r){e=t[i];break}return e},n.prototype.add=function(r){this.children.push(r),r.canvas=this.canvas,r.parent=this},n.prototype.getDefaultArrow=function(r,t){var e=r.stroke||r.strokeStyle;if(this.defaultArrow[e])return this.defaultArrow[e].id;var i=new dv(r,t);return this.defaultArrow[e]=i,this.el.appendChild(i.el),this.add(i),i.id},n.prototype.addGradient=function(r){var t=new wS(r);return this.el.appendChild(t.el),this.add(t),t.id},n.prototype.addArrow=function(r,t){var e=new dv(r,t);return this.el.appendChild(e.el),this.add(e),e.id},n.prototype.addShadow=function(r){var t=new ES(r);return this.el.appendChild(t.el),this.add(t),t.id},n.prototype.addPattern=function(r){var t=new IS(r);return this.el.appendChild(t.el),this.add(t),t.id},n.prototype.addClip=function(r){var t=new _S(r);return this.el.appendChild(t.el),this.add(t),t.id},n}(),OS=kS,BS=function(n){(0,B.__extends)(r,n);function r(t){return n.call(this,(0,B.__assign)((0,B.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return r.prototype.getShapeBase=function(){return I},r.prototype.getGroupBase=function(){return hh},r.prototype.getShape=function(t,e,i){var a=i.target||i.srcElement;if(!uh[a.tagName]){for(var o=a.parentNode;o&&!uh[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},r.prototype.createDom=function(){var t=va("svg"),e=new OS(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},r.prototype.onCanvasChange=function(t){var e=this.get("context"),i=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&lv(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(t==="clear"){if(i){i.innerHTML="";var o=e.el;o.innerHTML="",i.appendChild(o)}}else t==="matrix"?ys(this):t==="clip"?ms(this,e):t==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},r.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();ms(this,t),e.length&&uv(t,e)},r}(Er.AbstractCanvas),pv=BS,DS=d(63826),FS=DS.version;function fh(n){return n?!1:n==null||isNaN(n)}function gv(n){if((0,h.isArray)(n))return fh(n[1].y);var r=n.y;return(0,h.isArray)(r)?fh(r[0]):fh(r)}function ch(n,r,t){if(r===void 0&&(r=!1),t===void 0&&(t=!0),!n.length||n.length===1&&!t)return[];if(r){for(var e=[],i=0,a=n.length;i<a;i++){var o=n[i];gv(o)||e.push(o)}return[e]}for(var s=[],l=[],i=0,a=n.length;i<a;i++){var o=n[i];gv(o)?l.length&&(l.length===1&&!t||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function En(n,r,t,e){e===void 0&&(e="");var i=n.style,a=i===void 0?{}:i,o=n.defaultStyle,s=n.color,l=n.size,u=(0,B.__assign)((0,B.__assign)({},o),a);return s&&(r&&(a.stroke||(u.stroke=s)),t&&(a.fill||(u.fill=s))),e&&(0,h.isNil)(a[e])&&!(0,h.isNil)(l)&&(u[e]=l),u}function vh(n){var r=n.x,t=(0,h.isArray)(n.y)?n.y:[n.y];return t.map(function(e,i){return{x:(0,h.isArray)(r)?r[i]:r,y:e}})}var RS={line:function(n,r,t){return[["M",n-t,r],["L",n+t,r]]},dot:function(n,r,t){return[["M",n-t,r],["L",n+t,r]]},dash:function(n,r,t){return[["M",n-t,r],["L",n+t,r]]},smooth:function(n,r,t){return[["M",n-t,r],["A",t/2,t/2,0,1,1,n,r],["A",t/2,t/2,0,1,0,n+t,r]]},hv:function(n,r,t){return[["M",n-t-1,r-2.5],["L",n,r-2.5],["L",n,r+2.5],["L",n+t+1,r+2.5]]},vh:function(n,r,t){return[["M",n-t-1,r+2.5],["L",n,r+2.5],["L",n,r-2.5],["L",n+t+1,r-2.5]]},hvh:function(n,r,t){return[["M",n-(t+1),r+2.5],["L",n-t/2,r+2.5],["L",n-t/2,r-2.5],["L",n+t/2,r-2.5],["L",n+t/2,r+2.5],["L",n+t+1,r+2.5]]},vhv:function(n,r){return[["M",n-5,r+2.5],["L",n-5,r],["L",n,r],["L",n,r-3],["L",n,r+3],["L",n+6.5,r+3]]}};function yv(n,r){var t=n.color;return{symbol:RS[r],style:{lineWidth:2,r:6,stroke:t}}}function NS(n,r,t){for(var e=n.isStack,i=n.connectNulls,a=n.isInCircle,o=n.showSinglePoint,s=En(n,!0,!1,"lineWidth"),l=ch(n.points,i,o),u=[],f=0,c=l.length;f<c;f++){var v=l[f];u=u.concat(GS(v,a,e,r,t,s))}return s.path=u,s}function dh(n,r,t,e,i){if(n.length===1)return[["M",n[0].x,n[0].y-i.lineWidth/2],["L",n[0].x,n[0].y],["L",n[0].x,n[0].y+i.lineWidth/2]];var a;return t?(r&&n.length&&n.push({x:n[0].x,y:n[0].y}),a=kr(n,!1,e)):(a=He(n,!1),r&&a.push(["Z"])),a}function YS(n,r,t,e,i,a){var o=[],s=[];(0,h.each)(n,function(f){var c=vh(f);o.push(c[1]),s.push(c[0])});var l=dh(o,r,e,i,a),u=dh(s,r,e,i,a);return t?l:l.concat(u)}function GS(n,r,t,e,i,a){if(n.length){var o=n[0];return(0,h.isArray)(o.y)?YS(n,r,t,e,i,a):dh(n,r,e,i,a)}return[]}var _Y=oo("line",{defaultShapeType:"line"});(0,h.each)(["line","dot","dash","smooth"],function(n){Ai("line",n,{draw:function(r,t){var e=n==="smooth",i;if(e){var a=this.coordinate,o=a.start,s=a.end;i=[[o.x,s.y],[s.x,o.y]]}var l=NS(r,e,i),u=t.addShape({type:"path",attrs:l,name:"line"});return u},getMarker:function(r){return yv(r,n)}})});var PY=null,zS=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;e.type="path",e.shapeType="line";var i=t.connectNulls,a=i===void 0?!1:i,o=t.showSinglePoint,s=o===void 0?!0:o;return e.connectNulls=a,e.showSinglePoint=s,e}return r.prototype.createElements=function(t,e,i){i===void 0&&(i=!1);var a=this,o=a.lastElementsMap,s=a.elementsMap,l=a.elements,u=a.container,f=this.getElementId(t),c=this.getShapeInfo(t),v=o[f];if(v){var C=v.getModel();(this.isCoordinateChanged||kc(C,c))&&(v.animate=this.animateOption,v.update(c)),delete o[f]}else{var g=this.getShapeFactory();v=new Tc({shapeFactory:g,container:u,offscreenGroup:this.getOffscreenGroup()}),v.geometry=this,v.animate=this.animateOption,v.draw(c,i)}return l.push(v),s[f]=v,l},r.prototype.getPointsAndData=function(t){for(var e=[],i=[],a=0,o=t.length;a<o;a++){var s=t[a];e.push({x:s.x,y:s.y}),i.push(s[jt])}return{points:e,data:i}},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),i=this.getPointsAndData(t),a=i.points,o=i.data;return e.mappingData=t,e.data=o,e.isStack=!!this.getAdjust("stack"),e.points=a,e.connectNulls=this.connectNulls,e.showSinglePoint=this.showSinglePoint,e},r}(Wa),ph=zS;function XS(n,r,t,e,i){var a=[];if(n.length){for(var o=[],s=[],l=0,u=n.length;l<u;l++){var f=n[l];o.push(f[1]),s.push(f[0])}s=s.reverse(),(0,h.each)([o,s],function(c,v){var g=[],C=e.parsePoints(c),O=C[0];o.length===1&&s.length===1?g=v===0?[["M",O.x-.5,O.y],["L",O.x+.5,O.y]]:[["L",O.x+.5,O.y],["L",O.x-.5,O.y]]:(r&&C.push({x:O.x,y:O.y}),t?g=kr(C,!1,i):g=He(C,!1),v>0&&(g[0][0]="L")),a=a.concat(g)}),a.push(["Z"])}return a}function fl(n,r,t,e,i){for(var a=En(n,r,!r,"lineWidth"),o=n.connectNulls,s=n.isInCircle,l=n.points,u=n.showSinglePoint,f=ch(l,o,u),c=[],v=0,g=f.length;v<g;v++){var C=f[v];c=c.concat(XS(C,s,t,e,i))}return a.path=c,a}function mv(n){var r=n.start,t=n.end;return[[r.x,t.y],[t.x,r.y]]}var LY=oo("area",{defaultShapeType:"area",getDefaultPoints:function(n){var r=n.x,t=n.y0,e=(0,h.isArray)(n.y)?n.y:[t,n.y];return e.map(function(i){return{x:r,y:i}})}});Ai("area","area",{draw:function(n,r){var t=fl(n,!1,!1,this),e=r.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){return i===void 0&&(i=5.5),[["M",t-i,e-4],["L",t+i,e-4],["L",t+i,e+4],["L",t-i,e+4],["Z"]]},style:{r:5,fill:r}}}});var IY=null,VS=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;e.type="area",e.shapeType="area",e.generatePoints=!0,e.startOnZero=!0;var i=t.startOnZero,a=i===void 0?!0:i,o=t.sortable,s=o===void 0?!0:o,l=t.showSinglePoint,u=l===void 0?!1:l;return e.startOnZero=a,e.sortable=s,e.showSinglePoint=u,e}return r.prototype.getPointsAndData=function(t){for(var e=[],i=[],a=0,o=t.length;a<o;a++){var s=t[a];e.push(s.points),i.push(s[jt])}return{points:e,data:i}},r.prototype.getYMinValue=function(){if(this.startOnZero)return n.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},r}(ph),HS=VS,kY=oo("edge",{defaultShapeType:"line",getDefaultPoints:function(n){return vh(n)}});Ai("edge","line",{draw:function(n,r){var t=En(n,!0,!1,"lineWidth"),e=He(this.parsePoints(n.points),this.coordinate.isPolar);return r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});var OY=null,WS=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return r}(Wa),jS=WS,US=d(87892),ZS=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return r.prototype.createElements=function(t,e,i){i===void 0&&(i=!1);var a=this.prepareRange(t),o=this.prepareSize(),s=(0,h.get)(this.styleOption,["style","shadowBlur"]);return(0,h.isNumber)(s)||(s=o/2),this.prepareGreyScaleBlurredCircle(o,s),this.drawWithRange(t,a,o,s),null},r.prototype.clear=function(){n.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},r.prototype.prepareRange=function(t){var e=this.getAttribute("color"),i=e.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(s){var l=s[jt][i];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},r.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,h.isNumber)(t)||(t=this.getDefaultSize()),t},r.prototype.prepareGreyScaleBlurredCircle=function(t,e){var i=this.getGrayScaleBlurredCanvas(),a=t+e,o=i.getContext("2d");i.width=i.height=a*2,o.clearRect(0,0,i.width,i.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=e,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,t,0,Math.PI*2,!0),o.closePath(),o.fill()},r.prototype.drawWithRange=function(t,e,i,a){var o=this.coordinate,s=o.start,l=o.end,u=this.coordinate.getWidth(),f=this.coordinate.getHeight(),c=this.getAttribute("color"),v=c.getFields()[0];this.clearShadowCanvasCtx();var g=this.getShadowCanvasCtx();e&&(t=t.filter(function(Wt){return Wt[jt][v]<=e[1]&&Wt[jt][v]>=e[0]}));for(var C=this.scales[v],O=0,F=t;O<F.length;O++){var G=F[O],Y=this.getDrawCfg(G),$=Y.x,q=Y.y,ut=C.scale(G[jt][v]);this.drawGrayScaleBlurredCircle($-s.x,q-l.y,i+a,ut,g)}var kt=g.getImageData(0,0,u,f);this.clearShadowCanvasCtx(),this.colorize(kt),g.putImageData(kt,0,0);var Nt=this.getImageShape();Nt.attr("x",s.x),Nt.attr("y",l.y),Nt.attr("width",u),Nt.attr("height",f),Nt.attr("img",g.canvas),Nt.set("origin",this.getShapeInfo(t))},r.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4))},r.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},r.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},r.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},r.prototype.drawGrayScaleBlurredCircle=function(t,e,i,a,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(s,t-i,e-i)},r.prototype.colorize=function(t){for(var e=this.getAttribute("color"),i=t.data,a=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if((0,h.isNumber)(s)){var l=a[s]?a[s]:US.default.rgb2arr(e.gradient(s/256));i[o-3]=l[0],i[o-2]=l[1],i[o-1]=l[2],i[o]=s}}},r.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;return t=e.addShape({type:"image",attrs:{}}),this.imageShape=t,t},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return(0,B.__assign)((0,B.__assign)({},e),{mappingData:t,data:this.getData(t)})},r.prototype.getData=function(t){return t.map(function(e){return e[jt]})},r}(Wa),KS=ZS;function gh(n,r){r===void 0&&(r=!1);var t=n.x,e=n.y,i=n.y0,a=n.size,o,s;(0,h.isArray)(e)?(o=e[0],s=e[1]):(o=i,s=e);var l,u;(0,h.isArray)(t)?(l=t[0],u=t[1]):(l=t-a/2,u=t+a/2);var f=[{x:l,y:o},{x:l,y:s}];return r?f.push({x:u,y:(s+o)/2}):f.push({x:u,y:s},{x:u,y:o}),f}function yh(n,r){r===void 0&&(r=!0);var t=[],e=n[0];t.push(["M",e.x,e.y]);for(var i=1,a=n.length;i<a;i++)t.push(["L",n[i].x,n[i].y]);return r&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}function xv(n,r,t){var e=[];return(0,h.isNil)(r)?t?e.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",n[2].x,n[2].y],["L",n[2].x,n[2].y],["Z"]):e.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",n[2].x,n[2].y],["L",n[3].x,n[3].y],["Z"]):e.push(["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",r[1].x,r[1].y],["L",r[0].x,r[0].y],["Z"]),e}var BY=oo("interval",{defaultShapeType:"rect",getDefaultPoints:function(n){return gh(n)}});Ai("interval","rect",{draw:function(n,r){var t=En(n,!1,!0),e=this.parsePath(yh(n.points)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e}),name:"interval"});return i},getMarker:function(n){var r=n.color,t=n.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:r}}:{symbol:"square",style:{r:4,fill:r}}}});var DY=null;function $S(n,r){var t=n.length,e=n;(0,h.isString)(e[0])&&(e=n.map(function(s){return r.translate(s)}));for(var i=e[1]-e[0],a=2;a<t;a++){var o=e[a]-e[a-1];i>o&&(i=o)}return i}function QS(n,r){if(r){var t=(0,h.flatten)(n),e=(0,h.valuesOfKey)(t,r);return e.length}return n.length}function bv(n){var r=n.theme,t=n.coordinate,e=n.getXScale(),i=e.values,a=n.beforeMappingData,o=i.length;if(e.isLinear&&i.length>1){i.sort();var s=$S(i,e);o=(e.max-e.min)/s,i.length>o&&(o=i.length)}var l=e.range,u=1/o,f=1;if(t.isPolar?t.isTransposed&&o>1?f=r.multiplePieWidthRatio:f=r.roseWidthRatio:(e.isLinear&&(u*=l[1]-l[0]),f=r.columnWidthRatio),u*=f,n.getAdjust("dodge")){var c=n.getAdjust("dodge"),v=c.dodgeBy,g=QS(a,v);u=u/g}var C=r.maxColumnWidth,O=r.minColumnWidth,F=it(n.coordinate);if(C){var G=C/F;u>G&&(u=G)}if(O){var Y=O/F;u<Y&&(u=Y)}return u}var JS=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t.shapeType="interval",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=n.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=it(o);i=i/s}else this.defaultSize||(this.defaultSize=bv(this)),i=this.defaultSize;return e.size=i,e},r.prototype.adjustScale=function(){n.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,t.values),t.max)});else{var e=this.scaleDefs,i=t.field,a=t.min,o=t.max,s=t.type;s!=="time"&&(a>0&&!(0,h.get)(e,[i,"min"])&&t.change({min:0}),o<=0&&!(0,h.get)(e,[i,"max"])&&t.change({max:0}))}},r}(Wa),qS=JS,tC=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;e.type="line";var i=t.sortable,a=i===void 0?!0:i;return e.sortable=a,e}return r}(ph),eC=tC,To={hexagon:function(n,r,t){var e=t/2*Math.sqrt(3);return[["M",n,r-t],["L",n+e,r-t/2],["L",n+e,r+t/2],["L",n,r+t],["L",n-e,r+t/2],["L",n-e,r-t/2],["Z"]]},bowtie:function(n,r,t){var e=t-1.5;return[["M",n-t,r-e],["L",n+t,r+e],["L",n+t,r-e],["L",n-t,r+e],["Z"]]},cross:function(n,r,t){return[["M",n-t,r-t],["L",n+t,r+t],["M",n+t,r-t],["L",n-t,r+t]]},tick:function(n,r,t){return[["M",n-t/2,r-t],["L",n+t/2,r-t],["M",n,r-t],["L",n,r+t],["M",n-t/2,r+t],["L",n+t/2,r+t]]},plus:function(n,r,t){return[["M",n-t,r],["L",n+t,r],["M",n,r-t],["L",n,r+t]]},hyphen:function(n,r,t){return[["M",n-t,r],["L",n+t,r]]},line:function(n,r,t){return[["M",n,r-t],["L",n,r+t]]}},wv=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],rC=["cross","tick","plus","hyphen","line"];function mh(n,r,t,e,i){var a=En(r,i,!i,"r"),o=n.parsePoints(r.points),s=o[0];if(r.isStack)s=o[1];else if(o.length>1){for(var l=t.addGroup(),u=0,f=o;u<f.length;u++){var c=f[u];l.addShape({type:"marker",attrs:(0,B.__assign)((0,B.__assign)((0,B.__assign)({},a),{symbol:To[e]||e}),c)})}return l}return t.addShape({type:"marker",attrs:(0,B.__assign)((0,B.__assign)((0,B.__assign)({},a),{symbol:To[e]||e}),s)})}var FY=oo("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(n){return vh(n)}});(0,h.each)(wv,function(n){Ai("point","hollow-"+n,{draw:function(r,t){return mh(this,r,t,n,!0)},getMarker:function(r){var t=r.color;return{symbol:To[n]||n,style:{r:4.5,stroke:t,fill:null}}}})});var RY=null,iC=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return r.prototype.getDrawCfg=function(t){var e=n.prototype.getDrawCfg.call(this,t);return(0,B.__assign)((0,B.__assign)({},e),{isStack:!!this.getAdjust("stack")})},r}(Wa),nC=iC;function aC(n){for(var r=n[0],t=1,e=[["M",r.x,r.y]];t<n.length;){var i=n[t];(i.x!==n[t-1].x||i.y!==n[t-1].y)&&(e.push(["L",i.x,i.y]),i.x===r.x&&i.y===r.y&&t<n.length-1&&(r=n[t+1],e.push(["Z"]),e.push(["M",r.x,r.y]),t++)),t++}return(0,h.isEqual)((0,h.last)(e),r)||e.push(["L",r.x,r.y]),e.push(["Z"]),e}var NY=oo("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(n){var r=[];return(0,h.each)(n.x,function(t,e){var i=n.y[e];r.push({x:t,y:i})}),r}});Ai("polygon","polygon",{draw:function(n,r){if(!(0,h.isEmpty)(n.points)){var t=En(n,!0,!0),e=this.parsePath(aC(n.points));return r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e}),name:"polygon"})}},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});var YY=null,oC=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=n.prototype.createShapePointsCfg.call(this,t),i=e.x,a=e.y,o;if(!((0,h.isArray)(i)&&(0,h.isArray)(a))){var s=this.getXScale(),l=this.getYScale(),u=s.values.length,f=l.values.length,c=.5*1/u,v=.5*1/f;s.isCategory&&l.isCategory?(i=[i-c,i-c,i+c,i+c],a=[a-v,a+v,a+v,a-v]):(0,h.isArray)(i)?(o=i,i=[o[0],o[0],o[1],o[1]],a=[a-v/2,a+v/2,a+v/2,a-v/2]):(0,h.isArray)(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],i=[i-c/2,i-c/2,i+c/2,i+c/2]),e.x=i,e.y=a}return e},r}(Wa),sC=oC,GY=oo("schema",{defaultShapeType:""}),zY=null,lC=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=n.prototype.createShapePointsCfg.call(this,t),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=it(o);i=i/s}else this.defaultSize||(this.defaultSize=bv(this)),i=this.defaultSize;return e.size=i,e},r}(Wa),uC=lC;Ai("area","line",{draw:function(n,r){var t=fl(n,!0,!1,this),e=r.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){return i===void 0&&(i=5.5),[["M",t-i,e-4],["L",t+i,e-4],["L",t+i,e+4],["L",t-i,e+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}}),Ai("area","smooth",{draw:function(n,r){var t=this.coordinate,e=fl(n,!1,!0,this,mv(t)),i=r.addShape({type:"path",attrs:e,name:"area"});return i},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){return i===void 0&&(i=5.5),[["M",t-i,e-4],["L",t+i,e-4],["L",t+i,e+4],["L",t-i,e+4],["Z"]]},style:{r:5,fill:r}}}}),Ai("area","smooth-line",{draw:function(n,r){var t=this.coordinate,e=fl(n,!0,!0,this,mv(t)),i=r.addShape({type:"path",attrs:e,name:"area"});return i},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){return i===void 0&&(i=5.5),[["M",t-i,e-4],["L",t+i,e-4],["L",t+i,e+4],["L",t-i,e+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}});function xh(n,r){var t=[];t.push({x:n.x,y:n.y*1/2+r.y*1/2}),t.push({x:r.x,y:n.y*1/2+r.y*1/2}),t.push(r);var e=["C"];return(0,h.each)(t,function(i){e.push(i.x,i.y)}),e}function bh(n,r){var t=[];t.push({x:r.x,y:r.y}),t.push(n);var e=["Q"];return(0,h.each)(t,function(i){e.push(i.x,i.y)}),e}function hC(n,r,t){var e=bh(r,t),i=[["M",n.x,n.y]];return i.push(e),i}function fC(n,r){var t=bh(n[1],r),e=bh(n[3],r),i=[["M",n[0].x,n[0].y]];return i.push(e),i.push(["L",n[3].x,n[3].y]),i.push(["L",n[2].x,n[2].y]),i.push(t),i.push(["L",n[1].x,n[1].y]),i.push(["L",n[0].x,n[0].y]),i.push(["Z"]),i}Ai("edge","arc",{draw:function(n,r){var t=En(n,!0,!1,"lineWidth"),e=n.points,i=e.length>2?"weight":"normal",a;if(n.isInCircle){var o={x:0,y:1};return i==="normal"?a=hC(e[0],e[1],o):(t.fill=t.stroke,a=fC(e,o)),a=this.parsePath(a),r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:a})})}else{if(i==="normal")return e=this.parsePoints(e),a=Li((e[1].x+e[0].x)/2,e[0].y,Math.abs(e[1].x-e[0].x)/2,Math.PI,Math.PI*2),r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:a})});var s=xh(e[1],e[3]),l=xh(e[2],e[0]);return a=[["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],s,["L",e[3].x,e[3].y],["L",e[2].x,e[2].y],l,["Z"]],a=this.parsePath(a),t.fill=t.stroke,r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:a})})}},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});function cC(n,r){var t=xh(n,r),e=[["M",n.x,n.y]];return e.push(t),e}Ai("edge","smooth",{draw:function(n,r){var t=En(n,!0,!1,"lineWidth"),e=n.points,i=this.parsePath(cC(e[0],e[1]));return r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:i})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}});var cl=1/3;function vC(n,r){var t=[];t.push({x:n.x,y:n.y*(1-cl)+r.y*cl}),t.push({x:r.x,y:n.y*(1-cl)+r.y*cl}),t.push(r);var e=[["M",n.x,n.y]];return(0,h.each)(t,function(i){e.push(["L",i.x,i.y])}),e}Ai("edge","vhv",{draw:function(n,r){var t=En(n,!0,!1,"lineWidth"),e=n.points,i=this.parsePath(vC(e[0],e[1]));return r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:i})})},getMarker:function(n){return{symbol:"circle",style:{r:4.5,fill:n.color}}}}),Ai("interval","funnel",{getPoints:function(n){return n.size=n.size*2,gh(n)},draw:function(n,r){var t=En(n,!1,!0),e=this.parsePath(xv(n.points,n.nextPoints,!1)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e}),name:"interval"});return i},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}}),Ai("interval","hollow-rect",{draw:function(n,r){var t=En(n,!0,!1),e=this.parsePath(yh(n.points)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e}),name:"interval"});return i},getMarker:function(n){var r=n.color,t=n.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:r,fill:null}}:{symbol:"square",style:{r:4,stroke:r,fill:null}}}});function dC(n){var r=n.x,t=n.y,e=n.y0;return(0,h.isArray)(t)?t.map(function(i,a){return{x:(0,h.isArray)(r)?r[a]:r,y:i}}):[{x:r,y:e},{x:r,y:t}]}Ai("interval","line",{getPoints:function(n){return dC(n)},draw:function(n,r){var t=En(n,!0,!1,"lineWidth"),e=this.parsePath(yh(n.points,!1)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e}),name:"interval"});return i},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){return[["M",t,e-i],["L",t,e+i]]},style:{r:5,stroke:r}}}}),Ai("interval","pyramid",{getPoints:function(n){return n.size=n.size*2,gh(n,!0)},draw:function(n,r){var t=En(n,!1,!0),e=this.parsePath(xv(n.points,n.nextPoints,!0)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e}),name:"interval"});return i},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});function pC(n){var r=n.x,t=n.y,e=n.y0,i=n.size,a,o;(0,h.isArray)(t)?(a=t[0],o=t[1]):(a=e,o=t);var s=r+i/2,l=r-i/2;return[{x:r,y:a},{x:r,y:o},{x:l,y:a},{x:s,y:a},{x:l,y:o},{x:s,y:o}]}function gC(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]}Ai("interval","tick",{getPoints:function(n){return pC(n)},draw:function(n,r){var t=En(n,!0,!1),e=this.parsePath(gC(n.points)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e}),name:"interval"});return i},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){return[["M",t-i/2,e-i],["L",t+i/2,e-i],["M",t,e-i],["L",t,e+i],["M",t-i/2,e+i],["L",t+i/2,e+i]]},style:{r:5,stroke:r}}}});var yC=function(n,r,t){var e=n.x,i=n.y,a=r.x,o=r.y,s;switch(t){case"hv":s=[{x:a,y:i}];break;case"vh":s=[{x:e,y:o}];break;case"hvh":var l=(a+e)/2;s=[{x:l,y:i},{x:l,y:o}];break;case"vhv":var u=(i+o)/2;s=[{x:e,y:u},{x:a,y:u}];break;default:break}return s};function mC(n,r){var t=[];return(0,h.each)(n,function(e,i){var a=n[i+1];if(t.push(e),a){var o=yC(e,a,r);t=t.concat(o)}}),t}function xC(n){return n.map(function(r,t){return t===0?["M",r.x,r.y]:["L",r.x,r.y]})}function bC(n,r){var t=ch(n.points,n.connectNulls,n.showSinglePoint),e=[];return(0,h.each)(t,function(i){var a=mC(i,r);e=e.concat(xC(a))}),(0,B.__assign)((0,B.__assign)({},En(n,!0,!1,"lineWidth")),{path:e})}(0,h.each)(["hv","vh","hvh","vhv"],function(n){Ai("line",n,{draw:function(r,t){var e=bC(r,n),i=t.addShape({type:"path",attrs:e,name:"line"});return i},getMarker:function(r){return yv(r,n)}})}),(0,h.each)(rC,function(n){Ai("point",n,{draw:function(r,t){return mh(this,r,t,n,!0)},getMarker:function(r){var t=r.color;return{symbol:To[n],style:{r:4.5,stroke:t,fill:null}}}})}),Ai("point","image",{draw:function(n,r){var t=En(n,!1,!1,"r").r,e=this.parsePoints(n.points),i=e[0];if(n.isStack)i=e[1];else if(e.length>1){for(var a=r.addGroup(),o=0,s=e;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-t/2,y:l.y-t,width:t,height:t,img:n.shape[1]}})}return a}return r.addShape("image",{attrs:{x:i.x-t/2,y:i.y-t,width:t,height:t,img:n.shape[1]}})},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{r:4.5,fill:r}}}}),(0,h.each)(wv,function(n){Ai("point",n,{draw:function(r,t){return mh(this,r,t,n,!1)},getMarker:function(r){var t=r.color;return{symbol:To[n]||n,style:{r:4.5,fill:t}}}})});function Sv(n){var r=(0,h.isArray)(n)?n:[n],t=r[0],e=r[r.length-1],i=r.length>1?r[1]:t,a=r.length>3?r[3]:e,o=r.length>2?r[2]:i;return{min:t,max:e,min1:i,max1:a,median:o}}function Cv(n,r,t){var e=t/2,i;if((0,h.isArray)(r)){var a=Sv(r),o=a.min,s=a.max,l=a.median,u=a.min1,f=a.max1,c=n-e,v=n+e;i=[[c,s],[v,s],[n,s],[n,f],[c,u],[c,f],[v,f],[v,u],[n,u],[n,o],[c,o],[v,o],[c,l],[v,l]]}else{r=(0,h.isNil)(r)?.5:r;var g=Sv(n),o=g.min,s=g.max,l=g.median,u=g.min1,f=g.max1,C=r-e,O=r+e;i=[[o,C],[o,O],[o,r],[u,r],[u,C],[u,O],[f,O],[f,C],[f,r],[s,r],[s,C],[s,O],[l,C],[l,O]]}return i.map(function(F){return{x:F[0],y:F[1]}})}function wC(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]}Ai("schema","box",{getPoints:function(n){var r=n.x,t=n.y,e=n.size;return Cv(r,t,e)},draw:function(n,r){var t=En(n,!0,!1),e=this.parsePath(wC(n.points)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e,name:"schema"})});return i},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){var a=[e-6,e-3,e,e+3,e+6],o=Cv(t,a,i);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:r}}}});function SC(n){var r=(0,h.isArray)(n)?n:[n],t=r.sort(function(e,i){return i-e});return Ln(t,4,t[t.length-1])}function Mv(n,r,t){var e=SC(r);return[{x:n,y:e[0]},{x:n,y:e[1]},{x:n-t/2,y:e[2]},{x:n-t/2,y:e[1]},{x:n+t/2,y:e[1]},{x:n+t/2,y:e[2]},{x:n,y:e[2]},{x:n,y:e[3]}]}function CC(n){return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]}Ai("schema","candle",{getPoints:function(n){var r=n.x,t=n.y,e=n.size;return Mv(r,t,e)},draw:function(n,r){var t=En(n,!0,!0),e=this.parsePath(CC(n.points)),i=r.addShape("path",{attrs:(0,B.__assign)((0,B.__assign)({},t),{path:e,name:"schema"})});return i},getMarker:function(n){var r=n.color;return{symbol:function(t,e,i){var a=[e+7.5,e+3,e-3,e-7.5],o=Mv(t,a,i);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:r,fill:r,r:6}}}});function MC(n,r){var t=Math.abs(n[0].x-n[2].x),e=Math.abs(n[0].y-n[2].y),i=Math.min(t,e);r&&(i=(0,h.clamp)(r,0,Math.min(t,e))),i=i/2;var a=(n[0].x+n[2].x)/2,o=(n[0].y+n[2].y)/2;return{x:a-i,y:o-i,width:i*2,height:i*2}}Ai("polygon","square",{draw:function(n,r){if(!(0,h.isEmpty)(n.points)){var t=En(n,!0,!0),e=this.parsePoints(n.points);return r.addShape("rect",{attrs:(0,B.__assign)((0,B.__assign)({},t),MC(e,n.size)),name:"polygon"})}},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});var EC=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setLabelPosition=function(t,e,i,a){var o=this.getCoordinate(),s=o.isTransposed,l=e.points,u=o.convert(l[0]),f=o.convert(l[2]),c=s?-1:1,v=(u.x-f.x)/2*c,g=(u.y-f.y)/2*c;switch(a){case"right":s||(t.x-=v,t.y+=g),t.textAlign=(0,h.get)(t,"textAlign","left");break;case"left":s?t.x-=v*2:(t.x+=v,t.y+=g),t.textAlign=(0,h.get)(t,"textAlign","right");break;case"bottom":s?(t.x-=v,t.y-=g):t.y+=g*2,t.textAlign=(0,h.get)(t,"textAlign","center"),t.textBaseline=(0,h.get)(t,"textBaseline","top");break;case"middle":s?t.x-=v:t.y+=g,t.textAlign=(0,h.get)(t,"textAlign","center");break;case"top":s&&(t.x-=v,t.y+=g),t.textAlign=(0,h.get)(t,"textAlign","center"),t.textBaseline=(0,h.get)(t,"textBaseline","bottom");break;default:break}},r}(el),AC=EC,vl=Math.PI/2,TC=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),i;if(t.labelEmit)i=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!e.isTransposed)i="center";else{var a=e.getCenter(),o=this.getDefaultOffset(t.offset);Math.abs(t.x-a.x)<1?i="center":t.angle>Math.PI||t.angle<=0?i=o>0?"left":"right":i=o>0?"right":"left"}return i},r.prototype.getLabelPoint=function(t,e,i){var a=1,o,s=t.content[i];this.isToMiddle(e)?o=this.getMiddlePoint(e.points):(t.content.length===1&&i===0?i=1:i===0&&(a=-1),o=this.getArcPoint(e,i));var l=this.getDefaultOffset(t.offset)*a,u=this.getPointAngle(o),f=t.labelEmit,c=this.getCirclePoint(u,l,o,f);return c.r===0?c.content="":(c.content=s,c.angle=u,c.color=e.color),c.rotate=t.autoRotate?this.getLabelRotate(u,l,f):t.rotate,c.start={x:o.x,y:o.y},c},r.prototype.getArcPoint=function(t,e){return e===void 0&&(e=0),!(0,h.isArray)(t.x)&&!(0,h.isArray)(t.y)?{x:t.x,y:t.y}:{x:(0,h.isArray)(t.x)?t.x[e]:t.x,y:(0,h.isArray)(t.y)?t.y[e]:t.y}},r.prototype.getPointAngle=function(t){return de(this.getCoordinate(),t)},r.prototype.getCirclePoint=function(t,e,i,a){var o=this.getCoordinate(),s=o.getCenter(),l=Ot(o,i);if(l===0)return(0,B.__assign)((0,B.__assign)({},s),{r:l});var u=t;if(o.isTransposed&&l>e&&!a){var f=Math.asin(e/(2*l));u=t+f*2}else l=l+e;return{x:s.x+l*Math.cos(u),y:s.y+l*Math.sin(u),r:l}},r.prototype.getLabelRotate=function(t,e,i){var a=t+vl;return i&&(a-=vl),a&&(a>vl?a=a-Math.PI:a<-vl&&(a=a+Math.PI)),a},r.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),i=t.length,a={x:0,y:0};return(0,h.each)(t,function(o){a.x+=o.x,a.y+=o.y}),a.x/=i,a.y/=i,a=e.convert(a),a},r.prototype.isToMiddle=function(t){return t.x.length>2},r}(el),Ev=TC,_C=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.defaultLayout="distribute",e}return r.prototype.getDefaultLabelCfg=function(){return(0,h.get)(this.geometry.theme,"pieLabels",{})},r.prototype.getDefaultOffset=function(t){return t||0},r.prototype.getLabelRotate=function(t,e,i){var a;return e<0&&(a=t,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},r.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),i=e.getCenter(),a;t.angle<=Math.PI/2&&t.x>=i.x?a="left":a="right";var o=this.getDefaultOffset(t.offset);return o<=0&&(a==="right"?a="left":a="right"),a},r.prototype.getArcPoint=function(t){return t},r.prototype.getPointAngle=function(t){var e=this.getCoordinate(),i={x:(0,h.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},a={x:(0,h.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},o,s=de(e,i);if(t.points&&t.points[0].y===t.points[1].y)o=s;else{var l=de(e,a);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},r.prototype.getCirclePoint=function(t,e,i){var a=this.getCoordinate(),o=a.getCenter(),s=a.getRadius()+e;return(0,B.__assign)((0,B.__assign)({},oi(o.x,o.y,s,t)),{angle:t,r:s})},r}(Ev),PC=_C,Av=4;function LC(n,r,t,e,i,a){var o=!0,s=e.start,l=e.end,u=Math.min(s.y,l.y),f=Math.abs(s.y-l.y),c,v=0,g=Number.MIN_VALUE,C=r.map(function(ut){return ut.y>v&&(v=ut.y),ut.y<g&&(g=ut.y),{size:t,targets:[ut.y-u]}});for(g-=u,v-u>f&&(f=v-u);o;)for(C.forEach(function(ut){var kt=(Math.min.apply(g,ut.targets)+Math.max.apply(g,ut.targets))/2;ut.pos=Math.min(Math.max(g,kt-ut.size/2),f-ut.size)}),o=!1,c=C.length;c--;)if(c>0){var O=C[c-1],F=C[c];O.pos+O.size>F.pos&&(O.size+=F.size,O.targets=O.targets.concat(F.targets),O.pos+O.size>f&&(O.pos=f-O.size),C.splice(c,1),o=!0)}c=0,C.forEach(function(ut){var kt=u+t/2;ut.targets.forEach(function(){r[c].y=ut.pos+kt,kt+=t,c++})});for(var G={},Y=0,$=n;Y<$.length;Y++){var q=$[Y];G[q.get("id")]=q}r.forEach(function(ut){var kt=ut.r*ut.r,Nt=Math.pow(Math.abs(ut.y-i.y),2);if(kt<Nt)ut.x=i.x;else{var Wt=Math.sqrt(kt-Nt);a?ut.x=i.x+Wt:ut.x=i.x-Wt}var Ft=G[ut.id];Ft.attr("x",ut.x),Ft.attr("y",ut.y);var ee=(0,h.find)(Ft.getChildren(),function(ve){return ve.get("type")==="text"});ee&&(ee.attr("y",ut.y),ee.attr("x",ut.x))})}function IC(n,r,t,e){var i=n[0]?n[0].offset:0,a=r[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=14,u=o+i,f=u*2+l*2,c={start:a.start,end:a.end},v=[[],[]];n.forEach(function(g){!g||(g.textAlign==="right"?v[0].push(g):v[1].push(g))}),v.forEach(function(g,C){var O=f/l;g.length>O&&(g.sort(function(F,G){return G["..percent"]-F["..percent"]}),g.splice(O,g.length-O)),g.sort(function(F,G){return F.y-G.y}),LC(r,g,l,c,s,C)})}(0,h.each)(n,function(g){if(g&&g.labelLine){var C=g.offset,O=g.angle,F=oi(s.x,s.y,o,O),G=oi(s.x,s.y,o+C/2,O),Y=g.x+(0,h.get)(g,"offsetX",0),$=g.y+(0,h.get)(g,"offsetY",0),q={x:Y-Math.cos(O)*Av,y:$-Math.sin(O)*Av};(0,h.isObject)(g.labelLine)||(g.labelLine={}),g.labelLine.path=["M "+F.x,F.y+" Q"+G.x,G.y+" "+q.x,q.y].join(",")}})}var Tv=4;function kC(n,r,t,e,i,a,o){r.sort(function(Ft,ee){return Ft.y-ee.y});var s=e.start,l=e.end,u=Math.min(s.y,l.y),f=Math.max(s.y,l.y),c,v=r.map(function(Ft){return{content:Ft.content,size:t,pos:Ft.y,targets:[Ft.y]}}),g=Math.max.apply(Math,v.map(function(Ft){return Ft.pos})),C=Math.min.apply(Math,v.map(function(Ft){return Ft.pos}));if(o){for(var O=Math.min(C,f-(v.length-1)*t),F=Math.max(O+v.length*t,g+t),G=!0;G;)for(G=!1,c=v.length;c--;)if(c>0){var Y=v[c-1],$=v[c];Y.pos+Y.size>$.pos&&($.pos+c*t<F?(Y.size+=$.size,Y.targets=Y.targets.concat($.targets),v.splice(c,1)):Y.pos=$.pos-Y.size,G=!0)}}else for(var F=Math.max(u+(v.length-1)*t,g),O=Math.min(C,F-(v.length-1)*t),G=!0;G;)for(G=!1,c=v.length;c--;)if(c>0){var Y=v[c-1],$=v[c];Y.pos+Y.size>$.pos&&(Y.pos-O>c*t?Y.pos-=Y.size:(Y.size+=$.size,Y.targets=Y.targets.concat($.targets),v.splice(c,1)),G=!0)}c=0,v.forEach(function(Ft){var ee=Ft.pos;Ft.targets.forEach(function(){r[c].y=ee,ee+=t,c++})});for(var q={},ut=0,kt=n;ut<kt.length;ut++){var Nt=kt[ut];q[Nt.get("id")]=Nt}var Wt=(Math.max.apply(Math,r.map(function(Ft){return Ft.y}))-Math.min.apply(Math,r.map(function(Ft){return Ft.y})))/2;Wt=Math.max(Wt,a),r.forEach(function(Ft){var ee=q[Ft.id],ve=ee.find(function(ke){return ke.get("type")==="text"});if(ve&&ve.attr("y")!==Ft.y){var fe=Wt*Wt,Te=Math.pow(Math.abs(Ft.y-i.y),2);if(fe<Te)Ft.x=i.x;else{var Be=Math.sqrt(fe-Te);o?Ft.x=i.x+Be:Ft.x=i.x-Be}}ee.attr("x",Ft.x),ee.attr("y",Ft.y),ve&&(ve.attr("y",Ft.y),ve.attr("x",Ft.x))})}function OC(n,r,t,e){var i=n[0]?n[0].offset:0,a=r[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=(0,h.get)(n[0],"labelHeight",14),u=o+i,f=u*2+l*2,c={start:a.start,end:a.end},v=[[],[]];n.forEach(function(g){!g||(g.x<s.x?v[0].push(g):v[1].push(g))}),v.forEach(function(g,C){var O=f/l;if(g.length>O){g.sort(function(G,Y){return Y["data.percent"]-G["data.percent"]});var F=g.splice(O,g.length-O+1);F.forEach(function(G){var Y=r.findIndex(function($){return $.get("id")===G.id});r[Y]&&(r[Y].remove(!0),r.splice(Y,1))})}kC(r,g,l,c,s,u,C===1)})}(0,h.each)(n,function(g){if(g&&g.labelLine){var C=g.angle,O=oi(s.x,s.y,o,C),F=g.x+(0,h.get)(g,"offsetX",0)*(Math.cos(C)>0?1:-1),G=g.y+(0,h.get)(g,"offsetY",0)*(Math.sin(C)>0?1:-1),Y={x:F-Math.cos(C)*Tv,y:G-Math.sin(C)*Tv},$=g.labelLine.smooth,q=[],ut=Y.x-s.x,kt=Y.y-s.y,Nt=Math.atan(kt/ut);if(ut<0&&(Nt+=Math.PI),$===!1){(0,h.isObject)(g.labelLine)||(g.labelLine={});var Wt=0;(C<0&&C>-Math.PI/2||C>Math.PI*1.5)&&Y.y>O.y&&(Wt=1),C>=0&&C<Math.PI/2&&Y.y>O.y&&(Wt=1),C>=Math.PI/2&&C<Math.PI&&O.y>Y.y&&(Wt=1),(C<-Math.PI/2||C>=Math.PI&&C<Math.PI*1.5)&&O.y>Y.y&&(Wt=1);var Ft=i/2>4?4:Math.max(i/2-1,0),ee=oi(s.x,s.y,o+Ft,C),ve=oi(s.x,s.y,o+i/2,Nt),fe=0;q.push("M "+O.x+" "+O.y),q.push("L "+ee.x+" "+ee.y),q.push("A "+s.x+" "+s.y+" 0 "+fe+" "+Wt+" "+ve.x+" "+ve.y),q.push("L "+Y.x+" "+Y.y)}else{var ee=oi(s.x,s.y,o+(i/2>4?4:Math.max(i/2-1,0)),C),Te=O.x<s.x?1:-1;q.push("M "+Y.x+" "+Y.y);var Be=(O.y-s.y)/(O.x-s.x),ke=(Y.y-s.y)/(Y.x-s.x);Math.abs(Be-ke)>Math.pow(Math.E,-16)&&q.push.apply(q,["C",Y.x+Te*4,Y.y,2*ee.x-O.x,2*ee.y-O.y,O.x,O.y]),q.push("L "+O.x+" "+O.y)}g.labelLine.path=q.join(" ")}})}function BC(n,r,t,e){(0,h.each)(r,function(i){var a=e.minX,o=e.minY,s=e.maxX,l=e.maxY,u=i.getCanvasBBox(),f=u.minX,c=u.minY,v=u.maxX,g=u.maxY,C=u.x,O=u.y,F=u.width,G=u.height,Y=C,$=O;(f<a||v<a)&&(Y=a),(c<o||g<o)&&($=o),f>s?Y=s-F:v>s&&(Y=Y-(v-s)),c>l?$=l-G:g>l&&($=$-(g-l)),(Y!==C||$!==O)&&Ju(i,Y-C,$-O)})}function DC(n,r,t,e){(0,h.each)(r,function(i,a){var o=i.getCanvasBBox(),s=t[a].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&i.remove(!0)})}var FC=100,_v=function(){function n(r){r===void 0&&(r={}),this.bitmap={};var t=r.xGap,e=t===void 0?1:t,i=r.yGap,a=i===void 0?8:i;this.xGap=e,this.yGap=a}return n.prototype.hasGap=function(r){for(var t=!0,e=this.bitmap,i=Math.round(r.minX),a=Math.round(r.maxX),o=Math.round(r.minY),s=Math.round(r.maxY),l=i;l<=a;l+=1){if(!e[l]){e[l]={};continue}if(l===i||l===a){for(var u=o;u<=s;u++)if(e[l][u]){t=!1;break}}else if(e[l][o]||e[l][s]){t=!1;break}}return t},n.prototype.fillGap=function(r){for(var t=this.bitmap,e=Math.round(r.minX),i=Math.round(r.maxX),a=Math.round(r.minY),o=Math.round(r.maxY),s=e;s<=i;s+=1)t[s]||(t[s]={});for(var s=e;s<=i;s+=this.xGap){for(var l=a;l<=o;l+=this.yGap)t[s][l]=!0;t[s][o]=!0}if(this.yGap!==1)for(var s=a;s<=o;s+=1)t[e][s]=!0,t[i][s]=!0;if(this.xGap!==1)for(var s=e;s<=i;s+=1)t[s][a]=!0,t[s][o]=!0},n.prototype.destroy=function(){this.bitmap={}},n}();function RC(n,r,t){t===void 0&&(t=FC);var e=-1,i=n.attr(),a=i.x,o=i.y,s=n.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),u,f=-e,c=0,v=0,g=function(G){var Y=G*.1;return[Y*Math.cos(Y),Y*Math.sin(Y)]};if(r.hasGap(s))return r.fillGap(s),!0;for(var C=!1,O=0,F={};Math.min(Math.abs(c),Math.abs(v))<l&&O<t;)if(u=g(f+=e),c=~~u[0],v=~~u[1],!(!c&&!v||F[c+"-"+v])&&(n.attr({x:a+c,y:o+v}),c+v<0&&n.attr("textAlign","right"),O++,r.hasGap(n.getCanvasBBox()))){r.fillGap(n.getCanvasBBox()),C=!0,F[c+"-"+v]=!0;break}return C}function NC(n,r,t,e){var i=n.getCanvasBBox(),a=i.width,o=i.height,s={x:r,y:t,textAlign:"center"};switch(e){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right";break;default:break}return n.attr(s),n.getCanvasBBox()}function YC(n,r,t,e){var i=new _v;(0,h.each)(r,function(a){var o=a.find(function(s){return s.get("type")==="text"});RC(o,i)||a.remove(!0)}),i.destroy()}function GC(n,r,t,e){var i=new _v;(0,h.each)(r,function(a){for(var o=a.find(function(g){return g.get("type")==="text"}),s=o.attr(),l=s.x,u=s.y,f=!1,c=0;c<=8;c++){var v=NC(o,l,u,c);if(i.hasGap(v)){i.fillGap(v),f=!0;break}}f||a.remove(!0)}),i.destroy()}function zC(n,r,t){var e={fillOpacity:(0,h.isNil)(n.attr("fillOpacity"))?1:n.attr("fillOpacity"),strokeOpacity:(0,h.isNil)(n.attr("strokeOpacity"))?1:n.attr("strokeOpacity"),opacity:(0,h.isNil)(n.attr("opacity"))?1:n.attr("opacity")};n.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),n.animate(e,r)}function XC(n,r,t){var e={fillOpacity:0,strokeOpacity:0,opacity:0},i=r.easing,a=r.duration,o=r.delay;n.animate(e,a,i,function(){n.remove(!0)},o)}function VC(n,r,t){var e,i=r[0],a=r[1];return n.applyToMatrix([i,a,1]),t==="x"?(n.setMatrix(Ri.transform(n.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),e=Ri.transform(n.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):t==="y"?(n.setMatrix(Ri.transform(n.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),e=Ri.transform(n.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):t==="xy"&&(n.setMatrix(Ri.transform(n.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),e=Ri.transform(n.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),e}function wh(n,r,t,e,i){var a=t.start,o=t.end,s=t.getWidth(),l=t.getHeight(),u,f;i==="y"?(u=a.x+s/2,f=e.y<a.y?e.y:a.y):i==="x"?(u=e.x>a.x?e.x:a.x,f=a.y+l/2):i==="xy"&&(t.isPolar?(u=t.getCenter().x,f=t.getCenter().y):(u=(a.x+o.x)/2,f=(a.y+o.y)/2));var c=VC(n,[u,f],i);n.animate({matrix:c},r)}function HC(n,r,t){var e=t.coordinate,i=t.minYPoint;wh(n,r,e,i,"x")}function WC(n,r,t){var e=t.coordinate,i=t.minYPoint;wh(n,r,e,i,"y")}function jC(n,r,t){var e=t.coordinate,i=t.minYPoint;wh(n,r,e,i,"xy")}function UC(n,r,t){var e=n.getTotalLength();n.attr("lineDash",[e]),n.animate(function(i){return{lineDashOffset:(1-i)*e}},r)}function ZC(n,r,t){var e=t.toAttrs,i=e.x,a=e.y;delete e.x,delete e.y,n.attr(e),n.animate({x:i,y:a},r)}function KC(n,r,t){var e=n.getBBox(),i=n.get("origin").mappingData,a=i.points,o=a[0].y-a[1].y>0?e.maxX:e.minX,s=(e.minY+e.maxY)/2;n.applyToMatrix([o,s,1]);var l=Ri.transform(n.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);n.setMatrix(l),n.animate({matrix:Ri.transform(n.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},r)}function $C(n,r,t){var e=n.getBBox(),i=n.get("origin").mappingData,a=(e.minX+e.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?e.maxY:e.minY;n.applyToMatrix([a,s,1]);var l=Ri.transform(n.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);n.setMatrix(l),n.animate({matrix:Ri.transform(n.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},r)}var QC=d(29291);function Pv(n,r){var t,e=(0,QC.Z)(n,r),i=e.startAngle,a=e.endAngle;return!(0,h.isNumberEqual)(i,-Math.PI*.5)&&i<-Math.PI*.5&&(i+=Math.PI*2),!(0,h.isNumberEqual)(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),r[5]===0&&(t=[a,i],i=t[0],a=t[1]),(0,h.isNumberEqual)(i,Math.PI*1.5)&&(i=Math.PI*-.5),(0,h.isNumberEqual)(a,Math.PI*-.5)&&(a=Math.PI*1.5),{startAngle:i,endAngle:a}}function Lv(n){var r;return n[0]==="M"||n[0]==="L"?r=[n[1],n[2]]:(n[0]==="a"||n[0]==="A")&&(r=[n[n.length-2],n[n.length-1]]),r}function Iv(n){var r,t,e,i=n.filter(function($){return $[0]==="A"||$[0]==="a"}),a=i[0],o=i.length>1?i[1]:i[0],s=n.indexOf(a),l=n.indexOf(o),u=Lv(n[s-1]),f=Lv(n[l-1]),c=Pv(u,a),v=c.startAngle,g=c.endAngle,C=Pv(f,o),O=C.startAngle,F=C.endAngle;(0,h.isNumberEqual)(v,O)&&(0,h.isNumberEqual)(g,F)?(t=v,e=g):(t=Math.min(v,O),e=Math.max(g,F));var G=a[1],Y=i[i.length-1][1];return G<Y?(r=[Y,G],G=r[0],Y=r[1]):G===Y&&(Y=0),{startAngle:t,endAngle:e,radius:G,innerRadius:Y}}function JC(n,r,t){var e=t.toAttrs,i=t.coordinate,a=e.path,o=a.map(function(Y){return Y[0]}),s=Iv(a),l=s.startAngle,u=s.endAngle,f=s.radius,c=s.innerRadius,v=Iv(n.attr("path")),g=v.startAngle,C=v.endAngle,O=i.getCenter(),F=l-g,G=u-C;n.animate(function(Y){var $=g+Y*F,q=C+Y*G;return(0,B.__assign)((0,B.__assign)({},e),{path:(0,h.isEqual)(o,["M","A","A","Z"])?Li(O.x,O.y,f,$,q):di(O.x,O.y,f,$,q,c)})},(0,B.__assign)((0,B.__assign)({},r),{callback:function(){n.attr("path",a)}}))}function qC(n,r,t){var e=pe(t.coordinate,20),i=e.type,a=e.startState,o=e.endState,s=n.setClip({type:i,attrs:a});s.animate(o,(0,B.__assign)((0,B.__assign)({},r),{callback:function(){n&&!n.get("destroyed")&&n.set("clipShape",null),s.remove(!0)}}))}function Sh(n,r,t){if(n.isGroup())(0,h.each)(n.getChildren(),function(s){Sh(s,r,t)});else{var e=n.getBBox(),i=(e.minX+e.maxX)/2,a=(e.minY+e.maxY)/2;if(n.applyToMatrix([i,a,1]),t==="zoomIn"){var o=Ri.transform(n.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);n.setMatrix(o),n.animate({matrix:Ri.transform(n.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},r)}else n.animate({matrix:Ri.transform(n.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},(0,B.__assign)((0,B.__assign)({},r),{callback:function(){n.remove(!0)}}))}}function t2(n,r,t){Sh(n,r,"zoomIn")}function e2(n,r,t){Sh(n,r,"zoomOut")}function Ua(n){return[gt.TOP,gt.BOTTOM].includes(n)?{offsetX:0,offsetY:n===gt.TOP?-8:8,style:{textAlign:"center",textBaseline:n===gt.TOP?"bottom":"top"}}:[gt.LEFT,gt.RIGHT].includes(n)?{offsetX:n===gt.LEFT?-8:8,offsetY:0,style:{textAlign:n===gt.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Ch(n,r,t){return{x:n.x+r*Math.cos(t),y:n.y+r*Math.sin(t)}}var r2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,h.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.getRegion=function(t,e){var i=1/2,a={x:.5,y:.5},o=Math.PI*2/t,s=-1*Math.PI/2+o*e,l=i/(1+1/Math.sin(o/2)),u=Ch(a,i-l,s),f=Math.PI*5/4,c=Math.PI*1/4;return{start:Ch(u,l,f),end:Ch(u,l,c)}},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){var e=this,i=this.cfg,a=i.fields,o=i.type,s=a[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(t,s),u=l.length,f=[];return l.forEach(function(c,v){var g=[{field:s,value:c,values:l}],C=(0,h.filter)(t,e.getFacetDataFilter(g)),O={type:o,data:C,region:e.getRegion(u,v),columnValue:c,columnField:s,columnIndex:v,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};f.push(O)}),f},r.prototype.getXAxisOption=function(t,e,i,a){return i},r.prototype.getYAxisOption=function(t,e,i,a){return i},r.prototype.renderTitle=function(){var t=this;(0,h.each)(this.facets,function(e){var i=e.columnValue,a=e.view,o=(0,h.get)(t.cfg.title,"formatter"),s=(0,h.deepMix)({position:["50%","0%"],content:o?o(i):i},Ua(gt.TOP),t.cfg.title);a.annotation().text(s)})},r}(Vr),i2=r2,n2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,h.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){var e=this,i=this.cfg.fields,a=this.cfg.cols,o=i[0];if(!o)throw new Error("No `fields` specified!");var s=this.getFieldValues(t,o),l=s.length;a=a||l;var u=this.getPageCount(l,a),f=[];return s.forEach(function(c,v){var g=e.getRowCol(v,a),C=g.row,O=g.col,F=[{field:o,value:c,values:s}],G=(0,h.filter)(t,e.getFacetDataFilter(F)),Y={type:e.cfg.type,data:G,region:e.getRegion(u,a,O,C),columnValue:c,rowValue:c,columnField:o,rowField:null,columnIndex:O,rowIndex:C,columnValuesLength:a,rowValuesLength:u,total:l};f.push(Y)}),f},r.prototype.getXAxisOption=function(t,e,i,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?(0,B.__assign)((0,B.__assign)({},i),{label:null,title:null}):i},r.prototype.getYAxisOption=function(t,e,i,a){return a.columnIndex!==0?(0,B.__assign)((0,B.__assign)({},i),{title:null,label:null}):i},r.prototype.renderTitle=function(){var t=this;(0,h.each)(this.facets,function(e){var i=e.columnValue,a=e.view,o=(0,h.get)(t.cfg.title,"formatter"),s=(0,h.deepMix)({position:["50%","0%"],content:o?o(i):i},Ua(gt.TOP),t.cfg.title);a.annotation().text(s)})},r.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},r.prototype.getRowCol=function(t,e){var i=Math.floor(t/e),a=t%e;return{row:i,col:a}},r}(Vr),a2=n2,o2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,h.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,B.__assign)({},n.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,B.__assign)({},n.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){for(var e=this.cfg,i=e.fields,a=e.type,o=i.length,s=o,l=[],u=0;u<s;u++)for(var f=i[u],c=0;c<o;c++){var v=i[c],g={type:a,data:t,region:this.getRegion(o,s,u,c),columnValue:f,rowValue:v,columnField:f,rowField:v,columnIndex:u,rowIndex:c,columnValuesLength:s,rowValuesLength:o};l.push(g)}return l},r.prototype.getXAxisOption=function(t,e,i,a){return a.rowIndex!==a.rowValuesLength-1?(0,B.__assign)((0,B.__assign)({},i),{label:null,title:null}):i},r.prototype.getYAxisOption=function(t,e,i,a){return a.columnIndex!==0?(0,B.__assign)((0,B.__assign)({},i),{title:null,label:null}):i},r.prototype.renderTitle=function(){var t=this;(0,h.each)(this.facets,function(e,i){var a=e.columnIndex,o=e.rowIndex,s=e.columnValuesLength,l=e.rowValuesLength,u=e.columnValue,f=e.rowValue,c=e.view;if(o===0){var v=(0,h.get)(t.cfg.columnTitle,"formatter"),g=(0,h.deepMix)({position:["50%","0%"],content:v?v(u):u},Ua(gt.TOP),t.cfg.columnTitle);c.annotation().text(g)}if(a===s-1){var v=(0,h.get)(t.cfg.rowTitle,"formatter"),g=(0,h.deepMix)({position:["100%","50%"],content:v?v(f):f},Ua(gt.RIGHT),t.cfg.rowTitle);c.annotation().text(g)}})},r}(Vr),s2=o2,l2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,h.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this),transpose:!1})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!=0&&t.coordinate().reflect("y")},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.generateFacets=function(t){var e=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],u=[""],f,c;return this.cfg.transpose?(f=i,l=this.getFieldValues(t,f).slice(0,2),o=l.length):(c=i,u=this.getFieldValues(t,c).slice(0,2),s=u.length),l.forEach(function(v,g){u.forEach(function(C,O){var F=[{field:f,value:v,values:l},{field:c,value:C,values:u}],G=(0,h.filter)(t,e.getFacetDataFilter(F)),Y={type:e.cfg.type,data:G,region:e.getRegion(s,o,g,O),columnValue:v,rowValue:C,columnField:f,rowField:c,columnIndex:g,rowIndex:O,columnValuesLength:o,rowValuesLength:s};a.push(Y)})}),a},r.prototype.getXAxisOption=function(t,e,i,a){return a.columnIndex===1||a.rowIndex===1?(0,B.__assign)((0,B.__assign)({},i),{label:null,title:null}):i},r.prototype.getYAxisOption=function(t,e,i,a){return i},r.prototype.renderTitle=function(){var t=this;(0,h.each)(this.facets,function(e,i){var a=e.columnValue,o=e.rowValue,s=e.view,l=(0,h.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var u=(0,h.deepMix)({position:["50%","0%"],content:l?l(a):a},Ua(gt.TOP),t.cfg.title);s.annotation().text(u)}else{var u=(0,h.deepMix)({position:["100%","50%"],content:l?l(o):o},Ua(gt.RIGHT),t.cfg.title);s.annotation().text(u)}})},r}(Vr),u2=l2,h2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.getDefaultCfg=function(){return(0,h.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,B.__assign)({},n.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,B.__assign)({},n.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.generateFacets=function(t){var e=this,i=this.cfg.fields,a=i[0],o=i[1],s=[],l=1,u=1,f=[""],c=[""];return a&&(f=this.getFieldValues(t,a),l=f.length),o&&(c=this.getFieldValues(t,o),u=c.length),f.forEach(function(v,g){c.forEach(function(C,O){var F=[{field:a,value:v,values:f},{field:o,value:C,values:c}],G=(0,h.filter)(t,e.getFacetDataFilter(F)),Y={type:e.cfg.type,data:G,region:e.getRegion(u,l,g,O),columnValue:v,rowValue:C,columnField:a,rowField:o,columnIndex:g,rowIndex:O,columnValuesLength:l,rowValuesLength:u};s.push(Y)})}),s},r.prototype.renderTitle=function(){var t=this;(0,h.each)(this.facets,function(e,i){var a=e.columnIndex,o=e.rowIndex,s=e.columnValuesLength,l=e.columnValue,u=e.rowValue,f=e.view;if(o===0){var c=(0,h.get)(t.cfg.columnTitle,"formatter"),v=(0,h.deepMix)({position:["50%","0%"],content:c?c(l):l},Ua(gt.TOP),t.cfg.columnTitle);f.annotation().text(v)}if(a===s-1){var c=(0,h.get)(t.cfg.rowTitle,"formatter"),v=(0,h.deepMix)({position:["100%","50%"],content:c?c(u):u},Ua(gt.RIGHT),t.cfg.rowTitle);f.annotation().text(v)}})},r.prototype.getXAxisOption=function(t,e,i,a){return a.rowIndex!==a.rowValuesLength-1?(0,B.__assign)((0,B.__assign)({},i),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?(0,B.__assign)((0,B.__assign)({},i),{title:null}):i},r.prototype.getYAxisOption=function(t,e,i,a){return a.columnIndex!==0?(0,B.__assign)((0,B.__assign)({},i),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?(0,B.__assign)((0,B.__assign)({},i),{title:null}):i},r}(Vr),f2=h2,c2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.init=function(){n.prototype.init.call(this),this.view.on(zt.AFTER_RENDER,this.afterChartRender)},r.prototype.getDefaultCfg=function(){return(0,h.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this)})},r.prototype.generateFacets=function(t){var e=this.cfg.fields;if(!e.length)throw new Error("Please specify for the fields for rootFacet!");var i=[],a={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return i.push(a),a.children=this.getChildFacets(t,1,i),this.setRegion(i),i},r.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach(function(i){i.region=e.getRegion(i.rowValuesLength,i.columnValuesLength,i.columnIndex,i.rowIndex)})},r.prototype.getRegion=function(t,e,i,a){var o=1/e,s=1/t,l={x:o*i,y:s*a},u={x:l.x+o,y:l.y+s*2/3};return{start:l,end:u}},r.prototype.forceColIndex=function(t){var e=this,i=[],a=0;t.forEach(function(v){e.isLeaf(v)&&(i.push(v),v.columnIndex=a,a++)}),i.forEach(function(v){v.columnValuesLength=i.length});for(var o=this.cfg.fields.length,s=o-1;s>=0;s--)for(var l=this.getFacetsByLevel(t,s),u=0,f=l;u<f.length;u++){var c=f[u];this.isLeaf(c)||(c.originColIndex=c.columnIndex,c.columnIndex=this.getRegionIndex(c.children),c.columnValuesLength=i.length)}},r.prototype.getFacetsByLevel=function(t,e){var i=[];return t.forEach(function(a){a.rowIndex===e&&i.push(a)}),i},r.prototype.getRegionIndex=function(t){var e=t[0],i=t[t.length-1];return(i.columnIndex-e.columnIndex)/2+e.columnIndex},r.prototype.isLeaf=function(t){return!t.children||!t.children.length},r.prototype.getRows=function(){return this.cfg.fields.length+1},r.prototype.getChildFacets=function(t,e,i){var a=this,o=this.cfg.fields,s=o.length;if(!(s<e)){var l=[],u=o[e-1],f=this.getFieldValues(t,u);return f.forEach(function(c,v){var g=[{field:u,value:c,values:f}],C=t.filter(a.getFacetDataFilter(g));if(C.length){var O={type:a.cfg.type,data:C,region:null,columnValue:c,rowValue:"",columnField:u,rowField:"",columnIndex:v,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:e,children:a.getChildFacets(C,e+1,i)};l.push(O),i.push(O)}}),l}},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.renderTitle=function(){var t=this;(0,h.each)(this.facets,function(e){var i=e.columnValue,a=e.view,o=(0,h.get)(t.cfg.title,"formatter"),s=(0,h.deepMix)({position:["50%","0%"],content:o?o(i):i},Ua(gt.TOP),t.cfg.title);a.annotation().text(s)})},r.prototype.drawLines=function(t){var e=this;t.forEach(function(i){if(!e.isLeaf(i)){var a=i.children;e.addFacetLines(i,a)}})},r.prototype.addFacetLines=function(t,e){var i=this,a=t.view,o=a.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};e.forEach(function(l){var u=l.view.coordinateBBox,f={x:u.bl.x+(u.tr.x-u.bl.x)/2,y:u.tr.y},c={x:s.x,y:s.y+(f.y-s.y)/2},v={x:f.x,y:c.y};i.drawLine([s,c,v,f])})},r.prototype.getPath=function(t){var e=[],i=this.cfg.line.smooth;return i?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(a,o){o===0?e.push(["M",a.x,a.y]):e.push(["L",a.x,a.y])}),e},r.prototype.drawLine=function(t){var e=this.getPath(t),i=this.cfg.line.style;this.container.addShape("path",{attrs:(0,h.assign)({path:e},i)})},r.prototype.getXAxisOption=function(t,e,i,a){return a.rowIndex!==a.rowValuesLength-1?(0,B.__assign)((0,B.__assign)({},i),{title:null,label:null}):i},r.prototype.getYAxisOption=function(t,e,i,a){return a.originColIndex!==0&&a.columnIndex!==0?(0,B.__assign)((0,B.__assign)({},i),{title:null,label:null}):i},r}(Vr),v2=c2,d2=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.cache=new Map,e.foregroundContainer=e.view.getLayer(mt.FORE).addGroup(),e.backgroundContainer=e.view.getLayer(mt.BG).addGroup(),e.option=[],e}return Object.defineProperty(r.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.layout=function(){var t=this,e=this.getComponents(),i=function(o){var s=o.component,l=o.extra,u=l.type,f=t.getAnnotationTheme(u);s.update(t.getAnnotationCfg(u,l,f))},a=function(o){var s=t.createAnnotation(o);s&&(s.component.init(),o.type==="regionFilter"&&s.component.render(),t.cache.set(o,s))};e.length?(0,h.each)(e,function(o){var s=o.component;s.get("type")==="regionFilter"?t.view.getRootView().once(zt.AFTER_RENDER,function(){i(o)}):i(o)}):(0,h.each)(this.option,function(o){o.type==="regionFilter"?t.view.getRootView().once(zt.AFTER_RENDER,function(){a(o)}):a(o)})},r.prototype.render=function(){},r.prototype.update=function(){var t=this,e=new WeakMap,i=function(a){var o=a.type,s=t.getAnnotationTheme(o),l=t.getAnnotationCfg(o,a,s),u=t.cache.get(a);if(u)Et(l,["container"]),u.component.update(l),e.set(a,!0);else{var f=t.createAnnotation(a);f&&(f.component.init(),a.type==="regionFilter"&&f.component.render(),t.cache.set(a,f),e.set(a,!0))}};this.view.once(zt.AFTER_RENDER,function(){(0,h.each)(t.option,function(o){o.type==="regionFilter"&&i(o)});var a=new Map;t.cache.forEach(function(o,s){e.has(s)?a.set(s,o):o.component.destroy()}),t.cache=a}),(0,h.each)(this.option,function(a){a.type!=="regionFilter"&&i(a)})},r.prototype.clear=function(t){t===void 0&&(t=!1),n.prototype.clear.call(this),this.cache.clear(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},r.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},r.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},r.prototype.createAnnotation=function(t){var e=t.type,i=gi.Annotation[(0,h.upperFirst)(e)];if(i){var a=this.getAnnotationTheme(e),o=this.getAnnotationCfg(e,t,a),s=new i(o);return{component:s,layer:this.isTop(o)?mt.FORE:mt.BG,direction:gt.NONE,type:Vt.ANNOTATION,extra:t}}},r.prototype.annotation=function(t){this.option.push(t)},r.prototype.arc=function(t){return this.annotation((0,B.__assign)({type:"arc"},t)),this},r.prototype.image=function(t){return this.annotation((0,B.__assign)({type:"image"},t)),this},r.prototype.line=function(t){return this.annotation((0,B.__assign)({type:"line"},t)),this},r.prototype.region=function(t){return this.annotation((0,B.__assign)({type:"region"},t)),this},r.prototype.text=function(t){return this.annotation((0,B.__assign)({type:"text"},t)),this},r.prototype.dataMarker=function(t){return this.annotation((0,B.__assign)({type:"dataMarker"},t)),this},r.prototype.dataRegion=function(t){this.annotation((0,B.__assign)({type:"dataRegion"},t))},r.prototype.regionFilter=function(t){this.annotation((0,B.__assign)({type:"regionFilter"},t))},r.prototype.parsePosition=function(t){var e=this.view.getXScale(),i=this.view.getScalesByDim("y"),a=(0,h.isFunction)(t)?t.call(null,e,i):t,o=0,s=0;if((0,h.isArray)(a)){var l=a[0],u=a[1];if((0,h.isString)(l)&&l.indexOf("%")!==-1&&!isNaN(l.slice(0,-1)))return this.parsePercentPosition(a);o=this.getNormalizedValue(l,e),s=this.getNormalizedValue(u,Object.values(i)[0])}else if(!(0,h.isNil)(a))for(var f=0,c=(0,h.keys)(a);f<c.length;f++){var v=c[f],g=a[v];v===e.field&&(o=this.getNormalizedValue(g,e)),i[v]&&(s=this.getNormalizedValue(g,i[v]))}return this.view.getCoordinate().convert({x:o,y:s})},r.prototype.getRegionPoints=function(t,e){var i=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=a.field,u=this.view.getData(),f=(0,h.isArray)(t)?t[0]:t[l],c=(0,h.isArray)(e)?e[0]:e[l],v=[],g;return(0,h.each)(u,function(C,O){if(C[l]===f&&(g=O),O>=g){var F=i.parsePosition([C[l],C[s.field]]);F&&v.push(F)}if(C[l]===c)return!1}),v},r.prototype.getNormalizedValue=function(t,e){var i,a;switch(t){case"start":i=0;break;case"end":i=1;break;case"median":{a=e.isCategory?(e.values.length-1)/2:(e.min+e.max)/2,i=e.scale(a);break}case"min":case"max":e.isCategory?a=t==="min"?0:e.values.length-1:a=e[t],i=e.scale(a);break;default:i=e.scale(t)}return i},r.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,i=parseFloat(t[1])/100,a=this.view.getCoordinate(),o=a.start,s=a.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},u=a.getWidth()*e+l.x,f=a.getHeight()*i+l.y;return{x:u,y:f}},r.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,i=t.end,a=t.getWidth(),o=t.getHeight(),s={x:Math.min(e.x,i.x),y:Math.min(e.y,i.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+a,maxY:s.y+o,width:a,height:o}},r.prototype.getAnnotationCfg=function(t,e,i){var a=this.view.getCoordinate(),o={};if((0,h.isNil)(e))return null;if(t==="arc"){var s=e,l=s.start,u=s.end,f=this.parsePosition(l),c=this.parsePosition(u),v=de(a,f),g=de(a,c);v>g&&(g=Math.PI*2+g),o={center:a.getCenter(),radius:Ot(a,f),startAngle:v,endAngle:g}}else if(t==="image"){var C=e,l=C.start,u=C.end;o={start:this.parsePosition(l),end:this.parsePosition(u),src:e.src}}else if(t==="line"){var O=e,l=O.start,u=O.end;o={start:this.parsePosition(l),end:this.parsePosition(u),text:(0,h.get)(e,"text",null)}}else if(t==="region"){var F=e,l=F.start,u=F.end;o={start:this.parsePosition(l),end:this.parsePosition(u)}}else if(t==="text"){var G=this.view.getData(),Y=e,$=Y.position,q=Y.content,ut=(0,B.__rest)(Y,["position","content"]),kt=q;(0,h.isFunction)(q)&&(kt=q(G)),o=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},this.parsePosition($)),ut),{content:kt})}else if(t==="dataMarker"){var Nt=e,$=Nt.position,Wt=Nt.point,Ft=Nt.line,ee=Nt.text,ve=Nt.autoAdjust,fe=Nt.direction;o=(0,B.__assign)((0,B.__assign)({},this.parsePosition($)),{coordinateBBox:this.getCoordinateBBox(),point:Wt,line:Ft,text:ee,autoAdjust:ve,direction:fe})}else if(t==="dataRegion"){var Te=e,l=Te.start,u=Te.end,Be=Te.region,ee=Te.text,ke=Te.lineLength;o={points:this.getRegionPoints(l,u),region:Be,text:ee,lineLength:ke}}else if(t==="regionFilter"){var Qe=e,l=Qe.start,u=Qe.end,tr=Qe.apply,rr=Qe.color,Ze=this.view.geometries,Ke=[],wr=function(Mr){!Mr||(Mr.isGroup()?Mr.getChildren().forEach(function(zr){return wr(zr)}):Ke.push(Mr))};(0,h.each)(Ze,function(Mr){tr?(0,h.contains)(tr,Mr.type)&&(0,h.each)(Mr.elements,function(zr){wr(zr.shape)}):(0,h.each)(Mr.elements,function(zr){wr(zr.shape)})}),o={color:rr,shapes:Ke,start:this.parsePosition(l),end:this.parsePosition(u)}}var br=(0,h.deepMix)({},i,(0,B.__assign)((0,B.__assign)({},o),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return br.container=this.getComponentContainer(br),br.animate=this.view.getOptions().animate&&br.animate&&(0,h.get)(e,"animate",br.animate),br.animateOption=(0,h.deepMix)({},Xo,br.animateOption,e.animateOption),br},r.prototype.isTop=function(t){return(0,h.get)(t,"top",!0)},r.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},r.prototype.getAnnotationTheme=function(t){return(0,h.get)(this.view.getTheme(),["components","annotation",t],{})},r}(zo),p2=d2;function kv(n,r){return(0,h.get)(n,["components","axis",r,"grid"],{})}function dl(n,r,t,e){var i=[],a=r.getTicks();return n.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,s,l){var u=s.value;if(e)i.push({points:[n.convert(t==="y"?{x:0,y:u}:{x:u,y:0}),n.convert(t==="y"?{x:1,y:u}:{x:u,y:1})]});else if(l){var f=o.value,c=(f+u)/2;i.push({points:[n.convert(t==="y"?{x:0,y:c}:{x:c,y:0}),n.convert(t==="y"?{x:1,y:c}:{x:c,y:1})]})}return s},a[0]),i}function Mh(n,r,t,e,i){var a=r.values.length,o=[],s=t.getTicks();return s.reduce(function(l,u){var f=l?l.value:u.value,c=u.value,v=(f+c)/2;return i==="x"?o.push({points:[n.convert({x:e?c:v,y:0}),n.convert({x:e?c:v,y:1})]}):o.push({points:(0,h.map)(Array(a+1),function(g,C){return n.convert({x:C/a,y:e?c:v})})}),u},s[0]),o}function Ov(n,r){var t=(0,h.get)(r,"grid");if(t===null)return!1;var e=(0,h.get)(n,"grid");return!(t===void 0&&e===null)}var lo=["container"],Bv=(0,B.__assign)((0,B.__assign)({},Xo),{appear:null}),g2=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.cache=new Map,e.gridContainer=e.view.getLayer(mt.BG).addGroup(),e.axisContainer=e.view.getLayer(mt.BG).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){this.update()},r.prototype.layout=function(){var t=this,e=this.view.getCoordinate();(0,h.each)(this.getComponents(),function(i){var a=i.component,o=i.direction,s=i.type,l=i.extra,u=l.dim,f=l.scale,c=l.alignTick,v;if(s===Vt.AXIS)e.isPolar?u==="x"?v=e.isTransposed?hr(e,o):Or(e):u==="y"&&(v=e.isTransposed?Or(e):hr(e,o)):v=hr(e,o);else if(s===Vt.GRID)if(e.isPolar){var g=void 0;e.isTransposed?g=u==="x"?Mh(e,t.view.getYScales()[0],f,c,u):dl(e,f,u,c):g=u==="x"?dl(e,f,u,c):Mh(e,t.view.getXScale(),f,c,u),v={items:g,center:t.view.getCoordinate().getCenter()}}else v={items:dl(e,f,u,c)};a.update(v)})},r.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach(function(i,a){t.has(a)?e.set(a,i):i.component.destroy()}),this.cache=e},r.prototype.clear=function(){n.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},r.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},r.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(!(!e||e.isIdentity)){var i=lr(this.option,e.field);if(i!==!1){var a=Fr(i,gt.BOTTOM),o=mt.BG,s="x",l=this.view.getCoordinate(),u=this.getId("axis",e.field),f=this.getId("grid",e.field);if(l.isRect){var c=this.cache.get(u);if(c){var v=this.getLineAxisCfg(e,i,a);Et(v,lo),c.component.update(v),t.set(u,c)}else c=this.createLineAxis(e,i,o,a,s),this.cache.set(u,c),t.set(u,c);var g=this.cache.get(f);if(g){var v=this.getLineGridCfg(e,i,a,s);Et(v,lo),g.component.update(v),t.set(f,g)}else g=this.createLineGrid(e,i,o,a,s),g&&(this.cache.set(f,g),t.set(f,g))}else if(l.isPolar){var c=this.cache.get(u);if(c){var v=l.isTransposed?this.getLineAxisCfg(e,i,gt.RADIUS):this.getCircleAxisCfg(e,i,a);Et(v,lo),c.component.update(v),t.set(u,c)}else{if(l.isTransposed){if((0,h.isUndefined)(i))return;c=this.createLineAxis(e,i,o,gt.RADIUS,s)}else c=this.createCircleAxis(e,i,o,a,s);this.cache.set(u,c),t.set(u,c)}var g=this.cache.get(f);if(g){var v=l.isTransposed?this.getCircleGridCfg(e,i,gt.RADIUS,s):this.getLineGridCfg(e,i,gt.CIRCLE,s);Et(v,lo),g.component.update(v),t.set(f,g)}else{if(l.isTransposed){if((0,h.isUndefined)(i))return;g=this.createCircleGrid(e,i,o,gt.RADIUS,s)}else g=this.createLineGrid(e,i,o,gt.CIRCLE,s);g&&(this.cache.set(f,g),t.set(f,g))}}}}},r.prototype.updateYAxes=function(t){var e=this,i=this.view.getYScales();(0,h.each)(i,function(a,o){if(!(!a||a.isIdentity)){var s=a.field,l=lr(e.option,s);if(l!==!1){var u=mt.BG,f="y",c=e.getId("axis",s),v=e.getId("grid",s),g=e.view.getCoordinate();if(g.isRect){var C=Fr(l,o===0?gt.LEFT:gt.RIGHT),O=e.cache.get(c);if(O){var F=e.getLineAxisCfg(a,l,C);Et(F,lo),O.component.update(F),t.set(c,O)}else O=e.createLineAxis(a,l,u,C,f),e.cache.set(c,O),t.set(c,O);var G=e.cache.get(v);if(G){var F=e.getLineGridCfg(a,l,C,f);Et(F,lo),G.component.update(F),t.set(v,G)}else G=e.createLineGrid(a,l,u,C,f),G&&(e.cache.set(v,G),t.set(v,G))}else if(g.isPolar){var O=e.cache.get(c);if(O){var F=g.isTransposed?e.getCircleAxisCfg(a,l,gt.CIRCLE):e.getLineAxisCfg(a,l,gt.RADIUS);Et(F,lo),O.component.update(F),t.set(c,O)}else{if(g.isTransposed){if((0,h.isUndefined)(l))return;O=e.createCircleAxis(a,l,u,gt.CIRCLE,f)}else O=e.createLineAxis(a,l,u,gt.RADIUS,f);e.cache.set(c,O),t.set(c,O)}var G=e.cache.get(v);if(G){var F=g.isTransposed?e.getLineGridCfg(a,l,gt.CIRCLE,f):e.getCircleGridCfg(a,l,gt.RADIUS,f);Et(F,lo),G.component.update(F),t.set(v,G)}else{if(g.isTransposed){if((0,h.isUndefined)(l))return;G=e.createLineGrid(a,l,u,gt.CIRCLE,f)}else G=e.createCircleGrid(a,l,u,gt.RADIUS,f);G&&(e.cache.set(v,G),t.set(v,G))}}}}})},r.prototype.createLineAxis=function(t,e,i,a,o){var s={component:new hn(this.getLineAxisCfg(t,e,a)),layer:i,direction:a===gt.RADIUS?gt.NONE:a,type:Vt.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},r.prototype.createLineGrid=function(t,e,i,a,o){var s=this.getLineGridCfg(t,e,a,o);if(s){var l={component:new Cn(s),layer:i,direction:gt.NONE,type:Vt.GRID,extra:{dim:o,scale:t,alignTick:(0,h.get)(s,"alignTick",!0)}};return l.component.init(),l}},r.prototype.createCircleAxis=function(t,e,i,a,o){var s={component:new mn(this.getCircleAxisCfg(t,e,a)),layer:i,direction:a,type:Vt.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},r.prototype.createCircleGrid=function(t,e,i,a,o){var s=this.getCircleGridCfg(t,e,a,o);if(s){var l={component:new Xn(s),layer:i,direction:gt.NONE,type:Vt.GRID,extra:{dim:o,scale:t,alignTick:(0,h.get)(s,"alignTick",!0)}};return l.component.init(),l}},r.prototype.getLineAxisCfg=function(t,e,i){var a=this.axisContainer,o=this.view.getCoordinate(),s=hr(o,i),l=Kr(t,e),u=yr(this.view.getTheme(),i),f=(0,h.get)(e,["title"])?(0,h.deepMix)({title:{style:{text:l}}},e):e,c=(0,h.deepMix)((0,B.__assign)((0,B.__assign)({container:a},s),{ticks:t.getTicks().map(function($){return{id:""+$.tickValue,name:$.text,value:$.value}}),verticalFactor:o.isPolar?Sr(s,o.getCenter())*-1:Sr(s,o.getCenter())}),u,f),v=this.getAnimateCfg(c),g=v.animate,C=v.animateOption;c.animateOption=C,c.animate=g;var O=fr(s),F=(0,h.get)(c,"verticalLimitLength",O?1/3:1/2);if(F<=1){var G=this.view.getCanvas().get("width"),Y=this.view.getCanvas().get("height");c.verticalLimitLength=F*(O?G:Y)}return c},r.prototype.getLineGridCfg=function(t,e,i,a){if(!!Ov(yr(this.view.getTheme(),i),e)){var o=kv(this.view.getTheme(),i),s=(0,h.deepMix)({container:this.gridContainer},o,(0,h.get)(e,"grid"),this.getAnimateCfg(e));return s.items=dl(this.view.getCoordinate(),t,a,(0,h.get)(s,"alignTick",!0)),s}},r.prototype.getCircleAxisCfg=function(t,e,i){var a=this.axisContainer,o=this.view.getCoordinate(),s=t.getTicks().map(function(O){return{id:""+O.tickValue,name:O.text,value:O.value}});!t.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.pop();var l=Kr(t,e),u=yr(this.view.getTheme(),gt.CIRCLE),f=(0,h.get)(e,["title"])?(0,h.deepMix)({title:{style:{text:l}}},e):e,c=(0,h.deepMix)((0,B.__assign)((0,B.__assign)({container:a},Or(this.view.getCoordinate())),{ticks:s,verticalFactor:1}),u,f),v=this.getAnimateCfg(c),g=v.animate,C=v.animateOption;return c.animate=g,c.animateOption=C,c},r.prototype.getCircleGridCfg=function(t,e,i,a){if(!!Ov(yr(this.view.getTheme(),i),e)){var o=kv(this.view.getTheme(),gt.RADIUS),s=(0,h.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,(0,h.get)(e,"grid"),this.getAnimateCfg(e)),l=(0,h.get)(s,"alignTick",!0),u=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=Mh(this.view.getCoordinate(),u,t,l,a),s}},r.prototype.getId=function(t,e){var i=this.view.getCoordinate();return t+"-"+e+"-"+i.type},r.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,h.get)(t,"animate"),animateOption:t&&t.animateOption?(0,h.deepMix)({},Bv,t.animateOption):Bv}},r}(zo),y2=g2;function pl(n,r,t){return t===gt.TOP?[n.minX+n.width/2-r.width/2,n.minY]:t===gt.BOTTOM?[n.minX+n.width/2-r.width/2,n.maxY-r.height]:t===gt.LEFT?[n.minX,n.minY+n.height/2-r.height/2]:t===gt.RIGHT?[n.maxX-r.width,n.minY+n.height/2-r.height/2]:t===gt.TOP_LEFT||t===gt.LEFT_TOP?[n.tl.x,n.tl.y]:t===gt.TOP_RIGHT||t===gt.RIGHT_TOP?[n.tr.x-r.width,n.tr.y]:t===gt.BOTTOM_LEFT||t===gt.LEFT_BOTTOM?[n.bl.x,n.bl.y-r.height]:t===gt.BOTTOM_RIGHT||t===gt.RIGHT_BOTTOM?[n.br.x-r.width,n.br.y-r.height]:[0,0]}function m2(n,r){if(r.isTransposed)switch(n){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return n}function Dv(n){return n===DIRECTION.LEFT?DIRECTION.RIGHT:n===DIRECTION.RIGHT?DIRECTION.LEFT:n}function Fv(n){return n===DIRECTION.TOP?DIRECTION.BOTTOM:n===DIRECTION.BOTTOM?DIRECTION.TOP:n}function x2(n,r){var t=r.matrix[0],e=r.matrix[4],i=n;return t<0&&(i=Dv(i)),e<0&&(i=Fv(i)),i}function b2(n,r){var t=n;return r.isReflect("x")&&(t=Dv(t)),r.isReflect("y")&&(t=Fv(t)),t}function XY(n,r){var t=n;return t=m2(t,r),t=x2(t,r),t=b2(t,r),t}function Rv(n,r,t){if(!n)return t;var e;if(n.callback&&n.callback.length>1){var i=Array(n.callback.length-1).fill("");e=n.mapping.apply(n,(0,B.__spreadArrays)([r],i)).join("")}else e=n.mapping(r).join("");return e||t}function Nv(n){var r=n.symbol;(0,h.isString)(r)&&To[r]&&(n.symbol=To[r])}function Eh(n){return n.startsWith(gt.LEFT)||n.startsWith(gt.RIGHT)?"vertical":"horizontal"}function w2(n,r,t,e,i){var a=t.getScale(t.type);if(a.isCategory){var o=a.field,s=r.getAttribute("color"),l=r.getAttribute("shape"),u=n.getTheme().defaultColor,f=r.coordinate.isPolar;return a.getTicks().map(function(c){var v,g=c.text,C=c.value,O=g,F=a.invert(C),G=n.filterFieldData(o,[(v={},v[o]=F,v)]).length===0,Y=Rv(s,F,u),$=Rv(l,F,"point"),q=r.getShapeMarker($,{color:Y,isInPolar:f});return q=(0,h.deepMix)({},e,q,i),Nv(q),{id:F,name:O,value:F,marker:q,unchecked:G}})}return[]}function S2(n,r,t){return t.map(function(e){var i=(0,h.deepMix)({},n,r,e.marker);return Nv(i),e.marker=i,e})}function Yv(n,r){return(0,h.isBoolean)(n)?n===!1?!1:{}:(0,h.get)(n,[r],n)}function xs(n){return(0,h.get)(n,"position",gt.BOTTOM)}var C2=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.container=e.view.getLayer(mt.FORE).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){var t=this;this.option=this.view.getOptions().legends;var e=function(s,l,u){var f=t.createFieldLegend(s,l,u);f&&(f.component.init(),t.components.push(f))};if((0,h.get)(this.option,"custom")){var i=this.createCustomLegend(void 0,void 0,void 0,this.option);if(i){i.init();var a=mt.FORE,o=xs(this.option);this.components.push({id:"global-custom",component:i,layer:a,direction:o,type:Vt.LEGEND,extra:void 0})}}else this.loopLegends(e)},r.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox;var e=(0,h.get)(this.view.getTheme(),["components","legend","margin"],[0,0,0,0]);(0,h.each)(this.components,function(i){var a=i.component,o=i.direction,s=Eh(o),l=t.getCategoryLegendSizeCfg(s),u=a.get("maxWidth"),f=a.get("maxHeight");a.update({maxWidth:Math.min(l.maxWidth,u||0),maxHeight:Math.min(l.maxHeight,f||0)});var c=a.getLayoutBBox(),v=new rt(c.x,c.y,c.width,c.height),g=pl(t.view.viewBBox,v,o),C=g[0],O=g[1],F=pl(t.layoutBBox,v,o),G=F[0],Y=F[1],$=0,q=0;o.startsWith("top")||o.startsWith("bottom")?($=C,q=Y):($=G,q=O),o.indexOf("left")>=0&&($+=e[3]),o.indexOf("right")>=0&&($-=e[1]),o.indexOf("top")>=0&&(q+=e[0]),o.indexOf("bottom")>=0&&(q-=e[2]),a.update({x:$,y:q}),t.layoutBBox=t.layoutBBox.cut(v,o)})},r.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={},i=function(v,g,C){var O=t.getId(C.field),F=t.getComponentById(O);if(F){var G=void 0,Y=Yv(t.option,C.field);Y!==!1&&((0,h.get)(Y,"custom")?G=t.getCategoryCfg(v,g,C,Y,!0):C.isLinear?G=t.getContinuousCfg(v,g,C,Y):C.isCategory&&(G=t.getCategoryCfg(v,g,C,Y))),G&&(Et(G,["container"]),F.direction=xs(Y),F.component.update(G),e[O]=!0)}else{var $=t.createFieldLegend(v,g,C);$&&($.component.init(),t.components.push($),e[O]=!0)}};if((0,h.get)(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Et(s,["container"]),o.component.update(s),e[a]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var u=mt.FORE,f=xs(this.option);this.components.push({id:a,component:l,layer:u,direction:f,type:Vt.LEGEND,extra:void 0}),e[a]=!0}}}else this.loopLegends(i);var c=[];(0,h.each)(this.getComponents(),function(v){e[v.id]?c.push(v):v.component.destroy()}),this.components=c},r.prototype.clear=function(){n.prototype.clear.call(this),this.container.clear()},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.container.remove(!0)},r.prototype.getGeometries=function(t){var e=this,i=t.geometries;return(0,h.each)(t.views,function(a){i=i.concat(e.getGeometries(a))}),i},r.prototype.loopLegends=function(t){var e=this.view.getRootView()===this.view;if(!!e){var i=this.getGeometries(this.view),a={};(0,h.each)(i,function(o){var s=o.getGroupAttributes();(0,h.each)(s,function(l){var u=l.getScale(l.type);!u||u.type==="identity"||a[u.field]||(t(o,l,u),a[u.field]=!0)})})}},r.prototype.createFieldLegend=function(t,e,i){var a,o=Yv(this.option,i.field),s=mt.FORE,l=xs(o);if(o!==!1&&((0,h.get)(o,"custom")?a=this.createCustomLegend(t,e,i,o):i.isLinear?a=this.createContinuousLegend(t,e,i,o):i.isCategory&&(a=this.createCategoryLegend(t,e,i,o))),a)return a.set("field",i.field),{id:this.getId(i.field),component:a,layer:s,direction:l,type:Vt.LEGEND,extra:{scale:i}}},r.prototype.createCustomLegend=function(t,e,i,a){var o=this.getCategoryCfg(t,e,i,a,!0);return new Xt(o)},r.prototype.createContinuousLegend=function(t,e,i,a){var o=this.getContinuousCfg(t,e,i,a);return new $t(o)},r.prototype.createCategoryLegend=function(t,e,i,a){var o=this.getCategoryCfg(t,e,i,a);return new Xt(o)},r.prototype.getContinuousCfg=function(t,e,i,a){var o=i.getTicks(),s=(0,h.find)(o,function(O){return O.value===0}),l=(0,h.find)(o,function(O){return O.value===1}),u=o.map(function(O){var F=O.value,G=O.tickValue,Y=e.mapping(i.invert(F)).join("");return{value:G,attrValue:Y,color:Y,scaleValue:F}});s||u.push({value:i.min,attrValue:e.mapping(i.invert(0)).join(""),color:e.mapping(i.invert(0)).join(""),scaleValue:0}),l||u.push({value:i.max,attrValue:e.mapping(i.invert(1)).join(""),color:e.mapping(i.invert(1)).join(""),scaleValue:1}),u.sort(function(O,F){return O.value-F.value});var f={min:(0,h.head)(u).value,max:(0,h.last)(u).value,colors:[],rail:{type:e.type},track:{}};e.type==="size"&&(f.track={style:{fill:e.type==="size"?this.view.getTheme().defaultColor:void 0}}),e.type==="color"&&(f.colors=u.map(function(O){return O.attrValue}));var c=this.container,v=xs(a),g=Eh(v),C=(0,h.get)(a,"title");return C&&(C=(0,h.deepMix)({text:Le(i)},C)),f.container=c,f.layout=g,f.title=C,f.animateOption=Xo,this.mergeLegendCfg(f,a,"continuous")},r.prototype.getCategoryCfg=function(t,e,i,a,o){var s=this.container,l=(0,h.get)(a,"position",gt.BOTTOM),u=(0,h.get)(this.view.getTheme(),["components","legend",l,"marker"]),f=(0,h.get)(a,"marker"),c=Eh(l),v=o?S2(u,f,a.items):w2(this.view,t,e,u,f),g=(0,h.get)(a,"title");g&&(g=(0,h.deepMix)({text:i?Le(i):""},g));var C=this.getCategoryLegendSizeCfg(c);C.container=s,C.layout=c,C.items=v,C.title=g,C.animateOption=Xo;var O=this.mergeLegendCfg(C,a,l);O.reversed&&O.items.reverse();var F=(0,h.get)(O,"maxItemWidth");return F&&F<=1&&(O.maxItemWidth=this.view.viewBBox.width*F),O},r.prototype.mergeLegendCfg=function(t,e,i){var a=i.split("-")[0],o=(0,h.get)(this.view.getTheme(),["components","legend",a],{});return(0,h.deepMix)({},o,t,e)},r.prototype.getId=function(t){return this.name+"-"+t},r.prototype.getComponentById=function(t){return(0,h.find)(this.components,function(e){return e.id===t})},r.prototype.getCategoryLegendSizeCfg=function(t){var e=this.view.viewBBox,i=e.width,a=e.height;return t==="vertical"?{maxWidth:i*st,maxHeight:a}:{maxWidth:i,maxHeight:a*st}},r}(zo),M2=C2,E2=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.onValueChanged=function(i){var a=i[0],o=i[1];e.updateMinMaxText(a,o),e.view.render(!0)},e.container=e.view.getLayer(mt.FORE).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){if(this.option=this.view.getOptions().slider,this.option){this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onValueChanged));var t=this.slider.component.get("start")||0,e=this.slider.component.get("end")||1;this.updateMinMaxText(t,e)}else this.slider&&(this.slider.component.destroy(),this.slider=void 0)},r.prototype.layout=function(){if(this.slider){var t=this.view.coordinateBBox.width,e=this.slider.component.getLayoutBBox(),i=new rt(e.x,e.y,Math.min(e.width,t),e.height),a=pl(this.view.viewBBox,i,gt.BOTTOM),o=a[0],s=a[1],l=pl(this.view.coordinateBBox,i,gt.BOTTOM),u=l[0],f=l[1];this.slider.component.update({x:u,y:s,width:t})}},r.prototype.update=function(){this.render()},r.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new gi.Slider((0,B.__assign)({container:this.container},t));return e.init(),{component:e,layer:mt.FORE,direction:gt.BOTTOM,type:Vt.OTHER}},r.prototype.updateSlider=function(){var t=this.getSliderCfg();return Et(t,["x","y","width","start","end","minText","maxText"]),this.slider.component.update(t),this.slider},r.prototype.getSliderCfg=function(){if((0,h.isObject)(this.option)){var t=(0,B.__assign)({data:this.getData()},(0,h.get)(this.option,"trendCfg",{})),e=0,i=0,a=this.view.coordinateBBox.width,o=(0,h.deepMix)({},{x:e,y:i,width:a},this.option);return(0,B.__assign)((0,B.__assign)({},o),{trendCfg:t})}return{}},r.prototype.getData=function(){var t=this.view.getOptions().data,e=this.view.getYScales()[0],i=this.view.getGroupScales();if(i.length){var a=i[0],o=a.field,s=a.ticks;return t.reduce(function(l,u){return u[o]===s[0]&&l.push(u[e.field]),l},[])}return t.map(function(l){return l[e.field]||0})},r.prototype.updateMinMaxText=function(t,e){var i=this.view.getOptions().data,a=this.view.getXScale(),o=(0,h.size)(i);if(!(!a||!o)){var s=a.field,l=i.reduce(function(O,F){return O.includes(F[s])||O.push(F[s]),O},[]),u=(0,h.size)(l),f=Math.floor(t*(u-1)),c=Math.floor(e*(u-1)),v=(0,h.get)(l,[f]),g=(0,h.get)(l,[c]),C=this.getSliderCfg().formatter;C&&(v=C(v,i[f],f),g=C(g,i[c],c)),this.slider.component.update({minText:v,maxText:g,start:t,end:e}),this.view.filter(a.field,function(O,F){var G=l.indexOf(O);return G>-1?pn(G,f,c):!0})}},r.prototype.getComponents=function(){return this.slider?[this.slider]:[]},r}(zo),A2=E2;function T2(n){for(var r=[],t=function(i){var a=n[i],o=(0,h.find)(r,function(s){return s.color===a.color&&s.name===a.name&&s.value===a.value&&s.title===a.title});o||r.push(a)},e=0;e<n.length;e++)t(e);return r}var _2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},r.prototype.render=function(){},r.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var e=this.view,i=this.getTooltipItems(t);if(!i.length){this.hideTooltip();return}var a=this.getTitle(i),o={x:i[0].x,y:i[0].y};e.emit("tooltip:show",(0,B.__assign)({items:i,title:a},t));var s=this.getTooltipCfg(),l=s.follow,u=s.showMarkers,f=s.showCrosshairs,c=s.showContent,v=s.marker,g=this.items,C=this.title;if(!(0,h.isEqual)(C,a)||!(0,h.isEqual)(g,i)?(e.emit("tooltip:change",(0,B.__assign)({items:i,title:a},t)),c&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,h.mix)({},s,{items:i,title:a},l?t:{})),this.tooltip.show()),u&&this.renderTooltipMarkers(i,v)):(this.tooltip&&l&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=i,this.title=a,f){var O=(0,h.get)(s,["crosshairs","follow"],!1);this.renderCrosshairs(O?t:o,s)}}},r.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var e=this.tooltipMarkersGroup;e&&e.hide();var i=this.xCrosshair,a=this.yCrosshair;i&&i.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",{}),this.point=null},r.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},r.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},r.prototype.isTooltipLocked=function(){return this.isLocked},r.prototype.clear=function(){var t=this,e=t.tooltip,i=t.xCrosshair,a=t.yCrosshair,o=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),i&&i.clear(),a&&a.clear(),o&&o.clear()},r.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},r.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,i=e.tooltip,a=e.tooltipMarkersGroup,o=e.xCrosshair,s=e.yCrosshair;t?(i&&i.show(),a&&a.show(),o&&o.show(),s&&s.show()):(i&&i.hide(),a&&a.hide(),o&&o.hide(),s&&s.hide()),this.visible=t}},r.prototype.getTooltipItems=function(t){var e=this.findItemsFromView(this.view,t);if(e.length){e=(0,h.flatten)(e);for(var i=0,a=e;i<a.length;i++)for(var o=a[i],s=0,l=o;s<l.length;s++){var u=l[s],f=u.mappingData,c=f.x,v=f.y;u.x=(0,h.isArray)(c)?c[c.length-1]:c,u.y=(0,h.isArray)(v)?v[v.length-1]:v}var g=this.getTooltipCfg().shared;if(g===!1&&e.length>1){for(var C=e[0],O=Math.abs(t.y-C[0].y),F=0,G=e;F<G.length;F++){var Y=G[F],$=Math.abs(t.y-Y[0].y);$<=O&&(C=Y,O=$)}e=[C]}return T2((0,h.flatten)(e))}return[]},r.prototype.layout=function(){},r.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},r.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,i=t.getTheme(),a=(0,h.get)(i,["components","tooltip"],{}),o=(0,h.isUndefined)((0,h.get)(e,"enterable"))?a.enterable:(0,h.get)(e,"enterable");return(0,h.deepMix)({},a,e,{capture:!!(o||this.isLocked)})},r.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},r.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},i=this.getTooltipCfg(),a=new he((0,B.__assign)((0,B.__assign)({parent:t.get("el").parentNode,region:e},i),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},r.prototype.renderTooltipMarkers=function(t,e){for(var i=this.getTooltipMarkersGroup(),a=0,o=t;a<o.length;a++){var s=o[a],l=s.x,u=s.y,f=(0,B.__assign)((0,B.__assign)({fill:s.color,symbol:"circle",shadowColor:s.color},e),{x:l,y:u});i.addShape("marker",{attrs:f})}},r.prototype.renderCrosshairs=function(t,e){var i=(0,h.get)(e,["crosshairs","type"],"x");i==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):i==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):i==="xy"&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},r.prototype.renderXCrosshairs=function(t,e){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!Zt(i,t)){var a,o;if(i.isRect)i.isTransposed?(a={x:i.start.x,y:t.y},o={x:i.end.x,y:t.y}):(a={x:t.x,y:i.end.y},o={x:t.x,y:i.start.y});else{var s=de(i,t),l=i.getCenter(),u=i.getRadius();o=oi(l.x,l.y,u,s),a=l}var f=(0,h.deepMix)({start:a,end:o,container:this.getTooltipCrosshairsGroup()},(0,h.get)(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete f.type;var c=this.xCrosshair;c?c.update(f):(c=new gi.Crosshair.Line(f),c.init()),c.render(),c.show(),this.xCrosshair=c}},r.prototype.renderYCrosshairs=function(t,e){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!Zt(i,t)){var a,o;if(i.isRect){var s=void 0,l=void 0;i.isTransposed?(s={x:t.x,y:i.end.y},l={x:t.x,y:i.start.y}):(s={x:i.start.x,y:t.y},l={x:i.end.x,y:t.y}),a={start:s,end:l},o="Line"}else a={center:i.getCenter(),radius:Ot(i,t),startAngle:i.startAngle,endAngle:i.endAngle},o="Circle";a=(0,h.deepMix)({container:this.getTooltipCrosshairsGroup()},a,(0,h.get)(e,"crosshairs",{}),this.getCrosshairsText("y",t,e)),delete a.type;var u=this.yCrosshair;u?i.isRect&&u.get("type")==="circle"||!i.isRect&&u.get("type")==="line"?(u=new gi.Crosshair[o](a),u.init()):u.update(a):(u=new gi.Crosshair[o](a),u.init()),u.render(),u.show(),this.yCrosshair=u}},r.prototype.getCrosshairsText=function(t,e,i){var a=(0,h.get)(i,["crosshairs","text"]),o=(0,h.get)(i,["crosshairs","follow"]),s=this.items;if(a){var l=this.getViewWithGeometry(this.view),u=s[0],f=l.getXScale(),c=l.getYScales()[0],v=void 0,g=void 0;if(o){var C=this.view.getCoordinate().invert(e);v=f.invert(C.x),g=c.invert(C.y)}else v=u.data[f.field],g=u.data[c.field];var O=t==="x"?v:g;return(0,h.isFunction)(a)?a=a(t,O,s,e):a.content=O,{text:a}}},r.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},r.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},r.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},r.prototype.getTooltipItemsByHitShape=function(t,e,i){var a=[],o=t.container,s=o.getShape(e.x,e.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,u=mi(l,t,i);u.length&&a.push(u)}return a},r.prototype.getTooltipItemsByFindData=function(t,e,i){var a=[],o=t.dataArray;t.sort(o);for(var s=0,l=o;s<l.length;s++){var u=l[s],f=Gr(e,u,t);if(f){var c=t.getElementId(f),v=t.elementsMap[c];if(t.type==="heatmap"||v.visible){var g=mi(f,t,i);g.length&&a.push(g)}}}return a},r.prototype.findItemsFromView=function(t,e){if(t.getOptions().tooltip===!1)return[];for(var i=[],a=t.geometries,o=this.getTooltipCfg(),s=o.shared,l=o.title,u=0,f=a;u<f.length;u++){var c=f[u];if(c.visible&&c.tooltipOption!==!1){var v=c.type,g=void 0;["point","edge","polygon"].includes(v)?g=this.getTooltipItemsByHitShape(c,e,l):["area","line","path","heatmap"].includes(v)?g=this.getTooltipItemsByFindData(c,e,l):s!==!1?g=this.getTooltipItemsByFindData(c,e,l):g=this.getTooltipItemsByHitShape(c,e,l),g.length&&i.push(g)}}for(var C=0,O=t.views;C<O.length;C++){var F=O[C];i=i.concat(this.findItemsFromView(F,e))}return i},r.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:(0,h.find)(t.views,function(i){return e.getViewWithGeometry(i)})},r}(zo),P2=_2,L2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.show=function(){var t=this.context.view,e=this.context.event,i=t.getTooltipItems({x:e.x,y:e.y});if(!(0,h.isEqual)(i,this.items)&&(this.items=i,i.length)){var a=t.getXScale().field,o=i[0].data[a],s=[],l=t.geometries;if((0,h.each)(l,function(Te){if(Te.type==="interval"||Te.type==="schema"){var Be=Te.getElementsBy(function(ke){var Qe=ke.getData();return Qe[a]===o});s=s.concat(Be)}}),s.length){var u=t.getCoordinate(),f=s[0].shape.getCanvasBBox(),c=s[0].shape.getCanvasBBox(),v=f;(0,h.each)(s,function(Te){var Be=Te.shape.getCanvasBBox();u.isTransposed?(Be.minY<f.minY&&(f=Be),Be.maxY>c.maxY&&(c=Be)):(Be.minX<f.minX&&(f=Be),Be.maxX>c.maxX&&(c=Be)),v.x=Math.min(Be.minX,v.minX),v.y=Math.min(Be.minY,v.minY),v.width=Math.max(Be.maxX,v.maxX)-v.x,v.height=Math.max(Be.maxY,v.maxY)-v.y});var g=t.backgroundGroup,C=t.coordinateBBox,O=void 0;if(u.isRect){var F=t.getXScale(),G=F.isLinear?0:.25,Y=void 0,$=void 0,q=void 0,ut=void 0;u.isTransposed?(Y=C.minX,$=Math.min(c.minY,f.minY)-G*c.height,q=C.width,ut=v.height+G*2*c.height):(Y=Math.min(f.minX,c.minX)-G*f.width,$=Math.min(C.minY,f.minY),q=v.width+G*2*f.width,ut=C.height),O=[["M",Y,$],["L",Y+q,$],["L",Y+q,$+ut],["L",Y,$+ut],["Z"]]}else{var kt=(0,h.head)(s),Nt=(0,h.last)(s),Wt=qi(kt.getModel(),u).startAngle,Ft=qi(Nt.getModel(),u).endAngle,ee=u.getCenter(),ve=u.getRadius(),fe=u.innerRadius*ve;O=di(ee.x,ee.y,ve,Wt,Ft,fe)}this.regionPath?(this.regionPath.attr("path",O),this.regionPath.show()):this.regionPath=g.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:O,fill:"#CCD6EC",opacity:.3}})}}},r.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},r.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),n.prototype.destroy.call(this)},r}(me),I2=L2,k2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.timeStamp=0,t}return r.prototype.show=function(){var t=this.context,e=t.event,i=t.view,a=i.isTooltipLocked();if(!a){var o=this.timeStamp,s=+new Date;if(s-o>16){var l=this.location,u={x:e.x,y:e.y};(!l||!(0,h.isEqual)(l,u))&&this.showTooltip(i,u),this.timeStamp=s,this.location=u}}},r.prototype.hide=function(){var t=this.context.view,e=t.isTooltipLocked();e||(this.hideTooltip(t),this.location=null)},r.prototype.showTooltip=function(t,e){t.showTooltip(e)},r.prototype.hideTooltip=function(t){t.hideTooltip()},r}(me),Gv=k2,O2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.showTooltip=function(t,e){var i=xn(t);(0,h.each)(i,function(a){var o=ea(t,a,e);a.showTooltip(o)})},r.prototype.hideTooltip=function(t){var e=xn(t);(0,h.each)(e,function(i){i.hideTooltip()})},r}(Gv),B2=O2,D2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.timeStamp=0,t}return r.prototype.destroy=function(){n.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},r.prototype.show=function(){var t=this.context,e=t.event,i=this.timeStamp,a=+new Date;if(a-i>16){var o=this.location,s={x:e.x,y:e.y};(!o||!(0,h.isEqual)(o,s))&&this.showTooltip(s),this.timeStamp=a,this.location=s}},r.prototype.hide=function(){this.hideTooltip(),this.location=null},r.prototype.showTooltip=function(t){var e=this.context,i=e.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update((0,B.__assign)({title:o},t)),this.tooltip.show()}},r.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},r.prototype.renderTooltip=function(){var t=this.context.view,e=t.canvas,i={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},a=t.getTheme(),o=(0,h.get)(a,["components","tooltip","domStyles"],{}),s=new he({parent:e.get("el").parentNode,region:i,visible:!1,crosshairs:null,domStyles:o});s.init(),s.setCapture(!1),this.tooltip=s},r}(me),F2=D2,R2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="",t}return r.prototype.hasState=function(t){return t.hasState(this.stateName)},r.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},r.prototype.clearViewState=function(t){var e=this,i=Jr(t,this.stateName);(0,h.each)(i,function(a){e.setElementState(a,!1)})},r}(me),Ah=R2;function zv(n){return(0,h.get)(n.get("delegateObject"),"item")}var N2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return r.prototype.isItemIgnore=function(t,e){var i=this.ignoreListItemStates,a=i.filter(function(o){return e.hasState(t,o)});return!!a.length},r.prototype.setStateByComponent=function(t,e,i){var a=this.context.view,o=t.get("field"),s=cr(a);this.setElementsStateByItem(s,o,e,i)},r.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},r.prototype.isMathItem=function(t,e,i){var a=this.context.view,o=fa(a,e),s=$r(t,e);return!(0,h.isNil)(s)&&i.name===o.getText(s)},r.prototype.setElementsStateByItem=function(t,e,i,a){var o=this;(0,h.each)(t,function(s){o.isMathItem(s,e,i)&&s.setState(o.stateName,a)})},r.prototype.setStateEnable=function(t){var e=ae(this.context);if(e)Oe(this.context)&&this.setStateByElement(e,t);else{var i=ne(this.context);if(Ie(i)){var a=i.item,o=i.component;if(a&&o&&!this.isItemIgnore(a,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&zv(s.fromShape)===zv(s.toShape))return;this.setStateByComponent(o,a,t)}}}},r.prototype.toggle=function(){var t=ae(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(Ah),Th=N2,Y2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(Th),G2=Y2,z2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.cache={},t}return r.prototype.getColorScale=function(t,e){var i=e.geometry.getAttribute("color");if(!i)return null;var a=t.getScaleByField(i.getFields()[0]);return a},r.prototype.getLinkPath=function(t,e){var i=t.shape.getCanvasBBox(),a=e.shape.getCanvasBBox(),o=[["M",i.maxX,i.minY],["L",a.minX,a.minY],["L",a.minX,a.maxY],["L",i.maxX,i.maxY],["Z"]];return o},r.prototype.addLinkShape=function(t,e,i){t.addShape({type:"path",attrs:{opacity:.4,fill:e.shape.attr("fill"),path:this.getLinkPath(e,i)}})},r.prototype.linkByElement=function(t){var e=this,i=this.context.view,a=this.getColorScale(i,t);if(!!a){var o=$r(t,a.field);if(!this.cache[o]){var s=Rr(i,a.field,o),l=this.linkGroup,u=l.addGroup();this.cache[o]=u;var f=s.length;(0,h.each)(s,function(c,v){if(v<f-1){var g=s[v+1];e.addLinkShape(u,c,g)}})}}},r.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(!!e){var i=$r(t,e.field);this.cache[i]&&(this.cache[i].remove(),this.cache[i]=null)}},r.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var e=ae(t);e&&this.linkByElement(e)},r.prototype.unlink=function(){var t=ae(this.context);t&&this.removeLink(t)},r.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear()},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},r}(me),X2=z2,V2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return r.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},r.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},r.prototype.getIntersectElements=function(){var t=null;if(or(this.context))t=nr(this.context,10);else{var e=this.startPoint,i=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!i)return;var a={minX:Math.min(e.x,i.x),minY:Math.min(e.y,i.y),maxX:Math.max(e.x,i.x),maxY:Math.max(e.y,i.y)},o=this.context.view;t=ur(o,a)}return t},r.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=cr(this.context.view),i=this.getIntersectElements();i&&i.length?this.effectByRecord?this.setSiblingsStateByRecord(i,t):this.setElementsState(i,t,e):this.clear()}},r.prototype.setSiblingsStateByRecord=function(t,e){var i=this,a=this.context.view,o=xn(a),s=t.map(function(f){return f.getModel().data}),l=a.getXScale().field,u=a.getYScales()[0].field;(0,h.each)(o,function(f){var c=cr(f),v=c.filter(function(g){var C=g.getModel().data;return _a(s,C,l,u)});i.setElementsState(v,e,c)})},r.prototype.setSiblingsState=function(t){var e=this,i=this.context.view,a=xn(i);or(this.context)&&(0,h.each)(a,function(o){var s=cr(o),l=ze(e.context,o,10);l&&l.length?e.setElementsState(l,t,s):e.clearViewState(o)})},r.prototype.setElementsState=function(t,e,i){var a=this;(0,h.each)(i,function(o){t.includes(o)?a.setElementState(o,e):a.setElementState(o,!1)})},r.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},r.prototype.clear=function(){var t=this,e=this.context.view;if(this.effectSiblings){var i=xn(e);(0,h.each)(i,function(a){t.clearViewState(a)})}else this.clearViewState(e)},r}(Ah),_h=V2,H2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(_h),W2=H2,j2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setStateEnable=function(t){var e=ae(this.context);if(e){if(!Oe(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},r.prototype.toggle=function(){var t=ae(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(Ah),Ph=j2,U2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(Ph),Z2=U2,bs="inactive",ws="active";function Lh(n){var r=cr(n);(0,h.each)(r,function(t){t.hasState(ws)&&t.setState(ws,!1),t.hasState(bs)&&t.setState(bs,!1)})}function Xv(n,r,t){(0,h.each)(n,function(e){r(e)?(e.hasState(bs)&&e.setState(bs,!1),e.setState(ws,t)):(e.hasState(ws)&&e.setState(ws,!1),e.setState(bs,t))})}var _o=oe.INACTIVE,Za=oe.ACTIVE,K2=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName=Za,t}return r.prototype.setElementsStateByItem=function(t,e,i,a){var o=this,s=function(l){return o.isMathItem(l,e,i)};this.setHighlightBy(t,s,a)},r.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(_o)&&t.setState(_o,!1),t.setState(Za,!0)):t.hasState(Za)||t.setState(_o,!0)},r.prototype.setHighlightBy=function(t,e,i){var a=this;if(i)(0,h.each)(t,function(l){a.setElementHighlight(l,e)});else{var o=Jr(this.context.view,Za),s=!0;(0,h.each)(o,function(l){if(!e(l))return s=!1,!1}),s?this.clear():(0,h.each)(t,function(l){e(l)&&(l.hasState(Za)&&l.setState(Za,!1),l.setState(_o,!0))})}},r.prototype.setElementState=function(t,e){var i=this.context.view,a=cr(i);this.setHighlightBy(a,function(o){return t===o},e)},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var t=this.context.view;Lh(t)},r}(Th),Ih=K2,$2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setStateByElement=function(t,e){var i=this.context.view,a=t.geometry.getAttribute("color");if(!!a){var o=i.getScaleByField(a.getFields()[0]),s=$r(t,o.field),l=cr(i),u=l.filter(function(f){return $r(f,o.field)===s});this.setHighlightBy(l,function(f){return u.includes(f)},e)}},r}(Ih),Q2=$2,J2=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(_o)&&t.setState(_o,!1),t.setState(Za,!0)):(t.setState(_o,!0),t.hasState(Za)&&t.setState(Za,!1))},r.prototype.setStateByElement=function(t,e){var i=this.context.view,a=i.getXScale(),o=$r(t,a.field),s=cr(i),l=s.filter(function(u){return $r(u,a.field)===o});this.setHighlightBy(s,function(u){return l.includes(u)},e)},r.prototype.toggle=function(){var t=ae(this.context);if(t){var e=t.hasState(this.stateName);this.setStateByElement(t,!e)}},r}(Ih),q2=J2,tM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.clearViewState=function(t){Lh(t)},r.prototype.highlight=function(){this.setState()},r.prototype.setElementsState=function(t,e,i){Xv(i,function(a){return t.indexOf(a)>=0},e)},r}(_h),Vv=tM,eM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.highlight=function(){this.setState()},r.prototype.setElementState=function(t,e){var i=this.context.view,a=cr(i);Xv(a,function(o){return t===o},e)},r.prototype.clear=function(){var t=this.context.view;Lh(t)},r}(Ph),rM=eM,iM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(_h),nM=iM,aM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(Th),oM=aM,sM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(Ph),lM=sM,uM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return r.prototype.getTriggerListInfo=function(){var t=ne(this.context),e=null;return Ie(t)&&(e={item:t.item,list:t.component}),e},r.prototype.getAllowComponents=function(){var t=this,e=this.context.view,i=Wi(e),a=[];return(0,h.each)(i,function(o){o.isList()&&t.allowSetStateByElement(o)&&a.push(o)}),a},r.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},r.prototype.clearAllComponentsState=function(){var t=this,e=this.getAllowComponents();(0,h.each)(e,function(i){i.clearItemsState(t.stateName)})},r.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var i=t.get("name");if(this.cfg.componentNames.indexOf(i)===-1)return!1}var a=this.context.view,o=fa(a,e);return o&&o.isCategory},r.prototype.allowSetStateByItem=function(t,e){var i=this.ignoreItemStates;if(i.length){var a=i.filter(function(o){return e.hasState(t,o)});return a.length===0}return!0},r.prototype.setStateByElement=function(t,e,i){var a=t.get("field"),o=this.context.view,s=fa(o,a),l=$r(e,a),u=s.getText(l);this.setItemsState(t,u,i)},r.prototype.setStateEnable=function(t){var e=this,i=ae(this.context);if(i){var a=this.getAllowComponents();(0,h.each)(a,function(u){e.setStateByElement(u,i,t)})}else{var o=ne(this.context);if(Ie(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,t)}}},r.prototype.setItemsState=function(t,e,i){var a=this,o=t.getItems();(0,h.each)(o,function(s){s.name===e&&a.setItemState(t,s,i)})},r.prototype.setItemState=function(t,e,i){t.setItemState(e,this.stateName,i)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.reset=function(){this.setStateEnable(!1)},r.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,i=t.item,a=this.hasState(e,i);this.setItemState(e,i,!a)}},r.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},r}(me),gl=uM,hM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(gl),fM=hM,Hv="inactive",Wv="active";function cM(n){var r=n.getItems();(0,h.each)(r,function(t){n.hasState(t,Wv)&&n.setItemState(t,Wv,!1),n.hasState(t,Hv)&&n.setItemState(t,Hv,!1)})}var Ss="inactive",Po="active",vM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName=Po,t.ignoreItemStates=["unchecked"],t}return r.prototype.setItemsState=function(t,e,i){this.setHighlightBy(t,function(a){return a.name===e},i)},r.prototype.setItemState=function(t,e,i){var a=t.getItems();this.setHighlightBy(t,function(o){return o===e},i)},r.prototype.setHighlightBy=function(t,e,i){var a=t.getItems();if(i)(0,h.each)(a,function(l){e(l)?(t.hasState(l,Ss)&&t.setItemState(l,Ss,!1),t.setItemState(l,Po,!0)):t.hasState(l,Po)||t.setItemState(l,Ss,!0)});else{var o=t.getItemsByState(Po),s=!0;(0,h.each)(o,function(l){if(!e(l))return s=!1,!1}),s?this.clear():(0,h.each)(a,function(l){e(l)&&(t.hasState(l,Po)&&t.setItemState(l,Po,!1),t.setItemState(l,Ss,!0))})}},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)cM(t.list);else{var e=this.getAllowComponents();(0,h.each)(e,function(i){i.clearItemsState(Po),i.clearItemsState(Ss)})}},r}(gl),kh=vM,dM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(gl),pM=dM,gM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.stateName="unchecked",t}return r.prototype.unchecked=function(){this.setState()},r}(gl),yM=gM,mM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return r.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},r.prototype.emitEvent=function(t){var e="mask:"+t,i=this.context.view,a=this.context.event;i.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},r.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs(),i=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,B.__assign)({fill:"#C5D4EB",opacity:.3},e)});return i},r.prototype.getMaskPath=function(){return[]},r.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},r.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},r.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},r.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),e=this.preMovePoint,i=t.x-e.x,a=t.y-e.y,o=this.points;(0,h.each)(o,function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},r.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},r.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},r.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},r.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},r.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},r.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,n.prototype.destroy.call(this)},r}(me),Oh=mM,xM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.shapeType="circle",t}return r.prototype.getMaskAttrs=function(){var t=this.points,e=(0,h.last)(this.points),i=0,a=0,o=0;if(t.length){var s=t[0];i=an(s,e)/2,a=(e.x+s.x)/2,o=(e.y+s.y)/2}return{x:a,y:o,r:i}},r}(Oh),bM=xM,wM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.shapeType="rect",t}return r.prototype.getRegion=function(){var t=this.points;return{start:(0,h.head)(t),end:(0,h.last)(t)}},r.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,i=t.end,a=Math.min(e.x,i.x),o=Math.min(e.y,i.y),s=Math.abs(i.x-e.x),l=Math.abs(i.y-e.y);return{x:a,y:o,width:s,height:l}},r}(Oh),jv=wM;function Uv(n){n.x=(0,h.clamp)(n.x,0,1),n.y=(0,h.clamp)(n.y,0,1)}var SM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return r.prototype.getRegion=function(){var t=null,e=null,i=this.points,a=this.dim,o=this.context.view.getCoordinate(),s=o.invert((0,h.head)(i)),l=o.invert((0,h.last)(i));return this.inPlot&&(Uv(s),Uv(l)),a==="x"?(t=o.convert({x:s.x,y:0}),e=o.convert({x:l.x,y:1})):(t=o.convert({x:0,y:s.y}),e=o.convert({x:1,y:l.y})),{start:t,end:e}},r}(jv),Zv=SM,CM=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){var t=this.points,e=[];return t.length&&((0,h.each)(t,function(i,a){a===0?e.push(["M",i.x,i.y]):e.push(["L",i.x,i.y])}),e.push(["L",t[0].x,t[0].y])),e},r.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},r.prototype.addPoint=function(){this.resize()},r}(Oh),Kv=CM,MM=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){var t=this.points;return oa(t,!0)},r}(Kv),EM=MM,AM=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.setCursor=function(t){var e=this.context.view;e.getCanvas().setCursor(t)},r.prototype.default=function(){this.setCursor("default")},r.prototype.pointer=function(){this.setCursor("pointer")},r.prototype.move=function(){this.setCursor("move")},r.prototype.crosshair=function(){this.setCursor("crosshair")},r.prototype.wait=function(){this.setCursor("wait")},r.prototype.help=function(){this.setCursor("help")},r.prototype.text=function(){this.setCursor("text")},r.prototype.eResize=function(){this.setCursor("e-resize")},r.prototype.wResize=function(){this.setCursor("w-resize")},r.prototype.nResize=function(){this.setCursor("n-resize")},r.prototype.sResize=function(){this.setCursor("s-resize")},r.prototype.neResize=function(){this.setCursor("ne-resize")},r.prototype.nwResize=function(){this.setCursor("nw-resize")},r.prototype.seResize=function(){this.setCursor("se-resize")},r.prototype.swResize=function(){this.setCursor("sw-resize")},r.prototype.nsResize=function(){this.setCursor("ns-resize")},r.prototype.ewResize=function(){this.setCursor("ew-resize")},r}(me),TM=AM,_M=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.filterView=function(t,e,i){var a=this;t.getScaleByField(e)&&t.filter(e,i),t.views&&t.views.length&&(0,h.each)(t.views,function(o){a.filterView(o,e,i)})},r.prototype.filter=function(){var t=ne(this.context);if(t){var e=this.context.view,i=t.component,a=i.get("field");if(Ie(t)){if(a){var o=i.getItemsByState("unchecked"),s=fa(e,a),l=o.map(function(v){return v.name});l.length?this.filterView(e,a,function(v){var g=s.getText(v);return!l.includes(g)}):this.filterView(e,a,null),e.render(!0)}}else if(De(t)){var u=i.getValue(),f=u[0],c=u[1];this.filterView(e,a,function(v){return v>=f&&v<=c}),e.render(!0)}}},r}(me),PM=_M;function $v(n,r,t,e){var i=Math.min(t[r],e[r]),a=Math.max(t[r],e[r]),o=n.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var u=n.invert(i),f=n.invert(a);if(n.isCategory){var c=n.values.indexOf(u),v=n.values.indexOf(f),g=n.values.slice(c,v+1);return function(C){return g.includes(C)}}else return function(C){return C>=u&&C<=f}}var LM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return r.prototype.hasDim=function(t){return this.dims.includes(t)},r.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},r.prototype.filter=function(){var t,e;if(or(this.context)){var i=this.context.event.target,a=i.getCanvasBBox();t={x:a.x,y:a.y},e={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var o=this.context.view,s=o.getCoordinate(),l=s.invert(e),u=s.invert(t);if(this.hasDim("x")){var f=o.getXScale(),c=$v(f,"x",l,u);this.filterView(o,f.field,c)}if(this.hasDim("y")){var v=o.getYScales()[0],c=$v(v,"y",l,u);this.filterView(o,v.field,c)}this.reRender(o)}},r.prototype.end=function(){this.isStarted=!1},r.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var i=t.getYScales()[0];this.filterView(t,i.field,null)}this.reRender(t)},r.prototype.filterView=function(t,e,i){t.filter(e,i)},r.prototype.reRender=function(t){t.render(!0)},r}(me),yl=LM,IM=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.filterView=function(t,e,i){var a=xn(t);(0,h.each)(a,function(o){o.filter(e,i)})},r.prototype.reRender=function(t){var e=xn(t);(0,h.each)(e,function(i){i.render(!0)})},r}(yl),Bh=IM,kM=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.filter=function(){var t=ne(this.context),e=this.context.view,i=cr(e);if(or(this.context)){var a=nr(this.context,10);a&&(0,h.each)(i,function(C){a.includes(C)?C.show():C.hide()})}else if(t){var o=t.component,s=o.get("field");if(Ie(t)){if(s){var l=o.getItemsByState("unchecked"),u=fa(e,s),f=l.map(function(C){return C.name});(0,h.each)(i,function(C){var O=$r(C,s),F=u.getText(O);f.indexOf(F)>=0?C.hide():C.show()})}}else if(De(t)){var c=o.getValue(),v=c[0],g=c[1];(0,h.each)(i,function(C){var O=$r(C,s);O>=v&&O<=g?C.show():C.hide()})}}},r.prototype.clear=function(){var t=cr(this.context.view);(0,h.each)(t,function(e){e.show()})},r.prototype.reset=function(){this.clear()},r}(me),OM=kM,BM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.byRecord=!1,t}return r.prototype.filter=function(){or(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},r.prototype.filterByRecord=function(){var t=this.context.view,e=nr(this.context,10);if(!!e){var i=t.getXScale().field,a=t.getYScales()[0].field,o=e.map(function(l){return l.getModel().data}),s=xn(t);(0,h.each)(s,function(l){var u=cr(l);(0,h.each)(u,function(f){var c=f.getModel().data;_a(o,c,i,a)?f.show():f.hide()})})}},r.prototype.filterByBBox=function(){var t=this,e=this.context.view,i=xn(e);(0,h.each)(i,function(a){var o=ze(t.context,a,10),s=cr(a);o&&(0,h.each)(s,function(l){o.includes(l)?l.show():l.hide()})})},r.prototype.reset=function(){var t=xn(this.context.view);(0,h.each)(t,function(e){var i=cr(e);(0,h.each)(i,function(a){a.show()})})},r}(me),Qv=BM,DM=10,FM=5,RM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return r.prototype.getButtonCfg=function(){return(0,h.deepMix)(this.buttonCfg,this.cfg)},r.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),i=e.addShape({type:"text",name:"button-text",attrs:(0,B.__assign)({text:t.text},t.textStyle)}),a=i.getBBox(),o=Mn(t.padding),s=e.addShape({type:"rect",name:"button-rect",attrs:(0,B.__assign)({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},t.style)});s.toBack(),e.on("mouseenter",function(){s.attr(t.activeStyle)}),e.on("mouseleave",function(){s.attr(t.style)}),this.buttonGroup=e},r.prototype.resetPosition=function(){var t=this.context.view,e=t.getCoordinate(),i=e.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Ri.transform(null,[["t",i.x-o.width-DM,i.y+o.height+FM]]);a.setMatrix(s)},r.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},r.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},r.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),n.prototype.destroy.call(this)},r}(me),NM=RM,YM=4,GM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},r.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,i=this.context.event;this.dragStart?e.emit("drag",{target:i.target,x:i.x,y:i.y}):an(t,this.startPoint)>YM&&(e.emit("dragstart",{target:i.target,x:i.x,y:i.y}),this.dragStart=!0)}},r.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},r}(me),zM=GM,XM=5,VM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},r.prototype.move=function(){if(!!this.starting){var t=this.startPoint,e=this.context.getCurrentPoint(),i=an(t,e);if(i>XM&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=Ri.transform(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},r.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},r.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},r}(me),HM=VM,Jv="x",qv="y",WM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.dims=[Jv,qv],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return r.prototype.hasDim=function(t){return this.dims.includes(t)},r.prototype.getScale=function(t){var e=this.context.view;return t==="x"?e.getXScale():e.getYScales()[0]},r.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var i=this.getScale(t);e.scale(i.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},r.prototype.reset=function(){this.resetDim(Jv),this.resetDim(qv);var t=this.context.view;t.render(!0)},r}(me),td=WM,jM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return r.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var e=this.dims;(0,h.each)(e,function(i){var a=t.getScale(i),o=a.min,s=a.max,l=a.values;t.startCache[i]={min:o,max:s,values:l}})},r.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},r.prototype.translate=function(){var t=this;if(!!this.starting){var e=this.startPoint,i=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=i.invert(e),s=i.invert(a),l=s.x-o.x,u=s.y-o.y,f=this.context.view,c=this.dims;(0,h.each)(c,function(v){t.translateDim(v,{x:l*-1,y:u*-1})}),f.render(!0)}},r.prototype.translateDim=function(t,e){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.translateLinear(t,i,e)}},r.prototype.translateLinear=function(t,e,i){var a=this.context.view,o=this.startCache[t],s=o.min,l=o.max,u=l-s,f=i[t]*u;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:s,max:l}),a.scale(e.field,{nice:!1,min:s+f,max:l+f})},r.prototype.reset=function(){n.prototype.reset.call(this),this.startPoint=null,this.starting=!1},r}(td),UM=jM,ZM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.zoomRatio=.05,t}return r.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},r.prototype.zoom=function(t){var e=this,i=this.dims;(0,h.each)(i,function(a){e.zoomDim(a,t)}),this.context.view.render(!0)},r.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},r.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.zoomLinear(t,i,e)}},r.prototype.zoomLinear=function(t,e,i){var a=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var o=this.cacheScaleDefs[t],s=o.max-o.min,l=e.min,u=e.max,f=i*s,c=l-f,v=u+f,g=v-c,C=g/s;v>c&&C<100&&C>.01&&a.scale(e.field,{nice:!1,min:l-f,max:u+f})},r}(td),KM=ZM;It("dark",ao(Db)),J("canvas",L),J("svg",P),ma("Polygon",sC),ma("Interval",qS),ma("Schema",uC),ma("Path",ph),ma("Point",nC),ma("Line",eC),ma("Area",HS),ma("Edge",jS),ma("Heatmap",KS),ds("base",el),ds("interval",AC),ds("pie",PC),ds("polar",Ev),Co("overlap",GC),Co("distribute",IC),Co("fixed-overlap",YC),Co("limit-in-shape",DC),Co("limit-in-canvas",BC),Co("pie-outer",OC),dn("fade-in",zC),dn("fade-out",XC),dn("grow-in-x",HC),dn("grow-in-xy",jC),dn("grow-in-y",WC),dn("scale-in-x",KC),dn("scale-in-y",$C),dn("wave-in",qC),dn("zoom-in",t2),dn("zoom-out",e2),dn("position-update",ZC),dn("sector-path-update",JC),dn("path-in",UC),Kt("rect",f2),Kt("mirror",u2),Kt("list",a2),Kt("matrix",s2),Kt("circle",i2),Kt("tree",v2),xi("axis",y2),xi("legend",M2),xi("tooltip",P2),xi("annotation",p2),xi("slider",A2),Re("tooltip",Gv),Re("sibling-tooltip",B2),Re("ellipsis-text",F2),Re("element-active",G2),Re("element-single-active",Z2),Re("element-range-active",W2),Re("element-highlight",Ih),Re("element-highlight-by-x",q2),Re("element-highlight-by-color",Q2),Re("element-single-highlight",rM),Re("element-range-highlight",Vv),Re("element-sibling-highlight",Vv,{effectSiblings:!0,effectByRecord:!0}),Re("element-selected",oM),Re("element-single-selected",lM),Re("element-range-selected",nM),Re("element-link-by-color",X2),Re("active-region",I2),Re("list-active",fM),Re("list-selected",pM),Re("list-highlight",kh),Re("list-unchecked",yM),Re("legend-item-highlight",kh,{componentNames:["legend"]}),Re("axis-label-highlight",kh,{componentNames:["axis"]}),Re("rect-mask",jv),Re("x-rect-mask",Zv,{dim:"x"}),Re("y-rect-mask",Zv,{dim:"y"}),Re("circle-mask",bM),Re("path-mask",Kv),Re("smooth-path-mask",EM),Re("cursor",TM),Re("data-filter",PM),Re("brush",yl),Re("brush-x",yl,{dims:["x"]}),Re("brush-y",yl,{dims:["y"]}),Re("sibling-filter",Bh),Re("sibling-x-filter",Bh),Re("sibling-y-filter",Bh),Re("element-filter",OM),Re("element-sibling-filter",Qv),Re("element-sibling-filter-record",Qv,{byRecord:!0}),Re("view-drag",zM),Re("view-move",HM),Re("scale-translate",UM),Re("scale-zoom",KM),Re("reset-button",NM,{name:"reset-button",text:"reset"});function uo(n){return n.isInPlot()}Fi("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Fi("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Fi("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Fi("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Fi("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Fi("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Fi("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Fi("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Fi("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Fi("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Fi("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Fi("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(n){return!n.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(n){return!n.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Fi("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:uo,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:uo,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:uo,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Fi("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Fi("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:uo,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:uo,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:uo,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Fi("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:uo,action:"path-mask:start"},{trigger:"mousedown",isEnable:uo,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Fi("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Fi("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),Fi("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Fi("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Fi("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),Fi("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function ed(n){return n.gEvent.preventDefault(),n.gEvent.originalEvent.deltaY>0}Fi("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(n){return ed(n.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(n){return!ed(n.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Fi("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});var rd={translate:Ju,rotate:Oc,zoom:Tb,transform:tl,getAngle:qi,polarToCartesian:oi},ml=function(){function n(r){this.EVENT="gesture",this.gm=r}return n.prototype.do=function(r){var t=r.type;switch(t){case"touchstart":this.onTouchStart(r);break;case"touchmove":this.onTouchMove(r);break;case"touchend":this.onTouchEnd(r);break;case"touchcancel":this.onTouchCancel(r);break;default:return}},n.prototype.emit=function(r){this.gm.emit(this.EVENT,r)},n}(),$M=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.EVENT="pan",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){},r.prototype.onTouchMove=function(t){var e=t.x,i=t.y,a=e-this.preX,o=i-this.preY;this.preX=e,this.preY=i,this.emit({x:e,y:i,deltaX:a,deltaY:o,event:t})},r.prototype.onTouchStart=function(t){var e=t.x,i=t.y;this.preX=e,this.preY=i},r}(ml),ho=typeof performance=="object"&&performance.now?performance:Date,QM=300,id=10,JM=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.EVENT="press",t}return r.prototype.onTouchCancel=function(t){this.clearTimeout()},r.prototype.onTouchEnd=function(t){this.clearTimeout()},r.prototype.onTouchMove=function(t){var e=t.x,i=t.y;(e-this.touchStartX>id||i-this.touchStartY>id)&&this.clearTimeout()},r.prototype.onTouchStart=function(t){var e=this;this.clearTimeout();var i=t.x,a=t.y;this.touchStartTime=ho.now(),this.touchStartX=i,this.touchStartY=a,this.pressTimeout=window.setTimeout(function(){e.emit({x:i,y:a,event:t})},QM)},r.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},r}(ml),qM=100,tE=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.EVENT="swipe",t.latestMoveTime=0,t.ms=0,t.speedX=0,t.speedY=0,t.preX=0,t.preY=0,t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var e=this.speedX,i=this.speedY;if(ho.now()-this.latestMoveTime<qM){var a=t.x,o=t.y;this.emit({x:a,y:o,speedX:e,speedY:i,event:t})}},r.prototype.onTouchMove=function(t){var e=t.x,i=t.y,a=ho.now(),o=e-this.preX,s=i-this.preY,l=a-this.ms;this.speedX=o/l,this.speedY=s/l,this.latestMoveTime=a},r.prototype.onTouchStart=function(t){var e=t.x,i=t.y;this.speedX=this.speedY=0,this.preX=e,this.preY=i,this.ms=ho.now()},r}(ml),eE=300,nd=2,rE=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.EVENT="tap",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var e=t.x,i=t.y;e-this.touchStartX<nd&&i-this.touchStartY<nd&&ho.now()-this.touchStartTime<eE&&this.emit({x:e,y:i,event:t})},r.prototype.onTouchMove=function(t){},r.prototype.onTouchStart=function(t){var e=t.x,i=t.y;this.touchStartTime=ho.now(),this.touchStartX=e,this.touchStartY=i},r}(ml),iE={Pan:$M,Press:JM,Swipe:tE,Tap:rE},nE=function(n){return iE[n]},ad=function(n){(0,B.__extends)(r,n);function r(t,e){e===void 0&&(e={});var i=n.call(this)||this;return i.onTouchStart=function(a){i.preventEvent(a),i.element.on("touchmove",i.onTouchMove),i.element.on("touchend",i.onTouchEnd),i.element.on("touchcancel",i.onTouchCancel),i.emit("touchdown",a),i.doGestures(a)},i.onTouchMove=function(a){i.preventEvent(a),i.emit("touchmove",a),i.doGestures(a)},i.onTouchEnd=function(a){i.preventEvent(a),i.emit("touchend",a),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(a)},i.onTouchCancel=function(a){i.preventEvent(a),i.emit("touchcancel",a),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(a)},i.element=t,i.options=e,i.initialGestures(),i.bindTouchStart(),i}return r.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},r.prototype.initialGestures=function(){var t=this,e=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=e.map(function(i){var a=nE(i);return new a(t)})},r.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},r.prototype.preventEvent=function(t){var e=t.type,i=this.options.prevents||[];i.includes(e)&&t.preventDefault()},r.prototype.doGestures=function(t){this.gestures.forEach(function(e){e.do(t)})},r}(Ve.default),aE=d(32718),oE=aE.yD,sE=800,lE="swipe",uE="pan",od="wheel",hE=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this)||this;return e.rafMs=0,e.onPan=function(i){e.raf&&cancelAnimationFrame(e.raf);var a=i.deltaX,o=i.deltaY,s=e.getWrapperEvent(i,a,o);e.emit(od,s)},e.onSwipe=function(i){var a=i.speedX,o=i.speedY;e.rafMs=ho.now(),e.ms=e.rafMs,(a!==0||o!==0)&&e.rafInertia(i)},e.element=t,e.gm=new ad(t,{gestures:["Pan","Swipe"]}),e.gm.on(lE,e.onSwipe),e.gm.on(uE,e.onPan),e}return r.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},r.prototype.rafInertia=function(t){var e=this,i=t.speedX,a=t.speedY;this.raf=window.requestAnimationFrame(function(){var o=ho.now(),s=(o-e.ms)/sE;if(s<1){s=oE(1-s);var l=o-e.rafMs,u=i*s*l,f=a*s*l,c=e.getWrapperEvent(t,u,f);e.emit(od,c),e.rafMs=o,e.rafInertia(t)}})},r.prototype.getWrapperEvent=function(t,e,i){return(0,B.__assign)((0,B.__assign)({},t),{deltaX:-e,deltaY:-i})},r}(Ve.default),_i=d(43599),sd=d(77684),fE=d(96466),VY=d(40518),cE=d(48564),fo=d(23361),HY=d(4329),vE=d(12946),Lo=d(98906);xi("gesture",K.Z);var ia="origin",Cs="_origin",ld=1e3,ud=60*ld,hd=60*ud,xl=24*hd,dE=xl*7,pE=xl*30,gE=xl*365,yE={second:{value:ld,format:"HH:mm:ss"},miniute:{value:ud,format:"HH:mm"},hour:{value:hd,format:"HH"},day:{value:xl,format:"YYYY-MM-DD"},week:{value:dE,format:"YYYY-MM-DD"},month:{value:pE,format:"YYYY-MM"},year:{value:gE,format:"YYYY"}},bl=["click","dblclick","mousemove","mouseenter","mouseleave","mousedown","mouseup","contextmenu"],mE=[],xE={axis:"axis-label",label:"label",legend:"legend-item"},bE={title:"title",description:"description",breadcrumb:"breadcrumb"},fd=(0,h.deepMix)(An(bE),Dh("Plot",bl)),cd=Dh("Layer",bl),Si=(0,h.deepMix)({},An(xE),Dh("View",bl),wE());function vn(n,r,t){n.view.on(r,function(e){var i={x:e==null?void 0:e.x,y:e==null?void 0:e.y,clientX:e==null?void 0:e.clientX,clientY:e==null?void 0:e.clientY,target:e==null?void 0:e.target,data:(e==null?void 0:e.data)?e.data.data:null,plot:n,canvas:n.canvas,gEvent:e==null?void 0:e.gEvent};t(i)})}function An(n){var r={};return(0,h.each)(n,function(t,e){var i=(0,h.upperFirst)(e),a="on"+i,o=t+":";(0,h.each)(bl,function(s){var l=(0,h.upperFirst)(s),u=""+a+l,f=""+o+s;r[u]=f})}),r}function Dh(n,r){var t={},e="on";return(0,h.each)(r,function(i){var a=(0,h.upperFirst)(i),o=""+e+n+a;t[o]=i}),t}function wE(){var n={},r="on";return(0,h.each)(mE,function(t){var e=(0,h.upperFirst)(t),i=""+r+e;n[i]=t}),n}var SE=d(60103),CE=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.fromBBoxObject=function(t){return new r(t.x,t.y,t.width,t.height)},r}(SE.BBox),si=CE,ME=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this)||this;return e.layers=[],e.destroyed=!1,e.visibility=!0,e.rendered=!1,e.eventHandlers=[],e.options=e.getOptions(t),e.processOptions(e.options),e}return r.prototype.processOptions=function(t){this.id=t.id,this.x=t.x||0,this.y=t.y||0,this.width=t.width,this.height=t.height,this.canvas=t.canvas,this.parent=t.parent},r.prototype.updateConfig=function(t){this.options=(0,h.deepMix)({},this.options,t),this.processOptions(this.options)},r.prototype.beforeInit=function(){return null},r.prototype.init=function(){this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.eachLayer(function(t){t.init()})},r.prototype.afterInit=function(){return null},r.prototype.render=function(){this.rendered||(this.container=this.parent?this.parent.container.addGroup():this.canvas.addGroup()),this.rendered=!0,this.beforeInit(),this.init(),this.afterInit(),this.eachLayer(function(t){t.render()}),this.canvas.draw()},r.prototype.clear=function(){this.eachLayer(function(t){t.destroy()}),this.layers=[],this.container.clear()},r.prototype.destroy=function(){var t=this;this.eachLayer(function(e){e.destroy()}),(0,h.each)(this.eventHandlers,function(e){t.off(e.eventName,e.handler)}),this.container.remove(!0),this.destroyed=!0},r.prototype.show=function(){this.container.attr("visible",!0),this.container.set("visible",!0),this.visibility=!0,this.canvas.draw()},r.prototype.hide=function(){this.container.attr("visible",!1),this.container.set("visible",!1),this.visibility=!1,this.canvas.draw()},r.prototype.addLayer=function(t){var e=(0,h.findIndex)(this.layers,function(i){return i===t});e<0&&(t.parent!==this&&(t.parent=this,t.init()),this.layers.push(t))},r.prototype.removeLayer=function(t){var e=(0,h.findIndex)(this.layers,function(i){return i===t});e>=0&&this.layers.splice(e,1)},r.prototype.updateBBox=function(t,e){e===void 0&&(e=!1);var i={x:this.x,y:this.y,width:this.width,height:this.height},a=(0,h.deepMix)({},i,t);this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.render(),e&&this.eachLayer(function(o){o.updateBBoxByParent(),o.render()}),this.canvas.draw()},r.prototype.updateBBoxByParent=function(){var t=this.layerRegion;this.x=this.parent.x+this.parent.width*t.start.x,this.y=this.parent.y+this.parent.height*t.start.y,this.width=this.parent.width*(t.end.x-t.start.x),this.height=this.parent.height*(t.end.y-t.start.y),this.layerBBox=this.getLayerBBox()},r.prototype.getGlobalPosition=function(){for(var t=this.x,e=this.y,i=this.parent;i;)t+=i.x,e+=i.y,i=i.parent;return{x:t,y:e}},r.prototype.getGlobalBBox=function(){var t=this.getGlobalPosition();return new si(t.x,t.y,this.width,this.height)},r.prototype.getOptions=function(t){var e=0,i=0;t.parent&&(e=t.parent.width,i=t.parent.height);var a={x:0,y:0,width:e,height:i};return(0,h.deepMix)({},a,t)},r.prototype.eachLayer=function(t){(0,h.each)(this.layers,t)},r.prototype.parseEvents=function(t){var e=this,i=(0,h.keys)(cd);(0,h.each)(t,function(a,o){if((0,h.contains)(i,o)&&(0,h.isFunction)(a)){var s=cd[o]||o,l=a;e.on(s,l),e.eventHandlers.push({name:s,handler:l})}})},r.prototype.getLayerBBox=function(){return new si(this.x,this.y,this.width,this.height)},r.prototype.getLayerRegion=function(){if(this.parent){var t=this.parent.width,e=this.parent.height,i=this.parent.x,a=this.parent.y,o=(this.x-i)/t,s=(this.y-a)/e,l=(this.x+this.width-i)/t,u=(this.y+this.height-a)/e;return{start:{x:o,y:s},end:{x:l,y:u}}}return{start:{x:0,y:0},end:{x:1,y:1}}},r}(Ve.default),wl=ME;function Wo(n){return n?!!(n.visible===!0&&typeof n.text=="string"&&n.text.trim()):!1}function vd(n,r){var t=(0,Rt.__spreadArrays)(n);return r.forEach(function(e,i){t.splice(e+i,0,`
`)}),t.join("")}function EE(n){return n.getComponents().filter(function(r){return r.type===_i.COMPONENT_TYPE.AXIS}).map(function(r){return r.component})}function AE(n){return n.getComponents().filter(function(r){return r.type===_i.COMPONENT_TYPE.LEGEND}).map(function(r){return r.component})}function WY(n){var r=n.backgroundGroup.findAll(function(t){if(t.get("name")){var e=t.get("name").split("-");return e[0]==="axis"}});return r}function jY(n){var r=n.foregroundGroup.findAll(function(t){if(t.get("name"))return t.get("name")==="legend-item-group"});return r}function TE(n,r){for(var t=n.length;t>0&&!(r>=n[t-1]);)t-=1;return t}function dd(n,r){return!(n.maxY<r.minY||r.maxY<n.minY||n.maxX<r.minX||r.maxX<n.minX)}function UY(){return!!navigator.userAgent.match(/(Mobile)|(Android)|(WebOS)|(iPhone)|(iPad)/)}var _E=function(){function n(r){this.position="top",this.destroyed=!1,(0,h.assign)(this,r),this.init()}return n.prototype.getBBox=function(){var r=this;if(this.shape){var t=this.shape.getBBox();if(this.index===0)return si.fromBBoxObject(t);var e=this.plot.theme.description.padding;return(0,h.isArray)(e)&&(0,h.each)(e,function(i,a){typeof e[a]=="function"&&(e[a]=e[a](r.plot.options.legend.position))}),new si(t.maxX,t.minY,t.width,t.height)}return null},n.prototype.clear=function(){this.shape&&this.shape.attr("text","")},n.prototype.destroy=function(){this.shape&&this.shape.remove(),this.destroyed=!0},n.prototype.init=function(){var r=this.textWrapper(),t=this.getPosition(),e=t.x,i=t.y;this.shape=this.container.addShape("text",{attrs:(0,h.mix)({x:e,y:i,text:r},this.style,{textAlign:this.getTextAlign()})}),this.shape.name=this.name},n.prototype.getPosition=function(){return this.alignTo==="left"?{x:this.leftMargin,y:this.topMargin}:this.alignTo==="middle"?{x:this.leftMargin+this.wrapperWidth/2,y:this.topMargin}:{x:this.rightMargin,y:this.topMargin}},n.prototype.getTextAlign=function(){return this.alignTo==="left"?"left":this.alignTo==="middle"?"center":"right"},n.prototype.textWrapper=function(){var r=this.wrapperWidth,t=this.style,e=this.text,i=this.container.addShape("text",{attrs:(0,Rt.__assign)({text:"",x:0,y:0},t)}),a=e.split(`
`),o=a.map(function(s){for(var l="",u=s.split(""),f=[],c=0;c<u.length;c++){var v=u[c];i.attr("text",l+=v);var g=i.getBBox().width-1;if(g>r){if(c===0)break;f.push(c),l=""}}return vd(u,f)});return i.remove(),o.join(`
`)},n}(),Sl=_E,PE=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this)||this;return e.container=t.container,e.destroyed=!1,e.config=t,e.disposables=[],e}return r.prototype.init=function(){this.group||this.initGroup(),this.initConfig(this.config)},r.prototype.getGroup=function(){return this.group},r.prototype.getConfig=function(){return this.config},r.prototype.getBBox=function(){return this.getGroup().getBBox()},r.prototype.clear=function(){this.group.clear()},r.prototype.render=function(){this.group.clear(),this.renderInner(this.group),this.getCanvas().draw()},r.prototype.update=function(t){this.config=(0,Rt.__assign)((0,Rt.__assign)({},this.config),t),this.initConfig(this.config)},r.prototype.destroy=function(){(0,h.each)(this.disposables,function(t){t()}),this.disposables=[],this.group.remove(!0),this.destroyed=!0},r.prototype.initGroup=function(){this.group=this.container.addGroup()},r.prototype.getCanvas=function(){return this.container.get("canvas")},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.initConfig=function(t){},r}(Ve.default),Ms=PE,LE=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.labelsCfgMap={},t.lastLabelsCfgMap={},t}return r.prototype.getGeometry=function(){return this.geometry},r.prototype.getLabels=function(){return this.labels},r.prototype.show=function(){this.container.show()},r.prototype.hide=function(){this.container.hide()},r.prototype.initConfig=function(t){var e=this;this.layer=t.layer;var i=this.layer.view;this.view=i,this.geometry=t.geometry,this.coord=i.getCoordinate(),this.options=(0,h.deepMix)(this.getDefaultOptions(),t.label);var a=function(){e.clear(),e.labelsCfgMap={},e.lastLabelsCfgMap={},e.render()};i.on(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,a),this.addDisposable(function(){i.off(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,a)})},r.prototype.renderInner=function(t){var e=this;this.labels=[],this.labelsCfgMap={},(0,h.each)(this.geometry.elements,function(s,l){var u=[].concat(e.drawLabelItem(t,s,l));(0,h.each)(u,function(f,c){e.adjustLabel(f,s,c),f.destroyed||(e.labels.push(f),e.labelsCfgMap[f.get("id")]=(0,h.clone)(f.attrs))})}),this.layoutLabels(this.geometry,this.labels);var i=this.lastLabelsCfgMap,a=this.labelsCfgMap,o=this.geometry.animateOption?(0,fo.getDefaultAnimateCfg)("label",this.coord):!1;(0,h.each)(a,function(s,l){var u=t.findById(l);if(u)if(i[l]){var f=i[l],c=(0,h.get)(o,"update");c&&(u.stopAnimate(),u.attr(f),(0,fo.doAnimate)(u,c,{toAttrs:(0,Rt.__assign)({},s),coordinate:e.coord}))}else{var v=(0,h.get)(o,"appear");v&&(u.stopAnimate(),(0,fo.doAnimate)(u,v,{toAttrs:(0,Rt.__assign)({},u.attr()),coordinate:e.coord}))}delete i[l]}),(0,h.each)(i,function(s,l){var u=(0,h.get)(o,"leave");if(u){var f=t.addShape("text",{attrs:s,id:l,name:"label"});f.stopAnimate(),(0,fo.doAnimate)(f,u,{toAttrs:null,coordinate:e.coord})}}),this.lastLabelsCfgMap=this.labelsCfgMap},r.prototype.drawLabelText=function(t,e,i){return i===void 0&&(i={}),t.addShape("text",(0,Rt.__assign)({attrs:e},i))},r.prototype.drawLabelItem=function(t,e,i){var a=this,o=e.getModel(),s=[].concat(this.getLabelItemAttrs(e,i)),l=this.getDefaultOffset(),u=this.getLabelOffset();return(0,h.map)(s,function(f,c){var v,g={x:f.x+u.x,y:f.y+u.y},C=(0,h.isArray)(o.mappingData)?o.mappingData[c]:o.mappingData,O=a.getLabelId(C);return a.drawLabelText(t,(0,Rt.__assign)((0,Rt.__assign)({},f),g),(v={id:O,name:"label",offset:l,element:e},v[ia]=C,v))})},r.prototype.getDefaultOffset=function(){return Number(this.options.offset)},r.prototype.getLabelOffset=function(){var t=this.options,e=t.offsetX,i=t.offsetY;return{x:(0,h.isNumber)(e)?e:0,y:(0,h.isNumber)(i)?i:0}},r.prototype.getLabelOffsetByDimAndFactor=function(t,e){var i=this.options,a=i.offsetX,o=i.offsetY,s=this.getDefaultOffset(),l={x:0,y:0};return l[t]=s*e,(0,h.isNumber)(a)&&(l.x+=a),(0,h.isNumber)(o)&&(l.y+=o),l},r.prototype.getDefaultOptions=function(){return{}},r.prototype.layoutLabels=function(t,e){},r.prototype.getLabelId=function(t){var e=t._origin,i=this.geometry.type,a=this.geometry.getXScale(),o=this.geometry.getYScale(),s=this.geometry.getElementId(t);return i==="line"||i==="area"?s+=" "+e[a.field]:i==="path"&&(s+=" "+e[a.field]+"-"+e[o.field]),s},r.prototype.getCoordinateBBox=function(){var t=this.coord,e=t.start,i=t.end;return new si(Math.min(e.x,i.x),Math.min(e.y,i.y),t.getWidth(),t.getHeight())},r}(Ms),Fh=LE,pd={};function Kn(n,r){pd[n]=r}function IE(n){return pd[n]}var Rh=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(t,e,i){return n.reduce(function(a,o){return o(a,e,i)},t)}},Nh=function(){return function(n){return n}},gd=function(n){return function(r){var t=Number(r);return isNaN(t)||(0,h.isNil)(n)?r:t.toFixed(n)}},yd=function(n){return function(r){return(0,h.isNil)(n)?r:r+" "+n}};function Yh(n,r,t){n[t]&&(r[t]=n[t])}var kE=function(){function n(r){this.config=!1,this.plot=r.plot,this.dim=r.dim,this.init()}return n.prototype.init=function(){this.config=!1;var r=this.plot.getPlotTheme();this.themeConfig=r&&r.axis&&r.axis[this.dim],this._needDraw()&&this._styleParser()},n.prototype._styleParser=function(){this.config=(0,Rt.__assign)({},this.localProps),this._isVisible("line")?this._lineParser():this.config.line=null,this._isVisible("grid")?this._gridParser():this.config.grid=null,this._isVisible("tickLine")?this._tickLineParser():this.config.tickLine=null,this._isVisible("label")?this._labelParser():this.config.label=null,this._isVisible("title")?this._titleParser():this.config.title=null,Yh(this.localProps,this.config,"autoHideLabel"),Yh(this.localProps,this.config,"autoRotateLabel"),Yh(this.localProps,this.config,"autoRotateTitle")},n.prototype._needDraw=function(){var r=this.plot.options,t=r[this.dim+"Axis"]?r[this.dim+"Axis"]:{},e=(0,h.deepMix)({},this.themeConfig,t);return this.localProps=e,!!e.visible},n.prototype._lineParser=function(){this.config.line=this.localProps.line,this.localProps.line.style&&(this.config.line={style:this.localProps.line.style}),this.applyThemeConfig("line")},n.prototype._gridParser=function(){var r=this,t,e,i,a,o,s=(e=(t=this.localProps.grid)===null||t===void 0?void 0:t.line)===null||e===void 0?void 0:e.style,l=(a=(i=this.localProps.grid)===null||i===void 0?void 0:i.line)===null||a===void 0?void 0:a.type,u=(o=this.localProps.grid)===null||o===void 0?void 0:o.alternateColor;(0,h.isFunction)(s)?this.config.grid=function(f,c,v){var g=s(f,c,v);return{line:{type:l,style:(0,h.deepMix)({},(0,h.get)(r.themeConfig,"grid.line.style"),g)},alternateColor:u}}:s&&(this.config.grid={line:{type:l,style:s},alternateColor:u},this.applyThemeConfig("grid"))},n.prototype._tickLineParser=function(){this.config.tickLine=this.localProps.tickLine,this.localProps.tickLine.style&&(this.config.tickLine={style:this.localProps.tickLine.style}),this.applyThemeConfig("tickLine")},n.prototype._labelParser=function(){var r=this.localProps.label,t=r.style,e=(0,Rt.__rest)(r,["style"]),i=(0,Rt.__assign)({},e);t&&(i.style=(0,Rt.__assign)({},this.localProps.label.style)),i.style=(0,h.deepMix)({},(0,h.get)(this.themeConfig,"label.style"),i.style);var a=this.parseFormatter(i);i.formatter=a,this.config.label=i},n.prototype._titleParser=function(){var r=(0,Rt.__assign)({},this.localProps.title),t=this.localProps.title,e=t.visible,i=t.style,a=t.text;e?(this.config.showTitle=!0,i&&(r.style=i),r.style=(0,h.deepMix)({},(0,h.get)(this.config,"title.style"),r.textStyle),a&&(r.text=a)):this.config.showTitle=!1,this.config.title=r},n.prototype._isVisible=function(r){return!!(this.localProps[r]&&this.localProps[r].visible)},n.prototype.applyThemeConfig=function(r){this.config[r]=(0,h.deepMix)({},(0,h.get)(this.themeConfig,r+".style"),this.config[r])},n.prototype.parseFormatter=function(r){var t=Rh(Nh(),gd(r.precision),yd(r.suffix));return r.formatter&&(t=Rh(t,r.formatter)),t},n}(),OE=kE;function Cl(n){var r=0;return each(n,function(t){r+=t*t}),Math.sqrt(r)}function Gh(n,r){return n.x*r.y+n.y*r.x}function ZY(n,r){var t=Cl(n),e=Cl(r),i=Gh(n,r),a=Math.acos(i/t/e);return a}function KY(n,r){var t=Cl(n),e=Cl(r),i=Gh(n,r),a=Math.acos(i/t/e);return t*e*Math.sin(a)}function $Y(n,r){var t=n.x,e=n.y,i=n.z,a=r.x,o=r.y,s=r.z,l=e*s-i*o,u=i*a-t*s,f=t*o-e*a;return{x:l,y:u,z:f}}function QY(n,r){return{x:n.x-r.x,y:n.y-r.y}}function Ml(n,r,t){t===void 0&&(t=1);var e=[n.x,n.y,t];return Qc.transformMat3(e,e,r),{x:e[0],y:e[1]}}function md(n,r,t){return n>=r&&n<=t}var BE=.001;function JY(n,r,t,e){var i={x:t.x-n.x,y:t.y-n.y},a={x:r.x-n.x,y:r.y-n.y},o={x:e.x-t.x,y:e.y-t.y},s=a.x*o.y-a.y*o.x,l=s*s,u=a.x*a.x+a.y*a.y,f=o.x*o.x+o.y*o.y,c=null;if(l>BE*u*f){var v=(i.x*o.y-i.y*o.x)/s,g=(i.x*a.y-i.y*a.x)/s;md(v,0,1)&&md(g,0,1)&&(c={x:n.x+v*a.x,y:n.y+v*a.y})}return c}function DE(n,r){for(var t=!1,e=0,i=r.length-1;e<r.length;i=e++){var a=r[e].x,o=r[e].y,s=r[i].x,l=r[i].y,u=o>n.y!=l>n.y&&n.x<=(s-a)*(n.y-o)/(l-o)+a;u&&(t=!t)}return t}function El(n){return n*n}function Al(n,r){return Math.sqrt(El(n.x-r.x)+El(n.y-r.y))}function xd(n,r){return Math.sqrt(El(n.x-r.x)+El(n.y-r.y))}function bd(n,r,t){var e=Al(r,t);if(e===0)return Al(n,r);var i=((n.x-r.x)*(t.x-r.x)+(n.y-r.y)*(t.y-r.y))/e;i=Math.max(0,Math.min(1,i));var a=Al(n,{x:r.x+i*(t.x-r.x),y:r.y+i*(t.y-r.y)});return Math.sqrt(a)}function wd(n,r){var t=Infinity;(0,h.each)(r,function(f){var c=Math.sqrt(Al(f,n));t>c&&(t=c)});for(var e=0,i=r.length-1;e<r.length;i=e++){var a=r[e].x,o=r[e].y,s=r[i].x,l=r[i].y,u=bd(n,{x:a,y:o},{x:s,y:l});t>u&&(t=u)}return t}function FE(n,r){for(var t=0,e=n;t<e.length;t++){var i=e[t],a=DE(i,r);if(a)return!0}return!1}function Sd(n,r){if(FE(n,r))return 0;var t=Infinity,e=Infinity;return(0,h.each)(n,function(i){var a=wd(i,r);t>a&&(t=a)}),(0,h.each)(r,function(i){var a=wd(i,n);e>a&&(e=a)}),Math.min(t,e)}function RE(n){var r=n.getBBox(),t=r.minX,e=r.minY,i=r.maxX-r.minX,a=r.maxY-r.minY,o=n.attr("matrix"),s;o?s=[o[0],o[1],0,o[3],o[4],0,0,0,1]:s=[1,0,0,0,1,0,0,0,1];var l=Ml({x:0,y:0},s);l.x+=t,l.y+=e;var u=Ml({x:i,y:0},s);u.x+=t,u.y+=e;var f=Ml({x:0,y:a},s);f.x+=t,f.y+=e;var c=Ml({x:i,y:a},s);c.x+=t,c.y+=e;var v=[l,u,f,c];v.sort(function(Wt,Ft){return Wt.y-Ft.y});var g=v[0].y,C=v[v.length-1].y,O=[v[0],v[1]],F=[v[2],v[3]],G=O[0].x<O[1].x?O[0]:O[1],Y=O[0].x<O[1].x?O[1]:O[0],$=F[0].x<F[1].x?F[0]:F[1],q=F[0].x<F[1].x?F[1]:F[0];v.sort(function(Wt,Ft){return Wt.x-Ft.x});var ut=v[0].x,kt=v[v.length-1].x,Nt={width:kt-ut,height:C-g,left:ut,right:kt,top:g,bottom:C,topLeft:G,topRight:Y,bottomLeft:$,bottomRight:q,centerX:ut+(kt-ut)/2,centerY:g+(C-g)/2};return Nt}var NE=2;function zh(n){return n.length<5?n:Xh(n,NE)}function Xh(n,r){for(var t,e=-Infinity,i=0,a=n.length-1,o=1;o<a;o++){var s=n[o],l={start:n[0],end:n[a]},u=bd(s,l.start,l.end);u>e&&(e=u,i=o)}if(e>r){var f=Xh(n.slice(0,i+1),r),c=Xh(n.slice(i,n.length),r);t=f.concat(c)}else t=[n[0],n[n.length-1]];return t}function Cd(n){var r=(0,h.clone)(n);r.sort(function(e,i){return e-i});var t=Math.floor(r.length/2);return r.length%2?r[t]:(r[t-1]+r[t])/2}function YE(n){var r=0;return(0,h.each)(n,function(t){r+=t}),r/n.length}function Md(n){return Math.ceil(Math.log(n.length)/Math.LN2)+1}function GE(n,r,t,e,i){i===void 0&&(i=2);for(var a=[],o=n;o<=n+t;o+=i)a.push([o,r]);for(var s=r;s<=r+e;s+=i)a.push([n+t,s]);for(var o=n+t;o>=n;o-=i)a.push([o,r+e]);for(var s=r+e;s>=r;s-=i)a.push([n,s]);return a}var zE=function(){function n(r){(0,h.assign)(this,r),this._init()}return n.prototype._init=function(){var r=this.plot.options,t=r.yField,e=r.data,i=this.plot.processData(e);if(!((0,h.isEmpty)(i)||!(0,h.isNumber)(i[0][t]))){var a=this.getDefaultStyle(),o={type:"line",top:!0,start:this.cfg.start,end:this.cfg.end};if(o.style=(0,h.deepMix)({},a.line.style,this.cfg.lineStyle),o.text=(0,h.deepMix)({},a.text,this.cfg.text),this.cfg.type){var s=this._getState(this.cfg.type),l=this.getYScale(),u=(1-l.scale(s))*100+"%",f=["0%",u],c=["100%",u];this.config=(0,h.mix)({start:f,end:c},o)}else{var v=this.cfg,g=v.start,C=v.end;this.config=(0,h.clone)(o);var O=this.getXScale(),F=this.getYScale(),G=(0,h.clone)(g),Y=(0,h.clone)(C);(0,h.each)(g,function($,q){(!(0,h.contains)((0,h.toArray)(g[q]),"%")||(0,h.isNumber)(g[q]))&&(q===0?G[q]=O.scale(g[0])*100+"%":G[q]=(1-F.scale(g[1]))*100+"%")}),(0,h.each)(C,function($,q){(!(0,h.contains)((0,h.toArray)(C[q]),"%")||(0,h.isNumber)(C[q]))&&(q===0?Y[q]=O.scale(C[0])*100+"%":Y[q]=(1-F.scale(C[1]))*100+"%")}),this.config.start=G,this.config.end=Y}}},n.prototype.getYScale=function(){var r=this._getState("min"),t=this._getState("max"),e=(0,Qr.getScale)("linear"),i=new e((0,h.mix)({},{min:this.plot.type==="column"?0:r,max:t,nice:!0,values:this.values},this.plot.config.scales[this.plot.options.yField]));return i},n.prototype.getXScale=function(){var r=this.extractXValue();if((0,h.isString)(r[0])){var t=(0,Qr.getScale)("cat"),e=new t((0,h.mix)({},{values:r},this.plot.config.scales[this.plot.options.xField]));return e}else{var i=Math.min.apply(Math,r),a=Math.max.apply(Math,r),t=(0,Qr.getScale)("linear"),e=new t((0,h.mix)({},{min:i,max:a,nice:!0,values:r},this.plot.config.scales[this.plot.options.xField]));return e}},n.prototype._getState=function(r){if(this.values=this._extractValues(),r==="median")return Cd(this.values);if(r==="mean")return YE(this.values);if(r==="max")return Math.max.apply(Math,this.values);if(r==="min")return Math.min.apply(Math,this.values)},n.prototype._extractValues=function(){var r=this.plot.options,t=r.yField,e=[],i=this.plot.processData(r.data);return(0,h.each)(i,function(a){(0,h.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},n.prototype.extractXValue=function(){var r=this.plot.options,t=r.xField,e=[],i=this.plot.processData(r.data);return(0,h.each)(i,function(a){(0,h.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},n.prototype.getDefaultStyle=function(){return this.getDefaultTextAlign(),{line:{style:{lineWidth:2,stroke:"#333333",opacity:.7,lineDash:[0,0]}},text:{content:"",offsetY:-5,style:{fontSize:14,stroke:"white",lineWidth:2,textAlign:this.getDefaultTextAlign()}}}},n.prototype.getDefaultTextAlign=function(){var r=this.cfg.text;if(r){if(!r.position||r.position==="start")return"left";if(r.position==="center")return"center";if(r.position==="end")return"right"}},n}(),XE=zE,VE=function(){function n(r){this.config={};var t=r.plot,e=(0,Rt.__rest)(r,["plot"]);this.plot=t,this.originConfig=e,this.init(r)}return n.prototype.getConfig=function(){return this.config},n.prototype.init=function(r){var t=this;(0,h.assign)(this.config,r),this.config.callback=function(e){return t.parseCallBack(e)}},n.prototype.parseCallBack=function(r){var t=this.originConfig,e=this.plot.getPlotTheme(),i=(0,Rt.__assign)({},t);return this.parseOffset(t,i),t.position&&((0,h.isFunction)(t.position)?i.position=t.position(r):i.position=t.position),this.parseFormatter(i),t.style&&((0,h.isFunction)(t.style)?i.textStyle=t.style(r):i.textStyle=t.style),i.textStyle=(0,h.deepMix)({},(0,h.get)(e,"label.style"),i.textStyle),t.autoRotate&&(i.autoRotate=t.autoRotate),i},n.prototype.parseOffset=function(r,t){var e=["offset","offsetX","offsetY"],i=0;(0,h.each)(e,function(a){(0,h.has)(r,a)&&(t[a]=r[a],i++)}),i===0&&(0,h.get)(r,"position")==="middle"&&(t.offset=0)},n.prototype.parseFormatter=function(r){var t=this.originConfig;r.content=function(e,i){var a=e[t.fields[0]];return Rh(Nh(),gd(t.precision),yd(t.suffix),t.formatter?t.formatter:Nh())(a,e,i)}},n}(),HE=VE,Io,Vh;function Ed(n,r){Io||Ad(n),(0,h.each)(Io,function(t){var e=Td(t,r),i=e.labelData,a=e.con;if(_d(i,a)){var o=ZE();t.shape.attr(o)}})}function WE(n,r){Io||Ad(n),(0,h.each)(Io,function(t,e){var i=Td(t,r),a=i.labelData,o=i.con;if(_d(a,o)){var s=Vh[e],l=UE(s);t.shape.attr(l)}})}function Ad(n){var r;Io=[],Vh=[];var t=(r=n.view.getController("axis"))===null||r===void 0?void 0:r.getComponents();(0,h.each)(t,function(e){var i=e.component,a=[],o=jE(n,i),s=i.get("labelRenderer").get("group").get("children");if((0,h.each)(s,function(f){f.type==="text"&&(a.push({shape:f}),Vh.push(f.attr()))}),o){var l=o.ticks,u=o.field;(0,h.each)(a,function(f,c){f.value=l[c],f.scaleField=u,f.type=o.type})}Io.push.apply(Io,a)})}function jE(n,r){var t=n.options,e="y",i=r.get("position");(i==="bottom"||i==="top")&&(e="x");var a=t[e+"Field"];return n.view.get("scales")[a]}function Td(n,r){var t,e=(t={},t[n.scaleField]=n.value,t),i=(0,h.clone)(r);return n.type==="time"&&(0,h.isObject)(r)&&!(0,h.isFunction)(i.exp)&&(i.exp=new Date(i.exp).getTime()),{labelData:e,con:i}}function UE(n){var r=n.opacity||1;return{opacity:r*.2}}function ZE(){return{opacity:1,fontWeight:600,fill:"red"}}function _d(n,r){if(!(0,h.isFunction)(r)){var t=r.name,e=r.exp;return n[t]?(0,h.isFunction)(e)?e(n[t]):n[t]===e:!1}return r(n)}var KE={active:Ed,selected:Ed,disable:WE},$E=function(n){(0,Rt.__extends)(r,n);function r(){var t=n.call(this)||this;return t._states={},t._stateStack={},t}return r.prototype.setState=function(t,e){this._stateStack[t]=e,this._onUpdate()},r.prototype.getState=function(t){return this._states[t]},r.prototype.getAllStates=function(){return this._states},r.prototype.clear=function(){this._states={},this._stateStack={},this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null)},r.prototype._onUpdate=function(){var t=this,e=this._stateStack;this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null),this._changeTimer=setTimeout(function(){(0,h.each)(e,function(i,a){var o=e[a];(!t._states[a]||t._states[a]!==i)&&(t._states[a]=i,t._triggerEvent(a,o))}),t._stateStack={}},16)},r.prototype._triggerEvent=function(t,e){this.emit(t+":change",{name:t,exp:e})},r}(Ve.default),QE=$E;function Ka(n,r){if(!(0,h.isFunction)(r)){var t=r.name,e=r.exp;return(0,h.isFunction)(e)?e(n[t]):n[t]===e}return r(n)}var JE=function(){function n(r){this.shapeContainers=[],(0,h.assign)(this,r)}return n.prototype.createStateManager=function(){this.stateManager=new QE},n.prototype.bindStateManager=function(r,t){this.stateManager=r,t.setState&&this._updateStateProcess(t.setState),t.onStateChange&&this._stateChangeProcess(t.onStateChange)},n.prototype.defaultStates=function(r){var t=this;(0,h.each)(r,function(e,i){var a=e.condition,o=e.related;t.setState({type:i,condition:a,related:o})})},n.prototype.setState=function(r){var t=this,e=r.type,i=r.condition,a=r.related;this.shapes=this._getShapes(),this.originAttrs=this._getOriginAttrs(),(0,h.each)(this.shapes,function(o,s){var l=o.get("origin").data,u=(0,h.isArray)(l)?l[0]:l;if(Ka(u,i)){var f=r.style?r.style:t._getDefaultStateStyle(e,o),c=t.originAttrs[s],v=void 0;(0,h.isFunction)(f)?v=f(c):v=(0,h.mix)({},c,f),o.attr(v),t.setZIndex(e,o)}}),a&&this._parserRelated(e,a,i),this.plot.canvas.draw()},n.prototype._updateStateProcess=function(r){var t=this;(0,h.each)(r,function(e){var i=e.state,a;(0,h.isFunction)(i)?a=function(o){var s=i(o);t.stateManager.setState(s.name,s.exp)}:a=function(){t.stateManager.setState(i.name,i.exp)},e.event?vn(t.plot,t._eventParser(e.event),a):a()})},n.prototype._stateChangeProcess=function(r){var t=this;(0,h.each)(r,function(e){t.stateManager.on(e.name+":change",function(i){e.callback(i,t.plot)})})},n.prototype._getShapes=function(){var r=this,t=[],e=this.plot.view.geometries;return(0,h.each)(e,function(i){var a=i.container;r.shapeContainers.push(a),i.destroyed||t.push.apply(t,i.getShapes())}),t},n.prototype._getOriginAttrs=function(){var r=[];return(0,h.each)(this.shapes,function(t){r.push((0,h.clone)(t.attr()))}),r},n.prototype._eventParser=function(r){var t=r.split(":"),e=this.plot.geometryParser("g2",t[0]),i=t[1];return e+":"+i},n.prototype._getDefaultStateStyle=function(r,t){var e=this.plot.theme,i=this.plot.geometryParser("plot",t.name),a=i+"Style";if(e[a]){var o=e[a][r];return(0,h.isFunction)(o)&&(o=o(t.attr())),o}return{}},n.prototype._parserRelated=function(r,t,e){var i=this;(0,h.each)(t,function(a){if(i.plot[a]){var o=hA(a,r);o(i.plot,e)}})},n.prototype.setZIndex=function(r,t){if(r==="active"||r==="selected"){var e=t.get("parent").get("children");e[e.length-1].setZIndex(0),t.setZIndex(1)}},n.prototype.resetZIndex=function(){(0,h.each)(this.shapeContainers,function(r){var t=r.get("children");t.sort(function(e,i){return e._INDEX-i._INDEX})})},n}(),qE=JE,jo,Tl;function Pd(n,r){jo||Ld(n),(0,h.each)(jo,function(t,e){var i=t.get("origin");if(Ka(i,r)){var a=Tl[e],o=(0,h.mix)({},a,{opacity:1});t.attr(o)}})}function tA(n,r){jo||Ld(n),(0,h.each)(jo,function(t,e){var i=t.get("origin");if(Ka(i,r)){var a=Tl[e],o=eA(a);t.attr(o)}})}function Ld(n){jo=[],Tl=[];var r=n.view.get("elements");(0,h.each)(r,function(t){var e=t.get("labels");e&&(0,h.each)(e,function(i){jo.push(i),Tl.push(i.attr())})})}function eA(n){var r=n.opacity||1;return{opacity:r*.2}}var rA={active:Pd,selected:Pd,disable:tA},iA=["xField","yField","angleField"];function Id(n,r){var t=n.options;if(aA(t,r)){var e=t.data;(0,h.each)(e,function(i){if(Ka(i,r)){var a=n.view.getXY(i);n.view.on("tooltip:create",function(o){kd(r,o,!1)}),n.view.showTooltip(a)}})}}function nA(n,r){n.view.on("tooltip:change",function(t){kd(r,t,!0)})}function kd(n,r,t){var e=!t,i=(0,h.clone)(r.items);r.items.splice(0),(0,h.each)(i,function(a){var o=a.point._origin;Ka(o,n)===e&&r.items.push(a)})}function aA(n,r){var t=oA(n);return!(0,h.isFunction)(r)&&t.indexOf(r.name)}function oA(n){var r=[];return(0,h.each)(iA,function(t){(0,h.has)(n,t)&&r.push(t)}),r}var sA={active:Id,selected:Id,disable:nA},lA={axis:OE,label:HE,guideLine:XE},uA={tooltip:sA,label:rA,axis:KE};function On(n,r){var t=lA[n];return new t(r).config}function hA(n,r){return uA[n][r]}var fA=["start","process","end","reset"],cA=function(){function n(r){var t=this.getDefaultCfg();(0,h.assign)(this,t,r),this.canvas=this.view.canvas,this._eventHandlers=[],this._bindEvents()}return n.prototype.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},n.prototype._start=function(r){this.preStart(r),this.start(r),this.afterStart(r)},n.prototype.preStart=function(r){},n.prototype.afterStart=function(r){},n.prototype._process=function(r){this.preProcess(r),this.process(r),this.afterProcess(r)},n.prototype.preProcess=function(r){},n.prototype.process=function(r){},n.prototype.afterProcess=function(r){},n.prototype._end=function(r){this.preEnd(r),this.end(r),this.afterEnd(r)},n.prototype.preEnd=function(r){},n.prototype.end=function(r){},n.prototype.afterEnd=function(r){},n.prototype._reset=function(r){this.preReset(r),this.reset(r),this.afterReset(r)},n.prototype.preReset=function(r){},n.prototype.reset=function(r){},n.prototype.afterReset=function(r){},n.prototype._bindEvents=function(){var r=this;(0,h.each)(fA,function(t){var e=r[t+"Event"],i=(0,h.wrapBehavior)(r,"_"+t);r.view.on(e,i),r._eventHandlers.push({type:e,handler:i})})},n.prototype._unbindEvents=function(){var r=this,t=this._eventHandlers;(0,h.each)(t,function(e){r.view.off(e.type,e.handler)})},n.prototype.destroy=function(){this._unbindEvents(),this._reset()},n}(),Hh=cA,vA=function(n){(0,Rt.__extends)(r,n);function r(t,e,i,a){var o=n.call(this,t)||this;return o.viewLayer=e,o.interactionRange=i,o.interactionConfig=a,o.disposables=[],o}return r.registerInteraction=function(t,e){r.GLOBAL_INTERACTION_MAP[t]=e},r.registerPlotInteraction=function(t,e,i){r.PLOT_INTERACTION_MAP[t]||(r.PLOT_INTERACTION_MAP[t]={}),r.PLOT_INTERACTION_MAP[t][e]=i},r.getInteraction=function(t,e){return e&&r.PLOT_INTERACTION_MAP[e]&&r[e][t]?r.PLOT_INTERACTION_MAP[e][t]:r.GLOBAL_INTERACTION_MAP[t]},r.getInteractionRange=function(t,e){},r.prototype.destroy=function(){(0,h.each)(this.disposables,function(t){t()}),this.disposables=[],this.clear(),n.prototype.destroy.call(this)},r.prototype.getViewLayer=function(){return this.viewLayer},r.prototype.getRange=function(){return this.interactionRange},r.prototype.getInteractionConfig=function(){return this.interactionConfig},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.render=function(){},r.prototype.start=function(t){},r.GLOBAL_INTERACTION_MAP={},r.PLOT_INTERACTION_MAP={},r}(Hh),ba=vA,Od=function(n,r,t,e,i){var a=e[0],o=e[1];i===void 0&&(i=!1);var s=(0,h.groupBy)(t,n),l=i?r.slice(r.length-o,r.length-a):r.slice(a,o);return(0,h.flatten)((0,h.map)(l,function(u){return s[u]||[]}))},La;(function(n){n.BEFORE_INIT="beforeinit",n.AFTER_INIT="afterinit",n.BEFORE_RENDER="beforerender",n.AFTER_RENDER="afterrender",n.BEFORE_CHANGE_DATA="beforechangedata",n.AFTER_CHANGE_DATA="afterchangedata"})(La||(La={}));var _l=4,Bd=8,dA=32,pA=20,gA=999,Pl=function(n){n===void 0&&(n={});var r=(0,Rt.__assign)({type:"horizontal",categorySize:dA,width:Bd,height:Bd,padding:[0,0,0,0]},n);return n.padding||(r.padding=r.type==="horizontal"?[_l,0,_l,0]:[0,_l,0,_l]),r},yA=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.onChangeFn=(0,h.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var i=Pl(e),a=i.padding,o=a[0],s=a[1],l=a[2],u=a[3];return i.type==="horizontal"?new si(t.minX,t.maxY-i.height-o-l,t.width,i.height+o+l):new si(t.maxX-i.width-u-s,t.minY,i.width+u+s,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),i=this.view;this.ratio=0,this.thumbOffset=0;var a=function(){var s=t.view.padding;s==="auto"||(0,h.isEqual)(s,[0,0,0,1])||(t.trackLen?t.renderScrollbar():(t.measureScrollBar(),t.changeViewData(t.getScrollRange(),!0)))},o=function(){t.trackLen=0};i.on(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,a),this.addDisposable(function(){return i.off(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,a)}),i.on(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,a),this.addDisposable(function(){return i.off(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,a)}),e.on(La.BEFORE_CHANGE_DATA,o),this.addDisposable(function(){return e.off(La.BEFORE_CHANGE_DATA,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=null),this.container&&(this.container.remove(!0),this.container=null),this.trackLen=null,this.thumbLen=null},r.prototype.renderScrollbar=function(){var t=Pl(this.getInteractionConfig()),e=this.getRange(),i=t.type!=="vertical",a=this.view.coordinateBBox,o=t.padding,s=o[0],l=o[3],u=i?{x:a.minX+l,y:e.minY+s}:{x:e.minX+l,y:a.minY+s};this.scrollbar?(this.scrollbar.update({trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.thumbOffset,x:u.x,y:u.y}),this.scrollbar.render()):(this.container=this.canvas.addGroup(),this.scrollbar=new gi.Scrollbar({container:this.container,x:u.x,y:u.y,isHorizontal:i,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.ratio*this.trackLen}),this.scrollbar.init(),this.scrollbar.render(),this.scrollbar.get("group").set("zIndex",gA),this.scrollbar.on("scrollchange",this.onChangeFn))},r.prototype.measureScrollBar=function(){var t=Pl(this.getInteractionConfig()),e=t.padding,i=e[0],a=e[1],o=e[2],s=e[3],l=t.type!=="vertical",u=this.view.coordinateBBox,f=this.view.getXScale(),c=this.view.getYScales().filter(function(v){return v});this.cnt=f.values.length,this.xScaleCfg={field:f.field,values:f.values||[]},this.yScalesCfg=c,this.step=Math.floor((l?u.width:u.height)/t.categorySize),this.trackLen=l?u.width-s-a:u.height-i-o,this.thumbLen=Math.max(this.trackLen*(0,h.clamp)(this.step/f.values.length,0,1),pA)},r.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,h.clamp)(this.ratio,0,1)),e=Math.min(t+this.step,this.cnt);return[t,e]},r.prototype.changeViewData=function(t,e){var i=this,a=t[0],o=t[1],s=Pl(this.getInteractionConfig()),l=this.getViewLayer(),u=l.options.meta,f=l.getData(),c=Od(this.xScaleCfg.field,this.xScaleCfg.values,f,[a,o],s.type==="vertical");this.yScalesCfg.forEach(function(v){var g=(0,h.get)(u,v.field)||{};i.view.scale(v.field,(0,Rt.__assign)((0,Rt.__assign)({formatter:v.formatter},g),{type:v.type,min:v.min,max:v.max}))}),e?(this.view.data(c),this.view.render()):this.view.changeData(c)},r.prototype.onChange=function(t){var e=t.ratio,i=t.thumbOffset;this.ratio=e,this.thumbOffset=i;var a=this.view.getOptions().animate;this.view.animate(!1),this.changeViewData(this.getScrollRange(),!0),this.view.animate(a),this.renderScrollbar()},r}(ba),mA=yA,Ll=4,Dd=16,Wh=function(n){n===void 0&&(n={});var r=(0,Rt.__assign)({type:"horizontal",start:0,end:1,width:void 0,height:void 0,padding:[0,0,0,0],backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},trendCfg:{}},n);n.padding||(r.padding=r.type==="horizontal"?[Ll,0,Ll,0]:[0,Ll,0,Ll]),n.height||(r.height=Dd),n.width||(r.width=Dd);var t=(0,h.clamp)(Math.min(r.start,r.end),0,1),e=(0,h.clamp)(Math.max(r.start,r.end),0,1);return r.start=t,r.end=e,r},xA=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.onChangeFn=(0,h.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var i=Wh(e),a=i.padding||[0,0,0,0],o=a[0],s=a[1],l=a[2],u=a[3];if(i.type==="horizontal"){var f=new si(t.minX,t.maxY-i.height-o-l,t.width,i.height+o+l);return f}else return new si(t.maxX-i.width-u-s,t.minY,i.width+u+s,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),i=this.view,a=Wh(this.getInteractionConfig());this.curStart=a.start,this.curEnd=a.end,this.xScaleCfg=void 0;var o=function(){var s=t.view.padding;if(!(s==="auto"||(0,h.isEqual)(s,[0,0,0,1]))&&!(0,h.isEmpty)(e.options.data))if(t.xScaleCfg)t.renderSlider();else{var l=i.getXScale();t.xScaleCfg={field:l.field,values:l.values||[]},i.data(t.getSliderData(t.curStart,t.curEnd)),i.render()}};i.on(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,o),this.addDisposable(function(){return i.off(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,o)}),i.on(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,o),this.addDisposable(function(){return i.off(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.slider&&(this.slider.destroy(),this.slider=null),this.container&&(this.container.remove(!0),this.container=null)},r.prototype.renderSlider=function(){this.slider?(this.slider.update(this.getSliderConfig()),this.slider.render()):(this.container=this.canvas.addGroup(),this.slider=new gi.Slider((0,Rt.__assign)((0,Rt.__assign)({},this.getSliderConfig()),{container:this.container})),this.slider.init(),this.slider.render(),this.slider.on("sliderchange",this.onChangeFn))},r.prototype.getSliderConfig=function(){var t=this.view,e=t.coordinateBBox,i=this.getRange(),a=Wh(this.getInteractionConfig()),o=a||{},s=o.padding,l=s===void 0?[0,0,0,0]:s,u=o.backgroundStyle,f=o.foregroundStyle,c=o.handlerStyle,v=o.textStyle,g=o.trendCfg,C=g===void 0?{}:g,O=l[0],F=l[1],G=l[2],Y=l[3],$=this.getSliderMinMaxText(this.curStart,this.curEnd),q=$.minText,ut=$.maxText,kt={x:e.minX+Y,y:i.minY+O,width:e.width-Y-F,height:i.height-O-G,start:this.curStart,end:this.curEnd,minText:q,maxText:ut,backgroundStyle:u,foregroundStyle:f,handlerStyle:c,textStyle:v,trendCfg:(0,Rt.__assign)((0,Rt.__assign)({isArea:!1,smooth:!1},C),{data:this.getSliderTrendData()})};return kt},r.prototype.getSliderTrendData=function(){var t=this.getViewLayer().options,e=t.data,i=t.yField;return(0,h.map)(e,function(a){return a[i]})},r.prototype.getSliderData=function(t,e){var i=this.getViewLayer().getData(),a=(0,h.size)(this.xScaleCfg.values),o=Math.round(t*a),s=Math.max(o+1,Math.round(e*a));return Od(this.xScaleCfg.field,this.xScaleCfg.values,i,[o,s])},r.prototype.getSliderMinMaxText=function(t,e){var i=this.getViewLayer().options,a=i.data,o=a===void 0?[]:a,s=i.xField,l=(0,h.size)(o),u=Math.round(t*l),f=Math.max(u+1,Math.round(e*l)),c=o.slice(u,f);return{minText:c.length>0?(0,h.head)(c)[s]:"",maxText:c.length>0?(0,h.last)(c)[s]:""}},r.prototype.onChange=function(t){var e=this.view,i=(0,h.clamp)(Math.min(t[0],t[1]),0,1),a=(0,h.clamp)(Math.max(t[0],t[1]),0,1),o=this.getSliderData(i,a),s=this.getSliderMinMaxText(i,a),l=s.minText,u=s.maxText;this.curStart=i,this.curEnd=a,this.slider.update({start:i,end:a,minText:l,maxText:u}),this.slider.render();var f=e.getOptions().animate;e.animate(!1),e.data(o),e.render(),e.animate(f)},r}(ba),bA=xA,wA=function(n){(0,Rt.__extends)(r,n);function r(t){return n.call(this,(0,h.deepMix)({},t))||this}return r.prototype.renderInner=function(t){var e=this;this.initElement(t),this.updateElement(),this.renderMarker(),t.off("click"),t.on("click",function(){e.emit("click")})},r.prototype.destroy=function(){this.group.off(),n.prototype.destroy.call(this)},r.prototype.initElement=function(t){this.circle=t.addShape("circle",{attrs:{x:this.config.x,y:this.config.y,r:this.config.r,fill:"#607889"}}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ffffff"}}),this.pauseGroupMarker=t.addGroup();var e=1/4*this.config.r,i=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-i/2,width:e,height:i,fill:"#ffffff"}}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-i/2,width:e,height:i,fill:"#ffffff"}})},r.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var t=1/4*this.config.r,e=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-e/2),this.pauseLeftMarker.attr("width",t),this.pauseLeftMarker.attr("height",e),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-e/2),this.pauseRightMarker.attr("width",t),this.pauseRightMarker.attr("height",e)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},r.prototype.getStartMarkerPath=function(){var t=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-t/Math.sqrt(3)/2,this.config.y-t/2],["L",this.config.x+t/Math.sqrt(3),this.config.y],["L",this.config.x-t/Math.sqrt(3)/2,this.config.y+t/2]]},r}(Ms),SA=wA,Fd="timelinestart",CA="timelinechange",Rd="timelineend",MA="timelineupdate",EA=20,AA=20,TA=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,(0,h.deepMix)({},{speed:1,loop:!1},t))||this;return e.onTimeSelectMouseMove=function(i){i.stopPropagation(),i.preventDefault();var a=(0,h.get)(i,"touches.0.pageX",i.pageX),o=a-e.prevX;e.setTimeSelectX(o),e.prevX=a},e.onTimeSelectMouseUp=function(){e.syncCurrnentTick(),e.emit(Rd,null);var i=e.getCanvas().get("container");i&&(i.removeEventListener("mousemove",e.onTimeSelectMouseMove),i.removeEventListener("mouseup",e.onTimeSelectMouseUp),i.removeEventListener("mouseleave",e.onTimeSelectMouseUp),i.removeEventListener("touchmove",e.onTimeSelectMouseMove),i.removeEventListener("touchend",e.onTimeSelectMouseUp),i.removeEventListener("touchcancel",e.onTimeSelectMouseUp))},e.onTimeSelectMouseDown=function(i){var a=i.originalEvent;a.stopPropagation(),a.preventDefault(),e.isPlay===!1?e.emit(Fd,null):(e.isPlay=!1,e.changePlayStatus(!1)),e.prevX=(0,h.get)(a,"touches.0.pageX",a.pageX);var o=e.getCanvas().get("container");o.addEventListener("mousemove",e.onTimeSelectMouseMove),o.addEventListener("mouseup",e.onTimeSelectMouseUp),o.addEventListener("mouseleave",e.onTimeSelectMouseUp),o.addEventListener("touchmove",e.onTimeSelectMouseMove),o.addEventListener("touchend",e.onTimeSelectMouseUp),o.addEventListener("touchcancel",e.onTimeSelectMouseUp)},e}return r.prototype.renderInner=function(t){var e=this.config,i=e.ticks,a=e.defaultCurrentTick;i&&i.length&&(this.currentTick=this.config.ticks.includes(a)?a:i[0],this.renderPlayButton(t),this.renderTimeLine(t),this.renderTimeSelect(t,this.currentTick),this.initEvent())},r.prototype.update=function(t){n.prototype.update.call(this,t),this.emit(MA,this.currentTick)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.timeLineButton.destroy(),this.timeLineButton.off(),this.timeSelect.off(),this.playHandler&&window.cancelAnimationFrame(this.playHandler)},r.prototype.renderPlayButton=function(t){var e=this.config,i=e.height,a=e.x,o=e.y,s=.8,l=i/2*s;this.timeLineButton?this.timeLineButton.update({x:a+l,y:o+l+i*(1-s)/2,r:l}):(this.timeLineButton=new SA({container:t,x:a+l,y:o+l+i*(1-s)/2,r:l,isPlay:this.isPlay}),this.timeLineButton.init()),this.timeLineButton.render()},r.prototype.getTimeLinePath=function(){var t=this.timeLine,e=t.x,i=t.y,a=t.width,o=t.height,s=o/2;return a>0?"M"+e+", "+i+("A"+s+","+s+" 90 0,0 "+e+","+(i+o))+("L"+(e+a)+", "+(i+o))+("A"+s+","+s+" 90 0,0 "+(e+a)+","+i)+("L"+e+", "+i):[]},r.prototype.renderTimeLine=function(t){var e=this,i=this.config,a=i.width,o=i.height,s=i.ticks,l=i.x,u=i.y;this.timeLine||(this.timeLine={}),this.timeLine.height=o*.15,this.timeLine.x=l+o+EA,this.timeLine.y=u+(o/2-this.timeLine.height/2),this.timeLine.width=a-this.timeLine.x-AA,this.timeLine&&this.timeLine.shape?this.timeLine.shape.attr("path",this.getTimeLinePath()):this.timeLine.shape=t.addShape("path",{attrs:{path:this.getTimeLinePath(),fill:"#607889",opacity:.2}});var f=this.timeLine.width/(s.length-1);this.tickPosList=[],this.timeLine.textList&&this.timeLine.textList.length&&this.timeLine.textList.forEach(function(v){v.destroy()});var c=-Infinity;this.timeLine.textList=s.map(function(v,g){e.tickPosList.push(e.timeLine.x+g*f);var C=t.addShape("text",{attrs:{x:e.timeLine.x+g*f,y:e.timeLine.y+e.timeLine.height+5,text:v,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),O=C.getBBox();return O.minX>c?(C.show(),c=O.minX+O.width+10):C.hide(),C})},r.prototype.renderTimeSelect=function(t,e){var i=this.config,a=i.ticks,o=i.height,s=this.timeLine.width/(a.length-1),l=(0,h.findIndex)(a,function(v){return v===e}),u=this.timeLine.x+l*s,f=this.config.y+o/2,c=o*.15;this.timeSelect?(this.timeSelect.attr("x",u),this.timeSelect.attr("y",f),this.timeSelect.attr("r",c)):this.timeSelect=t.addShape("circle",{attrs:{x:u,y:f,r:c,fill:"#607889"}}),this.timeSelectText?(this.timeSelectText.attr("x",u),this.timeSelectText.attr("y",f-o*.15-14),this.timeSelectText.attr("text",this.currentTick)):this.timeSelectText=t.addShape("text",{attrs:{x:u,y:f-o*.15-14,text:this.currentTick,textAlign:"center",textBaseline:"top",fill:"#607889"}})},r.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1},r.prototype.setTimeSelectX=function(t){var e=this.timeSelect.attr("x")+t;e<this.timeLine.x&&(e=this.timeLine.x),e>this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x+this.timeLine.width,this.isPlay&&(this.config.loop?this.timeSelect.attr("x")===this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x):(this.isPlay=!1,this.changePlayStatus()))),this.timeSelect.attr("x",e),this.timeSelectText.attr("x",e);var i=this.adjustTickIndex(e);this.currentTick!==this.config.ticks[i]&&(this.currentTick=this.config.ticks[i],this.timeSelectText.attr("text",this.currentTick),this.emit(CA,this.currentTick)),this.getCanvas().draw()},r.prototype.syncCurrnentTick=function(){var t=this,e=this.config.ticks,i=this.timeLine.width/(e.length-1),a=(0,h.findIndex)(e,function(s){return s===t.currentTick}),o=this.timeLine.x+a*i;this.timeSelect.attr("x",o),this.timeSelectText.attr("x",o),this.getCanvas().draw()},r.prototype.startPlay=function(){var t=this;return window.requestAnimationFrame(function(){var e=t.config,i=e.speed,a=e.ticks,o=t.timeLine.width,s=o/a.length,l=s/(i*1e3/60);t.setTimeSelectX(l),t.isPlay&&(t.playHandler=t.startPlay())})},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.timeLineButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.emit(Fd,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),t&&(this.syncCurrnentTick(),this.emit(Rd,null))),this.getCanvas().draw()},r.prototype.initEvent=function(){var t=this;this.timeLineButton.off("click"),this.timeLineButton.on("click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),this.timeSelect.off("mousedown"),this.timeSelect.on("mousedown",function(e){t.onTimeSelectMouseDown(e)})},r}(Ms),_A=TA,PA=40;function Nd(n){return(0,Rt.__assign)({loop:!1,auto:!0,height:PA,padding:[0,20,0,0],speed:2},n)}var LA=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.onChangeFn=(0,h.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var i=Nd(e),a=i.padding[0],o=i.padding[2];return new si(t.minX,t.maxY-i.height-a-o,t.width,i.height+a+o)},r.prototype.setAnimate=function(t){var e=this.view.geometries;this.view.animate(t),e.forEach(function(i){i.animate(t)})},r.prototype.start=function(){},r.prototype.renderTimeLine=function(){var t=this;this.config=Nd(this.getInteractionConfig());var e=this.view.viewBBox,i=this.config,a=i.loop,o=i.padding,s=i.speed,l=o[0],u=o[1],f=o[2],c=o[3],v=this.getRange(),g=this.getTicks(),C=e.width-c-u,O={x:e.minX+c,y:v.tl.y+l,width:C,height:v.height-l-f,loop:a,ticks:g,speed:s,defaultCurrentTick:g[0]};this.timeline?(0,h.isEqual)(O,this.timeLineConfig)||(this.timeLineConfig=O,this.timeline.update(O)):(this.container=this.canvas.addGroup(),this.timeline=new _A((0,Rt.__assign)({container:this.container},O)),this.timeline.init(),this.timeline.render(),this.timeline.on("timelinestart",function(){t.originAnimation=t.view.getOptions().animate,t.setAnimate(!0)}),this.timeline.on("timelineend",function(){t.setAnimate(t.originAnimation)}),this.timeline.on("timelinechange",this.onChangeFn),this.timeline.on("timelineupdate",this.onChange.bind(this)),this.view.data(this.getFilterData(g[0])),this.timeLineConfig=O)},r.prototype.onChange=function(t){var e=this.getFilterData(t);this.view.changeData(e)},r.prototype.getFilterData=function(t){var e=this.config.field,i=this.getViewLayer().options.data;return i.filter(function(a){return a[e]===t})},r.prototype.getTicks=function(){var t=this.config.field,e=this.getViewLayer().options.data;return(0,h.uniq)(e.map(function(i){return i[t]}))},r.prototype.render=function(){var t=this;this.firstRender=!0,this.view.on(_i.VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(){t.renderTimeLine()}),this.view.on(_i.VIEW_LIFE_CIRCLE.BEFORE_PAINT,function(){t.renderTimeLine()}),this.view.on(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1}),this.view.on(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1})},r.prototype.clear=function(){this.timeline&&(this.timeline.destroy(),this.timeline=null),this.container&&(this.container.remove(!0),this.container=null)},r}(ba),IA=LA;function kA(n,r){var t=[1,0,0,0,1,0,0,0,1],e=Ri.transform(t,r);n.setMatrix(e)}function Uo(n,r){var t=r?(0,h.clone)(r):[1,0,0,0,1,0,0,0,1];return Ri.transform(t,n)}function Yd(n,r,t,e){var i=e?(0,h.clone)(e):[1,0,0,0,1,0,0,0,1];i[6]=r,i[7]=t,n.setMatrix(i)}function OA(n,r,t){rd.translate(n,r,t)}function qY(n,r){Util.rotate(n,r)}var BA=document.createElement("canvas"),Gd=BA.getContext("2d"),Il=(0,h.memoize)(function(n,r){r===void 0&&(r={});var t=r.fontSize,e=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return Gd.font=[a,o,i,t+"px",e].join(" "),Gd.measureText((0,h.isString)(n)?n:"").width},function(n,r){return r?(0,Rt.__spreadArrays)([n],(0,h.values)(r)).join(""):n}),zd=function(n,r,t){var e=16,i=Il("...",t),a;(0,h.isString)(n)?a=n:a=(0,h.toString)(n);var o=r,s=[],l,u;if(Il(n,t)<=r)return n;for(;l=a.substr(0,e),u=Il(l,t),!(u+i>o&&u>o);)if(s.push(l),o-=u,a=a.substr(e),!a)return s.join("");for(;l=a.substr(0,1),u=Il(l,t),!(u+i>o);)if(s.push(l),o-=u,a=a.substr(1),!a)return s.join("");return s.join("")+"..."},rn;(function(n){n.TOOLTIP_INDICATOR_INNER="tooltip_indicator-inner",n.TOOLTIP_INDICATOR_TITLE="tooltip_indicator-title",n.TOOLTIP_INDICATOR_BODY="tooltip_indicator-body",n.TOOLTIP_INDICATOR_ITEM_GROUP="tooltip_indicator-item-group",n.TOOLTIP_INDICATOR_ITEM_BACKGROUND="tooltip_indicator-item-background",n.TOOLTIP_INDICATOR_ITEM_LINE="tooltip_indicator-item-line",n.TOOLTIP_INDICATOR_ITEM_TITLE="tooltip_indicator-item-title",n.TOOLTIP_INDICATOR_ITEM_BODY="tooltip_indicator-item-body",n.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP="tooltip_indicator-item-value-group",n.TOOLTIP_INDICATOR_ITEM_NAME="tooltip_indicator-item-name",n.TOOLTIP_INDICATOR_ITEM_VALUE="tooltip_indicator-item-value"})(rn||(rn={}));var kl;(function(n){n.ON_SELECT_ITEM="onSelectItem"})(kl||(kl={}));var co;(function(n){n[n.LARGE=12]="LARGE",n[n.NORMAL=8]="NORMAL",n[n.SMALL=4]="SMALL"})(co||(co={}));var DA=160,FA=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.curX=0,t.curY=0,t.offsetX=0,t.scrollWidth=0,t.onBodyGroupMousemove=function(e){var i=NA(e.target,function(o){return o.get("name")===rn.TOOLTIP_INDICATOR_ITEM_GROUP});if(i){var a=i.get("delegateObject");t.doSelectItem(a.item.id)}},t.onWheel=function(e){var i=t.config.width,a=i===void 0?0:i,o=e.deltaX,s=Math.min(t.scrollWidth-a,0)-(t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2)),l=Math.max(t.scrollWidth-a,0)+t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2),u=(0,h.clamp)(t.offsetX+o,s,l);u!==t.offsetX&&(OA(t.bodyGroup,t.offsetX-u,0),t.offsetX=u)},t}return r.prototype.destroy=function(){this.offEvents(),n.prototype.destroy.call(this)},r.prototype.selectItem=function(t){this.doSelectItem(t)},r.prototype.resetSelect=function(){this.doSelectItem(this.selectedItemId)},r.prototype.initConfig=function(t){var e,i=t.theme,a=i===void 0?{}:i,o={x:0,y:0,title:{text:"",spacingY:co.NORMAL,style:{}},line:{spacingX:co.SMALL,width:2,style:{}},itemTitle:{spacingX:0,spacingY:co.SMALL,style:{}},itemName:{spacingX:co.NORMAL,spacingY:co.SMALL,style:{}},itemValue:{style:{}},itemBackground:{style:{opacity:0,fill:"#000"}},itemSpacing:co.LARGE};this.config=(0,h.deepMix)({},(e=a==null?void 0:a.components)===null||e===void 0?void 0:e.tooltipIndicator,o,t),this.selectedItemId=this.config.selectedItem},r.prototype.renderInner=function(t){var e=this;this.resetRender();var i=this.config,a=i.items,o=i.x,s=i.y,l=[],u=t.addGroup({name:rn.TOOLTIP_INDICATOR_INNER});this.renderTitle(u),this.bodyGroup=u.addGroup({name:rn.TOOLTIP_INDICATOR_BODY}),a==null||a.forEach(function(f,c){l.push(e.renderItem(e.bodyGroup,f,c))}),this.layoutItems(u),Yd(u,o,s),this.applyClip(t),this.bindEvents(u)},r.prototype.renderTitle=function(t){var e=this.config.title;if(e==null?void 0:e.text){var i=t.addShape({type:"text",name:rn.TOOLTIP_INDICATOR_TITLE,attrs:(0,Rt.__assign)({text:e==null?void 0:e.text,textAlign:"left",textBaseline:"top"},(e==null?void 0:e.style)||{})}),a=i.getBBox();return this.curY+=a.height,this.curY+=e.spacingY||0,i}},r.prototype.renderItem=function(t,e,i){var a=this.config.itemBackground,o=t.addGroup({name:rn.TOOLTIP_INDICATOR_ITEM_GROUP,delegateObject:{item:e,index:i}}),s=this.curX,l=this.curY,u=o.addShape({name:rn.TOOLTIP_INDICATOR_ITEM_BACKGROUND,type:"rect",attrs:(0,Rt.__assign)({x:this.curX,y:this.curY,width:1,height:1},a.style||{})}),f=this.renderLine(o,e);this.renderItemTitle(o,e),this.renderItemValues(o,e);var c=o.getBBox();return f.attr({y2:f.attr("y1")+c.height}),this.curX=s+c.width,this.curX+=this.config.itemSpacing||0,u.attr({width:this.curX-s-u.attr("lineWidth")*2,height:this.curY-l-u.attr("lineWidth")*2}),this.curY=l,o},r.prototype.renderLine=function(t,e){var i=this.config.line,a=i.width||2,o=(0,Rt.__assign)({x1:this.curX+a/2,y1:this.curY,x2:this.curX+a/2,y2:this.curY,lineWidth:a,stroke:e.color},(i==null?void 0:i.style)||{}),s=t.addShape({name:rn.TOOLTIP_INDICATOR_ITEM_LINE,type:"line",attrs:o}),l=s.getBBox();return this.curX+=l.width,this.curX+=i.spacingX||0,s},r.prototype.renderItemTitle=function(t,e){var i=this.config.itemTitle,a=zd(e.title,DA,i.style||{}),o=t.addShape({name:rn.TOOLTIP_INDICATOR_ITEM_TITLE,type:"text",attrs:(0,Rt.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:a},i.style||{})}),s=o.getBBox();return this.curY+=s.height,this.curY+=i.spacingY||0,o},r.prototype.renderItemValues=function(t,e){var i=this,a,o=t.addGroup({name:rn.TOOLTIP_INDICATOR_ITEM_BODY}),s=this.curX;return(a=e.values)===null||a===void 0||a.forEach(function(l,u){var f=o.addGroup({name:rn.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP,delegateObject:{item:e,valueIndex:u}});i.curX=s,i.renderItemValueName(f,l),i.renderItemValueValue(f,l)}),this.layoutItemValues(o),o},r.prototype.renderItemValueName=function(t,e){var i=this.config.itemName;if(e.name){var a=t.addShape({name:rn.TOOLTIP_INDICATOR_ITEM_NAME,type:"text",attrs:(0,Rt.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.name},i.style||{})}),o=a.getBBox();return e.wrapLine?(this.curY+=o.height,this.curY+=i.spacingY||0):(this.curX+=o.width,this.curX+=i.spacingX||0),a}},r.prototype.renderItemValueValue=function(t,e){var i=this.config,a=i.itemName,o=i.itemValue,s=t.addShape({name:rn.TOOLTIP_INDICATOR_ITEM_VALUE,type:"text",attrs:(0,Rt.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.value},o.style||{})}),l=s.getBBox();return this.curY+=l.height,this.curY+=a.spacingY||0,s},r.prototype.layoutItems=function(t){var e=t.findAllByName(rn.TOOLTIP_INDICATOR_BODY)[0],i=t.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_GROUP);if(!(!e||i.length===0)){var a=e.getBBox();this.scrollWidth=a.width}},r.prototype.layoutItemValues=function(t){var e=t.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP),i=e.map(function(l){return si.fromBBoxObject(l.getBBox())}),a=t.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_VALUE),o=a.map(function(l){return si.fromBBoxObject(l.getBBox())}),s=Math.max.apply(Math,o.map(function(l){return l.maxX}));e.forEach(function(l,u){var f=i[u],c=l.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_NAME)[0],v=l.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_VALUE)[0];if(c&&v){var g=si.fromBBoxObject(c.getBBox()),C=si.fromBBoxObject(v.getBBox());g.height<f.height&&c.attr("y",c.attr("y")+(f.height-g.height)/2),C.height<f.height&&v.attr("y",v.attr("y")+(f.height-C.height)/2),C.maxX<s&&v.attr("x",v.attr("x")+s-C.maxX)}})},r.prototype.applyClip=function(t){var e=this.config,i=e.x,a=e.y,o=e.width,s=e.height,l=t.getBBox();(o||s)&&t.setClip({type:"rect",attrs:{x:i,y:a,width:o||l.width,height:s||l.height}})},r.prototype.doSelectItem=function(t){var e=this,i=this.getGroup(),a=i.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_GROUP);t!==this.selectedItemId?(a.forEach(function(o){var s=o.get("delegateObject");s&&e.applyItemStyle(o,s.item.id===t?"selected":"inactive")}),this.selectedItemId=t):(a.forEach(function(o){e.applyItemStyle(o)}),this.selectedItemId=void 0),this.emit(kl.ON_SELECT_ITEM,this.selectedItemId)},r.prototype.applyItemStyle=function(t,e){var i=this.config,a=i.line,o=i.itemTitle,s=i.itemName,l=i.itemValue,u=t.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_LINE)[0],f=t.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_TITLE)[0],c=t.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_NAME),v=t.findAllByName(rn.TOOLTIP_INDICATOR_ITEM_VALUE),g=e&&e+"Style";u&&(u.attr(a.style),u.attr(a[g]||{})),f&&(f.attr(o.style),f.attr(o[g]||{})),c.forEach(function(C){C.attr(s.style),C.attr(s[g]||{})}),v.forEach(function(C){C.attr(l.style),C.attr(l[g]||{})})},r.prototype.bindEvents=function(t){var e=this;this.offEvents();var i=t.findAllByName(rn.TOOLTIP_INDICATOR_BODY)[0];i.on("mousemove",this.onBodyGroupMousemove),this.addDisposable(function(){i.off("mousemove",e.onBodyGroupMousemove)}),this.gm=new ad(i),this.wheel=new hE(i),this.wheel.on("wheel",this.onWheel)},r.prototype.offEvents=function(){this.gm&&this.gm.destroy(),this.wheel&&this.wheel.destroy()},r.prototype.resetRender=function(){this.curX=0,this.curY=0,this.offsetX=0},r}(Ms),RA=FA;function NA(n,r){for(var t=n;t;){if(r(t))return t;t=t.getParent()}}function YA(n,r){return(0,h.filter)(n.geometries,function(t){return t.type===r})}function vo(n,r){return(0,h.head)(YA(n,r))}function GA(n){return(0,h.map)(n.elements,function(r){return r.shape})}function tG(n,r){n.geometries.forEach(r)}function jh(n,r){n.geometries.forEach(function(t){t.elements.forEach(function(e){r(e)})})}function zA(n,r,t){return(0,h.some)(r,function(e){return t(e.get(ia),n.get(ia))})}function Ol(n,r){var t=n.getBBox(),e=0,i=0;t.minX<r.minX?e=t.minX-r.minX:t.maxX>r.maxX&&(e=t.maxX-r.maxX),e&&n.attr("x",n.attr("x")-e),t.minY<r.minY?i=t.minY-r.minY:t.maxY>r.maxY&&(i=t.maxY-r.maxY),i&&n.attr("y",n.attr("y")-i)}function Uh(n,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(n.x+n.width+t,r.x+r.width+t)-Math.max(n.x-t,r.x-t)),i=Math.max(0,Math.min(n.y+n.height+t,r.y+r.height+t)-Math.max(n.y-t,r.y-t));return e*i}function Bl(n,r){var t=n.getBBox();return(0,h.some)(r,function(e){var i=e.getBBox();return Uh(t,i,2)>0})}var Xd=8,Vd=function(n){n===void 0&&(n={});var r=(0,Rt.__assign)({showTotal:!1,showPercent:!1,padding:[Xd,24,Xd,24],height:n.showPercent?72:54},n);return r},Zo;(function(n){n.ACTIVE_ELEMENT="tooltip_indicator_active_element",n.ACTIVE_ELEMENT_BY_X="tooltip_indicator_active_element_by_x"})(Zo||(Zo={}));var XA=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.state="selected",t.isSingle=!1,t}return r.prototype.active=function(){var t=cE.getCurrentElement(this.context);t.hasState("selected")?this.isSingle?this.setStateByX(t):this.setState(t):this.setStateByX(t)},r.prototype.setState=function(t){var e=this;jh(this.getView(),function(i){i===t?i.hasState(e.state)||i.setState(e.state,!0):i.setState(e.state,!1)}),this.isSingle=!0,this.getView().emit(Zo.ACTIVE_ELEMENT,{element:t,isSingle:!0})},r.prototype.setStateByX=function(t){var e=this,i=this.getXField(),a=t.getData()[i];jh(this.getView(),function(o){o.getData()[i]===a?o.hasState(e.state)||o.setState(e.state,!0):o.setState(e.state,!1)}),this.isSingle=!1,this.getView().emit(Zo.ACTIVE_ELEMENT_BY_X,{element:t,isSingle:!1})},r.prototype.setStateByField=function(t,e){var i=this,a=this.getView().getXScale().field,o=this.getView().getGroupScales()[0].field;jh(this.getView(),function(s){var l=s.getData();s.setState(i.state,l[a]===t&&(e===void 0||l[o]===e))})},r.prototype.getView=function(){return this.context.view},r.prototype.getXField=function(){var t=this.context.view;return t.getXScale().field},r}(me);Re("tooltip-indicator",XA),Fi("element-tooltip-indicator",{start:[{trigger:"element:mousemove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"element:touchmove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}}]});var VA=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.onElementActive=function(e){var i=e.element,a=e.isSingle,o=t.view.getXScale(),s=t.view.getXScale().field,l=t.view.getGroupScales()[0].field,u=i.getData(),f=u[s],c=t.getLegendItems(f);t.component.update({items:c,title:{text:o.getText(f)}}),t.component.render(),a&&t.component.selectItem(u[l]),t.curX=f},t.onSelectTooltipIndicatorItem=function(e){t.component&&e&&t.getInteractionAction().setStateByField(t.curX,e)},t}return r.getInteractionRange=function(t,e){var i=Vd(e),a=i.padding,o=a[0],s=a[2];return new si(t.minX,t.minY,t.width,i.height+o+s)},r.prototype.clear=function(){this.component&&this.component.destroy(),this.container&&this.container.remove(!0),this.component=null,this.container=null},r.prototype.render=function(){var t=this,e=this.view,i=function(){var a=t.view.getXScale(),o=(0,h.last)(a.getTicks()).tickValue,s=t.view.padding;(0,h.isEqual)([0,0,0,0],s)||(t.component?t.updateComponent():(t.createComponent(),t.component.on(kl.ON_SELECT_ITEM,t.onSelectTooltipIndicatorItem)),t.curX=o,t.component.update({title:{text:a.getText(t.curX)}}),t.component.render(),t.getInteractionAction().setStateByField(o))};e.legend(!1),e.removeInteraction("active-region"),e.removeInteraction("tooltip"),e.interaction("element-tooltip-indicator"),e.on(_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,i),e.on(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,i),e.on(Zo.ACTIVE_ELEMENT,this.onElementActive),e.on(Zo.ACTIVE_ELEMENT_BY_X,this.onElementActive)},r.prototype.getInteractionAction=function(){var t=this.view.interactions["element-tooltip-indicator"];return t&&t.context.getAction("tooltip-indicator")},r.prototype.createComponent=function(){var t=Vd(this.getInteractionConfig()).padding,e=t[0],i=t[1],a=t[2],o=t[3],s=this.getLegendItems(),l=this.getRange(),u=this.view.getXScale(),f=(0,h.last)(u.getTicks()).tickValue;this.container=this.canvas.addGroup(),this.component=new RA({container:this.container,x:l.x+o,y:l.y+e,width:l.width-o-i,height:l.height-e-a,theme:this.getViewLayer().getPlotTheme(),items:s}),this.component.init(),this.getInteractionAction().setStateByField(f)},r.prototype.updateComponent=function(){var t=this.getLegendItems();this.component.update({items:t})},r.prototype.getLegendItems=function(t){var e=this.view,i=e.getData(),a=e.getTheme().defaultColor,o=e.getXScale(),s=e.getYScales()[0],l=t||(0,h.last)(o.getTicks()).tickValue,u=e.getLegendAttributes(),f=u.find(function(O){return O.type==="color"}),c=[],v=e.getGroupScales()[0],g=v.field;v&&v.isCategory&&v.getTicks().forEach(function(O){var F=O.text,G=O.tickValue,Y=f.mapping(G).join("")||a;c.push({id:G,title:F,color:Y,values:[]})});var C=(i==null?void 0:i.filter(function(O){return O[o.field]===l}))||[];return c.forEach(function(O){var F=C.find(function(G){return G[g]===O.id});O.values.push({value:s.formatter?s.formatter(F[s.field]):F[s.field]})}),c},r}(ba),HA=VA;ba.registerInteraction("slider",bA),ba.registerInteraction("scrollbar",mA),ba.registerInteraction("timeline",IA),ba.registerInteraction("tooltip-indicator",HA);var Hd=ba,WA=function(){function n(r){this.innerPaddingComponents=[],this.outerPaddingComponents=[],this.plot=r.plot}return n.prototype.registerPadding=function(r,t,e){t===void 0&&(t="outer"),e===void 0&&(e=!1),t==="inner"?e?this.innerPaddingComponents.find(function(i){return i==r})||this.innerPaddingComponents.push(r):this.innerPaddingComponents.push(r):e?this.outerPaddingComponents.find(function(i){return i==r})||this.outerPaddingComponents.push(r):this.outerPaddingComponents.push(r)},n.prototype.getPaddingComponents=function(r){return r===void 0&&(r="outer"),(r==="outer"?this.outerPaddingComponents:this.innerPaddingComponents)||[]},n.prototype.clear=function(){this.innerPaddingComponents=[],this.outerPaddingComponents=(0,h.filter)(this.outerPaddingComponents,function(r){return r.afterRender})},n.prototype.clearOuterComponents=function(){(0,h.each)(this.outerPaddingComponents,function(r){r.afterRender&&r.destroy()}),this.outerPaddingComponents=[]},n.prototype.getPadding=function(){var r=this.plot.options,t=r.padding?r.padding:this.plot.config.theme.padding;return t==="auto"?[0,0,0,1]:t},n.prototype.processAutoPadding=function(){var r=this._getInnerAutoPadding();this.plot.updateConfig({padding:r}),this.plot.render()},n.prototype.processOuterPadding=function(){this.plot.layerBBox||(this.plot.layerBBox=new si(this.plot.x,this.plot.y,this.plot.width,this.plot.height));var r=this.plot.layerBBox.minX,t=this.plot.layerBBox.maxX,e=this.plot.layerBBox.minY,i=this.plot.layerBBox.maxY;return(0,h.each)(this.outerPaddingComponents,function(a){var o=a.position;if(!a.destroyed){var s=a.getBBox(),l=s.minX,u=s.maxX,f=s.minY,c=s.maxY;c>=e&&c<=i&&o==="top"&&(e=c),f>=e&&f<=i&&o==="bottom"&&(i=f),u>r&&u<=t&&o==="left"&&(r=u),l>=r&&u<=t&&o==="right"&&(t=l)}}),new si(r,e,t-r,i-e)},n.prototype._getInnerAutoPadding=function(){var r,t=this.plot.options,e=this.plot.view,i=e.coordinateBBox,a=i.maxX,o=i.maxY,s=i.minY,l=i.minX,u=this.plot.config.theme.bleeding;(0,h.isArray)(u)&&(0,h.each)(u,function(O,F){typeof u[F]=="function"&&(u[F]=u[F](t))}),this.bleeding=(0,h.clone)(u);var f=[new si(i.minX,i.minY,i.width,i.height)];((r=this.plot.config.coordinate)===null||r===void 0?void 0:r.type)==="cartesian"&&this._getCartesianAxis(e,f[0],f);var c=this._mergeBBox(f);this._getLegend(e,c,f),c=this._mergeBBox(f);var v=this.innerPaddingComponents;(0,h.each)(v,function(O){var F=O,G=F.getBBox();f.push(G)}),c=this._mergeBBox(f);var g=[s-c.minY+this.bleeding[0],c.maxX-a+this.bleeding[1],c.maxY-o+this.bleeding[2],l-c.minX+this.bleeding[3]],C=this._getPanel(e);return g[0]+=C[0],g[1]+=C[1],g[2]+=C[2],g[3]+=C[3],g},n.prototype._getCartesianAxis=function(r,t,e){var i=EE(r),a=r.getCoordinate().isTransposed;(0,h.each)(i,function(o){if(o.get("group").get("children").length!==0){var s=o.get("position"),l=o.getLayoutBBox(),u=l.minX,f=l.minY,c=l.width,v=l.height;a?s==="bottom"?e.push(new si(t.minX-c,f,c,v)):s==="left"?e.push(new si(u,t.maxY,c,v)):s==="top"&&e.push(new si(t.maxX,f,c,v)):s==="left"?e.push(new si(t.minX-c,f,c,v)):s==="bottom"?e.push(new si(u,t.maxY,c,v)):s==="right"&&e.push(new si(t.maxX,f,c,v))}})},n.prototype._getLegend=function(r,t,e){var i=AE(r);(0,h.each)(i,function(a){var o=a.get("position").split("-")[0],s=a.getLayoutBBox(),l=s.minX,u=s.minY,f=s.width,c=s.height;o==="top"?e.push(new si(l,t.minY-c,f,c)):o==="bottom"?e.push(new si(l,t.maxY,f,c)):o==="left"?e.push(new si(t.minX-f,u,f,c)):e.push(new si(t.maxX,u,f,c))})},n.prototype._getPanel=function(r){var t=[],e=r.geometries;(0,h.each)(e,function(C){C.labelsContainer&&t.push(C.labelsContainer)});var i=Infinity,a=-Infinity,o=Infinity,s=-Infinity;(0,h.each)(t,function(C){var O=C.get("children");O.forEach(function(F){if(!(F.type==="group"&&F.get("children").length===0)){var G=F.getBBox();G.minX<i&&(i=G.minX),G.maxX>a&&(a=G.maxX),G.minY<o&&(o=G.minY),G.maxY>s&&(s=G.maxY)}})});var l=r.coordinateBBox,u=Math.max(a-parseFloat(l.maxX),0);if(u>0){var f=l.width/(l.width+u);u*=f}var c=Math.max(parseFloat(l.minX)-i,0);if(c>0){var f=l.width/(l.width+c);c*=f}var v=Math.max(parseFloat(l.minY)-o,0);if(v>0){var f=l.height/(l.height+v);v*=f}var g=Math.max(s-parseFloat(l.maxY),0);if(g>0){var f=l.height/(l.height+g);g*=f}return[v,u,g,c]},n.prototype._mergeBBox=function(r){var t=Infinity,e=-Infinity,i=Infinity,a=-Infinity;return(0,h.each)(r,function(o){var s=o;t=Math.min(s.minX,t),e=Math.max(s.maxX,e),i=Math.min(s.minY,i),a=Math.max(s.maxY,a)}),{minX:t,maxX:e,minY:i,maxY:a}},n}(),jA=WA,UA="#5B8FF9",ZA=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"],KA=["#5B8FF9","#BDD2FD","#5AD8A6","#BDEFDB","#5D7092","#C2C8D5","#F6BD16","#FBE5A2","#E8684A","#F6C3B7","#6DC8EC","#B6E3F5","#9270CA","#D3C6EA","#FF9D4D","#FFD8B8","#269A99","#AAD8D8","#FF99C3","#FFD6E7"],Wd=function(n){return n&&n.split("-")[0]==="top"?12:24},jd=function(n){var r=n.title&&n.title.visible,t=n.description&&n.description.visible;return r||t?12:24},Ud=function(n){return(0,h.some)(n.interactions||[],function(r){return(r.type==="slider"||r.type==="scrollbar")&&(r.cfg&&r.cfg.type)!=="vertical"})?8:24},Zd={width:400,height:400,bleeding:[jd,24,Ud,24],padding:"auto",defaultColor:UA,colors:ZA,colors_20:KA,title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fill:"black",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,Wd,24],fontFamily:"PingFang SC",fontSize:12,fill:"grey",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(0,0,0,0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(0, 0, 0, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},circle:{autoHideLabel:!1,grid:{line:{style:{lineDash:null,lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}}},line:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}},tickLine:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},radius:{label:{textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],margin:[0,24,24,24]},label:{offset:12,textStyle:{fill:"#595959"},style:{fill:"#595959",stroke:"#ffffff",lineWidth:2}},tooltip:{"g2-tooltip":{boxShadow:"0px 0px 8px rgba(0,0,0,0.15)"},offset:10},components:{legend:{margin:[0,24,24,24]},tooltipIndicator:{title:{style:{fontSize:14,fill:"#262626"}},line:{style:{opacity:1},inactiveStyle:{opacity:.3}},itemTitle:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemName:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemValue:{style:{fontSize:14,fontWeight:"bold",fill:"#595959",opacity:1},inactiveStyle:{opacity:.3}}}}},$A={backgroundStyle:{fill:"#262626"},defaultColor:"#5B8FF9",width:400,height:400,bleeding:[jd,24,Ud,24],padding:"auto",title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fontWeight:"bold",fill:"rgba(255,255,255,0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,Wd,24],fontFamily:"PingFang SC",fontSize:12,fill:"rgba(255, 255, 255, 0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,autoRotate:!1,autoHide:!0,textStyle:{fill:"rgba(255, 255, 255, 0.45)",fontSize:12}},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)"}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12},offset:16,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12}}},circle:{autoRotateTitle:!0,grid:{style:{lineDash:null,lineWidth:1,stroke:"#E3E8EC"}},line:{style:{lineWidth:1,stroke:"#BFBFBF"}},tickLine:{style:{lineWidth:1,stroke:"#bdc8d3",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"#a0a4aa",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"#767b84",fontSize:12}}},radius:{label:{offset:12,textStyle:{fill:"#a0a4aa",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],title:{visible:!1,style:{fill:"#bdc8d3"}},text:{style:{fill:"#bdc8d3"}}},label:{offset:12,textStyle:{fill:"rgba(255, 255, 255, 0.65)"},style:{fill:"rgba(255, 255, 255, 0.65)",lineWidth:1}},components:{tooltip:{domStyles:{"g2-tooltip":{backgroundColor:"rgba(33,33,33, 0.95)",boxShadow:"0px 0px 8px rgba(0,0,0,0.65)",color:"rgba(255, 255, 255, 0.65)"}}}}},Kd={default:Zd,dark:$A};function eG(n,r){var t=Rn();Kd[n.toLowerCase()]=deepMix({},t,r)}function Rn(n){n===void 0&&(n="default");var r=Kd[n.toLowerCase()];return r||(console.warn("error in theme: Can't find the theme named %s. Please register theme first.",n),Zd)}var $d={};function Qd(n,r){var t={lineStyle:"line.line",columnStyle:"interval.rect",pointStyle:"point.circle"},e={};n==="area"&&(t={areaStyle:"area.area",lineStyle:"area.line",pointStyle:"point.circle"});var i={};return(0,h.each)(r,function(a,o){var s;if((0,h.has)(t,o)){var l=t[o];(0,h.each)(a,function(u,f){(0,h.set)(i,l+"."+[f==="normal"?"default":f==="disable"?"inactive":f]+".style",u)})}else e=(0,h.deepMix)({},e,(s={},s[o]=a,s))}),(0,h.isEmpty)(i)||(e=(0,h.deepMix)({},e,{geometries:i})),e}function $n(n,r){$d[n.toLowerCase()]=Qd(n,r)}function Jd(n){return $d[n.toLowerCase()]||{}}function QA(n){var r=(0,h.clone)(n);return r.legend||(r.legend={}),r}var Zh={axis:{x:{category:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"textWrapper",option:{lineNumber:2}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}},linear:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"nodesResampling",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"robustAbbrevaite",option:{unit:"thousand",decimal:1,abbreviateBy:"end"}},{name:"textHide"}]}},dateTime:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"datetimeStringAbbrevaite"},{name:"nodesResamplingByAbbrevate",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"nodesResampling"},{name:"nodesResampling"},{name:"textHide"}]}}},y:{linear:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"digitsAbbreviate"},{name:"textHide"}]}},category:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}}}}},qd={default:Zh};function tp(n,r){qd[n.toLowerCase()]=(0,h.deepMix)({},Zh,r)}function ep(n){var r=qd[n.toLowerCase()];return r||Zh}var JA=ht(),qA=function(){function n(){}return n.getGlobalTheme=function(r){return(0,h.isString)(r)?Rn(r):(0,h.deepMix)({},Rn(),r)},n.prototype.getPlotTheme=function(r,t){var e=r.theme;return(0,h.isString)(e)?(0,h.deepMix)({},Rn(e),Jd(t)):(0,h.deepMix)({},Rn(),Jd(t),Qd(t,e))},n.prototype.getTheme=function(r,t){var e=QA(this.getPlotTheme(r,t)),i=(0,h.deepMix)({},JA,e);return i},n.prototype.getResponsiveTheme=function(r){return ep(r)||ep("default")},n}(),Kh=qA,tT=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.interactions=[],e.labels=[],e.options=e.getOptions(t),e.initialOptions=(0,h.deepMix)({},e.options),e.paddingController=new jA({plot:e}),e.stateController=new qE({plot:e}),e.themeController=new Kh,e}return r.getDefaultOptions=function(){return{renderer:"canvas",title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"},padding:"auto",legend:{visible:!0,position:"bottom-center"},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20},xAxis:{visible:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},label:{visible:!1},interactions:[{type:"tooltip"},{type:"legend-active"},{type:"legend-filter"}],animation:!0}},r.prototype.getOptions=function(t){var e=this.options||{},i=n.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t),o=(0,h.reduce)((0,h.flatten)((0,h.map)([i,a,(0,h.hasKey)(t,"interactions")?t:e],function(s){return(0,h.get)(s,"interactions",[])})),function(s,l){var u=(0,h.findIndex)(s,function(f){return f.type===l.type});return u>=0&&s.splice(u,1),(0,Rt.__spreadArrays)(s,[l])},[]);return(0,h.deepMix)({},i,a,e,t,{interactions:o})},r.prototype.beforeInit=function(){this.emit(La.BEFORE_INIT),n.prototype.beforeInit.call(this)},r.prototype.init=function(){var t=this;n.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.config={data:this.processData(this.options.data),scales:{},legends:{},tooltip:{showTitle:!0},axes:{},coordinate:{type:"cartesian"},geometries:[],annotations:[],interactions:[],theme:this.theme,panelRange:{},animate:{},views:[]},this.paddingController.clear(),this.drawTitle(),this.drawDescription(),this.interaction(),this.coord(),this.scale(),this.axis(),this.tooltip(),this.legend(),this.addGeometry(),this.annotation(),this.animation(),this.viewRange=this.getViewRange();var e=this.viewRangeToRegion(this.viewRange);this.view=new Uu({parent:null,canvas:this.canvas,backgroundGroup:this.container.addGroup(),middleGroup:this.container.addGroup(),foregroundGroup:this.container.addGroup(),padding:this.paddingController.getPadding(),theme:this.theme,options:this.config,limitInPlot:this.isLimitInPlot(),region:e}),this.applyInteractions(),this.view.on(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){t.afterRender()})},r.prototype.afterInit=function(){n.prototype.afterInit.call(this),!(!this.view||this.view.destroyed)&&(this.options.padding!=="auto"&&this.parseEvents(),this.emit(La.AFTER_INIT))},r.prototype.afterRender=function(){var t,e;if(!(!this.view||this.view.destroyed)){var i=this.options,a=i.padding?i.padding:this.config.theme.padding;i.defaultState&&a!=="auto"&&this.stateController.defaultStates(i.defaultState),a==="auto"&&this.paddingController.processAutoPadding(),((e=(t=i.tooltip)===null||t===void 0?void 0:t.custom)===null||e===void 0?void 0:e.onChange)&&i.padding!=="auto"&&this.customTooltip()}},r.prototype.render=function(){this.emit(La.BEFORE_RENDER),n.prototype.render.call(this);var t=this.options.data;(0,h.isEmpty)(t)||this.view.render(),this.emit(La.AFTER_RENDER)},r.prototype.repaint=function(){this.canvas&&this.canvas.draw()},r.prototype.getScaleByField=function(t){return this.view.getScaleByField(t)},r.prototype.getXScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.getYScale=function(){var t=this.options.yField;if(t)return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options;if((0,h.contains)(t,"colorField"))return this.view.getScaleByField(t)},r.prototype.getShapes=function(){var t=this.view.geometries,e={};return(0,h.each)(t,function(i){var a=i.type;e[a]=i.getShapes()}),e},r.prototype.destroy=function(){this.doDestroy(),n.prototype.destroy.call(this)},r.prototype.updateConfig=function(t){this.doDestroy(),!t.padding&&this.initialOptions.padding&&this.initialOptions.padding==="auto"&&(t.padding="auto"),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){this.emit(La.BEFORE_CHANGE_DATA);var e=(0,h.isEmpty)(this.options.data);this.options.data=this.processData(t),e?(this.options.padding=this.initialOptions.padding||"auto",this.view.data(this.options.data),this.view.render()):this.view.changeData(this.options.data),this.emit(La.AFTER_CHANGE_DATA)},r.prototype.getPlot=function(){return this.view},r.prototype.getLabels=function(){return this.labels},r.prototype.getTheme=function(){return this.theme?this.theme:this.themeController.getTheme(this.options,this.type)},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme(this.type)},r.prototype.getPlotTheme=function(){return this.themeController.getPlotTheme(this.options,this.type)},r.prototype.getInteractions=function(){return this.interactions},r.prototype.bindStateManager=function(t,e){this.stateController.bindStateManager(t,e)},r.prototype.setActive=function(t,e){this.stateController.setState({type:"active",condition:t,style:e})},r.prototype.setSelected=function(t,e){this.stateController.setState({type:"selected",condition:t,style:e})},r.prototype.setDisable=function(t,e){this.stateController.setState({type:"disable",condition:t,style:e})},r.prototype.setDefault=function(t,e){this.stateController.setState({type:"default",condition:t,style:e})},r.prototype.getData=function(t,e){return this.processData((this.options.data||[]).slice(t,e))},r.prototype.processData=function(t){return t},r.prototype.scale=function(){var t=(0,h.mapValues)(this.config.scales,function(i){var a=i.type;return a?{type:a}:{}}),e=(0,h.deepMix)({},this.config.scales,this.options.meta||{},t);this.setConfig("scales",e)},r.prototype.axis=function(){var t=On("axis",{plot:this,dim:"x"}),e=On("axis",{plot:this,dim:"y"}),i={};i[this.options.xField]=t,i[this.options.yField]=e,this.setConfig("axes",i)},r.prototype.tooltip=function(){var t,e;if(this.options.tooltip.visible===!1){this.setConfig("tooltip",!1);return}var i=(0,h.get)(this.options,"tooltip");((t=i.custom)===null||t===void 0?void 0:t.container)&&(i.container=i.custom.container),((e=i.custom)===null||e===void 0?void 0:e.customContent)&&(i.customContent=i.custom.customContent),this.setConfig("tooltip",(0,h.deepMix)({},i)),(0,h.deepMix)(this.config.theme.tooltip,this.options.tooltip.domStyles)},r.prototype.createTooltipContainer=function(){var t=document.createElement("div");return t.className="g2-tooltip",t},r.prototype.customTooltip=function(){var t=this.options.tooltip.custom,e;t.container&&(e=(0,h.isString)(t.container)?document.getElementById(t.container):t.container),e||(e=this.createTooltipContainer()),this.view.on("tooltip:show",function(i){(t==null?void 0:t.onChange)&&t.onChange(e,i)}),this.view.hideTooltip(),this.view.on("tooltip:change",function(i){t.onChange(e,i)})},r.prototype.getLegendPosition=function(t){var e=t.split("-");return e&&e.length>1&&e[1]==="center"?e[0]:t},r.prototype.legend=function(){var t;if(this.options.legend.visible===!1){this.setConfig("legends",!1);return}var e=(0,h.deepMix)({},this.theme.legend,this.options.legend),i={position:this.getLegendPosition((0,h.get)(e,"position")),offsetX:(0,h.get)(e,"offsetX"),offsetY:(0,h.get)(e,"offsetY"),flipPage:(0,h.get)(e,"flipPage"),marker:(0,h.get)(e,"marker"),title:((t=e.title)===null||t===void 0?void 0:t.visible)?(0,h.get)(e,"title"):null,itemName:(0,h.get)(e,"text")};this.setConfig("legends",i)},r.prototype.annotation=function(){var t=this,e=[];this.config.coordinate.type==="cartesian"&&this.options.guideLine&&(0,h.each)(this.options.guideLine,function(i){var a=On("guideLine",{plot:t,cfg:i});e.push(a)}),this.setConfig("annotations",e)},r.prototype.interaction=function(){var t=this,e=this.options.interactions,i=e===void 0?[]:e;(0,h.each)(i,function(a){var o=a.type;if(o==="slider"||o==="scrollbar"){var s={label:{autoHide:!0,autoRotate:!1}};t.options.xAxis=(0,h.deepMix)({},t.options.xAxis,s)}t.setConfig("interaction",a)})},r.prototype.animation=function(){this.options.animation===!1&&this.setConfig("animate",!1)},r.prototype.applyInteractions=function(){var t=this,e=si.fromBBoxObject(this.layerBBox),i=this.title||this.description,a=new si(e.minX,e.minY,e.width,i?i.getBBox().maxY:0);e=e.cut(a,_i.DIRECTION.TOP);var o=this.options.interactions,s=o===void 0?[]:o;this.interactions&&this.interactions.forEach(function(l){l.destroy()}),this.interactions=[],s.forEach(function(l){var u=Hd.getInteraction(l.type,t.type);if(u){var f=new u({view:t.view},t,u.getInteractionRange(e,l.cfg),l.cfg);f.render(),t.interactions.push(f)}})},r.prototype.setConfig=function(t,e){if(t==="geometry"){this.config.geometries.push(e);return}if(t==="interaction"){this.config.interactions.push(e);return}if(e===!1){this.config[t]=!1;return}(0,h.assign)(this.config[t],e)},r.prototype.parseEvents=function(t){var e=this,i=this.options;if(i.events){n.prototype.parseEvents.call(this,i.events);var a=t?t.EVENT_MAP:Si;(0,h.each)(i.events,function(o,s){if((0,h.isFunction)(o)){var l=a[s]||s,u=o;vn(e,l,u)}})}},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),Wo(t.title)){var i=this.width,a=this.config.theme,o=new Sl({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,h.mix)(a.title,t.title.style),wrapperWidth:i-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:Wo(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o,this.paddingController.registerPadding(o,"outer")}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),Wo(t.description)){var i=this.width,a=this.config.theme,o=0;if(this.title){var s=this.title.getBBox();o+=s.minY+s.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var l=new Sl({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,h.mix)(a.description,t.description.style),wrapperWidth:i-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=l,this.paddingController.registerPadding(l,"outer")}},r.prototype.doRenderLabel=function(t,e){(0,h.each)(this.labels,function(s){s.destroy()}),this.labels=[];var i={layer:this,container:t.labelsContainer,geometry:t,label:e},a=IE(e.type);if(a){var o=new a(i);o.init(),o.render(),this.labels.push(o)}},r.prototype.doDestroy=function(){this.doDestroyInteractions(),this.doDestroyLabels(),this.view.destroyed||this.view.destroy()},r.prototype.doDestroyInteractions=function(){this.interactions&&this.interactions.forEach(function(t){t.destroy()}),this.interactions=[]},r.prototype.doDestroyLabels=function(){(0,h.each)(this.labels,function(t){t.destroy()}),this.labels=[]},r.prototype.getViewRange=function(){var t=this,e=this.options.interactions,i=e===void 0?[]:e,a=this.paddingController.processOuterPadding();i.forEach(function(s){var l=Hd.getInteraction(s.type,t.type),u=l&&l.getInteractionRange(a,s.cfg),f="";u&&(u.maxY===a.maxY&&u.minY>a.minY?f="bottom":u.maxX===a.maxX&&u.minX>a.minX?f="right":u.minX===a.minX&&u.maxX>a.maxX?f="left":u.minY===a.minY&&u.maxY<a.maxY&&(f="top"),t.paddingController.registerPadding({interaction:s.type,name:s.type,getBBox:function(){return u},position:f},"outer"))});var o=this.paddingController.processOuterPadding();return o},r.prototype.isLimitInPlot=function(){var t=this.options.yAxis;return!!((0,h.hasKey)(t,"max")||(0,h.hasKey)(t,"min")||(0,h.hasKey)(t,"maxLimit")||(0,h.hasKey)(t,"minLimit"))},r.prototype.viewRangeToRegion=function(t){var e=this,i=e.x,a=e.y,o=e.width,s=e.height,l={x:0,y:0},u={x:1,y:1};return l.x=t.minX/(i+o),l.y=t.minY/(a+s),u.x=t.maxX/(i+o),u.y=t.maxY/(a+s),{start:l,end:u}},r}(wl),nn=tT,eT=d(76374),rT=function(){function n(r){var t=this;this.onResize=(0,h.debounce)(function(){if(!t.plot.destroyed){var a=t.getCanvasSize(),o=a.width,s=a.height;t.width===o&&t.height===s||(t.width=o,t.height=s,t.plot.updateConfig({width:o,height:s}),t.plot.render())}},300);var e=r.containerDOM,i=r.plot;this.containerDOM=e,this.plot=i,this.init()}return n.prototype.getCanvasSize=function(){var r=Rn(),t=this.plot.width?this.plot.width:r.width,e=this.plot.height?this.plot.height:r.height;return this.plot.forceFit&&(t=this.containerDOM.offsetWidth?this.containerDOM.offsetWidth:t,e=this.containerDOM.offsetHeight?this.containerDOM.offsetHeight:e),{width:t,height:e}},n.prototype.getCanvasDOM=function(){return this.canvas.get("container")},n.prototype.updateCanvasSize=function(){var r=this.getCanvasSize(),t=r.width,e=r.height;this.width=t,this.height=e,this.canvas.changeSize(t,e)},n.prototype.updateCanvasTheme=function(){var r=this.plot.theme,t=Kh.getGlobalTheme(r),e=(0,h.get)(t,"backgroundStyle.fill");e&&this.updateCanvasStyle({backgroundColor:e})},n.prototype.updateCanvasStyle=function(r){(0,Tt.Z)(this.getCanvasDOM(),r),(0,Tt.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},n.prototype.destroy=function(){this.resizeObserver&&(this.resizeObserver.unobserve(this.containerDOM),this.resizeObserver.disconnect(),this.containerDOM=null),this.canvas.destroy()},n.prototype.bindForceFit=function(){var r=this.plot.forceFit;r&&(this.resizeObserver=new eT.Z(this.onResize),this.resizeObserver.observe(this.containerDOM))},n.prototype.init=function(){this.initGCanvas(),this.bindForceFit(),this.updateCanvasStyle({position:"relative"})},n.prototype.initGCanvas=function(){var r=this.plot,t=r.renderer,e=t===void 0?"canvas":t,i=r.pixelRatio,a=r.localRefresh,o=a===void 0?!1:a,s=this.getCanvasSize(),l=s.width,u=s.height,f=e==="canvas"?ov:pv;this.canvas=new f({localRefresh:o,container:this.containerDOM,width:l,height:u,pixelRatio:i}),this.width=l,this.height=u,this.updateCanvasTheme()},n}(),iT=rT;function nT(n,r){return!!(n&&r&&n===r)}function aT(n,r){return n.x>=r.minX&&n.x<=r.maxX&&n.y>=r.minY&&n.y<=r.maxY}var oT=function(){function n(r){this.plot=r.plot,this.canvas=r.canvas,this.eventHandlers=[]}return n.prototype.bindEvents=function(){this.addEvent(this.canvas,"mousedown",(0,h.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"mousemove",(0,h.wrapBehavior)(this,"onMove")),this.addEvent(this.canvas,"mouseup",(0,h.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"click",(0,h.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"dblclick",(0,h.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"contextmenu",(0,h.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"wheel",(0,h.wrapBehavior)(this,"onEvents"))},n.prototype.clearEvents=function(){var r=this.eventHandlers;(0,h.each)(r,function(t){t.target.off(t.type,t.handler)})},n.prototype.addEvent=function(r,t,e){r.on(t,e),this.eventHandlers.push({target:r,type:t,handler:e})},n.prototype.onEvents=function(r){var t=this.getEventObj(r),e=r.target;!this.isShapeInView(e)&&e.name&&this.plot.emit(e.name+":"+r.type,r),this.plot.emit(""+r.type,t);var i=this.plot.getLayers();i.length>0&&this.onLayerEvent(i,t,r.type)},n.prototype.onMove=function(r){var t=r.target,e=this.getEventObj(r);!this.isShapeInView(t)&&t.name&&(this.plot.emit(t.name+":"+r.type,e),this.lastShape&&!nT(t,this.lastShape)&&(this.lastShape&&this.plot.emit(this.lastShape.name+":mouseleave",e),this.plot.emit(t.name+":mouseenter",e)),this.lastShape=t),this.plot.emit("mousemove",e);var i=this.plot.getLayers();i.length>0&&this.onLayerEvent(i,e,"mousemove")},n.prototype.isShapeInView=function(r){for(var t=["frontgroundGroup","backgroundGroup","panelGroup"],e=r.get("parent");e;){var i=e.get("name");if(i&&(0,h.contains)(t,i))return!0;e=e.get("parent")}return!1},n.prototype.getEventObj=function(r){var t={clientX:r.clientX,clientY:r.clientY,x:r.x,y:r.y,plot:this.plot,data:r.data?r.data.data:null,canvas:this.canvas,target:r.target,gEvent:r};return t},n.prototype.onLayerEvent=function(r,t,e){var i=this;(0,h.each)(r,function(a){var o=a.getGlobalBBox();if(aT({x:t.x,y:t.y},o)){a.emit(""+e,t);var s=a.layers;s.length>0&&i.onLayerEvent(s,t,e)}})},n}(),sT=oT,rp={};function pi(n,r){rp[n.toLowerCase()]=r}function lT(n){return rp[n.toLowerCase()]}var uT=function(n){(0,Rt.__extends)(r,n);function r(t,e){var i=n.call(this)||this;return i.containerDOM=typeof t=="string"?document.getElementById(t):t,i.forceFit=(0,h.isNil)(e.forceFit)?(0,h.isNil)(e.width)&&(0,h.isNil)(e.height):e.forceFit,i.renderer=e.renderer||"canvas",i.pixelRatio=e.pixelRatio||null,i.width=e.width,i.height=e.height,i.theme=e.theme,i.localRefresh=e.localRefresh,i.canvasController=new iT({containerDOM:i.containerDOM,plot:i}),i.width=i.canvasController.width,i.height=i.canvasController.height,i.canvas=i.canvasController.canvas,i.layers=[],i.destroyed=!1,i.createLayers(e),i.eventController=new sT({plot:i,canvas:i.canvasController.canvas}),i.eventController.bindEvents(),i.parseEvents(e),i}return r.prototype.destroy=function(){this.eachLayer(function(t){t.destroy()}),this.canvasController.destroy(),this.eventController.clearEvents(),this.layers=[],this.destroyed=!0},r.prototype.repaint=function(){this.canvasController.canvas.draw()},r.prototype.updateConfig=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof nn&&a.updateConfig(t)});else{var i=this.layers[0];i instanceof wl&&i.updateConfig(t)}t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.theme&&(this.theme=t.theme),this.canvasController.updateCanvasSize(),this.canvasController.updateCanvasTheme()},r.prototype.changeData=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof nn&&a.changeData(t)});else{var i=this.layers[0];i instanceof nn&&i.changeData(t)}},r.prototype.getScaleByField=function(t){return this.layers[0].getScaleByField(t)},r.prototype.getXScale=function(){return this.layers[0].getXScale()},r.prototype.getYScale=function(){return this.layers[0].getYScale()},r.prototype.getColorScale=function(){return this.layers[0].getColorScale()},r.prototype.getPlotTheme=function(){var t=this.layers[0];return t.getPlotTheme()},r.prototype.getData=function(){var t=this.layers[0];return t.getData()},r.prototype.bindStateManager=function(t,e){this.eachLayer(function(i){i instanceof nn&&i.bindStateManager(t,e)})},r.prototype.setActive=function(t,e){this.eachLayer(function(i){i instanceof nn&&i.setActive(t,e)})},r.prototype.setSelected=function(t,e){this.eachLayer(function(i){i instanceof nn&&i.setSelected(t,e)})},r.prototype.setDisable=function(t,e){this.eachLayer(function(i){i instanceof nn&&i.setDisable(t,e)})},r.prototype.setDefault=function(t,e){this.eachLayer(function(i){i instanceof nn&&i.setDefault(t,e)})},r.prototype.getView=function(){return this.layers[0].view},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers[t]},r.prototype.getCanvas=function(){return this.canvasController.canvas},r.prototype.getLayers=function(){return this.layers},r.prototype.render=function(){this.eachLayer(function(t){return t.render()})},r.prototype.eachLayer=function(t){(0,h.each)(this.layers,t)},r.prototype.addLayer=function(t){var e=(0,h.findIndex)(this.layers,function(i){return i===t});e<0&&this.layers.push(t)},r.prototype.createLayers=function(t){if(!t.layers){if(t.type){var e=lT(t.type),i=(0,h.deepMix)({},t,{canvas:this.canvasController.canvas,x:0,y:0,width:this.width,height:this.height}),a=new e(i);this.addLayer(a)}}},r.prototype.parseEvents=function(t){var e=this,i=(0,h.keys)(fd);t.events&&(0,h.each)(t.events,function(a,o){if((0,h.contains)(i,o)&&(0,h.isFunction)(a)){var s=fd[o]||o,l=a;e.on(s,l)}})},r}(Ve.default),ni=uT,hT=function(){function n(r){(0,h.assign)(this,r),this.init()}return n.prototype.init=function(){this.config={type:this.type,position:{fields:this.positionFields}}},n}(),Es=hT,fT=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"area",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls||!1},t.smooth&&(this.config.shape={values:["smooth"]}),(this._getColorMappingField()||t.color)&&this.parseColor(),(t.areaStyle||t.area&&t.area.style)&&this.parseStyle()},r.prototype.parseColor=function(){var t=this.plot.options,e={},i=this._getColorMappingField();if(i&&(e.fields=i),(0,h.has)(t,"color")){var a=t.color;(0,h.isString)(a)?e.values=[a]:(0,h.isFunction)(a)?e.callback=a:(0,h.isArray)(a)&&(i?e.values=a:a.length>0&&(e.values=[a[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.areaStyle?t.areaStyle:t.area.style,i={};(0,h.isFunction)(e)&&t.seriesField?(i.fields=[t.seriesField],i.callback=e):i.cfg=e,this.config.style=i},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],i=0,a=e;i<a.length;i++){var o=a[i];if((0,h.get)(t,o))return[t[o]]}},r}(Es),ip=fT;function cT(n,r){var t=[];if(n.length){for(var e=0,i=n.length;e<i;e+=1){var a=n[e],o=e===0?"M":"L";t.push([o,a.x,a.y])}r&&t.push(["Z"])}return t}function np(n,r){var t=n.getCenter(),e=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));return e}function $h(n,r){for(var t=[n[0]],e=1,i=n.length;e<i;e=e+2){var a=r.convertPoint({x:n[e],y:n[e+1]});t.push(a.x,a.y)}return t}function vT(n,r,t){var e=t.isTransposed,i=t.startAngle,a=t.endAngle,o={x:n[1],y:n[2]},s={x:r[1],y:r[2]},l=[],u=e?"y":"x",f=Math.abs(s[u]-o[u])*(a-i),c=s[u]>=o[u]?1:0,v=f>Math.PI?1:0,g=t.convertPoint(s),C=np(t,g);if(C>=.5)if(f===Math.PI*2){var O={x:(s.x+o.x)/2,y:(s.y+o.y)/2},F=t.convertPoint(O);l.push(["A",C,C,0,v,c,F.x,F.y]),l.push(["A",C,C,0,v,c,g.x,g.y])}else l.push(["A",C,C,0,v,c,g.x,g.y]);return l}function dT(n){each(n,function(r,t){var e=r;if(e[0].toLowerCase()==="a"){var i=n[t-1],a=n[t+1];a&&a[0].toLowerCase()==="a"?i&&i[0].toLowerCase()==="l"&&(i[0]="M"):i&&i[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var pT=function(n,r,t,e){var i=[],a,o,s=!!e,l,u;if(s){l=[Infinity,Infinity],u=[-Infinity,-Infinity];for(var f=0,c=n.length;f<c;f++){var v=n[f];l=xe.min([0,0],l,v),u=xe.max([0,0],u,v)}l=xe.min([0,0],l,e[0]),u=xe.max([0,0],u,e[1])}for(var f=0,g=n.length;f<g;f++){var v=n[f];if(t)a=n[f?f-1:g-1],o=n[(f+1)%g];else if(f===0||f===g-1){i.push(v);continue}else a=n[f-1],o=n[f+1];var C=[0,0];C=xe.sub(C,o,a),C=xe.scale(C,C,r);var O=xe.distance(v,a),F=xe.distance(v,o),G=O+F;G!==0&&(O/=G,F/=G);var Y=xe.scale([0,0],C,-O),$=xe.scale([0,0],C,F),q=xe.add([0,0],v,Y),ut=xe.add([0,0],v,$);s&&(q=xe.max([0,0],q,l),q=xe.min([0,0],q,u),ut=xe.max([0,0],ut,l),ut=xe.min([0,0],ut,u)),i.push(q),i.push(ut)}return t&&i.push(i.shift()),i};function gT(n,r,t){for(var e=!!r,i=[],a=0,o=n.length;a<o;a+=2)i.push([n[a],n[a+1]]);for(var s=pT(i,.4,e,t),l=i.length,u=[],f,c,v,a=0;a<l-1;a++)f=s[a*2],c=s[a*2+1],v=i[a+1],u.push(["C",f[0],f[1],c[0],c[1],v[0],v[1]]);return e&&(f=s[l],c=s[l+1],v=i[0],u.push(["C",f[0],f[1],c[0],c[1],v[0],v[1]])),u}function yT(n,r){return cT(n,r)}function Qh(n,r,t){var e=[],i=n[0],a=null;if(n.length<=2)return yT(n,r);(0,h.each)(n,function(l){(!a||!(a.x===l.x&&a.y===l.y))&&(e.push(l.x),e.push(l.y),a=l)});var o=t||[[0,0],[1,1]],s=gT(e,r,o);return s.unshift(["M",i.x,i.y]),s}function rG(n,r){return np(n,r)}function iG(n,r){var t=n.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function nG(n,r){var t=[];return each(r,function(e){var i=e[0];switch(i.toLowerCase()){case"m":case"l":case"c":t.push($h(e,n));break;case"z":default:t.push(e);break}}),t}function aG(n,r){var t=[],e,i,a,o;return each(r,function(s,l){var u=s[0];switch(u.toLowerCase()){case"m":case"c":case"q":t.push($h(s,n));break;case"l":e=r[l-1],i=s,a=n.isTransposed,o=a?e[e.length-2]===i[1]:e[e.length-1]===i[2],o?t=t.concat(vT(e,i,n)):t.push($h(s,n));break;case"z":default:t.push(s);break}}),dT(t),t}Ai("area","miniArea",{draw:function(n,r){var t=n.style?n.style.opacity:null,e=ap(n,this,!1),i=(0,h.deepMix)({},{lineJoin:"round",lineCap:"round"},n.style),a=r.addShape("path",{attrs:{path:e,fill:sp(n.color||Rn().defaultColor),opacity:t||.4},style:i});return a}}),Ai("area","miniAreaSmooth",{draw:function(n,r){var t=n.style?n.style.opacity:null,e=ap(n,this,!0),i=r.addShape("path",{attrs:{path:e,fill:sp(n.color||Rn().defaultColor),opacity:t||.5}});return i}});function ap(n,r,t){var e=[[0,0],[1,1]],i=[],a=[];(0,h.each)(n.points,function(u){i.push(u[1]),a.push(u[0])}),a=r.parsePoints(a.reverse()),i=zh(r.parsePoints(i));var o=t?Qh(i,!1,e):op(i),s=op(a);s[0][0]="L";var l=o.concat(s);return l}function op(n){for(var r=[],t=0;t<n.length;t++){var e=n[t],i=t===0?"M":"L";r.push([i,e.x,e.y])}return r}function sp(n){return"l(90) 0:"+n+" 1:#ffffff"}var mT=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){n.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniAreaSmooth"]}:this.config.shape={values:["miniArea"]}},r}(ip),xT=mT,bT={main:ip,mini:xT},lp=["colorField","stackField","groupField"],wT=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){this.type="interval",n.prototype.init.call(this);var t=this.plot.options;this._needParserColor()&&this.parseColor(),this.config.color||(this.config.color={values:["#5b8ff9"]});var e=this._getSizeProps(t);e&&this.parseSize(e);var i=this._getStyleProps(t);i&&this.parseStyle(i)},r.prototype.parseColor=function(){var t=this.plot.options,e=this._getColorMappingField(t),i={};e&&(i.fields=e),t.color&&((0,h.isString)(t.color)?i.values=[t.color]:(0,h.isFunction)(t.color)?i.callback=t.color:(0,h.isArray)(t.color)?e?i.values=t.color:t.color.length>0&&(i.values=[t.color[0]]):(0,h.isObject)(t.color)&&(i.fields=e,i.callback=function(a){return t.color[a]})),this.config.color=i},r.prototype.parseSize=function(t){var e=this.plot.options,i={};(0,h.isFunction)(e[t])?(i.fields=[this.config.position.fields],i.callback=e[t]):i.values=[e[t]],this.config.size=i},r.prototype.parseStyle=function(t){var e=this.plot.options,i=this.config.color,a=this.plot.options[t],o={};(0,h.isFunction)(a)?(o.fields=(i==null?void 0:i.fields)||[e.xField,e.yField],o.callback=a):o.cfg=a,this.config.style=o},r.prototype._getSizeProps=function(t){for(var e=["columnSize","barSize"],i=0,a=e;i<a.length;i++){var o=a[i];if((0,h.get)(t,o))return o}},r.prototype._getStyleProps=function(t){for(var e=["columnStyle","barStyle","pieStyle","ringStyle"],i=0,a=e;i<a.length;i++){var o=a[i];if((0,h.get)(t,o))return o}},r.prototype._getColorMappingField=function(t){for(var e=0,i=lp;e<i.length;e++){var a=i[e];if((0,h.get)(t,a))return[t[a]]}},r.prototype._needParserColor=function(){var t=this.plot.options;if(t.color)return!0;for(var e=0,i=lp;e<i.length;e++){var a=i[e];if(t[a])return!0}return!1},r}(Es),ST=wT,CT={main:ST},MT=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"line",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls},t.lineSize&&this.parseSize(),t.smooth&&(this.config.shape={values:["smooth"]}),t.step&&(this.config.shape={values:[t.step]}),(t.seriesField||t.color)&&this.parseColor(),(t.lineStyle||(0,h.get)(t,["line","style"]))&&this.parseStyle()},r.prototype.parseSize=function(){var t=this.plot.options.lineSize,e={};(0,h.isFunction)(t)?e.callback=t:e.values=[t],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={};if(t.seriesField&&(e.fields=[t.seriesField]),(0,h.has)(t,"color")){var i=t.color;(0,h.isString)(i)?e.values=[i]:(0,h.isFunction)(i)?e.callback=i:(0,h.isArray)(i)&&(t.seriesField?e.values=i:i.length>0&&(e.values=[i[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.lineStyle||(0,h.get)(t,["line","style"]),i={fields:null,callback:null,cfg:null};(0,h.isFunction)(e)&&t.seriesField?(i.fields=[t.seriesField],i.callback=e):i.cfg=e,this.config.style=i},r}(Es),Jh=MT,ET=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;!t.xField||!t.yField||(this.config={type:"line",position:{fields:[t.xField,t.yField]},tooltip:!1},(this._getColorMappingField()||this._needParseAttribute("color"))&&this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.line.style&&this.parseStyle(),t.smooth&&(this.config.shape={values:["smooth"]}))},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.line.size?e.values=[t.line.size]:e.values=[2],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={},i=this._getColorMappingField();i&&(e.fields=i),t.line.color?e.values=[t.line.color]:(0,h.isString)(t.color)?e.values=[t.color]:(0,h.isFunction)(t.color)?(e.fields=i,e.callback=t.color):(0,h.isArray)(t.color)&&(i?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]])),this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.line.style,i={};(0,h.isFunction)(e)?(i.fields=this.config.position.fields,i.callback=e):i.cfg=e,this.config.style=i},r.prototype._needParseAttribute=function(t){var e=this.plot.options;return e[t]?!0:!!e.line[t]},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],i=0,a=e;i<a.length;i++){var o=a[i];if((0,h.get)(t,o))return[t[o]]}},r}(Jh),AT=ET;Ai("line","miniLine",{draw:function(n,r){for(var t=zh(n.points),e=[],i=0;i<t.length;i++){var a=t[i],o=i===0?"M":"L";e.push([o,a.x,a.y])}var s=(0,h.deepMix)({},{lineJoin:"round",lineCap:"round"},n.style),l=r.addShape("path",{attrs:(0,h.mix)({path:e,stroke:n.color||Rn().defaultColor,lineWidth:n.size||2},s)});return l}}),Ai("line","miniLineSmooth",{draw:function(n,r){var t=zh(n.points),e=[[0,0],[1,1]],i=Qh(t,!1,e),a=r.addShape("path",{attrs:(0,h.mix)({path:i,stroke:n.color||Rn().defaultColor,lineWidth:n.size||2},n.style)});return a}});var TT=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){n.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniLineSmooth"]}:this.config.shape={values:["miniLine"]}},r}(Jh),_T=TT,PT={main:Jh,guide:AT,mini:_T},LT=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.pointStyle,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]}},this.parseColor(),this.parseSize(),t.shape&&this.parseShape(t.shape),t.pointStyle&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},i=t.colorField;i&&(e.fields=(0,h.isArray)(i)?i:[i]),t.color&&this._parseColor(t,e),(0,h.isEmpty)(e)||(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.sizeField&&(e.fields=[t.sizeField]),t.pointSize&&(e.values=(0,h.isArray)(t.pointSize)?t.pointSize:[t.pointSize]),this.config.size=e},r.prototype.parseShape=function(t){this.config.shape=t},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.pointStyle,i={fields:null,callback:null,cfg:null},a=t.xField,o=t.yField,s=t.colorField;(0,h.isFunction)(e)?(s?i.fields=(0,h.isArray)(s)?[a,o,s].concat(s):[a,o,s]:i.fields=[a,o],i.callback=e):(i.cfg=e,(0,h.isNil)(e.opacity)||(i.cfg.fillOpacity=e.opacity)),this.config.style=i},r.prototype._parseColor=function(t,e){(0,h.isString)(t.color)?e.values=[t.color]:(0,h.isFunction)(t.color)?e.callback=t.color:(0,h.isArray)(t.color)&&(e.values=t.color)},r}(Es),IT=LT;function kT(n,r){var t=[];return(0,h.each)(r,function(e){var i=e[n];t.push(i)}),(0,h.uniq)(t)}var OT=["seriesField","stackField"],BT=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.point.style,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]},tooltip:!1},this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.point.shape&&this.parseShape(t.point.shape),t.point.style&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},i=this._getColorMappingField(t);if(i)this._parseColorByField(t,e,i);else if(t.point&&t.point.color)e.values=[t.point.color];else if(t.color)this._parseColor(t,e);else{var a=this.plot.getTheme();e.values=[a.defaultColor]}(0,h.keys)(e).length>0&&(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};e.values=[t.point.size],this.config.size=e},r.prototype.parseShape=function(t){var e={};(0,h.isString)(t)?e.values=[t]:(0,h.isObject)(t)&&(e.fields=t.fields,e.callback=t.callback),this.config.shape=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.point&&t.point.style,i={fields:null,callback:null,cfg:null},a=this._getColorMappingField(t);(0,h.isFunction)(e)?(i.fields=[t.xField,t.yField],i.callback=e,a&&i.fields.unshift(a)):i.cfg=e,this.config.style=i},r.prototype._parseColorByField=function(t,e,i){if(e.fields=[i],t.point.color){for(var a=kT(i,t.data).length,o=[],s=0;s<a;s++)o.push(t.point.color);e.values=o}else t.color&&this._parseColor(t,e)},r.prototype._parseColor=function(t,e){var i=this._getColorMappingField(t);(0,h.isString)(t.color)?e.values=[t.color]:(0,h.isFunction)(t.color)?e.callback=t.color:(0,h.isArray)(t.color)&&(i?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]]))},r.prototype._needParseAttribute=function(t){var e=this.plot.options,i=e.point&&(0,h.has)(e.point,t);return i},r.prototype._getColorMappingField=function(t){for(var e=0,i=OT;e<i.length;e++){var a=i[e];if((0,h.get)(t,a))return[t[a]]}},r}(Es),DT=BT,FT={guide:DT,circle:IT},RT={area:bT,line:PT,point:FT,interval:CT};function ln(n,r,t){var e=RT[n][r];return new e(t).config}function NT(n){var r=yE,t=n.split(" "),e=r[t[1]],i=parseInt(t[0],10);return[e.format,i*e.value]}function wn(n,r){if(!r)return n;Object.prototype.hasOwnProperty.call(r,"tickCount")&&(n.tickCount=r.tickCount),Object.prototype.hasOwnProperty.call(r,"type")&&r.type!=="dateTime"&&(n.type=r.type),Object.prototype.hasOwnProperty.call(r,"tickInterval")&&(r.type==="time"?n.tickInterval=NT(r.tickInterval):n.tickInterval=r.tickInterval),r.type==="time"&&r.mask&&(n.mask=r.mask),Object.prototype.hasOwnProperty.call(r,"min")&&(n.min=r.min),Object.prototype.hasOwnProperty.call(r,"max")&&(n.max=r.max),Object.prototype.hasOwnProperty.call(r,"minLimit")&&(n.minLimit=r.minLimit),Object.prototype.hasOwnProperty.call(r,"maxLimit")&&(n.maxLimit=r.maxLimit),Object.prototype.hasOwnProperty.call(r,"nice")&&(n.nice=r.nice),Object.prototype.hasOwnProperty.call(r,"formatter")&&(n.formatter=r.formatter),Object.prototype.hasOwnProperty.call(r,"exponent")&&(n.exponent=r.exponent),Object.prototype.hasOwnProperty.call(r,"base")&&(n.base=r.base),r.tickMethod&&(n.tickMethod=r.tickMethod)}function YT(n,r){var t=(0,h.filter)(r,function(a){return(0,h.isNumber)(a)}),e=Math.min.apply(Math,t),i=Math.max.apply(Math,t);e>0?(0,h.isNil)(n.min)&&(n.min=0):i<0&&(0,h.isNil)(n.max)&&(n.max=0)}var qh;function GT(n,r){var t={easing:"easeLinear",duration:1e4},e=(0,h.deepMix)({},r,t),i=n.get("element").geometry;i.labelsContainer.set("visible",!1);var a=n.get("index"),o=i.coordinate,s=i.scales,l=s[qh.options.yField],u=(0,h.clone)(n.get("origin"));zT(n,o);var f=n.get("clipShape"),c=n.get("parent"),v=12,g=null,C=qh.options.seriesField;C&&(g=c.addShape("text",{attrs:{x:o.start.x+v,y:0,text:u.data[0][C],fill:n.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}}));var O=g?16:0,F=c.addShape("text",{attrs:{x:o.start.x+v,y:O,text:"test"+a,fill:n.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}});e.callback=function(){n&&!n.get("destroyed")&&(n.setClip(null),f.remove(),F.animate({opacity:0},300,function(){F.remove(),(0,h.isNil)(g)||g.remove();var $=i.labelsContainer;$.get("visible")||$.set("visible",!0)}))};var G=e.delay;(0,h.isFunction)(G)&&(G=e.delay(a));var Y=e.easing;(0,h.isFunction)(Y)&&(Y=e.easing(a)),f.animate({width:o.getWidth()},e.duration,Y,e.callback,G),e.onFrame=function($){var q=up($,u,o);if(!!q){F.attr("x",q[0]+v),F.attr("y",q[1]+O);var ut=XT(l,q[1],o);l.formatter&&(ut=l.formatter(ut)),F.attr("text",ut)}},F.animate(e.onFrame,{duration:e.duration,easing:Y,callback:e.callback,delay:G}),g&&g.animate({onFrame:function($){var q=up($,u,o);!q||(g.attr("x",q[0]+v),g.attr("y",q[1]))}},e.duration,Y,e.callback,G)}function zT(n,r){var t=r.start,e=r.end,i=r.height;n.setClip({type:"rect",attrs:{x:t.x,y:e.y,width:0,height:i}})}function up(n,r,t){for(var e=r.points,i=t.start.x+t.getWidth()*n,a=0;a<e.length-1;a++){var o=e[a],s=e[a+1];if(i>=o.x&&i<=s.x){var l=(s.y-o.y)/(s.x-o.x),u=o.y+l*(i-o.x);return[i,u]}}}function XT(n,r,t){var e=(r-t.start.y)/(t.end.y-t.start.y);return n.invert(e).toFixed(2)}function VT(n){qh=n}dn("clipingWithData",GT);var HT=function(){function n(r){this.type="shape",this.shapes=r.shapes,this.nodes=[],this._parserNodes(),this.origion_nodes=(0,h.deepMix)([],this.nodes)}return n.prototype.measure=function(r){var t=(0,h.deepMix)({},RE(r),{shape:r});return t},n.prototype.measureNodes=function(){var r=this,t=[],e=[];(0,h.each)(this.shapes,function(i,a){var o=(0,h.deepMix)({},r.nodes[a],r.measure(i));o.width!==0&&o.height!==0&&(t.push(o),e.push(i))}),this.nodes=t,this.shapes=e},n.prototype._parserNodes=function(){var r=this;(0,h.each)(this.shapes,function(t){var e=r.measure(t);r.nodes.push(e)})},n}(),hp=HT;function WT(n,r,t){return t===void 0&&(t={ratio:.6}),r.width*t.ratio}var jT={type:"padding",usage:"assign",expression:WT};function UT(n,r){var t=[n.topLeft,n.topRight,n.bottomRight,n.bottomLeft],e=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],i=Sd(t,e);return Math.round(i)>=2}var ZT={type:"group",usage:"compare",expression:UT};function KT(n,r,t){t===void 0&&(t={value:4});var e=[n.topLeft,n.topRight,n.bottomRight,n.bottomLeft],i=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],a=Sd(e,i);return Math.round(a)>=t.value}var $T={type:"chain",usage:"compare",expression:KT};function QT(n,r,t){t===void 0&&(t={value:5});var e=Math.abs(n.bottom-r.top);return Math.round(e)>=t.value}var JT={type:"chain",usage:"compare",expression:QT};function qT(n,r,t){return t===void 0&&(t={ratio:.15}),n.width<r.width*t.ratio}var t_={type:"padding",usage:"compare",expression:qT};function e_(n,r){var t=2,e=r.coord.radius/t;return Math.min(e,n.value)}var r_={type:"padding",usage:"assign",expression:e_};function i_(n,r,t){return t===void 0&&(t={ratio:.8}),r.radius*t.ratio}var n_={type:"padding",usage:"assign",expression:i_},fp={elementDist:$T,elementDistVertical:JT,elementCollision:ZT,elementWidth:t_,columnWidth:jT,ringThickness:n_,minRingThickness:r_};function oG(n,r){fp[n]=r}function Ko(n){n.attr("text","")}function a_(n,r,t,e){var i=e.nodes.nodes,a=i[t],o=[];if(!a.shape.get("blank"))for(var s=0;s<i.length;s++){var l=i[s],u=l.shape;if(s!==t&&!u.get("blank")){var f=cp(a,l);f&&o.push(l)}}o.length>0&&(o.push(a),o.sort(function(c,v){return v.top-c.top}),(0,h.each)(o,function(c,v){if(v>0){var g=c.shape;Ko(g),g.set("blank",!0)}}))}function cp(n,r){return!(n.bottom<r.top||r.bottom<n.top||n.right<r.left||r.right<n.left)}var po=d(27009),o_=1e3,vp=60*o_,tf=60*vp,Dl=24*tf,dp=31*Dl,pp=365*Dl;function gp(n,r,t,e){var i=e.nodes.nodes,a;t===i.length-1?a=i[t-1].shape.get("delegateObject").item.name:a=i[t+1].shape.get("delegateObject").item.name;var o=new Date(a),s=n.get("delegateObject").item.name,l=new Date(s),u=i[0].shape.get("delegateObject").item.name,f=new Date(u),c=i[i.length-1].shape.get("delegateObject").item.name,v=new Date(c),g=yp(f,v),C=yp(l,o);if(g===C){if(t!==0&&t!==i.length-1){var O=u_(g);n.attr("text",po.default.format(l,O))}return}if(t!==0){var F=i[t-1].shape.get("delegateObject").item.name,G=new Date(F),Y=s_(g,l,G);if(Y){var O=l_(g,C);n.attr("text",po.default.format(l,O));return}}}function s_(n,r,t){var e=mp(r,n),i=mp(t,n);return e===i}function yp(n,r){var t,e=Math.abs(n-r),i={minute:[vp,tf],hour:[tf,Dl],day:[Dl,dp],month:[dp,pp],year:[pp,Infinity]};return(0,h.each)(i,function(a,o){e>=a[0]&&e<a[1]&&(t=o)}),t}function l_(n,r){for(var t=["year","month","day","hour","minute"],e=["YYYY","MM","DD","HH","MM"],i=t.indexOf(n)+1,a=t.indexOf(r),o="",s=i;s<=a;s++)o+=e[s],s<a&&(o+="-");return o}function u_(n){var r=["year","month","day","hour","minute"],t=["YYYY","MM","DD","HH","MM"],e=r.indexOf(n),i=t[e];return i}function mp(n,r){if(r==="year")return n.getFullYear();if(r==="month")return n.getMonth()+1;if(r==="day")return n.getDay()+1;if(r==="hour")return n.getHours()+1;if(r==="minute")return n.getMinutes()+1}function h_(n){var r=/^(?:(?:[0-2][0-3])|(?:[01]\d)):[0-5]\d$/,t=/^(?:(?:[0-2][0-3])|(?:[01]\d))(?::[0-5]\d){2}$/;return r.test(n)||t.test(n)}var xp={k:{number:1e3,index:0},m:{number:1e6,index:1},b:{number:1e9,index:2},t:{number:1e12,index:3}};function bp(n,r,t,e){if(!(!(0,h.has)(e,"node")||!(0,h.has)(e.node,"node"))){var i=e.nodes.nodes,a=parseFloat(n.get("origin").text);if(a!==0){if(r.formatter){n.attr("text",r.formatter(a));return}if(r.unit){var o=wp(r,a),s=o.num,l=o.unitname;n.attr("text",s+l)}else{var u=c_(i),f=Cd(u),l=f_(f),c=xp[l].number,v=v_(i),g=d_(v,c),s=wp({unit:l,decimal:g},a).num;n.attr("text",s+l)}}}}function wp(n,r){var t=["k","m","b","t"],e,i;if(n.unit==="auto"){var a=Math.floor(Math.log(r)/Math.log(1e3));i=t[a-1],e=(r/Math.pow(1e3,a)).toFixed(n.decimal)}else if(n.unit){var o=xp[n.unit];i=n.unit,e=(r/o.number).toFixed(n.decimal)}return{num:e,unitname:i}}function f_(n){var r=["k","m","b","t"],t=Math.floor(Math.log(n)/Math.log(1e3));return r[t-1]}function c_(n){var r=[];return(0,h.each)(n,function(t){var e=t,i=parseFloat(e.shape.get("origin").text);r.push(i)}),r}function v_(n){if(n.length>=2){var r=parseFloat(n[0].shape.get("origin").text),t=parseFloat(n[1].shape.get("origin").text);return Math.abs(r-t)}return 0}function d_(n,r){var t=Math.floor(Math.log10(r));if(n>=r){var e=n%r;if(e>0){var i=Math.floor(Math.log10(e));return Math.abs(i-t)}}else{var a=Math.floor(Math.log10(n));return Math.abs(a-t)}return 0}function p_(n,r,t){var e=t.nodes.nodes;if(r!==e.length-1){var i=e[r],a=e[r+1],o=g_(i,a).dir,s=n.get("startPoint");o==="x"&&n.attr("y",s.y+20)}}function g_(n,r){var t,e={x:r.centerX-n.centerX,y:r.centerY-n.centerY},i=Math.sqrt(e.x*e.x+e.y*e.y),a={x:10,y:0},o=Math.sqrt(a.x*a.x+a.y*a.y),s=Gh(e,a),l=s/(i*o)*180/Math.PI;l<0&&(l=360-l),l=y_(l);var u=Math.abs(n.centerX-r.centerX),f=Math.abs(n.centerY-r.centerY);return l>45?t="x":l<45&&(t="y"),{dir:t,distX:u,distY:f}}function y_(n){return n>90&&n<=180?180-n:n>180&&n<270?n-180:360-n}function m_(n,r,t,e){var i=e.nodes.nodes;if(t!==0){var a=i[t],o=i[t-1];if(cp(a,o)){var s=e.plot.view.geometries[0].elements[0],l=o.top-a.height/2,u=10;if(l-u>e.region.top){var f=a.shape.get("origin"),c=s.getShapeId(f),v=s.getShapes(),g=x_(c,v).get("box"),C=g.left+g.width/2,O=g.top,F=s.get("labelController").labelsContainer,G=F.addShape("path",{attrs:{path:[["M",C,O],["L",a.shape.attr("x"),l]],stroke:"#ccc",lineWidth:1}}),Y={x:n.attr("x"),y:n.attr("y")};a.shape.attr("y",l-u),i[t]=e.nodes.measure(a.shape),i[t].line=G,i[t].origin_position=Y}}}}function x_(n,r){var t;return(0,h.each)(r,function(e){var i=e,a=i.get("id");a===n&&(t=i)}),t}function b_(n,r,t,e){var i=e.nodes.nodes,a=i.length%2!=0;if(!Sp(r.keep,t,i)){var o=t%2==0;(!a&&o||a&&!o)&&Ko(n)}}function Sp(n,r,t){var e=[];(0,h.each)(n,function(s){s==="start"?e.push(r===0):s==="end"?e.push(r===t.length-1):(0,h.isNumber)(s)&&e.push(r===s)});for(var i=0,a=e;i<a.length;i++){var o=a[i];if(o===!0)return!0}return!1}function w_(n,r,t,e){var i=e.nodes.nodes;if(!Sp(r.keep,t,i)){var a=n.attr("text"),o=n.get("delegateObject").item.name;a!==o&&Ko(n)}}function S_(n,r,t,e){var i=e.nodes.nodes,a=M_(i);if(!(t<=1)){var o=i[t],s=C_(t,i),l=s.centerX-o.centerX,u=s.centerY-o.centerY,f=Math.sqrt(l*l+u*u);f<a&&(Ko(n),n.set("blank",!0))}}function C_(n,r){for(var t=n-1;t>0;t--){var e=r[t];if(!e.shape.get("blank"))return e}}function M_(n){var r=(0,h.deepMix)([],n);return r.sort(function(t,e){return e.width-t.width}),Math.round(r[0].width)}function E_(n,r,t,e){var i=e.nodes.nodes,a=i[t];a.line&&a.line.remove();var o=e.plot.initialOptions.data,s=e.plot[e.plot.type]||e.plot[e.plot.baseType],l=(0,h.get)(s,["label","fields",0],(0,h.get)(s,["position","fields",1])),u=A_(o,l,i),f=!1;if((0,h.each)(u,function(C){C.shape.get("origin")===a.shape.get("origin")&&(f=!0)}),f){if(a.origin_position){var c=a.origin_position,v=c.x,g=c.y;n.attr("x",v),n.attr("y",g)}}else Ko(n)}function A_(n,r,t){var e=[];(0,h.each)(n,function(f){e.push(f[r])}),e.sort(function(f,c){return f-c});var i=e[0],a=ef(t,r,i),o=e[e.length-1],s=ef(t,r,o),l=T_(e),u=ef(t,r,l);return{min:a,max:s,median:u}}function T_(n){var r=(0,h.clone)(n);r.sort(function(e,i){return e-i});var t=Math.floor(r.length/2);return r.length%2,r[t]}function ef(n,r,t){for(var e=0,i=n;e<i.length;e++){var a=i[e],o=a.shape.get("origin")._origin;if(o[r]===t)return a}}function Cp(n,r){var t=r.abbreviateBy?r.abbreviateBy:"end",e=n.attr("text"),i;t==="end"&&(i=e[0]+"..."),t==="start"&&(i="..."+e[e.length-1]),t==="middle"&&(i=e[0]+"..."+e[e.length-1]),n.resetMatrix(),n.attr({text:i,textAlign:"center",textBaseline:"top"})}function __(n,r,t,e){var i=e.nodes.nodes,a=n.attr("text"),o=/^\d+$/.test(a);o?bp(n,r,t,i):h_(a)?gp(n,r,t,i):Cp(n,r)}function P_(n,r){n.resetMatrix(),n.attr({rotate:360-r.degree,textAlign:"right",textBaseline:"middle"})}function L_(n,r){for(var t=n.attr("text"),e=Math.ceil(t.length/r.lineNumber),i="",a=1;a<r.lineNumber;a++){var o=e*a;i=t.slice(0,o)+`
`+t.slice(o)}var s=n.attr("fontSize");n.attr({text:i,lineHeight:s,textAlign:"center",textBaseline:"top"})}var Mp={textWrapper:L_,textRotation:P_,textAbbreviate:Cp,textHide:Ko,digitsAbbreviate:bp,datetimeStringAbbrevaite:gp,robustAbbrevaite:__,nodesResampling:b_,nodesResamplingByAbbrevate:w_,nodesResamplingByChange:S_,nodesResamplingByState:E_,nodeJitter:p_,nodeJitterUpward:m_,clearOverlapping:a_};function sG(n,r){Mp[n]=r}var I_=function(){function n(r){this.iterationTime=10,this.iterationIndex=0,this.rulesLocker=[],this.constraintIndex=0,(0,h.assign)(this,r),this.currentConstraint=this.constraints[0],this.rules&&(this.iterationTime=this.rules[this.currentConstraint.name].length),this._start(),this._run(),this._end()}return n.prototype._start=function(){this.onStart&&this.onStart(this.nodes)},n.prototype._iteration=function(){var r;this.nodes.type==="shape"?r=this.nodes:r=this.nodes,r.type==="shape"&&r.measureNodes(),this.rules&&this._applyRules(),r.type==="shape"&&r.measureNodes(),this.onIteration&&this.onIteration(this.nodes)},n.prototype._end=function(){this.onEnd&&this.onEnd(this.nodes)},n.prototype._run=function(){for(var r=this._constraintsTest();!r&&!(this.iterationIndex>this.iterationTime-1);)this._iteration(),r=this._constraintsTest(),this.iterationIndex++;this.constraintIndex<this.constraints.length-1&&(this.constraintIndex++,this.currentConstraint=this.constraints[this.constraintIndex],this.iterationTime=this.rules?this.rules[this.currentConstraint.name].length:1,this.iterationIndex=0,this._run())},n.prototype._constraintsTest=function(){var r=fp[this.currentConstraint.name],t=this.currentConstraint.option;return r.usage==="compare"?this._constraintCompare(r,t):this._constraintAssignment(r,t)},n.prototype._constraintCompare=function(r,t){var e=r.type,i=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintCompare(i,a,t);if(e==="padding")return this._paddingConstraintCompare(i,this.region,a,t);if(e==="group")return this._groupConstraintCompare(i,a,t)},n.prototype._chainConstraintCompare=function(r,t,e){for(var i=0;i<t.length-1;i++){var a=t[i],o=t[i+1];if(r(a,o,e)===!1)return!1}return!0},n.prototype._paddingConstraintCompare=function(r,t,e,i){if(t)for(var a=0,o=e;a<o.length;a++){var s=o[a];if(r(s,t,i)===!1)return!1}return!0},n.prototype._groupConstraintCompare=function(r,t,e){for(var i=0;i<t.length;i++)for(var a=t[i],o=0;o<t.length;o++)if(o!==i){var s=t[o];if(r(a,s,e)===!1)return!1}return!0},n.prototype._constraintAssignment=function(r,t){var e=r.type,i=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintAssign();if(e==="padding")return this._paddingConstraintAssign(i,this.region,a,t)},n.prototype._chainConstraintAssign=function(){return!0},n.prototype._paddingConstraintAssign=function(r,t,e,i){if(t)for(var a=0,o=e;a<o.length;a++){var s=o[a],l=r(s,t,i);s.value=l}return!0},n.prototype._applyRules=function(){for(var r=this.rules[this.currentConstraint.name][this.iterationIndex],t=Mp[r.name],e=r.option?r.option:{},i=this.nodes.nodes,a=0;a<i.length;a++){var o=i[a];this._applyRule(o.shape,t,e,a)}},n.prototype._applyRule=function(r,t,e,i){var a={nodes:this.nodes,region:this.region,plot:this.plot};t(r,e,i,a)},n}(),Ep=I_,k_=function(){function n(r){(0,h.assign)(this,r),this.init()}return n.prototype.init=function(){this.type=this.getType(),this.shouldApply()&&this.apply()},n}(),Ap=k_,O_={cat:"category",timeCat:"category",time:"dateTime",linear:"linear"},B_=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){this.axisInstance=this.getAxisInstance(),n.prototype.init.call(this)},r.prototype.shouldApply=function(){var t=this.plot.options;return this.responsiveTheme.axis?!!(this.responsiveTheme.axis[this.dim]&&t[this.dim+"Axis"].visible&&t[this.dim+"Axis"].label&&t[this.dim+"Axis"].label.visible):!1},r.prototype.apply=function(){for(var t=this,e=this.plot.view.backgroundGroup.findAll(function(f){var c=f.get("name");if(c==="axis-label"){var v=f.get("delegateObject").axis.get("field");if(v===t.plot.options[t.dim+"Field"])return f}}),i=[],a=0;a<e.length;a++)i.push(e[a]);var o=new hp({shapes:i}),s=this.responsiveTheme.axis.x[this.type],l=s.constraints,u=s.rules;new Ep({nodes:o,constraints:l,region:this.plot.getViewRange(),rules:u,plot:this.plot,onEnd:function(f){t.updateTicks(f.origion_nodes)}})},r.prototype.getType=function(){var t=this.plot.options,e=this.dim+"Axis",i=this.dim+"Field";if(t[e]&&t[e].type&&t[e].type==="dateTime")return"dateTime";var a=this.plot.view.getScaleByField([t[i]]).type;return O_[a]},r.prototype.getAxisInstance=function(){var t,e,i=this.dim==="x"?0:1,a=(t=this.plot.view.getController("axis"))===null||t===void 0?void 0:t.getComponents();if(a)return(e=a[i])===null||e===void 0?void 0:e.component},r.prototype.updateTicks=function(t){var e=this,i=this.plot.view.backgroundGroup.findAll(function(o){var s=o.get("name");if(s==="axis-tickline-group"){var l=o.get("delegateObject").axis.get("field");if(l===e.plot.options[e.dim+"Field"])return o}})[0];if(i){var a=i.get("children");(0,h.each)(t,function(o,s){o.shape.attr("text")===""&&a[s].attr("opacity",0)})}this.plot.canvas.draw()},r}(Ap),go=B_;function D_(n){var r=n.getResponsiveTheme(),t=n.canvas;new go({plot:n,responsiveTheme:r,dim:"x"}),new go({plot:n,responsiveTheme:r,dim:"y"}),t.draw()}var F_=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.shouldApply=function(){return!(!this.responsiveTheme.label||!this.responsiveTheme.label[this.type])},r.prototype.apply=function(){var t=this.plot.view.geometries[0].labelsContainer.get("children"),e=[];(0,h.each)(t,function(l){e=e.concat(l.findAllByName("label"))});var i=new hp({shapes:e}),a=this.responsiveTheme.label[this.type],o=a.constraints,s=a.rules;new Ep({nodes:i,constraints:o,rules:s,plot:this.plot,region:this.plot.view.coordinateBBox})},r.prototype.getType=function(){return null},r}(Ap),Tp=F_,R_=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,h.get)(this.plot.options,["label","type"],"point")},r}(Tp);function N_(n){var r=n.getResponsiveTheme();new R_({plot:n,responsiveTheme:r})}var Y_=[],G_=[{name:"responsiveAxis",method:D_},{name:"responsivePointLabel",method:N_}],z_={preRender:Y_,afterRender:G_},_p=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,i=e===void 0?{}:e;return(0,Rt.__assign)({offsetX:0,offsetY:0},i)},r.prototype.getLabelOffset=function(){return this.getLabelOffsetByDimAndFactor("y",-1)},r.prototype.getLabelItemAttrs=function(t,e){var i=this,a=this.options,o=a.style,s=a.formatter,l=(0,h.get)(t,"model.mappingData",[]);return(0,h.map)(l,function(u,f){var c,v=i.getValue(u);return(0,Rt.__assign)((0,Rt.__assign)((0,Rt.__assign)({},i.getPosition(u)),{text:s?s(v,(c={},c[Cs]=u._origin,c.mappingDatum=u,c.mappingDatumIndex=f,c.element=t,c.elementIndex=e,c),e):v,textAlign:"center",textBaseline:"middle"}),o)})},r.prototype.getValue=function(t){return(0,h.get)(t._origin,this.layer.options.yField)},r.prototype.getPosition=function(t){var e={x:(0,h.isArray)(t.x)?(0,h.last)(t.x):t.x,y:(0,h.isArray)(t.y)?(0,h.last)(t.y):t.y};return e},r.prototype.layoutLabels=function(t,e){var i=this;if(!!this.options.adjustPosition){var a=this.isOverlapped(e);if(a){var o=this.getGlobalTolerance(e);(0,h.each)(e,function(s,l){l>1&&i.labelResamplingByChange(s,e,l,o)})}a=this.isOverlapped(e),a&&(0,h.each)(e,function(s,l){s.get("visible")&&i.clearOverlapping(s,e,l)})}},r.prototype.adjustLabel=function(){},r.prototype.labelResamplingByChange=function(t,e,i,a){var o=this.findPrevious(i,e),s=this.getCenter(t),l=this.getCenter(o),u=l.x-s.x,f=l.y-s.y,c=Math.sqrt(u*u+f*f);c<a&&t.set("visible",!1)},r.prototype.clearOverlapping=function(t,e,i){for(var a=[],o=0;o<e.length;o++){var s=e[o];if(o!==i&&s.get("visible")){var l=dd(t.getBBox(),s.getBBox());l&&a.push(s)}}a.length>0&&(a.push(t),a.sort(function(u,f){return f.minY-u.minY}),(0,h.each)(a,function(u,f){f>0&&u.set("visible",!1)}))},r.prototype.isOverlapped=function(t){for(var e=0;e<t.length;e++)if(t[e].get("visible")){for(var i=t[e].getBBox(),a=0;a<t.length;a++)if(a!==e&&t[a].get("visible")){var o=t[a].getBBox(),s=dd(i,o);if(s)return!0}}return!1},r.prototype.getGlobalTolerance=function(t){var e=t.slice();return e.sort(function(i,a){return a.getBBox().width-i.getBBox().width}),Math.round(e[0].getBBox().width)},r.prototype.findPrevious=function(t,e){for(var i=t-1;i>0;i--)if(e[i].get("visible"))return e[i]},r.prototype.getCenter=function(t){var e=t.getBBox(),i=e.minX,a=e.maxX,o=e.minY,s=e.maxY;return{x:i+(a-i)/2,y:o+(s-o)/2}},r}(Fh),Pp=_p;Kn("point",_p);var Lp=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){var i=this,a,o=[],s=si.fromBBoxObject(this.getCoordinateBBox()),l=t.getXYFields(),u=l[0],f=l[1],c=(0,h.groupBy)(e,function(g){return g.get(ia)[_i.FIELD_ORIGIN][u]}),v=(a=e[0])===null||a===void 0?void 0:a.get("offset");(0,h.each)((0,h.keys)(c).reverse(),function(g){for(var C=i.sortLabels(t,c[g]);C.length;){var O=C.shift();if(zA(O,o,function(Y,$){return Y._origin[u]===$._origin[u]&&Y._origin[f]===$._origin[f]})){O.set("visible",!1);continue}Ol(O,s);var F=Bl(O,o),G=void 0;if(F&&(O.attr("y",O.attr("y")+2*v),Ol(O,s),G=Bl(O,o)),G){O.set("visible",!1);continue}o.push(O)}})},r.prototype.sortLabels=function(t,e){var i=t.getXYFields()[1],a=[];return e.sort(function(o,s){return s.get(ia)[_i.FIELD_ORIGIN][i]-o.get(ia)[_i.FIELD_ORIGIN][i]}),e.length>0&&a.push(e.shift()),e.length>0&&a.push(e.pop()),a.push.apply(a,e),a},r}(Pp),X_=Lp;Kn("point-auto",Lp);var V_=8,H_=function(){function n(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,h.deepMix)(t,r,{}),this.init()}return n.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},n.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,h.each)(t,function(e){var i=r.getShapeInfo(e.shape),a=r.options,o=a.style,s=a.offsetX,l=a.offsetY,u=r.options.formatter,f=u?u(i.name):i.name;r.container.addShape("text",{attrs:(0,h.deepMix)({},{x:i.x+s,y:i.y+l,text:f,fill:i.color,textAlign:"left",textBaseline:"middle"},o),name:"label"})})},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getBBox=function(){return this.container.getBBox()},n.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,h.clone)(r.label.style);return delete t.fill,{offsetX:V_,offsetY:0,style:t}},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="line"})},n.prototype.getShapeInfo=function(r){var t=r.get("origin").points,e=t[t.length-1],i=r.attr("stroke"),a=this.plot.options.seriesField,o=r.get("origin").data[0][a];return{x:e.x,y:e.y,color:i,name:o}},n}(),Ip=H_,W_={line:"line",point:"point"},j_=An(W_);(0,h.assign)(Si,j_);var U_={stroke:"transparent",fill:"#FCC509",lineWidth:0},Z_={stroke:"#FFF",fill:"#FCC509",lineWidth:1},K_={stroke:"rgba(0,0,0,0.85)",fill:"#FCC509",lineWidth:1},$_=function(){function n(r){this.points=[],this.labels=[],this.name="markerPoints",this.defaultCfg={offsetX:0,offsetY:0,style:{normal:U_,selected:K_,active:Z_},label:{visible:!1,offsetY:-8,position:"top",style:{fill:"rgba(0, 0, 0, 0.85)"}},animation:!1},this.view=r.view,this.size=r.size||6,this.config=(0,h.deepMix)({},this.defaultCfg,r),this._init()}return n.prototype.render=function(){var r=this.getDataArray();this._renderPoints(r),this.view.canvas.draw(),this._addInteraction()},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.points=[],this.labels=[]},n.prototype.getDataArray=function(){var r=this.view.geometries[0];return r.dataArray},n.prototype._init=function(){var r=this,t=this.view.foregroundGroup;this.container=t.addGroup(),this.render(),this.view.on("beforerender",function(){r.clear()})},n.prototype._renderPoints=function(r){var t=this;(0,h.each)(this.config.data,function(e,i){(0,h.each)(r,function(a){var o=(0,h.find)(a,function(G){return(0,h.isMatch)(G._origin,e)});if(o){var s=t.config.style.normal,l=t.container.addGroup({name:t.name}),u=o.x,f=o.y;(0,h.isArray)(u)&&(u=u[0]),(0,h.isArray)(f)&&(f=f[0]);var c=t.config.symbol,v=t.config,g=v.offsetX,C=v.offsetY,O=void 0;if((0,h.isString)(c)&&c.startsWith("image://")){var F=c.substr(8);O=l.addShape("image",{attrs:{x:u-t.size/2+g,y:f-t.size/2+C,img:F,width:t.size,height:t.size}})}else c=(0,h.isString)(c)?fE.MarkerSymbols[c]:c,O=l.addShape({type:"marker",name:"marker-point",id:"point-"+i,attrs:(0,Rt.__assign)((0,Rt.__assign)({x:u+g,y:f+C,r:t.size/2},s),{symbol:c})});t.points.push(O),t._animatePoint(O),t._renderLabel(l,o,i),l.set("data",e),l.set("origin",o)}})})},n.prototype._renderLabel=function(r,t,e){var i=this.config.label;if(i&&i.visible){var a=i.offsetX,o=a===void 0?0:a,s=i.offsetY,l=s===void 0?0:s,u=i.formatter,f=i.position,c=i.field,v=t._origin[c];u&&(v=u(v,{_origin:t._origin},e));var g=(0,h.isArray)(t.x)?t.x[0]:t.x,C=(0,h.isArray)(t.y)?t.y[0]:t.y,O=r.addShape("text",{name:"marker-label",id:"label-"+e,attrs:(0,Rt.__assign)((0,Rt.__assign)({x:g+o,y:C+l,text:v||""},i.style),{textAlign:"center",textBaseline:f==="top"?"bottom":"top"})});this.labels.push(O)}},n.prototype._addInteraction=function(){var r=this,t=this.config.events;(0,h.each)(t,function(e,i){r.container.on(r.name+":"+i,function(a){e(a);var o=a.target.get("parent"),s=o.get("children")[0];if(s){var l=s.get("data"),u=s.get("id"),f={id:u,data:l};i==="click"?r.selectedPoint&&r.selectedPoint.get("id")===u?(r.selectedPoint=null,r.setState("inactive",f)):(r.selectedPoint=s,r.setState("selected",f)):i==="mouseenter"?r.setState("active",f):i==="mouseleave"&&r.setState("inactive",f)}r.view.canvas.draw()}),r.view.on("click",function(a){var o=a.target.get("parent");(!o||o.get("name")!==r.name&&r.selectedPoint)&&(r.selectedPoint=null,r.setState("inactive"))})})},n.prototype.setState=function(r,t){var e=this;r==="active"?(!this.selectedPoint||t.id!==this.selectedPoint.get("id"))&&this._onActive(t):r==="inactive"?this.points.forEach(function(i){return e._onInactive(i)}):r==="selected"&&this._onSelected(t)},n.prototype._onActive=function(r){var t=this,e=this.config.style.active;(0,h.each)(this.points,function(i){i.get("id")===r.id?(0,h.each)(e,function(a,o){i.attr(o,a)}):t._onInactive(i)})},n.prototype._onInactive=function(r){var t=this.config.style.normal;(!this.selectedPoint||r.get("id")!==this.selectedPoint.get("id"))&&(0,h.each)(t,function(e,i){r.attr(i,e)})},n.prototype._onSelected=function(r){var t=this,e=this.config.style.selected;(0,h.each)(this.points,function(i){i.get("id")===r.id?(0,h.each)(e,function(a,o){i.attr(o,a)}):t._onInactive(i)})},n.prototype._animatePoint=function(r){var t=this.config,e=t.animation,i=t.size;if(e!==!1){var a=e,o=a.endState,s=o===void 0?{}:o,l=a.animateCfg,u=l===void 0?fo.DEFAULT_ANIMATE_CFG.appear:l;r.animate((0,Rt.__assign)({r:Number.isNaN(s.size/2)?i/2:s.size/2},s),u)}},n}(),Q_=$_,J_=function(n){var r=n.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+1}},q_=function(n){var r=n.shape,t=r.attr("opacity")||1;return{opacity:t*.2}},tP=function(n){var r=n.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+2}};$n("line",{lineStyle:{normal:{},active:J_,disable:q_,selected:tP},pointStyle:{normal:{},active:{},disable:{},selected:{}}});var eP={label:{point:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodesResamplingByChange"},{name:"clearOverlapping"}]}}}};tp("line",eP);var rP=function(n){(0,Rt.__extends)(r,n);function r(t){return n.call(this,(0,Rt.__assign)({processEvent:"mousemove"},t))||this}return r.prototype.start=function(){},r.prototype.process=function(t){var e=(0,h.filter)(this.view.geometries,function(o){return o.type=="line"}),i=t.target;if(i.get("name")==="line"){var a=(0,h.get)(t,"data.data");(0,h.each)(e,function(o){(0,h.each)(o.elements,function(s){s.setState("active",s.data===a)})})}else(0,h.each)(e,function(o){(0,h.each)(o.elements,function(s){s.setState("active",!1)})})},r}(Hh),iP=rP,nP=function(n){(0,Rt.__extends)(r,n);function r(t){return n.call(this,(0,Rt.__assign)({endEvent:"click"},t))||this}return r.prototype.start=function(){},r.prototype.end=function(t){var e=t.target,i=(0,h.filter)(this.view.geometries,function(o){return o.type=="line"});if(e.get("name")==="line"){var a=(0,h.get)(t,"data.data");(0,h.each)(i,function(o){(0,h.each)(o.elements,function(s){s.setState("inactive",s.data!==a)})})}else(0,h.each)(i,function(o){(0,h.each)(o.elements,function(s){s.setState("inactive",!1)})})},r}(Hh),aP=nP,oP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"selected-tooltip"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=n.prototype.getTooltipCfg.call(this);return(0,Rt.__assign)((0,Rt.__assign)({},t),{showContent:!1,showCrosshairs:!0,showMarkers:!0,shared:!0})},r}(sd.Z);xi("selected-tooltip",oP);var sP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.show=function(){var t=this.getPoint();(0,h.isEqual)(t,this.location)||(this.location=t,this.showTooltip(t))},r.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},r.prototype.showTooltip=function(t){var e=this.getTooltipController();e.showTooltip(t)},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:this.getLastXPoint()},r.prototype.getLastXPoint=function(){var t=this.getView(),e=t.getXScale(),i=t.getYScales()[0],a=t.getCoordinate(),o=(0,h.last)(e.getTicks()).value;return a.convert({x:o,y:(i.range[0]+i.range[1])/2})},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("selected-tooltip")},r}(me),lP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip-active"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=n.prototype.getTooltipCfg.call(this);return(0,Rt.__assign)((0,Rt.__assign)({},t),{showCrosshairs:!0,showMarkers:!1,shared:!0})},r}(sd.Z);xi("tooltip-active",lP);var uP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){this.getView().removeInteraction("tooltip")},r.prototype.show=function(){var t=this.getPoint();t&&this.showTooltip(t)},r.prototype.hide=function(){var t=this.getView(),e=this.getTooltipController();e.hideTooltip();var i=(0,h.filter)(t.geometries,function(a){return a.type=="point"});(0,h.each)(i,function(a){(0,h.each)(a.elements,function(o){o.setState("active",!1)})})},r.prototype.showTooltip=function(t){var e=this.getView(),i=this.getTooltipController();i.showTooltip(t);var a=i.getTooltipItems(t),o=(0,h.filter)(e.geometries,function(s){return s.type=="point"});(0,h.each)(o,function(s){(0,h.each)(s.elements,function(l){l.setState("active",(0,h.findIndex)(a,function(u){return u.data===l.data})!==-1)})})},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:null},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("tooltip-active")},r}(me),hP=uP;Re("selected-tooltip",sP),Fi("selected-tooltip",{start:[{trigger:_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,action:"selected-tooltip:show"},{trigger:_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,action:"selected-tooltip:show"},{trigger:"plot:mousemove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}]}),Re("marker-active",hP),Fi("marker-active",{start:[{trigger:_i.VIEW_LIFE_CIRCLE.AFTER_PAINT,action:"marker-active:show"},{trigger:_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,action:"marker-active:show"},{trigger:"plot:mousemove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:mouseleave",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchend",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}}]});var fP={line:"line",point:"point"},kp=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="line",t.markerPoints=[],t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{connectNulls:!1,smooth:!1,lineSize:2,lineStyle:{lineJoin:"round",lineCap:"round"},point:{visible:!1,size:3,shape:"circle"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{showContent:!0,crosshairs:{line:{style:{stroke:"rgba(0,0,0,0.45)"}}}},markerPoints:[]})},r.prototype.afterRender=function(){var t=this,e=this.options;this.renderLabel(),e.markerPoints&&((0,h.each)(this.markerPoints,function(i){return i.destroy()}),this.markerPoints=[],e.markerPoints.forEach(function(i){if(i.visible){var a=new Q_((0,Rt.__assign)((0,Rt.__assign)({},i),{view:t.view}));t.markerPoints.push(a)}})),e.responsive&&e.padding!=="auto"&&this.applyResponsive("afterRender"),n.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.seriesField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return fP[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),e[t.yField]={},(0,h.has)(t,"yAxis")&&wn(e[t.yField],t.yAxis),this.setConfig("scales",e),YT(e[t.yField],(0,h.map)(t.data||[],function(i){return i[t.yField]})),n.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.tooltip=function(){(0,h.some)(this.options.markerPoints,function(t){return t.visible})&&(this.options.tooltip.showMarkers=!1),n.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){this.addLine(),this.addPoint()},r.prototype.addLine=function(){var t=this.options;this.line=ln("line","main",{plot:this}),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",this.line)},r.prototype.addPoint=function(){var t=this.options,e={visible:!1};t.point&&(t.point=(0,h.deepMix)(e,t.point)),t.point&&t.point.visible&&(this.point=ln("point","guide",{plot:this}),this.setConfig("geometry",this.point))},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,i=e.label,a=e.yField,o=t[a];if(i.visible){var s=vo(this.view,"line");if(i.type==="line"){var l=new Ip((0,Rt.__assign)({view:this.view,plot:this},this.options.label));l.render()}else this.doRenderLabel(s,(0,Rt.__assign)({type:"point",formatter:o.formatter&&function(u){return o.formatter(u)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.line.tooltip={};var t=this.options.tooltip;t.fields&&(this.line.tooltip.fields=t.fields),t.formatter&&(this.line.tooltip.callback=t.formatter,t.fields||(this.line.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.line.tooltip.fields.push(this.options.seriesField)))},r.prototype.animation=function(){n.prototype.animation.call(this);var t=this.options;t.animation?(VT({options:this.options,view:this.view}),this.line.animate=t.animation):(this.line.animate=!1,this.point&&(this.point.animate=!1))},r.prototype.applyInteractions=function(){n.prototype.applyInteractions.call(this),this.interactions.push(new iP({view:this.view})),this.interactions.push(new aP({view:this.view}))},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,T)},r.prototype.applyResponsive=function(t){var e=this,i=z_[t];(0,h.each)(i,function(a){var o=a;o.method(e)})},r.prototype.singleLineLabelCheck=function(){return!this.options.seriesField&&this.options.label.type&&this.options.label.type==="line"},r}(nn),As=kp;pi("line",kp);var cP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="line",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=As.getDefaultOptions,r}(ni),Op=cP;function vP(n,r,t,e,i){var a=e-r,o=n.children,s=n.value;o.sort(function(f,c){return c.value-f.value});var l=a/s,u=r;(0,h.each)(o,function(f){f.y0=t,f.y1=i,f.x0=u,u+=f.value*l,f.x1=f.x0+f.value*l})}function dP(n,r,t,e,i){var a=i-t,o=n.children,s=n.value;o.sort(function(f,c){return c.value-f.value});var l=a/s,u=t;(0,h.each)(o,function(f){f.x0=r,f.x1=e,f.y0=u,u+=f.value*l,f.y1=f.y0+f.value*l})}var pP=(1+Math.sqrt(5))/2;function Bp(n,r,t,e,i){var a=n.children,o=n.value;a.sort(function(Nt,Wt){return Wt.value-Nt.value});for(var s=[],l,u,f,c,v,g,C,O,F=0,G=0;F<a.length;){var Y=e-r,$=i-t;for(l=a[G++].value,u=l,f=l,c=Math.max($/Y,Y/$)/(o*pP),v=l*l*c,C=Math.max(u/v,v/f);G<a.length;G++){if(O=a[G].value,l+=O,O<f&&(f=O),O>u&&(u=O),v=l*l*c,g=Math.max(u/v,v/f),g>C){l-=O;break}C=g}var q={value:l,dice:Y<$,children:a.slice(F,G)};if(s.push(q),q.dice){var ut=o?$*l/o:$;vP(q,r,t,e,t+ut),o&&(t+=ut)}else{var kt=o?Y*l/o:Y;dP(q,r,t,r+kt,i),o&&(r+=kt)}o-=l,F=G}return s}var gP=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.listeners=[],t.onItemGroupToggleActive=function(e,i){return function(){var a=e.get("children").find(function(o){return o.get("class")==="item-background"});a&&a.attr(i?t.itemActiveBackgroundStyle:t.itemBackgroundStyle),t.getCanvas().draw()}},t}return r.prototype.destroy=function(){this.offEvents(),n.prototype.destroy.call(this)},r.prototype.initConfig=function(t){this.x=t.x,this.y=t.y,this.items=t.items||[],this.itemPadding=t.itemPadding||[2,8,2,8],this.backgroundStyle=(0,Rt.__assign)({lineWidth:1,stroke:"#ffffff"},t.backgroundStyle||{}),this.itemBackgroundStyle=(0,Rt.__assign)({fill:"#fff"},t.itemBackgroundStyle||{}),this.itemActiveBackgroundStyle=(0,Rt.__assign)({fill:"#ccc",opacity:.2},t.itemActiveBackgroundStyle||{}),this.separator=t.separator||"/",this.separatorStyle=(0,Rt.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.separatorStyle||{}),this.itemWidth=t.itemWidth,this.itemHeight=t.itemHeight,this.maxItemWidth=t.maxItemWidth,this.textStyle=(0,Rt.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.textStyle||{})},r.prototype.renderInner=function(t){var e=0,i=0;this.offEvents(),this.renderItems(t,e,i),Yd(this.group,this.x,this.y)},r.prototype.renderItems=function(t,e,i){var a=this,o=this.itemPadding,s=o[0],l=o[1],u=o[2],f=o[3],c,v=t.addShape("rect",{class:"breadcrumb-background",attrs:(0,Rt.__assign)({x:e,y:i,width:1,height:1},this.backgroundStyle)});this.items.forEach(function(g,C){var O=t.addGroup({id:"item-group-"+g.key,data:g,class:"item-group",attrs:{cursor:"pointer"}}),F=O.addShape("rect",{id:"item-background-"+g.key,class:"item-background",attrs:(0,Rt.__assign)((0,Rt.__assign)({x:e,y:i,width:f+l,height:s+u},a.itemBackgroundStyle),{cursor:"pointer"})});F.name="breadcrumb";var G=O.addShape("text",{id:"item-text-"+g.key,class:"item-text",attrs:(0,Rt.__assign)((0,Rt.__assign)({x:e+f,y:i+s,text:g.text},a.textStyle),{cursor:"pointer"})});G.name="breadcrumb";var Y=G.getBBox();c=a.itemHeight||Y.height;var $=a.itemWidth||Y.width;a.maxItemWidth&&($=Math.min($,a.maxItemWidth));var q={x:e,y:i,width:$+f+l,height:c+s+u};if(F.attr("width",q.width),F.attr("height",q.height),O.setClip({type:"rect",attrs:q}),e+=q.width,C!==a.items.length-1){var ut=t.addShape("text",{attrs:(0,Rt.__assign)({x:e,y:i+s,text:a.separator},a.separatorStyle),class:"separator"});e+=ut.getBBox().width}}),v.attr({width:e,height:c+s+u})},r.prototype.bindEvents=function(t){var e=this,i=this.items,a=t.get("children").filter(function(s){return s.get("class")==="item-group"}),o=function(s,l,u){return function(){var f=l.get("data"),c=i.find(function(v){return v.key===f});e.emit(u,{item:c})}};a.forEach(function(s){var l=o("click",s,"onItemClick"),u=o("dblclick",s,"onItemDblclick"),f=e.onItemGroupToggleActive(s,!0),c=e.onItemGroupToggleActive(s,!1);s.on("click",l),s.on("dblclick",u),s.on("mouseenter",f),s.on("mouseleave",c),e.listeners.push({target:s,event:"click",callback:l}),e.listeners.push({target:s,event:"dblclick",callback:u}),e.listeners.push({target:s,event:"mouseenter",callback:f}),e.listeners.push({target:s,event:"mouseleave",callback:c})})},r.prototype.offEvents=function(){this.listeners&&this.listeners.forEach(function(t){var e=t.target,i=t.event,a=t.callback;e.off(i,a)}),this.listeners=[]},r}(Ms),yP=gP,Fl=[1,0,0,0,1,0,0,0,1],ko=400,$o="easeQuadInOut";function mP(n,r,t){var e=Np(n),i=Rp(r),a=i.width/e.width,o=i.height/e.height,s=(i.minX-e.minX)*a,l=(i.minY-e.minY)*o,u=Uo([["s",a,o],["t",s,l]]),f=r.geometries[0];Rl(f);var c=r.backgroundGroup.addGroup();c.set("zIndex",-100),c.setClip({type:"rect",attrs:{x:i.minX,y:i.minY,width:i.width,height:i.height}});var v=Dp(f,c);f.container.set("visible",!1),r.canvas.draw(),t(),window.setTimeout(function(){(0,h.each)(v,function(F,G){G===0?F.animate({matrix:u},ko,$o,function(){c.remove(),r.canvas.draw()}):F.animate(Uo,ko)}),f=r.geometries[0],Rl(f);var g=f.getShapes();(0,h.each)(g,function(F){F.attr("opacity",0),F.animate({opacity:1},ko,$o)});var C=f.container;C.stopAnimate(),C.set("visible",!0),C.attr("matrix",(0,h.clone)(Fl)),kA(C,[["s",e.width/i.width,e.height/i.height],["t",e.minX,e.minY]]);var O=(0,h.clone)(Fl);f.container.animate({matrix:O},ko,$o,function(){Yp(f)}),r.canvas.draw()},16)}function Dp(n,r){var t=n.getShapes(),e=[];return(0,h.each)(t,function(i){var a=r.addShape("path",{attrs:(0,h.deepMix)({},i.attrs,{capture:!1})});e.push(a)}),e}function Fp(n,r,t){var e=r.geometries[0];Rl(e);var i=e.container;i.attr("matrix",(0,h.clone)(Fl));var a=r.backgroundGroup.addGroup();a.set("zIndex",-100);var o=Dp(e,a);i.set("visible",!1),r.canvas.draw(),t(),e=r.geometries[0],Rl(e),i=e.container;var s=xP(e.getShapes(),n),l=Np(s),u=Rp(r),f=i.get("parent");f.get("clipShape")||i.setClip({type:"rect",attrs:{x:u.minX,y:u.minY,width:u.width,height:u.height}}),bP(a,o,l,u);var c=u.width/l.width,v=u.height/l.height,g=(u.minX-l.minX)*c,C=(u.minY-l.minY)*v,O=Uo([["s",c,v],["t",g,C]]);i.setMatrix(O),i.set("visible",!0),i.animate({matrix:Fl},ko,$o,function(){Yp(e)})}function xP(n,r){var t;return(0,h.each)(n,function(e){var i=e.get("origin").data.name;i===r&&(t=e)}),t}function Rp(n){var r=n.coordinateBBox,t={minX:r.minX,minY:r.minY,centerX:(r.maxX-r.minX)/2,centerY:(r.maxY-r.minY)/2,width:r.width,height:r.height};return t}function Np(n){var r=n.attr("path"),t=r[0][1],e=r[0][2],i=r[1][1],a=r[2][2],o={minX:t,minY:a,centerX:(i-t)/2,centerY:(e-a)/2,width:Math.abs(i-t),height:Math.abs(e-a)};return o}function bP(n,r,t,e){var i=t.width/e.width,a=t.height/e.height,o=Uo([["s",i,a],["t",t.minX,t.minY]]);n.animate({matrix:o},ko,$o,function(){n.remove()}),(0,h.each)(r,function(s){s.animate({opacity:0},ko,$o)})}function Rl(n){var r=n.labelsContainer;r.set("visible",!1)}function Yp(n){var r=n.labelsContainer;r.set("visible",!0)}var wP=100,SP=30,CP=10,MP=function(n){n===void 0&&(n={});var r=(0,Rt.__assign)({x:0,y:0,startNode:{name:"root"},itemWidth:wP,itemHeight:SP,padding:[0,0,0,0]},n);return r},Gp=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.getInteractionRange=function(t,e){var i=MP(e),a=i.padding,o=a[0],s=a[1];if(t)return new si(t.minX,t.maxY-i.itemHeight-o-s,t.width,i.itemHeight+o+s)},r.prototype.start=function(t){var e=this,i=t.data.data;i.children&&(this.parentNode={color:t.target.attr("fill"),shape:t.target,data:{name:(0,h.clone)(this.currentNode.name),value:(0,h.clone)(this.currentNode.value)},depth:(0,h.clone)(this.currentDepth)},this.currentDepth++,mP(t.target,this.view,function(){e.update(i)}))},r.prototype.update=function(t){(0,h.hasKey)(this.cache,t.name)||(this.cache[t.name]=t);var e=this.plot.getTreemapData(t,t.depth);this.view.changeData(e),this.adjustScale(this.currentDepth),this.currentNode=t,this.render()},r.prototype.render=function(){if(this.breadcrumb){var t=this.getItems();this.breadcrumb.update({items:t}),this.breadcrumb.render(),this.layout()}else this.initGeometry(),this.cache={},this.saveOriginMapping(),this.container=this.plot.canvas.addGroup(),this.startNode||(this.startNode={name:"root"}),this.startNode.name==="root"?(this.startNodeName=(0,h.hasKey)(this.plot.options.data,"name")?this.plot.options.data.name:"root",this.currentNode=this.plot.options.data,this.currentDepth=1):(this.startNodeName=this.startNode.name,this.currentNode=this.startNode),this.y=this.view.coordinateBBox.maxY+CP,this.breadcrumb=new yP({container:this.container,x:0,y:this.y,items:this.getItems()}),this.breadcrumb.init(),this.breadcrumb.render(),this.plot.canvas.draw(),this.layout();this.onInteraction()},r.prototype.clear=function(){},r.prototype.layout=function(){var t=this.container.getBBox().width,e=(this.plot.width-t)/2;this.breadcrumb.update({x:e,y:this.y}),this.breadcrumb.render()},r.prototype.getItems=function(){var t=[];if(this.currentNode.name&&this.currentNode.name===this.startNodeName){var e=this.getRootItem();t.push(e)}else{t=[];var i=[];this.findParent(this.currentNode,i),t.push(this.getRootItem()),(0,h.each)(i,function(a,o){t.push({key:String(o+2),text:a.name,data:a})}),t.push({key:String(i.length+2),text:this.currentNode.name,data:this.currentNode})}return t},r.prototype.findParent=function(t,e){if(t.parent)(0,h.hasKey)(this.cache,t.parent.name)?e.push(this.cache[t.parent.name]):e.push(t.parent),this.findParent(t.parent,e);else return},r.prototype.onInteraction=function(){var t=this;this.container.on("click",function(e){var i=e.target.get("parent");if(i&&i.get("class")==="item-group"){var a=i.get("data");if(a.data)if(a.text===t.startNodeName){var o=1;t.currentDepth-1===o?Fp(t.currentNode.name,t.view,function(){t.updateRoot(a)}):t.updateRoot(a),t.currentDepth=1}else{if(t.currentNode===a.data)return;var s=(0,h.clone)(t.currentDepth);t.currentDepth=parseInt(a.key),s-1===t.currentDepth?Fp(t.currentNode.name,t.view,function(){t.update(a.data)}):t.update(a.data)}}})},r.prototype.getRootItem=function(){var t=this.plot.options.data,e=(0,h.hasKey)(t,"name")?t.name:"root";return{key:"1",text:e,data:this.plot.rootData}},r.prototype.saveOriginMapping=function(){var t=this.plot.options,e=t.colorField,i=t.colors,a={field:e,values:i};this.originMapping=a},r.prototype.adjustScale=function(t){var e=this.view;if(this.mapping&&(0,h.hasKey)(this.mapping,String(t))){var i=(0,h.clone)(this.mapping[t]);if(i.values&&(0,h.isFunction)(i.values)){var a=i.values(this.parentNode,this.currentNode);i.values=a}this.view.geometries[0].color(i.field,i.values)}else{var i=(0,h.clone)(this.originMapping);this.view.geometries[0].color(i.field,i.values)}e.render()},r.prototype.initGeometry=function(){this.geometry=this.view.geometries[0];var t=this.view.viewBBox,e=this.geometry.container;e.setClip({type:"rect",attrs:{x:t.minX,y:t.minY,width:t.width,height:t.height}})},r.prototype.updateRoot=function(t){this.view.changeData(t.data),this.adjustScale(1),this.currentNode=this.plot.options.data,this.render()},r}(ba),EP=Gp;ba.registerInteraction("drilldown",Gp);var AP={drilldown:EP},TP={rect:"polygon",breadcrumb:"breadcrumb"},_P=An(TP);(0,h.assign)(Si,_P);var zp=4,PP=8;function LP(n,r){return!n.children||n.depth>=r}function IP(n,r,t){var e=n.attr("fontSize"),i=n.attr("text"),a=t.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:e}}),o=i.split(`
`),s=o.map(function(l){for(var u="",f=l.split(""),c=[],v=0;v<f.length;v++){var g=f[v];a.attr("text",u+=g);var C=a.getBBox().width-1;if(C>r){if(v===0)break;c.push(v),u=""}}return vd(f,c)});return a.remove(),s.join(`
`)}function Xp(n,r,t,e){for(var i=e.addShape("text",{attrs:{text:"...",x:0,y:0,fontSize:r}}),a=i.getBBox().width,o=e.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:r}}),s="",l=t-a,u=0;u<n.length;u++){var f=n[u];o.attr("text",s+=f);var c=o.getBBox().width;if(c>=l){var v=s.substr(0,s.length-1);if(v.length>0)return v+"..."}}return o.remove(),i.remove(),s}var kP=function(){function n(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,h.deepMix)(t,r,{}),this.init()}return n.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},n.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,h.each)(t,function(e){var i=e.shape,a=i.get("origin").data,o=LP(a,r.plot.options.maxLevel);if(a.showLabel){var s=(0,h.clone)(r.options.style),l=r.getPosition(i,o),u=r.options.formatter,f=u?u(a.name):a.name,c=r.getTextBaseLine(o),v=r.container.addShape("text",{attrs:(0,h.deepMix)({},s,{x:l.x,y:l.y,text:f,fill:"black",textAlign:"center",textBaseline:c,fontWeight:o?300:600}),name:"label"});r.adjustLabel(v,i,o)}})},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getBBox=function(){return this.container.getBBox()},n.prototype.getPosition=function(r,t){var e=r.getBBox(),i=0,a=0;return t?(i=e.minX+e.width/2,a=e.minY+e.height/2):(i=e.x+e.width/2,a=e.y+4),{x:i,y:a}},n.prototype.getTextBaseLine=function(r){return r?"middle":"top"},n.prototype.adjustLabel=function(r,t,e){e?this.adjustLeafLabel(r,t):this.adjustParentLabel(r,t)},n.prototype.adjustLeafLabel=function(r,t){var e=t.getBBox(),i=r.getBBox(),a=(0,h.clone)(r.attr("text")),o=2,s=Math.max(r.attr("fontSize")-o,PP),l=e.x+e.width/2,u=e.y+e.height/2;r.attr({x:l,y:u,textAlign:"center",textBaseline:"middle",lineHeight:s,fontSize:s});var f=e.width-zp*2;if(i.width>e.width&&i.height>e.height){r.attr("text","");return}else if(f<s){r.attr("text","");return}if(i.width>e.width){var c=IP(r,f,this.container);r.attr({lineHeight:r.attr("fontSize"),text:c});var v=r.getBBox();if(v.height>e.height){var g=Xp(a,s,f,this.container);r.attr("text",g)}}},n.prototype.adjustParentLabel=function(r,t){var e=t.getBBox(),i=e.width-zp*2;if(r.getBBox().width>i){var a=Xp(r.attr("text"),r.attr("fontSize"),i,this.container);r.attr("text",a)}},n.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,h.clone)(t)}},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="polygon"})},n}(),OP=kP,BP=4,Ts=4,Vp=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="treemap",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{maxLevel:2,padding:[0,0,0,0],tooltip:{visible:!1,showTitle:!1,showCrosshairs:!1,showMarkers:!1,shared:!1},legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},xField:"x",yField:"y",label:{visible:!0,adjustPosition:!0,style:{stroke:"rgba(0,0,0,0)",lineWidth:0,fontSize:12}},meta:{x:{nice:!1},y:{nice:!1}},interactions:[{type:"tooltip"}]})},r.prototype.beforeInit=function(){var t=this;n.prototype.beforeInit.call(this);var e=this.options.interactions;e&&(0,h.each)(e,function(o){o.type==="drilldown"&&(t.isDrilldown=!0,t.options.maxLevel=1)});var i=this.options.data,a=this.getTreemapData(i);this.rootData=a},r.prototype.afterRender=function(){if(n.prototype.afterRender.call(this),this.options.label&&this.options.label.visible){var t=new OP((0,Rt.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.geometryParser=function(){return"polygon"},r.prototype.getTreemapData=function(t,e){var i=this.getViewRange(),a=Bp(t,i.x,i.y,i.width,i.height);this.recursive(a,1);var o=[];return this.getAllNodes(a,o,e),o.sort(function(s,l){return s.depth-l.depth}),this.options.xField="x",this.options.yField="y",o},r.prototype.processData=function(){return this.rootData},r.prototype.coord=function(){},r.prototype.addGeometry=function(){var t=this,e=this.options,i=e.data,a=e.colorField,o=e.color,s=this.getTreemapData(i);this.rootData=s;var l=this.isNested(s);this.rect={type:"polygon",position:{fields:["x","y"]},color:{fields:[a],values:o},style:{fields:["depth"],callback:function(u){var f=t.adjustStyleByDepth(u,l);return(0,h.deepMix)({},f,t.options.rectStyle)}},tooltip:{fields:["name","value"]}},this.options.tooltip&&this.options.tooltip.formatter&&(this.rect.tooltip.callback=this.options.tooltip.formatter),this.setConfig("geometry",this.rect)},r.prototype.applyInteractions=function(){var t=this,e=this.options.interactions,i=this.view.interactions;(0,h.each)(e,function(a){var o=AP[a.type];if(o){var s=new o((0,h.deepMix)({},{view:t.view,plot:t,startEvent:"polygon:click"},a.cfg,o.getInteractionRange(t.layerBBox,a.cfg)));i[a.type]=s}})},r.prototype.animation=function(){n.prototype.animation.call(this),this.isDrilldown&&(this.rect.animate=!1)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,M)},r.prototype.recursive=function(t,e){var i=this,a=this.options.colorField;(0,h.each)(t,function(o){(0,h.each)(o.children,function(s){s.depth=e,e>1&&(s.parent=o),(0,h.hasKey)(s,a)||(s[a]=o[a]),s.showLabel=!0;var l=i.isLeaf(s);if(!l){var u=Math.abs(s.y1-s.y0),f=i.getLabelHeight(),c=u/2>f?f:Ts;s.showLabel=c!==Ts;var v=Bp(s,s.x0+Ts,s.y0+c,s.x1-Ts,s.y1-Ts);i.fillColorField(v,a,s[a]),i.recursive(v,s.depth+1)}})})},r.prototype.getAllNodes=function(t,e,i){var a=this,o=i||this.options.maxLevel,s=this.getViewRange();(0,h.each)(t,function(l){(0,h.hasKey)(l,"x0")&&l.depth<=o&&e.push((0,Rt.__assign)((0,Rt.__assign)({},l),{x:[l.x0,l.x1,l.x1,l.x0],y:[s.height-l.y1,s.height-l.y1,s.height-l.y0,s.height-l.y0]})),(0,h.hasKey)(l,"children")&&a.getAllNodes(l.children,e)})},r.prototype.fillColorField=function(t,e,i){(0,h.each)(t,function(a){(0,h.hasKey)(a,e)||(a[e]=i)})},r.prototype.getLabelHeight=function(){var t=this.options.label,e=this.getPlotTheme().label.style.fontSize,i=0;if(t&&t.visible){var a=t.style;i=a&&a.fontSize?a.fontSize:e}return i+BP*2},r.prototype.isLeaf=function(t){return!t.children||t.children.length===0},r.prototype.isNested=function(t){var e=this.options.maxLevel;if(e===1)return!1;for(var i=!1,a=0;a<t.length;a++)if(t[a].children){i=!0;break}return i},r.prototype.adjustStyleByDepth=function(t,e){var i=this.options.maxLevel;return e?t===1?{lineWidth:1,stroke:"black",opacity:t/i}:{lineWidth:1,stroke:"rgba(0,0,0,0.3)",opacity:t/i}:{lineWidth:1,stroke:"rgba(0,0,0,0.9)",opacity:.9}},r}(nn),DP=Vp;pi("treemap",Vp);var FP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="treemap",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=DP.getDefaultOptions,r}(ni),Hp=FP,Wp=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="step-line",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{step:"hv"})},r}(As);pi("step-line",Wp);var RP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="step-line",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Wp.getDefaultOptions,r}(ni),jp=RP;function Up(n,r){var t=[],e=n.get("origin").points;return(0,h.each)(e,function(i){t.push(r.convertPoint(i))}),t}var NP=function(){function n(r){(0,h.deepMix)(this,this.constructor.getDefaultOptions(r),r),this._init()}return n.getDefaultOptions=function(r){var t=r.transpose;return{visible:!0,size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:{visible:!0,headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},value:{visible:!0,style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)"},formatter:function(e,i){return(100*i/e).toFixed(2)+"%"}},animation:(0,h.deepMix)({},fo.DEFAULT_ANIMATE_CFG)}},n.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},n.prototype.draw=function(){var r=this,t=this.transpose,e=this.view.getScaleByField(this.field).values,i=this.view.geometries[0],a=i.getShapes(),o,s,l,u;t?a.forEach(function(f,c){s=e[c],c++>0&&r._drawTag(l,u,f,s),u=s,l=f}):a.forEach(function(f,c){u=e[c],c++>0&&r._drawTag(f,u,o,s),s=u,o=f})},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove()},n.prototype._drawTag=function(r,t,e,i){var a=this.transpose,o=this.view.geometries[0].coordinate,s=Up(r,o)[a?3:0],l=Up(e,o)[a?0:3];this._drawTagArrow(s,l),this._drawTagValue(s,t,l,i)},n.prototype._drawTagArrow=function(r,t){var e=this.spacing,i=this,a=i.size,o=i.offset,s=i.animation,l=i.transpose,u=this.arrow.headSize,f=t.y-r.y,c=t.x-r.x,v;l?(c-u)/2<e?(e=Math.max(1,(c-u)/2),v=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e,t.y-o-a/2]]):v=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e-u,t.y-o-a],[t.x-e,t.y-o-a/2],[t.x-e-u,t.y-o]]:(f-u)/2<e?(e=Math.max(1,(f-u)/2),v=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a/2,t.y-e]]):v=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a,t.y-e-u],[t.x+o+a/2,t.y-e],[t.x+o,t.y-e-u]];var g=this.container.addShape("polygon",{name:"arrow",attrs:(0,Rt.__assign)((0,Rt.__assign)({},this.arrow.style),{points:v})});s!==!1&&this._fadeInTagShape(g)},n.prototype._drawTagValue=function(r,t,e,i){var a=this,o=a.size,s=a.offset,l=a.animation,u=a.transpose,f=this.value.formatter(t,i),c=this.container.addShape("text",{name:"value",attrs:(0,Rt.__assign)((0,Rt.__assign)({},this.value.style),{text:f,x:u?(r.x+e.x)/2:r.x+s+o/2,y:u?r.y-s-o/2:(r.y+e.y)/2,textAlign:"center",textBaseline:"middle"})});if(u){var v=e.x-r.x,g=c.getBBox().width;if(g>v){var C=g/f.length,O=Math.max(1,Math.ceil(v/C)-1),F=f.slice(0,O)+"...";c.attr("text",F)}}l!==!1&&this._fadeInTagShape(c)},n.prototype._fadeInTagShape=function(r){var t=this.animation,e=r.attr("opacity");r.attr("opacity",0);var i=(0,h.get)(t,"appear",fo.DEFAULT_ANIMATE_CFG.appear).duration;r.animate({opacity:e},i)},n}(),Zp=NP;function YP(n){var r=n.getResponsiveTheme(),t=n.canvas;new go({plot:n,responsiveTheme:r,dim:"x"}),new go({plot:n,responsiveTheme:r,dim:"y"}),t.draw()}var GP=[],zP=[{name:"responsiveAxis",method:YP}],XP={preRender:GP,afterRender:zP},VP=function(n){var r=n.opacity||1;return{opacity:r*.5}},HP=function(n){var r=n.opacity||1;return{opacity:r*.5}},rf={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:VP,disable:HP,selected:{lineWidth:1,stroke:"black"}}};$n("bar",rf);function $a(n){var r=n.indexOf("#")===0?n.substr(1):n,t=[];return t.push(parseInt(r.substr(0,2),16)),t.push(parseInt(r.substr(2,2),16)),t.push(parseInt(r.substr(4,2),16)),t}function nf(n){var r;return r=Math.round(n),r=r.toString(16),r.length===1&&(r="0"+n),r}function lG(n){return"#"+(nf(n[0])+nf(n[1])+nf(n[2]))}function Nl(n,r){var t;return(0,h.each)(n,function(e){var i=e;r>=i.from&&r<i.to&&(t=i.color)}),t}var af=function(n){var r=$a(n),t=r[0],e=r[1],i=r[2],a=(t*299+e*587+i*114)/1e3<128;return a},Kp=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var i,a=this.options,o=a.style,s=a.formatter,l=[].concat(t.getModel().mappingData),u=this.getValue(t);return(0,h.deepMix)({},o,(0,Rt.__assign)((0,Rt.__assign)({},this.getPosition(t)),{text:s?s(u,(i={},i[Cs]=l[0]._origin,i.mappingDatum=l[0],i.mappingDatumIndex=0,i.element=t,i.elementIndex=e,i),e):u,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline()}))},r.prototype.adjustLabel=function(t,e){var i=this.options,a=i.adjustPosition,o=i.style;if(a){var s=this.getDefaultOffset(),l=t.getBBox(),u=this.getElementShapeBBox(e);if(u.width<=l.width){var f=u.maxX+this.options.offsetX+s;t.attr("x",f),t.attr("fill",o.fill)}}},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,i=e===void 0?{}:e;return(0,Rt.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},i)},r.prototype.getValue=function(t){return(0,h.get)(t.getData(),this.layer.options.xField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),i=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.maxX,l=a.minY,u=a.height,f=a.width,c=this.options,v=c.offsetX,g=c.offsetY,C=c.position,O=l+u/2+g,F=i<0?-1:1,G;if(C==="left"){var Y=i>0?o:s;G=Y+e*F+v}else if(C==="right"){var Y=i>0?s:o;G=Y+e*F+v}else G=o+f/2+v;return{x:G,y:O}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="right"){var i=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=$a(i),s=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,l=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=Nl(l,s);return u}var f=this.options.style.fill;return f},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),i=this.options,a=i.position,o=i.adjustColor;return a!=="right"&&o&&e!=="black"?null:void 0},r.prototype.getTextAlign=function(t){var e=this.getValue(t),i=this.options.position,a={right:"left",left:"left",middle:"center"},o={right:"right",left:"right",middle:"center"};return e<0?o[i]:a[i]},r.prototype.getTextBaseline=function(){return"middle"},r.prototype.getElementShapeBBox=function(t){var e=this,i=t.shape,a=[];(0,h.each)(i.get("origin").points,function(g){a.push(e.coord.convertPoint(g))});var o=a.map(function(g){return g.x}),s=Math.min.apply(Math,o),l=Math.max.apply(Math,o),u=a.map(function(g){return g.y}),f=Math.min.apply(Math,u),c=Math.max.apply(Math,u),v=new si(s,f,l-s,c-f);return v},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(Fh),$p=Kp;Kn("bar",Kp);var Qp=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),i=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.maxX,l=a.minY,u=a.height,f=this.options,c=f.offsetX,v=f.offsetY,g=l+u/2+v,C=i<0?-1:1,O=i>0?s:o,F=O+e*C+c;return{x:F,y:g}},r.prototype.getTextAlign=function(t){var e=this.getValue(t);return e>0?"left":"right"},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,h.every)(t,function(i){var a=i.getBBox(),o=i.get("element"),s=e.getElementShapeBBox(o);return s.height>=a.height})},r.prototype.inShapeLabels=function(t,e){var i=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],s=this.options,l=s.darkStyle,u=s.lightStyle,f=(0,h.groupBy)(e,function(c){return c.get(ia)[_i.FIELD_ORIGIN][o]});(0,h.each)(e,function(c){var v=f[c.get(ia)[_i.FIELD_ORIGIN][o]]||[],g=c.get("element"),C=g.shape,O=af(C.attr("fill")),F=i.getElementShapeBBox(g),G=si.fromBBoxObject(c.getBBox());if(Uh(a,F)<=0&&c.set("visible",!1),G.width>F.width){var Y=(0,h.findIndex)(v,function(q){return q===c});Y!==v.length-1&&c.set("visible",!1)}else{c.attr({x:F.x+F.width/2,textAlign:"center"});var $=G.width>F.width||G.height>F.height;$?c.attr({stroke:u==null?void 0:u.stroke}):c.attr({fill:O?u==null?void 0:u.fill:l==null?void 0:l.fill,fillOpacity:O?u==null?void 0:u.fillOpacity:l==null?void 0:l.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var i=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],s=[],l=[],u=(0,h.groupBy)(a,function(g){return g.get(ia)[_i.FIELD_ORIGIN][o]}),f=(0,h.uniq)((0,h.map)(a,function(g){return g.get(ia)[_i.FIELD_ORIGIN][o]})),c;for((0,h.size)(f)>0&&(c=f.shift(),(0,h.each)(u[c],function(g){return l.push(g)})),(0,h.size)(f)>0&&(c=f.pop(),(0,h.each)(u[c],function(g){return l.push(g)})),(0,h.each)(f.reverse(),function(g){(0,h.each)(u[g],function(C){return l.push(C)})});l.length>0;){var v=l.shift();v.get("visible")&&(Ol(v,i),Bl(v,s)?v.set("visible",!1):s.push(v))}},r.prototype.filterLabels=function(t){var e=500,i=[],a=Math.max(Math.floor(t.length/e),1);return(0,h.each)(t,function(o,s){s%a==0?i.push(o):o.set("visible",!1)}),i},r}($p),WP=Qp;Kn("bar-auto",Qp);var jP={bar:"interval"},UP=An(jP);(0,h.assign)(Si,UP);var ZP={bar:"interval"},KP={interval:"bar"},Jp=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="bar",t}return r.getDefaultOptions=function(){var t={xAxis:{visible:!0,line:{visible:!1},title:{visible:!0},label:{visible:!1},tickLine:{visible:!1},grid:{visible:!1},nice:!0},yAxis:{visible:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!0,position:"left",adjustColor:!0},legend:{visible:!1,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}};return(0,h.deepMix)({},n.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){n.prototype.beforeInit.call(this);var t=this.options;t.responsive&&t.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),t.responsive&&t.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new Zp((0,Rt.__assign)({view:this.view,field:t.xField,animation:t.animation!==!1},t.conversionTag))),n.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?ZP[e]:KP[e]},r.prototype.processData=function(t){var e=t&&t.slice().reverse(),i=this.options.yField,a=[];return(0,h.each)(e,function(o){var s=(0,h.clone)(o);s[i]=s[i].toString(),a.push(s)}),a},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={type:"cat"},(0,h.has)(t,"yAxis")&&wn(e[t.yField],t.yAxis),e[t.xField]={},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),this.setConfig("scales",e),n.prototype.scale.call(this)},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.axis=function(){var t=On("axis",{plot:this,dim:"x"}),e=On("axis",{plot:this,dim:"y"});t&&(t.position="left"),e&&(e.position="bottom");var i={};i[this.options.xField]=t,i[this.options.yField]=e,this.setConfig("axes",i)},r.prototype.adjustBar=function(t){return null},r.prototype.addGeometry=function(){var t=this.options,e=ln("interval","main",{positionFields:[t.yField,t.xField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,h.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustBar(e),this.bar=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.animation=function(){n.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.bar.animate=!1)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,A)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,i=e.label,a=e.xField,o=t[a];if(i==null?void 0:i.visible){var s=vo(this.view,"interval");this.doRenderLabel(s,(0,Rt.__assign)({type:"bar",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.bar.tooltip.fields.push(this.options.colorField)))},r.prototype.applyResponsive=function(t){var e=this,i=XP[t];(0,h.each)(i,function(a){var o=a;o.method(e)})},r.prototype.getLabelOptionsByPosition=function(t){if(t==="middle")return{offset:0};if(t==="left")return{offset:7,style:{stroke:null,lineWidth:0}};if(t==="right")return{offset:4}},r}(nn),Yl=Jp;pi("bar",Jp);var $P=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="bar",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Yl.getDefaultOptions,r}(ni),qp=$P;$n("stackedBar",rf);var QP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){if(this.options.adjustPosition){var i=t.getBBox(),a=this.getElementShapeBBox(e);a.maxX<=i.maxX&&t.set("visible",!1)}},r}($p),uG=null;Kn("stacked-bar",QP);var JP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(WP),hG=null;Kn("stacked-bar-auto",JP);var tg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="stackedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},legend:{visible:!0,position:"top-left",offsetY:0}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustBar=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,i=e.label,a=e.xField,o=t[a];if(i==null?void 0:i.visible){var s=vo(this.view,"interval");this.doRenderLabel(s,(0,Rt.__assign)({type:"stacked-bar",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(Yl),of=tg;pi("stackedBar",tg);var qP=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedBar",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=of.getDefaultOptions,r}(ni),eg=qP;$n("groupedBar",rf);var rg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="groupedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{visible:!0,grid:{visible:!0}},yAxis:{visible:!0,title:{visible:!1}},label:{visible:!0,position:"right",adjustColor:!0},legend:{visible:!0,position:"right-top",offsetY:0}})},r.prototype.afterRender=function(){n.prototype.afterRender.call(this);var t=(0,h.valuesOfKey)(this.options.data,this.options.groupField)||[];this.view.on("tooltip:change",function(e){var i=e.items,a=i===void 0?[]:i,o=(0,h.sortBy)(a.slice(),function(s){return t.indexOf(s.name)}).reverse();o.forEach(function(s,l){e.items[l]=s})})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.scale=function(){var t={};t[this.options.groupField]={values:(0,h.valuesOfKey)(this.options.data,this.options.groupField)},this.options.meta?this.options.meta=(0,h.deepMix)({},this.options.meta,t):this.options.meta=t,n.prototype.scale.call(this)},r.prototype.adjustBar=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(Yl),ig=rg;pi("groupedBar",rg);var tL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="groupedBar",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=ig.getDefaultOptions,r}(ni),ng=tL,sf=function(n,r,t){var e=(0,h.groupBy)(n,r);e=(0,h.mapValues)(e,function(o){return(0,h.map)(o,function(s){return(0,h.map)(t,function(l){return s[l]})})}),e=(0,h.mapValues)(e,h.flatten),e=(0,h.mapValues)(e,function(o){return(0,h.map)(o,function(s){var l=Number.parseFloat(s);return!(0,h.isNumber)(l)||isNaN(l)?0:l})});var i=(0,h.mapValues)(e,function(o){return(0,h.reduce)(o,function(s,l){return s+l},0)}),a=(0,h.map)(n,function(o){var s=(0,Rt.__assign)((0,Rt.__assign)({},o),{_origin:o,total:i[o[r]]});return(0,h.each)(t,function(l){s[l]=o[l]/(i[o[r]]||1)}),s});return(0,h.each)((0,h.groupBy)(a,r),function(o){var s=0;(0,h.each)(o,function(l,u){(0,h.each)(t,function(f,c){(s+l[f]>=1||u===o.length-1&&c===t.length-1&&s>0)&&(l[f]=1-s),s+=l[f]})})}),a},ag=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="percentStackedBar",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},grid:{visible:!1},title:{visible:!0,formatter:function(t){return t+" (%)"}},label:{visible:!1,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,i=e.xField,a=e.yField,o=n.prototype.processData.call(this,t);return sf(o,a,[i])},r.prototype.scale=function(){var t={},e=this.options.xField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(i){var a=(i*100).toFixed(1);return a+"%"}},this.options.meta=(0,h.deepMix)({},this.options.meta,t),n.prototype.scale.call(this)},r}(of),og=ag;pi("percentStackedBar",ag);var eL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="percentStackedBar",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=og.getDefaultOptions,r}(ni),sg=eL,lg=8;function rL(n,r){var t;return(0,h.each)(n,function(e){var i=e;r>=i.from&&r<i.to&&(t=i.color)}),t}var iL=function(){function n(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,h.deepMix)(t,r,{}),this.options.leftStyle||(this.options.leftStyle=this.options.style),this.options.rightStyle||(this.options.rightStyle=this.options.style),this.init()}return n.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},n.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.elements,i=t.coordinate;this.coord=i,(0,h.each)(e,function(a){var o=a.shape,s=r.getPosition(o),l=r.getValue(o),u=r.getTextAlign(),f=[];(0,h.each)(s,function(c,v){var g=v===0?r.options.leftStyle:r.options.rightStyle,C=r.getTextColor(o,v);r.options.position==="inner"&&r.options.adjustColor&&C!=="black"&&(g.stroke=null);var O=r.options.formatter,F=O?O(l[v]):l[v],G=r.container.addShape("text",{attrs:(0,h.deepMix)({},g,{x:c.x,y:c.y,text:F,fill:C,textAlign:u[v],textBaseline:"middle"}),name:"label"});f.push(G),r.doAnimation(G)}),o.set("labelShapes",f),r.adjustPosition(f[0],f[1],o)}),this.plot.canvas.draw()},n.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getBBox=function(){return this.container.getBBox()},n.prototype.getShapeBbox=function(r){var t=this,e=[];(0,h.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var i=new si(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return i},n.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:lg,offsetY:0,style:(0,h.clone)(t),adjustColor:!0,adjustPosition:!0}},n.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,i=t.maxX,a=t.minY,o=t.height,s=this.options,l=s.offsetX,u=s.offsetY,f=a+o/2+u,c,v;return this.options.position==="outer"?(c=e-l,v=i+l):(c=e+l,v=i-l),[{x:c,y:f},{x:v,y:f}]},n.prototype.getValue=function(r){var t=this.plot.options.xField;return r.get("origin").data[t]},n.prototype.getTextAlign=function(){return this.options.position==="outer"?["right","left"]:["left","right"]},n.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),i=r.attr("opacity")?r.attr("opacity"):1,a=$a(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/i,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],l=rL(s,o);return l}var u=t===0?this.options.leftStyle.fill:this.options.rightStyle.fill;return u},n.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},n.prototype.adjustPosition=function(r,t,e){var i=e.get("origin"),a=i.x[0],o=i.x[1],s=Math.abs(o-a),l=this.view.coordinateBBox,u=[r.getBBox(),t.getBBox()],f=r.attr("x"),c=t.attr("x");if(this.options.adjustPosition&&this.options.position==="inner"){var v=u[0].width+u[1].width,g=u[0].maxX-u[1].minX>2,C=v>s;(g||C)&&(f=a-this.options.offsetX,r.attr("fill",this.options.leftStyle.fill),r.attr("textAlign","right"),u[0]=r.getBBox(),c=o+this.options.offsetX,t.attr("fill",this.options.rightStyle.fill),t.attr("textAlign","left"),u[1]=t.getBBox())}u[0].minX<l.minX&&(f=l.minX+lg,r.attr("textAlign","left")),r.attr("x",f),t.attr("x",c),this.plot.canvas.draw()},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="interval"})},n}(),nL=iL,ug;function hg(n,r){var t=n.getBBox(),e=t.minX+t.width/2;n.setClip({type:"rect",attrs:{x:e,y:t.minY,width:0,height:t.height}});var i=n.get("clipShape");i.animate({width:t.width,x:t.minX},r.duration,r.easing,function(){n.setClip(null)},r.delay)}hg.animationName="clipInFromCenter";function aL(n){ug=n}function fg(n,r){var t=oL(n).attr("path"),e=(0,h.clone)(n.attr("path"));n.attr("path",t),n.animate({path:e},r.duration,r.easing,r.callback,100)}function oL(n){var r=n.id,t;return(0,h.each)(ug,function(e){e.id===r&&(t=e)}),t}fg.animationName="updateFromCenter",dn("clipInFromCenter",hg),dn("updateFromCenter",fg);var cg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="rangeBar",t}return r.getDefaultOptions=function(){return(0,h.deepMix)(n.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"},xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,h.each)(e,function(i){var a=i.elements;(0,h.each)(a,function(o){t.push(o.shape)})}),aL(t),n.prototype.afterRender.call(this)},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new nL((0,Rt.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.animation=function(){n.prototype.animation.call(this)},r}(Yl),sL=cg;pi("rangeBar",cg);var lL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="rangeBar",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=sL.getDefaultOptions,r}(ni),vg=lL,dg=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(Pp),uL=dg;Kn("area-point",dg);var pg=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){n.prototype.layoutLabels.call(this,t,e),this.adjustAreaLabelsStyle(e)},r.prototype.adjustAreaLabelsStyle=function(t){var e=this.view,i=this.options,a=i.darkStyle,o=i.lightStyle,s=vo(e,"area"),l=GA(s).sort(function(u,f){return f.getBBox().height-u.getBBox().height});(0,h.each)(t,function(u){var f=u.getBBox(),c=GE(f.x,f.y,f.width,f.height),v=(0,h.map)(l,function(O){return{area:O,matches:(0,h.filter)(c,function(F){return!!O.isHit(F[0],F[1])}).length}}).sort(function(O,F){return O.matches-F.matches});if((0,h.last)(v).matches>0){var g=(0,h.last)(v).area.attr("fill"),C=af(g);u.attr({fill:C?o==null?void 0:o.fill:a==null?void 0:a.fill,fillOpacity:C?o.fillOpacity:a.fillOpacity,stroke:C?o==null?void 0:o.stroke:a==null?void 0:a.stroke})}})},r}(X_),hL=pg;Kn("area-point-auto",pg);function fL(n){var r=n.getResponsiveTheme(),t=n.canvas;new go({plot:n,responsiveTheme:r,dim:"x"}),new go({plot:n,responsiveTheme:r,dim:"y"}),t.draw()}var cL=[],vL=[{name:"responsiveAxis",method:fL}],dL={preRender:cL,afterRender:vL},pL={area:"area",line:"line",point:"point"},gL=An(pL);(0,h.assign)(Si,gL);var yL=function(n){var r=n.opacity||1;return{opacity:r}},mL=function(n){var r=n.opacity||1;return{opacity:r*.5}},xL=function(n){var r=n.opacity||1;return{opacity:r}},bL=function(n){var r=n.opacity||1;return{opacity:r*.5}},wL=function(n){var r=n.lineWidth||1;return{lineWidth:r+2}},SL=function(n){var r=n.fill||n.fillStyle,t=n.size||n.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},CL=function(n){var r=n.fill||n.fillStyle,t=n.size||n.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},ML=function(n){var r=n.opacity||n.fillOpacity||1;return{opacity:r*.5}},gg={areaStyle:{normal:{},active:yL,disable:mL,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:xL,disable:bL,selected:wL},pointStyle:{normal:{},active:SL,disable:ML,selected:CL},label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",fillOpacity:1,stroke:"#2c3542"}}};$n("area",gg);var EL={area:"area",line:"line",point:"point"},yg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="area",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{smooth:!1,areaStyle:{opacity:.25},line:{visible:!0,size:2,style:{opacity:1,lineJoin:"round",lineCap:"round"}},point:{visible:!1,size:4,shape:"point"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20}})},r.prototype.beforeInit=function(){n.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),n.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return EL[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),e[t.yField]={},(0,h.has)(t,"yAxis")&&wn(e[t.yField],t.yAxis),this.setConfig("scales",e),n.prototype.scale.call(this)},r.prototype.coord=function(){return null},r.prototype.addGeometry=function(){var t=this.options,e=ln("area","main",{plot:this});this.area=e,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.adjustArea(e),this.setConfig("geometry",e),this.addLine(),this.addPoint()},r.prototype.adjustArea=function(t){},r.prototype.adjustLine=function(t){},r.prototype.adjustPoint=function(t){},r.prototype.addLine=function(){var t=this.options,e=(0,h.deepMix)({},t.line);if(e.visible){var i=ln("line","guide",{type:"line",plot:this,line:e});this.adjustLine(i),this.setConfig("geometry",i),this.line=i}},r.prototype.addPoint=function(){var t=this.options,e=(0,h.deepMix)({},t.point);if(e.visible){var i=ln("point","guide",{plot:this});this.adjustPoint(i),this.setConfig("geometry",i),this.point=i}},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,i=e.label,a=e.yField,o=t[a];if(i.visible){var s=vo(this.view,"area");this.doRenderLabel(s,(0,Rt.__assign)({type:"area-point",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.animation=function(){n.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area.animate=!1,this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.label=function(){},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.area.tooltip.fields.push(this.options.seriesField)))},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,p)},r.prototype.applyResponsive=function(t){var e=this,i=dL[t];(0,h.each)(i,function(a){var o=a;o.method(e)})},r}(nn),lf=yg;pi("area",yg);var AL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="area",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=lf.getDefaultOptions,r}(ni),mg=AL,TL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getShapeInfo=function(t){var e=t.get("origin").points,i=e[e.length-1],a=t.attr("stroke"),o=this.plot.options.stackField,s=t.get("origin").data[0][o],l=(0,h.reduce)(i.y,function(u,f){return u+f},0)/(0,h.size)(i.y);return{x:i.x,y:l,color:a,name:s}},r}(Ip),_L=TL,uf=12,PL=.01,LL=100,IL=12;function kL(n){var r=-Infinity,t=Infinity,e=-Infinity;return(0,h.each)(n,function(i){t=Math.min(i.x,t),e=Math.max(i.x,e);var a=Math.abs(i.y[0]-i.y[1]);r=Math.max(r,a)}),{xRange:[t,e],maxHeight:r}}function xg(n,r,t){var e=r[0],i=r[r.length-1];(0,h.each)(r,function(o){if(o.x===n)return o.y[t];o.x<n&&o.x>e.x&&(e=o),o.x>n&&o.x<i.x&&(i=o)});var a=(n-e.x)/(i.x-e.x);return e.y[t]*(1-a)+i.y[t]*a}function OL(n,r){var t;for(t=0;t<n.length;t++){var e=n[t];if(e.x===r||e.x>r)break}return t}var BL=function(){function n(r){this.destroyed=!1,this.scaleFactor=[],this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,h.deepMix)(t,r,{}),this.init()}return n.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},n.prototype.render=function(){var r=this,t=this.plot.options.stackField,e=this.getGeometry().dataArray,i=[];(0,h.each)(e,function(o,s){var l=r.drawLabel(o,s);l&&(i.push((0,h.deepMix)({},o[0],l)),r.scaleFactor.push(l.scaleFactor))});var a=[];(0,h.each)(i,function(o,s){var l=r.options,u=l.style,f=l.offsetX,c=l.offsetY,v=r.getFontSize(s),g=r.options.formatter,C=g?g(o._origin[t]):o._origin[t],O=r.container.addShape("text",{attrs:(0,h.deepMix)({},{x:o.x+f,y:o.y+c,text:C,fill:o.color,fontSize:v,textAlign:"center",textBaseline:"top"},u),name:"label"});a.push(O)}),this.plot.canvas.draw()},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getBBox=function(){return this.container.getBBox()},n.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,h.clone)(r.label.style);return t.stroke=null,delete t.fill,{offsetX:0,offsetY:0,style:t,autoScale:!0}},n.prototype.drawLabel=function(r,t){var e=kL(r),i=e.xRange,a=e.maxHeight,o=i[1]-i[0],s=this.getInterpolatedPoints(i[0],o,r),l=this.getLabelBbox(t),u={xRange:i,aspect:l.width/l.height,data:s,justTest:!0},f=this.bisection(IL,a,this.testFit,u,PL,LL);if(f!==null){u.justTest=!1;var c=this.testFit(u);return c.x=c.x,c.y=c.y0+(c.y1-c.y0)/2,c.scaleFactor=f/l.height*.2,c}},n.prototype.getInterpolatedPoints=function(r,t,e){for(var i=[],a=2,o=r;o<t;o+=a){var s=xg(o,e,0),l=xg(o,e,1);i.push({x:o,y:[s,l]})}return i},n.prototype.bisection=function(r,t,e,i,a,o){for(var s=0;s<o;s++){var l=(r+t)/2,u=i;u.height=l,u.width=l*u.aspect;var f=e(u),c=(t-r)/2<a;if(f&&c)return l;f?r=l:t=l}return null},n.prototype.testFit=function(r){for(var t=r.xRange,e=r.width,i=r.height,a=r.data,o=r.justTest,s=0;s<a.length;s++){var l=a[s],u=l.x,f=u+e;if(f>t[1])break;for(var c=OL(a,f),v=-Infinity,g=null,C=Infinity,O=s;O<c;O++){var F=a[O].y[1],G=a[O].y[0];if(G<C&&(C=G),F>v&&(v=F,g=G),C-v<i)break}if(C-v>=i)return o?!0:{x:u,y0:v,y1:g,width:e,height:i}}return!1},n.prototype.getLabelBbox=function(r){var t=(0,h.clone)(this.plot.theme.label.textStyle);t.fontSize=uf;var e=this.container.addShape("text",{attrs:(0,Rt.__assign)({text:r,x:0,y:0},t)}),i=e.getBBox();return e.remove(),i},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="area"})},n.prototype.getFontSize=function(r){if(this.options.autoScale){var t=this.scaleFactor[r];return uf*t}return uf},n}(),DL=BL,FL={lineLabel:{Ctr:_L},areaLabel:{Ctr:DL}};function RL(n,r,t){if(n.options[r]&&n.options[r].visible){var e=FL[r],i=new e.Ctr(t);return e.padding&&n.paddingController.registerPadding(i,e.padding),i}}var NL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(uL),fG=null;Kn("stackedArea-point",NL);var YL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.sortLabels=function(t,e){var i=[];return e.length>0&&i.push(e.shift()),e.length>0&&i.push(e.pop()),i.push.apply(i,e),i},r}(hL),cG=null;Kn("stackedArea-point-auto",YL),$n("stackedArea",gg);var bg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.plotComponents=[],t.type="stackedArea",t.baseType="area",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{label:{visible:!1,type:"area"}})},r.prototype.beforeInit=function(){var t=(0,h.get)(this.options,["label","visible"]),e=(0,h.get)(this.options,["label","type"]),i=this.options;t&&(e==="line"&&(i.lineLabel=this.options.label),e==="area"&&(i.areaLabel=this.options.label)),n.prototype.beforeInit.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.label=function(){var t=this.options,e=t.label;if(e&&e.visible===!1){this.line&&(this.line.label=!1),this.point&&(this.point.label=!1),this.area.label=!1;return}},r.prototype.adjustArea=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustLine=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustPoint=function(t){t.adjust=[{type:"stack"}]},r.prototype.afterRender=function(){this.renderPlotComponents(),this.options.responsive=!1,n.prototype.afterRender.call(this)},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r.prototype.renderPlotComponents=function(){var t=this,e=["areaLabel","lineLabel"];(0,h.each)(e,function(i){var a=(0,Rt.__assign)({view:t.view,plot:t},t.options[i]),o=RL(t,i,a);o&&(o.render(),t.plotComponents.push(o))})},r}(lf),hf=bg;pi("stackedArea",bg);var GL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedArea",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=hf.getDefaultOptions,r}(ni),wg=GL,Sg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="percentStackedArea",t.baseType="stackedArea",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{yAxis:{visible:!0,label:{visible:!0,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,i=e.xField,a=e.yField;return sf(t,i,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[this.options.yField]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(i){var a=(i*100).toFixed(1);return a+"%"}},this.options.meta=(0,h.deepMix)({},t,this.options.meta),n.prototype.scale.call(this)},r}(hf),Cg=Sg;pi("percentStackedArea",Sg);var zL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="percentStackedArea",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Cg.getDefaultOptions,r}(ni),Mg=zL;function XL(n){var r=n.getResponsiveTheme(),t=n.canvas;new go({plot:n,responsiveTheme:r,dim:"x"}),new go({plot:n,responsiveTheme:r,dim:"y"}),t.draw()}var VL=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,h.get)(this.plot.options,["label","position"],"inner")},r}(Tp);function HL(n){var r=n.getResponsiveTheme();new VL({plot:n,responsiveTheme:r})}var WL=[],jL=[{name:"responsiveAxis",method:XL},{name:"responsiveLabel",method:HL}],UL={preRender:WL,afterRender:jL},ZL={label:{top:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodeJitterUpward"},{name:"nodesResamplingByState",option:{keep:["min","max","median"]}},{name:"textHide"}]}}}};tp("column",ZL);var Eg=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var i,a,o=this.options,s=o.style,l=o.formatter,u=[].concat(t.getModel().mappingData),f=this.getValue(t);return(0,h.deepMix)({},s,(0,Rt.__assign)((0,Rt.__assign)({},this.getPosition(t)),{text:l?l(f,(i={},i[Cs]=(a=u[0])===null||a===void 0?void 0:a._origin,i.mappingDatum=u[0],i.mappingDatumIndex=0,i.element=t,i.elementIndex=e,i),e):f,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseLine()}))},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,i=e===void 0?{}:e;return(0,Rt.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},i)},r.prototype.adjustLabel=function(t,e){var i=this.options.adjustPosition;if(i){var a=this.getDefaultOffset(),o=t.getBBox(),s=this.getElementShapeBBox(e);if(s.height<=o.height){var l=s.minY+this.options.offsetY-a;t.attr("y",l),t.attr("textBaseline","bottom"),t.attr("fill",this.options.style.fill)}}},r.prototype.getValue=function(t){return(0,h.get)(t.getData(),this.layer.options.yField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),i=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.minY,l=a.maxY,u=a.height,f=a.width,c=this.options,v=c.offsetX,g=c.offsetY,C=c.position,O=o+f/2+v,F=i>0?-1:1,G;if(C==="top"){var Y=i>0?s:l;G=Y+e*F+g}else if(C==="bottom"){var Y=i>0?l:s;G=Y+e*F+g}else G=s+u/2+g;return{x:O,y:G}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="top"){var i=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=$a(i),s=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,l=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=Nl(l,s);return u}var f=this.options.style.fill;return f},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),i=this.options,a=i.position,o=i.adjustColor;return a!=="top"&&o&&e!=="black"?null:void 0},r.prototype.getElementShapeBBox=function(t){var e=this,i=t.shape,a=[];(0,h.each)(i.get("origin").points,function(g){a.push(e.coord.convertPoint(g))});var o=a.map(function(g){return g.x}),s=Math.min.apply(Math,o),l=Math.max.apply(Math,o),u=a.map(function(g){return g.y}),f=Math.min.apply(Math,u),c=Math.max.apply(Math,u),v=new si(s,f,l-s,c-f);return v},r.prototype.getTextAlign=function(){return"center"},r.prototype.getTextBaseLine=function(){return"middle"},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(Fh),ff=Eg;Kn("column",Eg);var Ag=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),i=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.minY,l=a.maxY,u=a.width,f=this.options,c=f.offsetX,v=f.offsetY,g=o+u/2+c,C=i>0?-1:1,O=i>0?s:l,F=O+e*C+v;return{x:g,y:F}},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,h.every)(t,function(i){var a=i.getBBox(),o=i.get("element"),s=e.getElementShapeBBox(o);return s.width>=a.width})},r.prototype.inShapeLabels=function(t,e){var i=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],s=this.options,l=s.darkStyle,u=s.lightStyle,f=(0,h.groupBy)(e,function(c){return c.get(ia)[_i.FIELD_ORIGIN][o]});(0,h.each)(e,function(c){var v=f[c.get(ia)[_i.FIELD_ORIGIN][o]]||[],g=c.get("element"),C=g.shape,O=af(C.attr("fill")),F=i.getElementShapeBBox(g),G=si.fromBBoxObject(c.getBBox());if(Uh(a,F)<=0&&c.set("visible",!1),G.height>F.height){var Y=(0,h.findIndex)(v,function(q){return q===c});Y!==0&&c.set("visible",!1)}else{c.attr({y:F.y+F.height/2,textBaseline:"middle"});var $=G.width>F.width||G.height>F.height;$?c.attr({stroke:u==null?void 0:u.stroke}):c.attr({fill:O?u==null?void 0:u.fill:l==null?void 0:l.fill,fillOpacity:O?u==null?void 0:u.fillOpacity:l==null?void 0:l.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var i=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],s=[],l=[],u=(0,h.groupBy)(a,function(g){return g.get(ia)[_i.FIELD_ORIGIN][o]}),f=(0,h.uniq)((0,h.map)(a,function(g){return g.get(ia)[_i.FIELD_ORIGIN][o]})),c;for((0,h.size)(f)>0&&(c=f.shift(),(0,h.each)(u[c],function(g){return l.push(g)})),(0,h.size)(f)>0&&(c=f.pop(),(0,h.each)(u[c],function(g){return l.push(g)})),(0,h.each)(f.reverse(),function(g){(0,h.each)(u[g],function(C){return l.push(C)})});l.length>0;){var v=l.shift();v.get("visible")&&(Ol(v,i),Bl(v,s)?v.set("visible",!1):s.push(v))}},r.prototype.filterLabels=function(t){var e=500,i=[],a=Math.max(Math.floor(t.length/e),1);return(0,h.each)(t,function(o,s){s%a==0?i.push(o):o.set("visible",!1)}),i},r}(ff),KL=Ag;Kn("column-auto",Ag);var $L={column:"interval"},QL=An($L);(0,h.assign)(Si,QL);var JL=function(n){var r=n.opacity||1;return{opacity:r*.5}},qL=function(n){var r=n.opacity||1;return{opacity:r*.5,fillOpacity:r*.5}},cf={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:JL,disable:qL,selected:{lineWidth:1,stroke:"black"}}};$n("column",cf);var tI={column:"interval"},eI={interval:"column"},Tg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="column",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},title:{visible:!0}},yAxis:{nice:!0,title:{visible:!0},label:{visible:!0},grid:{visible:!0}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!1,position:"top",adjustColor:!0},legend:{visible:!0,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}})},r.prototype.beforeInit=function(){n.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new Zp((0,Rt.__assign)({view:this.view,field:t.yField,transpose:!0,animation:t.animation!==!1},t.conversionTag))),n.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?tI[e]:eI[e]},r.prototype.processData=function(t){var e=this.options.xField,i=[];return(0,h.each)(t,function(a){var o=(0,h.clone)(a);o[e]=o[e].toString(),i.push(o)}),i},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),e[t.yField]={},(0,h.has)(t,"yAxis")&&wn(e[t.yField],t.yAxis),this.setConfig("scales",e),n.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.adjustColumn=function(t){},r.prototype.addGeometry=function(){var t=this.options,e=ln("interval","main",{positionFields:[t.xField,t.yField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,h.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustColumn(e),this.column=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.column.tooltip.fields.push(this.options.colorField)))},r.prototype.animation=function(){n.prototype.animation.call(this),this.options.animation===!1&&(this.column.animate=!1)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,w)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,i=e.label,a=e.yField,o=t[a];if(i==null?void 0:i.visible){var s=vo(this.view,"interval");this.doRenderLabel(s,(0,Rt.__assign)({type:"column",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.applyResponsive=function(t){var e=this,i=UL[t];(0,h.each)(i,function(a){var o=a;o.method(e)})},r}(nn),Qo=Tg;pi("column",Tg);var rI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="column",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Qo.getDefaultOptions,r}(ni),_g=rI;$n("groupedColumn",cf);var Pg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.baseType="column",t.type="groupedColumn",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{yAxis:{title:{visible:!0}}})},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme("column")},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.addGeometry=function(){n.prototype.addGeometry.call(this)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(Qo),vf=Pg;pi("groupedColumn",Pg);var iI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="groupedColumn",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=vf.getDefaultOptions,r}(ni),Lg=iI;function Ig(n,r){var t=[],e=n.get("origin").points;return(0,h.each)(e,function(i){t.push(r.convertPoint(i))}),t}function nI(){return{areaStyle:{opacity:.2},lineStyle:{lineWidth:2,opacity:.1}}}var aI=function(){function n(r){this.areas=[],this.lines=[],this._areaStyle={},this._lineStyle={},(0,h.assign)(this,r),this._init()}return n.prototype.draw=function(){var r=this,t=this._getGroupedShapes();(0,h.each)(t,function(e,i){e.length>0&&r._drawConnection(e,i)}),this.triggerOn?this._addInteraction():this.animation&&this._initialAnimation()},n.prototype.clear=function(){this.container&&this.container.clear(),this.areas=[],this.lines=[]},n.prototype.destroy=function(){this.container&&this.container.remove()},n.prototype.setState=function(r,t){r==="active"&&this._onActive(t),r==="disabled"&&this._onDisabled(t),r==="selected"&&this._onSelected(t)},n.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},n.prototype._getGroupedShapes=function(){var r=this,t=this.view.getScaleByField(this.field).values,e=this.view.geometries[0],i=e.getShapes(),a={};return(0,h.each)(t,function(o){a[o]=[]}),(0,h.each)(i,function(o){var s=o.get("origin").data,l=s[r.field];a[l].push(o)}),a},n.prototype._drawConnection=function(r,t){var e=r[0].attr("fill");this._areaStyle[t]=this._getShapeStyle(e,"area"),this._lineStyle[t]=this._getShapeStyle(e,"line");for(var i=this.view.geometries[0].coordinate,a=0;a<r.length-1;a++){var o=Ig(r[a],i),s=Ig(r[a+1],i),l=(0,h.mix)({},this._areaStyle[t]),u=(0,h.mix)({},this._lineStyle[t]);this.triggerOn&&(l.opacity=0,u.opacity=0);var f=this.container.addShape("path",{attrs:(0,h.mix)({},l,{path:[["M",o[2].x,o[2].y],["L",s[1].x,s[1].y],["L",s[0].x,s[0].y],["L",o[3].x,o[3].y]]}),name:"connectedArea"}),c=this.container.addShape("path",{attrs:(0,h.mix)({},u,{path:[["M",o[2].x,o[2].y],["L",s[1].x,s[1].y]]}),name:"connectedArea"}),v=r[a].get("origin").data;f.set("data",v),c.set("data",v),this.areas.push(f),this.lines.push(c)}},n.prototype._getShapeStyle=function(r,t){var e=t+"Style";if(this[e])return this[e];var i=nI()[e],a={fill:r};return t==="line"&&(a={stroke:r}),(0,h.mix)(i,a)},n.prototype._addInteraction=function(){var r=this,t=this.triggerOn;this.view.on("interval:"+t,function(e){var i=e.target.get("origin").data[r.field];r.setState("active",{name:r.field,exp:i}),r.setState("disabled",{name:r.field,exp:function(a){return a!==i}}),r.view.canvas.draw()}),this.view.on("mousemove",function(e){e.gEvent.target.get("name")!=="interval"&&r.setState("disabled",{name:r.field,exp:function(){return!0}})})},n.prototype._initialAnimation=function(){var r=this.view.coordinateBBox,t=r.x,e=r.y,i=r.width,a=r.height;this.container.setClip({type:"rect",attrs:{x:t,y:e,width:0,height:a}}),this.container.set("animating",!0),this.container.getClip().animate({width:i},600,"easeQuadOut",function(){},400)},n.prototype._onActive=function(r){var t=this;(0,h.each)(this.areas,function(e){var i=e.get("data"),a=i[t.field];if(Ka(i,r)){var o=t._areaStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}}),(0,h.each)(this.lines,function(e){var i=e.get("data"),a=i[t.field];if(Ka(i,r)){var o=t._lineStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}})},n.prototype._onDisabled=function(r){(0,h.each)(this.areas,function(t){var e=t.get("data");Ka(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))}),(0,h.each)(this.lines,function(t){var e=t.get("data");Ka(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))})},n.prototype._onSelected=function(r){this._onActive(r)},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="interval"})},n}(),oI=aI;$n("stackedColumn",cf);var sI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var i=this.options.adjustPosition;if(i){var a=t.getBBox(),o=this.getElementShapeBBox(e);(o.height<a.height||o.width<a.width)&&t.hide()}},r}(ff),vG=null;Kn("stacked-column",sI);var lI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(KL),dG=null;Kn("stacked-column-auto",lI);var kg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="stackedColumn",t.baseType="column",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{legend:{visible:!0,position:"right-top"},label:{visible:!1,position:"middle",offset:0,adjustColor:!0},connectedArea:{visible:!1,triggerOn:"mouseenter"}})},r.prototype.init=function(){this.options.connectedArea.visible&&(this.options.tooltip.crosshairs=null),n.prototype.init.call(this)},r.prototype.afterRender=function(){var t=this.options;t.connectedArea.visible&&(this.connectedArea=new oI((0,Rt.__assign)({view:this.view,field:t.stackField,animation:t.animation!==!1},t.connectedArea))),n.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,i=e.label,a=e.yField,o=t[a];if(i&&i.visible){var s=vo(this.view,"interval");this.doRenderLabel(s,(0,Rt.__assign)({type:"stacked-column",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(Qo),Gl=kg;pi("stackedColumn",kg);var uI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedColumn",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Gl.getDefaultOptions,r}(ni),Og=uI,df=8;function hI(n,r){var t;return(0,h.each)(n,function(e){var i=e;r>=i.from&&r<i.to&&(t=i.color)}),t}var fI=function(){function n(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,h.deepMix)(t,r,{}),this.options.topStyle||(this.options.topStyle=this.options.style),this.options.bottomStyle||(this.options.bottomStyle=this.options.style),this.init()}return n.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},n.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.coordinate,i=t.elements;this.coord=e,(0,h.each)(i,function(a){var o=a.shape,s=r.getPosition(o),l=r.getValue(o),u=r.getTextBaseline(),f=[];(0,h.each)(s,function(c,v){var g=v===1?r.options.topStyle:r.options.bottomStyle,C=r.getTextColor(o,v);r.options.position==="inner"&&r.options.adjustColor&&C!=="black"&&(g.stroke=null);var O=r.options.formatter,F=O?O(l[v]):l[v],G=r.container.addShape("text",{attrs:(0,h.deepMix)({},g,{x:c.x,y:c.y,text:F,fill:C,textAlign:"center",textBaseline:u[v]}),name:"label"});f.push(G),r.doAnimation(G)}),o.set("labelShapes",f),r.adjustPosition(f[0],f[1],o)}),this.plot.canvas.draw()},n.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getBBox=function(){return this.container.getBBox()},n.prototype.getShapeBbox=function(r){var t=this,e=[];(0,h.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var i=new si(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return i},n.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:0,offsetY:df,style:(0,h.clone)(t),adjustColor:!0,adjustPosition:!0}},n.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,i=t.minY,a=t.maxY,o=t.width,s=this.options.offsetY,l=e+o/2,u,f;return this.options.position==="outer"?(u=i-s,f=a+s):(u=i+s,f=a-s),[{x:l,y:f},{x:l,y:u}]},n.prototype.getValue=function(r){var t=this.plot.options.yField;return r.get("origin").data[t]},n.prototype.getTextBaseline=function(){return this.options.position==="outer"?["top","bottom"]:["bottom","top"]},n.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),i=r.attr("opacity")?r.attr("opacity"):1,a=$a(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/i,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],l=hI(s,o);return l}var u=t===1?this.options.topStyle.fill:this.options.bottomStyle.fill;return u},n.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},n.prototype.adjustPosition=function(r,t,e){var i=e.get("origin"),a=i.y[1],o=i.y[0],s=e.getBBox(),l=s.height,u=l,f=this.view.coordinateBBox,c=[r.getBBox(),t.getBBox()],v=r.attr("y"),g=t.attr("y");if(this.options.adjustPosition&&this.options.position==="inner"){var C=c[0].height+c[1].height,O=c[1].maxY-c[0].minY>2,F=C>u;(O||F)&&(g=a-this.options.offsetY,t.attr("fill",this.options.topStyle.fill),t.attr("textBaseline","bottom"),v=o+this.options.offsetY,r.attr("fill",this.options.bottomStyle.fill),r.attr("textBaseline","top"),c[0]=r.getBBox(),c[1]=t.getBBox())}c[0].maxY>f.maxY-df&&(v=f.maxY-df/2,r.attr("textBaseline","bottom")),r.attr("y",v),t.attr("y",g),this.plot.canvas.draw()},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="interval"})},n}(),cI=fI,Bg;function Dg(n,r){var t=n.getBBox(),e=t.minY+t.height/2;n.setClip({type:"rect",attrs:{x:t.minX,y:e,width:t.width,height:0}});var i=n.get("clipShape");i.animate({height:t.height,y:t.minY},r.duration,r.easing,function(){n.setClip(null)},r.delay)}Dg.animationName="clipInFromCenterVertical";function vI(n){Bg=n}function Fg(n,r){var t=dI(n).attr("path"),e=(0,h.clone)(n.attr("path"));n.attr("path",t),n.animate({path:e},r.duration,r.easing,r.callback,100)}function dI(n){var r=n.id,t;return(0,h.each)(Bg,function(e){e.id===r&&(t=e)}),t}Fg.animationName="updateFromCenterVertical",dn("clipInFromCenterVertical",Dg),dn("updateFromCenterVertical",Fg);var Rg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="rangeColumn",t}return r.getDefaultOptions=function(){return(0,h.deepMix)(n.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,h.each)(e,function(i){var a=i.elements;(0,h.each)(a,function(o){t.push(o.shape)})}),vI(t),n.prototype.afterRender.call(this)},r.prototype.animation=function(){n.prototype.animation.call(this),this.column.animate={appear:{animation:"clipInFromCenterVertical",duration:600},update:{animation:"updateFromCenterVertical",duration:600}}},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new cI((0,Rt.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r}(Qo),pI=Rg;pi("rangeColumn",Rg);var gI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="rangeColumn",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=pI.getDefaultOptions,r}(ni),Ng=gI,Yg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="percentStackedColumn",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{label:{visible:!0,position:"middle",offset:0},yAxis:{visible:!0,tick:{visible:!1},grid:{visible:!1},title:{visible:!0},label:{visible:!1}}})},r.prototype.processData=function(t){var e=this.options,i=e.xField,a=e.yField;return sf(t||[],i,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(i){var a=(i*100).toFixed(1);return a+"%"}},this.options.meta=(0,h.deepMix)({},this.options.meta,t),n.prototype.scale.call(this)},r}(Gl),Gg=Yg;pi("percentStackedColumn",Yg);var yI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="percentStackedColumn",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Gg.getDefaultOptions,r}(ni),zg=yI,mI={pie:"interval"},xI=An(mI);(0,h.assign)(Si,xI);function zl(n,r,t){return{x:n.x+t*Math.cos(r),y:n.y+t*Math.sin(r)}}function pG(n){return{x:n.x+n.width/2,y:n.y+n.height/2}}function bI(n,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(n.x+n.width+t,r.x+r.width+t)-Math.max(n.x-t,r.x-t)),i=Math.max(0,Math.min(n.y+n.height+t,r.y+r.height+t)-Math.max(n.y-t,r.y-t));return e*i}function wI(n,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(n.x+n.width+t,r.x+r.width+t)-Math.max(n.x-t,r.x-t)),i=Math.max(0,Math.min(n.y+n.height+t,r.y+r.height+t)-Math.max(n.y-t,r.y-t));return e&&n.x<r.x&&(e=-e),i&&n.y<r.y&&(i=-i),n.x===r.x&&n.width===r.width&&(e=r.width),n.y===r.y&&n.height===r.height&&(i=r.height),{xOverlap:e,yOverlap:i}}function gG(n,r){return n.x<r.x&&n.x+n.width>r.x+r.width&&n.y<r.y&&n.y+n.height>r.y+r.height}var SI=function(n,r,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[n,r].includes(Infinity)?Math.abs(n)===Math.abs(r):Math.abs(n-r)<t};function CI(n,r){var t=n.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function MI(n){var r=Math.PI/2,t=n;return(t>r||t<-r)&&(t=t+Math.PI),t}var yG=4;function EI(n){var r=Number(n.endsWith("%")?n.slice(0,-1):n);return r/100}function AI(n,r){var t=n.getBBox();r.y<=t.y&&r.y+r.height>=t.y+t.height||n.get("parent").set("visible",!1)}var TI=function(){function n(r,t){this.destroyed=!1,this.plot=r,this.coordinateBBox=this.plot.view.coordinateBBox;var e=(0,h.deepMix)(this.getDefaultOptions(),t,{});this.adjustOption(e),this.options=e,this.init()}return n.prototype.adjustOverlap=function(r,t){for(var e=1;e<r.length;e++)for(var i=r[e],a=0,o=e-1;o>=0;o--){var s=r[o],l=s.getBBox(),u=i.getBBox();if(s.get("parent").get("visible")&&(a=bI(l,u),!SI(a,0))){i.get("parent").set("visible",!1);break}}r.forEach(function(f){return AI(f,t)})},n.prototype.adjustItem=function(r){},n.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.plot.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},n.prototype.render=function(){this.clear(),this.initArcPoints(),this.drawTexts(),this.drawLines()},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getFilteredSum=function(){var r=this.plot.options.angleField,t=this.plot.view.filteredData||[];return t.reduce(function(e,i){return e+i[r]},0)},n.prototype.drawTexts=function(){var r=this,t=this.options,e=t.style,i=t.formatter,a=t.autoRotate,o=t.offsetX,s=t.offsetY,l=t.adjustPosition,u=t.allowOverlap,f=this.getItems(),c=[];f.map(function(v,g){var C=(0,h.deepMix)({},v,e),O=r.getFilteredSum(),F=r.plot.options.angleField,G=v.origin[F]/O,Y=i?i(v.name,{_origin:v.origin,percent:G},g):v.name,$=r.container.addGroup({name:"itemGroup",index:g,capture:!1}),q=$.addShape("text",{attrs:(0,h.deepMix)({},C,{x:v.x+o,y:v.y+s,text:Y})});q.set("id","text-"+v.name+"-"+g),c.push(q)}),c.forEach(function(v){var g=r.coordinateBBox;r.adjustText(v,g)}),l&&this.layout(c,f,this.coordinateBBox),u||this.adjustOverlap(c,this.coordinateBBox),c.forEach(function(v,g){a&&r.rotateLabel(v,MI(f[g].angle))})},n.prototype.adjustText=function(r,t){var e=r.getBBox(),i=e.width,a=0;if(e.maxX>t.maxX?i=t.maxX-e.minX:e.minX<t.minX&&(i=e.maxX-t.minX),r.attr("textAlign")==="left"?r.attr("x",Math.max(e.x-a,0)):r.attr("textAlign")==="right"&&r.attr("x",Math.max(e.maxX-a,0)),i!==e.width){var o={};["fontSize","fontFamily","fontWeight"].forEach(function(l){o[l]=r.attr(l)});var s=r.attr("text").split(`
`).map(function(l){return zd(l,i,o)});r.attr("text",s.join(`
`))}},n.prototype.drawLines=function(){var r=this;if(this.options.line.visible){var t=this.container.get("children"),e=this.getCoordinate().center;t.forEach(function(i,a){var o=i.get("children")[0],s=r.arcPoints[a],l=s.x<e.x,u=r.options.offset>4?4:0,f=r.getLinePath(o,s,u),c=r.options.line;i.addShape("path",{attrs:(0,Rt.__assign)({path:f,stroke:s.color},c)}),o.attr("x",o.attr("x")+(l?-u:u))})}},n.prototype.getLinePath=function(r,t,e){var i=this.options.line?this.options.line.smooth:!1,a=t.angle,o=this.getCoordinate(),s=o.center,l=o.radius,u=zl(s,a,l+e);e<4&&(u=t);var f=t.x<s.x,c=r.getBBox(),v={x:f?c.maxX:c.minX,y:c.y+c.height/2},g=["C",v.x+(f?1:-1)*(e<4?e/2:4),v.y,2*u.x-t.x,2*u.y-t.y,u.x,u.y],C=["L",u.x,u.y],O=i?g:C,F=["M",v.x,v.y].concat(O).concat("L",t.x,t.y);return F.join(",")},n.prototype.getGeometry=function(){return this.plot.view.geometries[0]},n.prototype.getCoordinate=function(){var r=this.getGeometry().coordinate,t=r.getCenter(),e=r.getRadius(),i=r.startAngle;return{center:t,radius:e,startAngle:i}},n.prototype.adjustOption=function(r){var t=r.offset,e=this.getCoordinate().radius;(0,h.isString)(t)&&(t=e*EI(t)),r.offset=t},n.prototype.rotateLabel=function(r,t){var e=r.attr("x"),i=r.attr("y"),a=Ri.transform(r.getMatrix(),[["t",-e,-i],["r",t],["t",e,i]]);r.setMatrix(a)},n.prototype.getItems=function(){var r=this,t=this.options.offset,e=this.getCoordinate(),i=e.center,a=e.radius,o=this.arcPoints.map(function(s){var l=zl(i,s.angle,a+t),u=(0,Rt.__assign)((0,Rt.__assign)({},s),l);return r.adjustItem(u),u});return o},n.prototype.initArcPoints=function(){var r=this,t=this.plot.options.angleField,e=this.getGeometry().elements,i=this.getCoordinate(),a=i.center,o=i.radius,s=this.getCoordinate().startAngle,l=this.getGeometry().attributes.position.scales,u=l[1],f=u.field,c=e.map(function(v){var g=v.shape.get("origin"),C=g.color,O=g.data[0]||g.data,F=s+Math.PI*2*u.scale(O[f]),G=(s+F)/2,Y=zl(a,G,o);s=F;var $=u.getText(O[t]),q=Y.x>a.x?"left":"right";return{x:Y.x,y:Y.y,color:C,name:$,origin:O,angle:CI(r.getGeometry().coordinate,Y),textAlign:q}});this.arcPoints=c},n}(),pf=TI;function mG(n){var r=Number(n.endsWith("%")?n.slice(0,-1):n);return r/100}var _I=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){n.prototype.adjustOption.call(this,t),t.offset>0&&(t.offset=0)},r.prototype.adjustItem=function(t){t.textAlign="middle"},r.prototype.drawLines=function(){},r.prototype.layout=function(t,e){var i=this;t.forEach(function(a,o){o>0&&(0,h.each)(t.slice(0,o),function(s){i.resolveCollision(a,s,e[o])})})},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:"-30%",style:(0,Rt.__assign)((0,Rt.__assign)({},e),{textAlign:"center",textBaseline:"middle"})}},r.prototype.resolveCollision=function(t,e,i){var a=this.getCoordinate().center,o=i.angle,s=t.getBBox(),l=e.getBBox(),u={x:(s.minX+s.maxX)/2,y:(s.minY+s.maxY)/2},f=(0,h.clone)(u),c=(0,h.clone)(u);if(e.get("id")!==t.get("id")){var v=wI(s,l),g=v.xOverlap,C=v.yOverlap;if(g&&(f.x=u.x+g,f.y=u.y+Math.tan(o)*g),C){var O=C;u.y<a.y?O=O<0?O:l.minY-s.maxY:O=O>0?O:l.maxY-s.minY,c.y=u.y+O,c.x=u.x+O/Math.tan(o)}var F=xd(u,f),G=xd(u,c),Y=F<G?f:c;t.attr("x",Y.x),t.attr("y",Y.y)}},r}(pf),PI=_I,xG=16,LI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){n.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,Rt.__assign)((0,Rt.__assign)({},e),{textBaseline:"middle"})}},r.prototype.layout=function(t,e,i){var a=this,o=this.getCoordinate().center,s=(0,h.filter)(t,function(u){return u.attr("x")<=o.x}),l=(0,h.filter)(t,function(u){return u.attr("x")>o.x});[l,s].forEach(function(u,f){a._antiCollision(u,!f,i)})},r.prototype._antiCollision=function(t,e,i){var a=this,o=this.getLabelHeight(t),s=this.getCoordinate(),l=s.center,u=s.radius,f=this.options.offset,c=u+f,v=Math.min(i.height,Math.max(c*2+o*2,t.length*o)),g=Math.floor(v/o);this.options.allowOverlap||t.slice(g).forEach(function(Ft){Ft.get("parent").set("visible",!1)}),t.splice(g,t.length-g),t.sort(function(Ft,ee){return Ft.getBBox().y-ee.getBBox().y});for(var C=!0,O,F=l.y+v/2,G=l.y-v/2,Y=t.map(function(Ft){var ee=Ft.getBBox();return ee.maxY>F&&(F=Math.min(i.maxY,ee.maxY)),ee.minY<G&&(G=Math.max(i.minY,ee.minY)),{text:Ft.attr("text"),size:o,pos:ee.y,targets:[]}}),$=0;$<Y.length;)$===Y.length-1?Y[$].targets[0]=F:Y[$].targets[0]=Y[$+1].pos-Y[$+1].size/2,$++;for(;C;)for(Y.forEach(function(Ft){var ee=(0,h.last)(Ft.targets);Ft.pos=Math.max(G,Math.min(Ft.pos,ee-Ft.size))}),C=!1,O=Y.length;O--;)if(O>0){var q=Y[O-1],ut=Y[O];if(q.pos+q.size>ut.pos){q.size+=ut.size,q.targets=q.targets.concat(ut.targets);var kt=(0,h.last)(q.targets);q.pos+q.size>kt&&(q.pos=kt-q.size),Y.splice(O,1),C=!0}else q.targets.splice(-1,1,ut.pos)}O=0,Y.forEach(function(Ft){var ee=o/2;Ft.targets.forEach(function(){t[O].attr("y",Ft.pos+ee),ee+=o,O++})});var Nt=[],Wt=[];t.forEach(function(Ft,ee){var ve=a.arcPoints[ee];ve.angle>=0&&ve.angle<=Math.PI?Wt.push(Ft):Nt.push(Ft)}),[Nt,Wt].forEach(function(Ft,ee){if(!!Ft.length){var ve=ee?(0,h.last)(Ft).getBBox().maxY-l.y:l.y-(0,h.head)(Ft).getBBox().minY;ve=Math.max(c,ve);var fe=f>4?4:0,Te=Math.max.apply(0,(0,h.map)(t,function(tr){return tr.getBBox().width}))+f+fe,Be=Math.max(c,Math.min((ve+c)/2,l.x-(i.minX+Te))),ke=Be*Be,Qe=ve*ve;Ft.forEach(function(tr,rr){var Ze=a.arcPoints[rr],Ke=tr.getBBox(),wr={x:Ke.minX+Ke.width/2,y:Ke.minY+Ke.height/2},br=Math.pow(wr.y-l.y,2),Ir=zl(l,Ze.angle,u),ir=(e?1:-1)*fe*2;if(br>Qe)console.warn("\u5F02\u5E38(\u4E00\u822C\u4E0D\u4F1A\u51FA\u73B0)",tr.attr("text")),tr.attr("x",Ir.x+ir);else{var Mr=l.x+(e?1:-1)*Math.sqrt((1-br/Qe)*ke);(l.x===Ir.x&&wr.y===Ir.y||l.y===Ir.y&&Mr===Ir.x)&&(Mr=Ir.x),tr.attr("x",Mr+ir)}})}})},r.prototype.getLabelHeight=function(t){return this.options.labelHeight?this.options.labelHeight:(0,h.head)(t)?(0,h.head)(t).getBBox().height:14},r}(pf),II=LI,bG=16,kI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){n.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,Rt.__assign)((0,Rt.__assign)({},e),{textBaseline:"middle"})}},r.prototype.adjustItem=function(t){var e=this.options.offset;t.textAlign==="left"?t.x+=e>4?4:e/2:t.textAlign==="right"&&(t.x-=e>4?4:e/2)},r.prototype.layout=function(t,e,i){},r}(pf),OI=kI,Xg={inner:PI,outer:II,"outer-center":OI};function BI(n){if(!Xg[n]){console.warn("this label "+n+" is not registered");return}return Xg[n]}var DI=0,gf=15,FI="#CCC",RI=2,NI=-2,Vg=15;function Hg(n,r,t){return{x:n.x+t*Math.cos(r),y:n.y+t*Math.sin(r)}}var YI=function(){function n(r){this.destroyed=!1,this.view=r.view,this.options=(0,h.deepMix)({},this.getDefaultOptions(),r),this._adjustOptions(this.options),this.init()}return n.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear()})},n.prototype.render=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,h.clone)(this.view.getData());this.halves=[[],[]];var e=[],i=this.view.geometries[0].elements;(0,h.each)(i,function(ut){e.push(ut.shape)}),this.coord=this.view.geometries[0].coordinate;var a=this.options,o=a.allZero,s=a.angleField,l=this.options.fields[0],u=this.view.getScalesByDim("y")[l],f=this.coord.getCenter(),c=this.coord.startAngle,v=this.coord.polarRadius,g=this.view.coordinateBBox,C=g.width,O=g.height;this.width=C,this.height=O;for(var F=c,G=function(ut){var kt=t[ut],Nt=u.scale(kt[l]),Wt=F+Math.PI*2*Nt,Ft=F+(Wt-F)/2;F=Wt;var ee=Hg(f,Ft,v+DI),ve=Hg(f,Ft,v+gf),fe=FI;if(Y.options.fields.length===2){var Te=Y.options.fields[1],Be=Y.view.geometries[0].scales[Te],ke=Be.scale(kt[Te]);if(ke){var Qe=Math.floor(ke*(e.length-1));fe=e[Qe].attr("fill")}}var tr={_anchor:ee,_inflection:ve,_data:kt,x:ve.x,y:ve.y,r:v+gf,fill:fe,textGroup:null,_side:null},rr=[];if((0,h.each)(Y.options.fields,function(zr){o&&zr===Xl?rr.push(kt[s]):rr.push(kt[zr])}),Y.options.formatter){var Ze=Y.options.formatter(kt[s],{_origin:kt,color:fe},ut);(0,h.isString)(Ze)&&(Ze=[Ze]),rr=Ze}var Ke=Y.container.addGroup({capture:!1,visible:!1}),wr={x:0,y:0,fontSize:Y.options.text.fontSize,lineHeight:Y.options.text.fontSize,fontWeight:Y.options.text.fontWeight,fill:Y.options.text.fill},br=kt[s];Y.options.formatter&&(br=rr[0]);var Ir=(0,h.clone)(wr);rr.length===2&&(Ir.fontWeight=700);var ir=Ke.addShape("text",{attrs:(0,h.mix)({textBaseline:rr.length===2?"top":"middle",text:br},Ir),data:kt,offsetY:rr.length===2?RI:0,name:"label"});if(ir.name="label",rr.length===2){var Mr=Ke.addShape("text",{attrs:(0,h.mix)({textBaseline:"bottom",text:rr[1]},wr),data:kt,offsetY:NI,name:"label"});Mr.name="label"}tr.textGroup=Ke,ee.x<f.x?(tr._side="left",Y.halves[0].push(tr)):(tr._side="right",Y.halves[1].push(tr))},Y=this,$=0;$<t.length;$++)G($);var q=Math.floor(O/this.options.lineHeight);(0,h.each)(this.halves,function(ut){ut.length>q&&ut.splice(q,ut.length-q),ut.sort(function(kt,Nt){return kt.y-Nt.y}),r._antiCollision(ut)}),this.view.canvas.draw()}},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.hide=function(){this.container.set("visible",!1),this.view.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.view.canvas.draw()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getDefaultOptions=function(){return{text:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12},line:{lineWidth:.5,stroke:"rgba(0, 0, 0, 0.45)"},lineHeight:32,sidePadding:20}},n.prototype._antiCollision=function(r){var t=this,e=this.coord,i=e.getHeight(),a=e.center,o=e.getRadius(),s=a.y-o-gf-this.options.lineHeight,l=!0,u=i,f,c=0,v=Number.MIN_VALUE,g=0,C=r.map(function($){var q=$.y;q>c&&(c=q),q<v&&(v=q);var ut=$.textGroup,kt=ut.getBBox().width;return kt>=g&&(g=kt),{size:t.options.lineHeight,targets:[q-s]}});c-s>u&&(u=c-s);for(var O=function($){$.forEach(function(q){var ut=(Math.min.apply(v,q.targets)+Math.max.apply(v,q.targets))/2;q.pos=Math.min(Math.max(v,ut-q.size/2),u-q.size)})};l;)for(O(C),l=!1,f=C.length;f--;)if(f>0){var F=C[f-1],G=C[f];F.pos+F.size>G.pos&&(F.size+=G.size,F.targets=F.targets.concat(G.targets),F.pos+F.size>u&&(F.pos=u-F.size),C.splice(f,1),l=!0)}f=0,C.forEach(function($){var q=s;$.targets.forEach(function(){r[f].y=$.pos+q+t.options.lineHeight/2,q+=t.options.lineHeight,f++})});var Y=[];r.forEach(function($){var q=t._drawLabel($);t._drawLabelLine($,g,q),Y.push(q)})},n.prototype._drawLabel=function(r){var t=this.coord,e=t.getCenter(),i=t.getRadius(),a=r.y,o=r.textGroup,s=o.get("children"),l=r._side==="left"?1:-1,u=(0,Rt.__assign)({textAlign:r._side==="left"?"right":"left",x:r._side==="left"?e.x-i-this.options.sidePadding:e.x+i+this.options.sidePadding},this.options.style);return this.options.offsetX&&(u.x+=this.options.offsetX*l),s.forEach(function(f){var c=f.get("offsetY"),v=a+c;f.attr(u),f.attr("y",v)}),o.show(),o},n.prototype._drawLabelLine=function(r,t,e){var i=[r._anchor.x,r._anchor.y],a=[r._inflection.x,r._inflection.y],o=r.y,s=r.textGroup;if(!!s){var l=[r._side==="left"?s.getBBox().maxX+4:s.getBBox().minX-4,o],u=[i,a,l];if(a[1]!==o)if(a[1]<this.height/2&&a[1]<o||a[1]>=this.height/2&&a[1]>o){var f=a,c=l[0]+Vg,v=l[0]-Vg,g=[r._side==="left"?c:v,a[1]];u=[i,f,g,l],(r._side==="right"&&g[0]<f[0]||r._side==="left"&&g[0]>f[0])&&(u=[i,f,l])}else u=[i,[a[0],o],l];for(var C=[],O=0;O<u.length;O++){var F=u[O],G="L";O===0&&(G="M"),C.push([G,F[0],F[1]])}e.addShape("path",{attrs:{path:C,lineWidth:this.options.line.lineWidth,stroke:this.options.line.stroke}})}},n.prototype._adjustOptions=function(r){r.text.fontSize&&(r.lineHeight=r.text.fontSize*3)},n}(),GI=YI,zI=function(n){var r=n.opacity||1;return{fillOpacity:r*.8}},XI=function(n){var r=n.opacity||1;return{fillOpacity:r*.5}};$n("pie",{columnStyle:{normal:{},active:zI,disable:XI,selected:{lineWidth:1,stroke:"black"}}});var Xl="$$percentage$$",VI={pie:"interval"},HI={pie:"column"},Wg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="pie",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,label:{visible:!0,type:"inner",autoRotate:!1,adjustPosition:!0,allowOverlap:!1,line:{visible:!0,smooth:!0}},legend:{visible:!0,position:"right-center"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},pieStyle:{stroke:"white",lineWidth:1}})},r.prototype.afterInit=function(){n.prototype.afterInit.call(this);var t=this.options,e=t.angleField,i=t.colorField,a=t.data,o=(0,h.every)(a,function(l){return l[e]===0});if(o){var s=this.view.geometries[0];s.tooltip(i+"*"+e)}},r.prototype.afterRender=function(){n.prototype.afterRender.call(this);var t=this.options;if(t.label&&t.label.visible){this.labelComponent&&this.labelComponent.clear();var e=t.label;if(e.type==="spider"){var i=t.data,a=t.colorField,o=t.angleField,s=(0,h.every)(i,function(f){return f[o]===0}),l=s?Xl:o;this.labelComponent=new GI((0,Rt.__assign)({view:this.view,fields:a?[l,a]:[l],angleField:o,allZero:s},this.options.label)),this.labelComponent.render()}else{var u=BI(e.type);this.labelComponent=new u(this,t.label),this.labelComponent.render()}}},r.prototype.getAngleScale=function(){var t=this.options.angleField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?VI[e]:HI[e]},r.prototype.scale=function(){var t=this.options;n.prototype.scale.call(this);var e={};e[t.angleField]={},e[t.colorField]={type:"cat"},e=(0,h.deepMix)({},this.config.scales,e),this.setConfig("scales",e)},r.prototype.processData=function(t){var e=this.options.angleField,i=(0,h.every)(t,function(a){return a[e]===0});return i?t.map(function(a){var o;return(0,Rt.__assign)((0,Rt.__assign)({},a),(o={},o[e]=typeof a[e]=="string"?Number.parseFloat(a[e]):a[e],o[Xl]=1/t.length,o))}):t.map(function(a){var o,s=a[e];return(0,Rt.__assign)((0,Rt.__assign)({},a),(o={},o[e]=s&&!isNaN(s)?+s:s,o))})},r.prototype.axis=function(){},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=t.data,i=t.angleField,a,o=(0,h.every)(e,function(s){return s[i]===0});o?a=ln("interval","main",{plot:this,positionFields:[1,Xl]}):a=ln("interval","main",{plot:this,positionFields:[1,t.angleField]}),a.adjust=[{type:"stack"}],this.pie=a,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",a)},r.prototype.geometryTooltip=function(){this.pie.tooltip={};var t=this.options.tooltip;t.fields?this.pie.tooltip.fields=t.fields:this.pie.tooltip.fields=[this.options.angleField,this.options.colorField],t.formatter&&(this.pie.tooltip.callback=t.formatter,t.fields||(this.pie.tooltip.fields=[this.options.angleField,this.options.colorField]))},r.prototype.animation=function(){n.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.pie.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(t){t?n.prototype.parseEvents.call(this,t):n.prototype.parseEvents.call(this,y)},r.prototype.label=function(){this.pie.label=!1},r}(nn),jg=Wg;pi("pie",Wg);var WI=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="pie",n.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=jg.getDefaultOptions,r}(ni),Ug=WI,jI=.3989422804014327,UI=1/255/16,_s="_origin",ZI=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.type="heatmap",e.paletteCache={},e.intensity=t.intensity,e.radius=t.radius,e}return r.prototype.createElements=function(t){var e=this.prepareRange(t);return this.prepareSize(),this.prepareBlur(),this.prepareGreyScaleBlurredCircle(this.radius),this.drawWithRange(t,e),null},r.prototype.clear=function(){this.clearShadowCanvasCtx(),n.prototype.clear.call(this)},r.prototype.prepareRange=function(t){var e=this.getAttribute("color"),i=e.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(s){var l=s[_s][i];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},r.prototype.prepareSize=function(){var t=this.radius;this.radius||(t=this.getDefaultValue("size"),(0,h.isNumber)(t)||(t=this.getDefaultSize()),this.radius=t)},r.prototype.prepareBlur=function(){var t=(0,h.get)(this.styleOption,["style","shadowBlur"]);(0,h.isNumber)(t)||(t=this.radius/2),this.blur=t},r.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate,i=Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4));return i},r.prototype.colorize=function(t){for(var e=this.getAttribute("color"),i=t.data,a=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if(s){var l=void 0;a[s]?l=a[s]:(l=$a(e.gradient(s/256)),a[s]=l),i[o-3]=l[0],i[o-2]=l[1],i[o-1]=l[2],i[o]=s}}},r.prototype.prepareGreyScaleBlurredCircle=function(t){var e=this.grayScaleCanvas;e||(e=document.createElement("canvas"),this.grayScaleCanvas=e);var i=this.intensity?this.intensity:2,a=Math.sqrt(-2*Math.log(UI/t/i/jI))/3*t,o=a-t,s=a+o,l=e.getContext("2d");e.width=e.height=s*2,l.clearRect(0,0,e.width,e.height),l.shadowOffsetX=l.shadowOffsetY=s*2,l.shadowBlur=o,l.shadowColor="black",l.beginPath(),l.arc(-s,-s,t,0,Math.PI*2,!0),l.closePath(),l.fill()},r.prototype.drawGrayScaleBlurredCircle=function(t,e,i,a,o){var s=this.grayScaleCanvas;o.globalAlpha=a,o.drawImage(s,t-i,e-i)},r.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight();var e=t.getContext("2d");return e.globalCompositeOperation="lighter",e},r.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},r.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;t=e.addShape({type:"image",attrs:{}}),this.imageShape=t},r.prototype.drawWithRange=function(t,e){var i=this.coordinate,a=i.start,o=i.end,s=this.coordinate.getWidth(),l=this.coordinate.getHeight(),u=this.getAttribute("color"),f=u.getFields()[0];this.clearShadowCanvasCtx();var c=this.getShadowCanvasCtx();e&&(t=t.filter(function($){return $[_s][f]<=e[1]&&$[_s][f]>=e[0]}));for(var v=this.scales[f],g=0;g<t.length;g++){var C=t[g],O=this.getDrawCfg(C),F=v.scale(C[_s][f]);this.drawGrayScaleBlurredCircle(O.x-a.x,O.y-o.y,this.radius+this.blur,F,c)}var G=c.getImageData(0,0,s,l);this.clearShadowCanvasCtx(),this.colorize(G),c.putImageData(G,0,0);var Y=new Image;Y.src=c.canvas.toDataURL("image/png"),this.getImageShape(),this.imageShape.attr("x",a.x),this.imageShape.attr("y",o.y),this.imageShape.attr("width",s),this.imageShape.attr("height",l),this.imageShape.attr("img",c.canvas),this.imageShape.set("origin",this.getShapeInfo(t))},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return(0,Rt.__assign)((0,Rt.__assign)({},e),{mappingData:t,data:this.getData(t)})},r.prototype.getData=function(t){return t.map(function(e){return e[_s]})},r}(Wa);ma("linearHeatmap",ZI);var KI=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this)||this;return e.options=t,e.view=e.options.view,e.init(),e}return r.prototype.init=function(){var t=this.getCoordinate();this.width=t.getWidth(),this.height=t.getHeight(),this.x=t.start.x,this.y=t.end.y,this.container=this.view.backgroundGroup.addGroup({})},r.prototype.render=function(){if(this.options.type==="color")this.renderColorBackground();else if(this.options.type==="image")this.renderImageBackground();else if(this.options.callback){var t={x:this.x,y:this.y,width:this.width,height:this.height,container:this.container};this.options.callback(t)}},r.prototype.renderColorBackground=function(){this.container.addShape("rect",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,fill:this.options.value},name:"heatmap-background"})},r.prototype.renderImageBackground=function(){this.container.addShape("image",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,img:this.options.src},name:"heatmap-background"})},r.prototype.clear=function(){this.container&&(this.container.clear(),this.emit("background:clear"))},r.prototype.destroy=function(){this.container&&(this.container.remove(),this.emit("background:destroy"))},r.prototype.getCoordinate=function(){var t;return(0,h.each)(this.view.geometries,function(e){e.type==="heatmap"&&(t=e.coordinate)}),t},r}(Ve.default),$I=KI,Vl=4,Zg=1,QI=.1,JI=function(){function n(r){this.destroyed=!1,this.dataSlides={};var t=this.getDefaultOptions();r.plot.options.theme&&r.plot.options.theme==="dark"&&(t=this.getDarkOptions()),this.options=(0,h.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return n.prototype.init=function(){this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var r=this.options.plot.container;this.container=r.addGroup()},n.prototype.render=function(){var r=this.getScales(),t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,i=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(i,a,o):this.renderVertical(i,a,o),this.legendLayout(),this.addInteraction(),this.options.plot.canvas.draw()},n.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getBBox=function(){var r=this.container.getBBox();return new si(this.x,this.y,r.width,r.height)},n.prototype.renderVertical=function(r,t,e){var i=this,a=this.width,o=this.height/e.length,s=this.container.addGroup(),l=(0,h.clone)(e).reverse(),u=(t-r)/e.length;(0,h.each)(l,function(f,c){var v=o*c,g={to:t-u*c,from:t-u*(c+1)},C=i.container.addShape("rect",{attrs:{x:0,y:v,width:a,height:o,fill:f,opacity:Zg,cursor:"pointer"},name:"legend"});C.set("info",g);var O=i.getDataSlide(g);i.dataSlides[g.from+"-"+g.to]={mode:"active",data:O},s.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",0,v+o],["L",a,v+o]]},i.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,Rt.__assign)({text:t,x:a/2,y:-Vl,textAlign:"center",textBaseline:"bottom"},this.options.text.style),name:"legend-label"}),this.container.addShape("text",{attrs:(0,Rt.__assign)((0,Rt.__assign)({text:r,x:a/2,y:this.height+Vl,textAlign:"center",textBaseline:"top"},this.options.text.style),{name:"legend-label"})}),s.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},n.prototype.renderHorizontal=function(r,t,e){var i=this,a=this.width/e.length,o=this.height,s=this.container.addGroup(),l=(t-r)/e.length;(0,h.each)(e,function(u,f){var c=a*f,v={from:l*f,to:l*(f+1)},g=i.container.addShape("rect",{attrs:{x:c,y:0,width:a,height:o,fill:u,opacity:.8,cursor:"pointer"},name:"legend"});g.set("info",v),s.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",c+a,0],["L",c+a,o]]},i.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,Rt.__assign)((0,Rt.__assign)({text:r,x:-Vl,y:o/2},this.options.text.style),{textAlign:"right",textBaseline:"middle"}),name:"legend-label"}),this.container.addShape("text",{attrs:(0,Rt.__assign)({text:t,x:this.width+Vl,y:o/2,textAlign:"left",textBaseline:"middle"},this.options.text.style),name:"legend-label"}),s.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},n.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},n.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.options.plot.options.width;return r*.5}return 10},n.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.options.plot.options.height;return r*.5}return 10},n.prototype.legendLayout=function(){var r=this,t=this.options.plot.getPlotTheme().bleeding;(0,h.isArray)(t)&&(0,h.each)(t,function(u,f){typeof t[f]=="function"&&(t[f]=t[f](r.options.plot.options))});var e=this.container.getBBox(),i=0,a=0,o=this.options.position.split("-"),s=this.options.plot.width,l=this.options.plot.height;o[0]==="left"?i=t[3]:o[0]==="right"?i=s-t[1]-e.width:o[1]==="center"?i=(s-e.width)/2:o[1]==="left"?i=t[3]:o[1]==="right"&&(i=this.options.plot.width-t[1]-e.width),o[0]==="bottom"?a=l-t[2]-e.height:o[0]==="top"?a=this.getTopPosition(t):o[1]==="center"?a=(l-e.height)/2:o[1]==="top"?a=t[0]:o[1]==="bottom"&&(a=l-t[2]-e.height),this.x=i,this.y=a,this.container.translate(i,a)},n.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}}},n.prototype.getDarkOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(255, 255, 255, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(255, 255, 255, 0.25)"}}},n.prototype.addInteraction=function(){var r=this,t=this.options.plot.options.colorField;this.container.on("click",function(e){var i=e.target;if(i.get("name")==="legend"){var a=i.get("info"),o=a.from+"-"+a.to,s=r.dataSlides[o];s.mode==="active"?(s.mode="deactive",i.stopAnimate(),i.animate({opacity:QI},200)):(s.mode="active",i.stopAnimate(),i.animate({opacity:Zg},200));var l=r.getFilteredData();l.length>0&&(r.view.changeData(l),r.view.scale(t,{min:r.colorScale.min,max:r.colorScale.max,nice:r.colorScale.nice}),r.view.render())}})},n.prototype.getFilteredData=function(){var r=[];return(0,h.each)(this.dataSlides,function(t){t.mode=="active"&&r.push.apply(r,t.data)}),r},n.prototype.getDataSlide=function(r){var t=[],e=this.options.plot.options,i=e.colorField,a=e.data;return(0,h.each)(a,function(o){var s=o[i];s>=r.from&&s<r.to&&t.push(o)}),t},n.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},n.prototype.getScales=function(){var r;return(0,h.each)(this.view.geometries,function(t){t.type==="heatmap"&&(r=t.scales)}),r},n}(),qI=JI,tk={background:{Ctr:$I},legend:{Ctr:qI,padding:"outer"}};function ek(n,r,t){if(n.options[r]&&n.options[r].visible){var e=tk[r],i=new e.Ctr(t);return e.padding&&n.paddingController.registerPadding(i,e.padding),i}}var rk={heatmap:"heatmap",legendLabel:"legend-label",heatmapBackground:"heatmap-background"},ik=An(rk);(0,h.assign)(Si,ik);var Kg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="densityHeatmap",t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}},tooltip:{visible:!0,showCrosshairs:!0,crosshairs:{type:"xy",line:{style:{stroke:"#000000",lineWidth:1,opacity:.5}}},showMarkers:!1},legend:{visible:!0,position:"bottom-center"},color:["rgba(33,102,172,0)","rgb(103,169,207)","rgb(209,229,240)","rgb(253,219,199)","rgb(239,138,98)","rgb(178,24,43)"],interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),n.prototype.afterRender.call(this)},r.prototype.destroy=function(){(0,h.each)(this.plotComponents,function(t){t.destroy()}),n.prototype.destroy.call(this)},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),e[t.yField]={},(0,h.has)(t,"yAxis")&&wn(e[t.yField],t.yAxis),this.setConfig("scales",e),n.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.geometryParser=function(){return"heatmap"},r.prototype.addGeometry=function(){if(this.options.data.length>1){var t={type:"linearheatmap",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},cfg:{intensity:this.options.intensity,radius:this.options.radius}};this.options.radius&&(t.radius=this.options.radius),this.options.intensity&&(t.intensity=this.options.intensity),this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t),this.addPoint()}},r.prototype.addPoint=function(){var t=this.options,e={visible:!1,size:0};t.point&&t.point.visible?t.point=(0,h.deepMix)(e,t.point):t.point=e;var i=ln("point","guide",{plot:this});i.active=!1,this.setConfig("geometry",i)},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var i=On("label",(0,Rt.__assign)({plot:this,labelType:"scatterLabel",fields:[t.xField,t.yField],position:"middle",offset:0},e));return i},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,b)},r.prototype.renderPlotComponents=function(){var t=this;(0,h.each)(this.plotComponents,function(i){i.destroy()});var e=["legend","background"];(0,h.each)(e,function(i){var a=(0,Rt.__assign)({view:t.view,plot:t},t.options[i]),o=ek(t,i,a);o&&(o.render(),t.plotComponents.push(o))})},r}(nn),nk=Kg;pi("densityHeatmap",Kg);var ak=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="densityHeatmap",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=nk.getDefaultOptions,r}(ni),$g=ak;function Hl(n,r,t,e,i){var a=t*i,o=e*i,s=[["M",n-a/2,r+o/2],["Q",n-a/2,r,n-a/2,r-o/2],["Q",n,r-o/2,n+a/2,r-o/2],["Q",n+a/2,r,n+a/2,r+o/2],["Q",n,r+o/2,n-a/2,r+o/2],["Z"]];return s}function Wl(n,r,t){var e=[["M",n,r],["l",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-(t*2),0],["Z"]];return e}function Qg(n,r,t){var e=[["M",n-t,r],["Q",n-t,r-t,n,r-t],["Q",n+t,r-t,n+t,r],["Q",n+t,r+t,n,r+t],["Q",n-t,r+t,n-t,r],["Z"]];return e}Ai("polygon","rect",{draw:function(n,r){var t=this.parsePoints(n.points),e=t[2].x-t[0].x,i=t[0].y-t[1].y,a=t[0].x+e/2,o=t[1].y+i/2,s=Hl(a,o,e,i,n.size);return r.addShape("path",{attrs:(0,h.deepMix)({},{path:s,fill:n.color,opacity:1},n.style)})}}),Ai("point","curvePoint",{draw:function(n,r){var t=Wl(n.x,n.y,n.size);return r.addShape("path",{attrs:(0,h.deepMix)({},{path:t,fill:n.color,opacity:1},n.style)})}});var ok=function(){function n(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,h.deepMix)(t,r,{}),this.init()}return n.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},n.prototype.render=function(){var r=this,t=this.view.geometries[0].elements;(0,h.each)(t,function(e){var i=e.shape,a=r.options,o=a.style,s=a.offsetX,l=a.offsetY,u=r.options.formatter,f=u?u(r.getContent(i)):r.getContent(i),c=r.getPosition(i),v=r.getTextColor(i),g=r.container.addShape("text",{attrs:(0,h.deepMix)({},o,{x:c.x+s,y:c.y+l,text:f,fill:v,textAlign:"center",textBaseline:"middle"}),name:"label"});r.options.adjustPosition&&r.adjustLabel(g,i)})},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},n.prototype.getBBox=function(){return this.container.getBBox()},n.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,h.clone)(t)}},n.prototype.getContent=function(r){var t=r.get("origin").data,e=this.plot.options.colorField;return t[e]},n.prototype.getPosition=function(r){var t=r.getBBox();return{x:t.minX+t.width/2,y:t.minY+t.height/2}},n.prototype.getTextColor=function(r){if(this.options.adjustColor){var t=r.attr("fill"),e=r.attr("opacity")?r.attr("opacity"):1,i=$a(t),a=Math.round(i[0]*.299+i[1]*.587+i[2]*.114)/e,o=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],s=Nl(o,a);return s}var l=this.options.style.fill;return l},n.prototype.adjustLabel=function(r,t){var e=r.getBBox(),i=t.getBBox();(e.width>i.width||e.height>i.height)&&r.attr("text","")},n}(),sk=ok,Jg=4,lk=function(){function n(r){this.destroyed=!1,this.dataSlides={},this.interactiveEvents={};var t=this.getDefaultOptions();this.options=(0,h.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return n.prototype.init=function(){var r=this;this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var t=this.options.plot.container;this.container&&this.container.remove(),this.container=t.addGroup(),this.view.on("beforerender",function(){r.clear(),r.options.plot.canvas.draw()})},n.prototype.render=function(){var r=this.view.geometries[0].scales,t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,i=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(i,a,o):this.renderVertical(i,a,o),this.legendLayout(),this.addInteraction()},n.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},n.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove(),this.offEvent(),this.destroyed=!0},n.prototype.getBBox=function(){var r=this.container.getBBox();return new si(this.x,this.y,r.width,r.height)},n.prototype.renderVertical=function(r,t,e){var i=this,a=(t-r)/(e.length-1),o=1/(e.length-1),s=this.height/(e.length-1),l="l(90)";(0,h.each)(e,function(v,g){var C=o*g;l+=C+":"+v+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:l},name:"legend"}),(0,h.each)(e,function(v,g){var C=s*g;i.container.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",0,C],["L",i.width,C]]},i.options.ticklineStyle)});var O=Math.round(a*g);i.container.addShape("text",{attrs:(0,Rt.__assign)({text:O,textAlign:"left",textBaseline:"middle",x:i.width+Jg,y:C},i.options.text.style),name:"legend-label"})});var u=10,f=14,c=[["M",-u,-f/2],["L",0,0],["L",-u,f/2],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,Rt.__assign)({path:c},this.options.anchorStyle)}),this.anchor.set("visible",!1)},n.prototype.renderHorizontal=function(r,t,e){var i=this,a=(t-r)/(e.length-1),o=1/(e.length-1),s=this.width/(e.length-1),l="l(0)";(0,h.each)(e,function(v,g){var C=o*g;l+=C+":"+v+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:l},name:"legend"}),(0,h.each)(e,function(v,g){var C=s*g;i.container.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",C,0],["L",C,i.height]]},i.options.ticklineStyle),name:"legend-label"});var O=Math.round(a*g);i.container.addShape("text",{attrs:(0,Rt.__assign)({text:O,textAlign:"center",textBaseline:"top",x:C,y:i.height+Jg},i.options.text.style)})});var u=14,f=10,c=[["M",0,0],["L",-u/2,-f],["L",u/2,-f],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,Rt.__assign)({path:c},this.options.anchorStyle)}),this.anchor.set("visible",!1)},n.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},n.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.view.coordinateBBox.width;return r}return 10},n.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.view.coordinateBBox.height;return r}return 10},n.prototype.legendLayout=function(){var r=this,t=this.view.coordinateBBox,e=this.options.plot.getPlotTheme().bleeding;(0,h.isArray)(e)&&(0,h.each)(e,function(f,c){typeof e[c]=="function"&&(e[c]=e[c](r.options.plot.options))});var i=this.container.getBBox(),a=0,o=0,s=this.options.position.split("-"),l=this.options.plot.width,u=this.options.plot.height;s[0]==="left"?a=e[3]:s[0]==="right"?a=l-e[1]-i.width:s[1]==="center"?this.width===t.width?a=t.x:a=(l-i.width)/2:s[1]==="left"?a=e[3]:s[1]==="right"&&(a=this.options.plot.width-e[1]-i.width),s[0]==="bottom"?o=u-e[2]-i.height:s[0]==="top"?o=this.getTopPosition(e):s[1]==="center"?this.height===t.height?o=t.y:o=(u-i.height)/2:s[1]==="top"?o=e[0]:s[1]==="bottom"&&(o=u-e[2]-i.height),this.x=a,this.y=o,this.container.translate(a,o)},n.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},ticklineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.8)"},anchorStyle:{fill:"rgba(0,0,0,0.5)"},triggerOn:"mousemove"}},n.prototype.addInteraction=function(){var r=this,t;this.options.plot.options.shapeType==="rect"?t="polygon":t="point";var e=t+":"+this.options.triggerOn,i=this.options.plot.options.colorField,a=this.colorScale,o=a.min,s=a.max,l=function(f){var c=f.data.data[i],v=(c-o)/(s-o);r.moveAnchor(v)};this.view.on(e,l),this.interactiveEvents[e]={target:this.view,handler:l};var u=function(){r.anchor.set("visible",!1)};this.options.plot.canvas.on("mouseleave",u),this.interactiveEvents.mouseleave={target:this.options.plot.canvas,handler:u}},n.prototype.moveAnchor=function(r){if(this.anchor.set("visible",!0),this.layout==="vertical"){var t=this.height*r,e=[1,0,0,0,1,0,0,0,1];e[7]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}else{var t=this.width*r,e=[1,0,0,0,1,0,0,0,1];e[6]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}},n.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},n.prototype.offEvent=function(){(0,h.each)(this.interactiveEvents,function(r,t){var e=r.target,i=r.handler;e.off(t,i)})},n}(),uk=lk,hk={label:{Ctr:sk},legend:{Ctr:uk,padding:"outer"}};function fk(n,r,t){if(n.options[r]&&n.options[r].visible){var e=hk[r],i=new e.Ctr(t);return e.padding&&n.paddingController.registerPadding(i,e.padding),i}}var qg=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="heatmap",t.gridSize=[],t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{shapeType:"rect",legend:{visible:!0,position:"right-center"},tooltip:{shared:!1,showCrosshairs:!1,showMarkers:!1},xAxis:{visible:!0,gridAlign:"center",grid:{visible:!0},tickLine:{visible:!0},line:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!0}},yAxis:{visible:!0,gridAlign:"center",grid:{visible:!0,align:"center"},tickLine:{visible:!0},label:{autoHide:!0,autoRotate:!1}},color:["#9ae3d5","#66cdbb","#e7a744","#f1e066","#f27664","#e7c1a2"],label:{visible:!0,adjustColor:!0,adjustPosition:!0,offset:0,style:{stroke:"rgba(255,255,255,0)",lineWidth:0}},interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),n.prototype.afterRender.call(this)},r.prototype.changeShape=function(t){if(this.options.shapeType!==t){if(this.options.shapeType=t,t==="rect"){var e=this.getShape();this.circleToRect(e)}else if(t==="circle"){var e=this.getShape();this.rectToCircle(e)}}},r.prototype.mappingSize=function(t){if(!(this.options.sizeField&&this.options.sizeField===t)){this.options.sizeField=t;var e=(0,h.valuesOfKey)(this.options.data,t),i=Math.min.apply(Math,e),a=Math.max.apply(Math,e),o=(0,Qr.getScale)("linear"),s=new o({min:i,max:a}),l=this.getShape();this.options.shapeType==="rect"?this.rectSizeMapping(l,s,t):this.options.shapeType==="circle"&&this.circleSizeMapping(l,s,t)}},r.prototype.disableMappingSize=function(){var t=this.getShape();this.options.shapeType==="rect"?this.rectDisableSizeMapping(t):this.options.shapeType==="circle"&&this.circleDisableSizeMapping(t)},r.prototype.destroy=function(){(0,h.each)(this.plotComponents,function(t){t.destroy()}),n.prototype.destroy.call(this)},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(){return""},r.prototype.coord=function(){},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.addGeometry=function(){this.gridSize=this.getGridSize();var t;if(this.options.shapeType==="rect")t=this.addRect();else{var e=this.addCircle();t=e}if(this.options.shapeStyle){var i={};(0,h.isFunction)(this.options.shapeStyle)?(i.fields=[this.options.colorField,this.options.xField,this.options.yField,this.options.sizeField],i.callback=this.options.shapeStyle):(0,h.isObject)(this.options.shapeStyle)&&(i.cfg=this.options.shapeStyle),t.style=i}this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t)},r.prototype.addRect=function(){var t=[.3,.9];this.options.shapeSize&&(t[0]=this.options.shapeSize[0]/this.gridSize[0],t[1]=this.options.shapeSize[1]/this.gridSize[1]);var e={type:"polygon",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["rect"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[1]},e},r.prototype.addCircle=function(){var t=[.3,.9];this.options.shapeSize?t=this.options.shapeSize:(t[0]=this.gridSize[0]*t[0]*.5,t[1]=this.gridSize[1]*t[1]*.5);var e={type:"point",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["curvePoint"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[Math.min(this.gridSize[0],this.gridSize[1])*.5*.9]},e},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.getGridSize=function(){if(this.options.padding==="auto")return[0,0];var t=this.getViewRange(),e=this.options,i=e.padding,a=e.xField,o=e.yField,s=e.data,l=t.width-i[1]-i[3],u=t.height-i[0]-i[2],f=(0,h.valuesOfKey)(s,a).length,c=(0,h.valuesOfKey)(s,o).length;return[l/f,u/c]},r.prototype.circleToRect=function(t){var e=this,i=this.gridSize;(0,h.each)(t,function(a){var o=a.get("origin"),s=o.x,l=o.y,u=o.size,f=u*2/Math.min(i[0],i[1]);e.options.sizeField||(f=1);var c=Qg(s,l,u),v=Hl(s,l,i[0],i[1],f);a.stopAnimate(),a.attr("path",c),a.animate({path:v},500,"easeLinear")})},r.prototype.rectToCircle=function(t){var e=this;(0,h.each)(t,function(i){var a=i.get("coord"),o=i.get("origin").points,s=[];(0,h.each)(o,function(F){s.push(a.convertPoint(F))});var l=i.getBBox(),u=l.width,f=l.height,c=l.minX+u/2,v=l.minY+f/2,g=e.options.sizeField?1:.9,C=Qg(c,v,Math.min(u,f)/2*g),O=Wl(c,v,Math.min(u,f)/2*g);i.stopAnimate(),i.animate({path:C},500,"easeLinear",function(){i.attr("path",O)})})},r.prototype.rectSizeMapping=function(t,e,i){(0,h.each)(t,function(a){var o=a.get("origin").data,s=.3+e.scale(o[i])*.6;a.get("origin").size=s;var l=a.getBBox(),u=l.width,f=l.height,c=l.minX+u/2,v=l.minY+f/2,g=Hl(c,v,u,f,s);a.stopAnimate(),a.animate({path:g},500,"easeLinear")})},r.prototype.circleSizeMapping=function(t,e,i){(0,h.each)(t,function(a){var o=a.get("origin").data,s=.3+e.scale(o[i])*.6,l=a.get("origin"),u=l.x,f=l.y,c=l.size,v=Wl(u,f,c*s);a.get("origin").size=c*s,a.stopAnimate(),a.animate({path:v},500,"easeLinear")})},r.prototype.circleDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,h.each)(t,function(i){var a=i.get("origin"),o=a.x,s=a.y,l=Math.min(e.gridSize[0],e.gridSize[1])*.9;i.get("origin").size=l/2;var u=Wl(o,s,l/2);i.stopAnimate(),i.animate({path:u},500,"easeLinear")})},r.prototype.rectDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,h.each)(t,function(i){var a=i.getBBox(),o=a.width,s=a.height,l=a.minX+o/2,u=a.minY+s/2,f=Hl(l,u,e.gridSize[0],e.gridSize[1],1);i.get("origin").size=1,i.stopAnimate(),i.animate({path:f},500,"easeLinear")})},r.prototype.getShape=function(){var t=this.view.geometries[0].elements,e=[];return(0,h.each)(t,function(i){e.push(i.shape)}),e},r.prototype.renderPlotComponents=function(){var t=this;(0,h.each)(this.plotComponents,function(i){i.destroy()}),this.plotComponents=[];var e=["label","legend"];(0,h.each)(e,function(i){var a=(0,Rt.__assign)({view:t.view,plot:t},t.options[i]),o=fk(t,i,a);o&&(o.render(),t.plotComponents.push(o))})},r}(nn),ck=qg;pi("heatmap",qg);var vk=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="heatmap",n.prototype.createLayers.call(this,e)},r.prototype.changeShape=function(t){var e=this.layers[0];e.changeShape(t)},r.prototype.mappingSize=function(t){var e=this.layers[0];e.mappingSize(t)},r.prototype.disableMappingSize=function(){var t=this.layers[0];t.disableMappingSize()},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=ck.getDefaultOptions,r}(ni),ty=vk,dk=function(n){(0,Rt.__extends)(r,n);function r(t){var e=this,i=(0,h.deepMix)({},t,{itemTpl:`<div data-index={index}>
        <span style="background-color:{color};" class="g2-tooltip-marker"></span>
        {name}<span class="g2-tooltip-value">{value}</span></div>`},t);return e=n.call(this,i)||this,e}return r}(vE.Z),pk=dk;/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message",i=function(o){var s=t.length;return t.push(o),window.postMessage(e+s.toString(36),"*"),s};return window.addEventListener("message",function(o){if(!(typeof o.data!="string"||o.data.substr(0,e.length)!==e)){o.stopImmediatePropagation();var s=parseInt(o.data.substr(e.length),36);!t[s]||(t[s](),t[s]=void 0)}},!0),window.clearImmediate=function(o){!t[o]||(t[o]=void 0)},i}()||function(t){window.setTimeout(t,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}}());var yf=function(){var r=document.createElement("canvas");if(!r||!r.getContext)return!1;var t=r.getContext("2d");return!(!t.getImageData||!t.fillText||!Array.prototype.some||!Array.prototype.push)}(),Jo=function(){if(!!yf){for(var r=document.createElement("canvas").getContext("2d"),t=20,e,i;t;){if(r.font=t.toString(10)+"px sans-serif",r.measureText("\uFF37").width===e&&r.measureText("m").width===i)return t+1;e=r.measureText("\uFF37").width,i=r.measureText("m").width,t--}return 0}}(),gk=function(r){for(var t,e,i=r.length;i;t=Math.floor(Math.random()*i),e=r[--i],r[i]=r[t],r[t]=e);return r},mf=function(r,t){if(!yf)return;Array.isArray(r)||(r=[r]),r.forEach(function(Br,Ne){if(typeof Br=="string"){if(r[Ne]=document.getElementById(Br),!r[Ne])throw"The element id specified is not found."}else if(!Br.tagName&&!Br.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var e={data:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minFontSize:Jo,maxFontSize:60,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotateRatio:.5,rotationSteps:1,shuffle:!0,shape:"circle",ellipticity:1,active:!0,animatable:!0,selected:-1,shadowColor:"#333",shadowBlur:10,fontScale:1.2,classes:null,onWordCloudHover:null,onWordCloudClick:null},i=[];if(t)for(var a in t)if(a==="wordStyle")for(var o in t[a])o in e&&(e[o]=t[a][o]);else a in e&&(e[a]=t[a]);if(e.minFontSize<Jo&&(e.minFontSize=Jo),e.minFontSize>e.maxFontSize){console.error("minSize cant bigger than maxSize");return}for(var s=0,l=0;l<e.data.length;l++)s<e.data[l].weight&&(s=e.data[l].weight);var u=function(Ne){var ar=Math.min(Math.max(e.minFontSize,e.maxFontSize*Ne/s),e.maxFontSize);return Hr?ar*e.fontScale:ar},f=!1;if(typeof e.shape!="function")switch(e.shape){case"circle":default:e.shape="circle";break;case"cardioid":e.shape=function(Ne){return 1-Math.sin(Ne)},f=!0;break;case"diamond":e.shape=function(Ne){var ar=Ne%(2*Math.PI/4);return 1/(Math.cos(ar)+Math.sin(ar))};break;case"square":e.shape=function(Ne){var ar=(Ne+Math.PI/4)%(2*Math.PI/4);return 1/(Math.cos(ar)+Math.sin(ar))};break;case"triangle-forward":e.shape=function(Ne){var ar=Ne%(2*Math.PI/3);return 1/(Math.cos(ar)+Math.sqrt(3)*Math.sin(ar))};break;case"triangle-backward":e.shape=function(Ne){var ar=(Ne+Math.PI)%(2*Math.PI/3);return 1/(Math.cos(ar)+Math.sqrt(3)*Math.sin(ar))};break;case"triangle":case"triangle-up":e.shape=function(Ne){var ar=(Ne+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(ar)+Math.sqrt(3)*Math.sin(ar))};break;case"triangle-down":e.shape=function(Ne){var ar=(Ne+Math.PI*5/2)%(2*Math.PI/3);return 1/(Math.cos(ar)+Math.sqrt(3)*Math.sin(ar))};break;case"pentagon":e.shape=function(Ne){var ar=(Ne+.955)%(2*Math.PI/5);return 1/(Math.cos(ar)+.726543*Math.sin(ar))};break;case"star":e.shape=function(Ne){var ar=(Ne+.955)%(2*Math.PI/10);return(Ne+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-ar)+3.07768*Math.sin(2*Math.PI/10-ar)):1/(Math.cos(ar)+3.07768*Math.sin(ar))};break}e.gridSize=Math.max(Math.floor(e.gridSize),4);var c=e.gridSize,v=c-e.maskGapWidth,g=Math.abs(e.maxRotation-e.minRotation),C=Math.min(e.maxRotation,e.minRotation),O=e.rotationSteps,F,G,Y,$,q,ut,kt;function Nt(Br,Ne){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(Ne-Br)+Br).toFixed()+"%)"}switch(e.color){case"random-dark":kt=function(){return Nt(10,50)};break;case"random-light":kt=function(){return Nt(50,90)};break;default:typeof e.color=="function"&&(kt=e.color);break}var Wt=null;typeof e.classes=="function"&&(Wt=e.classes);var Ft=!1,ee=[],ve,fe=function(Ne){var ar=Ne.currentTarget,Wr=ar.getBoundingClientRect(),ei,Nr;Ne.touches?(ei=Ne.touches[0].clientX,Nr=Ne.touches[0].clientY):(ei=Ne.clientX,Nr=Ne.clientY);var hi=ei-Wr.left,ai=Nr-Wr.top,Ur=Math.floor(hi*(ar.width/Wr.width||1)/c),fi=Math.floor(ai*(ar.height/Wr.height||1)/c);return ee&&ee[Ur]&&ee[Ur][fi]},Te=function(Ne,ar,Wr,ei){ei(Ne?Ne.id:-1)},Be=function(Ne){var ar=fe(Ne);if(ve!==ar&&!(Hr&&ar&&ar.item&&!(0,h.get)(ar,["item","twiceRender"]))){if(!ar){e.onWordCloudHover(void 0,void 0,Ne,li),e.active&&Te(void 0,void 0,Ne,li);return}e.onWordCloudHover(ar.item,ar.dimension,Ne,li),e.active&&Te(ar.item,ar.dimension,Ne,li),ve=ar}},ke=function(Ne){var ar=fe(Ne);!ar||(e.onWordCloudClick(ar.item,ar.dimension,Ne),Ne.preventDefault())},Qe=[],tr=function(Ne){if(Qe[Ne])return Qe[Ne];var ar=Ne*8,Wr=ar,ei=[];for(Ne===0&&ei.push([$[0],$[1],0]);Wr--;){var Nr=1;e.shape!=="circle"&&(Nr=e.shape(Wr/ar*2*Math.PI)),ei.push([$[0]+Ne*Nr*Math.cos(-Wr/ar*2*Math.PI),$[1]+Ne*Nr*Math.sin(-Wr/ar*2*Math.PI)*e.ellipticity,Wr/ar*2*Math.PI])}return Qe[Ne]=ei,ei},rr=function(){return e.abortThreshold>0&&new Date().getTime()-ut>e.abortThreshold},Ze=function(){return e.rotateRatio===0||Math.random()>e.rotateRatio?0:g===0?C:O>0?C+Math.floor(Math.random()*O)*g/O:C+Math.random()*g},Ke=function(Ne,ar,Wr){var ei=!1,Nr=u(ar);if(Nr<=0)return!1;var hi=1;Nr<Jo&&(hi=function(){for(var No=2;No*Nr<Jo;)No+=2;return No}());var ai=document.createElement("canvas"),Ur=ai.getContext("2d",{willReadFrequently:!0});Ur.font=e.fontWeight+" "+(Nr*hi).toString(10)+"px "+e.fontFamily;var fi=Ur.measureText(Ne).width/hi,Ci=Math.max(Nr*hi,Ur.measureText("m").width,Ur.measureText("\uFF37").width)/hi,Ui=fi+Ci*2,Di=Ci*3,tn=Math.ceil(Ui/c),sn=Math.ceil(Di/c);Ui=tn*c,Di=sn*c;var Fn=-fi/2,Gn=-Ci*.4,yn=Math.ceil((Ui*Math.abs(Math.sin(Wr))+Di*Math.abs(Math.cos(Wr)))/c),Xr=Math.ceil((Ui*Math.abs(Math.cos(Wr))+Di*Math.abs(Math.sin(Wr)))/c),en=Xr*c,_n=yn*c;ai.setAttribute("width",en),ai.setAttribute("height",_n),ei&&(document.body.appendChild(ai),Ur.save()),Ur.scale(1/hi,1/hi),Ur.translate(en*hi/2,_n*hi/2),Ur.rotate(-Wr),Ur.font=e.fontWeight+" "+(Nr*hi).toString(10)+"px "+e.fontFamily,Ur.fillStyle="#000",Ur.textBaseline="middle",Ur.fillText(Ne,Fn*hi,(Gn+Nr*.5)*hi);var Sn;try{Sn=Ur.getImageData(0,0,en,_n).data}catch(zn){return!1}if(rr())return!1;ei&&(Ur.strokeRect(Fn*hi,Gn,fi*hi,Ci*hi),Ur.restore());for(var Ga=[],Pn=Xr,Yi,Pi,Zi,Ji=[yn/2,Xr/2,yn/2,Xr/2];Pn--;)for(Yi=yn;Yi--;){Zi=c;t:{for(;Zi--;)for(Pi=c;Pi--;)if(Sn[((Yi*c+Zi)*en+(Pn*c+Pi))*4+3]){Ga.push([Pn,Yi]),Pn<Ji[3]&&(Ji[3]=Pn),Pn>Ji[1]&&(Ji[1]=Pn),Yi<Ji[0]&&(Ji[0]=Yi),Yi>Ji[2]&&(Ji[2]=Yi),ei&&(Ur.fillStyle="rgba(255, 0, 0, 0.5)",Ur.fillRect(Pn*c,Yi*c,c-.5,c-.5));break t}ei&&(Ur.fillStyle="rgba(0, 0, 255, 0.5)",Ur.fillRect(Pn*c,Yi*c,c-.5,c-.5))}}return ei&&(Ur.fillStyle="rgba(0, 255, 0, 0.5)",Ur.fillRect(Ji[3]*c,Ji[0]*c,(Ji[1]-Ji[3]+1)*c,(Ji[2]-Ji[0]+1)*c)),{mu:hi,occupied:Ga,bounds:Ji,gw:Xr,gh:yn,fillTextOffsetX:Fn,fillTextOffsetY:Gn,fillTextWidth:fi,fillTextHeight:Ci,fontSize:Nr}},wr=function(Ne,ar,Wr,ei,Nr){for(var hi=Nr.length;hi--;){var ai=Ne+Nr[hi][0],Ur=ar+Nr[hi][1];if(ai>=G||Ur>=Y||ai<0||Ur<0){if(!e.drawOutOfBound)return!1;continue}if(!F[ai][Ur])return!1}return!0},br=function(Ne,ar,Wr,ei,Nr,hi,ai,Ur,fi,Ci,Ui){var Di=Wr.fontSize,tn=e.color,sn=e.classes;if(!Ui)kt?tn=kt(ei,Nr,Di,hi,ai):tn=e.color,Wt?sn=Wt(ei,Nr,Di,hi,ai):sn=e.classes;else{var Fn=_r(Ci);tn=Fn?Fn.color:e.color}var Gn,yn=Wr.bounds;Gn={x:(Ne+yn[3])*c,y:(ar+yn[0])*c,w:(yn[1]-yn[3]+1)*c,h:(yn[2]-yn[0]+1)*c},r.forEach(function(Xr){if(Xr.getContext){var en=Xr.getContext("2d"),_n=Wr.mu;en.save();var Sn=e.fontWeight+" "+(Di*_n).toString(10)+"px "+e.fontFamily;en.scale(1/_n,1/_n),en.font=Sn,en.fillStyle=tn;var Ga=(Ne+Wr.gw/2)*c*_n,Pn=(ar+Wr.gh/2)*c*_n;en.translate(Ga,Pn),Ur!==0&&en.rotate(-Ur),en.textBaseline="middle",e.selected===Ci&&(en.shadowColor=e.shadowColor,en.shadowBlur=e.shadowBlur),en.fillText(ei,Wr.fillTextOffsetX*_n,(Wr.fillTextOffsetY+Di*.5)*_n),Ui||i.push({gx:Ne,gy:ar,info:Wr,word:ei,weight:Nr,distance:hi,theta:ai,rotateDeg:Ur,attributes:fi,id:Ci,color:tn}),en.restore()}else{var Yi=document.createElement("span"),Pi="";Pi="rotate("+-Ur/Math.PI*180+"deg) ",Wr.mu!==1&&(Pi+="translateX(-"+Wr.fillTextWidth/4+"px) scale("+1/Wr.mu+")");var Zi={position:"absolute",display:"block",font:e.fontWeight+" "+Di*Wr.mu+"px "+e.fontFamily,left:(Ne+Wr.gw/2)*c+Wr.fillTextOffsetX+"px",top:(ar+Wr.gh/2)*c+Wr.fillTextOffsetY+"px",width:Wr.fillTextWidth+"px",height:Wr.fillTextHeight+"px",lineHeight:Di+"px",whiteSpace:"nowrap",transform:Pi,webkitTransform:Pi,msTransform:Pi,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};tn&&(Zi.color=tn),Yi.textContent=ei;for(var Ji in Zi)Yi.style[Ji]=Zi[Ji];if(fi)for(var zn in fi)Yi.setAttribute(zn,fi[zn]);sn&&(Yi.className+=sn),Xr.appendChild(Yi)}})},Ir=function(Ne,ar,Wr,ei,Nr){if(!(Ne>=G||ar>=Y||Ne<0||ar<0)){if(F[Ne][ar]=!1,Wr){var hi=r[0].getContext("2d");hi.fillRect(Ne*c,ar*c,v,v)}Ft&&(ee[Ne][ar]={item:Nr,dimension:ei})}},ir=function(Ne,ar,Wr,ei,Nr){var hi=Nr.occupied,ai=e.drawMask,Ur;ai&&(Ur=r[0].getContext("2d"),Ur.save(),Ur.fillStyle=e.maskColor);var fi;if(Ft){var Ci=Nr.bounds;fi={x:(Ne+Ci[3])*c,y:(ar+Ci[0])*c,w:(Ci[1]-Ci[3]+1)*c,h:(Ci[2]-Ci[0]+1)*c}}for(var Ui=hi.length;Ui--;){var Di=Ne+hi[Ui][0],tn=ar+hi[Ui][1];if(!(Di>=G||tn>=Y||Di<0||tn<0)){var sn=_r(Nr.item.id);sn&&(Nr.item.color=sn.color),Ir(Di,tn,ai,fi,Nr.item)}}ai&&Ur.restore()},Mr=function(Ne,ar,Wr,ei,Nr,hi,ai,Ur){var fi=Math.floor(Ne[0]-ar.gw/2),Ci=Math.floor(Ne[1]-ar.gh/2),Ui=ar.gw,Di=ar.gh;return wr(fi,Ci,Ui,Di,ar.occupied)?(br(fi,Ci,ar,Wr,ei,Nr,Ne[2],hi,ai,Ur,!1),ir(fi,Ci,Ui,Di,ar),{gx:fi,gy:Ci,rot:hi,info:ar}):!1},zr=function(Ne){var ar,Wr,ei,Nr;Array.isArray(Ne)?(ar=Ne[0],Wr=Ne[1]):(ar=Ne.word,Wr=Ne.weight,ei=Ne.attributes,Nr=Ne.id);var hi=(0,h.isNil)(Ne.rotateDeg)?Ze():Ne.rotateDeg,ai=Ke(ar,Wr,hi);if(ai&&(ai.item=Ne),!ai||rr())return!1;if(!e.drawOutOfBound){var Ur=ai.bounds;if(Ur[1]-Ur[3]+1>G||Ur[2]-Ur[0]+1>Y)return!1}for(var fi=q+1;fi--;){var Ci=tr(q-fi);e.shuffle&&(Ci=[].concat(Ci),gk(Ci));for(var Ui=0;Ui<Ci.length;Ui++){var Di=Mr(Ci[Ui],ai,ar,Wr,q-fi,hi,ei,Nr);if(Di)return Di}}return null},Lr=function(Ne,ar,Wr){if(ar)return!r.some(function(ei){var Nr=document.createEvent("CustomEvent");return Nr.initCustomEvent(Ne,!0,ar,Wr||{}),!ei.dispatchEvent(Nr)},this);r.forEach(function(ei){var Nr=document.createEvent("CustomEvent");Nr.initCustomEvent(Ne,!0,ar,Wr||{}),ei.dispatchEvent(Nr)},this)},_r=function(Ne){for(var ar=0;ar<i.length;ar++){var Wr=i[ar];if(i[ar].id===Ne)return Wr}},Hr,li=function(Ne){if(Ne!==void 0){if(e.selected!==Ne&&r[0].getContext){e.selected=Ne;var ar=r[0].getContext("2d");ar.fillStyle=e.backgroundColor,ar.clearRect(0,0,r[0].width,r[0].height),ar.fillRect(0,0,r[0].width,r[0].height);for(var Wr=0;Wr<i.length;Wr++){var ei=i[Wr];(!Hr||Hr&&(0,h.get)(ei,["info","item","twiceRender"]))&&br(ei.gx,ei.gy,ei.info,ei.word,ei.weight,ei.distance,ei.theta,ei.rotateDeg,ei.attributes,ei.id,!0)}}return}var Nr=r[0];if(Nr.getContext)G=Math.ceil(Nr.width/c),Y=Math.ceil(Nr.height/c);else{var hi=Nr.getBoundingClientRect();G=Math.ceil(hi.width/c),Y=Math.ceil(hi.height/c)}if(!!Lr("wordcloudstart",!0)){$=e.origin?[e.origin[0]/c,e.origin[1]/c]:[G/2,Y/(f?4:2)],q=Math.floor(Math.sqrt(G*G+Y*Y)),F=[];var ai,Ur,fi;if(!Nr.getContext||e.clearCanvas)for(r.forEach(function(Pi){if(Pi.getContext){var Zi=Pi.getContext("2d");Zi.fillStyle=e.backgroundColor,Zi.clearRect(0,0,G*(c+1),Y*(c+1)),Zi.fillRect(0,0,G*(c+1),Y*(c+1))}else Pi.textContent="",Pi.style.backgroundColor=e.backgroundColor,Pi.style.position="relative"}),ai=G;ai--;)for(F[ai]=[],Ur=Y;Ur--;)F[ai][Ur]=!0;else{var Ci=document.createElement("canvas").getContext("2d");Ci.fillStyle=e.backgroundColor,Ci.fillRect(0,0,1,1);var Ui=Ci.getImageData(0,0,1,1).data,Di=Nr.getContext("2d").getImageData(0,0,G*c,Y*c).data;ai=G;for(var tn,sn;ai--;)for(F[ai]=[],Ur=Y;Ur--;){sn=c;t:for(;sn--;)for(tn=c;tn--;)for(fi=4;fi--;)if(Di[((Ur*c+sn)*G*c+(ai*c+tn))*4+fi]!==Ui[fi]){F[ai][Ur]=!1;break t}F[ai][Ur]!==!1&&(F[ai][Ur]=!0)}Di=Ci=Ui=void 0}if(e.onWordCloudHover||e.onWordCloudClick){for(Ft=!0,ai=G+1;ai--;)ee[ai]=[];e.onWordCloudHover&&Nr.addEventListener("mousemove",Be),e.onWordCloudClick&&(Nr.addEventListener("click",ke),Nr.addEventListener("touchstart",ke),Nr.addEventListener("touchend",function(Pi){Pi.preventDefault()}),Nr.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),Nr.addEventListener("wordcloudstart",function Pi(){Nr.removeEventListener("wordcloudstart",Pi),Nr.removeEventListener("mousemove",Be),Nr.removeEventListener("click",ke),ve=void 0})}if(e.animatable){fi=0;var en,_n;e.wait!==0?(en=window.setTimeout,_n=window.clearTimeout):(en=window.setImmediate,_n=window.clearImmediate);var Sn=function(Zi,Ji){r.forEach(function(zn){zn.addEventListener(Zi,Ji)},this)},Ga=function(Zi,Ji){r.forEach(function(zn){zn.removeEventListener(Zi,Ji)},this)},Pn=function Pi(){Ga("wordcloudstart",Pi),_n(Yi)};Sn("wordcloudstart",Pn);var Yi=en(function Pi(){if(fi>=e.data.length){_n(Yi),Lr("wordcloudstop",!1),Ga("wordcloudstart",Pn);return}ut=new Date().getTime();var Zi=zr(e.data[fi]),Ji=!Lr("wordclouddrawn",!0,{item:e.data[fi],drawn:Zi});if(rr()||Ji){_n(Yi),e.abort(),Lr("wordcloudabort",!1),Lr("wordcloudstop",!1),Ga("wordcloudstart",Pn);return}fi++,Yi=en(Pi,e.wait)},e.wait)}else{t.maskImage&&r.forEach(function(Pi){if(Pi.getContext){var Zi=Pi.getContext("2d");Zi.fillStyle=e.backgroundColor,Zi.clearRect(0,0,G*(c+1),Y*(c+1)),Zi.fillRect(0,0,G*(c+1),Y*(c+1))}});for(var Fn=[],Gn=0;Gn<e.data.length;Gn++){var yn=zr(e.data[Gn]);yn&&Fn.push(yn)}if(Fn.length===e.data.length&&!Hr){for(r.forEach(function(Pi){if(Pi.getContext){var Zi=Pi.getContext("2d");Zi.fillStyle=e.backgroundColor,Zi.clearRect(0,0,G*(c+1),Y*(c+1)),Zi.fillRect(0,0,G*(c+1),Y*(c+1))}}),ai=G;ai--;)for(F[ai]=[],Ur=Y;Ur--;)F[ai][Ur]=!0;Hr=!0;for(var Xr=0;Xr<e.data.length;Xr++)zr((0,Rt.__assign)((0,Rt.__assign)({},e.data[Xr]),{twiceRender:Hr}))}}}};li()};mf.isSupported=yf,mf.minFontSize=Jo;var yk=mf,mk=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e._toolTipsAction=function(i,a,o,s){a?(e._toolTips.update({items:[{color:i.color||"red",name:i.word,value:i.weight}],x:o.offsetX,y:o.offsetY}),e._toolTips.show()):e._toolTips.hide(),e._toolTips.render(),e._configHoverAction&&e._configHoverAction(i,a,o,s)},e._configHoverAction=t.onWordCloudHover,e._enableToolTips=(0,h.get)(t,"tooltip.visible",!0),e.options=(0,h.deepMix)({},{width:400,height:400,enableToolTips:!0},t,{onWordCloudHover:e._enableToolTips?e._toolTipsAction:e._configHoverAction}),e}return r.prototype.init=function(){n.prototype.init.call(this),this._initToolTips()},r.prototype.render=function(){n.prototype.render.call(this),this._render()},r.prototype._initToolTips=function(){this._toolTips=new pk({showTitle:!1,visible:!1,parent:this.options.container,follow:!0,inPanel:!1,items:[]}),this._toolTips.init()},r.prototype._render=function(){this._targetCanvas=this.canvas.get("el"),this.options.maskImage?this._handleMaskImage():this._start()},r.prototype._handleMaskImage=function(){var t=this,e=new Image;e.src=this.options.maskImage+"?"+new Date().getTime(),e.crossOrigin="Anonymous",e.onload=function(){e.naturalHeight+e.naturalWidth===0||e.width+e.height===0?t._start():t._startWithMaskImage(e)},e.onerror=function(){console.error("image %s load failed !!!",t.options.maskImage),t._start()}},r.prototype._start=function(){this._handleG2PlotConfig();var t=this._targetCanvas.getContext("2d"),e=this.canvas.get("width")/this.canvas.get("el").width;t.scale(e,e),yk(this._targetCanvas,this.options)},r.prototype._handleG2PlotConfig=function(){var t=this.options.wordStyle.fontSize||[10,60],e=this.options.wordStyle.rotation||[-Math.PI/2,Math.PI/2],i,a,o;this.options.wordStyle.active?(i=!0,a=this.options.wordStyle.active.shadowColor||"#333",o=this.options.wordStyle.active.shadowBlur||10):i=!1,this.options=(0,h.deepMix)({},this.options,{minFontSize:t[0],maxFontSize:t[1],minRotation:e[0],maxRotation:e[1],active:i,shadowColor:a,shadowBlur:o})},r.prototype._startWithMaskImage=function(t){var e=this._scaleMaskImageCanvas(this._transformWhite2BlackPixels(t)),i=e.maskImageCanvas,a=e.maskImageContext,o=document.createElement("canvas").getContext("2d");o.fillStyle=this.options.backgroundColor||"#fff",o.fillRect(0,0,1,1);for(var s=o.getImageData(0,0,1,1).data,l=a.getImageData(0,0,i.width,i.height),u=a.createImageData(l),f=0;f<l.data.length;f+=4)l.data[f+3]>128?(u.data[f]=s[0],u.data[f+1]=s[1],u.data[f+2]=s[2],u.data[f+3]=s[3]):(u.data[f]=s[0],u.data[f+1]=s[1],u.data[f+2]=s[2],u.data[f+3]=254);a.putImageData(u,0,0);var c=this._targetCanvas.getContext("2d");c.drawImage(i,0,0),this.options=(0,h.deepMix)({},this.options,{clearCanvas:!1}),this._start()},r.prototype._scaleMaskImageCanvas=function(t){var e=document.createElement("canvas");e.width=this.canvas.get("width"),e.height=this.canvas.get("height");var i=e.getContext("2d");return i.imageSmoothingEnabled=!0,i.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),{maskImageCanvas:e,maskImageContext:i}},r.prototype._transformWhite2BlackPixels=function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);for(var a=i.getImageData(0,0,e.width,e.height),o=4,s=0,l=255,u=0;u<a.data.length;u+=o){var f=a.data[u]+a.data[u+1]+a.data[u+2],c=a.data[u+3];c<128||f>250*3?(a.data[u]=l,a.data[u+1]=l,a.data[u+2]=l,a.data[u+3]=s):(a.data[u]=s,a.data[u+1]=s,a.data[u+2]=s,a.data[u+3]=l)}return i.putImageData(a,0,0),e},r}(wl),xk=mk,bk=function(n){(0,Rt.__extends)(r,n);function r(t,e){var i=this;return e.renderer="canvas",i=n.call(this,t,e)||this,i}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="wordCloud",e.container=this.containerDOM,n.prototype.createLayers.call(this,e)},r}(ni),wk=bk;pi("wordCloud",xk);var Sk={rose:"interval"},Ck=An(Sk);(0,h.assign)(Si,Ck);var Mk={rose:"interval"},Ek={rose:"column"},ey=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="rose",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,innerRadius:0,label:{visible:!0,type:"inner",autoRotate:!0,adjustColor:!1},legend:{visible:!0,position:"right"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},columnStyle:{stroke:"white",lineWidth:1},xAxis:{visible:!1,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getOptions=function(t){var e=n.prototype.getOptions.call(this,t),i=t.sectorStyle,a=t.categoryField,o=t.radiusField;return(0,h.deepMix)({},e,{columnStyle:i,xField:a,yField:o})},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;t&&this.view.getScaleByField(t)},r.prototype.getAngleScale=function(){var t=this.options.categoryField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?Mk[e]:Ek[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.radiusField]={},e[t.categoryField]={type:"cat"},this.setConfig("scales",e)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=ln("interval","main",{plot:this,positionFields:[t.categoryField,t.radiusField],widthRatio:{rose:1}});e.label=this.extractLabel(),e.adjust=this.adjustRoseAdjust(),this.rose=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.adjustRoseAdjust=function(){},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.colorField]))},r.prototype.animation=function(){n.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.rose.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,x)},r.prototype.extractLabel=function(){var t=this.options;if(!t.label||!t.label.visible)return!1;var e=(0,h.deepMix)({},t.label);this.adjustLabelOptions(e);var i=[t.categoryField,t.radiusField],a=On("label",(0,Rt.__assign)({plot:this,labelType:"polar",fields:i},e));return a},r.prototype.adjustLabelOptions=function(t){var e=this.options.radiusField;if(t){var i=t.offset,a=t.type,o=t.content;a==="inner"?t.offset=i<0?i:-10:a==="outer"&&(t.offset=i>=0?i:10),o||(t.content=function(s,l){return""+l._origin[e]})}},r}(nn),xf=ey;pi("rose",ey);var Ak=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="rose",n.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=xf.getDefaultOptions,r}(ni),ry=Ak,Tk=function(n){var r=n.opacity||1;return{opacity:r*.5}},_k=function(n){var r=n.opacity||1;return{opacity:r*.5}};$n("funnel",{columnStyle:{normal:{},active:Tk,disable:_k,selected:{lineWidth:1,stroke:"black"}}});var iy=d(26877);function Pk(n,r){r===void 0&&(r=!1);var t=n.x,e=n.y,i=n.y0,a=n.size,o,s;(0,h.isArray)(e)?(o=e[0],s=e[1]):(o=i,s=e);var l,u;(0,h.isArray)(t)?(l=t[0],u=t[1]):(l=t-a/2,u=t+a/2);var f=[{x:l,y:o},{x:l,y:s}];return r?f.push({x:u,y:(s+o)/2}):f.push({x:u,y:s},{x:u,y:o}),f}function Lk(n,r){var t=[],e=n.points,i=n.nextPoints;if(r){var a=r.yValues,o=r.yValuesMax,s=r.yValuesNext,l=(e[0].y+e[1].y)/2,u=a[0]+a[1],f=a.map(function(O){return O/u/.5}),c=(o[0]/(o[0]+o[1])-.5)*.9,v=.001;if((0,h.isNil)(i))t.push(["M",e[0].x,c+(e[0].y-l)*f[0]+l],["L",e[1].x,c+l],["L",e[2].x,c+l],["L",e[3].x,c+(e[3].y-l)*f[0]+l],["Z"]),t.push(["M",e[0].x,c+.002+l],["L",e[1].x,c+.002+(e[1].y-l)*f[1]+l],["L",e[2].x,c+.002+(e[2].y-l)*f[1]+l],["L",e[3].x,c+.002+l],["Z"]);else{var g=s[0]+s[1],C=s.map(function(O){return O/g/.5});t.push(["M",e[0].x,c+(e[0].y-l)*f[0]+l-v],["L",e[1].x,c+l-v],["L",i[1].x,c+l-v],["L",i[0].x,c+(i[3].y-l)*C[0]+l-v],["Z"]),t.push(["M",e[0].x,c+l+v],["L",e[1].x,c+(e[1].y-l)*f[1]+l+v],["L",i[1].x,c+(i[2].y-l)*C[1]+l+v],["L",i[0].x,c+l+v],["Z"])}}else(0,h.isNil)(i)?t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",i[1].x,i[1].y],["L",i[0].x,i[0].y],["Z"]);return t}Ai("interval","funnel-basic-rect",{getPoints:function(n){return n.size=n.size*1.8,Pk(n)},draw:function(n,r){var t,e=(0,iy.getStyle)(n,!1,!0),i=(0,h.get)(n,"data.__compare__"),a=this.parsePath(Lk(n,i));return r.addShape("path",(t={name:"interval",attrs:(0,Rt.__assign)((0,Rt.__assign)({},e),{path:a})},t.__compare__=i,t))},getMarker:function(n){var r=n.color;return{symbol:"square",style:{r:4,fill:r}}}});function bf(n,r,t){return(1-t)*n+t*r}function Ik(n,r){var t=r.reverse,e=r.ratioUpper,i=r.ratioLower,a=[],o=n[0],s=(n[1].x+n[2].x)/2,l=1.2,u=.6;if(t){var f=i;i=e,e=f}var c=(o.x-s)*bf(u,l,i)+s;a.push(["M",c,o.y]);for(var v=1,g=n.length;v<g;v++){var C=n[v].x;switch(v){case 1:case 2:C=(C-s)*bf(u,l,e)+s;break;case 3:C=(C-s)*bf(u,l,i)+s;break}a.push(["L",C,n[v].y])}return a.push(["L",c,o.y]),a.push(["z"]),a}Ai("interval","funnel-dynamic-rect",{draw:function(n,r){var t=(0,iy.getStyle)(n,!1,!0),e=(0,h.get)(n,"data.__custom__"),i=this.parsePath(Ik(n.points,e));return r.addShape("path",{attrs:(0,Rt.__assign)((0,Rt.__assign)({},t),{path:i})})},getMarker:function(n){var r=n.color,t=n.isInPolar;return{symbol:t?"circle":"square",style:{r:t?4.5:4,fill:r}}}});function ny(n,r){var t=r||{},e=t.duration,i=e===void 0?200:e,a=t.delay,o=t.easing,s=t.callback,l=t.reverse,u=n.getBBox(),f=l?u.maxX:u.minX,c=(u.minY+u.maxY)/2,v=n.setClip({type:"rect",attrs:{x:u.x,y:u.y,width:u.width,height:u.height}}),g={matrix:[1,0,0,0,1,0,0,0,1]};v.setMatrix(Ri.transform(v.getMatrix(),[["t",-f,-c],["s",0,1],["t",f,c]]));var C={fillOpacity:n.attr("fillOpacity"),strokeOpacity:n.attr("strokeOpacity"),opacity:n.attr("opacity")};n.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),v.animate(g,{duration:200,easing:o,callback:function(){n.setClip(null),v.remove()},delay:a}),n.animate(C,{duration:i,easing:o,delay:a}),s&&setTimeout(function(){return s(n)},i+a)}ny.animationName="funnelScaleInX",dn("funnelScaleInX",ny);function ay(n,r){var t=r||{},e=t.duration,i=e===void 0?200:e,a=t.delay,o=t.easing,s=t.callback,l=t.reverse,u=n.getBBox(),f=(u.minX+u.maxX)/2,c=l?u.maxY:u.minY,v=n.setClip({type:"rect",attrs:{x:u.x,y:u.y,width:u.width,height:u.height}}),g={matrix:[1,0,0,0,1,0,0,0,1]};v.setMatrix(Ri.transform(v.getMatrix(),[["t",-f,-c],["s",1,0],["t",f,c]]));var C={fillOpacity:n.attr("fillOpacity"),strokeOpacity:n.attr("strokeOpacity"),opacity:n.attr("opacity")};n.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),v.animate(g,{duration:200,easing:o,callback:function(){n.setClip(null),v.remove()},delay:a}),n.animate(C,{duration:i,easing:o,delay:a}),s&&setTimeout(function(){return s(n)},i+a)}ay.animationName="funnelScaleInY",dn("funnelScaleInY",ay);function jl(n,r,t){return(1-t)*n+t*r}var kk={column:"interval"},Ok={interval:"funnel"},oy=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.type="funnel",e._shouldResetPercentages=!0,e._shouldResetLabels=!0,e._shouldResetCompareTexts=!0,e._legendsListenerAttached=!1,e._onLegendContainerMouseDown=function(i){var a=e.options,o=i.target.get("name");if(o.startsWith("legend-item")){var s=i.target.get("parent");if(s.set("unchecked",!s.get("unchecked")),e.refreshPercentages(),e.refreshLabels(),a.dynamicHeight){var l=e._findCheckedDataByMouseDownLegendItem(s);e._genCustomFieldForDynamicHeight(l)}if(a.compareField){var l=e._findCheckedDataByMouseDownLegendItem(s);e._updateDataForCompare(l),e.refreshCompareTexts()}}},e.adjustProps(e.options),t.dynamicHeight&&e._genCustomFieldForDynamicHeight(e.getData()),t.compareField&&(e.options.data=e._reduceDataForCompare(e.getData())),e}return r.getDefaultOptions=function(t){var e={label:{visible:!0,adjustColor:!0},percentage:{visible:!0,offsetX:t.transpose?0:40,offsetY:t.transpose?40:0,spacing:4,line:{visible:!0,style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}},text:{content:"\u8F6C\u5316\u7387",style:{fill:"rgba(0, 0, 0, 0.65)"}},value:{visible:!0,style:{fill:"black"},formatter:function(i,a){return(100*a/i).toFixed(2)+"%"}}},tooltip:{visible:!0,shared:!0,showTitle:!1,showCrosshairs:!1,showMarkers:!1},animation:(0,h.deepMix)({},fo.DEFAULT_ANIMATE_CFG,{appear:{duration:800}}),dynamicHeight:!1,compareText:{visible:!0,offsetX:-16,offsetY:-16,style:{fill:"black"}},legend:{position:"bottom-center"},interactions:[{type:"tooltip"},{type:"legend-filter"}]};return(0,h.deepMix)({},n.getDefaultOptions.call(this),e)},r.prototype.getColorScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.coord=function(){var t=this.options,e={type:"rect",actions:t.transpose?t.dynamicHeight?[["transpose"],["scale",1,-1]]:[["scale",1,-1]]:t.dynamicHeight?[]:[["transpose"],["scale",1,-1]]};this.setConfig("coordinate",e)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustFunnel=function(t){var e=this.options;t.shape=e.dynamicHeight?"funnel-dynamic-rect":"funnel-basic-rect",t.color={fields:[e.xField],values:e.color&&(Array.isArray(e.color)?e.color:[e.color])},(0,h.isFunction)(e.funnelStyle)?t.style={callback:e.funnelStyle}:t.style={cfg:e.funnelStyle},t.adjust=[{type:e.dynamicHeight?"stack":"symmetric"}]},r.prototype.tooltip=function(){var t=this.options;t.compareField&&(0,h.deepMix)(t.tooltip,{htmlContent:function(e,i){var a,o,s,l;a=cn.CONTAINER_CLASS,o=(0,vt.Z)('<div class="'+a+'"></div>'),(0,Tt.Z)(o,Lo.default[a]);var u=o;if(e){a=cn.TITLE_CLASS,o=(0,vt.Z)('<div class="'+a+'"></div>'),(0,Tt.Z)(o,Lo.default[a]),u.appendChild(o);var f=o;a=cn.MARKER_CLASS,o=(0,vt.Z)('<span class="'+a+'"></span>'),(0,Tt.Z)(o,Lo.default[a]),(0,Tt.Z)(o,{width:"10px",height:"10px"}),f.appendChild(o),l=o,o=(0,vt.Z)("<span>"+e+"</span>"),f.appendChild(o)}if(i){a=cn.LIST_CLASS,o=(0,vt.Z)('<ul class="'+a+'"></ul>'),(0,Tt.Z)(o,Lo.default[a]),u.appendChild(o);var c=o;i.reduce(function(v,g){s||(s=g.color);var C=(0,h.get)(g,"point._origin.__compare__.compareValues"),O=(0,h.get)(g,"point._origin.__compare__.yValues");return O.forEach(function(F,G){return v.push([C[G],F])}),v},[]).forEach(function(v,g){var C=v[0],O=v[1];a=cn.LIST_ITEM_CLASS,o=(0,vt.Z)('<li class="'+a+'" data-index='+g+"></li>"),(0,Tt.Z)(o,Lo.default[a]),c.appendChild(o);var F=o;a=cn.NAME_CLASS,o=(0,vt.Z)('<span class="'+a+'">'+C+"</span>"),(0,Tt.Z)(o,Lo.default[a]),F.appendChild(o),a=cn.VALUE_CLASS,o=(0,vt.Z)('<span class="'+a+'">'+O+"</span>"),(0,Tt.Z)(o,Lo.default[a]),F.appendChild(o)})}return s&&l&&(0,Tt.Z)(l,{backgroundColor:s}),u}}),n.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){var t=this.options,e=ln("interval","main",{positionFields:[t.dynamicHeight?"_":t.xField,t.yField],plot:this});this.adjustFunnel(e),this.funnel=e,this.setConfig("geometry",e),t.compareField||this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.options.tooltip;t.fields&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.fields=t.fields),t.formatter&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.callback=t.formatter,t.fields||(this.funnel.tooltip.fields=[this.options.xField,this.options.yField]))},r.prototype.animation=function(){var t=this;n.prototype.animation.call(this);var e=this.options;if(e.animation===!1)this.funnel.animate=!1;else{var i=this.getData(),a=(0,h.get)(e,"animation.appear.duration"),o=a/(i.length||1);this._animationAppearTimeoutHandler&&(clearTimeout(this._animationAppearTimeoutHandler),delete this._animationAppearTimeoutHandler),this._animationAppearTimeoutHandler=setTimeout(function(){t.fadeInPercentages(o),e.compareField&&t.fadeInCompareTexts(o),delete t._animationAppearTimeoutHandler},a),this.funnel.animate=(0,h.deepMix)({},e.animation,{appear:{animation:e.transpose?"funnelScaleInX":"funnelScaleInY",duration:o,delay:function(s){return(0,h.findIndex)(i,function(l){return(0,h.isEqual)(l,s)})*o},callback:function(s){t.fadeInLabels(s,.5*o)}},enter:{animation:"fade-in"}})}},r.prototype.afterRender=function(){var t=this.options;if(this.resetLabels(),this.resetPercentages(),t.compareField&&this.resetCompareTexts(),t.padding=="auto"){var e=this._findPercentageContainer();e&&this.paddingController.registerPadding(e,"inner",!0);var i=this._findCompareTextContainer();i&&this.paddingController.registerPadding(i,"inner",!0)}if(n.prototype.afterRender.call(this),t.animation===!1&&(this.fadeInLabels(),this.fadeInPercentages(),t.compareField&&this.fadeInCompareTexts()),!this._legendsListenerAttached){this._legendsListenerAttached=!0;var a=this.view.getController("legend").container;a.on("mousedown",this._onLegendContainerMouseDown)}},r.prototype.updateConfig=function(t){t=this.adjustProps(t),n.prototype.updateConfig.call(this,t),this._legendsListenerAttached=!1},r.prototype.changeData=function(t){var e=this.options;if(e.animation!==!1&&(this._shouldResetPercentages=!1,this._shouldResetLabels=!1),e.dynamicHeight){var i=this._findCheckedDataInNewData(t);this._genCustomFieldForDynamicHeight(i)}if(e.compareField){t=this._reduceDataForCompare(t);var i=this._findCheckedDataInNewData(t);this._updateDataForCompare(i)}n.prototype.changeData.call(this,t),this.refreshPercentages(),this.refreshLabels(),e.compareField&&this.fadeInCompareTexts()},r.prototype.geometryParser=function(t,e){return t==="g2"?kk[e]:Ok[e]},r.prototype.adjustProps=function(t){return t.compareField&&(t.dynamicHeight=!1),t.dynamicHeight&&((0,h.set)(t,"meta."+t.yField+".nice",!1),(0,h.set)(t,"tooltip.shared",!1)),t},r.prototype.resetPercentages=function(){var t=this;if(!!this._shouldResetPercentages){var e=this.options,i=e.percentage||{},a=i.offsetX,o=i.offsetY,s=i.spacing,l=i.line,u=l===void 0?{}:l,f=i.text,c=f===void 0?{}:f,v=i.value,g=v===void 0?{}:v,C=Date.now(),O=this._findPercentageContainer(!0);this._eachShape(function(F,G,Y,$){if(G>0){var q=F.getBBox(),ut=q.minX,kt=q.maxX,Nt=q.maxY,Wt=q.minY,Ft=e.transpose?ut:kt,ee=e.transpose&&e.compareField?Nt:Wt,ve=t._findPercentageMembersInContainerByIndex(O,G,!0),fe=ve.line,Te=ve.text,Be=ve.value,ke=[function(Ze,Ke,wr,br,Ir){wr&&(wr.attr((0,h.deepMix)({},u.style,{x1:Ze,y1:Ke,x2:e.transpose?Ze+a:Ze-a,y2:e.transpose?Ke-o:Ke+o,opacity:0})),wr.set("adjustTimestamp",C));var ir=0,Mr=0,zr=function(){br&&(br.attr((0,h.deepMix)({},c.style,{x:e.transpose?Ze+a:Ze-a-s-Mr-s,y:e.transpose?Ke-o-s:Ke+o,opacity:0,text:c.content,textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),br.set("adjustTimestamp",C),ir=br.getBBox().width)},Lr=function(){Ir&&(Ir.attr((0,h.deepMix)({},g.style,{x:e.transpose?Ze+a+ir+s:Ze-a-s,y:e.transpose?Ke-o-s:Ke+o,opacity:0,text:(0,h.isFunction)(g.formatter)?e.compareField?g.formatter((0,h.get)($,"__compare__.yValues.0"),(0,h.get)(Y,"__compare__.yValues.0")):g.formatter($[e.yField],Y[e.yField]):"",textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),Ir.set("adjustTimestamp",C),Mr=Ir.getBBox().width)};e.transpose?(zr(),Lr()):(Lr(),zr())},function(Ze,Ke,wr,br,Ir){wr&&(wr.attr((0,h.deepMix)({},u.style,{x1:Ze,y1:Ke,x2:Ze+a,y2:e.transpose?e.compareField?Ke+o:Ke-o:Ke+o,opacity:0})),wr.set("adjustTimestamp",C));var ir=0;br&&(br.attr((0,h.deepMix)({},c.style,{x:e.transpose?Ze+a:Ze+a+s,y:e.transpose?e.compareField?Ke+o+s:Ke-o-s:Ke+o,opacity:0,text:c.content,textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),br.set("adjustTimestamp",C),ir=br.getBBox().width),Ir&&(Ir.attr((0,h.deepMix)({},g.style,{x:e.transpose?Ze+a+ir+s:Ze+a+s+ir+s,y:e.transpose?e.compareField?Ke+o+s:Ke-o-s:Ke+o,opacity:0,text:(0,h.isFunction)(g.formatter)?e.compareField?g.formatter((0,h.get)($,"__compare__.yValues.1"),(0,h.get)(Y,"__compare__.yValues.1")):g.formatter($[e.yField],Y[e.yField]):"",textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),Ir.set("adjustTimestamp",C))}];if(e.compareField){var Qe=[ut,Wt],tr=Qe[0],rr=Qe[1];[[tr,rr],[Ft,ee]].forEach(function(Ze,Ke){var wr=Ze[0],br=Ze[1];return ke[Ke](wr,br,fe&&fe[Ke],Te&&Te[Ke],Be&&Be[Ke])})}else ke[1](Ft,ee,fe,Te,Be)}$=Y,G++}),O.get("children").forEach(function(F){F.get("adjustTimestamp")!=C&&(F.attr({opacity:0}),O.set(F.get("id"),null),setTimeout(function(){return F.remove()},0))})}},r.prototype.fadeInPercentages=function(t,e){var i=this,a=this.options,o=this._findPercentageContainer(),s=function(l){var u={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity};i._eachShape(function(f,c){var v=i._findPercentageMembersInContainerByIndex(o,c),g={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity},C=function(F){if(F&&F.get("type")=="text"){var G=F.getBBox(),Y=G.minX,$=G.maxX,q=G.minY,ut=G.maxY;Y<g.minX&&(g.minX=Y),$>g.maxX&&(g.maxX=$),q<g.minY&&(g.minY=q),ut>g.maxY&&(g.maxY=ut)}};if((0,h.each)(v,function(F){return(0,h.isArray)(F)?C(F[l]):C(F)}),g.minX>u.maxX||g.maxX<u.minX||g.minY>u.maxY||g.maxY<u.minY){var O=function(F){if(F){var G={opacity:1};t?F.animate(G,t):F.attr(G)}};(0,h.each)(v,function(F){return(0,h.isArray)(F)?O(F[l]):O(F)}),(0,h.assign)(u,g)}})};a.compareField?[0,1].forEach(s):s(),t&&e&&setTimeout(e,t)},r.prototype.fadeOutPercentages=function(t,e){var i=this,a=this._findPercentageContainer();this._eachShape(function(o,s){var l=i._findPercentageMembersInContainerByIndex(a,s),u=function(f){if(f){var c={opacity:0};t?f.animate(c,t):f.attr(c)}};(0,h.each)(l,function(f){return(0,h.isArray)(f)?f.forEach(u):u(f)})}),t&&e&&setTimeout(e,t)},r.prototype.refreshPercentages=function(t){var e=this,i=this.options;if(i.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,s=a.fadeInDuration;this._shouldResetPercentages=!1,this.fadeOutPercentages(o,function(){e._shouldResetPercentages=!0,e.resetPercentages(),e.fadeInPercentages(s,t)})}},r.prototype._findPercentageContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,i=e.get("percentageContainer");return!i&&t&&(i=e.addGroup(),e.set("percentageContainer",i)),i},r.prototype._findPercentageMembersInContainerByIndex=function(t,e,i){i===void 0&&(i=!1);var a=this.options,o=a.percentage||{},s=o.visible,l=o.line,u=l===void 0?{}:l,f=o.text,c=f===void 0?{}:f,v=o.value,g=v===void 0?{}:v,C={line:void 0,text:void 0,value:void 0};if(s===!1||!t)return C;if(u.visible!==!1){var O=function($){var q="_percentage-line-"+e+"-"+$,ut=t.get(q);return!ut&&i&&(ut=t.addShape({id:q,type:"line",attrs:{}}),t.set(q,ut)),ut},F=a.compareField?[0,1].map(O):O(0);C.line=F}if(c.visible!==!1){var O=function(q){var ut="_percentage-text-"+e+"-"+q,kt=t.get(ut);return!kt&&i&&(kt=t.addShape({id:ut,type:"text",attrs:{}}),t.set(ut,kt)),kt},G=a.compareField?[0,1].map(O):O(0);C.text=G}if(g.visible!==!1){var O=function(q){var ut="_percentage-value-"+e+"-"+q,kt=t.get(ut);return!kt&&i&&(kt=t.addShape({id:ut,type:"text",attrs:{}}),t.set(ut,kt)),kt},Y=a.compareField?[0,1].map(O):O(0);C.value=Y}return C},r.prototype._calcRefreshFadeDurations=function(){var t=this.options,e=(0,h.get)(t,"animation.update.duration"),i=(0,h.get)(t,"animation.enter.duration"),a=Math.min(i,e)*.6,o=Math.max(i,e)*1.2;return{fadeInDuration:a,fadeOutDuration:o}},r.prototype.resetLabels=function(){var t=this;if(!!this._shouldResetLabels){var e=this.options,i=e.xField,a=e.yField,o=Date.now(),s=this._getGeometry().labelsContainer,l=e.label||{},u=(0,h.deepMix)((0,Rt.__assign)({},this.theme.label),e.label.style,{opacity:0,textAlign:"center",textBaseline:"middle"}),f;this._eachShape(function(c,v,g,C){var O,F=c.get("element");v==0&&(f=g);var G=c.getBBox(),Y=G.minX,$=G.maxX,q=G.minY,ut=G.maxY,kt=g[i],Nt=g[a];l.adjustColor&&(u.fill=t._getAdjustedTextFillByShape(c));var Wt=g.__compare__,Ft,ee=(O={},O[Cs]=g,O.element=F,O.elementIndex=C,O.mappingDatum=[].concat(F.getModel().mappingData)[0],O.mappingDatumIndex=0,O);l.formatter?Ft=l.formatter(kt,ee,v,Nt,f[a]):Wt?Ft=[0,1].map(function(){return""+Nt}).join(e.transpose?`

`:"    "):Ft=kt+" "+Nt;var ve=t._findLabelInContainerByIndex(s,v,!0),fe=Wt?Wt.yValues[0]/(Wt.yValues[0]+Wt.yValues[1]):.5;ve&&(ve.attr((0,Rt.__assign)((0,Rt.__assign)({},u),{x:jl(Y,$,e.transpose?.5:fe),y:jl(q,ut,e.transpose?fe:.5),text:Ft})),ve.set("adjustTimestamp",o))}),s.get("children").forEach(function(c){c.get("adjustTimestamp")!=o&&(c.attr({opacity:0}),s.set(c.get("id"),null),setTimeout(function(){return c.remove()}))})}},r.prototype.fadeInLabels=function(t,e,i){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(s,l){if(!t||t==s){var u=a._findLabelInContainerByIndex(o,l);if(u){var f=s.getBBox(),c=u.getBBox();if(c.minX>=f.minX&&c.maxX<=f.maxX&&c.minY>=f.minY&&c.maxY<=f.maxY){var v={opacity:1};e?u.animate(v,e):u.attr(v)}}}}),e&&i&&setTimeout(i,e)},r.prototype.fadeOutLabels=function(t,e,i){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(s,l){if(!t||t==s){var u=a._findLabelInContainerByIndex(o,l);if(u){var f={opacity:0};e?u.animate(f,e):u.attr(f)}}}),e&&i&&setTimeout(i,e)},r.prototype.refreshLabels=function(t){var e=this,i=this.options;if(i.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,s=a.fadeInDuration;this._shouldResetLabels=!1,this.fadeOutLabels(null,o,function(){e._shouldResetLabels=!0,e.resetLabels(),e.fadeInLabels(null,s,t)})}},r.prototype._findLabelInContainerByIndex=function(t,e,i){var a;i===void 0&&(i=!1);var o=this.options,s;if(((a=o.label)===null||a===void 0?void 0:a.visible)===!1)return s;var l="_label-"+e;return s=t.get(l),!s&&i&&(s=t.addShape({id:l,type:"text",attrs:{}}),t.set(l,s)),s},r.prototype.resetCompareTexts=function(){if(!!this._shouldResetCompareTexts){var t=this.options,e,i;if(this._eachShape(function(g,C,O){C==0&&(e=g.get("parent").getBBox(),i=(0,h.get)(O,"__compare__"))}),e&&i&&(0,h.get)(t,"compareText.visible")!==!1){var a=this._findCompareTextContainer(!0),o=i.yValuesMax,s=i.compareValues,l=e.minX,u=e.maxX,f=e.minY,c=e.maxY,v=a.get("children");[0,1].forEach(function(g){var C=v[g];C||(C=a.addShape({type:"text"})),C.attr((0,h.deepMix)({},(0,h.get)(t,"compareText.style"),{text:t.transpose?s[g]:g?"  "+s[g]:s[g]+"  ",x:t.transpose?l+(0,h.get)(t,"compareText.offsetX"):jl(l,u,o[0]/(o[0]+o[1])),y:t.transpose?jl(f,c,o[0]/(o[0]+o[1]))+(g?8:-8):f+(0,h.get)(t,"compareText.offsetY"),opacity:0,textAlign:t.transpose?"right":g?"left":"right",textBaseline:t.transpose&&g?"top":"bottom"}))})}}},r.prototype.fadeInCompareTexts=function(t,e){var i=this._findCompareTextContainer();if(i){var a=i.get("children");[0,1].forEach(function(o){var s=a[o];if(s){var l={opacity:1};t?s.animate(l,t):s.attr(l)}})}t&&e&&setTimeout(e,t)},r.prototype.fadeOutCompareTexts=function(t,e){var i=this._findCompareTextContainer();if(i){var a=i.get("children");[0,1].forEach(function(o){var s=a[o];if(s){var l={opacity:0};t?s.animate(l,t):s.attr(l)}})}t&&e&&setTimeout(e,t)},r.prototype.refreshCompareTexts=function(t){var e=this,i=this.options;if(i.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeInDuration,s=a.fadeOutDuration;this._shouldResetCompareTexts=!1,this.fadeOutCompareTexts(s,function(){e._shouldResetCompareTexts=!0,e.resetCompareTexts(),e.fadeInCompareTexts(o,t)})}},r.prototype._findCompareTextContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,i=e.get("compareTextContainer");return!i&&t&&(i=e.addGroup(),e.set("compareTextContainer",i)),i},r.prototype._eachShape=function(t){var e,i=this._findCheckedData(this.getData()),a=i.length,o=0,s;(e=this._getGeometry())===null||e===void 0||e.elements.forEach(function(l,u){var f=l.shape,c=i[o];o<a&&t(f,o,c,s,u),s=c,o++})},r.prototype._getGeometry=function(){return this.view.geometries[0]},r.prototype._getAdjustedTextFillByShape=function(t){var e=t.attr("fill"),i=t.attr("opacity")?t.attr("opacity"):1,a=$a(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/i,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],l=Nl(s,o);return l},r.prototype._genCustomFieldForDynamicHeight=function(t){var e=this.options,i=t.reduce(function(o,s){return o+s[e.yField]},0),a=1;t.forEach(function(o,s){var l=o[e.yField],u=l/i,f=a-u;o.__custom__={datumIndex:s,dataLength:t.length,ratioUpper:a,ratioLower:f,reverse:e.transpose},a=f})},r.prototype._findCheckedDataByMouseDownLegendItem=function(t){var e=t.get("parent").get("children").map(function(a){return!a.get("unchecked")}),i=this.getData().filter(function(a,o){return e[o]});return i},r.prototype._findCheckedDataInNewData=function(t){var e=this.options,i=this.view.getController("legend").container,a=i.findAll(function(s){return s.get("name")=="legend-item"}).filter(function(s){return s.get("unchecked")}).map(function(s){return s.get("id").replace("-legend-item-","")}),o=t.filter(function(s){return!(0,h.contains)(a,s[e.xField])});return o},r.prototype._findCheckedData=function(t){var e,i=this.options;if((e=i.legend)===null||e===void 0?void 0:e.visible){var a=this.view.getController("legend").container,o=a.findAll(function(l){return l.get("name")=="legend-item"}).filter(function(l){return!l.get("unchecked")}).map(function(l){return l.get("id").replace("-legend-item-","")}),s=t.filter(function(l){return(0,h.contains)(o,l[i.xField])});return s}else return this.processData(i.data)},r.prototype._reduceDataForCompare=function(t){var e=this.options,i,a=[-Infinity,-Infinity];return t=t.reduce(function(o,s){var l,u=s[e.xField],f=s[e.yField],c=s[e.compareField];i||(i=c);var v=o.find(function(C){return C[e.xField]==u});v||(v=(l={},l[e.xField]=u,l[e.yField]=0,l.__compare__={compareValues:[],yValues:[],yValuesMax:[],yValuesNext:void 0,transpose:e.transpose},l),o.push(v));var g=c==i?0:1;return v.__compare__.yValues[g]=f,a[g]<f&&(a[g]=f),v.__compare__.compareValues[g]=c,o},[]),t.forEach(function(o,s){o[e.yField]=(0,h.get)(o,"__compare__.yValues",[]).reduce(function(l,u){return l+=u},0),(0,h.set)(o,"__compare__.yValuesMax",a),(0,h.set)(o,"__compare__.yValuesNext",(0,h.get)(t,s+1+".__compare__.yValues"))}),t},r.prototype._updateDataForCompare=function(t){var e=[-Infinity,-Infinity];t.forEach(function(i){var a=(0,h.get)(i,"__compare__.yValues");[0,1].forEach(function(o){a[o]>e[o]&&(e[o]=a[o])})}),t.forEach(function(i,a){(0,h.set)(i,"__compare__.yValuesMax",e),(0,h.set)(i,"__compare__.yValuesNext",(0,h.get)(t,a+1+".__compare__.yValues"))})},r}(nn),Bk=oy;pi("funnel",oy);var Dk=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="funnel",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Bk.getDefaultOptions,r}(ni),Fk=Dk,sy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="stackedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"stack"}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.stackField]))},r}(xf),Rk=sy;pi("stackedRose",sy);var Nk=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedRose",n.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Rk.getDefaultOptions,r}(ni),ly=Nk,uy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="groupedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"dodge",marginRatio:1}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.groupField]))},r}(xf),Yk=uy;pi("groupedRose",uy);var Gk=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="groupedRose",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Yk.getDefaultOptions,r}(ni),hy=Gk,zk={area:"area",line:"line",point:"point"},Xk=An(zk);(0,h.assign)(Si,Xk);var Vk=function(n){var r=n.opacity||1;return{opacity:r}},Hk=function(n){var r=n.opacity||1;return{opacity:r*.5}},Wk=function(n){var r=n.opacity||1;return{opacity:r}},jk=function(n){var r=n.opacity||1;return{opacity:r*.5}},Uk=function(n){var r=n.lineWidth||1;return{lineWidth:r+2}},Zk=function(n){var r=n.fill||n.fillStyle,t=n.size||n.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},Kk=function(n){var r=n.fill||n.fillStyle,t=n.size||n.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},$k=function(n){var r=n.opacity||n.fillOpacity||1;return{opacity:r*.5}};$n("radar",{areaStyle:{normal:{},active:Vk,disable:Hk,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:Wk,disable:jk,selected:Uk},pointStyle:{normal:{},active:Zk,disable:$k,selected:Kk}});var Qk={area:"area",line:"line",point:"point"},fy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="radar",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,smooth:!1,line:{visible:!0,size:2,style:{opacity:1}},area:{visible:!0,style:{opacity:.25}},point:{visible:!1,size:4,shape:"point",style:{opacity:1}},angleAxis:{visible:!0,autoRotateTitle:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1}},radiusAxis:{min:0,visible:!0,nice:!0,autoRotateTitle:!0,line:{visible:!0},tickLine:{visible:!0},gridType:"line",grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1}},label:{visible:!1,type:"point"},legend:{visible:!0,position:"left-top"},tooltip:{visible:!0,shared:!0,showCrosshairs:!1}})},r.prototype.init=function(){var t=this.options;t.xField=t.angleField,t.yField=t.radiusField,n.prototype.init.call(this)},r.prototype.getAngleScale=function(){var t=this.options.angleField;return this.view.getScaleByField(t)},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options.seriesField;return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return Qk[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.angleField]={},(0,h.has)(t,"angleAxis")&&wn(e[t.angleField],t.angleAxis),e[t.radiusField]={},(0,h.has)(t,"radiusAxis")&&wn(e[t.radiusField],t.radiusAxis),this.setConfig("scales",e),n.prototype.scale.call(this)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius}};this.setConfig("coordinate",e)},r.prototype.axis=function(){var t=this.options,e=On("axis",{plot:this,dim:"angle"}),i=On("axis",{plot:this,dim:"radius"}),a={};a[t.angleField]=e,a[t.radiusField]=i,this.setConfig("axes",a)},r.prototype.addGeometry=function(){var t=this.options;if(t.area.visible){var e=ln("area","main",{plot:this});this.setConfig("geometry",e),this.area=e}if(t.line&&t.line.visible){var i=ln("line","main",{plot:this});this.setConfig("geometry",i),this.line=i}if(t.point&&t.point.visible){var a=ln("point","guide",{plot:this});this.setConfig("geometry",a),this.point=a}t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.line?this.line:this.area;t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.angleField,this.options.radiusField]),this.options.seriesField&&t.tooltip.fields.push(this.options.seriesField))},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.point&&(this.point.label=!1),this.line&&(this.line.label=!1),this.area&&(this.area.label=!1);return}var e=On("label",(0,Rt.__assign)({fields:[t.radiusField],cfg:{type:"polar",autoRotate:!1},plot:this},t.label));this.point?this.point.label=e:this.line?this.line.label=e:this.area&&(this.area.label=e)},r.prototype.annotation=function(){},r.prototype.animation=function(){n.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area&&(this.area.animate=!1),this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,E)},r}(nn),Jk=fy;pi("radar",fy);var qk=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="radar",n.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getColorScale=function(){var t=this.layers[0];return t.getColorScale()},r.getDefaultOptions=Jk.getDefaultOptions,r}(ni),cy=qk,tO=d(74940),eO=d(20311),rO=function(){function n(r){var t=this.getDefaultOptions();this.options=(0,h.deepMix)(t,r,{}),this.x=this.options.x,this.y=this.options.y,this.html=this.options.html,this.container=this.options.container}return n.prototype.render=function(){if((0,h.isElement)(this.container)){this.wrapperNode=(0,vt.Z)('<div class="g2plot-htmlStatistic"></div>'),this.container.appendChild(this.wrapperNode),(0,Tt.Z)(this.wrapperNode,{position:"absolute",pointerEvents:"none"});var r=this.html;this.wrapperNode.appendChild(r),this.setDomPosition(this.x,this.y)}},n.prototype.updateHtml=function(r){(0,h.isType)(r,"HTMLDivElement")?(this.wrapperNode.innerHTML="",this.wrapperNode.appendChild(r)):this.wrapperNode.innerHTML=r,this.setDomPosition(this.x,this.y)},n.prototype.updatePosition=function(r,t){this.x=r,this.y=t,this.setDomPosition(r,t)},n.prototype.destroy=function(){this.container.removeChild(this.wrapperNode)},n.prototype.getDefaultOptions=function(){return{x:0,y:0,width:0,height:0,html:"",container:null,alignX:"middle",alignY:"middle"}},n.prototype.setDomPosition=function(r,t){var e=r,i=t,a=(0,tO.Z)(this.wrapperNode),o=(0,eO.Z)(this.wrapperNode);this.options.alignX==="middle"&&(e=r-a/2),this.options.alignY==="middle"&&(i=t-o/2),(0,Tt.Z)(this.wrapperNode,{top:Math.round(i)+"px",left:Math.round(e)+"px",transform:a>0?"none":"translate(-50%, -50%)"})},n}(),vy=rO,iO="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",nO="font-size:32px;font-weight:bold;color:#4D4D4D";function aO(n,r){var t='<span class="liquid-guide-value" style='+nO+">"+n+"</span>";return'<div class="liquid-guide-html '+r+'" style='+iO+">"+t+"</div>"}var oO=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.getTotalHtmlString=function(){var t=document.createElement("div"),e=this.plot.options,i=e.value,a=i===void 0?0:i,o=e.statistic;if(o&&!o.visible)return t;var s=this.options.htmlContent(a);return(0,h.isType)(s,"HTMLDivElement")?t.appendChild(s):t.innerHTML=aO(s,this.statisticClass),t},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,i=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=i+o/2},r}(vy),sO=oO,lO={liquid:"intervl",statistic:"annotation-text"},uO=An(lO);(0,h.assign)(Si,uO);var dy=Rn(),py={splitPoints:function(n){var r=[],t=n.x,e=n.y;return e=(0,h.isArray)(e)?e:[e],(0,h.each)(e,function(i,a){var o={x:(0,h.isArray)(t)?t[a]:t,y:i};r.push(o)}),r},addFillAttrs:function(n,r){r.color&&!n.fill&&(n.fill=r.color),(0,h.isNumber)(r.opacity)&&(n.opacity=n.fillOpacity=r.opacity)},addStrokeAttrs:function(n,r){r.color&&!n.stroke&&(n.stroke=r.color),(0,h.isNumber)(r.opacity)&&(n.opacity=n.strokeOpacity=r.opacity)}},wf={lerp:function(n,r,t){return(1-t)*n+t*r}},hO=function(n){var r={lineWidth:0,fill:dy.color,fillOpacity:.85},t=(0,h.mix)({},r,n.style);return py.addFillAttrs(t,n),n.color&&!t.stroke&&(t.stroke=t.stroke||n.color),t},fO=function(n){var r={fill:"#fff",stroke:dy.color,fillOpacity:0,lineWidth:2},t=(0,h.mix)({},r,n.style);return py.addStrokeAttrs(t,n),t};function cO(n,r,t,e){return r===0?[[n+1/2*t/Math.PI/2,e/2],[n+1/2*t/Math.PI,e],[n+t/4,e]]:r===1?[[n+1/2*t/Math.PI/2*(Math.PI-2),e],[n+1/2*t/Math.PI/2*(Math.PI-1),e/2],[n+t/4,0]]:r===2?[[n+1/2*t/Math.PI/2,-e/2],[n+1/2*t/Math.PI,-e],[n+t/4,-e]]:[[n+1/2*t/Math.PI/2*(Math.PI-2),-e],[n+1/2*t/Math.PI/2*(Math.PI-1),-e/2],[n+t/4,0]]}function vO(n,r,t,e,i,a,o){for(var s=Math.ceil(2*n/t*4)*2,l=[],u=e;u<-Math.PI*2;)u+=Math.PI*2;for(;u>0;)u-=Math.PI*2;u=u/Math.PI/2*t;var f=a-n+u-n*2;l.push(["M",f,r]);for(var c=0,v=0;v<s;++v){var g=v%4,C=cO(v*t/4,g,t,i);l.push(["C",C[0][0]+f,-C[0][1]+r,C[1][0]+f,-C[1][1]+r,C[2][0]+f,-C[2][1]+r]),v===s-1&&(c=C[2][0])}return l.push(["L",c+f,o+n]),l.push(["L",f,o+n]),l.push(["L",f,r]),l}function dO(n,r,t,e,i,a,o,s){for(var l=o.getBBox(),u=l.maxX-l.minX,f=l.maxY-l.minY,c=5e3,v=0;v<e;v++){var g=e<=1?0:v/(e-1),C=a.addShape("path",{attrs:{path:vO(s,l.minY+f*t,u/4,0,u/wf.lerp(56,64,g),n,r),fill:i,opacity:wf.lerp(.6,.3,g)}}),O=Uo([["t",u/2,0]]);C.animate({matrix:O},{duration:wf.lerp(c,.7*c,g),repeat:!0})}}Ai("interval","liquid-fill-gauge",{draw:function(n,r){var t=.5,e=Infinity;(0,h.each)(n.points,function(v){v.x<e&&(e=v.x)});var i=.5,a=this.parsePoint({x:i,y:t}),o=this.parsePoint({x:e,y:.5}),s=a.x-o.x,l=Math.min(s,o.y),u=hO(n).fill,f=r.addGroup({name:"waves",attrs:{x:a.x,y:a.y}});f.setClip({type:"circle",attrs:{x:a.x,y:a.y,r:l}});var c=f.get("clipShape");return dO(a.x,a.y,1-n.points[1].y,3,u,f,c,l*4),r.addShape("circle",{name:"wrap",attrs:(0,h.mix)(fO(n),{x:a.x,y:a.y,r:l,fill:"transparent"})}),f[0]}});function gy(n,r){var t=n.get("parent"),e=t.getBBox(),i=Math.min(Math.max(0,(0,h.get)(r,"factor",.5)),1),a=(0,h.get)(r,"delay",0),o=(0,h.get)(r,"duration",800),s=r.callback,l=(e.minX+e.maxX)/2,u=e.maxY,f=t.find(function(O){return O.get("name")=="wrap"}),c=f.attr("opacity");f.attr("opacity",0),f.animate({opacity:c},o*i,"easeLinear",null,a);var v=t.find(function(O){return O.get("name")=="waves"}),g=(0,h.clone)(v.attr("matrix"))||[1,0,0,0,1,0,0,0,1],C=Uo(g,[["t",-l,-u],["s",1,0],["t",l,u]]);v.setMatrix(C),v.animate({matrix:g},o,r.easing,function(){return s&&s(t,f,v)},a)}gy.animationName="liquidMoveIn",dn("liquidMoveIn",gy);var pO={column:"interval"},gO={interval:"liquid"},yy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="liquid",t.shouldFadeInAnnotation=!0,t}return r.getDefaultOptions=function(){var t={padding:[0,0,0,0],animation:{factor:.4,easing:"easeExpOut",duration:800},liquidStyle:{lineWidth:2},color:"#6a99f9",interactions:[],statistic:{visible:!0}};return(0,h.deepMix)({},n.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){var t=this.options,e=t.min,i=t.max,a=t.value;if(!(0,h.isNumber)(e))throw new Error("The min value of Liquid is required, and the type of min must be Number.");if(!(0,h.isNumber)(i))throw new Error("The max value of Liquid is required, and the type of max must be Number.");if(!(0,h.isNumber)(a))throw new Error("The value of Liquid is required, and the type of value must be Number.")},r.prototype.init=function(){this.options.data=[{}],n.prototype.init.call(this)},r.prototype.coord=function(){},r.prototype.scale=function(){var t=this.options,e=t.min,i=t.max,a={value:{}};wn(a.value,{min:Math.min(e,i),max:Math.max(e,i)}),this.setConfig("scales",a),n.prototype.scale.call(this)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustLiquid=function(t){var e=this.options;t.shape={values:["liquid-fill-gauge"]},t.tooltip=!1;var i=e.liquidStyle;(0,h.isFunction)(i)&&(i=i()),i&&(t.style=i)},r.prototype.addGeometry=function(){var t=ln("interval","main",{positionFields:[1,"value"],plot:this});this.adjustLiquid(t);var e=this.getViewRange(),i=Math.min(e.width,e.height)*.8,a=this.options.liquidSize?this.options.liquidSize:i;t.size={values:[a]},this.liquid=t,this.setConfig("geometry",t)},r.prototype.animation=function(){var t=this.options;if(t.animation===!1)this.liquid.animate=!1;else{var e=(0,h.get)(t,"animation.factor"),i=(0,h.get)(t,"animation.easing"),a=(0,h.get)(t,"animation.duration");this.liquid.animate={appear:{animation:"liquidMoveIn",factor:e,easing:i,duration:a}}}},r.prototype.geometryParser=function(t,e){return t==="g2"?pO[e]:gO[e]},r.prototype.annotation=function(){var t=[],e=this.extractStatistic();t.push(e),this.setConfig("annotations",t)},r.prototype.useHtmlContent=function(){var t=this.options,e=t.statistic||{};return(0,h.isFunction)(e.htmlContent)},r.prototype.extractStatistic=function(){if(!this.useHtmlContent()){var t=this.options,e=t.statistic||{},i;(0,h.isFunction)(e.formatter)?i=e.formatter(t.value):i=""+t.value;var a,o;if(i){var s=Math.min(this.width,this.height);a=s/i.length*.5,o=Math.max(1,Math.ceil(.025*a))}var l;if(e.visible!==!1){var u=(0,h.deepMix)({style:{fontSize:a,shadowBlur:o}},{top:!0,content:i,type:"text",position:["50%","50%"],style:{opacity:l,fill:"transparent",shadowColor:"transparent",textAlign:"center"}},e);return delete u.visible,delete u.formatter,delete u.adjustColor,u}}},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,k)},r.prototype.afterRender=function(){var t;((t=this.options.statistic)===null||t===void 0?void 0:t.visible)&&!this.useHtmlContent()&&this.fadeInAnnotation();var e=this.options,i=e.padding?e.padding:this.config.theme.padding;if(e.defaultState&&i!=="auto"&&this.stateController.defaultStates(e.defaultState),i==="auto"&&this.paddingController.processAutoPadding(),this.useHtmlContent()){var a=this.canvas.get("container");if(this.statistic&&a.removeChild(this.statistic.wrapperNode),this.options.statistic&&this.options.statistic.visible){var o=this.canvas.get("container");(0,Tt.Z)(o,{position:"relative"}),this.statistic=new sO((0,Rt.__assign)({container:o,view:this.view,plot:this},this.options.statistic)),this.statistic.render()}n.prototype.afterRender.call(this)}},r.prototype.processData=function(){var t=this.options;return[{_:"_",value:t.value}]},r.prototype.changeValue=function(t){var e=this.options;e.value=t,this.changeData([])},r.prototype.fadeInAnnotation=function(){var t=this,e=this.options,i=this.view.foregroundGroup.findAll(function(s){return s.get("name")==="annotation-text"})[0],a=e.animation||{},o=this.calcAnnotationColorStyle();this.shouldFadeInAnnotation?i.animate(o,a.duration*Math.min(1,1.5*a.factor),null,function(){t.shouldFadeInAnnotation=!1}):(0,h.forIn)(o,function(s,l){return i.attr(l,s)})},r.prototype.calcAnnotationColorStyle=function(){var t=this.options,e={fill:"#f6f6f6",shadowColor:"black"},i={fill:"#303030",shadowColor:"white"};if((0,h.get)(t,"statistic.adjustColor")===!1)return{fill:(0,h.get)(t,"statistic.style.fill",i.fill),shadowColor:(0,h.get)(t,"statistic.style.shadowColor",i.shadowColor)};var a=t.min,o=t.max,s=t.value;a=Math.min(a,o),o=Math.max(a,o);var l;if(a==o?l=1:l=(s-a)/(o-a),l>.55){var u=this.options.color,f=.8,c=$a(u),v=Math.round(c[0]*.299+c[1]*.587+c[2]*.114)/f;return v<156?e:i}return i},r.prototype.updateConfig=function(t){n.prototype.updateConfig.call(this,t),this.shouldFadeInAnnotation=!0},r.prototype.getViewRange=function(){var t=n.prototype.getViewRange.call(this),e=this.options.liquidStyle,i=e.lineWidth?e.lineWidth:2,a=t.minX,o=t.minY,s=t.width,l=t.height,u=Math.min(s,l)-i*2,f=a+s/2,c=o+l/2,v=f-u/2,g=c-u/2;return new si(v,g,u,u)},r}(nn),Sf=yy;pi("liquid",yy);var yO=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="liquid",n.prototype.createLayers.call(this,e)},r.prototype.changeValue=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof Sf&&a.changeValue(t)});else{var i=this.layers[0];i instanceof Sf&&i.changeValue(t)}},r.getDefaultOptions=Sf.getDefaultOptions,r}(ni),my=yO,xy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="histogram",t}return r.prototype.init=function(){this.options.xField="range",this.options.yField="count",n.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,i=this.options,a=i.binField,o=i.binWidth,s=i.binNumber,l=(0,h.clone)(t);(0,h.sortBy)(l,a);var u=(0,h.valuesOfKey)(l,a),f=(0,h.getRange)(u),c=f.max-f.min,v=o;if(!o&&s&&(v=c/s),!o&&!s){var g=Md(u);v=c/g}var C={};(0,h.each)(l,function(F){var G=F[a],Y=e.getBin(G,v),$=Y[0]+"-"+Y[1];(0,h.hasKey)(C,$)||(C[$]={name:$,range:Y,count:0,data:[]}),C[$].data.push(F),C[$].count+=1});var O=[];return(0,h.each)(C,function(F){O.push(F)}),O},r.prototype.scale=function(){n.prototype.scale.call(this);var t=this.config.scales.range;t.nice=!1,t.type="linear"},r.prototype.getBin=function(t,e){var i=Math.floor(t/e);return[e*i,e*(i+1)]},r}(Qo),mO=xy;pi("histogram",xy);var xO=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="histogram",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=mO.getDefaultOptions,r}(ni),by=xO,bO={epanechnikov:function(n){return Math.abs(n)<=1?.75*(1-n*n):0},gaussian:function(n){return 1/Math.sqrt(Math.PI*2)*Math.exp(-.5*Math.pow(n,2))},uniform:function(n){return Math.abs(n)<=1?.5:0},triangle:function(n){return Math.abs(n)<=1?1-Math.abs(n):0},quartic:function(n){var r=1-n*n;return Math.abs(n)<=1?15/16*r*r:0},triweight:function(n){var r=1-n*n;return Math.abs(n)<=1?15/16*Math.pow(r,3):0},cosinus:function(n){var r=Math.PI/4*Math.cos(.5*Math.PI*n);return Math.abs(n)<=1?r:0}},wy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="density",t}return r.prototype.init=function(){var t=this.options.xAxis?(0,h.clone)(this.options.xAxis):{};this.options.xField="value",this.options.yField="density",this.options.xAxis=(0,h.deepMix)({},t,{type:"linear"}),this.options.smooth=!0,n.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,i=this.options,a=i.binField,o=i.binWidth,s=i.binNumber,l=i.kernel,u=l||"epanechnikov",f=bO[u],c=(0,h.clone)(t);(0,h.sortBy)(c,a);var v=(0,h.valuesOfKey)(c,a),g=(0,h.getRange)(v),C=g.max-g.min,O=s,F=o;!s&&o&&(O=Math.floor(C/o)),!o&&s&&(F=C/s),!s&&!o&&(O=Md(v),F=C/s);var G=(0,Qr.getScale)("linear"),Y=new G({min:g.min,max:g.max,tickCount:O,nice:!1}),$=Y.getTicks(),q=[];return(0,h.each)($,function(ut){var kt=e.kernelDensityEstimator(F,f,ut,v);q.push({value:ut.text,density:kt})}),q},r.prototype.kernelDensityEstimator=function(t,e,i,a){var o=0;return(0,h.each)(a,function(s){var l=(i.tickValue-s)/t;o+=e(l)}),a.length===0?0:o/a.length},r}(lf),wO=wy;pi("density",wy);var wG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="density",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=wO.getDefaultOptions,r}(ni),SG=null,SO={ring:"interval"},CO=An(SO);(0,h.assign)(Si,CO);var MO="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",EO="font-weight:300;white-space: nowrap;text-overflow: ellipsis;",AO="font-size:32px;font-weight:bold;color:#4D4D4D";function TO(n,r,t,e){var i=MO+"width:"+e+"px;",a=n?'<span class="ring-guide-name" style='+EO+">"+n+"</span><br/>":"",o='<span class="ring-guide-value" style='+AO+">"+r+"</span>";return'<div class="ring-guide-html '+t+'" style='+i+">"+a+o+"</div>"}var _O=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.triggerOn=function(){var t=this,e=this.options.triggerOn;this.view.on("interval:"+e,(0,h.debounce)(function(a){var o=t.parseStatisticData("item",a.data.data,a.data.color),s=t.getStatisticHtmlString(o);t.updateHtml(s)},150));var i=this.options.triggerOff?this.options.triggerOff:"mouseleave";this.view.on("interval:"+i,(0,h.debounce)(function(){var a=t.getTotalHtmlString();t.updateHtml(a)},150))},r.prototype.getTotalHtmlString=function(){var t;if(this.options.content)t=this.options.content;else{var e=this.getTotalValue();t=this.parseStatisticData("total",e)}var i;this.options.htmlContent?i=this.options.htmlContent(t,this.getStatisticSize()):i=this.getStatisticTemplate(t);var a=document.createElement("div");return(0,h.isType)(i,"HTMLDivElement")?a.appendChild(i):a.innerHTML=i,a},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,i=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=i+o/2},r.prototype.getTotalValue=function(){var t,e=0,i=this.plot.options,a=i.angleField,o=i.colorField,s=this.options.totalLabel;(0,h.each)(this.plot.options.data,function(u){typeof u[a]=="number"&&(e+=u[a])});var l=(t={},t[a]=e,t[o]=s,t);return l},r.prototype.parseStatisticData=function(t,e,i){var a=this.plot,o=a.options,s=o.angleField,l=o.colorField,u=a.getScaleByField(s),f=a.getScaleByField(l),c={name:f?f.getText(e[l]):null,value:u.getText(e[s])};return t==="item"&&(c.itemData=e,c.color=i),c},r.prototype.getStatisticTemplate=function(t){var e=this.getStatisticSize(),i=TO(t.name,t.value,this.statisticClass,e);return i},r.prototype.getStatisticSize=function(){var t=this.plot.view.coordinateBBox,e=this.plot.options,i=e.radius,a=e.innerRadius,o=Math.min(t.width,t.height),s=o*i*a;return s},r.prototype.getStatisticHtmlString=function(t){var e=this.options.htmlContent,i;return e?i=e(t,this.getStatisticSize()):i=this.getStatisticTemplate(t),i},r}(vy),PO=_O,LO={ring:"interval"},IO={interval:"ring"},Sy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="donut",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{radius:.8,innerRadius:.64,tooltip:{visible:!1},statistic:{visible:!0,totalLabel:"\u603B\u8BA1",triggerOn:"mouseenter",triggerOff:"mouseleave"}})},r.prototype.beforeInit=function(){n.prototype.beforeInit.call(this),r.centralId++,this.statisticClass="statisticClassId"+r.centralId,this.adjustLabelDefaultOptions()},r.prototype.afterRender=function(){var t=this.canvas.get("container");if(this.statistic&&(t.removeChild(this.statistic.wrapperNode),this.statistic=null),this.options.statistic&&this.options.statistic.visible){var e=this.canvas.get("container");(0,Tt.Z)(e,{position:"relative"}),this.statistic=new PO((0,Rt.__assign)({container:e,view:this.view,plot:this,statisticClass:this.statisticClass},this.options.statistic)),this.statistic.render(),this.options.statistic.triggerOn&&this.statistic.triggerOn()}n.prototype.afterRender.call(this)},r.prototype.destroy=function(){this.statistic&&this.statistic.destroy(),n.prototype.destroy.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?LO[e]:IO[e]},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius}};this.setConfig("coordinate",e)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,D)},r.prototype.adjustLabelDefaultOptions=function(){var t=this.options.label;if(t&&t.type==="inner"){var e=t.style||{};e.textAlign||(e.textAlign="center"),t.style=e,t.offset||(t.offset=(this.options.innerRadius-1)/2*100+"%")}},r.centralId=0,r}(jg),Cy=Sy;pi("donut",Sy);var kO=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="donut",n.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Cy.getDefaultOptions,r}(ni),My=kO;function OO(n,r,t){var e=n.style,i=n.defaultStyle,a=n.color,o=(0,Rt.__assign)((0,Rt.__assign)({},i),e);return a&&(r&&(o.stroke=a),t&&(o.fill=a)),o}function BO(n){var r=[],t=n[0];r.push(["M",t.x,t.y]);for(var e=1,i=n.length;e<i;e++)r.push(["L",n[e].x,n[e].y]);return r.push(["L",t.x,t.y]),r.push(["z"]),r}Ai("interval","waterfall",{draw:function(n,r){var t=OO(n,!1,!0),e=this.parsePath(BO(n.points)),i=r.addShape("path",{attrs:(0,Rt.__assign)((0,Rt.__assign)({},t),{path:e}),name:"interval"}),a=(0,h.get)(n.style,"leaderLine");if(a&&a.visible){var o=a.style||{};if(n.nextPoints){var s=[["M",n.points[2].x,n.points[2].y],["L",n.nextPoints[0].x,n.nextPoints[0].y]];s=this.parsePath(s),r.addShape("path",{attrs:(0,Rt.__assign)({path:s,stroke:"#d3d3d3",lineDash:[4,2],lineWidth:1},o),name:"leader-line"})}}return i}});var Ey=2,DO=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var i,a,o=e.shape,s=o.getBBox(),l=e.getData(),u=l[na],f=l[this.layer.options.yField],c=(0,h.isArray)(u)?u[1]:u,v=this.options.formatter,g=[].concat(e.getModel().mappingData),C=v?g[0]&&g[0]._origin[Ul]:0,O=v?v(c,(i={},i[Cs]=(a=g[0])===null||a===void 0?void 0:a._origin,i.mappingDatum=g[0],i.mappingDatumIndex=0,i.element=e,i.elementIndex=C,i),C):c,F=(s.minY+s.maxY)/2,G="bottom";f<0?(F=s.maxY+Ey,G="top"):F=s.minY-Ey,t.attr("y",F),t.attr("text",O),t.attr("textBaseline",G)},r}(ff),CG=null;Kn("waterfall",DO);function FO(){return{fill:"#fff",fontSize:12,lineHeight:12,stroke:"rgba(0, 0, 0, 0.45)"}}var RO=function(){function n(r){this.textAttrs={},this.view=r.view,this.fields=r.fields,this.formatter=r.formatter,this.textAttrs=(0,h.mix)(FO(),r.style),this._init()}return n.prototype.draw=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,h.clone)(this.view.getData());this.container=this.view.foregroundGroup.addGroup();var e=this.view.geometries[0].elements.map(function(i){return i.shape});(0,h.each)(e,function(i,a){if(!!i.cfg.origin){var o=i.cfg.origin.data,s=i.getBBox(),l=o[na],u=l;(0,h.isArray)(l)&&(u=l[1]-l[0]),u=u>0?"+"+u:u,o[Cf]&&(u=l[0]-l[1]);var f=u;if(r.formatter){var c=e[a].attr("fill");f=r.formatter(""+u,{_origin:t[a],color:c},a)}var v=r.container.addShape("text",{attrs:(0,Rt.__assign)({text:f,textBaseline:"middle",textAlign:"center",x:(s.minX+s.maxX)/2,y:(s.minY+s.maxY)/2},r.textAttrs),name:"dill-label"});v.getBBox().height>s.height&&v.set("visible",!1)}}),this.view.getCanvas().draw()}},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype._init=function(){var r=this;this.view.on(_i.VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(){r.clear()}),this.view.on(_i.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){r.draw()})},n}(),NO=RO,YO={waterfall:"interval"},GO={interval:"waterfall"},na="$$value$$",Cf="$$total$$",Ul="$$index$$",Ay=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="watarfall",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{legend:{visible:!1,position:"bottom"},label:{visible:!0,adjustPosition:!0},diffLabel:{visible:!0},leaderLine:{visible:!0},showTotal:{visible:!0,label:"\u603B\u8BA1\u503C"},waterfallStyle:{lineWidth:0},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1}})},r.prototype.getOptions=function(t){var e=n.prototype.getOptions.call(this,t);return this.adjustLegendOptions(e),this.adjustMeta(e),e},r.prototype.afterInit=function(){n.prototype.afterInit.call(this);var t=this.options;t.diffLabel&&t.diffLabel.visible?this.diffLabel=new NO({view:this.view,fields:[t.xField,t.yField,na],formatter:t.diffLabel.formatter,style:t.diffLabel.style}):this.diffLabel&&(this.diffLabel.clear(),this.diffLabel=null)},r.prototype.afterRender=function(){n.prototype.afterRender.call(this);var t=this.options;this.view.on("tooltip:change",function(e){for(var i=e.items,a=0;a<i.length;a++){var o=i[a],s=(0,h.get)(o,"data",{});if(o.name=s[t.xField],o.value=s[t.yField],!o.value&&s[Cf]){var l=s[na];o.value=l[0]-l[1]}e.items[a]=o}}),this.renderLabel()},r.prototype.renderLabel=function(){var t=vo(this.view,"interval");this.options.label&&this.options.label.visible&&this.doRenderLabel(t,(0,Rt.__assign)({type:"waterfall"},this.options.label))},r.prototype.geometryParser=function(t,e){return t==="g2"?YO[e]:GO[e]},r.prototype.interaction=function(){this.setConfig("interactions",[{type:"tooltip"},{type:"active-region"}])},r.prototype.addGeometry=function(){var t=this.options,e={type:"interval",position:{fields:[t.xField,na]},shape:{values:["waterfall"]}};e.style=this._parseStyle(),e.color=this._parseColor(),this.waterfall=e,this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.processData=function(t){var e,i=[],a=this.options.xField,o=this.options.yField;if((0,h.map)(t,function(u,f){var c,v=u[o];if(f>0){var g=i[f-1][na];(0,h.isArray)(g)?v=[g[1],u[o]+g[1]]:v=[g,u[o]+g]}i.push((0,Rt.__assign)((0,Rt.__assign)({},u),(c={},c[na]=v,c[Ul]=f,c)))}),this.options.showTotal&&this.options.showTotal.visible){var s=(0,h.map)(t,function(u){return u[o]}),l=(0,h.reduce)(s,function(u,f){return u+f},0);i.push((e={},e[a]=this.options.showTotal.label,e[o]=null,e[na]=[l,0],e[Ul]=i.length,e[Cf]=!0,e))}return i},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),e[na]={},(0,h.has)(t,"yAxis")&&wn(e[na],t.yAxis),this.setConfig("scales",e)},r.prototype.axis=function(){var t=On("axis",{plot:this,dim:"x"}),e=On("axis",{plot:this,dim:"y"}),i={};i[this.options.xField]=t,i[na]=e,this.setConfig("axes",i)},r.prototype.coord=function(){},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,N)},r.prototype.geometryTooltip=function(){this.waterfall.tooltip={};var t=this.options.tooltip;t.fields&&(this.waterfall.tooltip.fields=t.fields),t.formatter&&(this.waterfall.tooltip.callback=t.formatter,t.fields||(this.waterfall.tooltip.fields=[this.options.xField,na]))},r.prototype._parseStyle=function(){var t=this.options.waterfallStyle,e=this.options.leaderLine,i={};return(0,h.isFunction)(t)?i.callback=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return Object.assign({},t.apply(void 0,a),{leaderLine:e})}:i.cfg=(0,Rt.__assign)((0,Rt.__assign)({},t),{leaderLine:e}),i},r.prototype._parseColor=function(){var t=this,e=this.options,i=this.options,a=i.xField,o=i.yField,s={fields:[a,o,na,Ul]};if((0,h.isFunction)(e.color))s.callback=e.color;else{var l="#f4664a",u="#30bf78",f="rgba(0, 0, 0, 0.25)";if((0,h.isString)(e.color))l=u=f=e.color;else if((0,h.isObject)(e.color)){var c=e.color,v=c.rising,g=c.falling,C=c.total;l=v,u=g,f=C}s.callback=function(O,F,G,Y){return Y===t.options.data.length?f||(G[0]>=0?l:u):((0,h.isArray)(G)?G[1]-G[0]:G)>=0?l:u}}return s},r.prototype.adjustLegendOptions=function(t){var e=t.legend;e&&(e.visible=!1)},r.prototype.adjustMeta=function(t){var e=t.meta;if(e){var i=e?e[t.yField]:{};i.alias=i.alias||t.yField,t.meta[na]=i}},r}(nn),zO=Ay;pi("waterfall",Ay);var XO=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="waterfall",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=zO.getDefaultOptions,r}(ni),Ty=XO,VO=function(){function n(r){this.quadrantGroups=[],this.regionData=[],this.lineData=[],this.options=r,this.view=this.options.view,this.init()}return n.prototype.init=function(){var r=this.options,t=r.xBaseline,e=r.yBaseline,i=this.view.getCoordinate(),a=this.view.getScaleByField(this.options.plotOptions.xField),o=this.view.getScaleByField(this.options.plotOptions.yField),s;if(t>a.min&&t<a.max){var l=(t-a.min)/(a.max-a.min);s=[new si(i.start.x,i.end.y,i.getWidth()*l,i.getHeight()),new si(i.start.x+i.getWidth()*l,i.end.y,i.getWidth()*(1-l),i.getHeight())];var u={start:{x:i.start.x+i.getWidth()*l,y:i.end.y},end:{x:i.start.x+i.getWidth()*l,y:i.start.y}};this.lineData.push(u)}else s=[new si(i.start.x,i.end.y,i.getWidth(),i.getHeight())];if(e>o.min&&e<o.max){var l=(e-o.min)/(o.max-o.min),f={start:{x:i.start.x,y:i.start.y-i.getHeight()*l},end:{x:i.end.x,y:i.start.y-i.getHeight()*l}};this.lineData.push(f);var c={name:t<=a.min?"top-right":"top-left",bbox:new si(s[0].minX,s[0].minY,s[0].width,s[0].height*(1-l)),index:t<=a.min?2:0};this.regionData.push(c);var v={name:t<=a.min?"bottom-right":"bottom-left",bbox:new si(s[0].minX,s[0].minY+s[0].height*(1-l),s[0].width,s[0].height*l),index:t<=a.min?3:1};if(this.regionData.push(v),s.length>1){var g={name:"top-right",bbox:new si(s[1].minX,s[1].minY,s[1].width,s[1].height*(1-l)),index:2};this.regionData.push(g);var C={name:"bottom-right",bbox:new si(s[1].minX,s[1].minY+s[1].height*(1-l),s[1].width,s[1].height*l),index:3};this.regionData.push(C)}}else if(s.length===2)if(e<=o.min){var O={name:"top-left",bbox:s[0],index:0};this.regionData.push(O);var g={name:"top-right",bbox:s[1],index:2};this.regionData.push(g)}else{var F={name:"bottom-left",bbox:s[0],index:1};this.regionData.push(F);var C={name:"bottom-right",bbox:s[1],index:3};this.regionData.push(C)}else if(t<=a.min)if(e<=o.min){var g={name:"top-right",bbox:s[0],index:2};this.regionData.push(g)}else{var C={name:"bottom-right",bbox:s[0],index:3};this.regionData.push(C)}else if(e<=o.min){var O={name:"top-left",bbox:s[0],index:0};this.regionData.push(O)}else{var F={name:"bottom-left",bbox:s[0],index:1};this.regionData.push(F)}this.container=this.view.backgroundGroup.addGroup()},n.prototype.render=function(){var r=this;if(this.regionData.length>0){var t=this.getDefaultStyle(),e=this.getRegionStyle(this.regionData);(0,h.each)(this.regionData,function(a){var o=a.index,s=r.container.addGroup(),l=s.addShape("rect",{attrs:(0,Rt.__assign)({x:a.bbox.minX,y:a.bbox.minY,width:a.bbox.width,height:a.bbox.height},e[o]),name:"quadrant"});if(r.options.label&&r.options.label.text){var u=(0,h.deepMix)({},t.label,r.options.label),f=r.getLabelConfig(a,u);s.addShape("text",{attrs:(0,Rt.__assign)({},f),name:"quadrant-label"})}l.set("data",a),r.quadrantGroups.push(s)});var i=(0,h.deepMix)({},t.line,this.options.lineStyle);(0,h.each)(this.lineData,function(a){r.container.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",a.start.x,a.start.y],["L",a.end.x,a.end.y]]},i),name:"quadrant-line"})}),this.view.canvas.draw()}},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove()},n.prototype.getDefaultStyle=function(){return{line:{stroke:"#9ba29a",lineWidth:1},regionStyle:[{fill:"#000000",opacity:.05},{fill:"#ffffff",opacity:0},{fill:"#ffffff",opacity:0},{fill:"#000000",opacity:.05}],label:{position:"outter-inner",offset:10,style:{fontSize:14,fill:"#ccc"}}}},n.prototype.getRegionStyle=function(r){var t=this.getDefaultStyle(),e=t.regionStyle;if(this.options.regionStyle){var i=this.options.regionStyle;(0,h.isArray)(i)?e=e.map(function(a,o){return i.length>o&&i[o]?i[o]:a}):(0,h.isFunction)(i)&&(0,h.each)(r,function(a,o){e[o]=i(a)})}return e},n.prototype.getLabelConfig=function(r,t){var e=r.index,i=0,a=0,o={},s=t.text;(0,h.isFunction)(s)?s=s(r):(0,h.isArray)(s)&&(s=s[e]);var l=t.position,u=l.split("-"),f=r.name.split("-");return f[1]==="left"?(u[0]==="inner"&&(i=r.bbox.maxX-t.offset,o.textAlign="right"),u[0]==="outter"&&(i=r.bbox.minX+t.offset,o.textAlign="left")):f[1]==="right"&&(u[0]==="inner"&&(i=r.bbox.minX+t.offset,o.textAlign="left"),u[0]==="outter"&&(i=r.bbox.maxX-t.offset,o.textAlign="right")),f[0]==="top"?(u[1]==="inner"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom"),u[1]==="outter"&&(a=r.bbox.minY+t.offset,o.textBaseline="top")):f[0]==="bottom"&&(u[1]==="inner"&&(a=r.bbox.minY+t.offset,o.textBaseline="top"),u[1]==="outter"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom")),o=(0,h.deepMix)({},t.style,o),o.lineHeight=o.fontSize,(0,Rt.__assign)({x:i,y:a,text:s},o)},n}(),HO=VO,Oo=d(94454),WO={exp:Oo.regressionExp,linear:Oo.regressionLinear,loess:Oo.regressionLoess,log:Oo.regressionLog,poly:Oo.regressionPoly,pow:Oo.regressionPow,quad:Oo.regressionQuad};function jO(n,r){return Math.sqrt(n*(1-n)/r)*1.96}var UO=function(){function n(r){var t={type:"linear",style:{stroke:"#9ba29a",lineWidth:2,opacity:.5,lineJoin:"round",lineCap:"round"},showConfidence:!1,confidenceStyle:{fill:"#ccc",opacity:.1}};this.options=(0,h.deepMix)({},t,r),this.view=this.options.view,this.init()}return n.prototype.init=function(){var r=this.options.plotOptions,t=r.xField,e=r.yField,i=r.data,a=WO[this.options.type]().x(function(o){return o[t]}).y(function(o){return o[e]});this.data=this.processData(a(i)),this.container=this.view.backgroundGroup.addGroup()},n.prototype.render=function(){var r=this.view.getScaleByField(this.options.plotOptions.xField),t=this.view.getScaleByField(this.options.plotOptions.yField),e=this.view.getCoordinate(),i=this.data.trendlineData,a=(0,Qr.getScale)("linear"),o=this.adjustScale(r,i,"x"),s=new a({min:o.min,max:o.max}),l=this.adjustScale(t,i,"y"),u=new a({min:l.min,max:l.max});if(this.options.showConfidence){var f=this.getConfidencePath(s,u,e);this.container.addShape("path",{attrs:(0,Rt.__assign)({path:f},this.options.confidenceStyle),name:"confidence"})}var c=this.getTrendlinePoints(s,u,e),v=[[0,0],[1,1]],g=Qh(c,!1,v);this.shape=this.container.addShape("path",{attrs:(0,Rt.__assign)({path:g},this.options.style),name:"trendline"})},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.destroy()},n.prototype.processData=function(r){var t=[],e=[];return(0,h.each)(r,function(i){t.push({x:i[0],y:i[1]});var a=jO(r.rSquared,i[1]);e.push({x:i[0],y0:i[1]-a,y1:i[1]+a})}),{trendlineData:t,confidenceData:e}},n.prototype.getTrendlinePoints=function(r,t,e){var i=[];return(0,h.each)(this.data.trendlineData,function(a){var o=r.scale(a.x),s=t.scale(a.y),l=e.start.x+e.width*o,u=e.start.y-e.height*s;i.push({x:l,y:u})}),i},n.prototype.getConfidencePath=function(r,t,e){var i=[],a=[],o=[];(0,h.each)(this.data.confidenceData,function(c){var v=r.scale(c.x),g=t.scale(c.y0),C=t.scale(c.y1),O=e.start.x+e.width*v,F=e.start.y-e.height*g,G=e.start.y-e.height*C;i.push({x:O,y:F}),a.push({x:O,y:G})});for(var s=0;s<i.length;s++){var l=s===0?"M":"L",u=i[s];!isNaN(u.x)&&!isNaN(u.y)&&o.push([l,u.x,u.y])}for(var f=a.length-1;f>0;f--){var u=a[f];!isNaN(u.x)&&!isNaN(u.y)&&o.push(["L",u.x,u.y])}return o},n.prototype.adjustScale=function(r,t,e){var i=r.min,a=r.max,o=this.options.plotOptions,s=o.data,l=o.xField,u=o.yField,f=e==="x"?l:u,c=(0,h.minBy)(s,f)[f],v=(0,h.maxBy)(s,f)[f],g=(i-c)/(v-c),C=(a-v)/(v-c),O=(0,h.minBy)(t,e)[e],F=(0,h.maxBy)(t,e)[e];return{min:O+g*(F-O),max:F+C*(F-O)}},n}(),ZO=UO,KO={point:"point",trendline:"trendline",confidence:"confidence",quadrant:"quadrant",quadrantLabel:"quadrant-label",quadrantLine:"quadrant-line"},$O=An(KO);(0,h.assign)(Si,$O);var QO=function(n){var r=n.stroke||"#000";return{stroke:r}},JO=function(n){var r=n.stroke||"#000",t=n.lineWidth||2;return{stroke:r,lineWidth:t}},qO=function(n){var r=n.fillOpacity||n.opacity||.3;return{fillOpacity:r}};$n("scatter",{pointStyle:{normal:{},active:QO,selected:JO,inactive:qO}});var tB={scatter:"point"},eB={point:"point"},_y=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="scatter",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{pointSize:4,pointStyle:{lineWidth:1,strokeOpacity:1,fillOpacity:.95,stroke:"#fff"},xAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},yAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},tooltip:{visible:!0,shared:null,showTitle:!1,showMarkers:!1,showCrosshairs:!1},label:{visible:!1},shape:"circle"})},r.prototype.afterRender=function(){n.prototype.afterRender.call(this),this.quadrant&&this.quadrant.destroy(),this.trendline&&this.trendline.destroy(),this.options.quadrant&&this.options.quadrant.visible&&(this.quadrant=new HO((0,Rt.__assign)({view:this.view,plotOptions:this.options},this.options.quadrant)),this.quadrant.render()),this.options.trendline&&this.options.trendline.visible&&(this.trendline=new ZO((0,Rt.__assign)({view:this.view,plotOptions:this.options},this.options.trendline)),this.trendline.render())},r.prototype.destroy=function(){this.quadrant&&(this.quadrant.destroy(),this.quadrant=null),this.trendline&&(this.trendline.destroy(),this.trendline=null),n.prototype.destroy.call(this)},r.prototype.isValidLinearValue=function(t){return(0,h.isNil)(t)?!1:!Number.isNaN(Number(t))},r.prototype.processData=function(t){var e=this,i=this.options,a=i.xField,o=i.yField,s=(0,h.get)(this.options,["xAxis","type"],"linear"),l=(0,h.get)(this.options,["yAxis","type"],"linear");if(s&&l){var u=t.filter(function(f){return!(s==="linear"&&!e.isValidLinearValue(f[a])||l==="linear"&&!e.isValidLinearValue(f[o]))}).map(function(f){var c;return(0,Rt.__assign)((0,Rt.__assign)({},f),(c={},c[a]=s==="linear"?Number(f[a]):String(f[a]),c[o]=l==="linear"?Number(f[o]):String(f[o]),c))});return u}return t},r.prototype.geometryParser=function(t,e){return t==="g2"?tB[e]:eB[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),e[t.yField]={},(0,h.has)(t,"yAxis")&&wn(e[t.yField],t.yAxis);var i=(0,h.find)(t.interactions,function(o){return o.type==="timeline"});if(i&&(0,h.get)(i,"cfg.key")){var a=i.cfg.key;e[a]?e[a].key=!0:e[a]={key:!0}}this.setConfig("scales",e),n.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=ln("point","circle",{plot:this});if(this.points=t,this.options.tooltip&&this.options.tooltip.visible){var e=this.options.tooltip,i=e.showTitle,a=e.titleField;this.extractTooltip(),this.setConfig("tooltip",(0,Rt.__assign)({showTitle:i,title:i?a:void 0},this.options.tooltip))}this.options.label&&this.label(),this.setConfig("geometry",t)},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.points&&(this.points.label=!1);return}var e=On("label",(0,Rt.__assign)((0,Rt.__assign)({fields:t.label.field?[t.label.field]:[t.yField]},t.label),{plot:this}));this.points&&(this.points.label=e)},r.prototype.animation=function(){n.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.points.animate=!1)},r.prototype.parseEvents=function(t){n.prototype.parseEvents.call(this,t||z)},r.prototype.extractTooltip=function(){this.points.tooltip={};var t=this.options.tooltip;t.fields?this.points.tooltip.fields=t.fields:this.points.tooltip.fields=[this.options.xField,this.options.yField],t.formatter&&(this.points.tooltip.callback=t.formatter,this.options.colorField&&this.points.tooltip.fields.push(this.options.colorField))},r}(nn),Py=_y;pi("scatter",_y);var rB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="scatter",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Py.getDefaultOptions,r}(ni),Ly=rB,iB=d(74236);Ai("point","bubble-point",{draw:function(n,r){var t=(0,iB.iV)(this,n,r,"circle",!1);if(!n.style.stroke){var e=t.attr("fill");t.attr("stroke",e)}return t},getMarker:function(n){var r=n.color;return{symbol:"circle",style:{r:4.5,fill:r}}}});var nB=function(n){var r=n.stroke||"#000",t=n.fillOpacity||n.opacity||.95;return{stroke:r,fillOpacity:t}},aB=function(n){var r=n.stroke||"#000",t=n.lineWidth||2;return{stroke:r,lineWidth:t}},oB=function(n){var r=n.fillOpacity||n.opacity||.3;return{fillOpacity:r}};$n("bubble",{pointStyle:{normal:{},active:nB,selected:aB,inactive:oB}});var Iy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="bubble",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{pointSize:[2,32],pointStyle:{stroke:null,strokeOpacity:1,fillOpacity:.5},label:{position:"middle",style:{stroke:"#fff",lineWidth:2}},shape:"bubble-point"})},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.legend=function(){var t;n.prototype.legend.call(this),!(this.options.legend&&this.options.legend.visible===!1)&&this.setConfig("legends",(t={},t[this.options.sizeField]=!1,t))},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,z)},r}(Py),sB=Iy;pi("bubble",Iy);var lB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="bubble",n.prototype.createLayers.call(this,e)},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=sB.getDefaultOptions,r}(ni),ky=lB,uB={bullet:"interval",bulletTarget:"bullet-target"},hB=An(uB);(0,h.assign)(Si,hB);var fB=function(){function n(r,t){this.view=r,this.cfg=t,this._init()}return n.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.middleGroup.addGroup(),this.container.set("name","rectGroups"),this.container.setZIndex(-100);for(var r=this.getGeometry(),t=(0,h.map)(r==null?void 0:r.elements,function(o){return o.shape}),e=0;e<this.cfg.ranges.length;e+=1){var i=t[e].getBBox(),a=i.width/t[e].get("origin").data[this.cfg.yField];this.drawRect(i,this.cfg.ranges[e]||[0,1],a)}this.view.canvas.draw()}},n.prototype.drawRect=function(r,t,e){for(var i=this.cfg,a=i.rangeColors,o=r.minX,s=r.minY-r.height*(i.rangeSize-1)/2,l=1;l<t.length;l+=1){var u=(t[l]-t[l-1])*i.rangeMax*e;this.container.addShape("rect",{name:"bullet-rect",attrs:{width:u,height:r.height*i.rangeSize,x:o,y:s,fill:a[(l-1)%a.length],fillOpacity:.25}}).set("zIndex",-1),o+=u}if(i.axis&&i.axis.visible){var f=i.rangeMax/(i.axis.tickCount-1),c=new si(r.x,s,o,r.height*i.rangeSize);this.drawBulletTicks(c,f,e)}},n.prototype.drawBulletTicks=function(r,t,e){for(var i=this.cfg,a=i.axis.style,o=i.axis.tickCount,s=i.axis.position,l=(0,h.get)(a,"lineHeight",0)-a.fontSize/2,u=0;u<o;u+=1){var f=r.minX+t*u*e,c=""+t*u;if(i.axis.formatter&&(c=i.axis.formatter(c,u)),this.container.addShape("text",{name:"tick",attrs:(0,Rt.__assign)({x:f,y:s==="before"?r.minY-l:r.maxY+l,text:""+c},a)}),i.axis.tickLine&&i.axis.tickLine.visible){var v=i.axis.tickLine;u>0&&u!==o-1&&this.container.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",f,r.minY],["L",f,r.maxY]]},v)}).set("zIndex",-1)}}},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove()},n.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="interval"})},n}(),cB=fB,vB=function(){function n(r,t){this.view=r,this.cfg=t,this._init()}return n.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.foregroundGroup.addGroup(),this.container.set("name","targetGroups");for(var r=(0,h.map)(this.getGeometry().elements,function(a){return a.shape}),t=0;t<this.cfg.targets.length;t+=1){var e=r[t].getBBox(),i=e.width/r[t].get("origin").data[this.cfg.yField];this.drawTarget(e,this.cfg.targets[t],i)}this.view.canvas.draw()}},n.prototype.drawTarget=function(r,t,e){var i=this,a=this.cfg,o=a.markerColors;t.forEach(function(s,l){var u=a.markerStyle;i.container.addShape("rect",{name:"bullet-target",attrs:(0,Rt.__assign)((0,Rt.__assign)({width:u.width,height:r.height*a.markerSize-u.width/2,x:r.minX+s*e,y:r.minY-r.height*(a.markerSize-1)/2},u),{fill:o[l%o.length]||u.fill})})})},n.prototype.clear=function(){this.container&&this.container.clear()},n.prototype.destroy=function(){this.container&&this.container.remove()},n.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},n.prototype.getGeometry=function(){return(0,h.find)(this.view.geometries,function(r){return r.type==="interval"})},n}(),dB=vB,pB=function(n){var r=n.opacity||1;return{opacity:r*.5,lineWidth:0}},gB=function(n){var r=n.opacity||1;return{opacity:r*.5}};$n("bullet",{columnStyle:{normal:{},active:pB,disable:gB,selected:{}}});var yB={bullet:"interval"},mB={interval:"bullet"},xB="$$stackField$$",bB="$$xField$$",wB="$$yField$$",Oy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="bullet",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{data:[],stackField:xB,xField:bB,yField:wB,rangeColors:["rgba(91, 143, 249, 0.45)"],measureSize:12,rangeSize:2,markerSize:2,markerColors:[],markerStyle:{width:2,fill:"#5B8FF9",lineWidth:0},axis:{visible:!1,position:"before",tickCount:6,formatter:function(t,e){return""+e},style:{fill:"rgba(0, 0, 0, 0.25)",textBaseline:"middle",textAlign:"center",fontSize:12,lineHeight:16},tickLine:{visible:!0,lineWidth:1,stroke:"#FFF",lineDash:[4,2]}},xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},label:{visible:!0}},yAxis:{visible:!1,nice:!1},tooltip:{visible:!1,trigger:"item",crosshairs:!1},label:{visible:!0,offset:4,style:{fill:"rgba(0, 0, 0, 0.45)",stroke:"#fff",lineWidth:1}}})},r.prototype.afterRender=function(){n.prototype.afterRender.call(this),this.view.removeInteraction("legend-filter")},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={},(0,h.has)(t,"yAxis")&&wn(e[t.yField],t.yAxis),e[t.xField]={type:"cat"},(0,h.has)(t,"xAxis")&&wn(e[t.xField],t.xAxis),this.setConfig("scales",e),n.prototype.scale.call(this)},r.prototype.getOptions=function(t){var e=n.prototype.getOptions.call(this,t);return this.adjustOptions(e),e},r.prototype.afterInit=function(){n.prototype.afterInit.call(this);var t=this.options,e=t.data.map(function(a){return a.ranges}),i=t.data.map(function(a){return a.targets});this.bulletRect=new cB(this.view,{ranges:e,rangeMax:t.rangeMax,yField:t.yField,rangeSize:t.rangeSize,rangeColors:t.rangeColors||[],axis:t.axis}),this.bulletTarget=new dB(this.view,{targets:i,yField:t.yField,markerSize:t.markerSize,markerColors:t.markerColors||[],markerStyle:t.markerStyle})},r.prototype.geometryParser=function(t,e){return t==="g2"?yB[e]:mB[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.legend=function(){var t=this.options,e=t.markerStyle.fill,i=t.measureColors||this.theme.colors,a=[{name:"\u5B9E\u9645\u8FDB\u5EA6",value:"\u5B9E\u9645\u8FDB\u5EA6",marker:{symbol:"square",style:{fill:i[0]}}},{name:"\u76EE\u6807\u503C",value:"\u76EE\u6807\u503C",marker:{symbol:"line",style:{stroke:e,lineWidth:2}}}],o=(0,Rt.__assign)({custom:!0,position:"bottom",items:a},t.legend);this.setConfig("legends",o)},r.prototype.addGeometry=function(){var t=this.options,e=ln("interval","main",{positionFields:[t.xField,t.yField],plot:this});e.adjust=[{type:"stack"}],t.label&&(e.label=this.extractLabel()),this.bullet=e,this.setConfig("geometry",e)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,W)},r.prototype.extractLabel=function(){var t=this.options,e=(0,h.deepMix)({},t.label);if(e.visible===!1)return!1;var i=On("label",(0,Rt.__assign)({plot:this,labelType:"barLabel",fields:[t.yField]},e));return i},r.prototype.adjustOptions=function(t){t.barSize=t.measureSize||12,this.adjustYAxisOptions(t)},r.prototype.adjustYAxisOptions=function(t){var e=[];t.data.forEach(function(i){return e.push(i.measures.reduce(function(a,o){return a+o},0))}),e.push(t.rangeMax),t.yAxis.max=Math.max.apply([],e)},r.prototype.processData=function(t){var e=this.options,i=[];return t.forEach(function(a,o){for(var s,l=0;l<a.measures.length;l+=1){var u=a.measures[l],f=a.title||""+o;i.push((s={},s[e.xField]=f,s[e.yField]=u,s[e.stackField]=""+l,s))}}),i},r}(nn),SB=Oy;pi("bullet",Oy);var CB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="bullet",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=SB.getDefaultOptions,r}(ni),By=CB,qo="$$day$$",ts="$$week$$",Dy="$$date$$",MG="$$is_month_center$$",es="YYYY-MM-DD",MB=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],EB=["S","M","T","W","T","F","S"],Ps=864e5;function AB(n){var r=(0,Rt.__spreadArrays)(n).sort(function(t,e){return t.getTime()-e.getTime()});return[po.default.format((0,h.head)(r),es),po.default.format((0,h.last)(r),es)]}function EG(n){var r=n||new Date;return[fecha.format(new Date(r.getFullYear(),0,1),FORMATTER),fecha.format(new Date(r.getFullYear(),11,30),FORMATTER)]}function TB(n){return n.getMonth()!==Zl(new Date(n),7*Ps).getMonth()}function _B(n){return n.getMonth()!==Zl(new Date(n),Ps).getMonth()}function Fy(n){var r=new Date(n.getFullYear(),0,1);return Math.ceil(((n.getTime()-r.getTime())/Ps+r.getDay()+1)/7)}function PB(n){return n.getDay()}function Zl(n,r){return n.setMilliseconds(n.getMilliseconds()+r),n}function Ry(n){var r,t=n[0],e=n[1],i=po.default.parse(t,es),a=po.default.parse(e,es);return i>a&&(r=[i,a],a=r[0],i=r[1]),[i,a]}function LB(n,r,t){for(var e=[],i=Ry(r),a=i[0],o=i[1],s=new Date(a),l=function(){var u,f=po.default.format(s,es),c=(0,h.find)(n,function(v){return v[t]===f});e.push((0,Rt.__assign)((u={},u[qo]=PB(s),u[ts]=""+Fy(s),u[t]=f,u[Dy]=new Date(s),u),c)),Zl(s,Ps)};s<=o;)l();return e}function IB(n){var r=Ry(n),t=r[0],e=r[1],i=new Map;function a(l){var u=l.getMonth(),f=Fy(l);i.has(u)||i.set(u,[]),i.get(u).push(f)}for(var o=new Date(t);o<=e;)a(o),Zl(o,Ps*7);e<o&&a(e);var s={};return i.forEach(function(l,u){var f=Math.ceil(((0,h.head)(l)+(0,h.last)(l))/2);s[f]=u}),s}var kB={rect:"polygon"},OB=An(kB);(0,h.assign)(Si,OB);var Ny=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="calendar",t}return r.getDefaultOptions=function(){var t;return(0,h.deepMix)({},n.getDefaultOptions.call(this),{xAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},yAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},legend:{visible:!1},meta:(t={},t[qo]={type:"cat",alias:"Day",values:[0,1,2,3,4,5,6]},t[ts]={type:"cat",alias:"Month"},t),tooltip:{visible:!0,showTitle:!0,showCrosshairs:!1,showMarkers:!1,title:"date"}})},r.prototype.processData=function(t){var e=this.options.dateField,i=this.options.dateRange;if((0,h.isNil)(i)){var a=(0,h.map)(t,function(o){return po.default.parse(""+o[e],es)});i=AB(a)}return LB(t,i,e)},r.prototype.addGeometry=function(){var t=this.options,e=t.valueField,i=t.colors,a=t.tooltip,o={type:"polygon",position:{fields:[ts,qo]},shape:{values:["calendar-polygon"]},color:{fields:[e],values:i},label:this.extractLabel()};a&&(a.fields||a.formatter)&&this.geometryTooltip(o),this.setConfig("geometry",o)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[ts,qo]))},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var i=this.options.valueField;return On("label",(0,Rt.__assign)({plot:this,fields:[i],position:"top",offset:0},e))},r.prototype.coord=function(){var t={type:"rect",cfg:{},actions:[["reflect","y"]]};this.setConfig("coordinate",t)},r.prototype.geometryParser=function(){return""},r.prototype.axis=function(){var t=On("axis",{plot:this,dim:"x"}),e=On("axis",{plot:this,dim:"y"}),i={};i[ts]=t,i[qo]=e,this.setConfig("axes",i)},r.prototype.scale=function(){n.prototype.scale.call(this);var t=IB(this.options.dateRange),e=this.config.scales,i=this.options,a=i.weeks,o=a===void 0?EB:a,s=i.months,l=s===void 0?MB:s,u=e[ts],f=e[qo];u.formatter=function(C){var O=t[C];return O!==void 0?l[O]:""},f.formatter=function(C){return o[C]||""};var c=this.options,v=c.xAxis,g=c.yAxis;u.alias=(0,h.get)(v,["title","text"],u.alias),f.alias=(0,h.get)(g,["title","text"],f.alias),this.setConfig("scales",e)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,X)},r}(nn),BB=Ny;pi("calendar",Ny),Ai("polygon","calendar-polygon",{draw:function(n,r){if(!(0,h.isEmpty)(n.points)){var t=n.points,e=[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]];e=this.parsePath(e);var i=(0,Rt.__assign)((0,Rt.__assign)({stroke:"#fff",lineWidth:1,fill:n.color},n.style),{path:e}),a=r.addShape("path",{attrs:i}),o=n.data[Dy];if(TB(o)){var s=[["M",t[2].x,t[2].y],["L",t[3].x,t[3].y]];r.addShape("path",{zIndex:1,attrs:{path:this.parsePath(s),lineWidth:1,stroke:"#404040"}}),_B(o)&&r.addShape("path",{zIndex:1,attrs:{path:this.parsePath([["M",t[1].x,t[1].y],["L",t[2].x,t[2].y]]),lineWidth:1,stroke:"#404040"}})}return r.sort(),a}}});var DB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="calendar",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=BB.getDefaultOptions,r}(ni),FB=DB,Yy=function(){function n(r){this.uid=r}return n.prototype.setOption=function(r,t){this.type=r,this.options=t,this.axis=t.axis,this.pivot=t.pivot},n.prototype.render=function(){var r=this;Ai("point","gauge",{draw:function(t,e){var i,a,o;this.gauge={},this.gauge.options=r.options,this.gauge.axis=r.axis,this.gauge.pivot=r.pivot,this.gauge.type=r.type;var s=this.gauge,l=this.gauge.type,u=t.points[0],f=this.parsePoint({x:0,y:0}),c=this.parsePoint({x:u.x||0,y:1});s.center=f,s.group=e;var v={x:f.x-c.x,y:f.y-c.y};this.gauge.ringRadius=Math.sqrt(v.x*v.x+v.y*v.y);var g=this.getAngleRange(),C=g.starAngle,O=g.endAngle,F=u.x*(O-C)+C;switch(l){case"meterGauge":this.drawBarGauge(F),this.gauge.axis.visible&&((i=this.gauge.axis.tickLine)===null||i===void 0?void 0:i.visible)&&this.drawInSideAxis();break;case"fanGauge":this.drawGauge(F),this.gauge.axis.visible&&((a=this.gauge.axis.tickLine)===null||a===void 0?void 0:a.visible)&&this.drawOutSideAxis();break;case"standardGauge":default:this.drawGauge(F),this.gauge.axis.visible&&((o=this.gauge.axis.tickLine)===null||o===void 0?void 0:o.visible)&&this.drawAxis();break}this.gauge.pivot.visible&&this.drawPivot(t,e)},drawGauge:function(t){var e=this.gauge.options.range;this.drawBottomRing(),e&&e.length?this.drawRangeColor():this.drawCurrentRing(t)},drawRangeColor:function(){for(var t=this.gauge.options,e=t.min,i=t.max,a=t.range,o=t.color,s=t.rangeStyle,l=o||Rn().colors,u=this.getAngleRange(),f=u.starAngle,c=u.endAngle,v={min:e,max:i,starAngle:f,endAngle:c},g=0;g<a.length;g++){var C=this.valueToAngle(a[g],v),O=this.valueToAngle(a[g+1],v);if(O>=C){var F=this.getPath(C,O),G=(0,h.deepMix)({fill:l[g]},s);this.drawRing(F,G)}}},drawBottomRing:function(){var t=this.getAngleRange(),e=t.starAngle,i=t.endAngle,a=this.gauge.options.rangeBackgroundStyle,o=this.getPath(e,i);this.drawRing(o,a)},drawCurrentRing:function(t){var e=this.getAngleRange().starAngle,i=this.gauge.rangeStyle,a=this.getPath(e,t);this.drawRing(a,i)},drawInSideAxis:function(){for(var t=this.gauge.options,e=t.min,i=t.max,a=t.axis,o=this.getAngleRange(),s=o.starAngle,l=o.endAngle,u={min:e,max:i,starAngle:s,endAngle:l},f=(i-e)/a.tickCount,c=0;c<a.tickCount;c++){var v=e+c*f,g=this.valueToAngle(v+f/2,u);this.drawRect(g,{length:a.tickLine.length,style:a.tickLine.style})}},drawAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,i=e.min,a=e.max,o=this.getAngleRange(),s=o.starAngle,l=o.endAngle,u={min:i,max:a,starAngle:s,endAngle:l},f=(a-i)/(t.tickCount-1),c=0;c<t.tickCount;c++){var v=i+c*f,g=this.valueToAngle(v,u),C=(0,h.clone)(t.tickLine.style);c%5!=0&&(C.lineWidth=C.lineWidth/2),this.drawRect(g,{length:c%5==0?t.tickLine.length:t.tickLine.length/2,style:C})}},drawOutSideAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,i=e.min,a=e.max,o=this.getAngleRange(),s=o.starAngle,l=o.endAngle,u={min:i,max:a,starAngle:s,endAngle:l},f=(a-i)/(t.tickCount-1),c=0;c<t.tickCount;c++){var v=i+c*f,g=this.valueToAngle(v,u);this.drawRect(g,{length:t.tickLine.length,style:t.tickLine.style})}},drawBarGauge:function(t){for(var e=this,i=this.gauge.options,a=i.min,o=i.max,s=i.range,l=i.color,u=i.rangeStyle,f=i.rangeBackgroundStyle,c=l||Rn().colors,v=this.getAngleRange(),g=v.starAngle,C=v.endAngle,O={min:a,max:o,starAngle:g,endAngle:C},F=(C-g)/(50-1),G=F/3,Y=0;Y<50;Y++){var $=g+Y*F,q=this.getPath($-G/2,$+G-G/2),ut=f;if(s&&s.length){var kt=s.map(function(Ft){return e.valueToAngle(Ft,O)}),Nt=TE(kt,$),Wt=Math.min(Nt,s.length-1);ut=(0,h.deepMix)({},{fill:c[Wt-1]},u)||f}else ut=t>=$?(0,h.deepMix)({},{fill:l},u):f;this.drawRing(q,ut)}},getAngleRange:function(){var t=this.gauge.options.angle,e=90-(360-t)*.5,i=(270-90-e)*Math.PI/180,a=(270+90+e)*Math.PI/180;return{starAngle:i,endAngle:a}},valueToAngle:function(t,e){var i=e.min,a=e.max,o=e.starAngle,s=e.endAngle;if(t===a)return s;if(t===i)return o;var l=(t-i)/(a-i);a===i&&(l=1);var u=l*(s-o)+o;return u=Math.max(u,o),u=Math.min(u,s),u},drawRing:function(t,e){this.gauge.group.addShape("path",{attrs:(0,h.deepMix)({},{path:t},e)})},drawRect:function(t,e){var i=this.gauge.axis,a=(0,Rt.__assign)((0,Rt.__assign)({},i),e),o=a.offset,s=a.length,l=this.gauge.center,u;o<0?u=this.gauge.ringRadius-this.gauge.options.rangeSize+o:u=this.gauge.ringRadius+o;var f=u*Math.cos(t)+l.x,c=u*Math.sin(t)+l.y,v=(u+s)*Math.cos(t)+l.x,g=(u+s)*Math.sin(t)+l.y,C=this.gauge.group.addShape("line",{attrs:(0,h.deepMix)({},{x1:f,y1:c,x2:v,y2:g},e.style)});C.set("name","axis-tickLine")},getPath:function(t,e){var i=this.gauge.center,a=this.gauge.ringRadius,o=this.gauge.options.rangeSize,s=a*Math.cos(t)+i.x,l=a*Math.sin(t)+i.y,u=(a-o)*Math.cos(t)+i.x,f=(a-o)*Math.sin(t)+i.y,c=a*Math.cos(e)+i.x,v=a*Math.sin(e)+i.y,g=(a-o)*Math.cos(e)+i.x,C=(a-o)*Math.sin(e)+i.y,O=Math.abs(t-e)>Math.PI?1:0;return[["M",s,l],["A",a,a,0,O,1,c,v],["L",g,C],["A",a-o,a-o,0,O,0,u,f],["Z"]]},drawPivot:function(t){var e=this.getAngleRange(),i=e.starAngle,a=e.endAngle,o=this.gauge.options,s=o.radius,l=o.rangeSize,u=this.gauge.pivot,f=u.thickness,c=u.thickness/2.5,v=this.gauge.group,g=t.points[0],C=this.parsePoint({x:0,y:0}),O=g.x*(a-i)+i,F=(this.gauge.ringRadius-l)*s*Math.cos(O)+this.gauge.center.x,G=(this.gauge.ringRadius-l)*s*Math.sin(O)+this.gauge.center.y,Y={x:F,y:G};if(u.base.visible&&v.addShape("circle",{attrs:(0,h.deepMix)({},{x:C.x,y:C.y,r:u.base.size?u.base.size/2:f*2.2},u.base.style)}),u.pointer.visible){var $={x:C.x-Y.x,y:C.y-Y.y},q=Math.sqrt($.x*$.x+$.y*$.y);$.x*=1/q,$.y*=1/q;var ut=-Math.PI/2,kt=Math.cos(ut)*$.x-Math.sin(ut)*$.y,Nt=Math.sin(ut)*$.x+Math.cos(ut)*$.y,Wt=Math.PI/2,Ft=Math.cos(Wt)*$.x-Math.sin(Wt)*$.y,ee=Math.sin(Wt)*$.x+Math.cos(Wt)*$.y,ve=[["M",Y.x+kt*c,Y.y+Nt*c],["L",C.x+kt*f,C.y+Nt*f],["L",C.x+Ft*f,C.y+ee*f],["L",Y.x+Ft*c,Y.y+ee*c],["Z"]];v.addShape("path",{attrs:(0,h.deepMix)({},{path:ve},u.pointer.style)}),v.addShape("circle",{attrs:{x:Y.x,y:Y.y,r:c,fill:u.pointer.style.fill}}),v.addShape("circle",{attrs:{x:C.x,y:C.y,r:f,fill:u.pointer.style.fill}})}u.pin.visible&&v.addShape("circle",{attrs:(0,h.deepMix)({},{x:C.x,y:C.y,r:c/1.2},u.pin.style)})}})},n}(),RB={range:"point",statistic:"annotation-text"},NB=An(RB);(0,h.assign)(Si,NB);var Gy=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.type="gauge",e}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{startAngle:-7/6,endAngle:1/6,rangeBackgroundStyle:{fill:"#f0f0f0"},rangeSize:24,statistic:{position:["50%","80%"]},axis:{visible:!0,offset:-10,tickCount:21,subTickCount:4,tickLine:{visible:!0,length:5,style:{stroke:"#aaa",lineWidth:2}},label:{visible:!0,offset:8,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}},pivot:{visible:!0,thickness:6,pin:{visible:!0,size:2,style:{fill:"#2E364B"}},base:{visible:!0,style:{fill:"#EEEEEE"}},pointer:{visible:!0,style:{fill:"#CFCFCF"}}}})},r.prototype.init=function(){var t=this.options,e=t.value,i=t.range,a=(i||[]).map(function(C){return+C}).sort(function(C,O){return C-O}),o=this.options,s=o.min,l=s===void 0?a[0]:s,u=o.max,f=u===void 0?a[a.length-1]:u,c=o.format,v=c===void 0?function(C){return""+C}:c,g=v(e);this.options.data=[{value:e||0}],this.options.valueText=g,this.options.min=l,this.options.max=f,this.options.format=v,this.initG2Shape(),n.prototype.init.call(this)},r.prototype.initG2Shape=function(){this.gaugeShape=new Yy((0,h.uniqueId)()),this.gaugeShape.setOption(this.type,(0,h.deepMix)({},this.options,{radius:.6,angle:240,textPosition:"100%"})),this.gaugeShape.render()},r.prototype.geometryParser=function(){return"gauge"},r.prototype.scale=function(){var t=this.options,e=t.min,i=t.max,a=t.format,o={value:{}};wn(o.value,{min:e,max:i,minLimit:e,maxLimit:i,nice:!0,formatter:a,tickInterval:20}),this.setConfig("scales",o),n.prototype.scale.call(this)},r.prototype.coord=function(){var t={type:"polar",cfg:{radius:1,startAngle:this.options.startAngle*Math.PI,endAngle:this.options.endAngle*Math.PI}};this.setConfig("coordinate",t)},r.prototype.axis=function(){var t=this.options.axis,e={value:{line:null,grid:null,tickLine:null}},i;t.offset<0?i=t.offset-this.options.rangeSize-t.tickLine.length-t.label.offset:i=t.offset+t.tickLine.length+t.label.offset,t.label.visible?e.value.label={offset:i,textStyle:t.label.style,autoRotate:!0}:e.value.label={style:{opacity:0}},e["1"]=!1,e.value=t.visible?e.value:!1,this.setConfig("axes",e)},r.prototype.addGeometry=function(){var t=this.options.pivot.pointer.style.fill||this.theme.defaultColor,e={type:"point",position:{fields:["value","1"]},shape:{values:["gauge"]},color:{values:[t]}};this.setConfig("geometry",e)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var i=this.renderStatistic();e.push(i)}this.setConfig("annotations",e)},r.prototype.renderStatistic=function(){var t=Math.max(this.options.width,this.options.height)/20,e=this.options.statistic,i={type:"text",content:e.text,top:!0,position:e.position,style:{fill:e.color,fontSize:e.size?e.size:t*1.2,textAlign:"center",textBaseline:"middle"}};return i},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,U)},r}(nn),Mf=Gy;pi("gauge",Gy);var YB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="gauge",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Mf.getDefaultOptions,r}(ni),zy=YB,Xy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="fanGauge",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{rangeColor:"#F6445A",rangeSize:70,axis:{visible:!0,offset:5,tickCount:10,subTickCount:4,tickLine:{visible:!0,length:3,style:{stroke:"#aaa",lineWidth:3}},label:{visible:!0,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}}})},r.prototype.initG2Shape=function(){this.gaugeShape=new Yy((0,h.uniqueId)()),this.gaugeShape.setOption(this.type,(0,h.deepMix)({},this.options,{radius:1,angle:120,textPosition:"125%",bottomRatio:3.5})),this.gaugeShape.render()},r.prototype.axis=function(){var t={value:!1,1:!1};this.setConfig("axes",t)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var i=this.renderStatistic();e.push(i)}var a=this.renderSideText(),o=e.concat(a);this.setConfig("annotations",o)},r.prototype.renderSideText=function(){var t=this.options,e=t.max,i=t.min,a=t.format,o=t.rangeSize,s=t.axis,l=12;return[i,e].map(function(u,f){return{type:"text",top:!0,position:["50%","50%"],content:a(u),style:(0,h.deepMix)({},s.label.style,{textAlign:"center"}),offsetX:f?o:-o,offsetY:l}})},r}(Mf),GB=Xy;pi("fanGauge",Xy);var zB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="fanGauge",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=GB.getDefaultOptions,r}(ni),Vy=zB,Hy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="meterGauge",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{axis:{visible:!0,offset:-10,tickCount:25,subTickCount:4,tickLine:{visible:!0,length:2,style:{stroke:"#aaa",lineWidth:1}}}})},r}(Mf),XB=Hy;pi("meterGauge",Hy);var VB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="meterGauge",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=XB.getDefaultOptions,r}(ni),Wy=VB,HB=d(85239),Qa=d.n(HB),AG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="donut",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "Donut" instead of "Ring" which was not recommended.')},r.getDefaultOptions=Cy.getDefaultOptions,r}(ni),TG=null,_G=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="groupedColumn",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "GroupedColumn" instead of "GroupColumn" which was not recommended.')},r.getDefaultOptions=vf.getDefaultOptions,r}(ni),PG=null,LG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="groupedBar",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "GroupedBar" instead of "GroupBar" which was not recommended.')},r.getDefaultOptions=ig.getDefaultOptions,r}(ni),IG=null,kG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="percentStackedArea",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "PercentStackedArea" instead of "PercentageStackArea" which was not recommended.')},r.getDefaultOptions=Cg.getDefaultOptions,r}(ni),OG=null,BG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="percentStackedBar",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "PercentStackedBar" instead of "PercentageStackBar" which was not recommended.')},r.getDefaultOptions=og.getDefaultOptions,r}(ni),DG=null,FG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="percentStackedColumn",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "PercentStackedColumn" instead of "PercentageStackColumn" which was not recommended.')},r.getDefaultOptions=Gg.getDefaultOptions,r}(ni),RG=null,NG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedArea",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "StackedArea" instead of "StackArea" which was not recommended.')},r.getDefaultOptions=hf.getDefaultOptions,r}(ni),YG=null,GG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedBar",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "StackedBar" instead of "StackBar" which was not recommended.')},r.getDefaultOptions=of.getDefaultOptions,r}(ni),zG=null,XG=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedColumn",n.prototype.createLayers.call(this,e),Qa()(!1,'Please use "StackedColumn" instead of "StackColumn" which was not recommended.')},r.getDefaultOptions=Gl.getDefaultOptions,r}(ni),VG=null,WB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{title:{visible:!1},description:{visible:!1},padding:[0,0,0,0],legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},tooltip:{visible:!1}})},r.prototype.coord=function(){},r.prototype.addGeometry=function(){},r.prototype.annotation=function(){var t=this,e=this.options,i=[],a={line:{style:{lineWidth:1,stroke:"#66d6a8"}}};(0,h.each)(e.guideLine,function(o){var s=On("guideLine",{plot:t,cfg:(0,h.deepMix)({},a,o)});i.push(s)}),this.setConfig("annotations",i)},r}(nn),Kl=WB,jB=function(){function n(r){(0,h.assign)(this,r),this.init()}return n.prototype.destroy=function(){this.shape&&this.shape.destroy()},n.prototype.update=function(r,t,e){var i={};if((0,h.assign)(this,r),this.coord=this.view.geometries[0].coordinate,r.value){var a=this.coord.convert({x:0,y:this.value}).x,o=[1,0,0,0,1,0,a,0,1];i.matrix=o}if(r.style){var s=this.shape,l=s.attrs,u=(0,h.deepMix)({},l,r.style);i=(0,h.deepMix)({},u,i)}this.shape.stopAnimate(),this.shape.animate(i,t,e)},n.prototype.init=function(){this.coord=this.view.geometries[0].coordinate,this.container=this.view.foregroundGroup.addGroup();var r=this.coord.convert({x:0,y:this.value}).x,t=this.coord.center.y-this.progressSize/2-2,e=this.coord.center.y+this.progressSize/2+2,i=(0,h.deepMix)({},{stroke:"grey",lineWidth:1},this.style);this.shape=this.container.addShape("path",{attrs:(0,Rt.__assign)({path:[["M",0,t],["L",0,e]]},i),name:"progress-marker"}),this.shape.move(r,0),this.canvas.draw()},n}(),jy=jB,UB={progress:"interval"},ZB=An(UB);(0,h.assign)(Si,ZB);var KB={progress:"interval"},$B={interval:"progress"},Uy=["#55A6F3","#E8EDF3"],Zy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="progress",t.isEntered=!1,t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barSize:t.size?t.size:this.getSize(),barStyle:t.progressStyle,color:this.parseColorProps(t)||Uy};t=(0,h.mix)(t,e)},r.prototype.init=function(){this.processProps(),n.prototype.init.call(this)},r.prototype.beforeInit=function(){var t=this.options.percent;if(!(0,h.isNumber)(t))throw new Error("Percent value is required, and the type of percent must be Number.")},r.prototype.update=function(t){var e=this.options;if((0,h.hasKey)(t,"percent")&&(e.percent=t.percent,this.changeData(this.processData())),t.style&&(this.styleUpdateAnimation(t.style),this.updateColorConfigByStyle(t.style)),t.color){var i=void 0;(0,h.isArray)(t.color)?(this.options.color=t.color,i=[{fill:t.color[0]},{fill:t.color[1]}]):(this.options.color[0]=t.color,i={fill:t.color}),this.styleUpdateAnimation(i)}t.marker&&(this.updateMarkers(t.marker),this.options.marker=t.marker)},r.prototype.destroy=function(){this.markers&&this.markers.length>0&&((0,h.each)(this.markers,function(t){t.destroy()}),this.markers=[]),n.prototype.destroy.call(this)},r.prototype.afterRender=function(){var t=this;this.options.marker&&!this.markers&&(this.markers=[],(0,h.each)(this.options.marker,function(s){var l=(0,h.mix)({canvas:t.canvas,view:t.view,progressSize:t.options.barSize},s),u=new jy(l);t.markers.push(u)}));var e=this.view.geometries[0].container,i=e.getBBox(),a=e.addShape("rect",{attrs:{width:i.width,height:i.height,x:i.minX,y:i.minY,fill:"rgba(0,0,0,0)"}});this.canvas.draw(),a.on("mouseenter",function(s){t.isEntered=!0,t.view.emit("progress:mouseenter",s)}),a.on("mouseleave",function(s){t.isEntered=!1,t.view.emit("progress:mouseleave",s)});var o=this.canvas.get("container");o.addEventListener("mouseleave",function(s){t.isEntered&&(t.view.emit("progress:mouseleave",s),t.isEntered=!1)})},r.prototype.geometryParser=function(t,e){return t==="g2"?KB[e]:$B[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.addGeometry=function(){var t=this.options,e=ln("interval","main",{positionFields:[t.yField,t.xField],plot:this});e.adjust=[{type:"stack"}],(0,h.has)(t,"animation")&&(e.animate=t.animation),this.setConfig("geometry",e)},r.prototype.parseEvents=function(t){t?n.prototype.parseEvents.call(this,t):n.prototype.parseEvents.call(this,et)},r.prototype.parseColorProps=function(t){var e;if(t.color)if((0,h.isFunction)(t.color)?e=t.color(t.percent):e=t.color,(0,h.isString)(e)){var i=(0,h.clone)(Uy);return i[0]=e,i}else return e;return t.color},r.prototype.processData=function(){var t=this.options,e=[{type:"current",value:t.percent},{type:"rest",value:1-t.percent}];return e},r.prototype.updateMarkers=function(t){var e=t.length,i=this.getUpdateAnimationOptions();if((0,h.each)(this.markers,function(u,f){f>e-1?u.destroy():u.update(t[f],i.duration,i.easing)}),this.markers.length<e)for(var a=this.markers.length,o=a;o<e;o++){var s=(0,h.deepMix)({},{canvas:this.canvas,view:this.view,progressSize:this.options.barSize},t[o]),l=new jy(s);this.markers.push(l)}},r.prototype.getSize=function(){var t=this.height;return t>=50?10:4},r.prototype.styleUpdateAnimation=function(t){var e=this.getUpdateAnimationOptions(),i=e.duration,a=e.easing,o=[],s=this.view,l=s.geometries;(0,h.each)(l,function(u){if(u.type==="interval"){var f=u.elements;(0,h.each)(f,function(c){o.push.apply(o,c.shape)})}}),(0,h.isArray)(t)?(0,h.each)(t,function(u,f){o[f].animate(u,i,a)}):o[0].animate(t,i,a)},r.prototype.getUpdateAnimationOptions=function(){var t=450,e="easeQuadInOut",i=this.options.animation;return i&&i.update&&(i.update.duration&&(t=i.update.duration),i.update.easing&&(e=i.update.easing)),{duration:t,easing:e}},r.prototype.updateColorConfigByStyle=function(t){var e=this;(0,h.isArray)(t)?(0,h.each)(t,function(i,a){i.fill&&(e.options.color[a]=i.fill)}):t.fill&&(this.options.color[0]=t.fill)},r}(Kl),Ky=Zy;pi("progress",Zy);var QB=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="progress",n.prototype.createLayers.call(this,e)},r.prototype.update=function(t,e){var i=this.layers[0];i.update(t,e)},r.getDefaultOptions=Ky.getDefaultOptions,r}(ni),$y=QB,JB={ringProgress:"interval"},qB=An(JB);(0,h.assign)(Si,qB);var tD=["#55A6F3","#E8EDF3"],Qy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="ringProgrsss",t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barStyle:t.progressStyle,color:this.parseColorProps(t)||tD};t=(0,h.mix)(t,e)},r.prototype.coord=function(){var t={type:"theta",cfg:{radius:1,innerRadius:this.getThickness(this.options.size)}};this.setConfig("coordinate",t)},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=this.options;this.ring=ln("interval","main",{positionFields:[t.yField,t.xField],plot:this}),this.ring.adjust=[{type:"stack"}],this.setConfig("geometry",this.ring)},r.prototype.animation=function(){this.ring.animate={appear:{duration:1e3}}},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,Q)},r.prototype.getThickness=function(t){var e=this.width,i=this.height,a=Math.min(e,i);return t?1-t/a:a>=60?1-20/a:1-10/a},r}(Ky),eD=Qy;pi("ringProgress",Qy);var rD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="ringProgress",n.prototype.createLayers.call(this,e)},r.prototype.update=function(t){var e=this.layers[0];e.update(t)},r.getDefaultOptions=eD.getDefaultOptions,r}(ni),Jy=rD,iD={onColumnClick:"interval:click",onColumnDblclick:"interval:dblclick",onColumnMousemove:"interval:mousemove",onColumnMousedown:"interval:mousedown",onColumnMouseup:"interval:mouseup",onColumnMouseenter:"interval:mouseenter",onColumnMouseleave:"interval:mouseleave",onColumnContextmenu:"interval:contextmenu"};(0,h.assign)(Si,iD);var nD=.6,aD={column:"interval"},oD={interval:"column"},qy=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="tinyColumn",t}return r.prototype.init=function(){this.processProps(),n.prototype.init.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?aD[e]:oD[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},this.setConfig("scales",e)},r.prototype.addGeometry=function(){var t=this.options,e=ln("interval","main",{positionFields:[t.xField,t.yField],plot:this});this.setConfig("geometry",e)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,ct)},r.prototype.processProps=function(){var t={padding:[0,0,0,0],columnSize:this.getSize()};this.options=(0,h.mix)(this.options,t)},r.prototype.getSize=function(){var t=this.options,e=this.getColumnNum(t.data,t.xField),i=this.width;return i/e*nD},r.prototype.getColumnNum=function(t,e){var i=[];return(0,h.each)(t,function(a){var o=a[e];i.indexOf(o)<0&&i.push(o)}),i.length},r}(Kl),sD=qy;pi("tinyColumn",qy);var lD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="tinyColumn",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=sD.getDefaultOptions,r}(ni),t0=lD,uD={onAreaClick:"area:click",onAreaDblclick:"area:dblclick",onAreaMousemove:"area:mousemove",onAreaMousedown:"area:mousedown",onAreaMouseup:"area:mouseup",onAreaMouseenter:"area:mouseenter",onAreaMouseleave:"area:mouseleave",onAreaContextmenu:"area:contextmenu",onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,h.assign)(Si,uD);var hD={area:"area",line:"line"},e0=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="tinyArea",t}return r.prototype.geometryParser=function(t,e){return hD[e]},r.prototype.addGeometry=function(){this.area=ln("area","mini",{plot:this}),this.setConfig("geometry",this.area),this.line=ln("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,Lt)},r}(Kl),fD=e0;pi("tinyArea",e0);var cD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="tinyArea",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=fD.getDefaultOptions,r}(ni),r0=cD,vD={onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,h.assign)(Si,vD);var dD={line:"line"},i0=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="tinyLine",t}return r.prototype.geometryParser=function(t,e){return dD[e]},r.prototype.addGeometry=function(){this.line=ln("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){n.prototype.parseEvents.call(this,_t)},r}(Kl),pD=i0;pi("tinyLine",i0);var gD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="tinyLine",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=pD.getDefaultOptions,r}(ni),n0=gD,Ef=5,yD=function(n){(0,Rt.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.geomLayers=[],e.legends=[],e.requiredField=["xField","yField"],e.options=e.getOptions(t),e.initialOptions=(0,h.deepMix)({},t),e.themeController=new Kh,e}return r.getDefaultOptions=function(){return{title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"}}},r.prototype.getOptions=function(t){var e=this.options||{},i=n.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t);return(0,h.deepMix)({},i,a,e,t)},r.prototype.checkData=function(){for(var t=this,e,i,a=this.options,o=a.data,s=a.xField,l=a.yField,u=0;u<this.requiredField.length;u++){var f=this.requiredField[u];if(!(0,h.hasKey)(this.options,f))return!1}return!(!(0,h.isArray)(l)||l.length<2||!(0,h.isArray)(o)||o.length===0||((e=o[0])===null||e===void 0?void 0:e.length)===0&&((i=o[1])===null||i===void 0?void 0:i.length)===0||((0,h.each)(o,function(c,v){if(!(0,h.isArray)(c)||c.length===0){var g=t.getMockData(v);o[v]=g}}),!o[0][0][s]||!o[1][0][s]))},r.prototype.init=function(){n.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.drawTitle(),this.drawDescription()},r.prototype.updateConfig=function(t){this.doDestroy(),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){t&&t.length<2||!(0,h.isArray)(t[0])||(0,h.each)(this.geomLayers,function(e,i){e.changeData(t[i])})},r.prototype.changeDataByIndex=function(t,e){if(!(0,h.isArray)(t[0])){var i=this.geomLayers[e];i.changeData(t)}},r.prototype.doDestroy=function(){(0,h.each)(this.geomLayers,function(t){t.doDestroy()}),this.geomLayers=[],(0,h.each)(this.legends,function(t){t.destroy()}),this.legends=[]},r.prototype.createLayer=function(t,e,i){var a=this.getViewRange(),o=new t((0,Rt.__assign)({canvas:this.canvas,container:this.container,x:a.minX,y:a.minY,width:a.width,height:a.height,data:e},i));return this.geomLayers.push(o),o},r.prototype.getLeftYAxisMax=function(){var t=this.getScaleData(0),e=this.getScaleData(1);return t.min==0&&t.max===0?Math.max(e.max,0):t.max},r.prototype.yAxis=function(t){var e=this.getScaleData(0),i=this.options.yAxis,a=t===0?i.leftConfig:i.rightConfig,o=this.colors[t],s=(0,h.clone)(a),l={title:"stroke",line:"stroke",label:"fill",tickLine:"stroke"};a.visible&&a.colorMapping&&(0,h.each)(s,function(f,c){if(!(0,h.isString)(f)&&(0,h.hasKey)(l,c)){var v=l[c];f.style||(f.style={}),f.style[v]=o}}),a.visible||(s.title.visible=!1,s.tickLine.visible=!1,s.label.visible=!1,s.line.visible=!1,s.visible=!0);var u=this.getYAxisGlobalConfig();return t===0&&e.max===0&&e.min===0&&(s.max=this.getLeftYAxisMax()),(0,h.deepMix)({},u,s)},r.prototype.getTicks=function(){for(var t=this.options.yAxis,e=this.getScaleData(0),i=(0,Qr.getScale)("linear"),a=new i((0,h.deepMix)({},{min:0,max:this.getLeftYAxisMax(),nice:!0,values:e.values},{tickCount:t.tickCount})),o=a.ticks.length,s=t.max?a.max:this.getScaleData(1).max,l=s/(o-1),u=[],f=0;f<o;f++){var c=f*l;Number.isInteger(c)||(c=parseFloat(c.toFixed(1))),u.push(c)}return u},r.prototype.getScaleData=function(t){var e=this.options,i=e.data,a=e.yField,o=e.yAxis,s=[];(0,h.each)(i[t],function(f){s.push(f[a[t]])}),s.sort(function(f,c){return f-c});var l=s[0],u=o.max?o.max:s[s.length-1];return{min:l,max:u,values:s}},r.prototype.getDataByXField=function(t,e){var i=this.options,a=i.data,o=i.xField,s=a[e];return s.filter(function(l){return l[o]===t})},r.prototype.getYAxisGlobalConfig=function(){var t=this.options.yAxis,e=t.min,i=t.max,a=t.tickCount;return{min:e,max:i,tickCount:a}},r.prototype.adjustLayout=function(){var t=this,e,i,a=Rn().bleeding;(0,h.isArray)(a)&&(0,h.each)(a,function(g,C){typeof a[C]=="function"&&(a[C]=a[C](t.options))});var o=this.getViewRange(),s=this.transfromPadding(this.geomLayers[0].options.padding),l=this.transfromPadding(this.geomLayers[1].options.padding),u=0,f,c;((e=this.options.legend)===null||e===void 0?void 0:e.visible)&&(f=this.legends[0].getLayoutBBox(),c=this.legends[1].getLayoutBBox(),u=f.height+Ef*2);var v=s.map(function(g,C){return C===0?Math.max.apply(null,[g+u,l[C]]):Math.max.apply(null,[g,l[C]])});this.geomLayers[0].updateConfig({padding:v}),this.geomLayers[0].render(),this.geomLayers[1].updateConfig({padding:v}),this.geomLayers[1].render(),((i=this.options.legend)===null||i===void 0?void 0:i.visible)&&(this.legends[0].setLocation({x:a[3],y:o.minY+Ef}),this.legends[1].setLocation({x:o.maxX-a[1]-c.width,y:o.minY+Ef}))},r.prototype.transfromPadding=function(t){return typeof t=="string"||typeof t=="number"?[Number(t)]:t},r.prototype.legendFilter=function(t){var e=this,i=this.legends[t],a=i.get("group");a.on("click",function(){var o=i.get("items")[0];o.unchecked?(i.setItemState(o,"unchecked",!1),e.showLayer(t)):(i.setItemState(o,"unchecked",!0),e.hideLayer(t))})},r.prototype.hideLayer=function(t){var e=this.geomLayers[t],i=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,i);o&&o.set("visible",!1),this.setGeometryVisibility(a,!1),this.canvas.draw()},r.prototype.showLayer=function(t){var e=this.geomLayers[t],i=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,i);o&&o.set("visible",!0),this.setGeometryVisibility(a,!0),this.canvas.draw()},r.prototype.setGeometryVisibility=function(t,e){(0,h.each)(t.geometries,function(i){var a=i.container,o=i.labelsContainer;a&&a.set("visible",e),o&&o.set("visible",e)})},r.prototype.getYAxisContainer=function(t,e){var i,a=t.controllers.filter(function(l){return(0,h.hasKey)(l,"axisContainer")})[0];if(a){var o=a,s=o.axisContainer.get("children");(0,h.each)(s,function(l){var u=l.get("component").get("field");u===e&&(i=l)})}return i},r.prototype.getUnCheckedValue=function(){var t=[];return(0,h.each)(this.legends,function(e){var i=e.getItemsByState("unchecked");(0,h.each)(i,function(a){t.push(a.name)})}),t},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),Wo(t.title)){var i=this.width,a=this.theme,o=new Sl({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,h.mix)(a.title,t.title.style),wrapperWidth:i-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:Wo(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),Wo(t.description)){var i=this.width,a=this.theme,o=0;if(this.title){var s=this.title.getBBox();o+=s.minY+s.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var l=new Sl({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,h.mix)(a.description,t.description.style),wrapperWidth:i-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=l}},r.prototype.getViewRange=function(){this.layerBBox||(this.layerBBox=new si(this.x,this.y,this.width,this.height));var t=this.layerBBox.minX,e=this.layerBBox.maxX,i=this.layerBBox.minY,a=this.layerBBox.maxY,o=[this.title,this.description];return(0,h.each)(o,function(s){if(s){var l=s.position,u=s.getBBox(),f=u.minX,c=u.maxX,v=u.minY,g=u.maxY;g>=i&&g<=a&&l==="top"&&(i=g),v>=i&&v<=a&&l==="bottom"&&(a=v),c>t&&c<=e&&l==="left"&&(t=c),f>=t&&c<=e&&l==="right"&&(e=f)}}),new si(t,i,e-t,a-i)},r.prototype.getMockData=function(t){var e=this.options,i=e.xField,a=e.yField,o={};return o[i]="null",o[a[t]]=0,[o]},r}(wl),a0=yD,o0={lineSize:2,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},s0={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,offset:12}},l0=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dualLine",t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{legend:{visible:!0},yAxis:{leftConfig:s0,rightConfig:s0},lineConfigs:[(0,h.deepMix)({},o0,{color:"#5B8FF9"}),(0,h.deepMix)({},o0,{color:"#e76c5e"})]})},r.prototype.init=function(){var t=this;if(n.prototype.init.call(this),!!this.checkData()){var e=this.options,i=e.data,a=e.meta,o=e.xField,s=e.yField,l=e.xAxis,u=e.tooltip,f=e.lineConfigs,c=e.legend,v=e.events,g=e.customMeta;this.colors=[f[0].color,f[1].color];var C=this.getYAxisGlobalConfig(),O=this.createLayer(As,i[0],(0,Rt.__assign)({meta:a,xField:o,yField:s[0],xAxis:{visible:!1},yAxis:(0,h.deepMix)({},C,{grid:{visible:!1},nice:!0},this.yAxis(0)),tooltip:{visible:!1},events:v},f[0]));O.render();var F={};F[s[1]]={ticks:this.getTicks()};var G=this.createLayer(As,i[1],(0,Rt.__assign)({xField:o,yField:s[1],meta:g?a:(0,h.deepMix)({},a,F),serieField:s[1],xAxis:l,yAxis:(0,h.deepMix)({},C,{position:"right",nice:!1},this.yAxis(1)),tooltip:(0,h.deepMix)({},{showMarkers:!1,custom:{onChange:function(Y,$){t.tooltip(Y,$)}}},u),events:v},f[1]));G.render(),c.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.tooltip=function(t,e){var i=this.getUnCheckedValue();if(i.length===this.colors.length){t.style.display="none";return}else t.style.display="block";var a=this.options,o=a.yField,s=a.legend,l=(0,h.clone)(e.items[0]),u=this.getDataByXField(e.title,0)[0];u&&(0,h.findIndex)(e.items,function(f){return f.name===o[0]})<0&&e.items.push((0,Rt.__assign)((0,Rt.__assign)({},l),{mappingData:(0,h.deepMix)({},l.mappingData,{_origin:u}),data:u,name:o[0],value:u[o[0]],color:this.colors[0]})),s.visible&&(0,h.each)(this.legends,function(f,c){var v=f.get("items")[0];if(v.unchecked){var g=c===0?1:0;e.items.splice(g,1)}})},r.prototype.customLegend=function(){var t=this,e=this.options,i=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a;(0,h.each)(this.geomLayers,function(u,f){var c=(0,h.deepMix)({},{symbol:"circle",style:{r:4,fill:o[f]}},l.marker),v=[{name:i[f],unchecked:!1,marker:c}],g=new gi.Legend.Category({id:t.type,container:s,x:0,y:0,items:v,updateAutoRender:!0,itemBackground:null,itemName:l.text});g.init(),g.render(),t.legends.push(g)}),(0,h.each)(this.geomLayers,function(u,f){t.legendFilter(f)})},r}(a0),mD=l0;pi("dualLine",l0);var xD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="dualLine",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=mD.getDefaultOptions,r}(ni),u0=xD,bD={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},wD={color:"#5B8FF9"},h0={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},f0=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="columnLine",t.legends=[],t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{yAxis:{leftConfig:h0,rightConfig:h0},lineConfig:bD,columnConfig:wD,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,i=this,a=i.options,o=i.initialOptions;if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var s=Rn(),l=s.colors,u=s.colors_20,f=this.getValueBySeriesField(),c=f.length>l.length?u:l,v=[];(0,h.each)(f,function(g,C){v.push(c[C+1])}),a.lineConfig.color=v}},r.prototype.init=function(){if(n.prototype.init.call(this),!!this.checkData()){var t=this.options,e=t.data,i=t.meta,a=t.xField,o=t.yField,s=t.lineSeriesField,l=t.legend,u=t.lineConfig,f=t.columnConfig,c=t.events,v=t.customMeta;this.colors=[f.color,u.color],this.drawColumn();var g={};g[o[1]]={ticks:this.getTicks()};var C=this.createLayer(As,e[1],(0,Rt.__assign)({xField:a,yField:o[1],seriesField:s,meta:v?i:(0,h.deepMix)({},i,g),xAxis:{visible:!1},yAxis:(0,h.deepMix)({},{position:"right",grid:{visible:!1},nice:!0},this.yAxis(1)),tooltip:{visible:!1},legend:{visible:!1},events:c},u));C.render(),l.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.drawColumn=function(){var t=this,e=this.options,i=e.data,a=e.xField,o=e.yField,s=e.xAxis,l=e.tooltip,u=e.columnConfig,f=e.meta,c=e.events,v=this.createLayer(Qo,i[0],(0,Rt.__assign)({xField:a,yField:o[0],meta:f,xAxis:s,yAxis:(0,h.deepMix)({},{grid:{visible:!0},nice:!0},this.yAxis(0)),tooltip:(0,h.deepMix)({},{showMarkers:!1,custom:{onChange:function(g,C){t.tooltip(g,C)}}},l),events:c},u));v.render()},r.prototype.tooltip=function(t,e){var i=this,a=this.options,o=a.xField,s=a.yField,l=a.tooltip,u=(0,h.clone)(e.items[0]),f=this.getDataByXField(e.title,1),c=(0,h.get)(l,"formatter");if(f&&(0,h.each)(f,function(F,G){var Y=i.geomLayers[1].options.seriesField,$=Y?F[Y]:s[1],q=c?c(F[o],F[s[1]],F[Y]):{name:$,value:F[s[1]]};e.items.push((0,Rt.__assign)((0,Rt.__assign)((0,Rt.__assign)((0,Rt.__assign)({},u),{mappingData:(0,h.deepMix)({},u.mappingData,{_origin:f}),data:F}),q),{color:(0,h.isArray)(i.colors[1])?i.colors[1][G]:i.colors[1]}))}),this.options.legend.visible){var v=this.getUnCheckedValue(),g=this.legends[0].get("items").length+this.legends[1].get("items").length;if(v.length===g){t.style.display="none";return}else t.style.display="block";var C=[],O=[];(0,h.each)(e.items,function(F){var G=F.name;!(0,h.contains)(C,G)&&!(0,h.contains)(v,G)&&(C.push(G),O.push(F))}),(0,h.each)(e.items,function(F,G){G<O.length?e.items[G]=O[G]:e.items.pop()})}},r.prototype.customLegend=function(){var t=this,e=this.options,i=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a,u=["square","circle"];(0,h.each)(this.geomLayers,function(f,c){var v;if(f.options.seriesField){var g=t.getValueBySeriesField();v=t.createNormalLegend(g,u[c],o[c],l,s)}else v=t.createSingleLegend(i[c],u[c],o[c],l,s);t.legends.push(v)}),(0,h.each)(this.geomLayers,function(f,c){f.options.seriesField?t.multipleLegendFilter(c,f.options.seriesField):t.legendFilter(c)})},r.prototype.createSingleLegend=function(t,e,i,a,o){var s=(0,h.deepMix)({},{symbol:e,style:{r:4,fill:i}},a.marker),l=[{name:t,unchecked:!1,marker:s}],u=new gi.Legend.Category({id:this.type,container:o,x:0,y:0,items:l,updateAutoRender:!0,itemBackground:null,itemName:a.text});return u.init(),u.render(),u},r.prototype.createNormalLegend=function(t,e,i,a,o){var s=[];(0,h.each)(t,function(u,f){s.push({name:u,unchecked:!1,marker:{symbol:e,style:{r:4,fill:i[f]}}})});var l=new gi.Legend.Category({id:this.type,container:o,x:0,y:0,items:s,updateAutoRender:!0,itemBackground:null,itemName:a.text,offsetX:0});return l.init(),l.render(),l},r.prototype.multipleLegendFilter=function(t,e){var i=this,a=this.legends[t],o=[],s=a.get("group"),l=!1;s.on("click",function(u){var f=i.geomLayers[t].view,c=u.target.get("delegateObject").item;c.unchecked?(l===!0&&(i.showLayer(t),l=!1),(0,h.pull)(o,c.name),f.filter(c.value,function(v){return!(0,h.contains)(o,v)}),f.render(),a.setItemState(c,"unchecked",!1)):(a.setItemState(c,"unchecked",!0),o.push(c.name),o.length===i.legends[t].get("items").length?(i.hideLayer(t),l=!0):(f.filter(e,function(v){return!(0,h.contains)(o,v)}),f.render())),i.canvas.draw()})},r.prototype.getValueBySeriesField=function(){var t=this.options,e=t.lineSeriesField,i=t.data,a=i[1],o=[];return(0,h.each)(a,function(s){var l=s[e];(0,h.contains)(o,l)||o.push(l)}),o},r}(a0),Af=f0;pi("columnLine",f0);var SD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="columnLine",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=Af.getDefaultOptions,r}(ni),c0=SD,CD={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},MD={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},v0={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},d0=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnGroupField"],t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,h.deepMix)({},v0,{colorMapping:!1}),rightConfig:v0},lineConfig:CD,columnConfig:MD,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,i=this,a=i.options,o=i.initialOptions,s=this.getValueByGroupField();if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var l=Rn(),u=l.colors,f=l.colors_20,c=this.getValueBySeriesField(),v=c.length>u.length?f:u,g=[],C=s.length;(0,h.each)(c,function(F,G){g.push(v[G+C])}),a.lineConfig.color=g}var O=this.options.columnConfig.color;this.options.columnConfig.color=O.slice(0,s.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,i=e.data,a=e.xField,o=e.yField,s=e.columnGroupField,l=e.xAxis,u=e.tooltip,f=e.columnConfig,c=e.events,v=this.createLayer(vf,i[0],(0,Rt.__assign)({xField:a,yField:o[0],groupField:s,xAxis:l,yAxis:(0,h.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,h.deepMix)({},u,{showMarkers:!1,custom:{onChange:function(g,C){t.tooltip(g,C)}}}),events:c},f));v.render()},r.prototype.customLegend=function(){var t=this,e=this.options,i=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a,u=["square","circle"];(0,h.each)(this.geomLayers,function(f,c){var v;if(f.options.seriesField){var g=t.getValueBySeriesField();v=t.createNormalLegend(g,u[c],o[c],l,s)}else if(f.options.groupField){var g=t.getValueByGroupField();v=t.createNormalLegend(g,u[c],o[c],l,s)}else v=t.createSingleLegend(i[c],u[c],o[c],l,s);t.legends.push(v)}),(0,h.each)(this.geomLayers,function(f,c){f.options.seriesField?t.multipleLegendFilter(c,f.options.seriesField):f.options.groupField?t.multipleLegendFilter(c,f.options.groupField):t.legendFilter(c)})},r.prototype.getValueByGroupField=function(){var t=this.options,e=t.columnGroupField,i=t.data,a=i[0],o=[];return(0,h.each)(a,function(s){var l=s[e];(0,h.contains)(o,l)||o.push(l)}),o},r.prototype.getMockData=function(t){var e=this.options,i=e.xField,a=e.yField,o=e.columnGroupField,s={};s[i]="null_1",s[a[t]]=0,s[o]="null_a";var l={};return l[i]="null_1",l[a[t]]=1,l[o]="null_a",[s,l]},r}(Af),ED=d0;pi("groupedColumnLine",d0);var AD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="groupedColumnLine",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=ED.getDefaultOptions,r}(ni),p0=AD,TD={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},_D={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},g0={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},y0=function(n){(0,Rt.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnStackField"],t}return r.getDefaultOptions=function(){return(0,h.deepMix)({},n.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,h.deepMix)({},g0,{colorMapping:!1}),rightConfig:g0},lineConfig:TD,columnConfig:_D,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,i=this.getValueByStackField(),a=this,o=a.options,s=a.initialOptions;if(o.lineSeriesField&&(o.yAxis.rightConfig.colorMapping=!1,((t=s.lineConfig)===null||t===void 0?void 0:t.lineSize)||(o.lineConfig.lineSize=3),!((e=s.lineConfig)===null||e===void 0?void 0:e.color))){var l=Rn(),u=l.colors,f=l.colors_20,c=this.getValueBySeriesField(),v=c.length>u.length?f:u,g=[],C=i.length;(0,h.each)(c,function(F,G){g.push(v[G+C])}),o.lineConfig.color=g}var O=this.options.columnConfig.color;this.options.columnConfig.color=O.slice(0,i.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,i=e.data,a=e.xField,o=e.yField,s=e.columnStackField,l=e.xAxis,u=e.tooltip,f=e.columnConfig,c=e.events,v=this.createLayer(Gl,i[0],(0,Rt.__assign)({xField:a,yField:o[0],stackField:s,xAxis:l,yAxis:(0,h.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,h.deepMix)({},u,{showMarkers:!1,custom:{onChange:function(g,C){t.tooltip(g,C)}}}),events:c},f));v.render()},r.prototype.customLegend=function(){var t=this,e=this.options,i=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a,u=["square","circle"];(0,h.each)(this.geomLayers,function(f,c){var v;if(f.options.seriesField){var g=t.getValueBySeriesField();v=t.createNormalLegend(g,u[c],o[c],l,s)}else if(f.options.stackField){var g=t.getValueByStackField();v=t.createNormalLegend(g,u[c],o[c],l,s)}else v=t.createSingleLegend(i[c],u[c],o[c],l,s);t.legends.push(v)}),(0,h.each)(this.geomLayers,function(f,c){f.options.seriesField?t.multipleLegendFilter(c,f.options.seriesField):f.options.stackField?t.multipleLegendFilter(c,f.options.stackField):t.legendFilter(c)})},r.prototype.getValueByStackField=function(){var t=this.options,e=t.columnStackField,i=t.data,a=i[0],o=[];return(0,h.each)(a,function(s){var l=s[e];(0,h.contains)(o,l)||o.push(l)}),o},r.prototype.getUnCheckedValue=function(){var t=[];return(0,h.each)(this.legends,function(e){var i=e.getItemsByState("unchecked");(0,h.each)(i,function(a){t.push(a.name)})}),t},r.prototype.getMockData=function(t){var e=this.options,i=e.xField,a=e.yField,o=e.columnStackField,s={};s[i]="null_1",s[a[t]]=0,s[o]="null_a";var l={};return l[i]="null_1",l[a[t]]=1,l[o]="null_a",[s,l]},r}(Af),PD=y0;pi("stackedColumnLine",y0);var LD=function(n){(0,Rt.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,h.deepMix)({},t);e.type="stackedColumnLine",n.prototype.createLayers.call(this,e)},r.getDefaultOptions=PD.getDefaultOptions,r}(ni),m0=LD,ID=function(r){return r.charAt(0).toUpperCase()+r.slice(1).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},HG=function(r,t){return JSON.stringify(r)===JSON.stringify(t)},kD=function(r,t){return new Set(r.concat(t)).size===r.length},OD=function(r,t){var e={}.toString;return e.call(r)==="[object "+t+"]"},BD=function(r){if(!r)return r;var t={};for(var e in r)t[e]=r[e];return t},Ls={sameArray:kD,camelCase:ID,isType:OD,clone:BD},DD=d(5672),FD=function(r){var t=document.createElement("div");return t.className="g2-tooltip eva-charts-tootip",DD.render(r,t),t},Tf=FD;function x0(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,e)}return t}function RD(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?x0(Object(t),!0).forEach(function(e){ND(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x0(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function ND(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function yi(n,r){var t=(0,H.useRef)(),e=(0,H.useRef)(null),i=function(){var l,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",f=arguments.length>1?arguments[1]:void 0;return(l=t.current)===null||l===void 0?void 0:l.canvas.cfg.el.toDataURL(u,f)},a=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"image/png",f=arguments.length>2?arguments[2]:void 0;try{var c;l&&l.indexOf(".")===-1&&(l="".concat(l,".png"));var v=l;if(!v){var g,C=r;v="".concat((C==null||(g=C.title)===null||g===void 0?void 0:g.text)||(n==null?void 0:n.name),".png")}var O=(c=t.current)===null||c===void 0?void 0:c.canvas.cfg.el.toDataURL(u,f),F=document.createElement("a");F.href=O,F.download=v,document.body.appendChild(F),F.click(),document.body.removeChild(F),F=null}catch(G){console.log(G)}},o=function(){var l,u,f,c,v;if((l=r.statistic)===null||l===void 0?void 0:l.htmlContent){var g=r.statistic.htmlContent;r.statistic.htmlContent=function(){var O=g.apply(void 0,arguments);return Ls.isType(O,"String")||Ls.isType(O,"Number")||Ls.isType(O,"HTMLDivElement")?O:Tf(O)}}if(((u=r.tooltip)===null||u===void 0||(f=u.custom)===null||f===void 0?void 0:f.container)&&(r.tooltip.custom.container=Tf(r.tooltip.custom.container)),(c=r.tooltip)===null||c===void 0||(v=c.custom)===null||v===void 0?void 0:v.customContent){var C=r.tooltip.custom.customContent;r.tooltip.custom.customContent=function(O,F){var G=C(O,F)||"";return Ls.isType(G,"HTMLDivElement")?G:Tf(G)}}};return(0,H.useEffect)(function(){t.current&&(r.onlyChangeData?t.current.changeData((r==null?void 0:r.data)||[]):(o(),t.current.updateConfig(r),t.current.render()))},[(r==null?void 0:r.memoData)?r.memoData:JSON.stringify(r)]),(0,H.useEffect)(function(){if(!e.current)return function(){return null};o();var s=new n(e.current,RD({},r));return s.__proto__.toDataURL=function(l,u){return i(l,u)},s.__proto__.downloadImage=function(l,u,f){return a(l,u,f)},s.render(),t.current=Ls.clone(s),function(){return s.destroy()}},[]),{chart:t,container:e,toDataURL:i,downloadImage:a}}var YD=H.createContext({});function $l(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$l=function(t){return typeof t}:$l=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(n)}function GD(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function b0(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function zD(n,r,t){return r&&b0(n.prototype,r),t&&b0(n,t),n}function XD(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&_f(n,r)}function _f(n,r){return _f=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e},_f(n,r)}function VD(n){var r=jD();return function(){var e=Ql(n),i;if(r){var a=Ql(this).constructor;i=Reflect.construct(e,arguments,a)}else i=e.apply(this,arguments);return HD(this,i)}}function HD(n,r){return r&&($l(r)==="object"||typeof r=="function")?r:WD(n)}function WD(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function Ql(n){return Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ql(n)}var UD=function(n){XD(t,n);var r=VD(t);function t(){var e;return GD(this,t),e=r.apply(this,arguments),e.state={hasError:!1},e.renderError=function(i){switch(i){default:return H.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",i.message)}},e}return zD(t,[{key:"render",value:function(){return this.state.hasError?this.renderError(this.state.error):this.props.children}}],[{key:"getDerivedStateFromError",value:function(i){return{hasError:!0,error:i}}},{key:"getDerivedStateFromProps",value:function(i,a){return a.children!==i.children?{children:i.children,hasError:!1,error:void 0}:null}}]),t}(H.Component),ci=UD,WG=YD.Provider;function ZD(n,r){if(n==null)return{};var t=KD(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function KD(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var w0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=ZD(n,["chartRef","style","className"]),s=yi(mg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});w0.defaultProps=mg.getDefaultOptions();var $D=w0;function QD(n,r){if(n==null)return{};var t=JD(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function JD(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var S0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=QD(n,["chartRef","style","className"]),s=yi(qp,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});S0.defaultProps=qp.getDefaultOptions();var qD=S0;function t5(n,r){if(n==null)return{};var t=e5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function e5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var C0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=t5(n,["chartRef","style","className"]),s=yi(ky,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});C0.defaultProps=ky.getDefaultOptions();var r5=C0;function i5(n,r){if(n==null)return{};var t=n5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function n5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var M0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=i5(n,["chartRef","style","className"]),s=yi(By,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});M0.defaultProps=By.getDefaultOptions();var a5=M0;function o5(n,r){if(n==null)return{};var t=s5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function s5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var l5=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=o5(n,["chartRef","style","className"]),s=yi(FB,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))}),u5=l5;function h5(n,r){if(n==null)return{};var t=f5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function f5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var E0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=h5(n,["chartRef","style","className"]),s=yi(_g,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});E0.defaultProps=_g.getDefaultOptions();var A0=E0;function c5(n,r){if(n==null)return{};var t=v5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function v5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var T0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=c5(n,["chartRef","style","className"]),s=yi(c0,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});T0.defaultProps=c0.getDefaultOptions();var d5=T0;function p5(n,r){if(n==null)return{};var t=g5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function g5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var _0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=p5(n,["chartRef","style","className"]),s=yi($g,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});_0.defaultProps=$g.getDefaultOptions();var y5=_0;function m5(n,r){if(n==null)return{};var t=x5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function x5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var P0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=m5(n,["chartRef","style","className"]),s=yi(My,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});P0.defaultProps=My.getDefaultOptions();var L0=P0;function b5(n,r){if(n==null)return{};var t=w5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function w5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var I0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=b5(n,["chartRef","style","className"]),s=yi(u0,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});I0.defaultProps=u0.getDefaultOptions();var S5=I0;function C5(n,r){if(n==null)return{};var t=M5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function M5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var k0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=C5(n,["chartRef","style","className"]),s=yi(Vy,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});k0.defaultProps=Vy.getDefaultOptions();var E5=k0;function A5(n,r){if(n==null)return{};var t=T5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function T5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var _5=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=A5(n,["chartRef","style","className"]),s=yi(Fk,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))}),P5=_5;function L5(n,r){if(n==null)return{};var t=I5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function I5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var O0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=L5(n,["chartRef","style","className"]),s=yi(zy,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});O0.defaultProps=zy.getDefaultOptions();var B0=O0;function k5(n,r){if(n==null)return{};var t=O5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function O5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var D0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=k5(n,["chartRef","style","className"]),s=yi(ng,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});D0.defaultProps=ng.getDefaultOptions();var B5=D0;function D5(n,r){if(n==null)return{};var t=F5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function F5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var F0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=D5(n,["chartRef","style","className"]),s=yi(Lg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});F0.defaultProps=Lg.getDefaultOptions();var R5=F0;function N5(n,r){if(n==null)return{};var t=Y5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function Y5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var R0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=N5(n,["chartRef","style","className"]),s=yi(p0,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});R0.defaultProps=p0.getDefaultOptions();var G5=R0;function z5(n,r){if(n==null)return{};var t=X5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function X5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var N0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=z5(n,["chartRef","style","className"]),s=yi(hy,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});N0.defaultProps=hy.getDefaultOptions();var V5=N0;function H5(n,r){if(n==null)return{};var t=W5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function W5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var Y0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=H5(n,["chartRef","style","className"]),s=yi(ty,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});Y0.defaultProps=ty.getDefaultOptions();var j5=Y0;function U5(n,r){if(n==null)return{};var t=Z5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function Z5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var G0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=U5(n,["chartRef","style","className"]),s=yi(by,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});G0.defaultProps=by.getDefaultOptions();var K5=G0;function $5(n,r){if(n==null)return{};var t=Q5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function Q5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var z0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=$5(n,["chartRef","style","className"]),s=yi(Op,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});z0.defaultProps=Op.getDefaultOptions();var X0=z0;function J5(n,r){if(n==null)return{};var t=q5(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function q5(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var V0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=J5(n,["chartRef","style","className"]),s=yi(my,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});V0.defaultProps=my.getDefaultOptions();var H0=V0;function tF(n,r){if(n==null)return{};var t=eF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function eF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var W0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=tF(n,["chartRef","style","className"]),s=yi(Wy,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});W0.defaultProps=Wy.getDefaultOptions();var rF=W0;function iF(n,r){if(n==null)return{};var t=nF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function nF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var j0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=iF(n,["chartRef","style","className"]),s=yi(Mg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});j0.defaultProps=Mg.getDefaultOptions();var aF=j0;function oF(n,r){if(n==null)return{};var t=sF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function sF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var U0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=oF(n,["chartRef","style","className"]),s=yi(sg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});U0.defaultProps=sg.getDefaultOptions();var lF=U0;function uF(n,r){if(n==null)return{};var t=hF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function hF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var Z0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=uF(n,["chartRef","style","className"]),s=yi(zg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});Z0.defaultProps=zg.getDefaultOptions();var fF=Z0;function cF(n,r){if(n==null)return{};var t=vF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function vF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var K0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=cF(n,["chartRef","style","className"]),s=yi(Ug,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});K0.defaultProps=Ug.getDefaultOptions();var dF=K0;function pF(n,r){if(n==null)return{};var t=gF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function gF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var $0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=pF(n,["chartRef","style","className"]),s=yi($y,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});$0.defaultProps=$y.getDefaultOptions();var Q0=$0;function yF(n,r){if(n==null)return{};var t=mF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function mF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var J0=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=yF(n,["chartRef","style","className"]),s=yi(cy,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});J0.defaultProps=cy.getDefaultOptions();var q0=J0;function xF(n,r){if(n==null)return{};var t=bF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function bF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var tm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=xF(n,["chartRef","style","className"]),s=yi(vg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});tm.defaultProps=vg.getDefaultOptions();var wF=tm;function SF(n,r){if(n==null)return{};var t=CF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function CF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var em=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=SF(n,["chartRef","style","className"]),s=yi(Ng,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});em.defaultProps=Ng.getDefaultOptions();var MF=em;function EF(n,r){if(n==null)return{};var t=AF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function AF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var rm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=EF(n,["chartRef","style","className"]),s=yi(Jy,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});rm.defaultProps=Jy.getDefaultOptions();var im=rm;function TF(n,r){if(n==null)return{};var t=_F(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function _F(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var nm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=TF(n,["chartRef","style","className"]),s=yi(ry,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});nm.defaultProps=ry.getDefaultOptions();var PF=nm;function LF(n,r){if(n==null)return{};var t=IF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function IF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var am=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=LF(n,["chartRef","style","className"]),s=yi(Ly,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});am.defaultProps=Ly.getDefaultOptions();var kF=am;function OF(n,r){if(n==null)return{};var t=BF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function BF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var om=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=OF(n,["chartRef","style","className"]),s=yi(wg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});om.defaultProps=wg.getDefaultOptions();var DF=om;function FF(n,r){if(n==null)return{};var t=RF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function RF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var sm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=FF(n,["chartRef","style","className"]),s=yi(eg,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});sm.defaultProps=eg.getDefaultOptions();var NF=sm;function YF(n,r){if(n==null)return{};var t=GF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function GF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var lm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=YF(n,["chartRef","style","className"]),s=yi(Og,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});lm.defaultProps=Og.getDefaultOptions();var zF=lm;function XF(n,r){if(n==null)return{};var t=VF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function VF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var um=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=XF(n,["chartRef","style","className"]),s=yi(m0,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});um.defaultProps=m0.getDefaultOptions();var HF=um;function WF(n,r){if(n==null)return{};var t=jF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function jF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var hm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=WF(n,["chartRef","style","className"]),s=yi(ly,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});hm.defaultProps=ly.getDefaultOptions();var UF=hm;function ZF(n,r){if(n==null)return{};var t=KF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function KF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var fm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=ZF(n,["chartRef","style","className"]),s=yi(jp,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});fm.defaultProps=jp.getDefaultOptions();var $F=fm;function QF(n,r){if(n==null)return{};var t=JF(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function JF(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var cm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=QF(n,["chartRef","style","className"]),s=yi(r0,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});cm.defaultProps=r0.getDefaultOptions();var vm=cm;function qF(n,r){if(n==null)return{};var t=tR(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function tR(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var dm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=qF(n,["chartRef","style","className"]),s=yi(t0,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});dm.defaultProps=t0.getDefaultOptions();var pm=dm;function eR(n,r){if(n==null)return{};var t=rR(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function rR(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var gm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=eR(n,["chartRef","style","className"]),s=yi(n0,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});gm.defaultProps=n0.getDefaultOptions();var iR=gm;function nR(n,r){if(n==null)return{};var t=aR(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function aR(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var ym=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=nR(n,["chartRef","style","className"]),s=yi(Hp,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});ym.defaultProps=Hp.getDefaultOptions();var oR=ym;function sR(n,r){if(n==null)return{};var t=lR(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function lR(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var mm=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=sR(n,["chartRef","style","className"]),s=yi(Ty,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))});mm.defaultProps=Ty.getDefaultOptions();var uR=mm;function hR(n,r){if(n==null)return{};var t=fR(n,r),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(t[e]=n[e]))}return t}function fR(n,r){if(n==null)return{};var t={},e=Object.keys(n),i,a;for(a=0;a<e.length;a++)i=e[a],!(r.indexOf(i)>=0)&&(t[i]=n[i]);return t}var cR=(0,H.forwardRef)(function(n,r){var t=n.chartRef,e=n.style,i=e===void 0?{}:e,a=n.className,o=hR(n,["chartRef","style","className"]),s=yi(wk,o),l=s.chart,u=s.container;return(0,H.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,H.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),H.createElement(ci,null,H.createElement("div",{className:a,style:i,ref:u}))}),xm=cR,vR={i8:"3.8.5"},on=d(27533),dR={getDefaultCfg:function(){return{}},getEvents:function(){return{}},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(r){var t=this,e=this.events;this.graph=r,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!0),(0,zi.default)(e,function(i,a){r.on(a,i)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(r){var t=this.events;(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!1),(0,zi.default)(t,function(e,i){r.off(i,e)})},get:function(r){return this[r]},set:function(r,t){return this[r]=t,this}},pR=function(){function n(){}return n.registerBehavior=function(r,t){if(!t)throw new Error("please specify handler for this behavior: "+r);var e=(0,on.d9)(dR);Object.assign(e,t);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&((0,on.S6)(l,function(f,c){u[c]=(0,on.Ko)(s,f)}),this.events=u)};i.prototype=e,n.types[r]=i},n.hasBehavior=function(r){return!!n.types[r]},n.getBehavior=function(r){return n.types[r]},n.types={},n}(),Pf=pR,Lf;(function(n){n.CLICK="click",n.DBLCLICK="dblclick",n.MOUSEDOWN="mousedown",n.MOUDEUP="mouseup",n.CONTEXTMENU="contextmenu",n.MOUSEENTER="mouseenter",n.MOUSEOUT="mouseout",n.MOUSEOVER="mouseover",n.MOUSEMOVE="mousemove",n.MOUSELEAVE="mouseleave",n.DRAGSTART="dragstart",n.DRAGEND="dragend",n.DRAG="drag",n.DRAGENTER="dragenter",n.DRAGLEAVE="dragleave",n.DRAGOVER="dragover",n.DRAGOUT="dragout",n.DDROP="drop",n.KEYUP="keyup",n.KEYDOWN="keydown",n.WHEEL="wheel",n.FOCUS="focus",n.BLUR="blur",n.TOUCHSTART="touchstart",n.TOUCHMOVE="touchmove",n.TOUCHEND="touchend",n.NODE_CONTEXTMENU="node:contextmenu",n.NODE_CLICK="node:click",n.NODE_DBLCLICK="node:dblclick",n.NODE_MOUSEDOWN="node:mousedown",n.NODE_MOUSEUP="node:mouseup",n.NODE_MOUSEENTER="node:mouseenter",n.NODE_MOUSELEAVE="node:mouseleave",n.NODE_MOUSEMOVE="node:mousemove",n.NODE_MOUSEOUT="node:mouseout",n.NODE_MOUSEOVER="node:mouseover",n.NODE_DROP="node:drop",n.NODE_DRAGOVER="node:dragover",n.NODE_DRAGENTER="node:dragenter",n.NODE_DRAGLEAVE="node:dragleave",n.NODE_DRAGSTART="node:dragstart",n.NODE_DRAG="node:drag",n.NODE_DRAGEND="node:dragend",n.COMBO_CONTEXTMENU="combo:contextmenu",n.COMBO_CLICK="combo:click",n.COMBO_DBLCLICK="combo:dblclick",n.COMBO_MOUSEDOWN="combo:mousedown",n.COMBO_MOUSEUP="combo:mouseup",n.COMBO_MOUSEENTER="combo:mouseenter",n.COMBO_MOUSELEAVE="combo:mouseleave",n.COMBO_MOUSEMOVE="combo:mousemove",n.COMBO_MOUSEOUT="combo:mouseout",n.COMBO_MOUSEOVER="combo:mouseover",n.COMBO_DROP="combo:drop",n.COMBO_DRAGOVER="combo:dragover",n.COMBO_DRAGENTER="combo:dragenter",n.COMBO_DRAGLEAVE="combo:dragleave",n.COMBO_DRAGSTART="combo:dragstart",n.COMBO_DRAG="combo:drag",n.COMBO_DRAGEND="combo:dragend",n.EDGE_CONTEXTMENU="edge:contextmenu",n.EDGE_CLICK="edge:click",n.EDGE_DBLCLICK="edge:dblclick",n.EDGE_MOUSEDOWN="edge:mousedown",n.EDGE_MOUSEUP="edge:mouseup",n.EDGE_MOUSEENTER="edge:mouseenter",n.EDGE_MOUSELEAVE="edge:mouseleave",n.EDGE_MOUSEMOVE="edge:mousemove",n.EDGE_MOUSEOUT="edge:mouseout",n.EDGE_MOUSEOVER="edge:mouseover",n.EDGE_DROP="edge:drop",n.EDGE_DRAGOVER="edge:dragover",n.EDGE_DRAGENTER="edge:dragenter",n.EDGE_DRAGLEAVE="edge:dragleave",n.CANVAS_CONTEXTMENU="canvas:contextmenu",n.CANVAS_CLICK="canvas:click",n.CANVAS_DBLCLICK="canvas:dblclick",n.CANVAS_MOUSEDOWN="canvas:mousedown",n.CANVAS_MOUSEUP="canvas:mouseup",n.CANVAS_MOUSEENTER="canvas:mouseenter",n.CANVAS_MOUSELEAVE="canvas:mouseleave",n.CANVAS_MOUSEMOVE="canvas:mousemove",n.CANVAS_MOUSEOUT="canvas:mouseout",n.CANVAS_MOUSEOVER="canvas:mouseover",n.CANVAS_DROP="canvas:drop",n.CANVAS_DRAGENTER="canvas:dragenter",n.CANVAS_DRAGLEAVE="canvas:dragleave",n.CANVAS_DRAGSTART="canvas:dragstart",n.CANVAS_DRAG="canvas:drag",n.CANVAS_DRAGEND="canvas:dragend",n.BEFORERENDER="beforerender",n.AFTERRENDER="afterrender",n.BEFOREADDITEM="beforeadditem",n.AFTERADDITEM="afteradditem",n.BEFOREREMOVEITEM="beforeremoveitem",n.AFTERREMOVEITEM="afterremoveitem",n.BEFOREUPDATEITEM="beforeupdateitem",n.AFTERUPDATEITEM="afterupdateitem",n.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",n.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",n.BEFOREITEMSTATECHANGE="beforeitemstatechange",n.AFTERITEMSTATECHANGE="afteritemstatechange",n.BEFOREITEMREFRESH="beforeitemrefresh",n.AFTERITEMREFRESH="afteritemrefresh",n.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",n.AFTERITEMSTATESCLEAR="afteritemstatesclear",n.BEFOREMODECHANGE="beforemodechange",n.AFTERMODECHANGE="aftermodechange",n.BEFORELAYOUT="beforelayout",n.AFTERLAYOUT="afterlayout",n.BEFORECREATEEDGE="beforecreateedge",n.AFTERCREATEEDGE="aftercreateedge",n.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",n.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",n.BEFOREGRAPHREFRESH="beforegraphrefresh",n.AFTERGRAPHREFRESH="aftergraphrefresh",n.BEFOREANIMATE="beforeanimate",n.AFTERANIMATE="afteranimate",n.BEFOREPAINT="beforepaint",n.AFTERPAINT="afterpaint",n.GRAPHSTATECHANGE="graphstatechange",n.AFTERACTIVATERELATIONS="afteractivaterelations",n.NODESELECTCHANGE="nodeselectchange",n.TOOLTIPCHANGE="tooltipchange",n.WHEELZOOM="wheelzoom",n.VIEWPORTCHANGE="viewportchange",n.DRAGNODEEND="dragnodeend",n.STACKCHANGE="stackchange"})(Lf||(Lf={}));var wa=d(41820),gR=d(57814),yR=function(n){(0,B.__extends)(r,n);function r(t,e){var i=n.call(this,t,e)||this;return i.item=e.item,i.canvasX=e.canvasX,i.canvasY=e.canvasY,i.wheelDelta=e.wheelDelta,i.detail=e.detail,i}return r}(gR.Z),If=function(r){var t=0,e=0,i=0,a=0;if((0,wa.default)(r))t=e=i=a=r;else if((0,ki.default)(r)){var o=parseInt(r,10);t=e=i=a=o}else(0,kn.default)(r)&&(t=r[0],i=(0,In.default)(r[1])?r[0]:r[1],a=(0,In.default)(r[2])?r[0]:r[2],e=(0,In.default)(r[3])?i:r[3]);return[t,i,a,e]},Jl=function(r){var t=new yR(r.type,r);return t.clientX=r.clientX,t.clientY=r.clientY,t.x=r.x,t.y=r.y,t.target=r.target,t.currentTarget=r.currentTarget,t.bubbles=!0,t.item=r.item,t},bm=function(r){if(!r)return!1;for(var t=9,e=[1,0,0,0,1,0,0,0,1],i=0;i<t;i++)if(r[i]!==e[i])return!0;return!1},Ja=function(r){return Number.isNaN(Number(r))},wm=function(r){for(var t=Infinity,e=-Infinity,i=Infinity,a=-Infinity,o=0;o<r.length;o++){var s=r[o],l=s.getBBox(),u=l.minX,f=l.minY,c=l.maxX,v=l.maxY;u<t&&(t=u),f<i&&(i=f),c>e&&(e=c),v>a&&(a=v)}var g=Math.floor(t),C=Math.floor(i),O=Math.ceil(e)-Math.floor(t),F=Math.ceil(a)-Math.floor(i);return{x:g,y:C,width:O,height:F,minX:t,minY:i,maxX:e,maxY:a}},mR=function(r,t){t===void 0&&(t=15);for(var e=r.length,i=t*2,a=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],o={},s=[],l={},u=0;u<e;u++){var f=r[u],c=f.source,v=f.target,g=c+"-"+v;if(!s[u]){o[g]||(o[g]=[]),s[u]=!0,o[g].push(f);for(var C=0;C<e;C++)if(u!==C){var O=r[C],F=O.source,G=O.target;s[C]||(c===G&&v===F?(o[g].push(O),s[C]=!0,l[F+"|"+G+"|"+(o[g].length-1)]=!0):c===F&&v===G&&(o[g].push(O),s[C]=!0))}}}for(var Y in o)for(var $=o[Y],q=$.length,ut=0;ut<q;ut++){var kt=$[ut];if(kt.source===kt.target){kt.type="loop",kt.loopCfg={position:a[ut%8],dist:Math.floor(ut/8)*20+50};continue}kt.type="quadratic";var Nt=(ut%2==0?1:-1)*(l[kt.source+"|"+kt.target+"|"+ut]?-1:1);q%2==1?kt.curveOffset=Nt*Math.ceil(ut/2)*i:kt.curveOffset=Nt*(Math.floor(ut/2)*i+t)}return r},Sm=Math.abs,xR=10,bR=["shift","ctrl","alt","control"],wR={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",mousedown:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp",mouseup:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(r){var t=this.origin,e=+r.clientX,i=+r.clientY;if(!(Ja(e)||Ja(i))){var a=e-t.x,o=i-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:e,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox();(u.minX<=s+this.scalableRange&&u.minX+a>s+this.scalableRange||u.maxX+this.scalableRange>=0&&u.maxX+this.scalableRange+a<0)&&(a=0),(u.minY<=l+this.scalableRange&&u.minY+o>l+this.scalableRange||u.maxY+this.scalableRange>=0&&u.maxY+this.scalableRange+o<0)&&(o=0),this.graph.translate(a,o)}},onMouseDown:function(r){var t=this,e=r.originalEvent;if(!(e&&e.button!==0)&&!(r.name!==Lf.TOUCHSTART&&window&&window.event&&typeof window!="undefined"&&!window.event.buttons&&!window.event.button)&&!(t.keydown||r.shape)&&(t.origin={x:r.clientX,y:r.clientY},t.dragging=!1,this.enableOptimize)){for(var i=this.graph,a=i.getEdges(),o=0,s=a.length;o<s;o++){var l=a[o].get("group").get("children");!l||l.forEach(function(Y){Y.hide()})}for(var u=i.getNodes(),f=0,c=u.length;f<c;f++)for(var v=u[f].getContainer(),g=v.get("children"),C=0,O=g;C<O.length;C++){var F=O[C],G=F.get("isKeyShape");G||F.hide()}}},onMouseMove:function(r){var t=this.graph;if(!(this.keydown||r.shape)&&(r=Jl(r),!!this.origin)){if(this.dragging)r.type="drag",t.emit("canvas:drag",r);else{if(Sm(this.origin.x-r.clientX)+Sm(this.origin.y-r.clientY)<xR)return;this.shouldBegin.call(this,r)&&(r.type="dragstart",t.emit("canvas:dragstart",r),this.dragging=!0)}this.shouldUpdate.call(this,r)&&this.updateViewport(r)}},onMouseUp:function(r){var t=this.graph;if(!(this.keydown||r.shape)){if(this.enableOptimize){for(var e=t.getEdges(),i=0,a=e.length;i<a;i++){var o=e[i].get("group").get("children");!o||o.forEach(function(F){F.show()})}for(var s=t.getNodes(),l=0,u=s.length;l<u;l++)for(var f=s[l].getContainer(),c=f.get("children"),v=0,g=c;v<g.length;v++){var C=g[v],O=C.get("isKeyShape");O||C.show()}}if(!this.dragging){this.origin=null;return}r=Jl(r),this.shouldEnd.call(this,r)&&this.updateViewport(r),r.type="dragend",t.emit("canvas:dragend",r),this.endDrag()}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(r){var t=this,e=r.key;!e||(bR.indexOf(e.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},SR=d(57491),ql=d.n(SR),CR=d(29231),tu=d.n(CR),eu=2,Cm=.16,MR=.05,ER=.05,AR=.15,Mm=5,Em=4,TR=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Am(n,r,t){var e;return Math.round(n.h)>=60&&Math.round(n.h)<=240?e=t?Math.round(n.h)-eu*r:Math.round(n.h)+eu*r:e=t?Math.round(n.h)+eu*r:Math.round(n.h)-eu*r,e<0?e+=360:e>=360&&(e-=360),e}function Tm(n,r,t){if(n.h===0&&n.s===0)return n.s;var e;return t?e=n.s-Cm*r:r===Em?e=n.s+Cm:e=n.s+MR*r,e>1&&(e=1),t&&r===Mm&&e>.1&&(e=.1),e<.06&&(e=.06),Number(e.toFixed(2))}function _m(n,r,t){var e;return t?e=n.v+ER*r:e=n.v-AR*r,e>1&&(e=1),Number(e.toFixed(2))}function kf(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],e=tu()(n),i=Mm;i>0;i-=1){var a=e.toHsv(),o=tu()({h:Am(a,i,!0),s:Tm(a,i,!0),v:_m(a,i,!0)}).toHexString();t.push(o)}t.push(e.toHexString());for(var s=1;s<=Em;s+=1){var l=e.toHsv(),u=tu()({h:Am(l,s),s:Tm(l,s),v:_m(l,s)}).toHexString();t.push(u)}return r.theme==="dark"?TR.map(function(f){var c=f.index,v=f.opacity,g=tu().mix(r.backgroundColor||"#141414",t[c],v*100).toHexString();return g}):t}var Of={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Hn={},Bf={};Object.keys(Of).forEach(function(n){Hn[n]=kf(Of[n]),Hn[n].primary=Hn[n][5],Bf[n]=kf(Of[n],{theme:"dark",backgroundColor:"#141414"}),Bf[n].primary=Bf[n][5]});var jG=Hn.red,UG=Hn.volcano,ZG=Hn.gold,KG=Hn.orange,$G=Hn.yellow,QG=Hn.lime,JG=Hn.green,qG=Hn.cyan,tz=Hn.blue,ez=Hn.geekblue,rz=Hn.purple,iz=Hn.magenta,nz=Hn.grey,Ia=function(r,t,e){var i=ql()(r),a=ql()(t);return ql()([(1-e)*i.color[0]+e*a.color[0],(1-e)*i.color[1]+e*a.color[1],(1-e)*i.color[2]+e*a.color[2]]).rgb()},Pm=function(r,t,e,i){t===void 0&&(t="#fff"),e===void 0&&(e="default"),i===void 0&&(i="rgb(150, 150, 150)");var a=Ia(t,r,.05).rgb().toString(),o=Ia(t,i,.02).rgb().toString(),s=Ia(t,i,.05).rgb().toString(),l=Ia(t,i,.1).rgb().toString(),u=Ia(t,i,.2).rgb().toString(),f=Ia(t,i,.3).rgb().toString(),c=kf(r,{theme:e,backgroundColor:t}),v=ql()(r).hex().toLowerCase(),g=c.indexOf(v),C=r;return g!==-1&&(C=c[g+1]),{mainStroke:r,mainFill:Ia(t,r,.1).rgb().toString(),activeStroke:r,activeFill:a,inactiveStroke:Ia(t,r,.4).rgb().toString(),inactiveFill:a,selectedStroke:r,selectedFill:t,highlightStroke:C,highlightFill:Ia(t,r,.2).rgb().toString(),disableStroke:f,disableFill:s,edgeMainStroke:f,edgeActiveStroke:r,edgeInactiveStroke:u,edgeSelectedStroke:r,edgeHighlightStroke:r,edgeDisableStroke:l,comboMainStroke:f,comboMainFill:o,comboActiveStroke:r,comboActiveFill:a,comboInactiveStroke:f,comboInactiveFill:o,comboSelectedStroke:r,comboSelectedFill:o,comboHighlightStroke:C,comboHighlightFill:o,comboDisableStroke:u,comboDisableFill:s}},_R="rgb(95, 149, 255)",PR="rgb(255, 255, 255)",Lm="rgb(0, 0, 0)",Ei=Pm(_R,PR),Ue={version:"3.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",customGroupContainerClassName:"custom-group-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ei.mainStroke,fill:Ei.mainFill},size:20,color:Ei.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ei.activeFill,stroke:Ei.activeStroke}},nodeStateStyles:{active:{fill:Ei.activeFill,stroke:Ei.activeStroke,lineWidth:2,shadowColor:Ei.mainStroke,shadowBlur:10},selected:{fill:Ei.selectedFill,stroke:Ei.selectedStroke,lineWidth:4,shadowColor:Ei.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ei.highlightFill,stroke:Ei.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ei.inactiveFill,stroke:Ei.inactiveStroke,lineWidth:1},disable:{fill:Ei.disableFill,stroke:Ei.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Lm,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ei.edgeMainStroke,lineAppendWidth:2},color:Ei.edgeMainStroke},edgeStateStyles:{active:{stroke:Ei.edgeActiveStroke,lineWidth:1},selected:{stroke:Ei.edgeSelectedStroke,lineWidth:2,shadowColor:Ei.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ei.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ei.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ei.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Lm,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ei.comboMainFill,lineWidth:1,stroke:Ei.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ei.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ei.comboActiveStroke,lineWidth:1,fill:Ei.comboActiveFill},selected:{stroke:Ei.comboSelectedStroke,lineWidth:2,fill:Ei.comboSelectedFill,shadowColor:Ei.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ei.comboHighlightStroke,lineWidth:2,fill:Ei.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ei.comboInactiveStroke,fill:Ei.comboInactiveFill,lineWidth:1},disable:{stroke:Ei.comboDisableStroke,fill:Ei.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},LR={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(r){if(!this.origin||!r||r.destroyed)return!1;var t=r.getType();return t==="combo"},onDragStart:function(r){var t=this;if(!!this.shouldBegin.call(this,r)){var e=r.item;if(!(!e||e.destroyed||e.hasLocked())){var i=e.getContainer();i.set("capture",!1);var a=r.target;if(a){var o=a.get("isAnchorPoint");if(o)return}var s=this.graph;this.targets=[],this.targetCombo=null;var l=s.findAllByState("node",this.selectedState),u=e.get("id"),f=l.filter(function(v){var g=v.get("id");return u===g});f.length===0?this.targets.push(e):l.length>1?l.forEach(function(v){var g=v.hasLocked();g||t.targets.push(v)}):this.targets.push(e);var c=[];this.targets.forEach(function(v){c.push((0,on.d9)(v.getModel()))}),this.set("beforeDragNodes",c),this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}}},onDrag:function(r){var t=this;!this.origin||!this.shouldUpdate(this,r)||(this.get("enableDelegate")?this.updateDelegate(r):this.targets.map(function(e){t.update(e,r)}))},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){var t=r.item;if(t){var e=t.getContainer();e.set("capture",!0)}this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(r);var i=this.graph;if(i.get("enabledStack")){var a={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(o){a.after.nodes.push(o.getModel())}),i.pushStack("update",(0,on.d9)(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(r){var t=r.item;if(!!this.validationCombo(t)){this.updatePositions(r);var e=this.graph;if(this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)e.updateCombos();else{var i=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&e.updateComboTree(a,i.id)}),e.updateCombo(t)}e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(r){var t=this.graph;!this.targets||this.targets.length===0||(this.updatePositions(r),this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(e){var i=e.getModel();i.comboId&&t.updateComboTree(e)}))},onDropNode:function(r){if(!(!this.targets||this.targets.length===0)){var t=this,e=r.item;this.updatePositions(r);var i=t.graph,a=e.getModel().comboId;if(a){var o=i.findById(a);t.comboActiveState&&i.setItemState(o,t.comboActiveState,!1),this.targets.map(function(s){var l=s.getModel();a!==l.comboId&&i.updateComboTree(s,a)}),i.updateCombo(o)}else this.targets.map(function(s){var l=s.getModel();l.comboId&&i.updateComboTree(s)});i.emit("dragnodeend",{items:this.targets,targetItem:e})}},onDragEnter:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(r){var t=this;!this.targets||this.targets.length===0||this.get("enableDelegate")&&this.targets.map(function(e){return t.update(e,r)})},update:function(r,t){var e=this.origin,i=r.get("model"),a=r.get("id");this.point[a]||(this.point[a]={x:i.x||0,y:i.y||0});var o=t.x-e.x+this.point[a].x,s=t.y-e.y+this.point[a].y,l={x:o,y:s};this.get("updateEdge")?this.graph.updateItem(r,l,!1):r.updatePosition(l)},updateDelegate:function(r){var t=this.graph;if(this.delegateRect){var v=r.x-this.origin.x+this.originPoint.minX,g=r.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:v,y:g})}else{var e=this.graph.get("group"),i=(0,on.b$)({},Ue.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(r),o=a.x,s=a.y,l=a.width,u=a.height,f=a.minX,c=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:f,minY:c},this.delegateRect=e.addShape("rect",{attrs:(0,B.__assign)({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(r){var t=this.graph,e=t.findAllByState("node",this.selectedState);e.length===0&&e.push(r.item);for(var i=Infinity,a=-Infinity,o=Infinity,s=-Infinity,l=0;l<e.length;l++){var u=e[l],f=u.getBBox(),c=f.minX,v=f.minY,g=f.maxX,C=f.maxY;c<i&&(i=c),v<o&&(o=v),g>a&&(a=g),C>s&&(s=C)}var O=Math.floor(i),F=Math.floor(o),G=Math.ceil(a)-Math.floor(i),Y=Math.ceil(s)-Math.floor(o);return{x:O,y:F,width:G,height:Y,minX:i,minY:o}}},IR={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(r){var t=r.item,e=this.graph;if(this.item=t,!!this.shouldUpdate(r.item,{event:r,action:"activate"})){for(var i=this,a=this.activeState,o=this.inactiveState,s=e.getNodes(),l=e.getEdges(),u=s.length,f=l.length,c=0;c<u;c++){var v=s[c],g=v.hasState("selected");i.resetSelected&&g&&e.setItemState(v,"selected",!1),e.setItemState(v,a,!1),o&&e.setItemState(v,o,!0)}for(var c=0;c<f;c++){var C=l[c];e.setItemState(C,a,!1),o&&e.setItemState(C,o,!0)}o&&e.setItemState(t,o,!1),e.setItemState(t,a,!0);for(var O=t.getEdges(),F=O.length,c=0;c<F;c++){var C=O[c],G=void 0;C.getSource()===t?G=C.getTarget():G=C.getSource(),o&&e.setItemState(G,o,!1),e.setItemState(G,a,!0),e.setItemState(C,o,!1),e.setItemState(C,a,!0),C.toFront()}e.emit("afteractivaterelations",{item:r.item,action:"activate"})}},clearActiveState:function(r){var t=this,e=t.get("graph");if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){var i=this.activeState,a=this.inactiveState,o=e.get("autoPaint");e.setAutoPaint(!1);for(var s=e.getNodes(),l=e.getEdges(),u=s.length,f=l.length,c=0;c<u;c++){var v=s[c];e.clearItemStates(v,[i,a])}for(var c=0;c<f;c++){var g=l[c];e.clearItemStates(g,[i,a,"deactivate"])}e.paint(),e.setAutoPaint(o),e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}},clearAllItemStates:function(r){var t=this,e=t.graph;if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){for(var i=this.activeState,a=this.inactiveState,o=e.getNodes(),s=e.getEdges(),l=o.length,u=s.length,f=0;f<l;f++){var c=o[f];e.clearItemStates(c,[i,a])}for(var f=0;f<u;f++){var v=s[f];e.clearItemStates(v,[i,a,"deactivate"])}e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}}},ru=Math.min,Im=Math.max,km=Math.abs,Om="shift",kR=["drag","shift","ctrl","alt","control"],OR={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Om,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return kR.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Om,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(r){var t=r.item,e=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createBrush()),this.originPoint={x:r.canvasX,y:r.canvasY},e.attr({width:0,height:0}),e.show(),this.dragging=!0)},onMouseMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(r)},onMouseUp:function(r){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(r),this.dragging=!1)},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,i=t.findAllByState("node",e),a=t.findAllByState("edge",e);i.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(r){var t=this,e=this,i=e.graph,a=e.originPoint,o=e.shouldUpdate,s=this.selectedState,l={x:r.x,y:r.y},u=i.getPointByCanvas(a.x,a.y),f=ru(l.x,u.x),c=Im(l.x,u.x),v=ru(l.y,u.y),g=Im(l.y,u.y),C=[],O=[];i.getNodes().forEach(function(G){var Y=G.getBBox();if(Y.centerX>=f&&Y.centerX<=c&&Y.centerY>=v&&Y.centerY<=g&&o(G,"select")){C.push(G);var $=G.getModel();O.push($.id),i.setItemState(G,s,!0)}});var F=[];this.includeEdges&&C.forEach(function(G){var Y=G.getOutEdges();Y.forEach(function($){var q=$.getModel(),ut=q.source,kt=q.target;O.includes(ut)&&O.includes(kt)&&o($,"select")&&(F.push($),i.setItemState($,t.selectedState,!0))})}),this.selectedEdges=F,this.selectedNodes=C,this.onSelect&&this.onSelect(C,F),i.emit("nodeselectchange",{selectedItems:{nodes:C,edges:F},select:!0})},createBrush:function(){var r=this,t=r.graph.get("canvas").addShape("rect",{attrs:r.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,t},updateBrush:function(r){var t=this.originPoint;this.brush.attr({width:km(r.canvasX-t.x),height:km(r.canvasY-t.y),x:ru(r.canvasX,t.x),y:ru(r.canvasY,t.y)})},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),i=t.toLowerCase();i===e||i==="control"&&e==="ctrl"||i==="ctrl"&&e==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Bm="shift",BR=["shift","ctrl","alt","control"],DR={getDefaultCfg:function(){return{multiple:!0,trigger:Bm,selectedState:"selected"}},getEvents:function(){var r=this;return BR.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=Bm,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),r.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(r){var t=this,e=r.item;if(!(!e||e.destroyed)){var i=e.getType(),a=this,o=a.graph,s=a.keydown,l=a.multiple,u=a.shouldUpdate,f=a.shouldBegin;if(!!f.call(this,r)){if(!s||!l){var c=o.findAllByState(i,this.selectedState);(0,zi.default)(c,function(C){C!==e&&o.setItemState(C,t.selectedState,!1)})}if(e.hasState(this.selectedState)){u.call(this,r)&&o.setItemState(e,this.selectedState,!1);var v=o.findAllByState("node",this.selectedState),g=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:v,combos:g},select:!1})}else{u.call(this,r)&&o.setItemState(e,this.selectedState,!0);var v=o.findAllByState("node",this.selectedState),g=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:v,combos:g},select:!0})}}}},onCanvasClick:function(){var r=this,t=this.graph,e=t.findAllByState("node",this.selectedState);(0,zi.default)(e,function(a){t.setItemState(a,r.selectedState,!1)});var i=t.findAllByState("combo",this.selectedState);(0,zi.default)(i,function(a){t.setItemState(a,r.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()||t.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},aa=d(25519);aa.translate=function(n,r,t){var e=new Array(9);return aa.fromTranslation(e,t),aa.multiply(n,e,r)},aa.rotate=function(n,r,t){var e=new Array(9);return aa.fromRotation(e,t),aa.multiply(n,e,r)},aa.scale=function(n,r,t){var e=new Array(9);return aa.fromScaling(e,t),aa.multiply(n,e,r)},aa.transform=function(n,r){for(var t=[].concat(n),e=0,i=r.length;e<i;e++){var a=r[e];switch(a[0]){case"t":aa.translate(t,t,[a[1],a[2]]);break;case"s":aa.scale(t,t,[a[1],a[2]]);break;case"r":aa.rotate(t,t,a[1]);break;default:break}}return t};var qa=aa,ka=d(8554);ka.angle=function(n,r){var t=ka.dot(n,r)/(ka.length(n)*ka.length(r));return Math.acos((0,h.clamp)(t,-1,1))},ka.direction=function(n,r){return n[0]*r[1]-r[0]*n[1]},ka.angleTo=function(n,r,t){var e=ka.angle(n,r),i=ka.direction(n,r)>=0;return t?i?Math.PI*2-e:e:i?e:Math.PI*2-e},ka.vertical=function(n,r,t){return t?(n[0]=r[1],n[1]=-1*r[0]):(n[0]=-1*r[1],n[1]=r[0]),n};var $i=ka,FR=d(54069),Dm=FR,Oa=function(n,r){var t=n?(0,h.clone)(n):[1,0,0,0,1,0,0,0,1];return(0,h.each)(r,function(e){switch(e[0]){case"t":qa.translate(t,t,[e[1],e[2]]);break;case"s":qa.scale(t,t,[e[1],e[2]]);break;case"r":qa.rotate(t,t,e[1]);break;case"m":qa.multiply(t,t,e[1]);break;default:return!1}}),t},Fm=.05,RR={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.7,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var r=this.fixSelectedItems;return r.fixState||(r.fixState="selected"),r.fixAll&&(r.fixLineWidth=!0,r.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(r){var t=r.originalEvent.touches,e=t[0],i=t[1];r.preventDefault(),!!i&&(this.startPoint={pageX:e.pageX,pageY:e.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(r){if(!!this.moveable){r.preventDefault();var t=r.originalEvent.touches,e=t[0],i=t[1];if(!!i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(g,C){return Math.hypot(C.x-g.x,C.y-g.y)},o=a({x:e.pageX,y:e.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var f=this.graph.get("canvas"),c=f.getPointByClient(r.clientX,r.clientY);this.graph.zoomTo(s,{x:c.x,y:c.y}),this.graph.emit("wheelzoom",r)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(r){var t=this,e=this,i=e.graph,a=e.fixSelectedItems;if(!!this.shouldUpdate.call(this,r)){r.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(r.clientX,r.clientY),l=this.get("sensitivity"),u=i.getZoom(),f=u,c=u;r.wheelDelta<0?f=1-Fm*l:f=1/(1-Fm*l),c=u*f;var v=this.get("minZoom")||i.get("minZoom"),g=this.get("maxZoom")||i.get("maxZoom");if(!(c>g||c<v)){var C=this.get("enableOptimize");if(C){var O=this.get("optimizeZoom"),F=this.get("optimized"),G=i.getNodes(),Y=i.getEdges(),$=G.length,q=Y.length;if(!F){for(var ut=0;ut<$;ut++){var kt=G[ut];if(!kt.destroyed)for(var Nt=kt.get("group").get("children"),Wt=Nt.length,Ft=0;Ft<Wt;Ft++){var ee=Nt[Ft];!ee.destoryed&&!ee.get("isKeyShape")&&ee.hide()}}for(var ve=0;ve<q;ve++)for(var fe=Y[ve],Nt=fe.get("group").get("children"),Wt=Nt.length,Ft=0;Ft<Wt;Ft++){var ee=Nt[Ft];ee.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Te=setTimeout(function(){var Ur=i.getZoom(),fi=t.get("optimized");if(fi){t.set("optimized",!1);for(var Ci=0;Ci<$;Ci++){var Ui=G[Ci],Di=Ui.get("group").get("children"),tn=Di.length;if(Ur<O)Ui.getKeyShape().show();else for(var sn=0;sn<tn;sn++){var Fn=Di[sn];Fn.get("visible")||Fn.show()}}for(var Gn=0;Gn<q;Gn++){var yn=Y[Gn],Di=yn.get("group").get("children"),tn=Di.length;if(Ur<O)yn.getKeyShape().show();else for(var sn=0;sn<tn;sn++){var Fn=Di[sn];Fn.get("visible")||Fn.show()}}}},500);this.set("timeout",Te)}if(u<=1){var Be=void 0,ke=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Be=i.findAllByState("node",a.fixState),ke=i.findAllByState("edge",a.fixState);for(var Qe=u/c,tr=Be.length,rr=0;rr<tr;rr++){var kt=Be[rr],Ze=kt.getContainer(),Ke=kt.getModel(),wr=kt.getOriginStyle(),br=kt.getStateStyle(a.fixState),Ir=kt.get("shapeFactory").getShape(Ke.shape||Ke.type).getStateStyle(a.fixState,kt)[a.fixState];if(a.fixAll){if(c<=1){var ir=(0,h.clone)(Ze.getMatrix());ir||(ir=[1,0,0,0,1,0,0,0,1]);var Mr=kt.getModel(),zr=Mr.x,Lr=Mr.y;qa.translate(ir,ir,[-zr,-Lr]),qa.scale(ir,ir,[Qe,Qe]),qa.translate(ir,ir,[zr,Lr]),Ze.setMatrix(ir)}}else for(var Nt=Ze.get("children"),Wt=Nt.length,Ft=0;Ft<Wt;Ft++){var ee=Nt[Ft],_r=void 0,Hr=void 0;if(a.fixLabel){var li=ee.get("type");if(li==="text"){_r=ee.attr("fontSize")||12;var Br=br[ee.get("name")],Ne=Ir[ee.get("name")],ar=Br?Br.fontSize:12,Wr=Ne?Ne.fontSize:12,ei=ar||Wr||12;if(c<=1&&ee.attr("fontSize",ei/c),Hr)break}}if(a.fixLineWidth&&ee.get("isKeyShape")){Hr=ee.attr("lineWidth")||0;var Nr=br.lineWidth||Ir.lineWidth||wr.lineWidth||0;if(c<=1&&ee.attr("lineWidth",Nr/c),_r)break}}}for(var hi=ke.length,ai=0;ai<hi;ai++)for(var fe=ke[ai],Ze=fe.getContainer(),Nt=Ze.get("children"),Ke=fe.getModel(),br=fe.getStateStyle(a.fixState),Ir=fe.get("shapeFactory").getShape(Ke.shape||Ke.type).getStateStyle(a.fixState,fe)[a.fixState],Wt=Nt.length,Ft=0;Ft<Wt;Ft++){var ee=Nt[Ft],_r=void 0,Hr=void 0;if(a.fixLabel||a.fixAll){var li=ee.get("type");if(li==="text"){_r=ee.attr("fontSize")||12;var Br=br[ee.get("name")],Ne=Ir[ee.get("name")],ar=Br?Br.fontSize:12,Wr=Ne?Ne.fontSize:12,ei=ar||Wr||12;if(c<=1&&ee.attr("fontSize",ei/c),Hr)break}}if((a.fixLineWidth||a.fixAll)&&ee.get("isKeyShape")){Hr=ee.attr("lineWidth")||0;var Nr=br.lineWidth||Ir.lineWidth||1;if(c<=1&&ee.attr("lineWidth",Nr/c),_r)break}}}}i.zoomTo(c,{x:s.x,y:s.y}),i.emit("wheelzoom",r)}}}},Vi=d(19495),gn=d(6279),Rm={onMouseEnter:function(r){var t=r.item;this.currentTarget=t,this.showTooltip(r),this.graph.emit("tooltipchange",{item:r.item,action:"show"})},onMouseMove:function(r){if(!this.shouldUpdate(r)){this.hideTooltip();return}!this.currentTarget||r.item!==this.currentTarget||this.updatePosition(r)},onMouseLeave:function(r){!this.shouldEnd(r)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(r){var t=this.container;if(!(!r.item||r.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var e=this.formatText(r.item.get("model"),r);t.innerHTML=e,(0,Vi.Z)(this.container,{visibility:"visible"}),this.updatePosition(r)}},hideTooltip:function(){(0,Vi.Z)(this.container,{visibility:"hidden"})},updatePosition:function(r){var t=this.get("shouldBegin"),e=this,i=e.width,a=e.height,o=e.container,s=e.graph;if(!t(r)){(0,Vi.Z)(o,{visibility:"hidden"});return}var l=s.getPointByClient(r.clientX,r.clientY),u=s.getCanvasByPoint(l.x,l.y),f=u.x,c=u.y,v=o.getBoundingClientRect();f>i/2?f-=v.width:f+=this.offset,c>a/2?c-=v.height:c+=this.offset;var g=f+"px",C=c+"px";(0,Vi.Z)(this.container,{left:g,top:C,visibility:"visible"})},createTooltip:function(r){var t=r.get("el");t.style.position="relative";var e=(0,gn.Z)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(e),(0,Vi.Z)(e,{position:"absolute",visibility:"visible"}),this.width=r.get("width"),this.height=r.get("height"),this.container=e,this.graph.get("tooltips").push(e),e}},NR=(0,B.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Rm),YR=(0,B.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Rm),Nn=d(8098),GR={getDefaultCfg:function(){return{delegate:!0,delegateStyle:{},delegateShapes:{},delegateShapeBBoxs:{}}},getEvents:function(){return{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd","canvas:mouseleave":"onOutOfRange"}},onDragStart:function(r){var t=this.graph,e=r.target,i=e.get("groupId");if(!!i){var a=t.get("customGroupControll"),o=a.customGroup,s=o[i].nodeGroup;this.targetGroup=s,this.mouseOrigin={x:r.x,y:r.y};for(var l=t.save().groups,u=null,f=0;f<l.length;f++){var c=l[f];if(i===c.id){u=c.parentId;break}}if(u){var v=o[u].nodeGroup;a.setGroupStyle(v.get("keyShape"),"hover")}}},onDrag:function(r){!this.mouseOrigin||this.updateDelegate(r)},onDragEnd:function(r){var t=this.graph,e=r.target.get("groupId");if(this.delegateShapes[e]&&(this.delegateShapeBBox=this.delegateShapes[e].getBBox(),this.delegateShapes[e].remove(),delete this.delegateShapes[e]),!!this.delegateShapeBBox){var i=t.get("customGroupControll"),a=this.delegateShapeBBoxs[e];i.updateGroup(e,a,this.mouseOrigin),this.mouseOrigin=null,this.shapeOrigin=null,i.resetNodePoint(),this.delegateShapeBBox=null}},updateDelegate:function(r){var t=this.graph,e=r.target.get("groupId"),i=this.targetGroup.get("keyShape"),a=this.delegateShapes[e],o=i.getBBox(),s=i.get("type");if(a){var G=this,Y=G.mouseOrigin,$=G.shapeOrigin,q=r.x-Y.x,ut=r.y-Y.y,kt=q+$.x,Nt=ut+$.y;a.attr({x:kt,y:Nt}),this.delegateShapeBBoxs[e]=a.getBBox()}else{var l=t.get("delegateGroup"),u=o.x,f=o.y,c=o.width,v=o.height,g=(0,B.__assign)({width:c,height:v},(0,Nn.default)({},Ue.delegateStyle,this.delegateStyle));if(s==="circle"){var C=c>v?c/2:v/2,O=u+C,F=f+C;a=l.addShape("circle",{attrs:(0,B.__assign)({x:O,y:F,r:C},g),name:"circle-delegate-shape"}),this.shapeOrigin={x:O,y:F}}else a=l.addShape("rect",{attrs:(0,B.__assign)({x:u,y:f},g),name:"rect-delegate-shape"}),this.shapeOrigin={x:u,y:f};this.delegateShapes[e]=a,this.delegateShapeBBoxs[e]=a.getBBox()}},onOutOfRange:function(r){var t=this,e=this.graph.get("canvas").get("el"),i=function a(o){o.target!==e&&(t.onDragEnd(r),document.body.removeEventListener("mouseup",a,!0))};this.mouseOrigin&&document.body.addEventListener("mouseup",i,!0)}},zR=document.body,XR={getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{},maxMultiple:1.1,minMultiple:1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","canvas:mouseleave":"onOutOfRange",dragover:"onDragOver",dragleave:"onDragLeave"}},onDragOver:function(r){var t=this.graph,e=r.target,i=e.get("groupId");if(i&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(i);if(o){var s=o.nodeGroup,l=s.get("keyShape");this.inGroupId=i,a.setGroupStyle(l,"hover")}}},onDragLeave:function(r){var t=this.graph,e=r.target,i=e.get("groupId");if(i&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(i);if(o){var s=o.nodeGroup,l=s.get("keyShape");a.setGroupStyle(l,"default")}}i||(this.inGroupId=null)},onDragStart:function(r){var t=this.graph;if(!!this.shouldBegin.call(this,r)){var e=r.item;this.target=e;var i=e.getModel(),a=i.groupId;if(a){var o=t.get("customGroupControll"),s=o.getDeletageGroupById(a);if(s){var l=s.nodeGroup,u=l.get("keyShape");o.setGroupStyle(u,"hover"),this.inGroupId=a}}this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}},onDrag:function(r){if(!!this.origin&&!!this.get("shouldUpdate").call(this,r)){this.update(this.target,r,!0);var t=r.item,e=this.graph,i=t.getModel(),a=i.groupId;if(a){var o=e.get("customGroupControll"),s=o.getDeletageGroupById(a);if(s){var l=s.nodeGroup,u=l.get("keyShape");this.inGroupId!==a?o.setGroupStyle(u,"default"):o.setGroupStyle(u,"hover")}}}},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){if(this.shape&&(this.shape.remove(),this.shape=null),this.target){var t=this.target.get("delegateShape");t&&(t.remove(),this.target.set("delegateShape",null))}this.target&&this.update(this.target,r),this.point={},this.origin=null,this.originPoint={},this.target=null,this.setCurrentGroupStyle(r)}},setCurrentGroupStyle:function(r){var t=this.graph,e=r.item,i=e.getModel(),a=i.groupId,o=i.id,s=t.get("customGroupControll"),l=s.customGroup,u=t.get("groupNodes");if(this.inGroupId&&a){var f=l[a].nodeGroup;if(!f)return;var c=f.get("keyShape"),v=e.getBBox(),g=c.getBBox(),C=v.centerX,O=v.centerY,F=g.minX,G=g.minY,Y=g.maxX,$=g.maxY;if(!(C<Y*this.maxMultiple&&C>F*this.minMultiple&&O<$*this.maxMultiple&&O>G*this.minMultiple)||this.inGroupId!==a){var q=u[a];u[a]=q.filter(function(Nt){return Nt!==o}),s.dynamicChangeGroupSize(r,f,c),delete i.groupId}if(this.inGroupId!==a){var ut=l[this.inGroupId].nodeGroup;if(!ut)return;var kt=ut.get("keyShape");u[this.inGroupId].indexOf(o)===-1&&u[this.inGroupId].push(o),i.groupId=this.inGroupId,s.dynamicChangeGroupSize(r,ut,kt)}s.setGroupStyle(c,"default")}else if(this.inGroupId&&!a){var ut=l[this.inGroupId].nodeGroup;if(!ut)return;var c=ut.get("keyShape");u[this.inGroupId].indexOf(o)===-1&&u[this.inGroupId].push(o),i.groupId=this.inGroupId,s.dynamicChangeGroupSize(r,ut,c)}else if(!this.inGroupId&&a){Object.keys(u).forEach(function(Ft){var ee=u[Ft];u[Ft]=ee.filter(function(ve){return ve!==o})});var f=l[a].nodeGroup;if(!f)return;var c=f.get("keyShape");s.dynamicChangeGroupSize(r,f,c),delete i.groupId}this.inGroupId=null},onOutOfRange:function(r){var t=this,e=t.graph.get("canvas").get("el");function i(a){a.target!==e&&(r.item=t.target,t.onDragEnd(r),document.body.removeEventListener("mouseup",i,!0))}t.origin&&zR.addEventListener("mouseup",i,!0)},update:function(r,t,e){var i=this.origin,a=r.get("model"),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=t.x-i.x+this.point[o].x,l=t.y-i.y+this.point[o].y;if(e){this.updateDelegate(t,s,l);return}var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(r,u):(r.updatePosition(u),this.graph.paint())},updateDelegate:function(r,t,e){var i=this.graph,a=r.item,o=i.get("groupType"),s=a.get("keyShape").getBBox();if(!this.shape){var l=i.get("delegateGroup"),u=(0,Nn.default)({},Ue.delegateStyle,this.delegateStyle);this.target&&(this.shape=l.addShape("rect",{attrs:(0,B.__assign)({width:s.width,height:s.height,x:t-s.width/2,y:e-s.height/2},u),name:"delegate-shape"}),this.target.set("delegateShape",this.shape)),this.shape.set("capture",!1)}this.target&&(o==="circle"?this.shape.attr({x:t-s.width/2,y:e-s.height/2}):o==="rect"&&this.shape.attr({x:t,y:e}))}},Nm="dblclick",VR=["click","dblclick"],HR={getDefaultCfg:function(){return{trigger:Nm}},getEvents:function(){var r,t;return VR.includes(this.trigger)?t=this.trigger:(t=Nm,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r[""+t]="onGroupClick",r},onGroupClick:function(r){var t=r.target,e=this.graph,i=t.get("groupId");if(!!i){var a=e.get("customGroupControll");a.collapseExpandGroup(i)}}},Ym="click",WR=["click","dblclick"],jR={getDefaultCfg:function(){return{trigger:Ym,onChange:function(){}}},getEvents:function(){var r,t;return WR.includes(this.trigger)?t=this.trigger:(t=Ym,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["node:"+t]="onNodeClick",r.touchstart="onNodeClick",r},onNodeClick:function(r){var t=r.item,e=this.graph.findDataById(t.get("id"));if(!!e){var i=e.children;if(!(!i||i.length===0)){var a=!e.collapsed;if(!!this.shouldBegin(r,a)&&(e.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:r.item,collapsed:a}),!!this.shouldUpdate(r,a))){try{this.onChange(t,a)}catch(o){console.warn("G6 \u81EA 3.0.4 \u7248\u672C\u652F\u6301\u76F4\u63A5\u4ECE item.getModel() \u83B7\u53D6\u6E90\u6570\u636E(\u4E34\u65F6\u901A\u77E5\uFF0C\u5C06\u57283.2.0\u7248\u672C\u4E2D\u6E05\u9664)",o)}this.graph.layout()}}}}},UR=function n(r,t){if(t(r)!==!1&&r){var e=r.get("combos");if(e.length===0)return!1;(0,on.S6)(e,function(i){n(i,t)})}},ZR={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(r){var t=r.item;if(!t||t.destroyed||!this.shouldUpdate(this,r))return!1;var e=t.getType();return e==="combo"},onDragStart:function(r){var t=this,e=this.graph,i=r.item;if(!!this.validationCombo(r)){this.targets=[];var a=e.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(l){var u=l.get("id");return o===u});s.length===0?this.targets.push(i):this.targets=a,this.activeState&&this.targets.map(function(l){var u=l.getModel();if(u.parentId){var f=e.findById(u.parentId);f&&e.setItemState(f,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:r.x,y:r.y},this.currentItemChildCombos=[],UR(i,function(l){if(l.destroyed)return!1;var u=l.getModel();return t.currentItemChildCombos.push(u.id),!0})}},onDrag:function(r){var t=this;if(!!this.origin&&!!this.validationCombo(r))if(this.enableDelegate)this.updateDelegate(r);else{if(this.activeState){var e=this.graph,i=r.item,a=i.getModel(),o=e.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,f=s.width,c=o.filter(function(v){var g=v.getModel();return a.parentId,g.id!==a.id&&!t.currentItemChildCombos.includes(g.id)});c.map(function(v){var g=v.getBBox(),C=g.centerX,O=g.centerY,F=g.width,G=l-C,Y=u-O,$=2*Math.sqrt(G*G+Y*Y);f+F-$>.8*f?e.setItemState(v,t.activeState,!0):e.setItemState(v,t.activeState,!1)})}(0,on.S6)(this.targets,function(v){t.updateCombo(v,r)})}},updatePositions:function(r){var t=this;this.enableDelegate&&(0,on.S6)(this.targets,function(e){t.updateCombo(e,r)})},onDrop:function(r){var t=this,e=r.item;if(!(!e||!this.targets||e.destroyed)){this.updatePositions(r);var i=this.graph,a=e.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&i.setItemState(e,t.activeState,!1),t.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id)):i.updateCombo(e)}),this.end(e,r),this.endComparison=!0}},onNodeDrop:function(r){var t=this;if(!(!this.targets||this.targets.length===0)){this.updatePositions(r);var e=this.graph,i=r.item,a=i.getModel().comboId,o;if(a){if(this.activeState){var s=e.findById(a);e.setItemState(s,this.activeState,!1)}this.targets.map(function(l){t.onlyChangeComboSize?e.updateCombo(l):a!==l.getID()&&(o=e.findById(a),a!==l.getModel().parentId&&e.updateComboTree(l,a))})}else this.targets.map(function(l){if(t.onlyChangeComboSize)e.updateCombo(l);else{var u=l.getModel();u.comboId&&e.updateComboTree(l)}});this.endComparison=!0,this.end(o,r)}},onDragEnter:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!0)}},onDragLeave:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!1)}},onDragEnd:function(r){if(!(!this.targets||this.targets.length===0)){var t=r.item;this.updatePositions(r);var e=this.getParentCombo(t.getModel().parentId),i=this.graph;e&&this.activeState&&i.setItemState(e,this.activeState,!1),this.end(void 0,r)}},end:function(r,t){var e=this;if(!!this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}r&&this.activeState&&i.setItemState(r,this.activeState,!1),r||this.targets.map(function(o){e.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(r,t){var e=this;if(t(r)!==!1&&r){var i=r.get("combos");(0,on.S6)(i,function(o){e.traverse(o,t)});var a=r.get("nodes");(0,on.S6)(a,function(o){e.traverse(o,t)})}},updateCombo:function(r,t){var e=this;this.traverse(r,function(i){return i.destroyed?!1:(e.updateSignleItem(i,t),!0)})},updateSignleItem:function(r,t){var e=this.origin,i=this.graph,a=r.getModel(),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=t.x-e.x+this.point[o].x,l=t.y-e.y+this.point[o].y;i.updateItem(r,{x:s,y:l})},getParentCombo:function(r){var t=this.graph;if(!!r){var e=t.findById(r);if(!!e)return e}},updateDelegate:function(r){var t=this.graph;if(this.delegateShape){var v=r.x-this.origin.x+this.originPoint.minX,g=r.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:v,y:g})}else{var e=t.get("delegateGroup"),i=null;this.targets.length>1?i=wm(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,f=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:f};var c=(0,B.__assign)((0,B.__assign)({},Ue.delegateStyle),this.delegateStyle);this.delegateShape=e.addShape("rect",{attrs:(0,B.__assign)({width:i.width,height:i.height,x:i.x,y:i.y},c),name:"combo-delegate-shape"})}}},Gm="dblclick",KR=["click","dblclick"],$R={getDefaultCfg:function(){return{trigger:Gm,relayout:!0}},getEvents:function(){var r,t;return KR.includes(this.trigger)?t=this.trigger:(t=Gm,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["combo:"+t]="onComboClick",r},onComboClick:function(r){var t=r.item,e=this,i=e.graph,a=e.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;!s||(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}},zm=function(r,t,e){return r>=t&&r<=e},Is=function(r,t,e,i){var a=.001,o={x:e.x-r.x,y:e.y-r.y},s={x:t.x-r.x,y:t.y-r.y},l={x:i.x-e.x,y:i.y-e.y},u=s.x*l.y-s.y*l.x,f=u*u,c=s.x*s.x+s.y*s.y,v=l.x*l.x+l.y*l.y,g=null;if(f>a*c*v){var C=(o.x*l.y-o.y*l.x)/u,O=(o.x*s.y-o.y*s.x)/u;zm(C,0,1)&&zm(O,0,1)&&(g={x:r.x+C*s.x,y:r.y+C*s.y})}return g},Xm=function(r,t){var e=r.x,i=r.y,a=r.width,o=r.height,s=e+a/2,l=i+o/2,u=[],f={x:s,y:l};u.push({x:e,y:i}),u.push({x:e+a,y:i}),u.push({x:e+a,y:i+o}),u.push({x:e,y:i+o}),u.push({x:e,y:i});for(var c=null,v=1;v<u.length&&(c=Is(u[v-1],u[v],f,t),!c);v++);return c},Vm=function(r,t){var e=r.x,i=r.y,a=r.r,o=t.x,s=t.y,l=o-e,u=s-i,f=Math.sqrt(l*l+u*u);if(f<a)return null;var c=Math.sign(l),v=Math.sign(u),g=Math.atan(u/l);return{x:e+Math.abs(a*Math.cos(g))*c,y:i+Math.abs(a*Math.sin(g))*v}},Hm=function(r,t){var e=r.rx,i=r.ry,a=r.x,o=r.y,s=t.x-a,l=t.y-o,u=Math.atan2(l/i,s/e);return u<0&&(u+=2*Math.PI),{x:a+e*Math.cos(u),y:o+i*Math.sin(u)}},ks=function(r,t,e){e===void 0&&(e=1);var i=[r.x,r.y,e];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Dm.transformMat3(i,i,t),{x:i[0],y:i[1]}},Wm=function(r,t,e){e===void 0&&(e=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var i=qa.invert([],t);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[r.x,r.y,e];return Dm.transformMat3(a,a,i),{x:a[0],y:a[1]}},Df=function(r,t,e){var i=r.x-t.x,a=r.y-t.y,o=r.x-e.x,s=r.y-e.y,l=(r.x*r.x-t.x*t.x-t.y*t.y+r.y*r.y)/2,u=(r.x*r.x-e.x*e.x-e.y*e.y+r.y*r.y)/2,f=a*o-i*s;return{x:-(s*l-a*u)/f,y:-(i*u-o*l)/f}},Os=function(r,t){var e=r.x-t.x,i=r.y-t.y;return Math.sqrt(e*e+i*i)},jm=function(r,t){var e=[];return r.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*t)}),e.push(a)}),e},Ff=function(r){for(var t=[],e=r.length,i=0;i<e;i+=1){t[i]=[];for(var a=0;a<e;a+=1)i===a?t[i][a]=0:r[i][a]===0||!r[i][a]?t[i][a]=Infinity:t[i][a]=r[i][a]}for(var o=0;o<e;o+=1)for(var i=0;i<e;i+=1)for(var a=0;a<e;a+=1)t[i][a]>t[i][o]+t[o][a]&&(t[i][a]=t[i][o]+t[o][a]);return t},Rf=function(r,t){var e=r.nodes,i=r.edges,a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,f=o[l],c=o[u];a[f][c]=1,t||(a[c][f]=1)}),a},Um=function(r,t){r.translate(t.x,t.y)},Zm=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var i=r.getCanvasBBox(),a=t.x-i.minX,o=t.y-i.minY,s=Oa(e,[["t",a,o]]);r.setMatrix(s)},QR=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var i=t;(0,kn.default)(t)||(i=[t,t]),(0,kn.default)(t)&&t.length===1&&(i=[t[0],t[0]]),e=Oa(e,[["s",i[0],i[1]]]),r.setMatrix(e)},JR=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]),e=Oa(e,[["r",t]]),r.setMatrix(e)},iu=function(r,t,e){for(var i=[],a=0;a<r;a++)i[a]=0;return e.forEach(function(o){o.source&&(i[t[o.source]]+=1),o.target&&(i[t[o.target]]+=1)}),i};function qR(n,r,t){return(t[0]-n[0])*(r[1]-n[1])==(r[0]-n[0])*(t[1]-n[1])&&Math.min(n[0],r[0])<=t[0]&&t[0]<=Math.max(n[0],r[0])&&Math.min(n[1],r[1])<=t[1]&&t[1]<=Math.max(n[1],r[1])}var Bs=function(r,t,e){var i=!1,a=r.length,o=1e-6;function s(c){return Math.abs(c)<o?0:c<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=r[l],f=r[(l+1)%a];if(qR(u,f,[t,e]))return!0;s(u[1]-e)>0!=s(f[1]-e)>0&&s(t-(e-u[1])*(u[0]-f[0])/(u[1]-f[1])-u[0])<0&&(i=!i)}return i},Km=function(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)},tN=function(r,t){var e=!1;return(0,h.each)(r,function(i){if(Is(i.from,i.to,t.from,t.to))return e=!0,!1}),e},Nf=function(r,t){var e=function(v){var g=v.map(function(O){return O[0]}),C=v.map(function(O){return O[1]});return{minX:Math.min.apply(null,g),maxX:Math.max.apply(null,g),minY:Math.min.apply(null,C),maxY:Math.max.apply(null,C)}},i=function(v){for(var g=[],C=v.length,O=0;O<C-1;O++){var F=v[O],G=v[O+1];g.push({from:{x:F[0],y:F[1]},to:{x:G[0],y:G[1]}})}if(g.length>1){var Y=v[0],$=v[C-1];g.push({from:{x:$[0],y:$[1]},to:{x:Y[0],y:Y[1]}})}return g};if(r.length<2||t.length<2)return!1;var a=e(r),o=e(t);if(!Km(a,o))return!1;var s=!1;if((0,h.each)(t,function(c){if(Bs(r,c[0],c[1]))return s=!0,!1}),s||((0,h.each)(r,function(c){if(Bs(t,c[0],c[1]))return s=!0,!1}),s))return!0;var l=i(r),u=i(t),f=!1;return(0,h.each)(u,function(c){if(tN(l,c))return f=!0,!1}),f},Bo=function(){function n(r,t,e,i){this.x1=r,this.y1=t,this.x2=e,this.y2=i}return n.prototype.getBBox=function(){var r=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),e=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:r,y:t,minX:r,minY:t,maxX:e,maxY:i,width:e-r,height:i-t};return a},n}(),Yf=function(r,t){var e={top:[r.minX,r.minY,r.maxX,r.minY],left:[r.minX,r.minY,r.minX,r.maxY],bottom:[r.minX,r.maxY,r.maxX,r.maxY],right:[r.maxX,r.minY,r.maxX,r.maxY]};return e[t]},eN=function(r,t){var e=(t.x2-t.x1)*(r.y1-t.y1)-(t.y2-t.y1)*(r.x1-t.x1),i=(r.x2-r.x1)*(r.y1-t.y1)-(r.y2-r.y1)*(r.x1-t.x1),a=(t.y2-t.y1)*(r.x2-r.x1)-(t.x2-t.x1)*(r.y2-r.y1);if(a){var o=e/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},$m=function(r,t){for(var e=["top","left","bottom","right"],i=r.getBBox(),a=0,o=[],s=0;s<4;s++){var l=Yf(i,e[s]),u=l[0],f=l[1],c=l[2],v=l[3];o[s]=Is({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u,y:f},{x:c,y:v}),o[s]&&(a+=1)}return[o,a]},Gf=function(r,t){for(var e=["top","left","bottom","right"],i=r.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=Yf(i,e[s]),u=l[0],f=l[1],c=l[2],v=l[3],g=eN(t,new Bo(u,f,c,v));g=Math.abs(g-.5),g>=0&&g<=1&&(o+=1,a=g<a?g:a)}return o===0?-1:a},Qm=function(r){var t=0,e=0;if(r.length>0){for(var i=0,a=r;i<a.length;i++){var o=a[i];t+=o.x,e+=o.y}t/=r.length,e/=r.length}return{x:t,y:e}},nu=function(r,t){return Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)},Jm=function(r,t){var e=t.x1,i=t.y1,a=t.x2-e,o=t.y2-i,s=r.x-e,l=r.y-i,u=s*a+l*o,f;u<=0?f=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?f=0:f=u*u/(a*a+o*o));var c=s*s+l*l-f;return c<0&&(c=0),c},zf=function(r,t,e){return e===void 0&&(e=.001),Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)<Math.pow(e,2)},qm=function(r,t){var e=r.x<t.x,i=r.x>t.x+t.width,a=r.y>t.y+t.height,o=r.y<t.y,s=e||i||a||o;if(!s)return 0;if(a&&!e&&!i)return Math.pow(t.y+t.height-r.y,2);if(o&&!e&&!i)return Math.pow(r.y-t.y,2);if(e&&!a&&!o)return Math.pow(t.x-r.x,2);if(i&&!a&&!o)return Math.pow(t.x+t.width-r.x,2);var l=Math.min(Math.abs(t.x-r.x),Math.abs(t.x+t.width-r.x)),u=Math.min(Math.abs(t.y-r.y),Math.abs(t.y+t.height-r.y));return l*l+u*u},rN=function(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,i){if(e.charAt(0)==="\\")return e.slice(1);var a=t[i];return a===0&&(a="0"),a||""})},tx=function(r){var t=[];if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);for(var e=0,i=r;e<i.length;e++){var a=i[e],o=a.x,s=a.y;t.push(o),t.push(s)}var l=(0,qs.catmullRom2Bezier)(t);return l.unshift(["M",r[0].x,r[0].y]),l},au=function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var a={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y},o=[];$i.normalize(o,[t.x-r.x,t.y-r.y]),o.length===0&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},ex=function(r,t){var e=r.length;if(!e)return"";for(var i="",a="",o=0;o<e;o++){var s=r[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=rN(a,s)}return t&&(i+="Z"),i},ou=function(r){var t=[];return r.forEach(function(e){var i=e[0];if(i!=="A")for(var a=1;a<e.length;a=a+2)t.push([e[a],e[a+1]]);else{var o=e.length;t.push([e[o-2],e[o-1]])}}),t},Xf=function(r){if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);var t=r[0],e=r[1],i=r[r.length-1],a=r[r.length-2];r.unshift(i),r.unshift(a),r.push(t),r.push(e);for(var o=[],s=1;s<r.length-2;s+=1){var l=r[s-1].x,u=r[s-1].y,f=r[s].x,c=r[s].y,v=r[s+1].x,g=r[s+1].y,C=s!==r.length-2?r[s+2].x:v,O=s!==r.length-2?r[s+2].y:g,F=f+(v-l)/6,G=c+(g-u)/6,Y=v-(C-f)/6,$=g-(O-c)/6;o.push(["C",F,G,Y,$,v,g])}return o.unshift(["M",i.x,i.y]),o},rx=function(r,t){return $i.scale([],$i.normalize([],r),t)},ix=function(r,t){var e=[r[1]-t[1],t[0]-r[0]],i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[e[0]/i,e[1]/i]},nx=function(r,t){return[t[0]-r[0],t[1]-r[1]]};function ax(n,r){var t=function(c){var v=[c[0][0],c[0][1]-r],g=[c[0][0],c[0][1]+r];return"M "+v+" A "+r+","+r+",0,0,0,"+g+" A "+r+","+r+",0,0,0,"+v},e=function(c){var v=$i.scale([],ix(c[0],c[1]),r),g=$i.scale([],v,-1),C=$i.add([],c[0],v),O=$i.add([],c[1],v),F=$i.add([],c[1],g),G=$i.add([],c[0],g);return"M "+C+" L "+O+" A "+[r,r,"0,0,0",F].join(",")+" L "+G+" A "+[r,r,"0,0,0",C].join(",")};if(!n||n.length<1)return"";if(n.length===1)return t(n);if(n.length===2)return e(n);for(var i=new Array(n.length),a=0;a<i.length;++a){var o=a===0?n[n.length-1]:n[a-1],s=n[a],l=$i.scale([],ix(o,s),r);i[a]=[$i.add([],o,l),$i.add([],s,l)]}var u="A "+[r,r,"0,0,0,"].join(",");return i=i.map(function(f,c){var v="";return c===0&&(v="M "+i[i.length-1][1]+" "),v+=u+f[0]+" L "+f[1],v}),i.join(" ")}function ox(n,r){var t=n.length,e=function(f){var c=[f[0][0],f[0][1]-r],v=[f[0][0],f[0][1]+r];return"M "+c+" A "+[r,r,"0,0,0",v].join(",")+" A "+[r,r,"0,0,0",c].join(",")},i=function(f){var c=nx(f[0],f[1]),v=rx(c,r),g=$i.add([],f[0],$i.scale([],v,-1)),C=$i.add([],f[1],v),O=1.2*r,F=rx($i.normalize([],c),O),G=$i.scale([],F,-1),Y=$i.add([],g,G),$=$i.add([],C,G),q=$i.add([],g,F);return"M "+g+" C "+[Y,$,C].join(",")+" S "+[q,g].join(",")+" Z"};if(!n||t<1)return"";if(t===1)return e(n);if(t===2)return i(n);for(var a=n.map(function(u,f){var c=n[(f+1)%t];return{p:u,v:$i.normalize([],nx(u,c))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,l=$i.normalize([],$i.add([],a[s].v,$i.scale([],a[o].v,-1)));a[o].p=$i.add([],a[o].p,$i.scale([],l,r))}return a.map(function(u){var f=u.p;return{x:f[0],y:f[1]}})}var sx="shift",iN=["drag","shift","ctrl","alt","control"],nN=function(r,t){var e,i=r.getKeyShape();if(r.get("type")==="path")e=ou(i.attr("path"));else{var a=i.getCanvasBBox();e=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return Nf(t,e)},aN={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:sx,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return iN.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=sx,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(r){var t=this.lasso,e=r.item;e||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:r.x,y:r.y},this.points.push(this.originPoint),t.show())},onDragMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:r.x,y:r.y}),this.updateLasso(r))},onDragEnd:function(r){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var r=this.points,t=[];return r.length&&(r.forEach(function(e,i){i===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t.push(["L",r[0].x,r[0].y])),t},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,i=t.findAllByState("node",e),a=t.findAllByState("edge",e);i.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var r=this,t=this,e=t.graph,i=t.shouldUpdate,a=this.points.map(function(f){return[e.getCanvasByPoint(f.x,f.y).x,e.getCanvasByPoint(f.x,f.y).y]}),o=this.selectedState,s=[],l=[];e.getNodes().forEach(function(f){if(nN(f,a)&&i(f,"select")){s.push(f);var c=f.getModel();l.push(c.id),e.setItemState(f,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(f){var c=f.getOutEdges();c.forEach(function(v){var g=v.getModel(),C=g.source,O=g.target;l.includes(C)&&l.includes(O)&&i(v,"select")&&(u.push(v),e.setItemState(v,r.selectedState,!0))})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),e.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var r=this,t=r.graph.get("delegateGroup").addShape("path",{attrs:(0,B.__assign)({path:[]},r.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.points=[],t},updateLasso:function(r){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},lx="click",oN=["click","drag"],ux=void 0,sN=["shift","ctrl","control","alt","meta",void 0],lN={getDefaultCfg:function(){return{trigger:lx,key:ux,edgeConfig:{}}},getEvents:function(){var r=this;oN.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=lx,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),r.key&&sN.indexOf(r.key.toLowerCase())===-1&&(r.trigger=ux,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return r.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:r.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),r.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item;(!e||e.getID()===t.source||e.getType()!=="node")&&t.cancelCreating({item:t.edge,x:r.x,y:r.y})}},onClick:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item,i=t.graph,a=e.getModel();if(t.addingEdge&&t.edge){if(!t.shouldEnd.call(t,r))return;var o={target:a.id};t.source===a.id&&(o.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(t.edge,o),i.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin.call(t,r))return;t.edge=i.addItem("edge",(0,B.__assign)({source:a.id,target:a.id},t.edgeConfig),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(r){var t=this;if(!(t.key&&!t.keydown)){var e={x:r.x,y:r.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:e},!1)}},cancelCreating:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=t.graph,i=r.item;if(t.addingEdge&&r.target&&r.target.isCanvas&&r.target.isCanvas()){e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1;return}if(t.addingEdge&&t.edge===i){var a=!0;if(!e.get("groupByTypes"))for(var o=r.x,s=r.y,l=e.getNodes(),u=l.length,f=0;f<u;f++){var c=l[f],v=c.getModel(),g=c.getBBox();if(o<=g.maxX&&o>=g.minX&&s<=g.maxY&&s>=g.minY){if(!t.shouldEnd.call(t,{x:r.x,y:r.y,canvasX:r.canvasX,canvasY:r.canvasY,clientX:r.clientX,clientY:r.clientY,item:c}))return;e.emit("beforecreateedge",{}),e.updateItem(t.edge,{target:v.id}),e.emit("aftercreateedge",{edge:t.edge}),a=!1;break}}a&&e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1}}},onKeyDown:function(r){var t=this,e=r.key;!e||(e.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var r=this;r.addingEdge&&r.edge&&(r.graph.removeItem(r.edge,!1),r.addingEdge=!1,r.edge=null),this.keydown=!1}},hx="ctrl",uN=["shift","ctrl","alt","control"],hN="1",fN={getDefaultCfg:function(){return{trigger:hx,combinedKey:hN,functionName:"fitView",functionParams:[]}},getEvents:function(){return uN.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=hx,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),i=t.toLowerCase();this.triggerKeydown||(i===e||i==="control"&&e==="ctrl"||i==="ctrl"&&e==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},cN={"drag-canvas":wR,"zoom-canvas":RR,"drag-node":LR,"activate-relations":IR,"brush-select":OR,"click-select":DR,"lasso-select":aN,tooltip:NR,"edge-tooltip":YR,"drag-group":GR,"drag-node-with-group":XR,"collapse-expand-group":HR,"collapse-expand":jR,"drag-combo":ZR,"collapse-expand-combo":$R,"create-edge":lN,"shortcuts-call":fN};(0,zi.default)(cN,function(n,r){Pf.registerBehavior(r,n)});var fx=Pf,Do=d(5162),Ds=d(40169),Sa=d(64916),cx=d(97395),vN=function(r){var t=(0,cx.default)(r.groups,"id"),e=(0,cx.default)(r.groups,"parentId"),i={};for(var a in e)if(!!a){var o=e[a],s=t[a];if(s&&o){var l=(0,B.__spreadArrays)(o,s);i[a]=l}else o&&(i[a]=o)}var u=(0,B.__assign)((0,B.__assign)({},t),i),f={};for(var c in u)if(!(!c||c==="undefined")){var o=u[c].map(function(O){return O.id});f[c]=o}var v={},g=function(O){if(!O||O==="undefined")return"continue";for(var F=f[O],G=[],Y=0,$=F;Y<$.length;Y++){var q=$[Y],ut=u[q].map(function(Nt){return Nt.id});G.push.apply(G,ut)}var kt=r.nodes?r.nodes.filter(function(Nt){return G.indexOf(Nt.groupId)>-1||G.indexOf(Nt.parentId)>-1}).map(function(Nt){return Nt.id}):[];v[O]=kt};for(var c in f)g(c);return v},dN=function(){function n(r){this.graph=r,this.destroyed=!1,this.modes=r.get("modes")||{default:[]},this.formatModes(),this.mode=r.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return n.prototype.formatModes=function(){var r=this.modes;(0,zi.default)(r,function(t){(0,zi.default)(t,function(e,i){(0,ki.default)(e)&&(t[i]={type:e})})})},n.prototype.setBehaviors=function(r){var t=this.graph,e=this.modes[r],i=[],a;(0,zi.default)(e||[],function(o){var s=Pf.getBehavior(o.type);!s||(a=new s(o),a&&(a.bind(t),i.push(a)))}),this.currentBehaves=i},n.mergeBehaviors=function(r,t){return(0,zi.default)(t,function(e){r.indexOf(e)<0&&((0,ki.default)(e)&&(e={type:e}),r.push(e))}),r},n.filterBehaviors=function(r,t){var e=[];return r.forEach(function(i){var a="";(0,ki.default)(i)?a=i:a=i.type,t.indexOf(a)<0&&e.push(i)}),e},n.prototype.setMode=function(r){var t=this,e=t.modes,i=t.graph,a=r,o=e[a];!o||(i.emit("beforemodechange",{mode:r}),(0,zi.default)(this.currentBehaves,function(s){s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:r}),this.mode=r)},n.prototype.getMode=function(){return this.mode},n.prototype.manipulateBehaviors=function(r,t,e){var i=this,a;if((0,kn.default)(r)?a=r:a=[r],(0,kn.default)(t))return(0,zi.default)(t,function(s){i.modes[s]?e?i.modes[s]=n.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=n.filterBehaviors(i.modes[s]||[],a):e&&(i.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||e&&(this.modes[o]=a),e?this.modes[o]=n.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=n.filterBehaviors(this.modes[o]||[],a),this.setMode(this.mode),this},n.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},n}(),pN=dN,gN=function(){function n(r){this.destroyed=!1,this.graph=r,this.destroyed=!1}return n.prototype.getViewCenter=function(){var r=this.getFormatPadding(),t=this.graph,e=this.graph.get("width"),i=t.get("height");return{x:(e-r[1]-r[3])/2+r[3],y:(i-r[0]-r[2])/2+r[0]}},n.prototype.fitCenter=function(){var r=this.graph,t=r.get("group");t.resetMatrix();var e=t.getCanvasBBox();if(!(e.width===0||e.height===0)){var i=this.getViewCenter(),a={x:e.x+e.width/2,y:e.y+e.height/2};r.translate(i.x-a.x,i.y-a.y)}},n.prototype.fitView=function(){var r=this.graph,t=this.getFormatPadding(),e=r.get("width"),i=r.get("height"),a=r.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var s=this.getViewCenter(),l={x:o.x+o.width/2,y:o.y+o.height/2};r.translate(s.x-l.x,s.y-l.y);var u=(e-t[1]-t[3])/o.width,f=(i-t[0]-t[2])/o.height,c=u;u>f&&(c=f),r.zoom(c,s)}},n.prototype.getFormatPadding=function(){var r=this.graph.get("fitViewPadding");return If(r)},n.prototype.focusPoint=function(r,t,e){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var l=(o.x-r.x)*s[0],u=(o.y-r.y)*s[4],f=0,c=0,v=0,g=0;this.graph.get("canvas").animate(function(C){v=l*C,g=u*C,i.graph.translate(v-f,g-c),f=v,c=g},(0,B.__assign)({},e))}else this.graph.translate((o.x-r.x)*s[0],(o.y-r.y)*s[4])},n.prototype.getPointByCanvas=function(r,t){var e=this.graph.get("group").getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var i=Wm({x:r,y:t},e);return i},n.prototype.getPointByClient=function(r,t){var e=this.graph.get("canvas"),i=e.getPointByClient(r,t);return this.getPointByCanvas(i.x,i.y)},n.prototype.getClientByPoint=function(r,t){var e=this.graph.get("canvas"),i=this.getCanvasByPoint(r,t),a=e.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},n.prototype.getCanvasByPoint=function(r,t){var e=this.graph.get("group").getMatrix();return e||(e=[1,0,0,0,1,0,0,0,1]),ks({x:r,y:t},e)},n.prototype.focus=function(r,t,e){(0,ki.default)(r)&&(r=this.graph.findById(r));var i=r.get("group"),a=i.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r&&this.focusPoint({x:a[6],y:a[7]},t,e)},n.prototype.changeSize=function(r,t){var e=this.graph;if(!(0,wa.default)(r)||!(0,wa.default)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");e.set({width:r,height:t});var i=e.get("canvas");i.changeSize(r,t);var a=e.get("plugins");a.forEach(function(o){if(o.get("gridContainer")){var s=e.get("minZoom");(0,Vi.Z)(o.get("container"),{width:r+"px",height:t+"px"}),(0,Vi.Z)(o.get("gridContainer"),{width:r/s+"px",height:t/s+"px",left:0,top:0})}})},n.prototype.destroy=function(){this.graph=null,this.destroyed=!1},n}(),yN=gN,Fs=d(9159),su=d(78435),mN=function(){function n(r){this.preItem=null,this.graph=r,this.extendEvents=[],this.dragging=!1,this.destroyed=!1,this.initEvents()}return n.prototype.initEvents=function(){var r=this,t=r.graph,e=r.extendEvents,i=t.get("canvas"),a=i.get("el"),o=(0,su.default)(this,"onCanvasEvents"),s=(0,su.default)(this,"onExtendEvents"),l=(0,su.default)(this,"onWheelEvent");i.on("*",o),this.canvasHandler=o,e.push((0,Fs.Z)(a,"DOMMouseScroll",l)),e.push((0,Fs.Z)(a,"mousewheel",l)),typeof window!="undefined"&&(e.push((0,Fs.Z)(window,"keydown",s)),e.push((0,Fs.Z)(window,"keyup",s)),e.push((0,Fs.Z)(window,"focus",s)))},n.getItemRoot=function(r){for(;r&&!r.get("item");)r=r.get("parent");return r},n.prototype.onCanvasEvents=function(r){var t=this.graph,e=t.get("canvas"),i=r.target,a=r.type;r.canvasX=r.x,r.canvasY=r.y;var o={x:r.canvasX,y:r.canvasY},s=t.get("group"),l=s.getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),bm(l)&&(o=t.getPointByClient(r.clientX,r.clientY)),r.x=o.x,r.y=o.y,r.currentTarget=t,i===e){a==="mousemove"&&this.handleMouseMove(r,"canvas"),r.target=e,r.item=null,t.emit(a,r),t.emit("canvas:"+a,r);return}var u=n.getItemRoot(i);if(!u){t.emit(a,r);return}var f=u.get("item");if(!f.destroyed){var c=f.getType();if(r.target=i,r.item=f,r.canvasX===r.x&&r.canvasY===r.y){var v=t.getCanvasByPoint(r.x,r.y);r.canvasX=v.x,r.canvasY=v.y}t.emit(a,r),r.name&&!r.name.includes(":")?t.emit(c+":"+a,r):t.emit(r.name,r),a==="dragstart"&&(this.dragging=!0),a==="dragend"&&(this.dragging=!1),a==="mousemove"&&this.handleMouseMove(r,c)}},n.prototype.onExtendEvents=function(r){this.graph.emit(r.type,r)},n.prototype.onWheelEvent=function(r){(0,In.default)(r.wheelDelta)&&(r.wheelDelta=-r.detail),this.graph.emit("wheel",r)},n.prototype.handleMouseMove=function(r,t){var e=this,i=e.graph,a=e.preItem,o=i.get("canvas"),s=r.target===o?null:r.item;r=Jl(r),a&&a!==s&&!a.destroyed&&(r.item=a,this.emitCustomEvent(a.getType(),"mouseleave",r),this.dragging&&this.emitCustomEvent(a.getType(),"dragleave",r)),s&&a!==s&&(r.item=s,this.emitCustomEvent(t,"mouseenter",r),this.dragging&&this.emitCustomEvent(t,"dragenter",r)),this.preItem=s},n.prototype.emitCustomEvent=function(r,t,e){e.type=t,this.graph.emit(r+":"+t,e)},n.prototype.destroy=function(){var r=this,t=r.graph,e=r.canvasHandler,i=r.extendEvents,a=t.get("canvas");a.off("*",e),(0,zi.default)(i,function(o){o.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},n}(),xN=mN,vx=d(23098),dx=d(41367),px=d(18092),bN=d(87293),wN={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},pa=Math.PI,Vf=Math.sin,Hf=Math.cos,Bn=Vf(pa/8),Dn=Hf(pa/8),lu=function(r,t){var e=r.getBBox(),i={x:e.minX,y:e.minY},a={x:e.maxX,y:e.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=ks(i,o),a=ks(a,o)}var s=i.x,l=i.y,u=a.x,f=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:f,width:u-s,height:f-l}},gx=function(r){var t=r.sourceNode||r.targetNode,e=t.get("group"),i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=r.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||Ue.defaultLoopPosition,f=[i[6],i[7]],c=[r.startPoint.x,r.startPoint.y],v=[r.endPoint.x,r.endPoint.y],g=o.height/2,C=o.height/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn;if(c[0]===v[0]&&c[1]===v[1]){switch(u){case"top":c=[f[0]-O,f[1]-F],v=[f[0]+G,f[1]-Y];break;case"top-right":g=o.height/2,C=o.width/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]+O,f[1]-F],v=[f[0]+Y,f[1]-G];break;case"right":g=o.width/2,C=o.width/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]+F,f[1]-O],v=[f[0]+Y,f[1]+G];break;case"bottom-right":g=o.width/2,C=o.height/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]+F,f[1]+O],v=[f[0]+G,f[1]+Y];break;case"bottom":g=o.height/2,C=o.height/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]+O,f[1]+F],v=[f[0]-G,f[1]+Y];break;case"bottom-left":g=o.height/2,C=o.width/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]-O,f[1]+F],v=[f[0]-Y,f[1]+G];break;case"left":g=o.width/2,C=o.width/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]-F,f[1]+O],v=[f[0]-Y,f[1]-G];break;case"top-left":g=o.width/2,C=o.height/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]-F,f[1]-O],v=[f[0]-G,f[1]-Y];break;default:g=o.width/2,C=o.width/2,O=g*Bn,F=g*Dn,G=C*Bn,Y=C*Dn,c=[f[0]-O,f[1]-F],v=[f[0]+G,f[1]-Y]}if(s.clockwise===!1){var $=[c[0],c[1]];c=[v[0],v[1]],v=[$[0],$[1]]}}var q=[c[0]-f[0],c[1]-f[1]],ut=(g+l)/g,kt=(C+l)/C;s.clockwise===!1&&(ut=(C+l)/C,kt=(g+l)/g);var Nt=$i.scale([],q,ut),Wt=[f[0]+Nt[0],f[1]+Nt[1]],Ft=[v[0]-f[0],v[1]-f[1]],ee=$i.scale([],Ft,kt),ve=[f[0]+ee[0],f[1]+ee[1]];return r.startPoint={x:c[0],y:c[1]},r.endPoint={x:v[0],y:v[1]},r.controlPoints=[{x:Wt[0],y:Wt[1]},{x:ve[0],y:ve[1]}],r},uu=function(r,t,e,i,a){var o=1e-4,s=[],l=r.getPoint(t);if(l===null)return{x:0,y:0,angle:0};if(t<o)s=r.getStartTangent().reverse();else if(t>1-o)s=r.getEndTangent();else{var u=r.getPoint(t+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var f=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(f<0&&(f+=pa*2),e&&(l.x+=Hf(f)*e,l.y+=Vf(f)*e),i){var c=f-pa/2;f>1/2*pa&&f<3*1/2*pa&&(c-=pa),l.x+=Hf(c)*i,l.y+=Vf(c)*i}var v={x:l.x,y:l.y,angle:f};return a?(f>1/2*pa&&f<3*1/2*pa&&(f-=pa),(0,B.__assign)({rotate:f},v)):v},yx=function n(r,t){if(t(r)===!1)return!1;if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!n(r.children[e],t))return!1}return!0},SN=function n(r,t){if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!n(r.children[e],t))return}return t(r)!==!1},Wn=function(r,t){typeof t=="function"&&yx(r,t)},ga=function(r,t){typeof t=="function"&&SN(r,t)},mx=function(r,t){var e=["V","TB","BT"],i={x:Infinity,y:Infinity},a={x:-Infinity,y:-Infinity},o="x",s="y";t&&e.indexOf(t)>=0&&(s="x",o="y");var l=0;Wn(r,function(c){return l++,c.x>a.x&&(a.x=c.x),c.x<i.x&&(i.x=c.x),c.y>a.y&&(a.y=c.y),c.y<i.y&&(i.y=c.y),!0});var u=pa*2/l,f=a[s]-i[s];return f===0||Wn(r,function(c){var v=(c[s]-i[s])/f*(pa*2-u)+u,g=Math.abs(o==="x"?c.x-r.x:c.y-r.y);return c.x=g*Math.cos(v),c.y=g*Math.sin(v),!0}),r},xx=function(r,t){return t*(wN[r]||1)},bx=function(r,t){var e=0,i=new RegExp("[\u4E00-\u9FA5]+");return r.split("").forEach(function(a){i.test(a)?e+=t:e+=xx(a,t)}),[e,t]},Wf=function(r,t){var e=[],i={},a={};r.forEach(function(s){a[s.id]=s}),r.forEach(function(s,l){var u=(0,h.clone)(s);u.itemType="combo",u.children=void 0,u.parentId===u.id?(console.warn("The parentId for combo "+u.id+" can not be the same as the combo's id"),delete u.parentId):u.parentId&&!a[u.parentId]&&(console.warn("The parent combo for combo "+u.id+" does not exist!"),delete u.parentId);var f=i[u.id];if(f){if(u.children=f.children,i[u.id]=u,f=u,!f.parentId){e.push(f);return}var c=i[f.parentId];if(c)c.children?c.children.push(u):c.children=[u];else{var v={id:f.parentId,children:[f]};i[f.parentId]=v,i[u.id]=u}return}if((0,h.isString)(s.parentId)){var g=i[s.parentId];if(g)g.children?g.children.push(u):g.children=[u],i[u.id]=u;else{var C={id:s.parentId,children:[u]};i[C.id]=C,i[u.id]=u}}else e.push(u),i[u.id]=u});var o={};return(t||[]).forEach(function(s){o[s.id]=s;var l=i[s.comboId];if(l){var u={id:s.id,comboId:s.comboId};l.children?l.children.push(u):l.children=[u],u.itemType="node",i[s.id]=u}}),e.forEach(function(s){s.depth=0,yx(s,function(l){var u,f=i[l.id].itemType;f==="node"?u=i[l.comboId]:u=i[l.parentId],u?f==="node"?l.depth=u.depth+1:l.depth=u.depth+2:l.depth=0;var c=o[l.id];return c&&(c.depth=l.depth),!0})}),e},jf=function(r,t,e){var i=r,a,o={root:{children:r}},s=!1,l="root";(r||[]).forEach(function(g){if(!s){if(g.id===t){a=g,g.itemType==="combo"?a.parentId=e:a.comboId=e,s=!0;return}Wn(g,function(C){return o[C.id]={children:C.children},i=o[C.parentId||C.comboId||"root"].children,C&&(C.removed||t===C.id)&&i?(l=C.parentId||C.comboId||"root",a=C,C.itemType==="combo"?a.parentId=e:a.comboId=e,s=!0,!1):!0})}}),i=o[l].children;var u=i?i.indexOf(a):-1;if(u>-1&&i.splice(u,1),s||(a={id:t,itemType:"node",comboId:e},o[t]={children:void 0}),t){var f=!1;if(e){var c=0;(r||[]).forEach(function(g){f||Wn(g,function(C){return e===C.id?(f=!0,C.children?C.children.push(a):C.children=[a],c=C.depth,a.itemType==="node"?a.depth=c+2:a.depth=c+1,!1):!0})})}else(!e||!f)&&a.itemType!=="node"&&r.push(a);var v=a.depth;Wn(a,function(g){return g.itemType==="node"?v+=2:v+=1,g.depth=v,!0})}return r},Uf=function(r,t){var e={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!r||r.length===0||(r.forEach(function(i){var a=t.findById(i.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&e.minX>o.minX&&(e.minX=o.minX),o.y&&e.minY>o.minY&&(e.minY=o.minY),o.x&&e.maxX<o.maxX&&(e.maxX=o.maxX),o.y&&e.maxY<o.maxY&&(e.maxY=o.maxY)}}),e.x=(e.minX+e.maxX)/2,e.y=(e.minY+e.maxY)/2,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,Object.keys(e).forEach(function(i){(e[i]===Infinity||e[i]===-Infinity)&&(e[i]=void 0)})),e},CN=function(r){var t=r.group,e=r.height,i=r.width,a=r.x,o=r.y,s=t.get("canvas"),l=s.get("width"),u=s.get("height"),f={start:{x:0,y:0},end:{x:0,y:0}};return f.start.x=a/l,f.start.y=o/u,f.end.x=(a+i)/l,f.end.y=(o+e)/u,f};function hu(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hu=function(t){return typeof t}:hu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(n)}function wx(n){if(typeof n!="string")return n;var r=function(Nt){if(typeof Nt!="string")return Nt;try{return JSON.parse(Nt.trim())}catch(Wt){return Nt.trim()}},t=r(n);if(typeof t!="string")return t;for(var e=function(Nt){return Nt[Nt.length-1]},i=n.trim(),a=[],o=[],s=function(){for(var Nt=[],Wt=0;Wt<arguments.length;Wt++)Nt[Wt]=arguments[Wt];return Nt.some(function(Ft){return e(o)===Ft})},l=function(){return e(a)},u=null,f=0,c="";f<i.length;){var v=i[f],g=s('"',"'");if(!g&&!v.trim()){f+=1;continue}var C=i[f-1]==="\\",O=s("}"),F=s("]"),G=s(","),Y=l();if(g)if(e(o)===v&&!C){o.pop();var $=r(c);Y.push($),u=$,c=""}else c+=v;else if(F&&v===",")c&&(Y.push(r(c)),c="");else if(O&&v===":")o.push(","),c&&(Y.push(c),c="");else if(G&&v===",")c&&(Y.push(r(c)),c=""),o.pop();else if(v==="}"&&(O||G)){c&&(Y.push(r(c)),c=""),G&&o.pop();for(var q={},ut=1;ut<Y.length;ut+=2)q[Y[ut-1]]=Y[ut];a.pop(),a.length&&e(a).push(q),o.pop(),u=q}else v==="]"&&F?(c&&(Y.push(r(c)),c=""),a.pop(),a.length&&e(a).push(Y),o.pop(),u=Y):v==="{"?(a.push([]),o.push("}")):v==="["?(a.push([]),o.push("]")):v==='"'?o.push('"'):v==="'"?o.push("'"):c+=v;f+=1}return u||c}var MN=function(r){return r.split("-").reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})},EN=function(r){return function(t){for(var e=r.length,i=[],a=0,o="";a<e;)if(r[a]==="{"&&r[a+1]==="{")i.push(o),o="",a+=2;else if(r[a]==="}"&&r[a+1]==="}"){if(i.length){var s=i.pop();o=(0,bN.default)(t,o,s.endsWith("=")?'"{'+o+'}"':o),i.push(s+o)}a+=2,o=""}else o+=r[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'+l+'}"':l}).join("")}};function Sx(n,r){var t={},e=n.getAttributeNames&&n.getAttributeNames()||[],i=n.children&&Array.from(n.children).map(function(s){return Sx(s,r)}),a={},o=n.tagName?n.tagName.toLowerCase():"group";return o==="text"&&(t.text=n.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(e).forEach(function(s){var l=MN(s),u=n.getAttribute(s);try{if(l==="style"||l==="attrs"){var f=wx(u);t=(0,B.__assign)((0,B.__assign)({},t),f)}else a[l]=wx(u)}catch(c){if(l==="style")throw c;a[l]=u}}),a.attrs=t,r&&r.style&&a.name&&hu(r.style[a.name])==="object"&&(a.attrs=(0,B.__assign)((0,B.__assign)({},a.attrs),r.style[a.name])),r&&r.style&&a.keyshape&&(a.attrs=(0,B.__assign)((0,B.__assign)({},a.attrs),r.style)),i.length&&(a.children=i),a}function AN(n,r,t){var e=n.attrs,i=e===void 0?{}:e,a={x:r.x||0,y:r.y||0,width:t.width||0,height:t.height||0},o,s;switch(n.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=bx(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,n.attrs=(0,B.__assign)({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function Cx(n,r){var t;r===void 0&&(r={x:0,y:0});var e=(0,B.__assign)({x:0,y:0,width:0,height:0},r);if((t=n.children)===null||t===void 0?void 0:t.length){var i=n.attrs,a=i===void 0?{}:i,o=a.marginTop,s=(0,B.__assign)({},r);o&&(s.y+=o);for(var l=0;l<n.children.length;l++){n.children[l].attrs.key=(a.key||"root")+" -"+l+" ";var u=Cx(n.children[l],s);if(u.bbox){var f=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,f.width+f.x>e.width&&(e.width=f.width+f.x),f.height+f.y>e.height&&(e.height=f.height+f.y)}}}return n.bbox=AN(n,r,e),n.attrs=(0,B.__assign)((0,B.__assign)({},n.attrs),n.bbox),n}function Mx(n,r){var t,e,i,a,o=(n||{}).type,s=((r==null?void 0:r.attrs)||{}).key;if(s&&n&&(n.attrs.key=s),!n&&r)return{action:"delete",val:r,type:o,key:s};if(n&&!r)return{action:"add",val:n,type:o};if(!n&&!r)return{action:"same",type:o};var l=[];if(((t=n.children)===null||t===void 0?void 0:t.length)>0||((e=r.children)===null||e===void 0?void 0:e.length)>0)for(var u=Math.max((i=n.children)===null||i===void 0?void 0:i.length,(a=r.children)===null||a===void 0?void 0:a.length),f=r.children||[],c=n.children||[],v=0;v<u;v+=1)l.push(Mx(c[v],f[v]));var g=Object.keys(r.attrs),C=Object.keys(n.attrs);return r.type!==n.type?{action:"restructure",nowTarget:n,formerTarget:r,key:s,children:l}:g.filter(function(O){return O!=="children"}).some(function(O){return n.attrs[O]!==r.attrs[O]||!C.includes(O)})?{action:"change",val:n,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function Ex(n){var r={},t=function(i){var a=typeof n=="function"?n(i):n,o=EN(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=Cx(Sx(l,i));return s.remove(),u};return{draw:function(i,a){var o=t(i),s=a,l=function u(f){var c=f.attrs,v=c===void 0?{}:c,g=f.bbox,C=f.type,O=f.children,F=(0,B.__rest)(f,["attrs","bbox","type","children"]);if(f.type!=="group"){var G=a.addShape(f.type,(0,B.__assign)({attrs:v,origin:{bbox:g,type:C,children:O}},F));f.keyshape&&(s=G)}f.children&&f.children.forEach(function(Y){return u(Y)})};return l(o),r[i.id]=[o],s},update:function(i,a){r[i.id]||(r[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=t(i),u=r[i.id].pop(),f=Mx(l,u),c=function C(O){var F;O.type!=="group"&&o.addShape(O.type,{attrs:O.attrs}),((F=O.children)===null||F===void 0?void 0:F.length)&&O.children.map(function(G){return C(G)})},v=function C(O){var F,G=s.find(function(Y){return Y.attrs.key===O.attrs.key});G&&o.removeChild(G),((F=O.children)===null||F===void 0?void 0:F.length)&&O.children.map(function(Y){return C(Y)})},g=function C(O){var F=O.key;if(O.type!=="group"){var G=s.find(function($){return $.attrs.key===F});switch(O.action){case"change":if(G){var Y=O.val.keyshape?a.getOriginStyle():{};G.attr((0,B.__assign)((0,B.__assign)({},Y),O.val.attrs))}break;case"add":c(O.val);break;case"delete":v(O.val);break;case"restructure":v(O.formerTarget),c(O.nowTarget);break;default:break}}O.children&&O.children.forEach(function($){return C($)})};g(f),r[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Zf={};function Ax(n){return Zf[n]||(Zf[n]=(0,h.upperFirst)(n)),Zf[n]}var TN={defaultShapeType:"defaultType",className:null,getShape:function(r){var t=this,e=t[r]||t[t.defaultShapeType];return e},draw:function(r,t,e){var i=this.getShape(r),a=i.draw(t,e);return i.afterDraw&&i.afterDraw(t,e,a),a},baseUpdate:function(r,t,e){var i=this.getShape(r);i.update&&i.update(t,e),i.afterUpdate&&i.afterUpdate(t,e)},setState:function(r,t,e,i){var a=this.getShape(r);a.setState(t,e,i)},shouldUpdate:function(r){var t=this.getShape(r);return!!t.update},getControlPoints:function(r,t){var e=this.getShape(r);return e.getControlPoints(t)},getAnchorPoints:function(r,t){var e=this.getShape(r);return e.getAnchorPoints(t)}},Kf={options:{},draw:function(r,t){return this.drawShape(r,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.options.anchorPoints,e=r.anchorPoints||t;return e}},fu=function(){function n(){}return n.registerFactory=function(r,t){var e=Ax(r),i=TN,a=(0,B.__assign)((0,B.__assign)({},i),t);return n[e]=a,a.className=e,a},n.getFactory=function(r){var t=Ax(r);return n[t]},n.registerNode=function(r,t,e){var i=n.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Ex(t);a=(0,B.__assign)((0,B.__assign)({},i.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Ex(s);a=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},i.getShape("single-node")),o),t)}else{var l=e?i.getShape(e):Kf;a=(0,B.__assign)((0,B.__assign)({},l),t)}return a.type=r,a.itemType="node",i[r]=a,a},n.registerEdge=function(r,t,e){var i=n.Edge,a=e?i.getShape(e):Kf,o=(0,B.__assign)((0,B.__assign)({},a),t);return o.type=r,o.itemType="edge",i[r]=o,o},n.registerCombo=function(r,t,e){var i=n.Combo,a=e?i.getShape(e):Kf,o=(0,B.__assign)((0,B.__assign)({},a),t);return o.type=r,o.itemType="combo",i[r]=o,o},n}(),un=fu;fu.registerFactory("node",{defaultShapeType:"circle"}),fu.registerFactory("edge",{defaultShapeType:"line"}),fu.registerFactory("combo",{defaultShapeType:"circle"});var $f="bboxCache",Qf="bboxCanvasCache",_N=function(){function n(r){this._cfg={},this.destroyed=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),r);var e=this.get("model"),i=e.id,a=this.get("type");i||(i=(0,h.uniqueId)(a),this.get("model").id=i),this.set("id",i);var o=r.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=e.shape||e.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var f=this.get("styles")||e.stateStyles;f=(0,h.deepMix)({},u.stateStyles,f),this.set("styles",f)}}}return n.prototype.calculateBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=lu(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},n.prototype.calculateCanvasBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=lu(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},n.prototype.drawInner=function(){var r=this,t=r.get("shapeFactory"),e=r.get("group"),i=r.get("model");e.clear();var a=i.visible;if(a!==void 0&&!a&&r.changeVisibility(a),!!t){r.updatePosition(i);var o=r.getShapeCfg(i),s=o.shape||o.type,l=t.draw(s,o,e);l&&(r.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},n.prototype.setOriginStyle=function(r){var t={},e=this.get("group"),i=e.get("children"),a=this.getKeyShape(),o=this;(0,h.each)(i,function(u){var f=u.get("name");if(f)t[f]=o.getShapeStyleByName(f);else{var c=a.get("name"),v=o.getShapeStyleByName();c?t[c]=v:Object.assign(t,v)}});var s=this.getOriginStyle(),l={};r?l=(0,h.deepMix)({},s,t,r.style,{labelCfg:r.labelCfg}):l=(0,h.deepMix)({},s,t),o.set("originStyle",l)},n.prototype.restoreStates=function(r,t){var e=this,i=e.get("states");(0,h.each)(i,function(a){r.setState(t,a,!0,e)})},n.prototype.init=function(){var r=un.getFactory(this.get("type"));this.set("shapeFactory",r)},n.prototype.get=function(r){return this._cfg[r]},n.prototype.set=function(r,t){(0,h.isPlainObject)(r)?this._cfg=(0,B.__assign)((0,B.__assign)({},this._cfg),r):this._cfg[r]=t},n.prototype.getDefaultCfg=function(){return{}},n.prototype.clearCache=function(){this.set($f,null),this.set(Qf,null)},n.prototype.beforeDraw=function(){},n.prototype.afterDraw=function(){},n.prototype.afterUpdate=function(){},n.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},n.prototype.getShapeStyleByName=function(r){var t=this.get("group"),e=this.getKeyShape();if(r&&(e=t.find(function(a){return a.get("name")===r})),e){var i={};return(0,h.each)(e.attr(),function(a,o){o!=="img"&&(i[o]=a)}),i}return{}},n.prototype.getShapeCfg=function(r){var t=this.get("styles");if(t){var e=r;return e.style=(0,B.__assign)((0,B.__assign)({},t),r.style),e}return r},n.prototype.getStateStyle=function(r){var t=this.get("styles"),e=t&&t[r];return e},n.prototype.getOriginStyle=function(){return this.get("originStyle")},n.prototype.getCurrentStatesStyle=function(){var r=this,t={};return(0,h.each)(r.getStates(),function(e){t=Object.assign(t,r.getStateStyle(e))}),t},n.prototype.setState=function(r,t){var e=this.get("states"),i=this.get("shapeFactory"),a=r,o=r;(0,h.isString)(t)&&(a=r+":"+t,o=r+":");var s=e;if((0,h.isBoolean)(t)){var l=e.indexOf(o);if(t){if(l>-1)return;e.push(a)}else l>-1&&e.splice(l,1)}else if((0,h.isString)(t)){var u=e.filter(function(v){return v.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(v){return!v.includes(o)}),s.push(a),this.set("states",s)}if(i){var f=this.get("model"),c=f.shape||f.type;i.setState(c,r,t,this)}},n.prototype.clearStates=function(r){var t=this,e=t.getStates(),i=t.get("shapeFactory"),a=t.get("model"),o=a.shape||a.type;r||(r=e),(0,h.isString)(r)&&(r=[r]);var s=e.filter(function(l){return r.indexOf(l)===-1});t.set("states",s),r.forEach(function(l){i.setState(o,l,!1,t)})},n.prototype.getContainer=function(){return this.get("group")},n.prototype.getKeyShape=function(){return this.get("keyShape")},n.prototype.getModel=function(){return this.get("model")},n.prototype.getType=function(){return this.get("type")},n.prototype.getID=function(){return this.get("id")},n.prototype.isItem=function(){return!0},n.prototype.getStates=function(){return this.get("states")},n.prototype.hasState=function(r){var t=this.getStates();return t.indexOf(r)>=0},n.prototype.refresh=function(){var r=this.get("model");this.updatePosition(r),this.updateShape(),this.afterUpdate(),this.clearCache()},n.prototype.isOnlyMove=function(r){return!1},n.prototype.update=function(r){var t=this.get("model"),e=t.visible,i=r.visible;e!==i&&i!==void 0&&this.changeVisibility(i);var a={x:t.x,y:t.y};r.x=isNaN(r.x)?t.x:r.x,r.y=isNaN(r.y)?t.y:r.y;var o=this.get("styles");if(r.stateStyles){var s=r.stateStyles;(0,h.mix)(o,s),delete r.stateStyles}Object.assign(t,r);var l=this.isOnlyMove(r);l?this.updatePosition(r):((a.x!==r.x||a.y!==r.y)&&this.updatePosition(r),this.updateShape()),this.afterUpdate(),this.clearCache()},n.prototype.updateShape=function(){var r=this.get("shapeFactory"),t=this.get("model"),e=t.shape||t.type;if(r.shouldUpdate(e)&&e===this.get("currentShape")){var i=this.getShapeCfg(t);r.baseUpdate(e,i,this)}else this.draw();this.setOriginStyle(t),this.restoreStates(r,e)},n.prototype.updatePosition=function(r){var t=this.get("model"),e=(0,h.isNil)(r.x)?t.x:r.x,i=(0,h.isNil)(r.y)?t.y:r.y,a=this.get("group");(0,h.isNil)(e)||(0,h.isNil)(i)||(a.resetMatrix(),Um(a,{x:e,y:i}),t.x=e,t.y=i,this.clearCache())},n.prototype.getBBox=function(){var r=this.get($f);return r||(r=this.calculateBBox(),this.set($f,r)),r},n.prototype.getCanvasBBox=function(){var r=this.get(Qf);return r||(r=this.calculateCanvasBBox(),this.set(Qf,r)),r},n.prototype.toFront=function(){var r=this.get("group");r.toFront()},n.prototype.toBack=function(){var r=this.get("group");r.toBack()},n.prototype.show=function(){this.changeVisibility(!0)},n.prototype.hide=function(){this.changeVisibility(!1)},n.prototype.changeVisibility=function(r){var t=this.get("group");r?t.show():t.hide(),this.set("visible",r)},n.prototype.isVisible=function(){return this.get("visible")},n.prototype.enableCapture=function(r){var t=this.get("group");t&&t.set("capture",r)},n.prototype.destroy=function(){if(!this.destroyed){var r=this.get("animate"),t=this.get("group");r&&t.stopAnimate(),this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},n}(),Tx=_N,cu={source:"start",target:"end"},Ba="Node",rs="Point",PN="Anchor",LN=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},r.prototype.setEnd=function(t,e){var i=cu[t]+rs,a=t+Ba,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,h.isPlainObject)(e)?(this.set(i,e),this.set(a,null)):(e.addEdge(this),this.set(a,e),this.set(i,null))},r.prototype.getLinkPoint=function(t,e,i){var a=cu[t]+rs,o=t+Ba,s=this.get(a);if(!s){var l=this.get(o),u=t+PN,f=this.getPrePoint(t,i),c=e[u];(0,h.isNil)(c)||(s=l.getLinkPointByAnchor(c)),s=s||l.getLinkPoint(f),(0,h.isNil)(s.index)||this.set(t+"AnchorIndex",s.index)}return s},r.prototype.getPrePoint=function(t,e){if(e&&e.length){var i=t==="source"?0:e.length-1;return e[i]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},r.prototype.getEndPoint=function(t){var e=t+Ba,i=cu[t]+rs,a=this.get(e);return a?a.get("model"):this.get(i)},r.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.shape||t.type;return a.getControlPoints(o,{startPoint:e,endPoint:i})},r.prototype.getEndCenter=function(t){var e=t+Ba,i=cu[t]+rs,a=this.get(e);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},r.prototype.init=function(){n.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},r.prototype.getShapeCfg=function(t){var e=this,i=e.get("linkCenter"),a=n.prototype.getShapeCfg.call(this,t);if(i)a.startPoint=e.getEndCenter("source"),a.endPoint=e.getEndCenter("target");else{var o=a.controlPoints||e.getControlPointsByCenter(a);a.startPoint=e.getLinkPoint("source",t,o),a.endPoint=e.getLinkPoint("target",t,o)}return a.sourceNode=e.get("sourceNode"),a.targetNode=e.get("targetNode"),a},r.prototype.getModel=function(){var t=this.get("model"),e=this.get("source"+Ba),i=this.get("target"+Ba);return e?delete t["source"+Ba]:t.source=this.get("start"+rs),i?delete t["target"+Ba]:t.target=this.get("end"+rs),!(0,h.isString)(t.source)&&!(0,h.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,h.isString)(t.target)&&!(0,h.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},r.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},r.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},r.prototype.getSource=function(){return this.get("source")},r.prototype.getTarget=function(){return this.get("target")},r.prototype.updatePosition=function(){},r.prototype.update=function(t){var e=this.get("model"),i=e.visible,a=t.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,h.mix)(o,s),delete t.stateStyles}Object.assign(e,t),this.updateShape(),this.afterUpdate(),this.clearCache()},r.prototype.destroy=function(){var t=this.get("source"+Ba),e=this.get("target"+Ba);t&&!t.destroyed&&t.removeEdge(this),e&&!e.destroyed&&e.removeEdge(this),n.prototype.destroy.call(this)},r}(Tx),IN=LN,Rs=d(7165),Jf="anchorPointsCache",kN="bboxCache",ON=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getNearestPoint=function(t,e){for(var i=0,a=t[0],o=Os(t[0],e),s=0;s<t.length;s++){var l=t[s],u=Os(l,e);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},r.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("target")===t})},r.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("source")===t})},r.prototype.getNeighbors=function(t){var e=this,i=this.get("edges");if(t==="target"){var a=function(u){return u.getSource()===e};return i.filter(a).map(function(l){return l.getTarget()})}if(t==="source"){var o=function(u){return u.getTarget()===e};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===e?u.getTarget():u.getSource()};return i.map(s)},r.prototype.getLinkPointByAnchor=function(t){var e=this.getAnchorPoints();return e[t]},r.prototype.getLinkPoint=function(t){var e=this.get("keyShape"),i=e.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=(l.maxX+l.minX)/2,s=(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),f;switch(i){case"circle":f=Vm({x:o,y:s,r:l.width/2},t);break;case"ellipse":f=Hm({x:o,y:s,rx:l.width/2,ry:l.height/2},t);break;default:f=Xm(l,t)}var c=f;return u.length&&(c||(c=t),c=this.getNearestPoint(u,c)),c||(c={x:o,y:s}),c},r.prototype.getAnchorPoints=function(){var t=this.get(Jf);if(!t){t=[];var e=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.shape||a.type,l=e.getAnchorPoints(s,o)||[];(0,zi.default)(l,function(u,f){var c=(0,Rs.default)({x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height},u[2],{index:f});t.push(c)}),this.set(Jf,t)}return t},r.prototype.addEdge=function(t){this.get("edges").push(t)},r.prototype.lock=function(){this.set("locked",!0)},r.prototype.unlock=function(){this.set("locked",!1)},r.prototype.hasLocked=function(){return this.get("locked")},r.prototype.removeEdge=function(t){var e=this.getEdges(),i=e.indexOf(t);i>-1&&e.splice(i,1)},r.prototype.clearCache=function(){this.set(kN,null),this.set(Jf,null)},r.prototype.isOnlyMove=function(t){if(!t)return!1;var e=!(0,In.default)(t.x),i=!(0,In.default)(t.y),a=Object.keys(t);return a.length===1&&(e||i)||a.length===2&&e&&i},r}(Tx),_x=ON,BN="bboxCache",Px="bboxCanvasCache",qf="sizeCache",DN="anchorPointsCache",FN=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},r.prototype.getShapeCfg=function(t){var e=this.get("styles"),i=this.get("bbox");if(e&&i){var a=t,o={r:Math.hypot(i.height,i.width)/2||Ue.defaultCombo.size[0]/2,width:i.width||Ue.defaultCombo.size[0],height:i.height||Ue.defaultCombo.size[1]};a.style=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},e),t.style),o);var s=t.padding||Ue.defaultCombo.padding;return(0,wa.default)(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r+=s[0],o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(qf,o),a}return t},r.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),i=lu(t,e);i.x=i.minX,i.y=i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var a=this.get(qf);if(a){var o=t.get("type");o==="circle"?(i.width=a.r*2,i.height=a.r*2):(i.width=a.width,i.height=a.height),i.minX=i.centerX-i.width/2,i.minY=i.centerY-i.height/2,i.maxX=i.centerX+i.width/2,i.maxY=i.centerY+i.height/2}else i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;return i},r.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},r.prototype.getNodes=function(){var t=this;return t.get("nodes")},r.prototype.getCombos=function(){var t=this;return t.get("combos")},r.prototype.addChild=function(t){var e=this,i=t.getType();switch(i){case"node":e.addNode(t);break;case"combo":e.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.addCombo=function(t){var e=this;return e.get("combos").push(t),!0},r.prototype.addNode=function(t){var e=this;return e.get("nodes").push(t),!0},r.prototype.removeChild=function(t){var e=this,i=t.getType();switch(i){case"node":e.removeNode(t);break;case"combo":e.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.removeCombo=function(t){if(!!t){var e=this.getCombos(),i=e.indexOf(t);return i>-1?(e.splice(i,1),!0):!1}},r.prototype.removeNode=function(t){if(!!t){var e=this.getNodes(),i=e.indexOf(t);return i>-1?(e.splice(i,1),!0):!1}},r.prototype.isOnlyMove=function(t){return!1},r.prototype.getBBox=function(){this.set(Px,null);var t=this.calculateCanvasBBox();return t},r.prototype.clearCache=function(){this.set(BN,null),this.set(Px,null),this.set(DN,null)},r.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),this.set(qf,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},r}(_x),RN=FN,vu="node",du="edge",Lx="vedge",pu="combo",NN="default",Ix="Mapper",to="stateStyles",YN=Object.hasOwnProperty,GN=function(){function n(r){this.graph=r,this.destroyed=!1}return n.prototype.addItem=function(r,t){var e=this,i=this.graph,a=r===Lx?du:r,o=i.get(a+"Group")||i.get("group"),s=(0,px.default)(a),l=null,u=i.get(a+(0,px.default)(to))||{},f=i.get(NN+s);t[to]&&(u=t[to]);var c=i.get(a+Ix);if(c){var v=c(t);v[to]&&(u=v[to],delete v[to]),t=(0,Nn.default)({},f,t,v)}else f&&(0,zi.default)(f,function($,q){YN.call(t,q)||((0,dx.default)($)?t[q]=(0,vx.default)($):t[q]=f[q])});if(t.shape&&!t.type&&console.warn("shape \u5B57\u6BB5\u5373\u5C06\u88AB\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 type \u4EE3\u66FF"),i.emit("beforeadditem",{type:r,model:t}),r===du||r===Lx){var g=void 0,C=void 0;if(g=t.source,C=t.target,g&&(0,ki.default)(g)&&(g=i.findById(g)),C&&(0,ki.default)(C)&&(C=i.findById(C)),!g||!C){console.warn("The source or target node of edge "+t.id+" does not exist!");return}g.getType&&g.getType()==="combo"&&(t.isComboEdge=!0,i.updateCombo(g)),C.getType&&C.getType()==="combo"&&(t.isComboEdge=!0,i.updateCombo(C)),l=new IN({model:t,source:g,target:C,styles:u,linkCenter:i.get("linkCenter"),group:o.addGroup()})}else if(r===vu)l=new _x({model:t,styles:u,group:o.addGroup()});else if(r===pu){var O=t.children,F=Uf(O,i);t.x=F.x||t.x||Math.random()*100,t.y=F.y||t.y||Math.random()*100;var G=o.addGroup();G.setZIndex(t.depth),l=new RN({model:t,styles:u,bbox:F,group:G});var Y=l.getModel();(O||[]).forEach(function($){var q=i.findById($.id);l.addChild(q),$.depth=Y.depth+2}),t.collapsed&&setTimeout(function(){i.collapseCombo(l),e.updateCombo(l,[])},250)}if(l)return i.get(r+"s").push(l),i.get("itemMap")[l.get("id")]=l,i.emit("afteradditem",{item:l,model:t}),l},n.prototype.updateItem=function(r,t){var e=this.graph;if((0,ki.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var i="";r.getType&&(i=r.getType());var a=e.get(i+Ix),o=r.getModel();if(a){var s=(0,Nn.default)({},o,t),l=a(s),u=(0,Nn.default)({},o,l,t);l[to]&&(r.set("styles",u[to]),delete u[to]),(0,zi.default)(u,function(g,C){t[C]=g})}else(0,zi.default)(t,function(g,C){o[C]&&(0,dx.default)(g)&&!(0,kn.default)(g)&&(t[C]=(0,B.__assign)((0,B.__assign)({},o[C]),t[C]))});if(e.emit("beforeupdateitem",{item:r,cfg:t}),i===du){if(t.source){var f=t.source;(0,ki.default)(f)&&(f=e.findById(f)),r.setSource(f)}if(t.target){var c=t.target;(0,ki.default)(c)&&(c=e.findById(c)),r.setTarget(c)}}if(r.update(t),i===vu||i===pu){var v=r.getEdges();(0,zi.default)(v,function(g){g.refresh()})}e.emit("afterupdateitem",{item:r,cfg:t})}},n.prototype.updateCombo=function(r,t){var e=this.graph;if((0,ki.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var i=Uf(t,e);r.set("bbox",i),r.update({x:i.x,y:i.y});for(var a=r.getEdges()||[],o=a.length,s=0;s<o;s++){var l=a[s];l==null||l.refresh()}}},n.prototype.collapseCombo=function(r){var t=this.graph;(0,ki.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(i){t.hideItem(i)}),e.combos.forEach(function(i){t.hideItem(i)})},n.prototype.expandCombo=function(r){var t=this.graph;(0,ki.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(i){t.showItem(i)}),e.combos.forEach(function(i){i.getModel().collapsed?i.show():t.showItem(i)})},n.prototype.removeItem=function(r){var t=this,e=this.graph;if((0,ki.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var i=(0,vx.default)(r.getModel());e.emit("beforeremoveitem",{item:i});var a="";r.getType&&(a=r.getType());var o=e.get(a+"s"),s=o.indexOf(r);if(s>-1&&o.splice(s,1),a===du){var l=e.get("v"+a+"s"),u=l.indexOf(r);u>-1&&l.splice(u,1)}var f=r.get("id"),c=e.get("itemMap");delete c[f];var v=e.get("comboTrees"),g=r.get("id");if(a===vu){var C=r.getModel().comboId;if(v){var O=v,F=!1;v.forEach(function(kt){F||Wn(kt,function(Nt){if(Nt.id===g&&O){var Wt=O.indexOf(Nt);return O.splice(Wt,1),F=!0,!1}return O=Nt.children,!0})})}for(var G=r.getEdges(),Y=G.length-1;Y>=0;Y--)e.removeItem(G[Y],!1);C&&e.updateCombo(C)}else if(a===pu){var $=r.getModel().parentId,q,ut=!1;(v||[]).forEach(function(Nt){ut||Wn(Nt,function(Wt){return Wt.id===g?(q=Wt,ut=!0,!1):!0})}),q.removed=!0,q&&q.children&&q.children.forEach(function(Nt){t.removeItem(Nt.id)});for(var G=r.getEdges(),Y=G.length;Y>=0;Y--)e.removeItem(G[Y],!1);$&&e.updateCombo($)}r.destroy(),e.emit("afterremoveitem",{item:i})}},n.prototype.setItemState=function(r,t,e){var i=this.graph,a=t;(0,ki.default)(e)&&(a=t+":"+e),!(r.hasState(a)===e||(0,ki.default)(e)&&r.hasState(a))&&(i.emit("beforeitemstatechange",{item:r,state:a,enabled:e}),r.setState(t,e),i.autoPaint(),i.emit("afteritemstatechange",{item:r,state:a,enabled:e}))},n.prototype.priorityState=function(r,t){var e=this.graph,i=r;(0,ki.default)(r)&&(i=e.findById(r)),this.setItemState(i,t,!1),this.setItemState(i,t,!0)},n.prototype.clearItemStates=function(r,t){var e=this.graph;(0,ki.default)(r)&&(r=e.findById(r)),e.emit("beforeitemstatesclear",{item:r,states:t}),r.clearStates(t),e.emit("afteritemstatesclear",{item:r,states:t})},n.prototype.refreshItem=function(r){var t=this.graph;(0,ki.default)(r)&&(r=t.findById(r)),t.emit("beforeitemrefresh",{item:r}),r.refresh(),t.emit("afteritemrefresh",{item:r})},n.prototype.addCombos=function(r,t){var e=this,i=this.graph;(r||[]).forEach(function(o){ga(o,function(s){var l;return t.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&e.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},n.prototype.changeItemVisibility=function(r,t){var e=this,i=this.graph;if((0,ki.default)(r)&&(r=i.findById(r)),!r){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:r,visible:t}),r.changeVisibility(t),r.getType&&r.getType()===vu){var a=r.getEdges();(0,zi.default)(a,function(f){t&&!(f.get("source").isVisible()&&f.get("target").isVisible())||e.changeItemVisibility(f,t)})}else if(r.getType&&r.getType()===pu){var o=i.get("comboTrees"),s=r.get("id"),l=[],u=!1;(o||[]).forEach(function(c){u||!c.children||c.children.length===0||Wn(c,function(v){return v.id===s?(l=v.children,u=!0,!1):!0})}),l.forEach(function(c){var v=i.findById(c.id);e.changeItemVisibility(v,t)});var a=r.getEdges();(0,zi.default)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||e.changeItemVisibility(c,t)})}return i.emit("afteritemvisibilitychange",{item:r,visible:t}),r},n.prototype.destroy=function(){this.graph=null,this.destroyed=!0},n}(),zN=GN,ya=function(){function n(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1}return n.prototype.init=function(r){var t=this;t.nodes=r.nodes||[],t.edges=r.edges||[],t.combos=r.combos||[]},n.prototype.execute=function(){},n.prototype.layout=function(r){var t=this;t.init(r),t.execute()},n.prototype.getDefaultCfg=function(){return{}},n.prototype.updateCfg=function(r){var t=this;(0,Rs.default)(t,r)},n.prototype.destroy=function(){var r=this;r.positions=null,r.nodes=null,r.edges=null,r.destroyed=!0},n}(),kx={registerLayout:function(r,t,e){if(e===void 0&&(e=ya),!t)throw new Error("please specify handler for this layout: "+r);var i=function(a){(0,B.__extends)(o,a);function o(s){var l=a.call(this)||this,u=l,f={},c=u.getDefaultCfg();return(0,Rs.default)(f,c,t,s),(0,zi.default)(f,function(v,g){u[g]=v}),l}return o}(e);kx[r]=i}},Ox=kx;function XN(n,r,t,e){n.forEach(function(i,a){n[a].children=[],n[a].parent=[]}),e?r.forEach(function(i){var a=0;i.source&&(a=t[i.source]);var o=0;i.target&&(o=t[i.target]),n[a].children.push(n[o].id),n[o].parent.push(n[a].id)}):r.forEach(function(i){var a=0;i.source&&(a=t[i.source]);var o=0;i.target&&(o=t[i.target]),n[a].children.push(n[o].id),n[o].children.push(n[a].id)})}function VN(n,r,t){for(var e=t.length,i=0;i<e;i++)if(n.id===t[i].source&&r.id===t[i].target||r.id===t[i].source&&n.id===t[i].target)return!0;return!1}function HN(n,r){return n.degree<r.degree?-1:n.degree>r.degree?1:0}var WN=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.radius=null,t.startRadius=null,t.endRadius=null,t.startAngle=0,t.endAngle=2*Math.PI,t.clockwise=!0,t.divisions=1,t.ordering=null,t.angleRatio=1,t.nodes=[],t.edges=[],t.nodeMap={},t.degrees=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},r.prototype.execute=function(){var t=this,e=t.nodes,i=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var s=t.radius,l=t.startRadius,u=t.endRadius,f=t.divisions,c=t.startAngle,v=t.endAngle,g=(v-c)/a,C={};e.forEach(function(Ft,ee){C[Ft.id]=ee}),t.nodeMap=C;var O=iu(e.length,C,i);t.degrees=O,!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),!s&&!l&&!u?s=t.height>t.width?t.width/2:t.height/2:!l&&u?l=u:l&&!u&&(u=l);var F=t.angleRatio,G=g*F;t.astep=G;var Y=t.ordering,$=[];Y==="topology"?$=t.topologyOrdering():Y==="topology-directed"?$=t.topologyOrdering(!0):Y==="degree"?$=t.degreeOrdering():$=e;for(var q=t.clockwise,ut=Math.ceil(a/f),kt=0;kt<a;++kt){var Nt=s;!Nt&&l!==null&&u!==null&&(Nt=l+kt*(u-l)/(a-1)),Nt||(Nt=10+kt*100/(a-1));var Wt=c+kt%ut*G+2*Math.PI/f*Math.floor(kt/ut);q||(Wt=v-kt%ut*G-2*Math.PI/f*Math.floor(kt/ut)),$[kt].x=o[0]+Math.cos(Wt)*Nt,$[kt].y=o[1]+Math.sin(Wt)*Nt,$[kt].weight=O[kt]}}},r.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var e=this,i=e.degrees,a=e.edges,o=e.nodes,s=(0,h.clone)(o),l=e.nodeMap,u=[s[0]],f=[o[0]],c=[],v=o.length;c[0]=!0,XN(s,a,l,t);var g=0;return s.forEach(function(C,O){if(O!==0)if((O===v-1||i[O]!==i[O+1]||VN(u[g],C,a))&&c[O]!==!0)u.push(C),f.push(o[l[C.id]]),c[O]=!0,g++;else{for(var F=u[g].children,G=!1,Y=0;Y<F.length;Y++){var $=l[F[Y]];if(i[$]===i[O]&&c[$]!==!0){u.push(s[$]),f.push(o[l[s[$].id]]),c[$]=!0,G=!0;break}}for(var q=0;!G&&(c[q]||(u.push(s[q]),f.push(o[l[s[q].id]]),c[q]=!0,G=!0),q++,q!==v););}}),f},r.prototype.degreeOrdering=function(){var t=this,e=t.nodes,i=[],a=t.degrees;return e.forEach(function(o,s){o.degree=a[s],i.push(o)}),i.sort(HN),i},r}(ya),jN=WN,UN=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.nodeSize=30,t.minNodeSpacing=10,t.preventOverlap=!1,t.equidistant=!1,t.startAngle=3/2*Math.PI,t.clockwise=!0,t.sortBy="degree",t.nodes=[],t.edges=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},r.prototype.execute=function(){var t=this,e=t.nodes,i=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var s=[],l;(0,kn.default)(t.nodeSize)?l=Math.max(t.nodeSize[0],t.nodeSize[1]):l=t.nodeSize,e.forEach(function(Wt){s.push(Wt);var Ft=l;(0,kn.default)(Wt.size)?Ft=Math.max(Wt.size[0],Wt.size[1]):(0,h.isNumber)(Wt.size)&&(Ft=Wt.size),l=Math.max(l,Ft)}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.clockwise=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise;var u={},f={};if(s.forEach(function(Wt,Ft){u[Wt.id]=Wt,f[Wt.id]=Ft}),(t.sortBy==="degree"||!(0,ki.default)(t.sortBy)||s[0][t.sortBy]===void 0)&&(t.sortBy="degree",!(0,h.isNumber)(e[0].degree))){var c=iu(e.length,f,i);s.forEach(function(Wt,Ft){Wt.degree=c[Ft]})}s.sort(function(Wt,Ft){return Ft[t.sortBy]-Wt[t.sortBy]}),t.maxValueNode=s[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var v=[[]],g=v[0];s.forEach(function(Wt){if(g.length>0){var Ft=Math.abs(g[0][t.sortBy]-Wt[t.sortBy]);t.maxLevelDiff&&Ft>=t.maxLevelDiff&&(g=[],v.push(g))}g.push(Wt)});var C=l+t.minNodeSpacing;if(!t.preventOverlap){var O=v.length>0&&v[0].length>1,F=Math.min(t.width,t.height)/2-C,G=F/(v.length+(O?1:0));C=Math.min(C,G)}var Y=0;if(v.forEach(function(Wt){var Ft=t.sweep;Ft===void 0&&(Ft=2*Math.PI-2*Math.PI/Wt.length);var ee=Wt.dTheta=Ft/Math.max(1,Wt.length-1);if(Wt.length>1&&t.preventOverlap){var ve=Math.cos(ee)-Math.cos(0),fe=Math.sin(ee)-Math.sin(0),Te=Math.sqrt(C*C/(ve*ve+fe*fe));Y=Math.max(Te,Y)}Wt.r=Y,Y+=C}),t.equidistant){for(var $=0,q=0,ut=0;ut<v.length;ut++){var kt=v[ut],Nt=kt.r-q;$=Math.max($,Nt)}q=0,v.forEach(function(Wt,Ft){Ft===0&&(q=Wt.r),Wt.r=q,q+=$})}v.forEach(function(Wt){var Ft=Wt.dTheta,ee=Wt.r;Wt.forEach(function(ve,fe){var Te=t.startAngle+(t.clockwise?1:-1)*Ft*fe;ve.x=o[0]+ee*Math.cos(Te),ve.y=o[1]+ee*Math.sin(Te)})})}},r}(ya),ZN=UN,KN=d(92546),Bx=d.n(KN),$N=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.rankdir="TB",t.nodesep=50,t.ranksep=50,t.controlPoints=!1,t.sortByCombo=!1,t}return r.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}},r.prototype.execute=function(){var t=this,e=t.nodes,i=t.nodeSize,a=t.rankdir;if(!!e){var o=t.edges||[],s=new(Bx()).graphlib.Graph,l;i?(0,kn.default)(i)?l=function(){return i}:l=function(){return[i,i]}:l=function(g){return g.size?(0,kn.default)(g.size)?g.size:[g.size,g.size]:[40,40]};var u=gu(t.nodesepFunc,t.nodesep,50),f=gu(t.ranksepFunc,t.ranksep,50);(a==="LR"||a==="RL")&&(u=gu(t.ranksepFunc,t.ranksep,50),f=gu(t.nodesepFunc,t.nodesep,50)),s.setDefaultEdgeLabel(function(){return{}}),s.setGraph(t),e.forEach(function(v){var g=l(v),C=f(v),O=u(v),F=g[0]+2*O,G=g[1]+2*C;s.setNode(v.id,{width:F,height:G})}),o.forEach(function(v){s.setEdge(v.source,v.target,{weight:v.weight||1})}),Bx().layout(s);var c;s.nodes().forEach(function(v){c=s.node(v);var g=e.findIndex(function(C){return C.id===v});e[g].x=c.x,e[g].y=c.y}),s.edges().forEach(function(v){c=s.edge(v);var g=o.findIndex(function(C){return C.source===v.v&&C.target===v.w});t.controlPoints&&o[g].type!=="loop"&&o[g].shape!=="loop"&&(o[g].controlPoints=c.points.slice(1,c.points.length-1))}),t.sortByCombo&&t.sortLevel("comboId")}},r.prototype.sortLevel=function(t){var e=this,i=e.nodes,a={};i.forEach(function(o){a[o.y]||(a[o.y]={y:o.y,nodes:[]}),a[o.y].nodes.push(o)}),Object.keys(a).forEach(function(o){var s=a[o].nodes,l=s.length,u={};if(s.forEach(function(O){var F=O.comboId;u[F]||(u[F]={x:0,y:0,count:0}),u[F].x+=O.x,u[F].y+=O.y,u[F].count++}),Object.keys(u).forEach(function(O){u[O].x/=u[O].count,u[O].y/=u[O].count}),l!==1){var f=s.sort(function(O,F){return O.x-F.x}),c=f[0].x,v=f[l-1].x,g=(v-c)/(l-1),C=s.sort(function(O,F){var G=O[t]||"undefined",Y=F[t]||"undefined";return G<Y?-1:G>Y?1:0});C.forEach(function(O,F){O.x=c+F*g})}})},r}(ya),QN=$N;function gu(n,r,t){var e;return n?e=n:(0,h.isNumber)(r)?e=function(){return r}:e=function(){return t},e}function JN(n){const r=+this._x.call(null,n),t=+this._y.call(null,n);return Dx(this.cover(r,t),r,t,n)}function Dx(n,r,t,e){if(isNaN(r)||isNaN(t))return n;var i,a=n._root,o={data:e},s=n._x0,l=n._y0,u=n._x1,f=n._y1,c,v,g,C,O,F,G,Y;if(!a)return n._root=o,n;for(;a.length;)if((O=r>=(c=(s+u)/2))?s=c:u=c,(F=t>=(v=(l+f)/2))?l=v:f=v,i=a,!(a=a[G=F<<1|O]))return i[G]=o,n;if(g=+n._x.call(null,a.data),C=+n._y.call(null,a.data),r===g&&t===C)return o.next=a,i?i[G]=o:n._root=o,n;do i=i?i[G]=new Array(4):n._root=new Array(4),(O=r>=(c=(s+u)/2))?s=c:u=c,(F=t>=(v=(l+f)/2))?l=v:f=v;while((G=F<<1|O)==(Y=(C>=v)<<1|g>=c));return i[Y]=a,i[G]=o,n}function qN(n){var r,t,e=n.length,i,a,o=new Array(e),s=new Array(e),l=Infinity,u=Infinity,f=-Infinity,c=-Infinity;for(t=0;t<e;++t)isNaN(i=+this._x.call(null,r=n[t]))||isNaN(a=+this._y.call(null,r))||(o[t]=i,s[t]=a,i<l&&(l=i),i>f&&(f=i),a<u&&(u=a),a>c&&(c=a));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),t=0;t<e;++t)Dx(this,o[t],s[t],n[t]);return this}function t3(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var t=this._x0,e=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,a=(e=Math.floor(r))+1;else{for(var o=i-t||1,s=this._root,l,u;t>n||n>=i||e>r||r>=a;)switch(u=(r<e)<<1|n<t,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=t+o,a=e+o;break;case 1:t=i-o,a=e+o;break;case 2:i=t+o,e=a-o;break;case 3:t=i-o,e=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._y0=e,this._x1=i,this._y1=a,this}function e3(){var n=[];return this.visit(function(r){if(!r.length)do n.push(r.data);while(r=r.next)}),n}function r3(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Qn(n,r,t,e,i){this.node=n,this.x0=r,this.y0=t,this.x1=e,this.y1=i}function i3(n,r,t){var e,i=this._x0,a=this._y0,o,s,l,u,f=this._x1,c=this._y1,v=[],g=this._root,C,O;for(g&&v.push(new Qn(g,i,a,f,c)),t==null?t=Infinity:(i=n-t,a=r-t,f=n+t,c=r+t,t*=t);C=v.pop();)if(!(!(g=C.node)||(o=C.x0)>f||(s=C.y0)>c||(l=C.x1)<i||(u=C.y1)<a))if(g.length){var F=(o+l)/2,G=(s+u)/2;v.push(new Qn(g[3],F,G,l,u),new Qn(g[2],o,G,F,u),new Qn(g[1],F,s,l,G),new Qn(g[0],o,s,F,G)),(O=(r>=G)<<1|n>=F)&&(C=v[v.length-1],v[v.length-1]=v[v.length-1-O],v[v.length-1-O]=C)}else{var Y=n-+this._x.call(null,g.data),$=r-+this._y.call(null,g.data),q=Y*Y+$*$;if(q<t){var ut=Math.sqrt(t=q);i=n-ut,a=r-ut,f=n+ut,c=r+ut,e=g.data}}return e}function n3(n){if(isNaN(f=+this._x.call(null,n))||isNaN(c=+this._y.call(null,n)))return this;var r,t=this._root,e,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,f,c,v,g,C,O,F,G;if(!t)return this;if(t.length)for(;;){if((C=f>=(v=(o+l)/2))?o=v:l=v,(O=c>=(g=(s+u)/2))?s=g:u=g,r=t,!(t=t[F=O<<1|C]))return this;if(!t.length)break;(r[F+1&3]||r[F+2&3]||r[F+3&3])&&(e=r,G=F)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):r?(a?r[F]=a:delete r[F],(t=r[0]||r[1]||r[2]||r[3])&&t===(r[3]||r[2]||r[1]||r[0])&&!t.length&&(e?e[G]=t:this._root=t),this):(this._root=a,this)}function a3(n){for(var r=0,t=n.length;r<t;++r)this.remove(n[r]);return this}function o3(){return this._root}function s3(){var n=0;return this.visit(function(r){if(!r.length)do++n;while(r=r.next)}),n}function l3(n){var r=[],t,e=this._root,i,a,o,s,l;for(e&&r.push(new Qn(e,this._x0,this._y0,this._x1,this._y1));t=r.pop();)if(!n(e=t.node,a=t.x0,o=t.y0,s=t.x1,l=t.y1)&&e.length){var u=(a+s)/2,f=(o+l)/2;(i=e[3])&&r.push(new Qn(i,u,f,s,l)),(i=e[2])&&r.push(new Qn(i,a,f,u,l)),(i=e[1])&&r.push(new Qn(i,u,o,s,f)),(i=e[0])&&r.push(new Qn(i,a,o,u,f))}return this}function u3(n){var r=[],t=[],e;for(this._root&&r.push(new Qn(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,l=e.x1,u=e.y1,f=(o+l)/2,c=(s+u)/2;(a=i[0])&&r.push(new Qn(a,o,s,f,c)),(a=i[1])&&r.push(new Qn(a,f,s,l,c)),(a=i[2])&&r.push(new Qn(a,o,c,f,u)),(a=i[3])&&r.push(new Qn(a,f,c,l,u))}t.push(e)}for(;e=t.pop();)n(e.node,e.x0,e.y0,e.x1,e.y1);return this}function h3(n){return n[0]}function f3(n){return arguments.length?(this._x=n,this):this._x}function c3(n){return n[1]}function v3(n){return arguments.length?(this._y=n,this):this._y}function tc(n,r,t){var e=new ec(r==null?h3:r,t==null?c3:t,NaN,NaN,NaN,NaN);return n==null?e:e.addAll(n)}function ec(n,r,t,e,i,a){this._x=n,this._y=r,this._x0=t,this._y0=e,this._x1=i,this._y1=a,this._root=void 0}function Fx(n){for(var r={data:n.data},t=r;n=n.next;)t=t.next={data:n.data};return r}var Jn=tc.prototype=ec.prototype;Jn.copy=function(){var n=new ec(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,t,e;if(!r)return n;if(!r.length)return n._root=Fx(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Fx(e));return n},Jn.add=JN,Jn.addAll=qN,Jn.cover=t3,Jn.data=e3,Jn.extent=r3,Jn.find=i3,Jn.remove=n3,Jn.removeAll=a3,Jn.root=o3,Jn.size=s3,Jn.visit=l3,Jn.visitAfter=u3,Jn.x=f3,Jn.y=v3;function qn(n){return function(){return n}}function yo(n){return(n()-.5)*1e-6}var d3={value:function(){}};function Rx(){for(var n=0,r=arguments.length,t={},e;n<r;++n){if(!(e=arguments[n]+"")||e in t||/[\s.]/.test(e))throw new Error("illegal type: "+e);t[e]=[]}return new yu(t)}function yu(n){this._=n}function p3(n,r){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");if(i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}yu.prototype=Rx.prototype={constructor:yu,on:function(r,t){var e=this._,i=p3(r+"",e),a,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((a=(r=i[o]).type)&&(a=g3(e[a],r.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(a=(r=i[o]).type)e[a]=Nx(e[a],r.name,t);else if(t==null)for(a in e)e[a]=Nx(e[a],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new yu(r)},call:function(r,t){if((a=arguments.length-2)>0)for(var e=new Array(a),i=0,a,o;i<a;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],i=0,a=o.length;i<a;++i)o[i].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var i=this._[r],a=0,o=i.length;a<o;++a)i[a].value.apply(t,e)}};function g3(n,r){for(var t=0,e=n.length,i;t<e;++t)if((i=n[t]).name===r)return i.value}function Nx(n,r,t){for(var e=0,i=n.length;e<i;++e)if(n[e].name===r){n[e]=d3,n=n.slice(0,e).concat(n.slice(e+1));break}return t!=null&&n.push({name:r,value:t}),n}var y3=Rx,is=0,Ns=0,Ys=0,Yx=1e3,mu,Gs,xu=0,Fo=0,bu=0,zs=typeof performance=="object"&&performance.now?performance:Date,Gx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function zx(){return Fo||(Gx(m3),Fo=zs.now()+bu)}function m3(){Fo=0}function rc(){this._call=this._time=this._next=null}rc.prototype=Xx.prototype={constructor:rc,restart:function(n,r,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?zx():+t)+(r==null?0:+r),!this._next&&Gs!==this&&(Gs?Gs._next=this:mu=this,Gs=this),this._call=n,this._time=t,ic()},stop:function(){this._call&&(this._call=null,this._time=Infinity,ic())}};function Xx(n,r,t){var e=new rc;return e.restart(n,r,t),e}function x3(){zx(),++is;for(var n=mu,r;n;)(r=Fo-n._time)>=0&&n._call.call(null,r),n=n._next;--is}function Vx(){Fo=(xu=zs.now())+bu,is=Ns=0;try{x3()}finally{is=0,w3(),Fo=0}}function b3(){var n=zs.now(),r=n-xu;r>Yx&&(bu-=r,xu=n)}function w3(){for(var n,r=mu,t,e=Infinity;r;)r._call?(e>r._time&&(e=r._time),n=r,r=r._next):(t=r._next,r._next=null,r=n?n._next=t:mu=t);Gs=n,ic(e)}function ic(n){if(!is){Ns&&(Ns=clearTimeout(Ns));var r=n-Fo;r>24?(n<Infinity&&(Ns=setTimeout(Vx,n-zs.now()-bu)),Ys&&(Ys=clearInterval(Ys))):(Ys||(xu=zs.now(),Ys=setInterval(b3,Yx)),is=1,Gx(Vx))}}var S3=1664525,C3=1013904223,Hx=4294967296;function M3(){var n=1;return function(){return(n=(S3*n+C3)%Hx)/Hx}}function E3(n){return n.x}function A3(n){return n.y}var T3=10,_3=Math.PI*(3-Math.sqrt(5));function Wx(n){var r,t=1,e=.001,i=1-Math.pow(e,1/300),a=0,o=.6,s=new Map,l=Xx(c),u=y3("tick","end"),f=M3();n==null&&(n=[]);function c(){v(),u.call("tick",r),t<e&&(l.stop(),u.call("end",r))}function v(O){var F,G=n.length,Y;O===void 0&&(O=1);for(var $=0;$<O;++$)for(t+=(a-t)*i,s.forEach(function(q){q(t)}),F=0;F<G;++F)Y=n[F],Y.fx==null?Y.x+=Y.vx*=o:(Y.x=Y.fx,Y.vx=0),Y.fy==null?Y.y+=Y.vy*=o:(Y.y=Y.fy,Y.vy=0);return r}function g(){for(var O=0,F=n.length,G;O<F;++O){if(G=n[O],G.index=O,G.fx!=null&&(G.x=G.fx),G.fy!=null&&(G.y=G.fy),isNaN(G.x)||isNaN(G.y)){var Y=T3*Math.sqrt(.5+O),$=O*_3;G.x=Y*Math.cos($),G.y=Y*Math.sin($)}(isNaN(G.vx)||isNaN(G.vy))&&(G.vx=G.vy=0)}}function C(O){return O.initialize&&O.initialize(n,f),O}return g(),r={tick:v,restart:function(){return l.restart(c),r},stop:function(){return l.stop(),r},nodes:function(F){return arguments.length?(n=F,g(),s.forEach(C),r):n},alpha:function(F){return arguments.length?(t=+F,r):t},alphaMin:function(F){return arguments.length?(e=+F,r):e},alphaDecay:function(F){return arguments.length?(i=+F,r):+i},alphaTarget:function(F){return arguments.length?(a=+F,r):a},velocityDecay:function(F){return arguments.length?(o=1-F,r):1-o},randomSource:function(F){return arguments.length?(f=F,s.forEach(C),r):f},force:function(F,G){return arguments.length>1?(G==null?s.delete(F):s.set(F,C(G)),r):s.get(F)},find:function(F,G,Y){var $=0,q=n.length,ut,kt,Nt,Wt,Ft;for(Y==null?Y=Infinity:Y*=Y,$=0;$<q;++$)Wt=n[$],ut=F-Wt.x,kt=G-Wt.y,Nt=ut*ut+kt*kt,Nt<Y&&(Ft=Wt,Y=Nt);return Ft},on:function(F,G){return arguments.length>1?(u.on(F,G),r):u.on(F)}}}function jx(){var n,r,t,e,i=qn(-30),a,o=1,s=Infinity,l=.81;function u(g){var C,O=n.length,F=tc(n,E3,A3).visitAfter(c);for(e=g,C=0;C<O;++C)r=n[C],F.visit(v)}function f(){if(!!n){var g,C=n.length,O;for(a=new Array(C),g=0;g<C;++g)O=n[g],a[O.index]=+i(O,g,n)}}function c(g){var C=0,O,F,G=0,Y,$,q;if(g.length){for(Y=$=q=0;q<4;++q)(O=g[q])&&(F=Math.abs(O.value))&&(C+=O.value,G+=F,Y+=F*O.x,$+=F*O.y);g.x=Y/G,g.y=$/G}else{O=g,O.x=O.data.x,O.y=O.data.y;do C+=a[O.data.index];while(O=O.next)}g.value=C}function v(g,C,O,F){if(!g.value)return!0;var G=g.x-r.x,Y=g.y-r.y,$=F-C,q=G*G+Y*Y;if($*$/l<q)return q<s&&(G===0&&(G=yo(t),q+=G*G),Y===0&&(Y=yo(t),q+=Y*Y),q<o&&(q=Math.sqrt(o*q)),r.vx+=G*g.value*e/q,r.vy+=Y*g.value*e/q),!0;if(g.length||q>=s)return;(g.data!==r||g.next)&&(G===0&&(G=yo(t),q+=G*G),Y===0&&(Y=yo(t),q+=Y*Y),q<o&&(q=Math.sqrt(o*q)));do g.data!==r&&($=a[g.data.index]*e/q,r.vx+=G*$,r.vy+=Y*$);while(g=g.next)}return u.initialize=function(g,C){n=g,t=C,f()},u.strength=function(g){return arguments.length?(i=typeof g=="function"?g:qn(+g),f(),u):i},u.distanceMin=function(g){return arguments.length?(o=g*g,u):Math.sqrt(o)},u.distanceMax=function(g){return arguments.length?(s=g*g,u):Math.sqrt(s)},u.theta=function(g){return arguments.length?(l=g*g,u):Math.sqrt(l)},u}function P3(n,r){var t,e=1;n==null&&(n=0),r==null&&(r=0);function i(){var a,o=t.length,s,l=0,u=0;for(a=0;a<o;++a)s=t[a],l+=s.x,u+=s.y;for(l=(l/o-n)*e,u=(u/o-r)*e,a=0;a<o;++a)s=t[a],s.x-=l,s.y-=u}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(r=+a,i):r},i.strength=function(a){return arguments.length?(e=+a,i):e},i}function L3(n){return n.index}function Ux(n,r){var t=n.get(r);if(!t)throw new Error("node not found: "+r);return t}function Zx(n){var r=L3,t=c,e,i=qn(30),a,o,s,l,u,f=1;n==null&&(n=[]);function c(F){return 1/Math.min(s[F.source.index],s[F.target.index])}function v(F){for(var G=0,Y=n.length;G<f;++G)for(var $=0,q,ut,kt,Nt,Wt,Ft,ee;$<Y;++$)q=n[$],ut=q.source,kt=q.target,Nt=kt.x+kt.vx-ut.x-ut.vx||yo(u),Wt=kt.y+kt.vy-ut.y-ut.vy||yo(u),Ft=Math.sqrt(Nt*Nt+Wt*Wt),Ft=(Ft-a[$])/Ft*F*e[$],Nt*=Ft,Wt*=Ft,kt.vx-=Nt*(ee=l[$]),kt.vy-=Wt*ee,ut.vx+=Nt*(ee=1-ee),ut.vy+=Wt*ee}function g(){if(!!o){var F,G=o.length,Y=n.length,$=new Map(o.map(function(ut,kt){return[r(ut,kt,o),ut]})),q;for(F=0,s=new Array(G);F<Y;++F)q=n[F],q.index=F,typeof q.source!="object"&&(q.source=Ux($,q.source)),typeof q.target!="object"&&(q.target=Ux($,q.target)),s[q.source.index]=(s[q.source.index]||0)+1,s[q.target.index]=(s[q.target.index]||0)+1;for(F=0,l=new Array(Y);F<Y;++F)q=n[F],l[F]=s[q.source.index]/(s[q.source.index]+s[q.target.index]);e=new Array(Y),C(),a=new Array(Y),O()}}function C(){if(!!o)for(var F=0,G=n.length;F<G;++F)e[F]=+t(n[F],F,n)}function O(){if(!!o)for(var F=0,G=n.length;F<G;++F)a[F]=+i(n[F],F,n)}return v.initialize=function(F,G){o=F,u=G,g()},v.links=function(F){return arguments.length?(n=F,g(),v):n},v.id=function(F){return arguments.length?(r=F,v):r},v.iterations=function(F){return arguments.length?(f=+F,v):f},v.strength=function(F){return arguments.length?(t=typeof F=="function"?F:qn(+F),C(),v):t},v.distance=function(F){return arguments.length?(i=typeof F=="function"?F:qn(+F),O(),v):i},v}function I3(n){return n.x+n.vx}function k3(n){return n.y+n.vy}function Kx(n){var r,t,e,i=1,a=1;typeof n!="function"&&(n=qn(n==null?1:+n));function o(){for(var u,f=r.length,c,v,g,C,O,F,G=0;G<a;++G)for(c=tc(r,I3,k3).visitAfter(s),u=0;u<f;++u)v=r[u],O=t[v.index],F=O*O,g=v.x+v.vx,C=v.y+v.vy,c.visit(Y);function Y($,q,ut,kt,Nt){var Wt=$.data,Ft=$.r,ee=O+Ft;if(Wt){if(Wt.index>v.index){var ve=g-Wt.x-Wt.vx,fe=C-Wt.y-Wt.vy,Te=ve*ve+fe*fe;Te<ee*ee&&(ve===0&&(ve=yo(e),Te+=ve*ve),fe===0&&(fe=yo(e),Te+=fe*fe),Te=(ee-(Te=Math.sqrt(Te)))/Te*i,v.vx+=(ve*=Te)*(ee=(Ft*=Ft)/(F+Ft)),v.vy+=(fe*=Te)*ee,Wt.vx-=ve*(ee=1-ee),Wt.vy-=fe*ee)}return}return q>g+ee||kt<g-ee||ut>C+ee||Nt<C-ee}}function s(u){if(u.data)return u.r=t[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(!!r){var u,f=r.length,c;for(t=new Array(f),u=0;u<f;++u)c=r[u],t[c.index]=+n(c,u,r)}}return o.initialize=function(u,f){r=u,e=f,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(n=typeof u=="function"?u:qn(+u),l(),o):n},o}function O3(n){var r=qn(.1),t,e,i;typeof n!="function"&&(n=qn(n==null?0:+n));function a(s){for(var l=0,u=t.length,f;l<u;++l)f=t[l],f.vx+=(i[l]-f.x)*e[l]*s}function o(){if(!!t){var s,l=t.length;for(e=new Array(l),i=new Array(l),s=0;s<l;++s)e[s]=isNaN(i[s]=+n(t[s],s,t))?0:+r(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(r=typeof s=="function"?s:qn(+s),o(),a):r},a.x=function(s){return arguments.length?(n=typeof s=="function"?s:qn(+s),o(),a):n},a}function B3(n){var r=qn(.1),t,e,i;typeof n!="function"&&(n=qn(n==null?0:+n));function a(s){for(var l=0,u=t.length,f;l<u;++l)f=t[l],f.vy+=(i[l]-f.y)*e[l]*s}function o(){if(!!t){var s,l=t.length;for(e=new Array(l),i=new Array(l),s=0;s<l;++s)e[s]=isNaN(i[s]=+n(t[s],s,t))?0:+r(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(r=typeof s=="function"?s:qn(+s),o(),a):r},a.y=function(s){return arguments.length?(n=typeof s=="function"?s:qn(+s),o(),a):n},a}function D3(){function n(ir){return function(){return ir}}var r=function(Mr){return Mr.cluster},t=n(1),e=n(-1),i=n(100),a=n(.1),o=[0,0],s=[],l={},u=[],f=100,c=100,v={none:{x:0,y:0}},g=[],C,O="force",F=!0,G=.1;function Y(ir){if(!F)return Y;C.tick(),Wt();for(var Mr=0,zr=s.length,Lr=void 0,_r=ir*G;Mr<zr;++Mr)Lr=s[Mr],Lr.vx+=(v[r(Lr)].x-Lr.x)*_r,Lr.vy+=(v[r(Lr)].y-Lr.y)*_r}function $(){!s||q()}function q(){if(!(!s||!s.length)){if(r(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var ir=ut();C=Wx(ir.nodes).force("x",O3(f).strength(.1)).force("y",B3(c).strength(.1)).force("collide",Kx(function(Mr){return Mr.r}).iterations(4)).force("charge",jx().strength(e)).force("links",Zx(ir.nodes.length?ir.links:[]).distance(i).strength(a)),g=C.nodes(),Wt()}}function ut(){var ir=[],Mr=[],zr={},Lr=[],_r={},Hr=[];return _r=kt(s),Hr=Nt(u),Lr=Object.keys(_r),Lr.forEach(function(li,Br){var Ne=_r[li];ir.push({id:li,size:Ne.count,r:Math.sqrt(Ne.sumforceNodeSize/Math.PI)}),zr[li]=Br}),Hr.forEach(function(li){var Br=zr[li.source],Ne=zr[li.target];Br!==void 0&&Ne!==void 0&&Mr.push({source:Br,target:Ne,count:li.count})}),{nodes:ir,links:Mr}}function kt(ir){var Mr={};return ir.forEach(function(zr){var Lr=r(zr);Mr[Lr]||(Mr[Lr]={count:0,sumforceNodeSize:0})}),ir.forEach(function(zr){var Lr=r(zr),_r=t(zr),Hr=Mr[Lr];Hr.count=Hr.count+1,Hr.sumforceNodeSize=Hr.sumforceNodeSize+Math.PI*(_r*_r)*1.3,Mr[Lr]=Hr}),Mr}function Nt(ir){var Mr={},zr=[];ir.forEach(function(_r){var Hr=Ft(_r),li=0;Mr[Hr]!==void 0&&(li=Mr[Hr]),li+=1,Mr[Hr]=li});var Lr=Object.entries(Mr);return Lr.forEach(function(_r){var Hr=_r[0],li=_r[1],Br=Hr.split("~")[0],Ne=Hr.split("~")[1];Br!==void 0&&Ne!==void 0&&zr.push({source:Br,target:Ne,count:li})}),zr}function Wt(){return v={none:{x:0,y:0}},g.forEach(function(ir){v[ir.id]={x:ir.x-o[0],y:ir.y-o[1]}}),v}function Ft(ir){var Mr=r(l[ir.source]),zr=r(l[ir.target]);return Mr<=zr?Mr+"~"+zr:zr+"~"+Mr}function ee(ir){l={},ir.forEach(function(Mr){l[Mr.id]=Mr})}function ve(ir){return arguments.length?(O=ir,$(),Y):O}function fe(ir){return arguments.length?typeof ir=="string"?(r=function(zr){return zr[ir]},Y):(r=ir,Y):r}function Te(ir){return arguments.length?(F=ir,Y):F}function Be(ir){return arguments.length?(G=ir,Y):G}function ke(ir){return arguments.length?(f=ir,Y):f}function Qe(ir){return arguments.length?(c=ir,Y):c}function tr(ir){return arguments.length?(ee(ir||[]),s=ir||[],Y):s}function rr(ir){return arguments.length?(u=ir||[],$(),Y):u}function Ze(ir){return arguments.length?(typeof ir=="function"?t=ir:t=n(+ir),$(),Y):t}function Ke(ir){return arguments.length?(typeof ir=="function"?e=ir:e=n(+ir),$(),Y):e}function wr(ir){return arguments.length?(typeof ir=="function"?i=ir:i=n(+ir),$(),Y):i}function br(ir){return arguments.length?(typeof ir=="function"?a=ir:a=n(+ir),$(),Y):a}function Ir(ir){return arguments.length?(o=ir,Y):o}return Y.initialize=function(ir){s=ir,$()},Y.template=ve,Y.groupBy=fe,Y.enableGrouping=Te,Y.strength=Be,Y.centerX=ke,Y.centerY=Qe,Y.nodes=tr,Y.links=rr,Y.forceNodeSize=Ze,Y.nodeSize=Y.forceNodeSize,Y.forceCharge=Ke,Y.forceLinkDistance=wr,Y.forceLinkStrength=br,Y.offset=Ir,Y.getFocis=Wt,Y}var eo={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK"},F3=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.nodeStrength=null,t.edgeStrength=null,t.preventOverlap=!1,t.clusterNodeStrength=null,t.clusterEdgeStrength=null,t.clusterEdgeDistance=null,t.clusterNodeSize=null,t.clusterFociStrength=null,t.linkDistance=50,t.alphaDecay=.028,t.alphaMin=.001,t.alpha=.3,t.collideStrength=1,t.workerEnabled=!1,t.tick=function(){},t.onLayoutEnd=function(){},t.onTick=function(){},t.ticking=void 0,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},onTick:function(){},workerEnabled:!1}},r.prototype.init=function(t){var e=this;e.nodes=t.nodes||[];var i=t.edges||[];e.edges=i.map(function(a){var o={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(l){s.indexOf(l)>-1||(o[l]=a[l])}),o}),e.ticking=!1},r.prototype.execute=function(t){var e=this,i=e.nodes,a=e.edges;if(!e.ticking){var o=e.forceSimulation,s=e.alphaMin,l=e.alphaDecay,u=e.alpha;if(o)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(i),e.clusterForce.links(a)),o.nodes(i),e.edgeForce.links(a)),e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0;else try{var f=jx();if(e.nodeStrength&&f.strength(e.nodeStrength),o=Wx().nodes(i),e.clustering){var c=D3();c.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),a&&c.links(a),i&&c.nodes(i),c.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=c,o.force("group",c)}if(o.force("center",P3(e.center[0],e.center[1])).force("charge",f).alpha(u).alphaDecay(l).alphaMin(s),e.preventOverlap&&e.overlapProcess(o),a){var v=Zx().id(function(O){return O.id}).links(a);e.edgeStrength&&v.strength(e.edgeStrength),e.linkDistance&&v.distance(e.linkDistance),e.edgeForce=v,o.force("link",v)}if(e.workerEnabled&&!Y3()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!e.workerEnabled)o.on("tick",function(){e.tick()}).on("end",function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()}),e.ticking=!0;else{o.stop();for(var g=N3(o),C=1;C<=g;C++)o.tick(),postMessage({type:eo.TICK,currentTick:C,totalTicks:g,nodes:i},void 0);e.ticking=!1}e.forceSimulation=o,e.ticking=!0}catch(O){e.ticking=!1,console.warn(O)}}},r.prototype.overlapProcess=function(t){var e=this,i=e.nodeSize,a=e.nodeSpacing,o,s,l=e.collideStrength;if((0,wa.default)(a)?s=function(){return a}:(0,rl.default)(a)?s=a:s=function(){return 0},!i)o=function(g){if(g.size){if((0,kn.default)(g.size)){var C=g.size[0]>g.size[1]?g.size[0]:g.size[1];return C/2+s(g)}return g.size/2+s(g)}return 10+s(g)};else if((0,rl.default)(i))o=function(g){var C=i(g);return C+s(g)};else if((0,kn.default)(i)){var u=i[0]>i[1]?i[0]:i[1],f=u/2;o=function(g){return f+s(g)}}else if((0,wa.default)(i)){var c=i/2;o=function(g){return c+s(g)}}else o=function(){return 10};t.force("collisionForce",Kx(o).strength(l))},r.prototype.updateCfg=function(t){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,(0,Rs.default)(e,t)},r.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},r}(ya),R3=F3;function N3(n){var r=n.alphaMin(),t=n.alphaTarget(),e=n.alpha(),i=Math.log((r-t)/(e-t))/Math.log(1-n.alphaDecay()),a=Math.ceil(i);return a}function Y3(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}var G3=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=500,t.gravity=10,t.clustering=!1,t.clusterGravity=10,t.linkDistance=50,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.linkStrength=1,t.nodeStrength=30,t.preventOverlap=!1,t.collideStrength=1,t.optimizeRangeFactor=1,t.tick=function(){},t.nodes=[],t.edges=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,clustering:!1,clusterGravity:10,preventOverlap:!1,nodeSpacing:void 0,collideStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,i=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=i[0],e[0].y=i[1];return}var a={},o={};e.forEach(function(s,l){a[s.id]=s,o[s.id]=l}),t.nodeMap=a,t.nodeIdxMap=o,t.run()}},r.prototype.run=function(){var t=this,e=t.nodes,i=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,s=t.velocityDecay,l=t.clustering,u;t.initVals(),l&&(u=t.getClusterMap());for(var f=function(F){var G=[];e.forEach(function(Y,$){G[$]={x:0,y:0}}),t.applyCalculate(e,i,G),l&&t.applyClusterForce(u,G),e.forEach(function(Y,$){!(0,h.isNumber)(Y.x)||!(0,h.isNumber)(Y.y)||(Y.x+=G[$].x*s,Y.y+=G[$].y*s)}),c.alpha+=(c.alphaTarget-c.alpha)*c.alphaDecay,t.tick()},c=this,v=0;v<a;v++)f(v);var g=[0,0];e.forEach(function(O){!(0,h.isNumber)(O.x)||!(0,h.isNumber)(O.y)||(g[0]+=O.x,g[1]+=O.y)}),g[0]/=e.length,g[1]/=e.length;var C=[o[0]-g[0],o[1]-g[1]];e.forEach(function(O,F){!(0,h.isNumber)(O.x)||!(0,h.isNumber)(O.y)||(O.x+=C[0],O.y+=C[1])})},r.prototype.initVals=function(){for(var t=this,e=t.edges,i={},a=0;a<e.length;++a)i[e[a].source]?i[e[a].source]++:i[e[a].source]=1,i[e[a].target]?i[e[a].target]++:i[e[a].target]=1;for(var o=[],a=0;a<e.length;++a)o[a]=i[e[a].source]/(i[e[a].source]+i[e[a].target]);this.bias=o;var s=t.nodeSize,l=t.nodeSpacing,u,f;if((0,h.isNumber)(l)?f=function(){return l}:(0,h.isFunction)(l)?f=l:f=function(){return 0},!s)u=function(ut){if(ut.size){if((0,h.isArray)(ut.size)){var kt=ut.size[0]>ut.size[1]?ut.size[0]:ut.size[1];return kt/2+f(ut)}return ut.size/2+f(ut)}return 10+f(ut)};else if((0,h.isFunction)(s))u=function(ut){var kt=s(ut);return kt+f(ut)};else if((0,h.isArray)(s)){var c=s[0]>s[1]?s[0]:s[1],v=c/2;u=function(ut){return v+f(ut)}}else if((0,h.isNumber)(s)){var g=s/2;u=function(ut){return g+f(ut)}}else u=function(){return 10};this.nodeSize=u;var C=this.linkDistance,O;C||(C=50),(0,h.isNumber)(C)&&(O=function(ut){return C}),this.linkDistance=O;var F=this.linkStrength,G;F||(F=1),(0,h.isNumber)(F)&&(G=function(ut){return F}),this.linkStrength=G;var Y=this.nodeStrength,$;Y||(Y=30),(0,h.isNumber)(Y)&&($=function(ut){return Y}),this.nodeStrength=$},r.prototype.getClusterMap=function(){var t=this,e=t.nodes,i={};e.forEach(function(o){if(i[o.cluster]===void 0){var s={name:o.cluster,cx:0,cy:0,count:0};i[o.cluster]=s}var l=i[o.cluster];(0,h.isNumber)(o.x)&&(l.cx+=o.x),(0,h.isNumber)(o.y)&&(l.cy+=o.y),l.count++});for(var a in i)i[a].cx/=i[a].count,i[a].cy/=i[a].count;return i},r.prototype.applyClusterForce=function(t,e){var i=this,a=i.gravity,o=i.nodes,s=i.clusterGravity||a,l=this.alpha;o.forEach(function(f,c){if(!(!(0,h.isNumber)(f.x)||!(0,h.isNumber)(f.y))){var v=t[f.cluster],g=f.x-v.cx,C=f.y-v.cy,O=Math.sqrt(g*g+C*C);e[c].x-=g*s*l/O,e[c].y-=C*s*l/O}});for(var u in t)t[u].cx=0,t[u].cy=0,t[u].count=0;o.forEach(function(f){var c=t[f.cluster];(0,h.isNumber)(f.x)&&(c.cx+=f.x),(0,h.isNumber)(f.y)&&(c.cy+=f.y),c.count++});for(var u in t)t[u].cx/=t[u].count,t[u].cy/=t[u].count},r.prototype.applyCalculate=function(t,e,i){var a=this,o={};t.forEach(function(s,l){i[l]={x:0,y:0},t.forEach(function(u,f){if(!(l<f)){var c=s.x-u.x,v=s.y-u.y,g=c*c+v*v;g<1&&(g=Math.sqrt(g)),c===0&&(c=Math.random()*.01,g+=c*c),v===0&&(v=Math.random()*.01,g+=v*v);var C=Math.sqrt(g);o[s.id+"-"+u.id]={vx:c,vy:v,vl:g,sqrtVl:C},o[u.id+"-"+s.id]={vx:-c,vy:-v,vl:g,sqrtVl:C}}})}),a.calRepulsive(t,i,o),a.calAttractive(e,i,o)},r.prototype.calRepulsive=function(t,e,i){var a=this.width*this.optimizeRangeFactor*this.width*this.optimizeRangeFactor,o=this.nodeStrength,s=this.alpha,l=this.collideStrength,u=this.preventOverlap,f=this.nodeSize;t.forEach(function(c,v){t.forEach(function(g,C){if(v!==C&&!(!(0,h.isNumber)(c.x)||!(0,h.isNumber)(g.x)||!(0,h.isNumber)(c.y)||!(0,h.isNumber)(g.y))){var O=i[c.id+"-"+g.id],F=O.vl,G=O.vx,Y=O.vy;if(!(F>a)&&(e[v].x+=G*o(g)*s/F,e[v].y+=Y*o(g)*s/F,u&&v<C)){var $=f(c),q=f(g),ut=$+q;if(F<ut*ut){var kt=i[c.id+"-"+g.id].sqrtVl,Nt=(ut-kt)/kt*l,Wt=q*q/($*$+q*q),Ft=G*Nt,ee=Y*Nt;e[v].x+=Ft*Wt,e[v].y+=ee*Wt,Wt=1-Wt,e[C].x-=Ft*Wt,e[C].y-=ee*Wt}}}})})},r.prototype.calAttractive=function(t,e,i){var a=this,o=this.linkDistance,s=this.alpha,l=this.linkStrength,u=this.bias;t.forEach(function(f,c){if(!(!f.source||!f.target)){var v=a.nodeIdxMap[f.source],g=a.nodeIdxMap[f.target];if(v!==g){var C=a.nodeMap[f.source],O=a.nodeMap[f.target];if(!(!(0,h.isNumber)(O.x)||!(0,h.isNumber)(C.x)||!(0,h.isNumber)(O.y)||!(0,h.isNumber)(C.y))){var F=i[f.target+"-"+f.source],G=F.vl,Y=F.sqrtVl,$=F.vx,q=F.vy,ut=(Y-o(f))/Y*s*l(f),kt=$*ut,Nt=q*ut,Wt=u[c];e[g].x-=kt*Wt,e[g].y-=Nt*Wt,e[v].x+=kt*(1-Wt),e[v].y+=Nt*(1-Wt)}}}})},r}(ya),z3=G3,X3=800,V3=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.gravity=10,t.speed=1,t.clustering=!1,t.clusterGravity=10,t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,speed:1,clustering:!1,clusterGravity:10}},r.prototype.execute=function(){var t=this,e=this,i=e.nodes,a=e.center;if(!(!i||i.length===0)){if(i.length===1){i[0].x=a[0],i[0].y=a[1];return}var o={},s={};i.forEach(function(l,u){(0,h.isNumber)(l.x)||(l.x=Math.random()*t.width),(0,h.isNumber)(l.y)||(l.y=Math.random()*t.height),o[l.id]=l,s[l.id]=u}),e.nodeMap=o,e.nodeIdxMap=s,e.run()}},r.prototype.run=function(){var t=this,e=t.nodes,i=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,s=t.width/10,l=Math.sqrt(t.width*t.height/(e.length+1)),u=t.gravity,f=t.speed,c=t.clustering,v={};if(c){e.forEach(function(F){if(v[F.cluster]===void 0){var G={name:F.cluster,cx:0,cy:0,count:0};v[F.cluster]=G}var Y=v[F.cluster];(0,h.isNumber)(F.x)&&(Y.cx+=F.x),(0,h.isNumber)(F.y)&&(Y.cy+=F.y),Y.count++});for(var g in v)v[g].cx/=v[g].count,v[g].cy/=v[g].count}for(var C=function(G){var Y=[];if(e.forEach(function(ut,kt){Y[kt]={x:0,y:0}}),t.applyCalculate(e,i,Y,l),c){var $=t.clusterGravity||u;e.forEach(function(ut,kt){if(!(!(0,h.isNumber)(ut.x)||!(0,h.isNumber)(ut.y))){var Nt=v[ut.cluster],Wt=Math.sqrt((ut.x-Nt.cx)*(ut.x-Nt.cx)+(ut.y-Nt.cy)*(ut.y-Nt.cy)),Ft=l*$;Y[kt].x-=Ft*(ut.x-Nt.cx)/Wt,Y[kt].y-=Ft*(ut.y-Nt.cy)/Wt}});for(var q in v)v[q].cx=0,v[q].cy=0,v[q].count=0;e.forEach(function(ut){var kt=v[ut.cluster];(0,h.isNumber)(ut.x)&&(kt.cx+=ut.x),(0,h.isNumber)(ut.y)&&(kt.cy+=ut.y),kt.count++});for(var q in v)v[q].cx/=v[q].count,v[q].cy/=v[q].count}e.forEach(function(ut,kt){if(!(!(0,h.isNumber)(ut.x)||!(0,h.isNumber)(ut.y))){var Nt=.01*l*u;Y[kt].x-=Nt*(ut.x-o[0]),Y[kt].y-=Nt*(ut.y-o[1])}}),e.forEach(function(ut,kt){if(!(!(0,h.isNumber)(ut.x)||!(0,h.isNumber)(ut.y))){var Nt=Math.sqrt(Y[kt].x*Y[kt].x+Y[kt].y*Y[kt].y);if(Nt>0){var Wt=Math.min(s*(f/X3),Nt);ut.x+=Y[kt].x/Nt*Wt,ut.y+=Y[kt].y/Nt*Wt}}})},O=0;O<a;O++)C(O)},r.prototype.applyCalculate=function(t,e,i,a){var o=this;o.calRepulsive(t,i,a),o.calAttractive(e,i,a)},r.prototype.calRepulsive=function(t,e,i){t.forEach(function(a,o){e[o]={x:0,y:0},t.forEach(function(s,l){if(o!==l&&!(!(0,h.isNumber)(a.x)||!(0,h.isNumber)(s.x)||!(0,h.isNumber)(a.y)||!(0,h.isNumber)(s.y))){var u=a.x-s.x,f=a.y-s.y,c=u*u+f*f;if(c===0){c=1;var v=o>l?1:-1;u=.01*v,f=.01*v}var g=i*i/c;e[o].x+=u*g,e[o].y+=f*g}})})},r.prototype.calAttractive=function(t,e,i){var a=this;t.forEach(function(o){if(!(!o.source||!o.target)){var s=a.nodeIdxMap[o.source],l=a.nodeIdxMap[o.target];if(s!==l){var u=a.nodeMap[o.source],f=a.nodeMap[o.target];if(!(!(0,h.isNumber)(f.x)||!(0,h.isNumber)(u.x)||!(0,h.isNumber)(f.y)||!(0,h.isNumber)(u.y))){var c=f.x-u.x,v=f.y-u.y,g=Math.sqrt(c*c+v*v),C=g*g/i;e[l].x-=c/g*C,e[l].y-=v/g*C,e[s].x+=c/g*C,e[s].y+=v/g*C}}}})},r}(ya),H3=V3,W3=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.begin=[0,0],t.preventOverlap=!0,t.preventOverlapPadding=10,t.condense=!1,t.sortBy="degree",t.nodeSize=30,t.nodes=[],t.edges=[],t.center=[0,0],t.width=300,t.height=300,t.row=0,t.col=0,t.cellWidth=0,t.cellHeight=0,t.cellUsed={},t.id2manPos={},t}return r.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},r.prototype.execute=function(){var t=this,e=t.nodes,i=e.length,a=t.center;if(i!==0){if(i===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.edges,s=[];e.forEach(function(Y){s.push(Y)});var l={};if(s.forEach(function(Y,$){l[Y.id]=$}),(t.sortBy==="degree"||!(0,ki.default)(t.sortBy)||s[0][t.sortBy]===void 0)&&(t.sortBy="degree",Ja(e[0].degree))){var u=iu(s.length,l,o);s.forEach(function(Y,$){Y.degree=u[$]})}s.sort(function(Y,$){return $[t.sortBy]-Y[t.sortBy]}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var f=t.rows,c=t.cols!=null?t.cols:t.columns;if(t.cells=i,f!=null&&c!=null?(t.rows=f,t.cols=c):f!=null&&c==null?(t.rows=f,t.cols=Math.ceil(t.cells/t.rows)):f==null&&c!=null?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var v=t.small(),g=t.large();(v-1)*g>=t.cells?t.small(v-1):(g-1)*v>=t.cells&&t.large(g-1)}else for(;t.cols*t.rows<t.cells;){var v=t.small(),g=t.large();(g+1)*v>=t.cells?t.large(g+1):t.small(v+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&s.forEach(function(Y){(!Y.x||!Y.y)&&(Y.x=0,Y.y=0);var $,q;(0,h.isArray)(Y.size)?($=Y.size[0],q=Y.size[1]):(0,h.isNumber)(Y.size)&&($=Y.size,q=Y.size),($===void 0||q===void 0)&&((0,h.isArray)(t.nodeSize)?($=t.nodeSize[0],q=t.nodeSize[1]):(0,h.isNumber)(t.nodeSize)?($=t.nodeSize,q=t.nodeSize):($=30,q=30));var ut=t.preventOverlapPadding,kt=$+ut,Nt=q+ut;t.cellWidth=Math.max(t.cellWidth,kt),t.cellHeight=Math.max(t.cellHeight,Nt)}),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var C=0;C<s.length;C++){var O=s[C],F=void 0;if(t.position&&(F=t.position(O)),F&&(F.row!==void 0||F.col!==void 0)){var G={row:F.row,col:F.col};if(G.col===void 0)for(G.col=0;t.used(G.row,G.col);)G.col++;else if(G.row===void 0)for(G.row=0;t.used(G.row,G.col);)G.row++;t.id2manPos[O.id]=G,t.use(G.row,G.col)}t.getPos(O)}}},r.prototype.small=function(t){var e=this,i,a=e.rows||5,o=e.cols||5;if(t==null)i=Math.min(a,o);else{var s=Math.min(a,o);s===e.rows?e.rows=t:e.cols=t}return i},r.prototype.large=function(t){var e=this,i,a=e.rows||5,o=e.cols||5;if(t==null)i=Math.max(a,o);else{var s=Math.max(a,o);s===e.rows?e.rows=t:e.cols=t}return i},r.prototype.used=function(t,e){var i=this;return i.cellUsed["c-"+t+"-"+e]||!1},r.prototype.use=function(t,e){var i=this;i.cellUsed["c-"+t+"-"+e]=!0},r.prototype.moveToNextCell=function(){var t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)},r.prototype.getPos=function(t){var e=this,i=e.begin,a=e.cellWidth,o=e.cellHeight,s,l,u=e.id2manPos[t.id];if(u)s=u.col*a+a/2+i[0],l=u.row*o+o/2+i[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();s=e.col*a+a/2+i[0],l=e.row*o+o/2+i[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=s,t.y=l},r}(ya),j3=W3,U3=d(64074),Z3=d(5361);function K3(n,r){return r&&((0,U3.Z)(r)==="object"||typeof r=="function")?r:(0,Z3.Z)(n)}var $x=d(9882),Qx=d(62377),wu=d(73025),Su=d(11108);const $3=Object.prototype.toString;function la(n){return $3.call(n).endsWith("Array]")}function Q3(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!la(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,i=r.toIndex,a=i===void 0?n.length:i;if(e<0||e>=n.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[e],s=e+1;s<a;s++)n[s]>o&&(o=n[s]);return o}function J3(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!la(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,i=r.toIndex,a=i===void 0?n.length:i;if(e<0||e>=n.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[e],s=e+1;s<a;s++)n[s]<o&&(o=n[s]);return o}function Jx(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(la(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(r.output!==void 0){if(!la(r.output))throw new TypeError("output option must be an array if specified");t=r.output}else t=new Array(n.length);var e=J3(n),i=Q3(n);if(e===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=r.min,o=a===void 0?r.autoMinMax?e:0:a,s=r.max,l=s===void 0?r.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-e),f=0;f<n.length;f++)t[f]=(n[f]-e)*u+o;return t}var Cu=" ".repeat(2),qx=" ".repeat(4);function q3(){return t1(this)}function t1(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.maxRows,e=t===void 0?15:t,i=r.maxColumns,a=i===void 0?10:i,o=r.maxNumSize,s=o===void 0?8:o;return"".concat(n.constructor.name,` {
`).concat(Cu,`[
`).concat(qx).concat(t4(n,e,a,s),`
`).concat(Cu,`]
`).concat(Cu,"rows: ").concat(n.rows,`
`).concat(Cu,"columns: ").concat(n.columns,`
}`)}function t4(n,r,t,e){for(var i=n.rows,a=n.columns,o=Math.min(i,r),s=Math.min(a,t),l=[],u=0;u<o;u++){for(var f=[],c=0;c<s;c++)f.push(e4(n.get(u,c),e));l.push("".concat(f.join(" ")))}return s!==a&&(l[l.length-1]+=" ... ".concat(a-t," more columns")),o!==i&&l.push("... ".concat(i-r," more rows")),l.join(`
`.concat(qx))}function e4(n,r){var t=String(n);if(t.length<=r)return t.padEnd(r," ");var e=n.toPrecision(r-2);if(e.length<=r)return e;var i=n.toExponential(r-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,r-o.length)+o}function r4(n,r){n.prototype.add=function(e){return typeof e=="number"?this.addS(e):this.addM(e)},n.prototype.addS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+e);return this},n.prototype.addM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+e.get(i,a));return this},n.add=function(e,i){var a=new r(e);return a.add(i)},n.prototype.sub=function(e){return typeof e=="number"?this.subS(e):this.subM(e)},n.prototype.subS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-e);return this},n.prototype.subM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-e.get(i,a));return this},n.sub=function(e,i){var a=new r(e);return a.sub(i)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(e){return typeof e=="number"?this.mulS(e):this.mulM(e)},n.prototype.mulS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*e);return this},n.prototype.mulM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*e.get(i,a));return this},n.mul=function(e,i){var a=new r(e);return a.mul(i)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(e){return typeof e=="number"?this.divS(e):this.divM(e)},n.prototype.divS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/e);return this},n.prototype.divM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/e.get(i,a));return this},n.div=function(e,i){var a=new r(e);return a.div(i)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(e){return typeof e=="number"?this.modS(e):this.modM(e)},n.prototype.modS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%e);return this},n.prototype.modM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%e.get(i,a));return this},n.mod=function(e,i){var a=new r(e);return a.mod(i)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(e){return typeof e=="number"?this.andS(e):this.andM(e)},n.prototype.andS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&e);return this},n.prototype.andM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&e.get(i,a));return this},n.and=function(e,i){var a=new r(e);return a.and(i)},n.prototype.or=function(e){return typeof e=="number"?this.orS(e):this.orM(e)},n.prototype.orS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|e);return this},n.prototype.orM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|e.get(i,a));return this},n.or=function(e,i){var a=new r(e);return a.or(i)},n.prototype.xor=function(e){return typeof e=="number"?this.xorS(e):this.xorM(e)},n.prototype.xorS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^e);return this},n.prototype.xorM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^e.get(i,a));return this},n.xor=function(e,i){var a=new r(e);return a.xor(i)},n.prototype.leftShift=function(e){return typeof e=="number"?this.leftShiftS(e):this.leftShiftM(e)},n.prototype.leftShiftS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<e);return this},n.prototype.leftShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<e.get(i,a));return this},n.leftShift=function(e,i){var a=new r(e);return a.leftShift(i)},n.prototype.signPropagatingRightShift=function(e){return typeof e=="number"?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},n.prototype.signPropagatingRightShiftS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>e);return this},n.prototype.signPropagatingRightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>e.get(i,a));return this},n.signPropagatingRightShift=function(e,i){var a=new r(e);return a.signPropagatingRightShift(i)},n.prototype.rightShift=function(e){return typeof e=="number"?this.rightShiftS(e):this.rightShiftM(e)},n.prototype.rightShiftS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>e);return this},n.prototype.rightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>e.get(i,a));return this},n.rightShift=function(e,i){var a=new r(e);return a.rightShift(i)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,~this.get(e,i));return this},n.not=function(e){var i=new r(e);return i.not()},n.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.abs(this.get(e,i)));return this},n.abs=function(e){var i=new r(e);return i.abs()},n.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.acos(this.get(e,i)));return this},n.acos=function(e){var i=new r(e);return i.acos()},n.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.acosh(this.get(e,i)));return this},n.acosh=function(e){var i=new r(e);return i.acosh()},n.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.asin(this.get(e,i)));return this},n.asin=function(e){var i=new r(e);return i.asin()},n.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.asinh(this.get(e,i)));return this},n.asinh=function(e){var i=new r(e);return i.asinh()},n.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.atan(this.get(e,i)));return this},n.atan=function(e){var i=new r(e);return i.atan()},n.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.atanh(this.get(e,i)));return this},n.atanh=function(e){var i=new r(e);return i.atanh()},n.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.cbrt(this.get(e,i)));return this},n.cbrt=function(e){var i=new r(e);return i.cbrt()},n.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.ceil(this.get(e,i)));return this},n.ceil=function(e){var i=new r(e);return i.ceil()},n.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.clz32(this.get(e,i)));return this},n.clz32=function(e){var i=new r(e);return i.clz32()},n.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.cos(this.get(e,i)));return this},n.cos=function(e){var i=new r(e);return i.cos()},n.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.cosh(this.get(e,i)));return this},n.cosh=function(e){var i=new r(e);return i.cosh()},n.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.exp(this.get(e,i)));return this},n.exp=function(e){var i=new r(e);return i.exp()},n.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.expm1(this.get(e,i)));return this},n.expm1=function(e){var i=new r(e);return i.expm1()},n.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.floor(this.get(e,i)));return this},n.floor=function(e){var i=new r(e);return i.floor()},n.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.fround(this.get(e,i)));return this},n.fround=function(e){var i=new r(e);return i.fround()},n.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.log(this.get(e,i)));return this},n.log=function(e){var i=new r(e);return i.log()},n.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.log1p(this.get(e,i)));return this},n.log1p=function(e){var i=new r(e);return i.log1p()},n.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.log10(this.get(e,i)));return this},n.log10=function(e){var i=new r(e);return i.log10()},n.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.log2(this.get(e,i)));return this},n.log2=function(e){var i=new r(e);return i.log2()},n.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.round(this.get(e,i)));return this},n.round=function(e){var i=new r(e);return i.round()},n.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.sign(this.get(e,i)));return this},n.sign=function(e){var i=new r(e);return i.sign()},n.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.sin(this.get(e,i)));return this},n.sin=function(e){var i=new r(e);return i.sin()},n.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.sinh(this.get(e,i)));return this},n.sinh=function(e){var i=new r(e);return i.sinh()},n.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.sqrt(this.get(e,i)));return this},n.sqrt=function(e){var i=new r(e);return i.sqrt()},n.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.tan(this.get(e,i)));return this},n.tan=function(e){var i=new r(e);return i.tan()},n.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.tanh(this.get(e,i)));return this},n.tanh=function(e){var i=new r(e);return i.tanh()},n.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,Math.trunc(this.get(e,i)));return this},n.trunc=function(e){var i=new r(e);return i.trunc()},n.pow=function(e,i){var a=new r(e);return a.pow(i)},n.prototype.pow=function(e){return typeof e=="number"?this.powS(e):this.powM(e)},n.prototype.powS=function(e){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),e));return this},n.prototype.powM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),e.get(i,a)));return this}}function Ca(n,r,t){var e=t?n.rows:n.rows-1;if(r<0||r>e)throw new RangeError("Row index out of range")}function Ma(n,r,t){var e=t?n.columns:n.columns-1;if(r<0||r>e)throw new RangeError("Column index out of range")}function ns(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function as(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function i4(n,r){if(!la(r))throw new TypeError("row indices must be an array");for(var t=0;t<r.length;t++)if(r[t]<0||r[t]>=n.rows)throw new RangeError("row indices are out of range")}function n4(n,r){if(!la(r))throw new TypeError("column indices must be an array");for(var t=0;t<r.length;t++)if(r[t]<0||r[t]>=n.columns)throw new RangeError("column indices are out of range")}function e1(n,r,t,e,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Eu("startRow",r),Eu("endRow",t),Eu("startColumn",e),Eu("endColumn",i),r>t||e>i||r<0||r>=n.rows||t<0||t>=n.rows||e<0||e>=n.columns||i<0||i>=n.columns)throw new RangeError("Submatrix indices are out of range")}function Mu(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=[],e=0;e<n;e++)t.push(r);return t}function Eu(n,r){if(typeof r!="number")throw new TypeError("".concat(n," must be a number"))}function os(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function a4(n){for(var r=Mu(n.rows),t=0;t<n.rows;++t)for(var e=0;e<n.columns;++e)r[t]+=n.get(t,e);return r}function o4(n){for(var r=Mu(n.columns),t=0;t<n.rows;++t)for(var e=0;e<n.columns;++e)r[e]+=n.get(t,e);return r}function s4(n){for(var r=0,t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)r+=n.get(t,e);return r}function l4(n){for(var r=Mu(n.rows,1),t=0;t<n.rows;++t)for(var e=0;e<n.columns;++e)r[t]*=n.get(t,e);return r}function u4(n){for(var r=Mu(n.columns,1),t=0;t<n.rows;++t)for(var e=0;e<n.columns;++e)r[e]*=n.get(t,e);return r}function h4(n){for(var r=1,t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)r*=n.get(t,e);return r}function f4(n,r,t){for(var e=n.rows,i=n.columns,a=[],o=0;o<e;o++){for(var s=0,l=0,u=0,f=0;f<i;f++)u=n.get(o,f)-t[o],s+=u,l+=u*u;r?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function c4(n,r,t){for(var e=n.rows,i=n.columns,a=[],o=0;o<i;o++){for(var s=0,l=0,u=0,f=0;f<e;f++)u=n.get(f,o)-t[o],s+=u,l+=u*u;r?a.push((l-s*s/e)/(e-1)):a.push((l-s*s/e)/e)}return a}function v4(n,r,t){for(var e=n.rows,i=n.columns,a=e*i,o=0,s=0,l=0,u=0;u<e;u++)for(var f=0;f<i;f++)l=n.get(u,f)-t,o+=l,s+=l*l;return r?(s-o*o/a)/(a-1):(s-o*o/a)/a}function d4(n,r){for(var t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)n.set(t,e,n.get(t,e)-r[t])}function p4(n,r){for(var t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)n.set(t,e,n.get(t,e)-r[e])}function g4(n,r){for(var t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)n.set(t,e,n.get(t,e)-r)}function y4(n){for(var r=[],t=0;t<n.rows;t++){for(var e=0,i=0;i<n.columns;i++)e+=Math.pow(n.get(t,i),2)/(n.columns-1);r.push(Math.sqrt(e))}return r}function m4(n,r){for(var t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)n.set(t,e,n.get(t,e)/r[t])}function x4(n){for(var r=[],t=0;t<n.columns;t++){for(var e=0,i=0;i<n.rows;i++)e+=Math.pow(n.get(i,t),2)/(n.rows-1);r.push(Math.sqrt(e))}return r}function b4(n,r){for(var t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)n.set(t,e,n.get(t,e)/r[e])}function w4(n){for(var r=n.size-1,t=0,e=0;e<n.columns;e++)for(var i=0;i<n.rows;i++)t+=Math.pow(n.get(i,e),2)/r;return Math.sqrt(t)}function S4(n,r){for(var t=0;t<n.rows;t++)for(var e=0;e<n.columns;e++)n.set(t,e,n.get(t,e)/r)}var Tn=function(){function n(){(0,wu.Z)(this,n)}return(0,Su.Z)(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)t.call(this,e,i);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)t.push(this.get(e,i));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var i=0;i<this.columns;i++)t[e].push(this.get(e,i))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,i=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>i?(o=!0,i=e):(a=!1,o=!0);t++}return a}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,i=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>i?(o=!0,i=e):(a=!1,o=!0);for(var s=e+1;s<this.rows;s++)this.get(t,s)!==0&&(a=!1);t++}return a}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,i=0;e<t.rows&&i<t.columns;){for(var a=e,o=e;o<t.rows;o++)t.get(o,i)>t.get(a,i)&&(a=o);if(t.get(a,i)===0)i++;else{t.swapRows(e,a);for(var s=t.get(e,i),l=i;l<t.columns;l++)t.set(e,l,t.get(e,l)/s);for(var u=e+1;u<t.rows;u++){var f=t.get(u,i)/t.get(e,i);t.set(u,i,0);for(var c=i+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*f)}e++,i++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,i=t.rows,a=i-1;a>=0;)if(t.maxRow(a)===0)a--;else{for(var o=0,s=!1;o<i&&s===!1;)t.get(a,o)===1?s=!0:o++;for(var l=0;l<a;l++)for(var u=t.get(l,o),f=o;f<e;f++){var c=t.get(l,f)-u*t.get(a,f);t.set(l,f,c)}a--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.rows,i=e===void 0?1:e,a=t.columns,o=a===void 0?1:a;if(!Number.isInteger(i)||i<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var s=new ui(this.rows*i,this.columns*o),l=0;l<i;l++)for(var u=0;u<o;u++)s.setSubMatrix(this,this.rows*l,this.columns*u);return s}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){Ca(this,t);for(var e=[],i=0;i<this.columns;i++)e.push(this.get(t,i));return e}},{key:"getRowVector",value:function(t){return ui.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){Ca(this,t),e=ns(this,e);for(var i=0;i<this.columns;i++)this.set(t,i,e[i]);return this}},{key:"swapRows",value:function(t,e){Ca(this,t),Ca(this,e);for(var i=0;i<this.columns;i++){var a=this.get(t,i);this.set(t,i,this.get(e,i)),this.set(e,i,a)}return this}},{key:"getColumn",value:function(t){Ma(this,t);for(var e=[],i=0;i<this.rows;i++)e.push(this.get(i,t));return e}},{key:"getColumnVector",value:function(t){return ui.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){Ma(this,t),e=as(this,e);for(var i=0;i<this.rows;i++)this.set(i,t,e[i]);return this}},{key:"swapColumns",value:function(t,e){Ma(this,t),Ma(this,e);for(var i=0;i<this.rows;i++){var a=this.get(i,t);this.set(i,t,this.get(i,e)),this.set(i,e,a)}return this}},{key:"addRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)+t[i]);return this}},{key:"subRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)-t[i]);return this}},{key:"mulRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*t[i]);return this}},{key:"divRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)/t[i]);return this}},{key:"addColumnVector",value:function(t){t=as(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=as(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=as(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=as(this,t);for(var e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)/t[e]);return this}},{key:"mulRow",value:function(t,e){Ca(this,t);for(var i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e);return this}},{key:"mulColumn",value:function(t,e){Ma(this,t);for(var i=0;i<this.rows;i++)this.set(i,t,this.get(i,t)*e);return this}},{key:"max",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":{for(var e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)>e[i]&&(e[i]=this.get(i,a));return e}case"column":{for(var o=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),s=0;s<this.rows;s++)for(var l=0;l<this.columns;l++)this.get(s,l)>o[l]&&(o[l]=this.get(s,l));return o}case void 0:{for(var u=this.get(0,0),f=0;f<this.rows;f++)for(var c=0;c<this.columns;c++)this.get(f,c)>u&&(u=this.get(f,c));return u}default:throw new Error("invalid option: ".concat(t))}}},{key:"maxIndex",value:function(){os(this);for(var t=this.get(0,0),e=[0,0],i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)>t&&(t=this.get(i,a),e[0]=i,e[1]=a);return e}},{key:"min",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":{for(var e=new Array(this.rows).fill(Number.POSITIVE_INFINITY),i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)<e[i]&&(e[i]=this.get(i,a));return e}case"column":{for(var o=new Array(this.columns).fill(Number.POSITIVE_INFINITY),s=0;s<this.rows;s++)for(var l=0;l<this.columns;l++)this.get(s,l)<o[l]&&(o[l]=this.get(s,l));return o}case void 0:{for(var u=this.get(0,0),f=0;f<this.rows;f++)for(var c=0;c<this.columns;c++)this.get(f,c)<u&&(u=this.get(f,c));return u}default:throw new Error("invalid option: ".concat(t))}}},{key:"minIndex",value:function(){os(this);for(var t=this.get(0,0),e=[0,0],i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)<t&&(t=this.get(i,a),e[0]=i,e[1]=a);return e}},{key:"maxRow",value:function(t){if(Ca(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i));return e}},{key:"maxRowIndex",value:function(t){Ca(this,t),os(this);for(var e=this.get(t,0),i=[t,0],a=1;a<this.columns;a++)this.get(t,a)>e&&(e=this.get(t,a),i[1]=a);return i}},{key:"minRow",value:function(t){if(Ca(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i));return e}},{key:"minRowIndex",value:function(t){Ca(this,t),os(this);for(var e=this.get(t,0),i=[t,0],a=1;a<this.columns;a++)this.get(t,a)<e&&(e=this.get(t,a),i[1]=a);return i}},{key:"maxColumn",value:function(t){if(Ma(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t));return e}},{key:"maxColumnIndex",value:function(t){Ma(this,t),os(this);for(var e=this.get(0,t),i=[0,t],a=1;a<this.rows;a++)this.get(a,t)>e&&(e=this.get(a,t),i[0]=a);return i}},{key:"minColumn",value:function(t){if(Ma(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t));return e}},{key:"minColumnIndex",value:function(t){Ma(this,t),os(this);for(var e=this.get(0,t),i=[0,t],a=1;a<this.rows;a++)this.get(a,t)<e&&(e=this.get(a,t),i[0]=a);return i}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],i=0;i<t;i++)e.push(this.get(i,i));return e}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",e=0;if(t==="max")return this.max();if(t==="frobenius"){for(var i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)e=e+this.get(i,a)*this.get(i,a);return Math.sqrt(e)}else throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)t+=this.get(e,i),this.set(e,i,t);return this}},{key:"dot",value:function(t){n.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var i=0,a=0;a<e.length;a++)i+=e[a]*t[a];return i}},{key:"mmul",value:function(t){t=ui.checkMatrix(t);for(var e=this.rows,i=this.columns,a=t.columns,o=new ui(e,a),s=new Float64Array(i),l=0;l<a;l++){for(var u=0;u<i;u++)s[u]=t.get(u,l);for(var f=0;f<e;f++){for(var c=0,v=0;v<i;v++)c+=this.get(f,v)*s[v];o.set(f,l,c)}}return o}},{key:"strassen2x2",value:function(t){t=ui.checkMatrix(t);var e=new ui(2,2),i=this.get(0,0),a=t.get(0,0),o=this.get(0,1),s=t.get(0,1),l=this.get(1,0),u=t.get(1,0),f=this.get(1,1),c=t.get(1,1),v=(i+f)*(a+c),g=(l+f)*a,C=i*(s-c),O=f*(u-a),F=(i+o)*c,G=(l-i)*(a+s),Y=(o-f)*(u+c),$=v+O-F+Y,q=C+F,ut=g+O,kt=v-g+C+G;return e.set(0,0,$),e.set(0,1,q),e.set(1,0,ut),e.set(1,1,kt),e}},{key:"strassen3x3",value:function(t){t=ui.checkMatrix(t);var e=new ui(3,3),i=this.get(0,0),a=this.get(0,1),o=this.get(0,2),s=this.get(1,0),l=this.get(1,1),u=this.get(1,2),f=this.get(2,0),c=this.get(2,1),v=this.get(2,2),g=t.get(0,0),C=t.get(0,1),O=t.get(0,2),F=t.get(1,0),G=t.get(1,1),Y=t.get(1,2),$=t.get(2,0),q=t.get(2,1),ut=t.get(2,2),kt=(i+a+o-s-l-c-v)*G,Nt=(i-s)*(-C+G),Wt=l*(-g+C+F-G-Y-$+ut),Ft=(-i+s+l)*(g-C+G),ee=(s+l)*(-g+C),ve=i*g,fe=(-i+f+c)*(g-O+Y),Te=(-i+f)*(O-Y),Be=(f+c)*(-g+O),ke=(i+a+o-l-u-f-c)*Y,Qe=c*(-g+O+F-G-Y-$+q),tr=(-o+c+v)*(G+$-q),rr=(o-v)*(G-q),Ze=o*$,Ke=(c+v)*(-$+q),wr=(-o+l+u)*(Y+$-ut),br=(o-u)*(Y-ut),Ir=(l+u)*(-$+ut),ir=a*F,Mr=u*q,zr=s*O,Lr=f*C,_r=v*ut,Hr=ve+Ze+ir,li=kt+Ft+ee+ve+tr+Ze+Ke,Br=ve+fe+Be+ke+Ze+wr+Ir,Ne=Nt+Wt+Ft+ve+Ze+wr+br,ar=Nt+Ft+ee+ve+Mr,Wr=Ze+wr+br+Ir+zr,ei=ve+fe+Te+Qe+tr+rr+Ze,Nr=tr+rr+Ze+Ke+Lr,hi=ve+fe+Te+Be+_r;return e.set(0,0,Hr),e.set(0,1,li),e.set(0,2,Br),e.set(1,0,Ne),e.set(1,1,ar),e.set(1,2,Wr),e.set(2,0,ei),e.set(2,1,Nr),e.set(2,2,hi),e}},{key:"mmulStrassen",value:function(t){t=ui.checkMatrix(t);var e=this.clone(),i=e.rows,a=e.columns,o=t.rows,s=t.columns;a!==o&&console.warn("Multiplying ".concat(i," x ").concat(a," and ").concat(o," x ").concat(s," matrix: dimensions do not match."));function l(v,g,C){var O=v.rows,F=v.columns;if(O===g&&F===C)return v;var G=n.zeros(g,C);return G=G.setSubMatrix(v,0,0),G}var u=Math.max(i,o),f=Math.max(a,s);e=l(e,u,f),t=l(t,u,f);function c(v,g,C,O){if(C<=512||O<=512)return v.mmul(g);C%2==1&&O%2==1?(v=l(v,C+1,O+1),g=l(g,C+1,O+1)):C%2==1?(v=l(v,C+1,O),g=l(g,C+1,O)):O%2==1&&(v=l(v,C,O+1),g=l(g,C,O+1));var F=parseInt(v.rows/2,10),G=parseInt(v.columns/2,10),Y=v.subMatrix(0,F-1,0,G-1),$=g.subMatrix(0,F-1,0,G-1),q=v.subMatrix(0,F-1,G,v.columns-1),ut=g.subMatrix(0,F-1,G,g.columns-1),kt=v.subMatrix(F,v.rows-1,0,G-1),Nt=g.subMatrix(F,g.rows-1,0,G-1),Wt=v.subMatrix(F,v.rows-1,G,v.columns-1),Ft=g.subMatrix(F,g.rows-1,G,g.columns-1),ee=c(n.add(Y,Wt),n.add($,Ft),F,G),ve=c(n.add(kt,Wt),$,F,G),fe=c(Y,n.sub(ut,Ft),F,G),Te=c(Wt,n.sub(Nt,$),F,G),Be=c(n.add(Y,q),Ft,F,G),ke=c(n.sub(kt,Y),n.add($,ut),F,G),Qe=c(n.sub(q,Wt),n.add(Nt,Ft),F,G),tr=n.add(ee,Te);tr.sub(Be),tr.add(Qe);var rr=n.add(fe,Be),Ze=n.add(ve,Te),Ke=n.sub(ee,ve);Ke.add(fe),Ke.add(ke);var wr=n.zeros(2*tr.rows,2*tr.columns);return wr=wr.setSubMatrix(tr,0,0),wr=wr.setSubMatrix(rr,tr.rows,0),wr=wr.setSubMatrix(Ze,0,tr.columns),wr=wr.setSubMatrix(Ke,tr.rows,tr.columns),wr.subMatrix(0,C-1,0,O-1)}return c(e,t,u,f)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,i=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(i))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(i>=o)throw new RangeError("min must be smaller than max");for(var s=new ui(this.rows,this.columns),l=0;l<this.rows;l++){var u=this.getRow(l);u.length>0&&Jx(u,{min:i,max:o,output:u}),s.setRow(l,u)}return s}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,i=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(i))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(i>=o)throw new RangeError("min must be smaller than max");for(var s=new ui(this.rows,this.columns),l=0;l<this.columns;l++){var u=this.getColumn(l);u.length&&Jx(u,{min:i,max:o,output:u}),s.setColumn(l,u)}return s}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var i=0;i<t;i++){var a=this.get(e,i),o=this.get(e,this.columns-1-i);this.set(e,i,o),this.set(e,this.columns-1-i,a)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var i=0;i<t;i++){var a=this.get(i,e),o=this.get(this.rows-1-i,e);this.set(i,e,o),this.set(this.rows-1-i,e,a)}return this}},{key:"kroneckerProduct",value:function(t){t=ui.checkMatrix(t);for(var e=this.rows,i=this.columns,a=t.rows,o=t.columns,s=new ui(e*a,i*o),l=0;l<e;l++)for(var u=0;u<i;u++)for(var f=0;f<a;f++)for(var c=0;c<o;c++)s.set(a*l+f,o*u+c,this.get(l,u)*t.get(f,c));return s}},{key:"kroneckerSum",value:function(t){if(t=ui.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,i=t.rows,a=this.kroneckerProduct(ui.eye(i,i)),o=ui.eye(e,e).kroneckerProduct(t);return a.add(o)}},{key:"transpose",value:function(){for(var t=new ui(this.columns,this.rows),e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)t.set(i,e,this.get(e,i));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r1,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r1,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,i,a){e1(this,t,e,i,a);for(var o=new ui(e-t+1,a-i+1),s=t;s<=e;s++)for(var l=i;l<=a;l++)o.set(s-t,l-i,this.get(s,l));return o}},{key:"subMatrixRow",value:function(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this.columns-1),e>i||e<0||e>=this.columns||i<0||i>=this.columns)throw new RangeError("Argument out of range");for(var a=new ui(t.length,i-e+1),o=0;o<t.length;o++)for(var s=e;s<=i;s++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));a.set(o,s-e,this.get(t[o],s))}return a}},{key:"subMatrixColumn",value:function(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this.rows-1),e>i||e<0||e>=this.rows||i<0||i>=this.rows)throw new RangeError("Argument out of range");for(var a=new ui(i-e+1,t.length),o=0;o<t.length;o++)for(var s=e;s<=i;s++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));a.set(s-e,o,this.get(s,t[o]))}return a}},{key:"setSubMatrix",value:function(t,e,i){if(t=ui.checkMatrix(t),t.isEmpty())return this;var a=e+t.rows-1,o=i+t.columns-1;e1(this,e,a,i,o);for(var s=0;s<t.rows;s++)for(var l=0;l<t.columns;l++)this.set(e+s,i+l,t.get(s,l));return this}},{key:"selection",value:function(t,e){i4(this,t),n4(this,e);for(var i=new ui(t.length,e.length),a=0;a<t.length;a++)for(var o=t[a],s=0;s<e.length;s++){var l=e[s];i.set(a,s,this.get(o,l))}return i}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,i=0;i<t;i++)e+=this.get(i,i);return e}},{key:"clone",value:function(){for(var t=new ui(this.rows,this.columns),e=0;e<this.rows;e++)for(var i=0;i<this.columns;i++)t.set(e,i,this.get(e,i));return t}},{key:"sum",value:function(t){switch(t){case"row":return a4(this);case"column":return o4(this);case void 0:return s4(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return l4(this);case"column":return u4(this);case void 0:return h4(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":{for(var i=0;i<this.rows;i++)e[i]/=this.columns;return e}case"column":{for(var a=0;a<this.columns;a++)e[a]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var i=e,a=i.unbiased,o=a===void 0?!0:a,s=i.mean,l=s===void 0?this.mean(t):s;if(typeof o!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!la(l))throw new TypeError("mean must be an array");return f4(this,o,l)}case"column":{if(!la(l))throw new TypeError("mean must be an array");return c4(this,o,l)}case void 0:{if(typeof l!="number")throw new TypeError("mean must be a number");return v4(this,o,l)}default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){typeof t=="object"&&(e=t,t=void 0);var i=this.variance(t,e);if(t===void 0)return Math.sqrt(i);for(var a=0;a<i.length;a++)i[a]=Math.sqrt(i[a]);return i}},{key:"center",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var i=e,a=i.center,o=a===void 0?this.mean(t):a;switch(t){case"row":{if(!la(o))throw new TypeError("center must be an array");return d4(this,o),this}case"column":{if(!la(o))throw new TypeError("center must be an array");return p4(this,o),this}case void 0:{if(typeof o!="number")throw new TypeError("center must be a number");return g4(this,o),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var i=e.scale;switch(t){case"row":{if(i===void 0)i=y4(this);else if(!la(i))throw new TypeError("scale must be an array");return m4(this,i),this}case"column":{if(i===void 0)i=x4(this);else if(!la(i))throw new TypeError("scale must be an array");return b4(this,i),this}case void 0:{if(i===void 0)i=w4(this);else if(typeof i!="number")throw new TypeError("scale must be a number");return S4(this,i),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return t1(this,t)}}],[{key:"from1DArray",value:function(t,e,i){var a=t*e;if(a!==i.length)throw new RangeError("data length does not match given dimensions");for(var o=new ui(t,e),s=0;s<t;s++)for(var l=0;l<e;l++)o.set(s,l,i[s*e+l]);return o}},{key:"rowVector",value:function(t){for(var e=new ui(1,t.length),i=0;i<t.length;i++)e.set(0,i,t[i]);return e}},{key:"columnVector",value:function(t){for(var e=new ui(t.length,1),i=0;i<t.length;i++)e.set(i,0,t[i]);return e}},{key:"zeros",value:function(t,e){return new ui(t,e)}},{key:"ones",value:function(t,e){return new ui(t,e).fill(1)}},{key:"rand",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof i!="object")throw new TypeError("options must be an object");for(var a=i.random,o=a===void 0?Math.random:a,s=new ui(t,e),l=0;l<t;l++)for(var u=0;u<e;u++)s.set(l,u,o());return s}},{key:"randInt",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof i!="object")throw new TypeError("options must be an object");var a=i.min,o=a===void 0?0:a,s=i.max,l=s===void 0?1e3:s,u=i.random,f=u===void 0?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(l))throw new TypeError("max must be an integer");if(o>=l)throw new RangeError("min must be smaller than max");for(var c=l-o,v=new ui(t,e),g=0;g<t;g++)for(var C=0;C<e;C++){var O=o+Math.round(f()*c);v.set(g,C,O)}return v}},{key:"eye",value:function(t,e,i){e===void 0&&(e=t),i===void 0&&(i=1);for(var a=Math.min(t,e),o=this.zeros(t,e),s=0;s<a;s++)o.set(s,s,i);return o}},{key:"diag",value:function(t,e,i){var a=t.length;e===void 0&&(e=a),i===void 0&&(i=e);for(var o=Math.min(a,e,i),s=this.zeros(e,i),l=0;l<o;l++)s.set(l,l,t[l]);return s}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var i=t.rows,a=t.columns,o=new ui(i,a),s=0;s<i;s++)for(var l=0;l<a;l++)o.set(s,l,Math.min(t.get(s,l),e.get(s,l)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var i=t.rows,a=t.columns,o=new this(i,a),s=0;s<i;s++)for(var l=0;l<a;l++)o.set(s,l,Math.max(t.get(s,l),e.get(s,l)));return o}},{key:"checkMatrix",value:function(t){return n.isMatrix(t)?t:new ui(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}}]),n}();Tn.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Tn.prototype[Symbol.for("nodejs.util.inspect.custom")]=q3);function r1(n,r){return n-r}function C4(n){return n.every(function(r){return typeof r=="number"})}Tn.random=Tn.rand,Tn.randomInt=Tn.randInt,Tn.diagonal=Tn.diag,Tn.prototype.diagonal=Tn.prototype.diag,Tn.identity=Tn.eye,Tn.prototype.negate=Tn.prototype.neg,Tn.prototype.tensorProduct=Tn.prototype.kroneckerProduct;var ui=function(n){(0,$x.Z)(t,n);var r=(0,Qx.Z)(t);function t(e,i){var a;if((0,wu.Z)(this,t),a=r.call(this),t.isMatrix(e))return K3(a,e.clone());if(Number.isInteger(e)&&e>=0)if(a.data=[],Number.isInteger(i)&&i>=0)for(var o=0;o<e;o++)a.data.push(new Float64Array(i));else throw new TypeError("nColumns must be a positive integer");else if(la(e)){var s=e;if(e=s.length,i=e?s[0].length:0,typeof i!="number")throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var l=0;l<e;l++){if(s[l].length!==i)throw new RangeError("Inconsistent array dimensions");if(!C4(s[l]))throw new TypeError("Input data contains non-numeric values");a.data.push(Float64Array.from(s[l]))}}else throw new TypeError("First argument must be a positive number or an array");return a.rows=e,a.columns=i,a}return(0,Su.Z)(t,[{key:"set",value:function(i,a,o){return this.data[i][a]=o,this}},{key:"get",value:function(i,a){return this.data[i][a]}},{key:"removeRow",value:function(i){return Ca(this,i),this.data.splice(i,1),this.rows-=1,this}},{key:"addRow",value:function(i,a){return a===void 0&&(a=i,i=this.rows),Ca(this,i,!0),a=Float64Array.from(ns(this,a)),this.data.splice(i,0,a),this.rows+=1,this}},{key:"removeColumn",value:function(i){Ma(this,i);for(var a=0;a<this.rows;a++){for(var o=new Float64Array(this.columns-1),s=0;s<i;s++)o[s]=this.data[a][s];for(var l=i+1;l<this.columns;l++)o[l-1]=this.data[a][l];this.data[a]=o}return this.columns-=1,this}},{key:"addColumn",value:function(i,a){typeof a=="undefined"&&(a=i,i=this.columns),Ma(this,i,!0),a=as(this,a);for(var o=0;o<this.rows;o++){for(var s=new Float64Array(this.columns+1),l=0;l<i;l++)s[l]=this.data[o][l];for(s[l++]=a[o];l<this.columns+1;l++)s[l]=this.data[o][l-1];this.data[o]=s}return this.columns+=1,this}}]),t}(Tn);r4(Tn,ui);var M4=function(n){(0,$x.Z)(t,n);var r=(0,Qx.Z)(t);function t(e){var i;return(0,wu.Z)(this,t),i=r.call(this),i.data=e,i.rows=e.length,i.columns=e[0].length,i}return(0,Su.Z)(t,[{key:"set",value:function(i,a,o){return this.data[i][a]=o,this}},{key:"get",value:function(i,a){return this.data[i][a]}}]),t}(Tn);function ss(n,r){var t=0;return Math.abs(n)>Math.abs(r)?(t=r/n,Math.abs(n)*Math.sqrt(1+t*t)):r!==0?(t=n/r,Math.abs(r)*Math.sqrt(1+t*t)):0}var i1=function(){function n(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,wu.Z)(this,n),r=M4.checkMatrix(r),r.isEmpty())throw new Error("Matrix must be non-empty");var e=r.rows,i=r.columns,a=t.computeLeftSingularVectors,o=a===void 0?!0:a,s=t.computeRightSingularVectors,l=s===void 0?!0:s,u=t.autoTranspose,f=u===void 0?!1:u,c=Boolean(o),v=Boolean(l),g=!1,C;if(e<i)if(!f)C=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{C=r.transpose(),e=C.rows,i=C.columns,g=!0;var O=c;c=v,v=O}else C=r.clone();for(var F=Math.min(e,i),G=Math.min(e+1,i),Y=new Float64Array(G),$=new ui(e,F),q=new ui(i,i),ut=new Float64Array(i),kt=new Float64Array(e),Nt=new Float64Array(G),Wt=0;Wt<G;Wt++)Nt[Wt]=Wt;for(var Ft=Math.min(e-1,i),ee=Math.max(0,Math.min(i-2,e)),ve=Math.max(Ft,ee),fe=0;fe<ve;fe++){if(fe<Ft){Y[fe]=0;for(var Te=fe;Te<e;Te++)Y[fe]=ss(Y[fe],C.get(Te,fe));if(Y[fe]!==0){C.get(fe,fe)<0&&(Y[fe]=-Y[fe]);for(var Be=fe;Be<e;Be++)C.set(Be,fe,C.get(Be,fe)/Y[fe]);C.set(fe,fe,C.get(fe,fe)+1)}Y[fe]=-Y[fe]}for(var ke=fe+1;ke<i;ke++){if(fe<Ft&&Y[fe]!==0){for(var Qe=0,tr=fe;tr<e;tr++)Qe+=C.get(tr,fe)*C.get(tr,ke);Qe=-Qe/C.get(fe,fe);for(var rr=fe;rr<e;rr++)C.set(rr,ke,C.get(rr,ke)+Qe*C.get(rr,fe))}ut[ke]=C.get(fe,ke)}if(c&&fe<Ft)for(var Ze=fe;Ze<e;Ze++)$.set(Ze,fe,C.get(Ze,fe));if(fe<ee){ut[fe]=0;for(var Ke=fe+1;Ke<i;Ke++)ut[fe]=ss(ut[fe],ut[Ke]);if(ut[fe]!==0){ut[fe+1]<0&&(ut[fe]=0-ut[fe]);for(var wr=fe+1;wr<i;wr++)ut[wr]/=ut[fe];ut[fe+1]+=1}if(ut[fe]=-ut[fe],fe+1<e&&ut[fe]!==0){for(var br=fe+1;br<e;br++)kt[br]=0;for(var Ir=fe+1;Ir<e;Ir++)for(var ir=fe+1;ir<i;ir++)kt[Ir]+=ut[ir]*C.get(Ir,ir);for(var Mr=fe+1;Mr<i;Mr++)for(var zr=-ut[Mr]/ut[fe+1],Lr=fe+1;Lr<e;Lr++)C.set(Lr,Mr,C.get(Lr,Mr)+zr*kt[Lr])}if(v)for(var _r=fe+1;_r<i;_r++)q.set(_r,fe,ut[_r])}}var Hr=Math.min(i,e+1);if(Ft<i&&(Y[Ft]=C.get(Ft,Ft)),e<Hr&&(Y[Hr-1]=0),ee+1<Hr&&(ut[ee]=C.get(ee,Hr-1)),ut[Hr-1]=0,c){for(var li=Ft;li<F;li++){for(var Br=0;Br<e;Br++)$.set(Br,li,0);$.set(li,li,1)}for(var Ne=Ft-1;Ne>=0;Ne--)if(Y[Ne]!==0){for(var ar=Ne+1;ar<F;ar++){for(var Wr=0,ei=Ne;ei<e;ei++)Wr+=$.get(ei,Ne)*$.get(ei,ar);Wr=-Wr/$.get(Ne,Ne);for(var Nr=Ne;Nr<e;Nr++)$.set(Nr,ar,$.get(Nr,ar)+Wr*$.get(Nr,Ne))}for(var hi=Ne;hi<e;hi++)$.set(hi,Ne,-$.get(hi,Ne));$.set(Ne,Ne,1+$.get(Ne,Ne));for(var ai=0;ai<Ne-1;ai++)$.set(ai,Ne,0)}else{for(var Ur=0;Ur<e;Ur++)$.set(Ur,Ne,0);$.set(Ne,Ne,1)}}if(v)for(var fi=i-1;fi>=0;fi--){if(fi<ee&&ut[fi]!==0)for(var Ci=fi+1;Ci<i;Ci++){for(var Ui=0,Di=fi+1;Di<i;Di++)Ui+=q.get(Di,fi)*q.get(Di,Ci);Ui=-Ui/q.get(fi+1,fi);for(var tn=fi+1;tn<i;tn++)q.set(tn,Ci,q.get(tn,Ci)+Ui*q.get(tn,fi))}for(var sn=0;sn<i;sn++)q.set(sn,fi,0);q.set(fi,fi,1)}for(var Fn=Hr-1,Gn=0,yn=Number.EPSILON;Hr>0;){var Xr=void 0,en=void 0;for(Xr=Hr-2;Xr>=-1&&Xr!==-1;Xr--){var _n=Number.MIN_VALUE+yn*Math.abs(Y[Xr]+Math.abs(Y[Xr+1]));if(Math.abs(ut[Xr])<=_n||Number.isNaN(ut[Xr])){ut[Xr]=0;break}}if(Xr===Hr-2)en=4;else{var Sn=void 0;for(Sn=Hr-1;Sn>=Xr&&Sn!==Xr;Sn--){var Ga=(Sn!==Hr?Math.abs(ut[Sn]):0)+(Sn!==Xr+1?Math.abs(ut[Sn-1]):0);if(Math.abs(Y[Sn])<=yn*Ga){Y[Sn]=0;break}}Sn===Xr?en=3:Sn===Hr-1?en=1:(en=2,Xr=Sn)}switch(Xr++,en){case 1:{var Pn=ut[Hr-2];ut[Hr-2]=0;for(var Yi=Hr-2;Yi>=Xr;Yi--){var Pi=ss(Y[Yi],Pn),Zi=Y[Yi]/Pi,Ji=Pn/Pi;if(Y[Yi]=Pi,Yi!==Xr&&(Pn=-Ji*ut[Yi-1],ut[Yi-1]=Zi*ut[Yi-1]),v)for(var zn=0;zn<i;zn++)Pi=Zi*q.get(zn,Yi)+Ji*q.get(zn,Hr-1),q.set(zn,Hr-1,-Ji*q.get(zn,Yi)+Zi*q.get(zn,Hr-1)),q.set(zn,Yi,Pi)}break}case 2:{var No=ut[Xr-1];ut[Xr-1]=0;for(var Ea=Xr;Ea<Hr;Ea++){var Us=ss(Y[Ea],No),yc=Y[Ea]/Us,mc=No/Us;if(Y[Ea]=Us,No=-mc*ut[Ea],ut[Ea]=yc*ut[Ea],c)for(var mo=0;mo<e;mo++)Us=yc*$.get(mo,Ea)+mc*$.get(mo,Xr-1),$.set(mo,Xr-1,-mc*$.get(mo,Ea)+yc*$.get(mo,Xr-1)),$.set(mo,Ea,Us)}break}case 3:{var Zs=Math.max(Math.abs(Y[Hr-1]),Math.abs(Y[Hr-2]),Math.abs(ut[Hr-2]),Math.abs(Y[Xr]),Math.abs(ut[Xr])),us=Y[Hr-1]/Zs,tb=Y[Hr-2]/Zs,Hu=ut[Hr-2]/Zs,xc=Y[Xr]/Zs,xY=ut[Xr]/Zs,Yo=((tb+us)*(tb-us)+Hu*Hu)/2,Wu=us*Hu*(us*Hu),Ks=0;(Yo!==0||Wu!==0)&&(Yo<0?Ks=0-Math.sqrt(Yo*Yo+Wu):Ks=Math.sqrt(Yo*Yo+Wu),Ks=Wu/(Yo+Ks));for(var Go=(xc+us)*(xc-us)+Ks,hs=xc*xY,Gi=Xr;Gi<Hr-1;Gi++){var ta=ss(Go,hs);ta===0&&(ta=Number.MIN_VALUE);var Aa=Go/ta,Ta=hs/ta;if(Gi!==Xr&&(ut[Gi-1]=ta),Go=Aa*Y[Gi]+Ta*ut[Gi],ut[Gi]=Aa*ut[Gi]-Ta*Y[Gi],hs=Ta*Y[Gi+1],Y[Gi+1]=Aa*Y[Gi+1],v)for(var xo=0;xo<i;xo++)ta=Aa*q.get(xo,Gi)+Ta*q.get(xo,Gi+1),q.set(xo,Gi+1,-Ta*q.get(xo,Gi)+Aa*q.get(xo,Gi+1)),q.set(xo,Gi,ta);if(ta=ss(Go,hs),ta===0&&(ta=Number.MIN_VALUE),Aa=Go/ta,Ta=hs/ta,Y[Gi]=ta,Go=Aa*ut[Gi]+Ta*Y[Gi+1],Y[Gi+1]=-Ta*ut[Gi]+Aa*Y[Gi+1],hs=Ta*ut[Gi+1],ut[Gi+1]=Aa*ut[Gi+1],c&&Gi<e-1)for(var bo=0;bo<e;bo++)ta=Aa*$.get(bo,Gi)+Ta*$.get(bo,Gi+1),$.set(bo,Gi+1,-Ta*$.get(bo,Gi)+Aa*$.get(bo,Gi+1)),$.set(bo,Gi,ta)}ut[Hr-2]=Go,Gn=Gn+1;break}case 4:{if(Y[Xr]<=0&&(Y[Xr]=Y[Xr]<0?-Y[Xr]:0,v))for(var ju=0;ju<=Fn;ju++)q.set(ju,Xr,-q.get(ju,Xr));for(;Xr<Fn&&!(Y[Xr]>=Y[Xr+1]);){var $s=Y[Xr];if(Y[Xr]=Y[Xr+1],Y[Xr+1]=$s,v&&Xr<i-1)for(var fs=0;fs<i;fs++)$s=q.get(fs,Xr+1),q.set(fs,Xr+1,q.get(fs,Xr)),q.set(fs,Xr,$s);if(c&&Xr<e-1)for(var cs=0;cs<e;cs++)$s=$.get(cs,Xr+1),$.set(cs,Xr+1,$.get(cs,Xr)),$.set(cs,Xr,$s);Xr++}Gn=0,Hr--;break}}}if(g){var bY=q;q=$,$=bY}this.m=e,this.n=i,this.s=Y,this.U=$,this.V=q}return(0,Su.Z)(n,[{key:"solve",value:function(t){for(var e=t,i=this.threshold,a=this.s.length,o=ui.zeros(a,a),s=0;s<a;s++)Math.abs(this.s[s])<=i?o.set(s,s,0):o.set(s,s,1/this.s[s]);for(var l=this.U,u=this.rightSingularVectors,f=u.mmul(o),c=u.rows,v=l.rows,g=ui.zeros(c,v),C=0;C<c;C++)for(var O=0;O<v;O++){for(var F=0,G=0;G<a;G++)F+=f.get(C,G)*l.get(O,G);g.set(C,O,F)}return g.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(ui.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,i=t.rows,a=t.columns,o=new ui(i,this.s.length),s=0;s<i;s++)for(var l=0;l<a;l++)Math.abs(this.s[l])>e&&o.set(s,l,t.get(s,l)/this.s[l]);for(var u=this.U,f=u.rows,c=u.columns,v=new ui(i,f),g=0;g<i;g++)for(var C=0;C<f;C++){for(var O=0,F=0;F<c;F++)O+=o.get(g,F)*u.get(C,F);v.set(g,C,O)}return v}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,i=this.s,a=0,o=i.length;a<o;a++)i[a]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return ui.diag(this.s)}}]),n}(),E4=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.linkDistance=50,t.scaledDistances=null,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},r.prototype.execute=function(){var t=this,e=t.nodes,i=t.edges,a=i===void 0?[]:i,o=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=o[0],e[0].y=o[1];return}var s=t.linkDistance,l=Rf({nodes:e,edges:a},!1),u=Ff(l);t.handleInfinity(u);var f=jm(u,s);t.scaledDistances=f;var c=t.runMDS();t.positions=c,c.forEach(function(v,g){e[g].x=v[0]+o[0],e[g].y=v[1]+o[1]})}},r.prototype.runMDS=function(){var t=this,e=2,i=t.scaledDistances,a=ui.mul(ui.pow(i,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new i1(a),f=ui.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(c){return ui.mul([c],[f]).toJSON()[0].splice(0,e)})},r.prototype.handleInfinity=function(t){var e=-999999;t.forEach(function(i){i.forEach(function(a){a!==Infinity&&e<a&&(e=a)})}),t.forEach(function(i,a){i.forEach(function(o,s){o===Infinity&&(t[a][s]=e)})})},r}(ya),A4=E4,T4=function(){function n(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}return n.prototype.layout=function(){var r=this,t=r.dimension,e=r.distances,i=r.linkDistance;try{var a=ui.mul(ui.pow(e,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new i1(a),f=ui.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(O){return ui.mul([O],[f]).toJSON()[0].splice(0,t)})}catch(O){for(var c=[],v=0;v<e.length;v++){var g=Math.random()*i,C=Math.random()*i;c.push([g,C])}return c}},n}(),_4=T4,P4=800,L4=function(){function n(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}return n.prototype.layout=function(){var r=this,t=r.positions,e=[],i=r.iterations,a=r.width/10;r.maxDisplace=a,r.disp=e;for(var o=0;o<i;o++)t.forEach(function(s,l){e[l]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return t},n.prototype.getRepulsion=function(){var r=this,t=r.positions,e=r.nodes,i=r.disp,a=r.k,o=r.radii||[];t.forEach(function(s,l){i[l]={x:0,y:0},t.forEach(function(u,f){if(l!==f&&o[l]===o[f]){var c=s[0]-u[0],v=s[1]-u[1],g=Math.sqrt(c*c+v*v);if(g===0){g=1;var C=l>f?1:-1;c=.01*C,v=.01*C}if(g<r.nodeSizeFunc(e[l])/2+r.nodeSizeFunc(e[f])/2){var O=a*a/g;i[l].x+=c/g*O,i[l].y+=v/g*O}}})})},n.prototype.updatePositions=function(){var r=this,t=r.positions,e=r.disp,i=r.speed,a=r.strictRadial,o=r.focusID,s=r.maxDisplace||r.width/10;a&&e.forEach(function(u,f){var c=t[f][0]-t[o][0],v=t[f][1]-t[o][1],g=Math.sqrt(c*c+v*v),C=v/g,O=-c/g,F=Math.sqrt(u.x*u.x+u.y*u.y),G=Math.acos((C*u.x+O*u.y)/F);G>Math.PI/2&&(G-=Math.PI/2,C*=-1,O*=-1);var Y=Math.cos(G)*F;u.x=C*Y,u.y=O*Y});var l=r.radii;t.forEach(function(u,f){if(f!==o){var c=Math.sqrt(e[f].x*e[f].x+e[f].y*e[f].y);if(c>0&&f!==o){var v=Math.min(s*(i/P4),c);if(u[0]+=e[f].x/c*v,u[1]+=e[f].y/c*v,a){var g=u[0]-t[o][0],C=u[1]-t[o][1],O=Math.sqrt(g*g+C*C);g=g/O*l[f],C=C/O*l[f],u[0]=t[o][0]+g,u[1]=t[o][1]+C}}}})},n}(),I4=L4;function k4(n){for(var r=n.length,t=n[0].length,e=[],i=0;i<r;i++){for(var a=[],o=0;o<t;o++)n[i][o]!==0?a.push(1/(n[i][o]*n[i][o])):a.push(0);e.push(a)}return e}function O4(n,r){var t=-1;return n.forEach(function(e,i){e.id===r&&(t=i)}),t}function n1(n,r){return Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]))}var B4=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.focusNode=null,t.unitRadius=null,t.linkDistance=50,t.preventOverlap=!1,t.strictRadial=!0,t.maxPreventOverlapIteration=200,t.sortStrength=10,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,i=t.edges||[],a=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.linkDistance,s=null;if((0,ki.default)(t.focusNode)){for(var l=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(s=e[u],t.focusNode=s,l=!0,u=e.length);l||(s=null)}else s=t.focusNode;s||(s=e[0],t.focusNode=s);var f=O4(e,s.id);t.focusIndex=f;var c=Rf({nodes:e,edges:i},!1),v=Ff(c),g=t.maxToFocus(v,f);t.handleInfinity(v,f,g+1),t.distances=v;var C=v[f];!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var O=t.width||500,F=t.height||500,G=O-a[0]>a[0]?a[0]:O-a[0],Y=F-a[1]>a[1]?a[1]:F-a[1];G===0&&(G=O/2),Y===0&&(Y=F/2);var $=Y>G?G:Y,q=Math.max.apply(Math,C),ut=[];C.forEach(function(rr,Ze){t.unitRadius||(t.unitRadius=$/q),ut[Ze]=rr*t.unitRadius}),t.radii=ut;var kt=t.eIdealDisMatrix();t.eIdealDistances=kt;var Nt=k4(kt);t.weights=Nt;var Wt=new _4({distances:kt,linkDistance:o}),Ft=Wt.layout();Ft.forEach(function(rr){Ja(rr[0])&&(rr[0]=Math.random()*o),Ja(rr[1])&&(rr[1]=Math.random()*o)}),t.positions=Ft,Ft.forEach(function(rr,Ze){e[Ze].x=rr[0]+a[0],e[Ze].y=rr[1]+a[1]}),Ft.forEach(function(rr){rr[0]-=Ft[f][0],rr[1]-=Ft[f][1]}),t.run();var ee=t.preventOverlap,ve=t.nodeSize,fe,Te=t.strictRadial;if(ee){var Be=t.nodeSpacing,ke;(0,wa.default)(Be)?ke=function(){return Be}:(0,rl.default)(Be)?ke=Be:ke=function(){return 0},ve?(0,kn.default)(ve)?fe=function(Ze){var Ke=ve[0]>ve[1]?ve[0]:ve[1];return Ke+ke(Ze)}:fe=function(Ze){return ve+ke(Ze)}:fe=function(Ze){if(Ze.size){if((0,kn.default)(Ze.size)){var Ke=Ze.size[0]>Ze.size[1]?Ze.size[0]:Ze.size[1];return Ke+ke(Ze)}return Ze.size+ke(Ze)}return 10+ke(Ze)};var Qe={nodeSizeFunc:fe,adjMatrix:c,positions:Ft,radii:ut,height:F,width:O,strictRadial:Te,focusID:f,iterations:t.maxPreventOverlapIteration||200,k:Ft.length/4.5,nodes:e},tr=new I4(Qe);Ft=tr.layout()}Ft.forEach(function(rr,Ze){e[Ze].x=rr[0]+a[0],e[Ze].y=rr[1]+a[1]})}},r.prototype.run=function(){for(var t=this,e=t.maxIteration,i=t.positions||[],a=t.weights||[],o=t.eIdealDistances||[],s=t.radii||[],l=0;l<=e;l++){var u=l/e;t.oneIteration(u,i,s,o,a)}},r.prototype.oneIteration=function(t,e,i,a,o){var s=this,l=1-t,u=s.focusIndex;e.forEach(function(f,c){var v=n1(f,[0,0]),g=v===0?0:1/v;if(c!==u){var C=0,O=0,F=0;e.forEach(function(Y,$){if(c!==$){var q=n1(f,Y),ut=q===0?0:1/q,kt=a[$][c];F+=o[c][$],C+=o[c][$]*(Y[0]+kt*(f[0]-Y[0])*ut),O+=o[c][$]*(Y[1]+kt*(f[1]-Y[1])*ut)}});var G=i[c]===0?0:1/i[c];F*=l,F+=t*G*G,C*=l,C+=t*G*f[0]*g,f[0]=C/F,O*=l,O+=t*G*f[1]*g,f[1]=O/F}})},r.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var i=t.distances,a=t.linkDistance,o=t.radii||[],s=t.unitRadius||50,l=[];return i&&i.forEach(function(u,f){var c=[];u.forEach(function(v,g){if(f===g)c.push(0);else if(o[f]===o[g])if(t.sortBy==="data")c.push(v*(Math.abs(f-g)*t.sortStrength)/(o[f]/s));else if(t.sortBy){var C=e[f][t.sortBy]||0,O=e[g][t.sortBy]||0;(0,ki.default)(C)&&(C=C.charCodeAt(0)),(0,ki.default)(O)&&(O=O.charCodeAt(0)),c.push(v*(Math.abs(C-O)*t.sortStrength)/(o[f]/s))}else c.push(v*a/(o[f]/s));else{var F=(a+s)/2;c.push(v*F)}}),l.push(c)}),l},r.prototype.handleInfinity=function(t,e,i){for(var a=t.length,o=0;o<a;o++)if(t[e][o]===Infinity){t[e][o]=i,t[o][e]=i;for(var s=0;s<a;s++)t[o][s]!==Infinity&&t[e][s]===Infinity&&(t[e][s]=i+t[o][s],t[s][e]=i+t[o][s])}for(var o=0;o<a;o++)if(o!==e){for(var s=0;s<a;s++)if(t[o][s]===Infinity){var l=Math.abs(t[e][o]-t[e][s]);l=l===0?1:l,t[o][s]=l}}},r.prototype.maxToFocus=function(t,e){for(var i=0,a=0;a<t[e].length;a++)t[e][a]!==Infinity&&(i=t[e][a]>i?t[e][a]:i);return i},r}(ya),D4=B4,F4=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},r.prototype.execute=function(){var t=this,e=t.nodes,i=.9,a=t.center;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),e&&e.forEach(function(o){o.x=(Math.random()-.5)*i*t.width+a[0],o.y=(Math.random()-.5)*i*t.height+a[1]})},r}(ya),R4=F4,N4=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=100,t.gravity=10,t.comboGravity=10,t.linkDistance=10,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.edgeStrength=.2,t.nodeStrength=30,t.preventOverlap=!1,t.preventNodeOverlap=!1,t.preventComboOverlap=!1,t.collideStrength=void 0,t.nodeCollideStrength=void 0,t.comboCollideStrength=void 0,t.optimizeRangeFactor=1,t.onTick=function(){},t.onLayoutEnd=function(){},t.depthAttractiveForceScale=.5,t.depthRepulsiveForceScale=2,t.nodes=[],t.edges=[],t.combos=[],t.comboTrees=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.oriComboMap={},t.nodeIdxMap={},t.comboMap={},t.previousLayouted=!1,t}return r.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.2,nodeStrength:30,linkDistance:10}},r.prototype.execute=function(){var t=this,e=t.nodes,i=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!(!e||e.length===0)){if(e.length===1){e[0].x=i[0],e[0].y=i[1];return}t.initVals(),t.run(),t.onLayoutEnd()}},r.prototype.run=function(){var t=this,e=t.nodes,i=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var a=t.center,o=t.velocityDecay,s=t.comboMap;t.previousLayouted||t.initPos(s);for(var l=function(g){var C=[];e.forEach(function(O,F){C[F]={x:0,y:0}}),t.applyCalculate(C),t.applyComboCenterForce(C),e.forEach(function(O,F){!(0,h.isNumber)(O.x)||!(0,h.isNumber)(O.y)||(O.x+=C[F].x*o,O.y+=C[F].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<i;u++)l(u);var f=[0,0];e.forEach(function(v){!(0,h.isNumber)(v.x)||!(0,h.isNumber)(v.y)||(f[0]+=v.x,f[1]+=v.y)}),f[0]/=e.length,f[1]/=e.length;var c=[a[0]-f[0],a[1]-f[1]];e.forEach(function(v,g){!(0,h.isNumber)(v.x)||!(0,h.isNumber)(v.y)||(v.x+=c[0],v.y+=c[1])}),t.combos.forEach(function(v){var g=s[v.id];g&&g.empty&&(v.x=g.cx||v.x,v.y=g.cy||v.y)}),t.previousLayouted=!0},r.prototype.initVals=function(){var t=this,e=t.edges,i=t.nodes,a=t.combos,o={},s={},l={};i.forEach(function(ke,Qe){s[ke.id]=ke,l[ke.id]=Qe}),t.nodeMap=s,t.nodeIdxMap=l;var u={};a.forEach(function(ke){u[ke.id]=ke}),t.oriComboMap=u,t.comboMap=t.getComboMap();var f=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||f,t.preventNodeOverlap=t.preventNodeOverlap||f;var c=t.collideStrength;c&&(t.comboCollideStrength=c,t.nodeCollideStrength=c);for(var v=0;v<e.length;++v)o[e[v].source]?o[e[v].source]++:o[e[v].source]=1,o[e[v].target]?o[e[v].target]++:o[e[v].target]=1;for(var g=[],v=0;v<e.length;++v)g[v]=o[e[v].source]/(o[e[v].source]+o[e[v].target]);this.bias=g;var C=t.nodeSize,O=t.nodeSpacing,F,G;if((0,h.isNumber)(O)?G=function(){return O}:(0,h.isFunction)(O)?G=O:G=function(){return 0},this.nodeSpacing=G,!C)F=function(Qe){if(Qe.size){if((0,h.isArray)(Qe.size)){var tr=Qe.size[0]>Qe.size[1]?Qe.size[0]:Qe.size[1];return tr/2}return Qe.size/2}return 10};else if((0,h.isFunction)(C))F=function(Qe){return C(Qe)};else if((0,h.isArray)(C)){var Y=C[0]>C[1]?C[0]:C[1],$=Y/2;F=function(Qe){return $}}else{var q=C/2;F=function(Qe){return q}}this.nodeSize=F;var ut=t.comboSpacing,kt;(0,h.isNumber)(ut)?kt=function(){return ut}:(0,h.isFunction)(ut)?kt=ut:kt=function(){return 0},this.comboSpacing=kt;var Nt=t.comboPadding,Wt;(0,h.isNumber)(Nt)?Wt=function(){return Nt}:(0,h.isArray)(Nt)?Wt=function(){return Math.max.apply(null,Nt)}:(0,h.isFunction)(Nt)?Wt=Nt:Wt=function(){return 0},this.comboPadding=Wt;var Ft=this.linkDistance,ee;Ft||(Ft=10),(0,h.isNumber)(Ft)?ee=function(Qe){return Ft}:ee=Ft,this.linkDistance=ee;var ve=this.edgeStrength,fe;ve||(ve=1),(0,h.isNumber)(ve)?fe=function(Qe){return ve}:fe=ve,this.edgeStrength=fe;var Te=this.nodeStrength,Be;Te||(Te=30),(0,h.isNumber)(Te)?Be=function(Qe){return Te}:Be=Te,this.nodeStrength=Be},r.prototype.initPos=function(t){var e=this,i=e.nodes;i.forEach(function(a,o){if(a.comboId){var s=t[a.comboId];a.x=s.cx+100/(o+1),a.y=s.cy+100/(o+1)}else a.x=100/(o+1),a.y=100/(o+1)})},r.prototype.getComboMap=function(){var t=this,e=t.nodeMap,i=t.nodeIdxMap,a=t.comboTrees,o=t.oriComboMap,s={};return(a||[]).forEach(function(l){var u=[];ga(l,function(f){if(f.itemType==="node"||!o[f.id])return!0;if(s[f.id]===void 0){var c={name:f.id,cx:0,cy:0,count:0,depth:t.oriComboMap[f.id].depth,children:[]};s[f.id]=c}var v=f.children;v&&v.forEach(function(Y){if(!s[Y.id]&&!e[Y.id])return!0;u.push(Y)});var g=s[f.id];if(g.cx=0,g.cy=0,u.length===0){g.empty=!0;var C=o[f.id],O=Object.keys(e).length,F=f.id+"-visual-child-"+O,G={id:F,x:C.x,y:C.y,depth:g.depth+1,itemType:"node"};t.nodes.push(G),e[F]=G,i[F]=O,g.cx=C.x,g.cy=C.y,u.push(G)}return u.forEach(function(Y){if(g.count++,Y.itemType!=="node"){var $=s[Y.id];(0,h.isNumber)($.cx)&&(g.cx+=$.cx),(0,h.isNumber)($.cy)&&(g.cy+=$.cy);return}var q=e[Y.id];!q||((0,h.isNumber)(q.x)&&(g.cx+=q.x),(0,h.isNumber)(q.y)&&(g.cy+=q.y))}),g.cx/=g.count,g.cy/=g.count,g.children=u,!0})}),s},r.prototype.applyComboCenterForce=function(t){var e=this,i=e.gravity,a=e.comboGravity||i,o=this.alpha,s=e.comboTrees,l=e.nodeIdxMap,u=e.nodeMap,f=e.comboMap;(s||[]).forEach(function(c){ga(c,function(v){if(v.itemType==="node")return!0;var g=f[v.id];if(!g)return!0;var C=f[v.id],O=(C.depth+1)*.5,F=C.cx,G=C.cy;return C.cx=0,C.cy=0,C.children.forEach(function(Y){if(Y.itemType!=="node"){var $=f[Y.id];$&&(0,h.isNumber)($.cx)&&(C.cx+=$.cx),$&&(0,h.isNumber)($.cy)&&(C.cy+=$.cy);return}var q=u[Y.id],ut=q.x-F||.005,kt=q.y-G||.005,Nt=Math.sqrt(ut*ut+kt*kt),Wt=l[q.id],Ft=a*o/Nt*O;t[Wt].x-=ut*Ft,t[Wt].y-=kt*Ft,(0,h.isNumber)(q.x)&&(C.cx+=q.x),(0,h.isNumber)(q.y)&&(C.cy+=q.y)}),C.cx/=C.count,C.cy/=C.count,!0})})},r.prototype.applyCalculate=function(t){var e=this,i=e.comboMap,a=e.nodes,o={};a.forEach(function(l,u){a.forEach(function(f,c){if(!(u<c)){var v=l.x-f.x||.005,g=l.y-f.y||.005,C=v*v+g*g,O=Math.sqrt(C);C<1&&(C=O),o[l.id+"-"+f.id]={vx:v,vy:g,vl2:C,vl:O},o[f.id+"-"+l.id]={vx:-v,vy:-g,vl2:C,vl:O}}})}),e.updateComboSizes(i),e.calRepulsive(t,o),e.calAttractive(t,o);var s=e.preventComboOverlap;s&&e.comboNonOverlapping(t,i)},r.prototype.updateComboSizes=function(t){var e=this,i=e.comboTrees,a=e.nodeMap,o=e.nodeSize,s=e.comboSpacing,l=e.comboPadding;(i||[]).forEach(function(u){var f=[];ga(u,function(c){if(c.itemType==="node")return!0;var v=t[c.id];if(!!v){var g=c.children;g&&g.forEach(function(F){!t[F.id]&&!a[F.id]||f.push(F)}),v.minX=Infinity,v.minY=Infinity,v.maxX=-Infinity,v.maxY=-Infinity,f.forEach(function(F){if(F.itemType!=="node")return!0;var G=a[F.id];if(!G)return!0;var Y=o(G),$=G.x-Y,q=G.y-Y,ut=G.x+Y,kt=G.y+Y;v.minX>$&&(v.minX=$),v.minY>q&&(v.minY=q),v.maxX<ut&&(v.maxX=ut),v.maxY<kt&&(v.maxY=kt)});var C=e.oriComboMap[c.id].size||Ue.defaultCombo.size;(0,h.isArray)(C)&&(C=C[0]);var O=Math.max(v.maxX-v.minX,v.maxY-v.minY,C);return v.r=O/2+s(v)/2+l(v),!0}})})},r.prototype.comboNonOverlapping=function(t,e){var i=this,a=i.comboTree,o=i.comboCollideStrength,s=i.nodeIdxMap,l=i.nodeMap;ga(a,function(u){if(!(!e[u.id]&&!l[u.id]&&u.id!=="comboTreeRoot")){var f=u.children;return f&&f.length>1&&f.forEach(function(c,v){if(c.itemType!=="node"){var g=e[c.id];!g||f.forEach(function(C,O){if(!(v<=O)&&C.itemType!=="node"){var F=e[C.id];if(!!F){var G=g.cx-F.cx||.005,Y=g.cy-F.cy||.005,$=G*G+Y*Y,q=g.r,ut=F.r,kt=q+ut,Nt=ut*ut,Wt=q*q;if($<kt*kt){var Ft=c.children;if(!Ft||Ft.length===0)return;var ee=C.children;if(!ee||ee.length===0)return;var ve=Math.sqrt($),fe=(kt-ve)/ve*o,Te=G*fe,Be=Y*fe,ke=Nt/(Wt+Nt),Qe=1-ke;Ft.forEach(function(tr){if(tr.itemType==="node"&&!!l[tr.id]){var rr=s[tr.id];ee.forEach(function(Ze){if(Ze.itemType==="node"&&!!l[Ze.id]){var Ke=s[Ze.id];t[rr].x+=Te*ke,t[rr].y+=Be*ke,t[Ke].x-=Te*Qe,t[Ke].y-=Be*Qe}})}})}}}})}}),!0}})},r.prototype.calRepulsive=function(t,e){var i=this,a=i.nodes,o=i.width*i.optimizeRangeFactor,s=i.nodeStrength,l=i.alpha,u=i.nodeCollideStrength,f=i.preventNodeOverlap,c=i.nodeSize,v=i.nodeSpacing,g=i.depthRepulsiveForceScale,C=i.center;a.forEach(function(O,F){if(!(!O.x||!O.y)){if(C){var G=i.gravity,Y=O.x-C[0]||.005,$=O.y-C[1]||.005,q=Math.sqrt(Y*Y+$*$);t[F].x-=Y*G*l/q,t[F].y-=$*G*l/q}a.forEach(function(ut,kt){if(F!==kt&&!(!ut.x||!ut.y)){var Nt=e[O.id+"-"+ut.id],Wt=Nt.vl2,Ft=Nt.vl;if(!(Ft>o)){var ee=e[O.id+"-"+ut.id],ve=ee.vx,fe=ee.vy,Te=Math.abs(ut.depth-O.depth)+1||1;ut.comboId!==O.comboId&&Te++;var Be=Te?Math.pow(g,Te):1,ke=s(ut)*l/Wt*Be;if(t[F].x+=ve*ke,t[F].y+=fe*ke,F<kt&&f){var Qe=c(O)+v(O),tr=c(ut)+v(ut),rr=Qe+tr;if(Wt<rr*rr){var Ze=(rr-Ft)/Ft*u,Ke=tr*tr,wr=Ke/(Qe*Qe+Ke),br=ve*Ze,Ir=fe*Ze;t[F].x+=br*wr,t[F].y+=Ir*wr,wr=1-wr,t[kt].x-=br*wr,t[kt].y-=Ir*wr}}}}})}})},r.prototype.calAttractive=function(t,e){var i=this,a=i.edges,o=i.linkDistance,s=i.alpha,l=i.edgeStrength,u=i.bias,f=i.depthAttractiveForceScale;a.forEach(function(c,v){if(!(!c.source||!c.target||c.source===c.target)){var g=i.nodeIdxMap[c.source],C=i.nodeIdxMap[c.target],O=i.nodeMap[c.source],F=i.nodeMap[c.target],G=Math.abs(O.depth-F.depth);O.comboId===F.comboId&&(G=G/2);var Y=G?Math.pow(f,G):1;if(O.comboId!==F.comboId&&Y===1?Y=f/2:O.comboId===F.comboId&&(Y=2),!(!(0,h.isNumber)(F.x)||!(0,h.isNumber)(O.x)||!(0,h.isNumber)(F.y)||!(0,h.isNumber)(O.y))){var $=e[c.target+"-"+c.source],q=$.vl,ut=$.vx,kt=$.vy,Nt=(q-o(c))/q*s*l(c)*Y,Wt=ut*Nt,Ft=kt*Nt,ee=u[v];t[C].x-=Wt*ee,t[C].y-=Ft*ee,t[g].x+=Wt*(1-ee),t[g].y+=Ft*(1-ee)}}})},r}(ya),Y4=N4,G4={circular:jN,concentric:ZN,dagre:QN,force:R3,g6force:z3,comboForce:Y4,fruchterman:H3,grid:j3,mds:A4,radial:D4,random:R4};(0,zi.default)(G4,function(n,r){Ox.registerLayout(r,{},n)});var Xs=Ox,nc=self;function z4(n){var r=n.data.type;return r===eo.RUN}function X4(n){var r=n.data.type;switch(r){case eo.RUN:{var t=n.data,e=t.nodes,i=t.edges,a=t.layoutCfg,o=a===void 0?{}:a,s=o.type,l=Xs[s];if(!l){nc.postMessage({type:eo.ERROR,message:"layout "+s+" not found"});break}var u=new l(o);u.init({nodes:e,edges:i}),u.execute(),nc.postMessage({type:eo.END,nodes:e}),u.destroy();break}default:break}}nc.onmessage=function(n){z4(n)&&X4(n)};var V4=null;function Au(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Au=function(t){return typeof t}:Au=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(n)}var H4=function(r){return setTimeout(r,16)},W4=function(r){return clearTimeout(r)},Tu={requestAnimationFrame:function(r){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||H4;return t(r)},cancelAnimationFrame:function(r){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||W4;return t(r)}},j4=function(){function n(r){this.graph=r,this.layoutCfg=r.get("layout")||{},this.layoutType=this.layoutCfg.type,this.worker=null,this.workerData={},this.initLayout()}return n.prototype.initLayout=function(){},n.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new V4,this.worker)},n.prototype.stopWorker=function(){var r=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,r.requestId&&(Tu.cancelAnimationFrame(r.requestId),r.requestId=null),r.requestId2&&(Tu.cancelAnimationFrame(r.requestId2),r.requestId2=null))},n.prototype.getLayoutType=function(){return this.layoutCfg.type},n.prototype.layout=function(r){var t=this.graph;this.data=this.setDataFromGraph();var e=this.data.nodes;if(!e)return!1;var i=t.get("width"),a=t.get("height"),o={};Object.assign(o,{width:i,height:a,center:[i/2,a/2]},this.layoutCfg),this.layoutCfg=o;var s=!!this.layoutType,l=this.layoutMethod;l&&l.destroy(),t.emit("beforelayout");var u=this.initPositions(o.center,e);if(this.stopWorker(),o.workerEnabled&&this.layoutWithWorker(this.data,r))return!0;if(this.layoutType==="force"||this.layoutType==="g6force"){var f=o.onTick,c=function(){f&&f(),t.refreshPositions()};o.tick=c;var v=o.onLayoutEnd;o.onLayoutEnd=function(){v&&v(),t.emit("afterlayout")}}else this.layoutType==="comboForce"&&(o.comboTrees=t.get("comboTrees"));var g=!1;if(this.layoutType!==void 0){try{l=new Xs[this.layoutType](o)}catch(G){return console.warn("The layout method: "+this.layoutType+" does not exist! Please specify it first."),!1}if(g=l.enableTick,g){var C=o.onTick,O=o.onLayoutEnd,c=function(){C&&C(),t.refreshPositions()};l.tick=c;var F=function(){O&&O(),t.emit("afterlayout")};l.onLayoutEnd=F}l.init(this.data),s&&l.execute(),this.layoutMethod=l}return(s||!u)&&this.layoutType!=="force"&&!g&&(t.emit("afterlayout"),this.refreshLayout()),!1},n.prototype.layoutWithWorker=function(r,t){var e=this,i=r.nodes,a=r.edges,o=this,s=o.layoutCfg,l=o.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null;var c=Z4(s,function(v){return typeof v!="function"});return u.postMessage({type:eo.RUN,nodes:i,edges:a,layoutCfg:c}),u.onmessage=function(v){e.handleWorkerMessage(v,r,t)},!0},n.prototype.handleWorkerMessage=function(r,t,e){var i=this,a=i.graph,o=i.workerData,s=i.layoutCfg,l=r.data,u=l.type,f=function(){s.onTick&&s.onTick()},c=function(){s.onLayoutEnd&&s.onLayoutEnd(),a.emit("afterlayout")};switch(u){case eo.TICK:o.currentTick=l.currentTick,o.currentTickData=l,o.requestId||(o.requestId=Tu.requestAnimationFrame(function(){ac(t,l),a.refreshPositions(),f(),l.currentTick===1&&e&&e(),l.currentTick===l.totalTicks?c():o.currentTick===l.totalTicks&&(o.requestId2=Tu.requestAnimationFrame(function(){ac(t,o.currentTickData),a.refreshPositions(),o.requestId2=null,f(),c()})),o.requestId=null}));break;case eo.END:o.currentTick==null&&(ac(t,l),this.refreshLayout(),e&&e(),a.emit("afterlayout"));break;case eo.ERROR:break;default:break}},n.prototype.refreshLayout=function(){var r=this.graph;r.get("animate")?r.positionsAnimate():r.refreshPositions()},n.prototype.updateLayoutCfg=function(r){var t=this,e=t.graph,i=t.layoutMethod;if(this.layoutType=r.type,!i){console.warn("You did not assign any layout type and the graph has no previous layout method!");return}this.data=this.setDataFromGraph(),this.stopWorker(),!(r.workerEnabled&&this.layoutWithWorker(this.data,null))&&(i.init(this.data),i.updateCfg(r),e.emit("beforelayout"),i.execute(),this.layoutType!=="force"&&!i.enableTick&&e.emit("afterlayout"),this.refreshLayout())},n.prototype.changeLayout=function(r){var t=this,e=t.graph,i=t.layoutMethod;this.layoutType=r,this.layoutCfg=e.get("layout")||{},this.layoutCfg.type=r,i&&i.destroy(),this.layout()},n.prototype.changeData=function(){var r=this.layoutMethod;r&&r.destroy(),this.layout()},n.prototype.destroyLayout=function(){var r=this,t=r.layoutMethod,e=r.graph;t&&t.destroy(),e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},n.prototype.setDataFromGraph=function(){var r=[],t=[],e=[],i=this.graph.getNodes(),a=this.graph.getEdges(),o=this.graph.getCombos();i.forEach(function(l){if(!!l.isVisible()){var u=l.getModel();r.push(u)}}),a.forEach(function(l){if(!(l.destroyed||!l.isVisible())){var u=l.getModel();u.isComboEdge||t.push(u)}}),o.forEach(function(l){if(!(l.destroyed||!l.isVisible())){var u=l.getModel();e.push(u)}});var s={nodes:r,edges:t,combos:e};return s},n.prototype.relayout=function(r){var t=this,e=t.graph,i=t.layoutMethod,a=t.layoutCfg;if(r){this.data=this.setDataFromGraph();var o=this.data.nodes;if(!o)return!1;this.initPositions(a.center,o),i.init(this.data)}this.layoutType==="force"&&(i.ticking=!1,i.forceSimulation.stop()),e.emit("beforelayout"),i.execute(r),this.layoutType!=="force"&&!i.enableTick&&e.emit("afterlayout"),this.refreshLayout()},n.prototype.layoutAnimate=function(){},n.prototype.moveToZero=function(){var r=this.graph,t=r.get("data"),e=t.nodes;if(!(e[0].x===void 0||e[0].x===null||Ja(e[0].x))){var i=[0,0];e.forEach(function(a){i[0]+=a.x,i[1]+=a.y}),i[0]/=e.length,i[1]/=e.length,e.forEach(function(a){a.x-=i[0],a.y-=i[1]})}},n.prototype.initPositions=function(r,t){var e=this.graph;if(!t)return!1;var i=!0,a=e.get("width")*.85,o=e.get("height")*.85,s=t.length,l=Math.ceil(Math.sqrt(s)*(a/o)),u=Math.ceil(s/l),f=a/(l-1),c=o/(u-1);(!isFinite(f)||!f)&&(f=0),(!isFinite(c)||!f)&&(c=0);var v=r[0]-a/2,g=r[1]-o/2;return t.forEach(function(C,O){Ja(C.x)&&(i=!1,C.x=O%l*f+v),Ja(C.y)&&(i=!1,C.y=Math.floor(O/l)*c+g)}),i},n.prototype.destroy=function(){var r=this.layoutMethod;this.graph=null,r&&r.destroy();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0},n}(),U4=j4;function ac(n,r){var t=n.nodes,e=r.nodes;t.forEach(function(i,a){i.x=e[a].x,i.y=e[a].y})}function Z4(n,r){var t={};return n&&Au(n)==="object"?(Object.keys(n).forEach(function(e){n.hasOwnProperty(e)&&r(n[e])&&(t[e]=n[e])}),t):n}var Ro=null,K4=function(){function n(r){this.graph=r,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return n.checkCache=function(r,t,e){if(!!e[t]){var i=e[t].indexOf(r);i>=0&&e[t].splice(i,1)}},n.cacheState=function(r,t,e){e[t]||(e[t]=[]),e[t].push(r)},n.prototype.updateState=function(r,t,e){var i=this,a=n.checkCache,o=n.cacheState;if(!r.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;e?(a(r,t,u),o(r,t,l)):(a(r,t,l),o(r,t,u)),Ro&&clearTimeout(Ro),Ro=setTimeout(function(){Ro=null,i.updateGraphStates()},16)}},n.prototype.updateStates=function(r,t,e){var i=this;(0,ki.default)(t)?this.updateState(r,t,e):t.forEach(function(a){i.updateState(r,a,e)})},n.prototype.updateGraphStates=function(){var r=this.graph.get("states"),t=this.cachedStates;(0,zi.default)(t.disabled,function(e,i){r[i]&&(r[i]=r[i].filter(function(a){return e.indexOf(a)<0&&!e.destroyed}))}),(0,zi.default)(t.enabled,function(e,i){if(!r[i])r[i]=e;else{var a={};r[i].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),e.forEach(function(o){if(!o.destroyed){var s=o.get("id");a[s]||(a[s]=!0,r[i].push(o))}})}}),this.graph.emit("graphstatechange",{states:r}),this.cachedStates={enabled:{},disabled:{}}},n.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Ro&&clearTimeout(Ro),Ro=null,this.destroyed=!0},n}(),$4=K4,oc=null,Q4=function(){function n(r){this.graph=r;var t=r.get("groupStyle");this.styles=(0,Nn.default)({},n.getDefaultCfg(),t),this.customGroup={},this.delegateInGroup={},this.nodePoint=[],this.destroyed=!1}return n.getDefaultCfg=function(){return{default:{lineWidth:1,stroke:"#A3B1BF",strokeOpacity:.9,fill:"#F3F9FF",fillOpacity:.8,opacity:.8,disCoefficient:.6,minDis:30,maxDis:30},hover:{stroke:"#faad14",fill:"#ffe58f",fillOpacity:.3,opacity:.3,lineWidth:3},collapse:{r:30,width:80,height:40,stroke:"#A3B1BF",lineWidth:3,fill:"#F3F9FF",offsetX:-15,offsetY:5},icon:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",operatorBtn:{collapse:{img:"https://gw.alipayobjects.com/zos/rmsportal/uZVdwjJGqDooqKLKtvGA.svg",width:16,height:16},expand:{width:16,height:16,img:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg"}},visible:!1}},n.prototype.create=function(r,t,e,i,a,o){e===void 0&&(e="circle"),i===void 0&&(i=0),a===void 0&&(a=!1),o===void 0&&(o={});var s=this.graph,l=s.get("customGroup"),u=l.get("children").map(function(Ir){return Ir.get("id")});if(u.indexOf(r)>-1){console.warn("\u5DF2\u7ECF\u5B58\u5728ID\u4E3A "+r+" \u7684\u5206\u7EC4\uFF0C\u8BF7\u91CD\u65B0\u8BBE\u7F6E\u5206\u7EC4ID\uFF01");return}var f=l.addGroup({id:r,zIndex:i}),c=this.styles.default,v=this.calculationGroupPosition(t),g=v.x,C=v.y,O=v.width,F=v.height,G=v.maxX,Y=this.getGroupPadding(r),$=s.get("groupBBoxs");$[r]={x:g,y:C,width:O,height:F,maxX:G};var q=null;if(a){var ut=s.get("groups");t.forEach(function(Ir){var ir=s.findById(Ir),Mr=ir.getModel();Mr.groupId||(Mr.groupId=r)}),ut.find(function(Ir){return Ir.id===r})||(ut.push({id:r,title:o}),s.set({groups:ut}))}var kt=s.get("groups").filter(function(Ir){return Ir.id===r});kt&&kt.length>0&&(q=kt[0].title);var Nt=0,Wt=0,Ft=null;if(e==="circle"){var ee=O>F?O/2:F/2,ve=(O+2*g)/2,fe=(F+2*C)/2,Te=ee+Y;Ft=f.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:ve,y:fe,r:Te}),draggable:!0,capture:!0,zIndex:i,groupId:r,name:"circle-group-shape"}),Nt=ve,Wt=fe-Te,this.setDeletageGroupByStyle(r,f,{width:O,height:F,x:ve,y:fe,r:Te})}else{var Be=Y*c.disCoefficient;Ft=f.addShape("rect",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:g-Be,y:C-Be,width:O+Be*2,height:F+Be*2}),draggable:!0,capture:!0,zIndex:i,groupId:r,name:"rect-group-shape"}),Nt=g-Be+15,Wt=C-Be+15,this.setDeletageGroupByStyle(r,f,{x:g-Be,y:C-Be,width:O+Be,height:F+Be,btnOffset:G-3})}if(q){var ke=q.offsetX,Qe=ke===void 0?0:ke,tr=q.offsetY,rr=tr===void 0?0:tr,Ze=q.text,Ke=Ze===void 0?q:Ze,wr=(0,B.__rest)(q,["offsetX","offsetY","text"]),br=f.addShape("text",{attrs:(0,B.__assign)({text:Ke,stroke:"#444",x:Nt+Qe,y:Wt+rr},wr),className:"group-title",name:"group-title-shape"});br.set("capture",!1)}f.set("keyShape",Ft),s.get("groupNodes")[r]=t},n.prototype.setGroupStyle=function(r,t){if(!(!r||r.get("destroyed"))){var e={},i=this.styles,a=i.hover,o=i.default;(0,ki.default)(t)?t==="default"?e=(0,Nn.default)({},o):t==="hover"&&(e=(0,Nn.default)({},a)):e=(0,Nn.default)({},o,t),Object.keys(e).forEach(function(s){r.attr(s,e[s])})}},n.prototype.calculationGroupPosition=function(r,t){if(t===void 0&&(t={x:100,y:100}),r.length===0)return{x:t.x,y:t.y,width:100,height:100};var e=this.graph,i=Infinity,a=-Infinity,o=Infinity,s=-Infinity;r.forEach(function(v){var g=(0,ki.default)(v)?e.findById(v):v,C=g.getBBox(),O=C.minX,F=C.minY,G=C.maxX,Y=C.maxY;O<i&&(i=O),F<o&&(o=F),G>a&&(a=G),Y>s&&(s=Y)});var l=Math.floor(i),u=Math.floor(o),f=Math.ceil(a)-l,c=Math.ceil(s)-u;return{x:l,y:u,width:f,height:c,maxX:Math.ceil(a)}},n.prototype.flatToTree=function(r,t,e){t===void 0&&(t="id"),e===void 0&&(e="parentId");var i="children",a=[],o=[];return r.forEach(function(s){a[s[t]]=s}),r.forEach(function(s){var l=a[s[e]];l?(l[i]=l[i]||[],l[i].push(s)):o.push(s)}),o},n.prototype.getGroupPadding=function(r){var t=this.graph,e=this.styles.default,i=t.get("groups"),a=i.filter(function(f){return f.parentId===r}),o=1;a.length>0&&(oc||(oc=this.flatToTree(i)),Wn(oc[0],function(f){if(f.parentId===r&&f.children)return o+=f.children.length,!0}));var s=i.filter(function(f){return f.id===r&&!f.parentId});s.length>0&&(o+=1);var l=i.filter(function(f){return f.parentId===r}).length>0,u=l?e.maxDis+(o>1?o/2:1)*30:e.minDis;return u},n.prototype.setDeletageGroupByStyle=function(r,t,e){var i=e.width,a=e.height,o=e.x,s=e.y,l=e.r,u=e.btnOffset,f=this.customGroup[r];if(!f)this.customGroup[r]={nodeGroup:t,groupStyle:{width:i,height:a,x:o,y:s,r:l,btnOffset:u}};else{var c=f.groupStyle,v=(0,Nn.default)({},c,e);this.customGroup[r]={nodeGroup:t,groupStyle:v}}},n.prototype.getDeletageGroupById=function(r){return this.customGroup[r]},n.prototype.collapseExpandGroup=function(r){var t=this.getDeletageGroupById(r),e=t.nodeGroup,i=e.get("hasHidden");i?(e.set("hasHidden",!1),this.expandGroup(r)):(e.set("hasHidden",!0),this.collapseGroup(r))},n.prototype.setGroupTmpNode=function(r,t){var e=this.graph,i=e.get("groupNodes"),a=e.get("groups");i[r].indexOf(t)<0&&i[r].push(t);var o=a.filter(function(l){return l.id===r}),s=null;o.length>0&&(s=o[0].parentId),s&&this.setGroupTmpNode(s,t)},n.prototype.collapseGroup=function(r){var t=this,e=this.getDeletageGroupById(r),i=e.nodeGroup,a=this.styles.collapse,o=this.graph,s=o.get("groupType"),l=o.get("groupNodes")[r],u=i.get("keyShape"),f=a.r,c=a.width,v=a.height,g=a.offsetX,C=a.offsetY,O=(0,B.__rest)(a,["r","width","height","offsetX","offsetY"]);Object.keys(O).forEach(function(Nt){u.attr(Nt,O[Nt])});var F={groupId:r,id:r+"-custom-node",x:u.attr("x"),y:u.attr("y"),style:{r:f},type:"circle"},G=i.find(function(Nt){return Nt.get("className")==="group-title"});s==="circle"?(u.animate({r:f},{duration:500,easing:"easeCubic"}),G&&G.attr({x:u.attr("x")+g,y:u.attr("y")+C})):s==="rect"&&(u.animate({width:c,height:v},{duration:500,easing:"easeCubic"}),G&&G.attr({x:u.attr("x")+10,y:u.attr("y")+v/2+5}),F={groupId:r,id:r+"-custom-node",x:u.attr("x")+c/2,y:u.attr("y")+v/2,size:[c,v],type:"rect"});var Y=o.getEdges(),$=Y.filter(function(Nt){var Wt=Nt.getModel();return!l.includes(Wt.source)&&l.includes(Wt.target)}),q=Y.filter(function(Nt){var Wt=Nt.getModel();return l.includes(Wt.source)&&!l.includes(Wt.target)}),ut=Y.filter(function(Nt){var Wt=Nt.getModel();return l.includes(Wt.source)&&l.includes(Wt.target)});if(l.forEach(function(Nt){var Wt=o.findById(Nt),Ft=Wt.getModel(),ee=Ft.groupId;if(ee&&ee!==r){var ve=t.getDeletageGroupById(ee),fe=ve.nodeGroup;fe.hide()}Wt.hide()}),ut.forEach(function(Nt){var Wt=Nt.getSource(),Ft=Nt.getTarget();Wt.isVisible()&&Ft.isVisible()?Nt.show():Nt.hide()}),$.length>0||q.length>0){var kt=o.add("node",F);kt.set("capture",!1),kt.hide(),this.delegateInGroup[r]={delegateNode:kt},this.setGroupTmpNode(r,r+"-custom-node"),this.updateEdgeInGroupLinks(r,$,q)}},n.prototype.updateEdgeInGroupLinks=function(r,t,e){var i=this.graph,a={};t.map(function(s){var l=s.getModel(),u=s.get("id"),f=l.target;return a[u]=f,i.updateItem(s,{target:r+"-custom-node"}),!0});var o={};e.map(function(s){var l=s.getModel(),u=s.get("id"),f=l.source;return o[u]=f,i.updateItem(s,{source:r+"-custom-node"}),!0}),this.delegateInGroup[r]=(0,Nn.default)({sourceOutTargetInEdges:t,sourceInTargetOutEdges:e,edgesOuts:a,edgesIn:o},this.delegateInGroup[r])},n.prototype.expandGroup=function(r){var t=this,e=this.graph,i=e.get("groupType"),a=e.get("groupNodes")[r],o=a.filter(function(tr){return tr.indexOf("custom-node")===-1}),s=this.calculationGroupPosition(o),l=s.width,u=s.height,f=this.getDeletageGroupById(r).nodeGroup,c=f.get("keyShape"),v=this.styles,g=v.default,C=v.collapse;Object.keys(g).forEach(function(tr){c.attr(tr,g[tr])});var O=f.find(function(tr){return tr.get("className")==="group-title"}),F=this.getGroupPadding(r);if(i==="circle"){var G=l>u?l/2:u/2;c.animate({r:G+F},{duration:500,easing:"easeCubic"})}else if(i==="rect"){var Y=C.width,$=C.height;c.animate({width:Y+l+F*g.disCoefficient*2,height:$+u+F*g.disCoefficient*2},{duration:500,easing:"easeCubic"})}if(O){var q=null,ut=e.get("groups").filter(function(tr){return tr.id===r});ut&&ut.length>0&&(q=ut[0].title);var kt=q.offsetX,Nt=kt===void 0?0:kt,Wt=q.offsetY,Ft=Wt===void 0?0:Wt;i==="circle"?O.animate({x:c.attr("x")+Nt,y:c.attr("y")-c.attr("r")+Ft},{duration:600,easing:"easeCubic"}):i==="rect"&&O.animate({x:c.attr("x")+(15+Nt),y:c.attr("y")+(15+Ft)},{duration:600,easing:"easeCubic"})}setTimeout(function(){a.forEach(function(Ze){var Ke=e.findById(Ze),wr=Ke.getModel(),br=wr.groupId;if(br&&br!==r){var Ir=t.getDeletageGroupById(br),ir=Ir.nodeGroup;ir.show();var Mr=ir.get("hasHidden");Mr||Ke.show()}else Ke.show()});var tr=e.getEdges(),rr=tr.filter(function(Ze){var Ke=Ze.getModel();return a.includes(Ke.source)||a.includes(Ke.target)});rr.forEach(function(Ze){var Ke=Ze.getSource(),wr=Ze.getTarget();Ke.isVisible()&&wr.isVisible()&&Ze.show()})},300);var ee=this.delegateInGroup[r];if(ee){var ve=ee.sourceOutTargetInEdges,fe=ee.sourceInTargetOutEdges,Te=ee.edgesOuts,Be=ee.edgesIn,ke=ee.delegateNode;ve.map(function(tr){var rr=tr.get("id"),Ze=Te[rr];return e.updateItem(tr,{target:Ze}),!0}),fe.map(function(tr){var rr=tr.get("id"),Ze=Be[rr];return e.updateItem(tr,{source:Ze}),!0});var Qe=ke.getModel();this.deleteTmpNode(r,Qe.id),e.remove(ke),delete this.delegateInGroup[r]}},n.prototype.deleteTmpNode=function(r,t){var e=this.graph,i=e.get("groups"),a=e.get("groupNodes")[r],o=a.indexOf(t);a.splice(o,1);var s=i.filter(function(u){return u.id===r}),l=null;s.length>0&&(l=s[0].parentId),l&&this.deleteTmpNode(l,t)},n.prototype.remove=function(r){var t=this.graph,e=this.getDeletageGroupById(r);if(!!e){var i=e.nodeGroup,a=t.get("groupNodes"),o=a[r];o.forEach(function(g){var C=t.findById(g),O=C.getModel(),F=O.groupId;!F||r===F&&(delete O.groupId,t.updateItem(C,O))}),i.destroy(),delete this.customGroup[r];var s=t.get("groups");if(s.length>0){var l=s.filter(function(g){return g.id!==r});t.set("groups",l)}for(var u=null,f=null,c=0;c<s.length;c++){var v=s[c];if(r===v.id){u=v.parentId,f=v;break}}f&&delete f.parentId,delete a[r],u&&(a[u]=a[u].filter(function(g){return!o.includes(g)}))}},n.prototype.updateGroup=function(r,t,e){var i=this.graph,a=i.get("groupType");this.updateItemInGroup(r,t,e);for(var o=i.save().groups,s=null,l=null,u=0;u<o.length;u++){var f=o[u];if(r===f.id){s=f.parentId,l=f;break}}if(s){var c=this.getDeletageGroupById(s).nodeGroup,v=c.get("keyShape");this.setGroupStyle(v,"default");var g=v.getBBox(),C=g.minX,O=g.minY,F=g.maxX,G=g.maxY,Y=this.getDeletageGroupById(r).nodeGroup,$=Y.get("keyShape"),q=$.getBBox(),ut=q.x,kt=q.y;if(!(ut<F&&ut>C&&kt<G&&kt>O)){delete l.parentId;var Nt=i.get("groupNodes"),Wt=Nt[r],Ft=Nt[s];Nt[s]=Ft.filter(function(Lr){return Wt.indexOf(Lr)===-1});var ee=this.calculationGroupPosition(Nt[s]),ve=ee.x,fe=ee.y,Te=ee.width,Be=ee.height,ke=this.getGroupPadding(s),Qe=c.find(function(Lr){return Lr.get("className")==="group-title"}),tr=0,rr=0;if(a==="circle"){var Ze=Te>Be?Te/2:Be/2,Ke=ve,wr=fe;v.attr({r:Ze+ke,x:Ke,y:wr}),tr=Ke,rr=wr-v.attr("r")}else if(a==="rect"){var br=this.styles.default,Ir=ke*br.disCoefficient;v.attr({x:ve-Ir,y:fe-Ir}),tr=ve-Ir+15,rr=fe-Ir+15}if(Qe){var ir=l.title,Mr=0,zr=0;ir&&(Mr=ir.offsetX,zr=ir.offsetY),Qe.attr({x:tr+Mr,y:rr+zr})}}}},n.prototype.updateItemInGroup=function(r,t,e){var i=this,a=this.graph,o=a.get("groupType"),s=a.get("groupNodes"),l=s[r],u=this.getDeletageGroupById(r).nodeGroup,f=u.getBBox(),c=[];l.forEach(function(v,g){var C=a.findById(v),O=C.getModel(),F=O.groupId;F&&!c.includes(F)&&c.push(F),i.nodePoint[g]||(i.nodePoint[g]={x:O.x,y:O.y});var G=t.x-f.x+i.nodePoint[g].x,Y=t.y-f.y+i.nodePoint[g].y;i.nodePoint[g]={x:G,y:Y},a.updateItem(C,{x:G,y:Y})}),c.includes(r)||c.push(r),c.forEach(function(v){var g=i.getDeletageGroupById(v).nodeGroup,C=g.get("keyShape"),O=s[v].filter(function(Be){return Be.indexOf("custom-node")===-1}),F=i.calculationGroupPosition(O,t),G=F.x,Y=F.y,$=F.width,q=F.height,ut=0,kt=0;if(o==="circle"){var Nt=($+2*G)/2,Wt=(q+2*Y)/2;C.attr({x:Nt,y:Wt}),ut=Nt,kt=Wt-C.attr("r")}else if(o==="rect"){var Ft=g.get("hasHidden"),ee=i.getGroupPadding(v),ve={},fe=i.styles.default,Te=ee*fe.disCoefficient;ut=G-Te+15,kt=Y-Te+15,Ft?(ve={x:G-Te,y:Y-Te},kt=kt+10):ve={x:G-Te,y:Y-Te,width:$+Te*2,height:q+Te*2},C.attr(ve)}i.updateGroupTitle(g,v,ut,kt)})},n.prototype.updateGroupTitle=function(r,t,e,i){var a=this.graph,o=r.find(function(c){return c.get("className")==="group-title"});if(o){var s=null,l=a.get("groups").filter(function(c){return c.id===t});l&&l.length>0&&(s=l[0].title);var u=0,f=0;s&&(u=s.offsetX||0,f=s.offsetY||0),o.attr({x:e+u,y:i+f})}},n.prototype.dynamicChangeGroupSize=function(r,t,e){var i=r.item,a=i.getModel(),o=a.groupId,s=this.graph,l=s.get("groupType"),u=s.get("groupNodes"),f=u[o];if(f.length===0){delete u[o];var c=s.get("groups");s.set("groups",c.filter(function(Ft){return Ft.id!==o})),t.remove()}else{var v=this.calculationGroupPosition(f),g=v.x,C=v.y,O=v.width,F=v.height,G=this.getGroupPadding(o),Y=0,$=0;if(l==="circle"){var q=O>F?O/2:F/2,ut=(O+2*g)/2,kt=(F+2*C)/2;e.attr({r:q+G,x:ut,y:kt}),Y=ut,$=kt-e.attr("r")}else if(l==="rect"){var Nt=this.styles.default,Wt=G*Nt.disCoefficient;e.attr({x:g-Wt,y:C-Wt,width:O+Wt*2,height:F+Wt*2}),Y=g-Wt+15,$=C-Wt+15}this.updateGroupTitle(t,o,Y,$)}this.setGroupStyle(e,"default")},n.prototype.resetNodePoint=function(){this.nodePoint.length=0},n.prototype.destroy=function(){this.graph=null,this.styles={},this.customGroup={},this.delegateInGroup={},this.resetNodePoint(),this.destroyed=!0},n}(),J4=Q4,q4=function(r){var t={};return r.getNodes().forEach(function(e){t[e.getID()]={degree:0,inDegree:0,outDegree:0}}),r.getEdges().forEach(function(e){t[e.getSource().getID()].degree++,t[e.getSource().getID()].outDegree++,t[e.getTarget().getID()].degree++,t[e.getTarget().getID()].inDegree++}),t},a1=q4,t6=function(){function n(r){this.compare=r||n.defaultCompareFunction}return n.defaultCompareFunction=function(r,t){return r===t?0:r<t?-1:1},n.prototype.equal=function(r,t){return this.compare(r,t)===0},n.prototype.lessThan=function(r,t){return this.compare(r,t)<0},n.prototype.greaterThan=function(r,t){return this.compare(r,t)>0},n.prototype.lessThanOrEqual=function(r,t){return this.lessThan(r,t)||this.equal(r,t)},n.prototype.greaterThanOrEqual=function(r,t){return this.greaterThan(r,t)||this.equal(r,t)},n.prototype.reverse=function(){var r=this.compare;this.compare=function(t,e){return r(e,t)}},n}(),e6=t6,o1=function(){function n(r,t){t===void 0&&(t=null),this.value=r,this.next=t}return n.prototype.toString=function(r){return r?r(this.value):""+this.value},n}(),r6=function(){function n(r){r===void 0&&(r=null),this.head=null,this.tail=null,this.compare=new e6(r)}return n.prototype.prepend=function(r){var t=new o1(r,this.head);return this.head=t,this.tail||(this.tail=t),this},n.prototype.append=function(r){var t=new o1(r);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},n.prototype.delete=function(r){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,r);)t=this.head,this.head=this.head.next;var e=this.head;if(e!==null)for(;e.next;)this.compare.equal(e.next.value,r)?(t=e.next,e.next=e.next.next):e=e.next;return this.compare.equal(this.tail.value,r)&&(this.tail=e),t},n.prototype.find=function(r){var t=r.value,e=t===void 0?void 0:t,i=r.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||e!==void 0&&this.compare.equal(o.value,e))return o;o=o.next}return null},n.prototype.deleteTail=function(){var r=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,r;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,r},n.prototype.deleteHead=function(){if(!this.head)return null;var r=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),r},n.prototype.fromArray=function(r){var t=this;return r.forEach(function(e){return t.append(e)}),this},n.prototype.toArray=function(){for(var r=[],t=this.head;t;)r.push(t),t=t.next;return r},n.prototype.reverse=function(){for(var r=this.head,t=null,e=null;r;)e=r.next,r.next=t,t=r,r=e;this.tail=this.head,this.head=t},n.prototype.toString=function(r){return r===void 0&&(r=void 0),this.toArray().map(function(t){return t.toString(r)}).toString()},n}(),s1=r6,i6=function(){function n(r){r===void 0&&(r=10),this.linkedList=new s1,this.maxStep=r}return Object.defineProperty(n.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},n.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},n.prototype.push=function(r){this.linkedList.prepend(r),this.length>this.maxStep&&this.linkedList.deleteTail()},n.prototype.pop=function(){var r=this.linkedList.deleteHead();return r?r.value:null},n.prototype.toArray=function(){return this.linkedList.toArray().map(function(r){return r.value})},n.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},n}(),l1=i6,n6=function(r,t){var e=r.getNodes(),i=r.getEdges(),a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,l){o[s.getID()]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.getModel(),u=l.source,f=l.target,c=o[u],v=o[f];a[c][v]=1,t||(a[v][c]=1)}),a},_u=n6,a6=function(r,t){var e=r.get("adjMatrix");e||(e=_u(r,t));for(var i=[],a=e.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:e[o][s]===0||!e[o][s]?i[o][s]=Infinity:i[o][s]=e[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},u1=a6,h1=function(r,t,e){return(r.y-e.y)*(t.x-e.x)-(r.x-e.x)*(t.y-e.y)},f1=function(r){var t=r.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});t.sort(function(s,l){return s.x===l.x?s.y-l.y:s.x-l.x});for(var e=[],i=0;i<t.length;i++){for(;e.length>=2&&h1(e[e.length-2],e[e.length-1],t[i])<=0;)e.pop();e.push(t[i])}for(var a=[],i=t.length-1;i>=0;i--){for(;a.length>=2&&h1(a[a.length-2],a[a.length-1],t[i])<=0;)a.pop();a.push(t[i])}a.pop(),e.pop();var o=e.concat(a);return o},o6={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function s6(n,r,t){var e=!1,i=function(l,u){return r.cells[l+u*r.width]},a=function(l,u){var f=0;return i(l-1,u-1)>=t&&(f+=1),i(l,u-1)>t&&(f+=2),i(l-1,u)>t&&(f+=4),i(l,u)>t&&(f+=8),f},o=function(l,u){for(var f=l,c=u,v,g,C=0;C<r.width*r.height;C++){if(v=f,g=c,n.findIndex(function(F){return F.x===f&&F.y===c})>-1){if(!(n[0].x!==f||n[0].y!==c))return!0}else n.push({x:f,y:c});var O=a(f,c);switch(O){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:f++;break;case 12:case 14:case 4:f--;break;case 6:v===0&&(g===-1?f-=1:f+=1);break;case 1:case 13:case 5:c--;break;case 9:v===1&&(g===0?c-=1:c+=1);break;case 10:case 8:case 11:c++;break;default:return console.warn("Marching squares invalid state: "+O),!0}}};this.march=function(){for(var s=0;s<r.width&&!e;s+=1)for(var l=0;l<r.height&&!e;l+=1)i(s,l)>t&&a(s,l)!==15&&(e=o(s,l));return e}}var l6=function(r,t,e){var i=Math.ceil(r/e),a=Math.ceil(t/e),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},u6=function(r,t,e){var i=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:r.getModel().x,y:r.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=nu(s,l),f=new Bo(s.x,s.y,l.x,l.y),c=e.reduce(function(v,g){return Gf(g,f)>0?v+1:v},0);u*Math.pow(c+1,2)<a&&(i=o,a=u*Math.pow(c+1,2))}),i},c1=function(r,t){var e=Number.POSITIVE_INFINITY,i=null;return r.forEach(function(a){var o=Gf(a,t);o>=0&&o<e&&(i=a,e=o)}),i},h6=function(r,t,e,i){var a=[],o=[];o.push(r);for(var s=!0,l=0,u=function(g,C){var O=!1;return C.forEach(function(F){O||(zf(g,{x:F.x1,y:F.y1})||zf(g,{x:F.x2,y:F.y2}))&&(O=!0)}),O},f=function(g,C){for(var O=0,F=C;O<F.length;O++){var G=F[O],Y=G.getBBox(),$=[[Y.x,Y.y],[Y.x+Y.width,Y.y],[Y.x,Y.y+Y.height],[Y.x+Y.width,Y.y+Y.height]];if(Bs($,g.x,g.y))return!0}return!1};s&&l<e;){s=!1;for(var c=function(){var g=o.pop(),C=c1(t,g);if(C){var O=$m(C,g),F=O[0],G=O[1];if(G===2){var Y=function(q){for(var ut=i,kt=v1(C,ut,F,q),Nt=u(kt,o)||u(kt,a),Wt=f(kt,t);!Nt&&Wt&&ut>=1;)ut/=1.5,kt=v1(C,ut,F,q),Nt=u(kt,o)||u(kt,a),Wt=f(kt,t);kt&&!Nt&&(!q||!Wt)&&(o.push(new Bo(g.x1,g.y1,kt.x,kt.y)),o.push(new Bo(kt.x,kt.y,g.x2,g.y2)),s=!0)};Y(!0),s||Y(!1)}}s||a.push(g),l+=1};!s&&o.length;)c()}for(;o.length;)a.push(o.pop());return a};function f6(n,r,t,e,i){var a=u6(n,t,r);if(a===null)return[];var o=function(c){for(var v=[];c.length>0;){var g=c.pop();if(c.length===0){v.push(g);break}var C=c.pop(),O=new Bo(g.x1,g.y1,C.x2,C.y2),F=c1(r,O);F?(v.push(g),c.push(C)):c.push(O)}return v},s=new Bo(n.getModel().x,n.getModel().y,a.getModel().x,a.getModel().y),l=h6(s,r,e,i),u=o(l);return u}var c6=function(r,t,e){var i=Object.assign(o6,e),a=Qm(r.map(function(Y){return{x:Y.getModel().x,y:Y.getModel().y}}));r=r.sort(function(Y,$){return nu({x:Y.getModel().x,y:Y.getModel().y},a)-nu({x:$.getModel().x,y:$.getModel().y},a)});var o=[],s=[];r.forEach(function(Y){var $=f6(Y,t,o,i.maxRoutingIterations,i.morphBuffer);$.forEach(function(q){s.push(q)}),o.push(Y)});for(var l=v6(r,s,i.nodeR0),u=l6(l.width,l.height,i.pixelGroupSize),f=[],c=[],v=0;v<i.maxMarchingIterations;v++)if(d6(r,t,s,l,u,i),f=[],c=[],!!new s6(f,u,i.threshold).march()){var g=f.map(function(Y){return{x:Math.round(Y.x*i.pixelGroupSize+l.minX),y:Math.round(Y.y*i.pixelGroupSize+l.minY)}});if(g){var C=g.length;if(i.skip>1)for(C=Math.floor(g.length/i.skip);C<3&&i.skip>1;)i.skip-=1,C=Math.floor(g.length/i.skip);for(var O=0,F=0;F<C;F+=1,O+=i.skip)c.push({x:g[O].x,y:g[O].y})}var G=function(){for(var $=0,q=r;$<q.length;$++){var ut=q[$],kt=c.map(function(Nt){return[Nt.x,Nt.y]});if(!Bs(kt,ut.getBBox().centerX,ut.getBBox().centerY))return!1}return!0};if(c&&G())return c;if(i.threshold*=.9,v<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&t.length>0)i.nonMemberInfluenceFactor*=.8;else break}return c};function v6(n,r,t){var e={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];n.forEach(function(l){i.push(l.getBBox())}),r.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];e.minX=(s.minX<e.minX?s.minX:e.minX)-t,e.minY=(s.minY<e.minY?s.minY:e.minY)-t,e.maxX=(s.maxX>e.maxX?s.maxX:e.maxX)+t,e.maxY=(s.maxY>e.maxY?s.maxY:e.maxY)+t}return e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.x=e.minX,e.y=e.minY,e}function d6(n,r,t,e,i,a){function o(g,C){var O=Math.floor((g-C)/a.pixelGroupSize);return O<0?0:O}function s(g,C){return g*a.pixelGroupSize+C}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),f=function(C,O){var F=Math.min(o(C.minX,O+e.minX),i.width),G=Math.min(o(C.minY,O+e.minY),i.height),Y=Math.min(o(C.maxX,-O+e.minX),i.width),$=Math.min(o(C.maxY,-O+e.minY),i.height);return[F,G,Y,$]},c=function(C,O){for(var F=C.getBBox(),G=f(F,a.nodeR1),Y=G[0],$=G[1],q=G[2],ut=G[3],kt=$;kt<ut;kt+=1)for(var Nt=Y;Nt<q;Nt+=1)if(!(O<0&&i[Nt+kt*i.width]<=0)){var Wt=s(Nt,e.minX),Ft=s(kt,e.minY),ee=qm({x:Wt,y:Ft},{x:F.minX,y:F.minY,width:F.width,height:F.height});if(ee<Math.pow(a.nodeR1,2)){var ve=Math.sqrt(ee)-a.nodeR1;i.cells[Nt+kt*i.width]+=O*ve*ve}}},v=function(C,O){for(var F=C.getBBox(),G=f(F,a.edgeR1),Y=G[0],$=G[1],q=G[2],ut=G[3],kt=$;kt<ut;kt+=1)for(var Nt=Y;Nt<q;Nt+=1)if(!(O<0&&i.cells[Nt+kt*i.width]<=0)){var Wt=s(Nt,e.minX),Ft=s(kt,e.minY),ee=Jm({x:Wt,y:Ft},C);if(ee<Math.pow(a.edgeR1,2)){var ve=Math.sqrt(ee)-a.edgeR1;i.cells[Nt+kt*i.width]+=O*ve*ve}}};a.nodeInfluenceFactor&&n.forEach(function(g){c(g,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&t.forEach(function(g){v(g,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&r.forEach(function(g){c(g,a.negativeNodeInfluenceFactor/l)})}function v1(n,r,t,e){var i=n.getBBox(),a=t[0],o=t[1],s=t[2],l=t[3],u={topLeft:{x:i.minX-r,y:i.minY-r},topRight:{x:i.maxX+r,y:i.minY-r},bottomLeft:{x:i.minX-r,y:i.maxY+r},bottomRight:{x:i.maxX+r,y:i.maxY+r}},f=i.height*i.width;function c(C,O){return i.width*((C.y-i.minY+(O.y-i.minY))*.5)}if(o){if(a)return e?u.topLeft:u.bottomRight;if(s)return e?u.bottomLeft:u.topRight;var v=c(o,l);return v<f*.5?o.y>l.y?e?u.topLeft:u.bottomRight:e?u.topRight:u.bottomLeft:o.y<l.y?e?u.bottomLeft:u.topRight:e?u.bottomRight:u.topLeft}if(l){if(a)return e?u.topRight:u.bottomLeft;if(s)return e?u.bottomRight:u.topLeft}var g=c(a,s);return g<f*.5?a.x>s.x?e?u.topLeft:u.bottomRight:e?u.bottomLeft:u.topRight:a.x<s.x?e?u.topRight:u.bottomLeft:e?u.bottomRight:u.topLeft}var p6=function(){function n(r,t){this.cfg=(0,h.deepMix)(this.getDefaultCfg(),t),this.graph=r,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(e){return(0,h.isString)(e)?r.findById(e):e}),this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,h.isString)(e)?r.findById(e):e}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return n.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},n.prototype.setPadding=function(){var r=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+r:10+r,this.cfg.bubbleCfg={nodeR0:this.padding-r,nodeR1:this.padding-r,morphBuffer:this.padding-r}},n.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},n.prototype.calcPath=function(r,t){var e,i,a;switch(this.type){case"round-convex":e=f1(r),a=ax(e.map(function(o){return[o.x,o.y]}),this.padding),i=(0,qs.parsePathString)(a);break;case"smooth-convex":e=f1(r),a=ox(e.map(function(o){return[o.x,o.y]}),this.padding),i=e.length>=2&&Xf(a);break;case"bubble":e=c6(r,t,this.cfg.bubbleCfg),i=e.length>=2&&Xf(e);break;default:}return i},n.prototype.render=function(){this.group.addShape("path",{attrs:(0,B.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},n.prototype.addMember=function(r){if(!!r){(0,h.isString)(r)&&(r=this.graph.findById(r)),this.members.push(r);var t=this.nonMembers.indexOf(r);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.addNonMember=function(r){if(!!r){(0,h.isString)(r)&&(r=this.graph.findById(r)),this.nonMembers.push(r);var t=this.members.indexOf(r);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.removeMember=function(r){if(!!r){(0,h.isString)(r)&&(r=this.graph.findById(r));var t=this.members.indexOf(r);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},n.prototype.removeNonMember=function(r){if(!!r){(0,h.isString)(r)&&(r=this.graph.findById(r));var t=this.nonMembers.indexOf(r);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},n.prototype.updateData=function(r,t){var e=this;this.group.findById(this.id).remove(),r&&(this.members=r.map(function(i){return(0,h.isString)(i)?e.graph.findById(i):i})),t&&(this.nonMembers=t.map(function(i){return(0,h.isString)(i)?e.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.updateStyle=function(r){var t=this.group.findById(this.id);t.attr((0,B.__assign)({},r))},n.prototype.updateCfg=function(r){var t=this;this.cfg=(0,h.deepMix)(this.cfg,r),this.id=this.cfg.id,this.group=this.cfg.group,r.members&&(this.members=this.cfg.members.map(function(e){return(0,h.isString)(e)?t.graph.findById(e):e})),r.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,h.isString)(e)?t.graph.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.contain=function(r){var t=this,e;(0,h.isString)(r)?e=this.graph.findById(r):e=r;var i,a=e.getKeyShape();if(e.get("type")==="path")i=ou(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=t.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),Nf(i,ou(this.path))},n.prototype.destroy=function(){this.group.remove(),this.cfg=null},n}(),g6=p6,y6="node",m6="svg",x6=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this)||this;return e.cfg=(0,h.deepMix)(e.getDefaultCfg(),t),e.init(),e.animating=!1,e.destroyed=!1,e.cfg.enabledStack&&(e.undoStack=new l1(e.cfg.maxStep),e.redoStack=new l1(e.cfg.maxStep)),e}return r.prototype.init=function(){this.initCanvas();var t=new xN(this),e=new yN(this),i=new pN(this),a=new zN(this),o=new U4(this),s=new $4(this),l=new J4(this);this.set({eventController:t,viewController:e,modeController:i,itemController:a,layoutController:o,stateController:s,customGroupControll:l}),this.initPlugin()},r.prototype.initCanvas=function(){var t=this.get("container");if((0,h.isString)(t)&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e=this.get("width"),i=this.get("height"),a=this.get("renderer"),o;if(a===m6)o=new Ds.Z({container:t,width:e,height:i});else{var s={container:t,width:e,height:i},l=this.get("pixelRatio");l&&(s.pixelRatio=l),o=new Do.Z(s)}this.set("canvas",o),this.initGroups()},r.prototype.initPlugin=function(){var t=this;(0,h.each)(t.get("plugins"),function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)})},r.prototype.initGroups=function(){var t=this.get("canvas"),e=this.get("canvas").get("el"),i=e.id,a=t.addGroup({id:i+"-root",className:Ue.rootContainerClassName});if(this.get("groupByTypes")){var o=a.addGroup({id:i+"-edge",className:Ue.edgeContainerClassName}),s=a.addGroup({id:i+"-node",className:Ue.nodeContainerClassName}),l=a.addGroup({id:i+"-combo",className:Ue.comboContainerClassName}),u=a.addGroup({id:i+"-group",className:Ue.customGroupContainerClassName});u.toBack(),l.toBack(),this.set({nodeGroup:s,edgeGroup:o,customGroup:u,comboGroup:l})}var f=a.addGroup({id:i+"-delegate",className:Ue.delegateContainerClassName});this.set({delegateGroup:f}),this.set("group",a)},r.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,groupType:"circle",groupBBoxs:{},groupNodes:{},groups:[],groupStyle:{},enabledStack:!1,maxStep:10,tooltips:[]}},r.prototype.set=function(t,e){return(0,h.isPlainObject)(t)?this.cfg=(0,B.__assign)((0,B.__assign)({},this.cfg),t):this.cfg[t]=e,this},r.prototype.get=function(t){return this.cfg[t]},r.prototype.getGroup=function(){return this.get("group")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.getMinZoom=function(){return this.get("minZoom")},r.prototype.setMinZoom=function(t){return this.set("minZoom",t)},r.prototype.getMaxZoom=function(){return this.get("maxZoom")},r.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},r.prototype.getWidth=function(){return this.get("width")},r.prototype.getHeight=function(){return this.get("height")},r.prototype.clearItemStates=function(t,e){(0,h.isString)(t)&&(t=this.findById(t));var i=this.get("itemController");e||(e=t.get("states")),i.clearItemStates(t,e);var a=this.get("stateController");a.updateStates(t,e,!1)},r.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},r.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},r.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},r.prototype.findById=function(t){return this.get("itemMap")[t]},r.prototype.find=function(t,e){var i,a=this.get(t+"s");return(0,h.each)(a,function(o,s){if(e(o,s))return i=o,i}),i},r.prototype.findAll=function(t,e){var i=[];return(0,h.each)(this.get(t+"s"),function(a,o){e(a,o)&&i.push(a)}),i},r.prototype.findAllByState=function(t,e){return this.findAll(t,function(i){return i.hasState(e)})},r.prototype.translate=function(t,e){var i=this.get("group"),a=(0,h.clone)(i.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),Sa.wO.translate(a,a,[t,e]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:i.getMatrix()}),this.autoPaint()},r.prototype.moveTo=function(t,e){var i=this.get("group");Zm(i,{x:t,y:e}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},r.prototype.fitView=function(t){t&&this.set("fitViewPadding",t);var e=this.get("viewController");e.fitView(),this.autoPaint()},r.prototype.fitCenter=function(){var t=this.get("viewController");t.fitCenter(),this.autoPaint()},r.prototype.addBehaviors=function(t,e){var i=this.get("modeController");return i.manipulateBehaviors(t,e,!0),this},r.prototype.removeBehaviors=function(t,e){var i=this.get("modeController");return i.manipulateBehaviors(t,e,!1),this},r.prototype.zoom=function(t,e){var i=this.get("group"),a=(0,h.clone)(i.getMatrix()),o=this.get("minZoom"),s=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),e?(Sa.wO.translate(a,a,[-e.x,-e.y]),Sa.wO.scale(a,a,[t,t]),Sa.wO.translate(a,a,[e.x,e.y])):Sa.wO.scale(a,a,[t,t]),!(o&&a[0]<o||s&&a[0]>s)&&(i.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},r.prototype.zoomTo=function(t,e){var i=t/this.getZoom();this.zoom(i,e)},r.prototype.focusItem=function(t,e,i){var a=this.get("viewController"),o=!1;e?o=!0:e===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},r.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},r.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},r.prototype.getPointByClient=function(t,e){var i=this.get("viewController");return i.getPointByClient(t,e)},r.prototype.getClientByPoint=function(t,e){var i=this.get("viewController");return i.getClientByPoint(t,e)},r.prototype.getPointByCanvas=function(t,e){var i=this.get("viewController");return i.getPointByCanvas(t,e)},r.prototype.getCanvasByPoint=function(t,e){var i=this.get("viewController");return i.getCanvasByPoint(t,e)},r.prototype.showItem=function(t,e){e===void 0&&(e=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:l,after:u})}},r.prototype.hideItem=function(t,e){e===void 0&&(e=!0);var i=this.get("itemController"),a=i.changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:l,after:u})}},r.prototype.refreshItem=function(t){var e=this.get("itemController");e.refreshItem(t)},r.prototype.setAutoPaint=function(t){var e=this;e.set("autoPaint",t);var i=e.get("canvas");i.set("autoDraw",t)},r.prototype.remove=function(t,e){e===void 0&&(e=!0),this.removeItem(t,e)},r.prototype.removeItem=function(t,e){e===void 0&&(e=!0);var i=t;if((0,h.isString)(t)&&(i=this.findById(t)),!i&&(0,h.isString)(t)){console.warn("The item to be removed does not exist!");var a=this.get("customGroupControll");a.remove(t)}else if(i){var o="";if(i.getType&&(o=i.getType()),e&&this.get("enabledStack")){var s=(0,B.__assign)((0,B.__assign)({},i.getModel()),{itemType:o}),l={};switch(o){case"node":{l.nodes=[s],l.edges=[];for(var u=i.getEdges(),f=u.length-1;f>=0;f--)l.edges.push((0,B.__assign)((0,B.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":l.edges=[s];break;case"combo":l.combos=[s];break;default:break}this.pushStack("delete",{before:l,after:{}})}var c=this.get("itemController");if(c.removeItem(t),o==="combo"){var v=jf(this.get("comboTrees"));this.set("comboTrees",v)}}},r.prototype.addItem=function(t,e,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController");if(t==="group"){var l=e.groupId,u=e.nodes,f=e.type,c=e.zIndex,v=e.title,g=v;return(0,h.isString)(v)&&(g={text:v}),this.get("customGroupControll").create(l,u,f,c,!0,g)}if(e.id&&this.findById(e.id)){console.warn("This item exists already. Be sure the id %c"+e.id+"%c is unique.","font-size: 20px; color: red;","");return}var C,O=this.get("comboTrees");if(O||(O=[]),t==="combo"){var F=this.get("itemMap"),G=!1;if(O.forEach(function(ee){G||ga(ee,function(ve){if(e.parentId===ve.id){G=!0;var fe=(0,B.__assign)({id:e.id,depth:ve.depth+2},e);ve.children?ve.children.push(fe):ve.children=[fe],e.depth=fe.depth,C=s.addItem(t,e)}var Te=F[ve.id];return G&&Te&&Te.getType&&Te.getType()==="combo"&&s.updateCombo(Te,ve.children),!0})}),!G){var Y=(0,B.__assign)({id:e.id,depth:0},e);e.depth=Y.depth,O.push(Y),C=s.addItem(t,e)}this.set("comboTrees",O)}else if(t==="node"&&(0,h.isString)(e.comboId)&&O){var $=this.findById(e.comboId);if($&&$.getType&&$.getType()!=="combo"){console.warn("'"+e.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");return}C=s.addItem(t,e);var q=this.get("itemMap"),ut=!1,kt=!1;(O||[]).forEach(function(ee){kt||ut||ga(ee,function(ve){if(ve.id===e.id)return kt=!0,!1;if(e.comboId===ve.id&&!kt){ut=!0;var fe=(0,h.clone)(e);fe.itemType="node",ve.children?ve.children.push(fe):ve.children=[fe],e.depth=ve.depth+1}return ut&&q[ve.id].getType&&q[ve.id].getType()==="combo"&&s.updateCombo(q[ve.id],ve.children),!0})})}else C=s.addItem(t,e);if(t==="node"&&e.comboId||t==="combo"&&e.parentId){var $=this.findById(e.comboId||e.parentId);$&&$.addChild(C)}var Nt=this.get("combos");if(Nt&&Nt.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var Wt=(0,B.__assign)((0,B.__assign)({},C.getModel()),{itemType:t}),Ft={};switch(t){case"node":Ft.nodes=[Wt];break;case"edge":Ft.edges=[Wt];break;case"combo":Ft.combos=[Wt];break;default:break}this.pushStack("add",{before:{},after:Ft})}return C},r.prototype.add=function(t,e,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(t,e,i,a)},r.prototype.updateItem=function(t,e,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;(0,h.isString)(t)?s=this.findById(t):s=t;var l=(0,h.clone)(s.getModel()),u="";s.getType&&(u=s.getType());var f=(0,B.__spreadArrays)(s.getStates());if(u==="combo"&&(0,h.each)(f,function(C){return a.setItemState(s,C,!1)}),o.updateItem(s,e),u==="combo"&&(0,h.each)(f,function(C){return a.setItemState(s,C,!0)}),i&&this.get("enabledStack")){var c={nodes:[],edges:[],combos:[]},v={nodes:[],edges:[],combos:[]},g=(0,B.__assign)({id:l.id},e);switch(u){case"node":c.nodes.push(l),v.nodes.push(g);break;case"edge":c.edges.push(l),v.edges.push(g);break;case"combo":c.combos.push(l),v.combos.push(g);break;default:break}u==="node"&&c.nodes.push(l),this.pushStack("update",{before:c,after:v})}},r.prototype.update=function(t,e,i){i===void 0&&(i=!0),this.updateItem(t,e,i)},r.prototype.setItemState=function(t,e,i){(0,h.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,e,i);var o=this.get("stateController");(0,h.isString)(i)?o.updateState(t,e+":"+i,!0):o.updateState(t,e,i)},r.prototype.priorityState=function(t,e){var i=this.get("itemController");i.priorityState(t,e)},r.prototype.data=function(t){this.set("data",t)},r.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o,l=e.combos,u=l===void 0?[]:l;if(this.clear(),this.emit("beforerender"),(0,h.each)(a,function(Y){t.add("node",Y,!1,!1)}),u&&u.length!==0){var f=Wf(u,a);this.set("comboTrees",f),t.addCombos(u)}(0,h.each)(s,function(Y){t.add("edge",Y,!1,!1)});var c=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var v=t.get("layoutController");v.layout(g)||g();function g(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",c)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(e.nodes&&e.edges&&e.nodes.length<e.edges.length){var C=this.getNodes();C.forEach(function(Y){Y.toFront()})}else{var O=this.getEdges();O.forEach(function(Y){Y.toBack()})}if(e.nodes){var F=e.nodes.filter(function(Y){return Y.groupId});if(F.length>0){var G=t.get("groupType");this.renderCustomGroup(e,G)}}this.get("enabledStack")&&this.pushStack("render")},r.prototype.read=function(t){this.data(t),this.render()},r.prototype.diffItems=function(t,e,i){var a=this,o,s=this.get("itemMap");(0,h.each)(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&t===y6){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(t,l,!1);e[t+"s"].push(o)})},r.prototype.changeData=function(t,e){e===void 0&&(e=!0);var i=this;if(!t)return this;e&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:t}),this.set("comboSorted",!1),this.getNodes().map(function(O){return i.clearItemStates(O)}),this.getEdges().map(function(O){return i.clearItemStates(O)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(t),i.render());var s=this.get("itemMap"),l={nodes:[],edges:[]},u=t.combos;if(u){var f=Wf(u,t.nodes);this.set("comboTrees",f)}this.diffItems("node",l,t.nodes),(0,h.each)(s,function(O,F){s[F].getModel().depth=0,!(O.getType&&O.getType()==="edge")&&(O.getType&&O.getType()==="combo"?(delete s[F],O.destroy()):l.nodes.indexOf(O)<0&&(delete s[F],i.remove(O,!1)))});for(var c=this.getCombos(),v=c.length,g=v-1;g>=0;g--)c[g].destroyed&&c.splice(g,1);u&&(i.addCombos(u),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,t.edges),(0,h.each)(s,function(O,F){O.getType&&(O.getType()==="node"||O.getType()==="combo")||l.edges.indexOf(O)<0&&(delete s[F],i.remove(O,!1))}),this.set({nodes:l.nodes,edges:l.edges});var C=this.get("layoutController");return C.changeData(),i.get("animate")&&!C.getLayoutType()?i.positionsAnimate():i.autoPaint(),setTimeout(function(){a.set("localRefresh",o)},16),this},r.prototype.addCombos=function(t){var e=this,i=e.get("comboTrees"),a=this.get("itemController");a.addCombos(i,t)},r.prototype.createCombo=function(t,e){var i=this;this.set("comboSorted",!1);var a="",o;if(!!t){if((0,h.isString)(t))a=t,o={id:t};else{if(a=t.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=t}var s=e.map(function(u){var f=i.findById(u),c="";f.getType&&(c=f.getType());var v={id:f.getID(),itemType:c};return c==="combo"?v.parentId=a:c==="node"&&(v.comboId=a),v});o.children=s,this.addItem("combo",o,!1),this.set("comboSorted",!1);var l=this.get("comboTrees");(l||[]).forEach(function(u){ga(u,function(f){return f.id===a?(f.itemType="combo",f.children=s,!1):!0})}),l&&this.sortCombos()}},r.prototype.uncombo=function(t){var e=this,i,a=this,o=t;if((0,h.isString)(t)&&(o=this.findById(t)),!o||o.getType&&o.getType()!=="combo"){console.warn("The item is not a combo!");return}var s=o.getModel().parentId,l=a.get("comboTrees");l||(l=[]);var u=this.get("itemMap"),f=o.get("id"),c,v=[],g=this.get("combos"),C=this.findById(s);if(l.forEach(function(F){c||ga(F,function(G){var Y;if(G.id===f){c=G;var $=o.getEdges();$.forEach(function(ut){e.removeItem(ut,!1)});var q=g.indexOf(t);g.splice(q,1),delete u[f],o.destroy()}if(s&&c&&G.id===s){C.removeCombo(o),v=G.children;var q=v.indexOf(c);return q!==-1&&v.splice(q,1),(Y=c.children)===null||Y===void 0||Y.forEach(function(kt){var Nt=e.findById(kt.id),Wt=Nt.getModel();Nt.getType&&Nt.getType()==="combo"?(kt.parentId=s,delete kt.comboId,Wt.parentId=s,delete Wt.comboId):Nt.getType&&Nt.getType()==="node"&&(kt.comboId=s,Wt.comboId=s),C.addChild(Nt),v.push(kt)}),!1}return!0})}),!s&&c){var O=l.indexOf(c);l.splice(O,1),(i=c.children)===null||i===void 0||i.forEach(function(F){F.parentId=void 0;var G=e.findById(F.id).getModel();G.parentId=void 0,F.itemType!=="node"&&l.push(F)})}},r.prototype.updateCombos=function(){var t=this,e=this,i=this.get("comboTrees"),a=e.get("itemController"),o=e.get("itemMap");(i||[]).forEach(function(s){ga(s,function(l){if(!l)return!0;var u=o[l.id];if(u&&u.getType&&u.getType()==="combo"){var f=(0,B.__spreadArrays)(u.getStates());(0,h.each)(f,function(c){return t.setItemState(u,c,!1)}),a.updateCombo(u,l.children),(0,h.each)(f,function(c){return t.setItemState(u,c,!0)})}return!0})}),e.sortCombos()},r.prototype.updateCombo=function(t){var e=this,i=this,a=t,o;if((0,h.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(f){ga(f,function(c){if(!c)return!0;var v=u[c.id];if(o===c.id&&v&&v.getType&&v.getType()==="combo"){var g=(0,B.__spreadArrays)(v.getStates());(0,h.each)(g,function(C){v.getStateStyle(C)&&e.setItemState(v,C,!1)}),l.updateCombo(v,c.children),(0,h.each)(g,function(C){v.getStateStyle(C)&&e.setItemState(v,C,!0)}),o&&(o=c.parentId)}return!0})})},r.prototype.updateComboTree=function(t,e){var i=this;this.set("comboSorted",!1);var a;(0,h.isString)(t)?a=i.findById(t):a=t;var o=a.getModel(),s=o.comboId||o.parentId;if(e&&a.getType&&a.getType()==="combo"){var l=this.get("comboTrees"),u=!0,f;if((l||[]).forEach(function(O){f||Wn(O,function(F){if(!f)return F.id===a.getID()&&(f=F),!0})}),Wn(f,function(O){return O.id===e?(u=!1,!1):!0}),!u){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(o.parentId||o.comboId){var c=this.findById(o.parentId||o.comboId);c&&c.removeChild(a)}var v="";if(a.getType&&(v=a.getType()),v==="combo"?o.parentId=e:v==="node"&&(o.comboId=e),e){var g=this.findById(e);g&&g.addChild(a)}if(s){var g=this.findById(s);g&&g.removeChild(a)}var C=jf(this.get("comboTrees"),o.id,e);this.set("comboTrees",C),this.updateCombos()},r.prototype.renderCustomGroup=function(t,e){var i=this,a=t.groups,o=t.nodes,s=o===void 0?[]:o,l=10;if(a){this.set({groups:a});var v=vN(t);Object.keys(v).forEach(function(C){var O=v[C];i.get("customGroupControll").create(C,O,e,l),l--});var g=this.get("customGroup");g.sort()}else{var u=s.filter(function(C){return C.groupId}),f=[],c=(0,h.groupBy)(u,"groupId");Object.keys(c).forEach(function(C){var O=c[C].map(function(F){return F.id});i.get("customGroupControll").create(C,O,e,l),l--,f.find(function(F){return F.id===C})||f.push({id:C})}),this.set({groups:f})}},r.prototype.save=function(){var t=[],e=[],i=[];return(0,h.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,h.each)(this.get("edges"),function(a){e.push(a.getModel())}),(0,h.each)(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:t,edges:e,combos:i,groups:this.get("groups")}},r.prototype.changeSize=function(t,e){var i=this.get("viewController");return i.changeSize(t,e),this},r.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),i=t.get("edges"),a=t.get("edges");(0,h.each)(e,function(o){o.refresh()}),(0,h.each)(i,function(o){o.refresh()}),(0,h.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},r.prototype.getNodes=function(){return this.get("nodes")},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getCombos=function(){return this.get("combos")},r.prototype.getComboChildren=function(t){if((0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},r.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var e=t.get("animateCfg"),i=e.onFrame,a=t.getNodes(),o=a.map(function(l){var u=l.getModel();return{id:u.id,x:u.x,y:u.y}});t.isAnimating()&&t.stopAnimate();var s=t.get("canvas");s.animate(function(l){(0,h.each)(o,function(u){var f=t.findById(u.id);if(!(!f||f.destroyed)){var c=f.get("originAttrs"),v=f.get("model");if(!c){var g=f.getContainer().getMatrix();g||(g=[1,0,0,0,1,0,0,0,1]),c={x:g[6],y:g[7]},f.set("originAttrs",c)}if(i){var C=i(f,l,u,c);f.set("model",Object.assign(v,C))}else v.x=c.x+(u.x-c.x)*l,v.y=c.y+(u.y-c.y)*l}}),t.refreshPositions()},{duration:e.duration,easing:e.easing,callback:function(){(0,h.each)(a,function(u){u.set("originAttrs",null)}),e.callback&&e.callback(),t.emit("afteranimate"),t.animating=!1}})},r.prototype.refreshPositions=function(){var t=this;t.emit("beforegraphrefreshposition");var e=t.get("nodes"),i=t.get("edges"),a=t.get("vedges"),o=t.get("combos"),s,l={};(0,h.each)(e,function(u){s=u.getModel();var f=u.get("originAttrs");f&&s.x===f.x&&s.y===f.y||(u.updatePosition({x:s.x,y:s.y}),l[s.id]=!0,s.comboId&&(l[s.comboId]=!0))}),o&&o.length!==0&&t.updateCombos(),(0,h.each)(i,function(u){var f=u.getSource().getModel(),c=u.getTarget().getModel();(l[f.id]||l[c.id]||u.getModel().isComboEdge)&&u.refresh()}),(0,h.each)(a,function(u){u.refresh()}),t.emit("aftergraphrefreshposition"),t.autoPaint()},r.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},r.prototype.isAnimating=function(){return this.animating},r.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},r.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},r.prototype.setMode=function(t){var e=this.get("modeController");return e.setMode(t),this},r.prototype.clear=function(){var t=this.get("canvas");return t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},r.prototype.toDataURL=function(t,e){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");t||(t="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),f=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);f.replaceChild(l,f.documentElement);var c=new XMLSerializer().serializeToString(f);s="data:image/svg+xml;charset=utf8,"+encodeURIComponent(c)}else{var v=void 0,g=o.getContext("2d"),C=this.get("width"),O=this.get("height"),F=void 0;if(e){var G=window.devicePixelRatio;v=g.getImageData(0,0,C*G,O*G),F=g.globalCompositeOperation,g.globalCompositeOperation="destination-over",g.fillStyle=e,g.fillRect(0,0,C,O)}s=o.toDataURL(t),e&&(g.clearRect(0,0,C,O),g.putImageData(v,0,0),g.globalCompositeOperation=F)}return s},r.prototype.toFullDataURL=function(t,e,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=(0,gn.Z)('<id="virtual-image"></div>'),f=i?i.backgroundColor:void 0,c=i?i.padding:void 0;c?(0,h.isNumber)(c)&&(c=[c,c,c,c]):c=[0,0,0,0];var v=o+c[0]+c[2],g=s+c[1]+c[3],C={container:u,height:v,width:g,quickHit:!0},O=l==="svg"?new Ds.Z(C):new Do.Z(C),F=this.get("group"),G=F.clone(),Y=(0,h.clone)(G.getMatrix());Y||(Y=[1,0,0,0,1,0,0,0,1]);var $=(a.maxX+a.minX)/2,q=(a.maxY+a.minY)/2;Sa.wO.translate(Y,Y,[-$,-q]),Sa.wO.translate(Y,Y,[s/2+c[3],o/2+c[0]]),G.resetMatrix(),G.setMatrix(Y),O.add(G);var ut=O.get("el"),kt="";e||(e="image/png"),setTimeout(function(){if(l==="svg"){var Nt=ut.cloneNode(!0),Wt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ft=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Wt);Ft.replaceChild(Nt,Ft.documentElement);var ee=new XMLSerializer().serializeToString(Ft);kt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(ee)}else{var ve=void 0,fe=ut.getContext("2d"),Te=void 0;if(f){var Be=window.devicePixelRatio;ve=fe.getImageData(0,0,g*Be,v*Be),Te=fe.globalCompositeOperation,fe.globalCompositeOperation="destination-over",fe.fillStyle=f,fe.fillRect(0,0,g,v)}kt=ut.toDataURL(e),f&&(fe.clearRect(0,0,g,v),fe.putImageData(ve,0,0),fe.globalCompositeOperation=Te)}t==null||t(kt)},16)},r.prototype.downloadFullImage=function(t,e,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),f=(0,gn.Z)('<id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,v=i?i.padding:void 0;v?(0,h.isNumber)(v)&&(v=[v,v,v,v]):v=[0,0,0,0];var g=s+v[0]+v[2],C=l+v[1]+v[3],O={container:f,height:g,width:C},F=u==="svg"?new Ds.Z(O):new Do.Z(O),G=this.get("group"),Y=G.clone(),$=(0,h.clone)(Y.getMatrix());$||($=[1,0,0,0,1,0,0,0,1]);var q=(o.maxX+o.minX)/2,ut=(o.maxY+o.minY)/2;Sa.wO.translate($,$,[-q,-ut]),Sa.wO.translate($,$,[l/2+v[3],s/2+v[0]]),Y.resetMatrix(),Y.setMatrix($),F.add(Y);var kt=F.get("el");e||(e="image/png"),setTimeout(function(){var Nt="";if(u==="svg"){var Wt=kt.cloneNode(!0),Ft=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),ee=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ft);ee.replaceChild(Wt,ee.documentElement);var ve=new XMLSerializer().serializeToString(ee);Nt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(ve)}else{var fe=void 0,Te=kt.getContext("2d"),Be=void 0;if(c){var ke=window.devicePixelRatio;fe=Te.getImageData(0,0,C*ke,g*ke),Be=Te.globalCompositeOperation,Te.globalCompositeOperation="destination-over",Te.fillStyle=c,Te.fillRect(0,0,C,g)}Nt=kt.toDataURL(e),c&&(Te.clearRect(0,0,C,g),Te.putImageData(fe,0,0),Te.globalCompositeOperation=Be)}var Qe=document.createElement("a"),tr=(t||"graph")+(u==="svg"?".svg":"."+e.split("/")[1]);a.dataURLToImage(Nt,u,Qe,tr);var rr=document.createEvent("MouseEvents");rr.initEvent("click",!1,!1),Qe.dispatchEvent(rr)},16)},r.prototype.downloadImage=function(t,e,i){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();e||(e="image/png");var u=(t||"graph")+(l==="svg"?".svg":e.split("/")[1]),f=document.createElement("a");setTimeout(function(){var c=o.toDataURL(e,i);a.dataURLToImage(c,l,f,u);var v=document.createEvent("MouseEvents");v.initEvent("click",!1,!1),f.dispatchEvent(v)},16)},r.prototype.dataURLToImage=function(t,e,i,a){if(typeof window!="undefined")if(window.Blob&&window.URL&&e!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),f=u.length,c=new Uint8Array(f);f--;)c[f]=u.charCodeAt(f);var v=new Blob([c],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(v,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(v)})}else i.addEventListener("click",function(){i.download=a,i.href=t})},r.prototype.updateLayout=function(t){var e=this.get("layoutController"),i;(0,h.isString)(t)?(i=t,t={type:i}):i=t.type;var a=this.get("layout"),o=a?a.type:void 0;if(!i||o===i){var s={};Object.assign(s,a,t),s.type=o||"random",this.set("layout",s),e.updateLayoutCfg(s)}else this.set("layout",t),e.changeLayout(i)},r.prototype.destroyLayout=function(){var t=this.get("layoutController");t.destroyLayout()},r.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");if(!!e){if(e.workerEnabled){t.layout();return}t.layoutMethod?t.relayout(!0):t.layout()}},r.prototype.collapseCombo=function(t){var e=this;if((0,h.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}var i=t.getModel(),a=this.get("itemController");a.collapseCombo(t),i.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),f=!1,c={};(u||[]).forEach(function(C){c[C.id]=C}),(u||[]).forEach(function(C){f||Wn(C,function(O){if(f&&c[O.id])return!1;if(i.parentId===O.id?(c={},O.children.forEach(function(G){c[G.id]=G})):i.id===O.id&&(f=!0),f){var F=e.findById(O.id);F&&F.getType&&F.getType()==="combo"&&(s=s.concat(F.getNodes()),l=l.concat(F.getCombos()))}return!0})});var v={},g=[];o.forEach(function(C){if(!(C.isVisible()&&!C.getModel().isVEdge)){var O=C.getSource(),F=C.getTarget();if((s.includes(O)||l.includes(O))&&!s.includes(F)&&!l.includes(F)||O.getModel().id===i.id){var G=C.getModel();if(G.isVEdge){e.removeItem(C,!1);return}for(var Y=F.getModel();!F.isVisible();){if(F=e.findById(Y.parentId||Y.comboId),!F||!Y.parentId&&!Y.comboId)return;Y=F.getModel()}var $=Y.id;if(v[i.id+"-"+$]){v[i.id+"-"+$]+=G.size||1;return}var q=e.addItem("vedge",{source:i.id,target:$,isVEdge:!0},!1);v[i.id+"-"+$]=G.size||1,g.push(q)}else if(!s.includes(O)&&!l.includes(O)&&(s.includes(F)||l.includes(F))||F.getModel().id===i.id){var G=C.getModel();if(G.isVEdge){e.removeItem(C,!1);return}for(var ut=O.getModel();!O.isVisible();){if(O=e.findById(ut.parentId||ut.comboId),!O||!ut.parentId&&!ut.comboId)return;ut=O.getModel()}var kt=ut.id;if(v[kt+"-"+i.id]){v[kt+"-"+i.id]+=G.size||1;return}var q=e.addItem("vedge",{target:i.id,source:kt,isVEdge:!0},!1);v[kt+"-"+i.id]=G.size||1,g.push(q)}}}),g.forEach(function(C){var O=C.getModel();e.updateItem(C,{size:v[O.source+"-"+O.target]},!1)})},r.prototype.expandCombo=function(t){var e=this;if((0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}var i=t.getModel(),a=this.get("itemController");a.expandCombo(t),i.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),f=!1,c={};(u||[]).forEach(function(C){c[C.id]=C}),(u||[]).forEach(function(C){f||Wn(C,function(O){if(f&&c[O.id])return!1;if(i.parentId===O.id?(c={},O.children.forEach(function(G){c[G.id]=G})):i.id===O.id&&(f=!0),f){var F=e.findById(O.id);F&&F.getType&&F.getType()==="combo"&&(s=s.concat(F.getNodes()),l=l.concat(F.getCombos()))}return!0})});var v={},g={};o.forEach(function(C){if(!(C.isVisible()&&!C.getModel().isVEdge)){var O=C.getSource(),F=C.getTarget(),G=O.get("id"),Y=F.get("id");if((s.includes(O)||l.includes(O))&&!s.includes(F)&&!l.includes(F)||G===i.id){if(C.getModel().isVEdge){e.removeItem(C,!1);return}for(var $=F.getModel();!F.isVisible();){if(F=e.findById($.comboId||$.parentId),!F||!$.parentId&&!$.comboId)return;$=F.getModel()}Y=$.id;for(var q=O.getModel();!O.isVisible();){if(O=e.findById(q.comboId||q.parentId),!O||!q.parentId&&!q.comboId)return;if(q.comboId===i.id||q.parentId===i.id)break;q=O.getModel()}if(G=q.id,Y){var ut=G+"-"+Y;if(v[ut]){v[ut]+=C.getModel().size||1,e.updateItem(g[ut],{size:v[ut]},!1);return}var kt=e.addItem("vedge",{source:G,target:Y,isVEdge:!0},!1);v[ut]=C.getModel().size||1,g[ut]=kt}}else if(!s.includes(O)&&!l.includes(O)&&(s.includes(F)||l.includes(F))||Y===i.id){if(C.getModel().isVEdge){e.removeItem(C,!1);return}for(var q=O.getModel();!O.isVisible();){if(O=e.findById(q.comboId||q.parentId),!O||!q.parentId&&!q.comboId)return;q=O.getModel()}G=q.id;for(var $=F.getModel();!F.isVisible();){if(F=e.findById($.comboId||$.parentId),!F||!$.parentId&&!$.comboId)return;if($.comboId===i.id||$.parentId===i.id)break;$=F.getModel()}if(Y=$.id,G){var ut=G+"-"+Y;if(v[ut]){v[ut]+=C.getModel().size||1,e.updateItem(g[ut],{size:v[ut]},!1);return}var kt=e.addItem("vedge",{target:Y,source:G,isVEdge:!0},!1);v[ut]=C.getModel().size||1,g[ut]=kt}}else(s.includes(O)||l.includes(O))&&(s.includes(F)||l.includes(F))&&O.isVisible()&&F.isVisible()&&C.show()}})},r.prototype.collapseExpandCombo=function(t){if((0,h.isString)(t)&&(t=this.findById(t)),!(t.getType&&t.getType()!=="combo")){for(var e=t.getModel(),i=this.findById(e.parentId);i;){var a=i.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(a.parentId)}var o=e.collapsed;o?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},r.prototype.collapseGroup=function(t){var e=this.get("customGroupControll");e.collapseGroup(t)},r.prototype.expandGroup=function(t){var e=this.get("customGroupControll");e.expandGroup(t)},r.prototype.addPlugin=function(t){var e=this;t.destroyed||(e.get("plugins").push(t),t.initPlugin(e))},r.prototype.removePlugin=function(t){var e=this.get("plugins"),i=e.indexOf(t);i>=0&&(t.destroyPlugin(),e.splice(i,1))},r.prototype.sortCombos=function(){var t=this,e=this.get("comboSorted");if(!e){this.set("comboSorted",!0);var i=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(l){Wn(l,function(u){return i[u.depth]?i[u.depth].push(u.id):i[u.depth]=[u.id],a[u.id]=u.depth,!0})});var s=this.getEdges().concat(this.get("vedges"));(s||[]).forEach(function(l){var u=l.getModel(),f=a[u.source]||0,c=a[u.target]||0,v=Math.max(f,c);i[v]?i[v].push(u.id):i[v]=[u.id]}),i.forEach(function(l){if(!(!l||!l.length))for(var u=l.length-1;u>=0;u--){var f=t.findById(l[u]);f==null||f.toFront()}})}},r.prototype.getNeighbors=function(t,e){var i=t;return(0,h.isString)(t)&&(i=this.findById(t)),i.getNeighbors(e)},r.prototype.getNodeDegree=function(t,e){e===void 0&&(e=void 0);var i=t;(0,h.isString)(t)&&(i=this.findById(t));var a=this.get("degrees");a||(a=a1(this)),this.set("degees",a);var o=a[i.getID()],s;switch(e){case"in":s=o.inDegree;break;case"out":s=o.outDegree;break;case"all":s=o;break;default:s=o.degree;break}return s},r.prototype.getUndoStack=function(){return this.undoStack},r.prototype.getRedoStack=function(){return this.redoStack},r.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},r.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},r.prototype.pushStack=function(t,e,i){if(t===void 0&&(t="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=e?(0,h.clone)(e):{before:{},after:(0,h.clone)(this.save())};i==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},r.prototype.getAdjMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var i=this.get("adjMatrix");return(!i||!t)&&(i=_u(this,e),this.set("adjMatrix",i)),i},r.prototype.getShortestPathMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!t)&&(i=_u(this,e),this.set("adjMatrix",i)),(!a||!t)&&(a=u1(this,e),this.set("shortestPathMatrix",a)),a},r.prototype.destroy=function(){this.clear(),this.clearStack(),(0,h.each)(this.get("plugins"),function(o){o.destroyPlugin()});var t=this.get("tooltips");if(t)for(var e=0;e<t.length;e++){var i=t[e];if(!!i){var a=i.parentElement;!a||a.removeChild(i)}}this.get("eventController").destroy(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("layoutController").destroy(),this.get("customGroupControll").destroy(),this.get("canvas").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},r.prototype.createHull=function(t){var e=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),e||(e=this.get("group").addGroup({id:"hullGroup"}),e.toBack(),this.set("hullGroup",e)),i[t.id])return console.warn("Existed hull id."),i[t.id];var a=e.addGroup({id:t.id+"-container"}),o=new g6(this,(0,B.__assign)((0,B.__assign)({},t),{group:a})),s=o.id;return i[s]=o,o},r.prototype.getHulls=function(){return this.get("hullMap")},r.prototype.getHullById=function(t){return this.get("hullMap")[t]},r.prototype.removeHull=function(t){var e;(0,h.isString)(t)?e=this.getHullById(t):e=t;var i=this.get("hullMap");delete i[e.id],e.destroy()},r.prototype.setImageWaterMarker=function(t,e){t===void 0&&(t=Ue.waterMarkerImage);var i=this.get("container");(0,h.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},Ue.imageWaterMarkerConfig,e),s=o.width,l=o.height,u=o.compatible,f=o.image;if(!a){var c={container:i,width:s,height:l,capture:!1},v=this.get("pixelRatio");v&&(c.pixelRatio=v),a=new Do.Z(c),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var g=a.get("context"),C=f.rotate,O=f.x,F=f.y;g.rotate(-C*Math.PI/180);var G=new Image;G.crossOrigin="anonymous",G.src=t,G.onload=function(){if(g.drawImage(G,O,F,f.width,f.height),g.rotate(C*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Y=document.querySelector(".g6-graph-watermarker");Y||(Y=document.createElement("div"),Y.className="g6-graph-watermarker"),Y.className="g6-graph-watermarker",a.destroyed||(Y.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",i.appendChild(Y))}}},r.prototype.setTextWaterMarker=function(t,e){var i=this.get("container");(0,h.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},Ue.textWaterMarkerConfig,e),s=o.width,l=o.height,u=o.compatible,f=o.text;if(!a){var c={container:i,width:s,height:l,capture:!1},v=this.get("pixelRatio");v&&(c.pixelRatio=v),a=new Do.Z(c),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var g=a.get("context"),C=f.rotate,O=f.fill,F=f.fontFamily,G=f.fontSize,Y=f.baseline,$=f.x,q=f.y,ut=f.lineHeight;g.rotate(-C*Math.PI/180),g.font=G+"px "+F,g.fillStyle=O,g.textBaseline=Y;for(var kt=t.length-1;kt>=0;kt--)g.fillText(t[kt],$,q+kt*ut);if(g.rotate(C*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Nt=document.querySelector(".g6-graph-watermarker");Nt||(Nt=document.createElement("div"),Nt.className="g6-graph-watermarker"),Nt.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",i.appendChild(Nt)}},r}(Ve.default),d1=x6,b6=d(62114),p1=d.n(b6),w6=function(n){(0,B.__extends)(r,n);function r(t){var e=n.call(this,t)||this;return e.layoutAnimating=!1,e.set("removeList",[]),e.set("layoutMethod",e.getLayout()),e}return r.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){var i=p1()[t.type](e,t);return mx(i),i}:function(e){return p1()[t.type](e,t)}):null},r.indexOfChild=function(t,e){var i=-1;return(0,on.S6)(t,function(a,o){if(e===a.id)return i=o,!1}),i},r.prototype.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return t.animate=!0,t},r.prototype.innerAddChild=function(t,e,i){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(e){if(s.set("parent",e),i){var l=e.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=e.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var f=e.get("children");f?f.push(s):e.set("children",[s]),a.addItem("edge",{source:e,target:s,id:e.get("id")+":"+s.get("id")},!1)}return(0,on.S6)(t.children||[],function(c){a.innerAddChild(c,s,i)}),a.emit("afteraddchild",{item:s,parent:e}),s},r.prototype.innerUpdateChild=function(t,e,i){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,e,i);return}(0,on.S6)(t.children||[],function(C){a.innerUpdateChild(C,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var f=s[u].getModel();r.indexOfChild(t.children||[],f.id)===-1&&(a.innerRemoveChild(f.id,{x:t.x,y:t.y},i),s.splice(u,1))}}var c,v;o.get("originAttrs")&&(c=o.get("originAttrs").x,v=o.get("originAttrs").y);var g=o.getModel();i&&o.set("originAttrs",{x:g.x,y:g.y}),o.set("model",t.data),(c!==t.x||v!==t.y)&&o.updatePosition({x:t.x,y:t.y})},r.prototype.innerRemoveChild=function(t,e,i){var a=this,o=a.findById(t);if(!!o)if((0,on.S6)(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,e,i)}),i){var s=o.getModel();o.set("to",e),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o)},r.prototype.changeData=function(t){var e=this;this.getNodes().map(function(i){return e.clearItemStates(i)}),this.getEdges().map(function(i){return e.clearItemStates(i)}),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},r.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var e=this;e.updateLayout(t)},r.prototype.updateLayout=function(t){var e=this;if(!t){console.warn("layout cannot be null");return}e.set("layout",t),e.set("layoutMethod",e.getLayout()),e.layout()},r.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var e=this;e.layout(t)},r.prototype.layout=function(t){var e=this,i=e.get("data"),a=e.get("layoutMethod"),o=a(i,e.get("layout")),s=e.get("animate");if(e.emit("beforerefreshlayout",{data:i,layoutData:o}),e.emit("beforelayout"),e.innerUpdateChild(o,void 0,s),t){var l=e.get("viewController");l.fitView()}s?e.layoutAnimate(o):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:i,layoutData:o}),e.emit("afterlayout")},r.prototype.addChild=function(t,e){var i=this;i.emit("beforeaddchild",{model:t,parent:e}),(0,on.HD)(e)||(e=e.get("id"));var a=i.findDataById(e);a&&(a.children||(a.children=[]),a.children.push(t),i.changeData())},r.prototype.updateChild=function(t,e){var i=this;if(!e||!i.findById(e)){i.changeData(t);return}var a=i.findById(e).getModel(),o=i.findById(t.id);if(a.children||(a.children=[]),!o)a.children.push(t);else{var s=r.indexOfChild(a.children,t.id);a.children[s]=t}i.changeData()},r.prototype.removeChild=function(t){var e=this,i=e.findById(t);if(!!i){var a=i.get("parent");if(a&&!a.destroyed){var o=e.findDataById(a.get("id")),s=o&&o.children||[],l=i.getModel(),u=r.indexOfChild(s,l.id);s.splice(u,1)}e.changeData()}},r.prototype.findDataById=function(t,e){var i=this;if(e||(e=i.get("data")),t===e.id)return e;var a=null;return(0,on.S6)(e.children||[],function(o){if(o.id===t)return a=o,!1;if(a=i.findDataById(t,o),a)return!1}),a},r.prototype.layoutAnimate=function(t,e){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:t}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Wn(t,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),f=l.get("model");if(u||(u={x:f.x,y:f.y},l.set("originAttrs",u)),e){var c=e(l,o,u,t);l.set("model",Object.assign(f,c))}else f.x=u.x+(s.x-u.x)*o,f.y=u.y+(s.y-u.y)*o}return!0}),(0,on.S6)(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),f=s.get("to");l.x=u.x+(f.x-u.x)*o,l.y=u.y+(f.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,on.S6)(i.getNodes(),function(s){s.set("originAttrs",null)}),(0,on.S6)(i.get("removeList"),function(s){i.removeItem(s)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:t})},delay:a.delay})},r.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},r.prototype.isLayoutAnimating=function(){return this.layoutAnimating},r.prototype.render=function(){var t=this,e=t.get("data");if(!e)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},r.prototype.save=function(){return this.get("data")},r}(d1),S6=w6,C6="-shape",g1="-label",Pu=["startArrow","endArrow"],sc="-label-bg",lc={options:{},itemType:"",type:"",getCustomConfig:function(r){return{}},getOptions:function(r){return(0,h.deepMix)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(r)||{},r)},draw:function(r,t){var e=this.drawShape(r,t);if(e.set("className",this.itemType+C6),r.label){var i=this.drawLabel(r,t);i.set("className",this.itemType+g1)}return e},afterDraw:function(r,t,e){},drawShape:function(r,t){return null},drawLabel:function(r,t){var e=this.getOptions(r).labelCfg,i=e||{},a=this.getLabelStyle(r,i,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(o){var l=s.getBBox(),u=s.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),a.rotateCenter)switch(a.rotateCenter){case"center":u=Oa(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=Oa(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=Oa(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=Oa(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=Oa(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var f=this.drawLabelBg(r,t,s),c=this.itemType+sc;f.set("classname",c),s.toFront()}return s},drawLabelBg:function(r,t,e){var i=this.options.labelCfg,a=(0,h.mix)({},i,r.labelCfg),o=this.getLabelBgStyleByPosition(e,r,a,t),s=t.addShape("rect",{name:"text-bg-shape",attrs:o});return s},getLabelStyleByPosition:function(r,t,e){return{text:r.label}},getLabelBgStyleByPosition:function(r,t,e,i){return{}},getLabelStyle:function(r,t,e){var i=this.getLabelStyleByPosition(r,t,e),a=this.itemType+"Label",o=Ue[a]?Ue[a].style:null,s=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},o),i),t.style);return s},getShapeStyle:function(r){return r.style},update:function(r,t){this.updateShapeStyle(r,t),this.updateLabel(r,t)},updateShapeStyle:function(r,t){var e=t.getContainer(),i=t.getKeyShape(),a=(0,h.mix)({},i.attr(),r.style),o=function(u){var f,c=a[u];if((0,h.isPlainObject)(c)){var v=e.find(function(g){return g.get("name")===u});v&&v.attr(c)}else i.attr((f={},f[u]=c,f))};for(var s in a)o(s)},updateLabel:function(r,t){var e=t.getContainer(),i=this.getOptions({}).labelCfg,a=this.itemType+g1,o=e.find(function(q){return q.get("className")===a}),s=this.itemType+sc,l=e.find(function(q){return q.get("classname")===s});if(r.label||r.label==="")if(o){var f={};t.getModel&&(f=t.getModel().labelCfg);var c=(0,h.deepMix)({},i,f,r.labelCfg),v=this.getLabelStyleByPosition(r,c,e),g=r.labelCfg?r.labelCfg.style:void 0,C=c.style&&c.style.background,O=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},o.attr()),v),g),F=O.rotate;if(delete O.rotate,F){var G=[1,0,0,0,1,0,0,0,1];G=Oa(G,[["t",-O.x,-O.y],["r",F],["t",O.x,O.y]]),o.resetMatrix(),o.attr((0,B.__assign)((0,B.__assign)({},O),{matrix:G}))}else o.resetMatrix(),o.attr(O);if(!l)O.background&&(l=this.drawLabelBg(r,e,o),l.set("classname",s),o.toFront());else if(O.background){var Y=this.getLabelBgStyleByPosition(o,r,c,e),$=(0,B.__assign)((0,B.__assign)({},Y),C);l.resetMatrix(),F&&l.rotateAtStart(F),l.attr($)}else e.removeChild(l)}else{var u=this.drawLabel(r,e);u.set("className",a)}},afterUpdate:function(r,t){},setState:function(r,t,e){var i,a,o=e.get("keyShape");if(!!o){var s=e.getType(),l=(0,h.isBoolean)(t)?r:r+":"+t,u=this.getStateStyle(l,e),f=e.getStateStyle(l);if(!(!f&&!u)){var c=(0,h.mix)({},f||u),v=e.getContainer();if(t){var g=function(fe){var Te,Be=c[fe];if((0,h.isPlainObject)(Be)&&!Pu.includes(fe)){var ke=v.find(function(Qe){return Qe.get("name")===fe});ke&&ke.attr(Be)}else o.attr((Te={},Te[fe]=Be,Te))};for(var C in c)g(C)}else{var O=(0,h.clone)(e.getCurrentStatesStyle()),F=e.getModel(),G=(0,h.mix)({},F.style,(0,h.clone)(e.getOriginStyle())),Y=o.get("name"),$=o.attr(),q={},ut=function(fe){var Te=c[fe];if((0,h.isPlainObject)(Te)&&!Pu.includes(fe)){var Be=v.find(function(tr){return tr.get("name")===fe});if(Be){var ke=Be.attr();(0,h.each)(Te,function(tr,rr){(ke[rr]||ke[rr]===0)&&delete ke[rr]}),q[fe]=ke}}else{var Qe={x:1,y:1,cx:1,cy:1};$[fe]&&!Qe[fe]&&delete $[fe]}};for(var kt in c)ut(kt);Y?q[Y]=$:(0,h.mix)(q,$);for(var C in O){var Nt=O[C];(!(0,h.isPlainObject)(Nt)||Pu.includes(C))&&(Y?((0,h.mix)(G[Y],(a={},a[C]=Nt,a)),delete G[C]):(0,h.mix)(G,(i={},i[C]=Nt,i)),delete O[C])}var Wt={};(0,h.deepMix)(Wt,G,q,O);var Ft=function(fe){var Te,Be,ke=Wt[fe];if((0,h.isPlainObject)(ke)&&!Pu.includes(fe)){var Qe=v.find(function(tr){return tr.get("name")===fe});Qe&&Qe.attr(ke)}else s==="combo"?Y||o.attr((Te={},Te[fe]=ke,Te)):o.attr((Be={},Be[fe]=ke,Be))};for(var ee in Wt)Ft(ee)}}}},getStateStyle:function(r,t){var e=t.getModel(),i=t.getType(),a=this.getOptions(e),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=e.stateStyles?e.stateStyles[r]:o&&o[r];return i==="combo"?(0,h.clone)(u):(0,h.mix)({},l,u)},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.getOptions(r).anchorPoints;return t}},M6={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Ue.nodeLabel.offset,getSize:function(r){var t=r.size||this.getOptions({}).size||Ue.defaultNode.size;return(0,h.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,h.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition;if(e==="center")return{x:0,y:0,text:r.label};var i=t.offset;(0,h.isNil)(i)&&(i=this.offset);var a=this.getSize(r),o=a[0],s=a[1],l;switch(e){case"top":l={x:0,y:0-s/2-i,textBaseline:"bottom"};break;case"bottom":l={x:0,y:s/2+i,textBaseline:"top"};break;case"left":l={x:0-o/2-i,y:0,textAlign:"right"};break;default:l={x:o/2+i,y:0,textAlign:"left"};break}return l.text=r.label,l},getLabelBgStyleByPosition:function(r,t,e,i){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var s=If(o.padding),l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],f=e.offset;(0,h.isNil)(f)&&(f=this.offset);var c;return c={x:a.minX-s[3],y:a.minY-s[0]},c=(0,B.__assign)((0,B.__assign)((0,B.__assign)({},c),o),{width:l,height:u}),c},drawShape:function(r,t){var e=this.shapeType,i=this.getShapeStyle(r),a=t.addShape(e,{attrs:i,draggable:!0,name:"node-shape"});return a},updateLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,i=t.find(function(Nt){return Nt.get("className")==="link-point-left"}),a=t.find(function(Nt){return Nt.get("className")==="link-point-right"}),o=t.find(function(Nt){return Nt.get("className")==="link-point-top"}),s=t.find(function(Nt){return Nt.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=e);var u=(0,h.mix)({},l,r.linkPoints),f=u.fill,c=u.stroke,v=u.lineWidth,g=u.size/2;g||(g=u.r);var C=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},O=C.left,F=C.right,G=C.top,Y=C.bottom,$=this.getSize(r),q=$[0],ut=$[1],kt={r:g,fill:f,stroke:c,lineWidth:v};i?!O&&O!==void 0?i.remove():i.attr((0,B.__assign)((0,B.__assign)({},kt),{x:-q/2,y:0})):O&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},kt),{x:-q/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(!F&&F!==void 0&&a.remove(),a.attr((0,B.__assign)((0,B.__assign)({},kt),{x:q/2,y:0}))):F&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},kt),{x:q/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),o?(!G&&G!==void 0&&o.remove(),o.attr((0,B.__assign)((0,B.__assign)({},kt),{x:0,y:-ut/2}))):G&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},kt),{x:0,y:-ut/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?!Y&&Y!==void 0?s.remove():s.attr((0,B.__assign)((0,B.__assign)({},kt),{x:0,y:ut/2})):Y&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},kt),{x:0,y:ut/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(r,t,e,i){var a=t.get("keyShape");a.attr((0,B.__assign)({},e)),this.updateLabel(r,t),i&&this.updateIcon(r,t)},updateIcon:function(r,t){var e=this,i=t.getContainer(),a=this.getOptions(r).icon,o=(r.icon?r.icon:{show:void 0}).show,s=i.find(function(v){return v.get("className")===e.type+"-icon"});if(s)if(o||o===void 0){var l=(0,h.mix)({},s.attr(),a),u=l.width,f=l.height;s.attr((0,B.__assign)((0,B.__assign)({},l),{x:-u/2,y:-f/2}))}else s.remove();else if(o){var u=a.width,f=a.height;i.addShape("image",{attrs:(0,B.__assign)((0,B.__assign)({},a),{x:-u/2,y:-f/2}),className:this.type+"-icon",name:this.type+"-icon"});var c=i.find(function(C){return C.get("className")==="node-label"});c&&c.toFront()}}},E6=(0,B.__assign)((0,B.__assign)({},lc),M6);un.registerNode("single-node",E6);var Lu="edge-shape";function A6(n){var r=n;return n==="start"?r="end":n==="end"&&(r="start"),r}var T6={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Ue.defaultEdge.size,style:{x:0,y:0,stroke:Ue.defaultEdge.style.stroke,lineAppendWidth:Ue.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ue.edgeLabel.style.fill,fontSize:Ue.edgeLabel.style.fontSize}},stateStyles:(0,B.__assign)({},Ue.edgeStateStyles)},getPath:function(r){var t=[];return(0,h.each)(r,function(e,i){i===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},i=(0,h.mix)({},t,e,r.style),a=r.size||Ue.defaultEdge.size;r=this.getPathPoints(r);var o=r.startPoint,s=r.endPoint,l=this.getControlPoints(r),u=[o];l&&(u=u.concat(l)),u.push(s);var f=this.getPath(u),c=(0,h.mix)({},Ue.defaultEdge.style,{stroke:Ue.defaultEdge.color,lineWidth:a,path:f},i);return c},updateShapeStyle:function(r,t){var e=t.getContainer(),i={stroke:r.color},a=e.find(function(G){return G.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var s=r.startPoint,l=r.endPoint,u=this.getControlPoints(r),f=[s];u&&(f=f.concat(u)),f.push(l);var c=(0,h.mix)({},i,a.attr(),r.style),v=r.sourceNode,g=r.targetNode,C={radius:c.radius};u||(C={source:v,target:g,offset:c.offset,radius:c.radius});var O=this.getPath(f,C),F=(0,h.mix)(i,a.attr(),{lineWidth:o,path:O},r.style);a&&a.attr(F)},getLabelStyleByPosition:function(r,t,e){var i=t.position||this.labelPosition,a={},o=e&&e.find(function(v){return v.get("className")===Lu}),s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=t.refX||this.refX,u=t.refY||this.refY;if(r.startPoint.x===r.endPoint.x&&r.startPoint.y===r.endPoint.y)return a.x=r.startPoint.x+l,a.y=r.startPoint.y+u,a.text=r.label,a;var f=(0,h.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate,c=uu(o,s,l,u,f);return a.x=c.x,a.y=c.y,a.rotate=c.rotate,a.textAlign=this._getTextAlign(i,c.angle),a.text=r.label,a},getLabelBgStyleByPosition:function(r,t,e,i){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var s=o.padding,l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],f=e.position||this.labelPosition,c=(0,B.__assign)((0,B.__assign)({},o),{width:l,height:u,x:a.minX-s[2],y:a.minY-s[0],rotate:0}),v=(0,h.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate,g=i&&i.find(function($){return $.get("className")===Lu}),C;f==="start"?C=0:f==="end"?C=1:C=.5;var O=e.refX||this.refX,F=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return c.x=t.startPoint.x+O,c.y=t.startPoint.y+F,c;var G=uu(g,C,O-l/2,F+u/2,v),Y=G.angle;return Y>1/2*Math.PI&&Y<3*1/2*Math.PI&&(G=uu(g,C,O+l/2,F+u/2,v)),v&&(c.x=G.x,c.y=G.y),c.rotate=G.rotate,c},_getTextAlign:function(r,t){var e="center";return t?(t=t%(Math.PI*2),r!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?e=r:e=A6(r)),e):r},getControlPoints:function(r){return r.controlPoints},getPathPoints:function(r){return r},drawShape:function(r,t){var e=this.getShapeStyle(r),i=t.addShape("path",{className:Lu,name:Lu,attrs:e});return i},drawLabel:function(r,t){var e=this.options.labelCfg,i=(0,h.deepMix)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},e,r.labelCfg),a=this.getLabelStyle(r,i,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape"});if(o&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(r,t,s),u=this.itemType+sc;l.set("classname",u),s.toFront()}return s},drawLabelBg:function(r,t,e){var i=this.options.labelCfg,a=(0,h.deepMix)({},i,r.labelCfg),o=this.getLabelStyle(r,a,t),s=o.rotate,l=this.getLabelBgStyleByPosition(e,r,a,t);delete l.rotate;var u=t.addShape("rect",{name:"text-bg-shape",attrs:l});return s&&u.rotateAtStart(s),u}},_6=(0,B.__assign)((0,B.__assign)({},lc),T6);un.registerEdge("single-edge",_6),un.registerEdge("line",{getControlPoints:function(){}},"single-edge"),un.registerEdge("spline",{getPath:function(r){var t=tx(r);return t}},"single-edge"),un.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(r){var t=r.startPoint,e=r.endPoint,i={x:(t.x+e.x)/2,y:(t.y+e.y)/2},a,o;if(r.controlPoints!==void 0){if(o=r.controlPoints[0],a=Df(t,o,e),t.x<=e.x&&t.y>e.y?this.clockwise=a.x>o.x?0:1:t.x<=e.x&&t.y<e.y?this.clockwise=a.x>o.x?1:0:t.x>e.x&&t.y<=e.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)==(e.x-t.x)/(e.y-t.y))return[]}else{r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),(0,kn.default)(r.curveOffset)&&(r.curveOffset=r.curveOffset[0]),r.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:e.x-t.x,y:e.y-t.y},l=Math.atan2(s.y,s.x);o={x:r.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:r.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=Df(t,o,e)}var u=Os(t,a),f=[{x:u,y:u}];return f},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),r.length===2?t.push(["L",r[1].x,r[1].y]):t.push(["A",r[1].x,r[1].y,0,0,this.clockwise,r[2].x,r[2].y]),t}},"single-edge"),un.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(r){var t=r.controlPoints;if(!t||!t.length){var e=r.startPoint,i=r.endPoint;r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,kn.default)(this.curveOffset)&&(r.curveOffset=r.curveOffset[0]),(0,kn.default)(this.curvePosition)&&(r.curvePosition=r.curveOffset[0]);var a=au(e,i,r.curvePosition,r.curveOffset);t=[a]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["Q",r[1].x,r[1].y,r[2].x,r[2].y]),t}},"single-edge"),un.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(r){var t=r.controlPoints;if(r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,wa.default)(r.curveOffset)&&(r.curveOffset=[r.curveOffset,-r.curveOffset]),(0,wa.default)(r.curvePosition)&&(r.curvePosition=[r.curvePosition,1-r.curvePosition]),!t||!t.length||t.length<2){var e=r.startPoint,i=r.endPoint,a=au(e,i,r.curvePosition[0],r.curveOffset[0]),o=au(e,i,r.curvePosition[1],r.curveOffset[1]);t=[a,o]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["C",r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y]),t}},"single-edge"),un.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,wa.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var i={x:t.x,y:(e.y-t.y)*this.curvePosition[0]+t.y},a={x:e.x,y:(e.y-t.y)*this.curvePosition[1]+t.y},o=[i,a];return o}},"cubic"),un.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,wa.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var i={x:(e.x-t.x)*this.curvePosition[0]+t.x,y:t.y},a={x:(e.x-t.x)*this.curvePosition[1]+t.x,y:e.y},o=[i,a];return o}},"cubic"),un.registerEdge("loop",{getPathPoints:function(r){return gx(r)},getControlPoints:function(r){return r.controlPoints},afterDraw:function(r){r.controlPoints=void 0},afterUpdate:function(r){r.controlPoints=void 0}},"cubic");var P6={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Ue.comboLabel.refX,refY:Ue.comboLabel.refY,options:{style:{stroke:Ue.defaultCombo.style.stroke,fill:Ue.defaultCombo.style.fill,lineWidth:Ue.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ue.comboLabel.style.fill,fontSize:Ue.comboLabel.style.fontSize}},stateStyles:(0,B.__assign)({},Ue.comboStateStyles)},getSize:function(r){var t=(0,h.clone)(r.size||this.options.size||Ue.defaultCombo.size);return(0,h.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,h.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,i=r.style,a=r.padding||this.options.padding;(0,h.isArray)(a)&&(a=a[0]);var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var l=this.getSize(r),u=Math.max(i.r,l[0]/2)||l[0]/2,f=u+a,c;switch(e){case"top":c={x:0,y:-f-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":c={x:0,y:f+s,textBaseline:"bottom",textAlign:"center"};break;case"left":c={x:-f+o,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:r.label,textAlign:"center"};break;default:c={x:f+o,y:0,textAlign:"right"};break}return c.text=r.label,c},drawShape:function(r,t){var e=this.shapeType,i=this.getShapeStyle(r),a=t.addShape(e,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateShape:function(r,t,e){var i=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&i.animate?i.animate(e,{duration:200,easing:"easeLinear"}):i.attr((0,B.__assign)({},e)),this.updateLabel(r,t)}},L6=(0,B.__assign)((0,B.__assign)({},lc),P6);un.registerCombo("single-combo",L6),un.registerCombo("circle",{options:{size:[Ue.defaultCombo.size[0],Ue.defaultCombo.size[0]],padding:Ue.defaultCombo.padding[0],animate:!0,style:{stroke:Ue.defaultCombo.style.stroke,fill:Ue.defaultCombo.style.fill,lineWidth:Ue.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ue.comboLabel.style.fill,fontSize:Ue.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,B.__assign)({},Ue.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r);delete e.height,delete e.width;var i=t.addShape("circle",{attrs:e,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,h.isArray)(e)&&(e=e[0]);var i={stroke:r.color},a=(0,h.mix)({},t,i,r.style),o=this.getSize(r),s;!(0,h.isNumber)(a.r)||isNaN(a.r)?s=o[0]/2||Ue.defaultCombo.style.r:s=Math.max(a.r,o[0]/2)||o[0]/2,a.r=s+e;var l=(0,B.__assign)({x:0,y:0},a);return r.style?r.style.r=s:r.style={r:s},l},update:function(r,t){var e=this.getSize(r),i=r.padding||this.options.padding;(0,h.isArray)(i)&&(i=i[0]);var a=(0,h.clone)(r.style),o=Math.max(a.r,e[0]/2)||e[0]/2;a.r=o+i;var s=t.get("sizeCache");s&&(s.r=a.r);var l={stroke:r.color},u=t.get("keyShape"),f=(0,h.mix)({},u.attr(),l,a);r.style?r.style.r=o:r.style={r:o},this.updateShape(r,t,f,!0)}},"single-combo"),un.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Ue.defaultCombo.style.stroke,fill:Ue.defaultCombo.style.fill,lineWidth:Ue.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ue.comboLabel.style.fill,fontSize:Ue.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,B.__assign)({},Ue.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r),i=t.addShape("rect",{attrs:e,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,i=r.style,a=r.padding||this.options.padding;(0,h.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var l=i.width/2+a[3],u=i.height/2+a[0],f;switch(e){case"top":f={x:0-l+o,y:0-u+s,textBaseline:"top",textAlign:"left"};break;case"bottom":f={x:0,y:u+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:0-l+s,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:r.label,textAlign:"center"};break;default:f={x:l+o,y:0,textAlign:"right"};break}return f.text=r.label,f},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,h.isNumber)(e)&&(e=[e,e,e,e]);var i={stroke:r.color},a=(0,h.mix)({},t,i,r.style),o=this.getSize(r),s,l;!(0,h.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Ue.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,h.isNumber)(a.height)||isNaN(a.height)?l=o[1]||Ue.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1];var u=-s/2-e[3],f=-l/2-e[0];a.width=s+e[1]+e[3],a.height=l+e[0]+e[2];var c=(0,B.__assign)({x:u,y:f},a);return r.style?(r.style.width=s,r.style.height=l):r.style={width:s,height:l},c},update:function(r,t){var e=this.getSize(r),i=r.padding||this.options.padding;(0,h.isNumber)(i)&&(i=[i,i,i,i]);var a=(0,h.clone)(r.style),o=Math.max(a.width,e[0])||e[0],s=Math.max(a.height,e[1])||e[1];a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var l=t.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var u={stroke:r.color},f=t.get("keyShape"),c=(0,h.mix)({},f.attr(),u,a);r.style?(r.style.width=o,r.style.height=s):r.style={width:o,height:s},this.updateShape(r,t,c,!1)},updateShape:function(r,t,e){var i=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&i.animate?i.animate(e,{duration:200,easing:"easeLinear"}):i.attr((0,B.__assign)({},e)),this.updateLabel(r,t)}},"single-combo"),un.registerNode("circle",{options:{size:Ue.defaultNode.size,style:{x:0,y:0,stroke:Ue.defaultNode.style.stroke,fill:Ue.defaultNode.style.fill,lineWidth:Ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ue.nodeLabel.style.fill,fontSize:Ue.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ue.defaultNode.linkPoints.size,lineWidth:Ue.defaultNode.linkPoints.lineWidth,fill:Ue.defaultNode.linkPoints.fill,stroke:Ue.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,B.__assign)({},Ue.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,i=e===void 0?{}:e,a=this.getShapeStyle(r),o=(0,Nn.default)({},i,r.icon),s=t.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0}),l=o.width,u=o.height,f=o.show;return f&&t.addShape("image",{attrs:(0,B.__assign)({x:-l/2,y:-u/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(r,t),s},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,i=e===void 0?{}:e,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=(0,B.__rest)(i,["top","left","right","bottom","size","r"]),v=this.getSize(r),g=v[0]/2;o&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:-g,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:g,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:-g,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:g,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},i=(0,Nn.default)({},t,e),a=this.getSize(r),o=a[0]/2,s=(0,B.__assign)({x:0,y:0,r:o},i);return s},update:function(r,t){var e=t.getContainer(),i=this.getSize(r),a={stroke:r.color,r:i[0]/2},o=t.get("keyShape"),s=(0,Nn.default)({},o.attr(),a,r.style);this.updateShape(r,t,s,!0),this.updateLinkPoints(r,e)}},"single-node"),un.registerNode("rect",{options:{size:[100,30],style:{radius:0,stroke:Ue.defaultNode.style.stroke,fill:Ue.defaultNode.style.fill,lineWidth:Ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ue.nodeLabel.style.fill,fontSize:Ue.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ue.defaultNode.linkPoints.size,lineWidth:Ue.defaultNode.linkPoints.lineWidth,fill:Ue.defaultNode.linkPoints.fill,stroke:Ue.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,B.__assign)({},Ue.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r),i=t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(r,t),i},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,i=e===void 0?{}:e,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=(0,B.__rest)(i,["top","left","right","bottom","size","r"]),v=this.getSize(r),g=v[0],C=v[1];o&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:-g/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:g/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:-C/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:C/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},i=(0,h.mix)({},t,e),a=this.getSize(r),o=i.width||a[0],s=i.height||a[1],l=(0,B.__assign)({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(r,t){var e=t.getContainer(),i=this.getOptions({}).style,a=this.getSize(r),o=t.get("keyShape");r.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:r.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=(0,h.mix)({},i,o.attr(),s);l=(0,h.mix)(l,r.style),this.updateShape(r,t,l,!1),this.updateLinkPoints(r,e)}},"single-node"),un.registerNode("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Ue.defaultNode.style.stroke,fill:Ue.defaultNode.style.fill,lineWidth:Ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ue.nodeLabel.style.fill,fontSize:Ue.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ue.defaultNode.linkPoints.size,lineWidth:Ue.defaultNode.linkPoints.lineWidth,fill:Ue.defaultNode.linkPoints.fill,stroke:Ue.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,B.__assign)({},Ue.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,i=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),s=i.width,l=i.height,u=i.show;if(u)var f=t.addShape("image",{attrs:(0,B.__assign)({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,i=e===void 0?{}:e,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=(0,B.__rest)(i,["top","left","right","bottom","size","r"]),v=this.getSize(r),g=v[0]/2,C=v[1]/2;o&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:-g,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:g,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:-C,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:C,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},i=(0,h.mix)({},t,e),a=this.getSize(r),o=a[0]/2,s=a[1]/2,l=(0,B.__assign)({x:0,y:0,rx:o,ry:s},i);return l},update:function(r,t){var e=t.getContainer(),i=this.getOptions({}).style,a=this.getSize(r),o={stroke:r.color,rx:a[0]/2,ry:a[1]/2},s=t.get("keyShape"),l=(0,h.mix)({},i,s.attr(),o);l=(0,h.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)}},"single-node"),un.registerNode("diamond",{options:{size:[80,80],style:{stroke:Ue.defaultNode.style.stroke,fill:Ue.defaultNode.style.fill,lineWidth:Ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ue.nodeLabel.style.fill,fontSize:Ue.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ue.defaultNode.linkPoints.size,lineWidth:Ue.defaultNode.linkPoints.lineWidth,fill:Ue.defaultNode.linkPoints.fill,stroke:Ue.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,B.__assign)({},Ue.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,i=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=i.width,l=i.height,u=i.show;if(u)var f=t.addShape("image",{attrs:(0,B.__assign)({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,i=e===void 0?{}:e,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=(0,B.__rest)(i,["top","left","right","bottom","size","r"]),v=this.getSize(r),g=v[0],C=v[1];o&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:-g/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:g/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:-C/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:C/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(r){var t=this.getSize(r),e=t[0],i=t[1],a=[["M",0,-i/2],["L",e/2,0],["L",0,i/2],["L",-e/2,0],["Z"]];return a},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},i=(0,h.mix)({},t,e),a=this.getPath(r),o=(0,B.__assign)({path:a},i);return o},update:function(r,t){var e=t.getContainer(),i=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),l=(0,h.mix)({},i,s.attr(),o);l=(0,h.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)}},"single-node"),un.registerNode("triangle",{options:{size:40,direction:"up",style:{stroke:Ue.defaultNode.style.stroke,fill:Ue.defaultNode.style.fill,lineWidth:Ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ue.nodeLabel.style.fill,fontSize:Ue.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ue.defaultNode.linkPoints.size,lineWidth:Ue.defaultNode.linkPoints.lineWidth,fill:Ue.defaultNode.linkPoints.fill,stroke:Ue.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,B.__assign)({},Ue.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(r,t){var e=this.getOptions(r),i=e.icon,a=i===void 0?{}:i,o=e.direction,s=this.getShapeStyle(r),l=r.direction||o,u=t.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),f=a.width,c=a.height,v=a.show,g=a.offset;if(v){var C=-f/2,O=-c/2;(l==="up"||l==="down")&&(O+=g),(l==="left"||l==="right")&&(C+=g),t.addShape("image",{attrs:(0,B.__assign)({x:C,y:O},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(r,t),u},drawLinkPoints:function(r,t){var e=this.getOptions(r),i=e.linkPoints,a=i===void 0?{}:i,o=e.direction,s=r.direction||o,l=a.top,u=a.left,f=a.right,c=a.bottom,v=a.size,g=a.r,C=(0,B.__rest)(a,["top","left","right","bottom","size","r"]),O=this.getSize(r),F=O[0];if(u){var G=null,Y=F*Math.sin(1/3*Math.PI),$=F*Math.sin(1/3*Math.PI);s==="up"?G=[-$,Y]:s==="down"?G=[-$,-Y]:s==="left"&&(G=[-$,$-Y]),G&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},C),{x:G[0],y:G[1],r:v/2||g||5}),className:"link-point-left",name:"link-point-left"})}if(f){var q=null,Y=F*Math.sin(1/3*Math.PI),$=F*Math.sin(1/3*Math.PI);s==="up"?q=[$,Y]:s==="down"?q=[$,-Y]:s==="right"&&(q=[$,$-Y]),q&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},C),{x:q[0],y:q[1],r:v/2||g||5}),className:"link-point-right",name:"link-point-right"})}if(l){var ut=null,Y=F*Math.sin(1/3*Math.PI),$=F*Math.sin(1/3*Math.PI);s==="up"?ut=[$-Y,-Y]:s==="left"?ut=[$,-Y]:s==="right"&&(ut=[-$,-Y]),ut&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},C),{x:ut[0],y:ut[1],r:v/2||g||5}),className:"link-point-top",name:"link-point-top"})}if(c){var kt=null,Y=F*Math.sin(1/3*Math.PI),$=F*Math.sin(1/3*Math.PI);s==="down"?kt=[-$+Y,Y]:s==="left"?kt=[$,Y]:s==="right"&&(kt=[-$,Y]),kt&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},C),{x:kt[0],y:kt[1],r:v/2||g||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(r){var t=this.getOptions(r).direction,e=r.direction||t,i=this.getSize(r),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return e==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:e==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:e==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},i=(0,h.mix)({},t,e),a=this.getPath(r),o=(0,B.__assign)({path:a},i);return o},update:function(r,t){var e=t.getContainer(),i=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),l=(0,h.mix)({},i,s.attr(),o);l=(0,h.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}),i=e.linkPoints,a=e.direction,o=r.direction||a,s=t.find(function(Qe){return Qe.get("className")==="link-point-left"}),l=t.find(function(Qe){return Qe.get("className")==="link-point-right"}),u=t.find(function(Qe){return Qe.get("className")==="link-point-top"}),f=t.find(function(Qe){return Qe.get("className")==="link-point-bottom"}),c=i,v=s||l||u||f;v&&(c=v.attr());var g=(0,h.mix)({},c,r.linkPoints),C=g.fill,O=g.stroke,F=g.lineWidth,G=g.size/2;G||(G=g.r);var Y=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},$=Y.left,q=Y.right,ut=Y.top,kt=Y.bottom,Nt=this.getSize(r),Wt=Nt[0],Ft={r:G,fill:C,stroke:O,lineWidth:F},ee=null,ve=Wt*Math.sin(1/3*Math.PI),fe=Wt*Math.sin(1/3*Math.PI);o==="up"?ee=[-fe,ve]:o==="down"?ee=[-fe,-ve]:o==="left"&&(ee=[-fe,fe-ve]),ee&&(s?!$&&$!==void 0?s.remove():s.attr((0,B.__assign)((0,B.__assign)({},Ft),{x:ee[0],y:ee[1]})):$&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Ft),{x:ee[0],y:ee[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var Te=null;o==="up"?Te=[fe,ve]:o==="down"?Te=[fe,-ve]:o==="right"&&(Te=[fe,fe-ve]),Te&&(l?!q&&q!==void 0?l.remove():l.attr((0,B.__assign)((0,B.__assign)({},Ft),{x:Te[0],y:Te[1]})):q&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Ft),{x:Te[0],y:Te[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Be=null;o==="up"?Be=[fe-ve,-ve]:o==="left"?Be=[fe,-ve]:o==="right"&&(Be=[-fe,-ve]),Be&&(u?!ut&&ut!==void 0?u.remove():u.attr((0,B.__assign)((0,B.__assign)({},Ft),{x:Be[0],y:Be[1]})):ut&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Ft),{x:Be[0],y:Be[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var ke=null;o==="down"?ke=[-fe+ve,ve]:o==="left"?ke=[fe,ve]:o==="right"&&(ke=[-fe,ve]),ke&&(f?!kt&&kt!==void 0?f.remove():f.attr((0,B.__assign)((0,B.__assign)({},Ft),{x:ke[0],y:ke[1]})):kt&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Ft),{x:ke[0],y:ke[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),un.registerNode("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Ue.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(r,t){var e=this.getOptions(r).preRect,i=e===void 0?{}:e,a=this.getShapeStyle(r),o=this.getSize(r),s=o[0],l=o[1],u=t.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),f=i.show,c=(0,B.__rest)(i,["show"]);return f&&t.addShape("rect",{attrs:(0,B.__assign)({x:-s/2,y:-l/2,height:l},c),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(r,t),this.drawStateIcon(r,t),this.drawLinkPoints(r,t),u},drawLogoIcon:function(r,t){var e=this.getOptions(r).logoIcon,i=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,f=i.y,c=i.offset,v=(0,B.__rest)(i,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,B.__assign)((0,B.__assign)({},v),{x:u||-o/2+s+c,y:f||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(r,t){var e=this.getOptions(r).stateIcon,i=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,f=i.y,c=i.offset,v=(0,B.__rest)(i,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,B.__assign)((0,B.__assign)({},v),{x:u||o/2-s+c,y:f||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,i=e===void 0?{}:e,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,f=i.r,c=(0,B.__rest)(i,["top","left","right","bottom","size","r"]),v=this.getSize(r),g=v[0],C=v[1];o&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:-g/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:g/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:-C/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},c),{x:0,y:C/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(r,t){var e=this.getOptions(r),i=e.labelCfg,a=i===void 0?{}:i,o=e.logoIcon,s=o===void 0?{}:o,l=e.descriptionCfg,u=l===void 0?{}:l,f=this.getSize(r),c=f[0],v=null,g=s.show,C=s.width,O=-c/2+a.offset;g&&(O=-c/2+C+a.offset);var F=a.style,G=u.style,Y=u.paddingTop;return(0,h.isString)(r.description)?(v=t.addShape("text",{attrs:(0,B.__assign)((0,B.__assign)({},F),{x:O,y:-5,text:r.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:(0,B.__assign)((0,B.__assign)({},G),{x:O,y:17+(Y||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0})):v=t.addShape("text",{attrs:(0,B.__assign)((0,B.__assign)({},F),{x:O,y:7,text:r.label}),draggable:!0}),v},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},i=(0,h.mix)({},t,e),a=this.getSize(r),o=i.width||a[0],s=i.height||a[1],l=(0,B.__assign)({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(r,t){var e=this.getOptions(r),i=e.style,a=i===void 0?{}:i,o=e.labelCfg,s=o===void 0?{}:o,l=e.descriptionCfg,u=l===void 0?{}:l,f=this.getSize(r),c=f[0],v=f[1],g=t.get("keyShape");g.attr((0,B.__assign)((0,B.__assign)({},a),{x:-c/2,y:-v/2,width:c,height:v}));var C=t.getContainer(),O=C.find(function(zr){return zr.get("className")==="rect-logo-icon"}),F=O?O.attr():{},G=(0,h.mix)({},F,r.logoIcon),Y=G.width;Y===void 0&&(Y=this.options.logoIcon.width);var $=r.logoIcon?r.logoIcon.show:void 0,q=s.offset,ut=-c/2+Y+q;!$&&$!==void 0&&(ut=-c/2+q);var kt=C.find(function(zr){return zr.get("className")==="node-label"}),Nt=C.find(function(zr){return zr.get("className")==="rect-description"});if(r.label)if(!kt)C.addShape("text",{attrs:(0,B.__assign)((0,B.__assign)({},s.style),{x:ut,y:r.description?-5:7,text:r.label}),className:"node-label",name:"node-label",draggable:!0});else{var Wt=r.labelCfg?r.labelCfg.style:{},Ft=(0,h.mix)({},kt.attr(),Wt);r.label&&(Ft.text=r.label),Ft.x=ut,(0,h.isString)(r.description)&&(Ft.y=-5),Nt&&(Nt.resetMatrix(),Nt.attr({x:ut})),kt.resetMatrix(),kt.attr(Ft)}if((0,h.isString)(r.description)){var ee=u.paddingTop;if(!Nt)C.addShape("text",{attrs:(0,B.__assign)((0,B.__assign)({},u.style),{x:ut,y:17+(ee||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var Wt=r.descriptionCfg?r.descriptionCfg.style:{},ve=(0,h.mix)({},Nt.attr(),Wt);(0,h.isString)(r.description)&&(ve.text=r.description),ve.x=ut,Nt.resetMatrix(),Nt.attr((0,B.__assign)((0,B.__assign)({},ve),{y:17+(ee||0)}))}}var fe=C.find(function(zr){return zr.get("className")==="pre-rect"});if(fe){var Te=(0,h.mix)({},fe.attr(),r.preRect);fe.attr((0,B.__assign)((0,B.__assign)({},Te),{x:-c/2,y:-v/2,height:v}))}if(O)if(!$&&$!==void 0)O.remove();else{var Be=G.width,ke=G.height,Qe=G.x,tr=G.y,rr=G.offset,Ze=(0,B.__rest)(G,["width","height","x","y","offset"]);O.attr((0,B.__assign)((0,B.__assign)({},Ze),{x:Qe||-c/2+Be+rr,y:tr||-ke/2,width:Be,height:ke}))}else $&&this.drawLogoIcon(r,C);var Ke=C.find(function(zr){return zr.get("className")==="rect-state-icon"}),wr=Ke?Ke.attr():{},br=(0,h.mix)({},wr,r.stateIcon);if(Ke){!br.show&&br.show!==void 0&&Ke.remove();var Ir=br.width,ke=br.height,Qe=br.x,tr=br.y,ir=br.offset,Mr=(0,B.__rest)(br,["width","height","x","y","offset"]);Ke.attr((0,B.__assign)((0,B.__assign)({},Mr),{x:Qe||c/2-Ir+ir,y:tr||-ke/2,width:Ir,height:ke}))}else br.show&&this.drawStateIcon(r,C);this.updateLinkPoints(r,C)}},"single-node"),un.registerNode("star",{options:{size:60,style:{stroke:Ue.defaultNode.style.stroke,fill:Ue.defaultNode.style.fill,lineWidth:Ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ue.nodeLabel.style.fill,fontSize:Ue.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ue.defaultNode.linkPoints.size,lineWidth:Ue.defaultNode.linkPoints.lineWidth,fill:Ue.defaultNode.linkPoints.fill,stroke:Ue.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,B.__assign)({},Ue.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,i=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=i.width,l=i.height,u=i.show;if(u)var f=t.addShape("image",{attrs:(0,B.__assign)({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,i=e===void 0?{}:e,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,f=i.size,c=i.r,v=(0,B.__rest)(i,["top","left","right","leftBottom","rightBottom","size","r"]),g=this.getSize(r),C=g[0];if(s){var O=Math.cos((18+72*0)/180*Math.PI)*C,F=Math.sin((18+72*0)/180*Math.PI)*C;t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},v),{x:O,y:-F,r:f/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(a){var O=Math.cos((18+72*1)/180*Math.PI)*C,F=Math.sin((18+72*1)/180*Math.PI)*C;t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},v),{x:O,y:-F,r:f/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){var O=Math.cos((18+72*2)/180*Math.PI)*C,F=Math.sin((18+72*2)/180*Math.PI)*C;t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},v),{x:O,y:-F,r:f/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(l){var O=Math.cos((18+72*3)/180*Math.PI)*C,F=Math.sin((18+72*3)/180*Math.PI)*C;t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},v),{x:O,y:-F,r:f/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var O=Math.cos((18+72*4)/180*Math.PI)*C,F=Math.sin((18+72*4)/180*Math.PI)*C;t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},v),{x:O,y:-F,r:f/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(r){for(var t=this.getSize(r),e=t[0],i=e*3/8,a=r.innerR||i,o=[],s=0;s<5;s++){var l=Math.cos((18+72*s)/180*Math.PI)*e,u=Math.sin((18+72*s)/180*Math.PI)*e,f=Math.cos((54+72*s)/180*Math.PI)*a,c=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",l,-u]):o.push(["L",l,-u]),o.push(["L",f,-c])}return o.push(["Z"]),o},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},i=(0,h.mix)({},t,e),a=this.getPath(r),o=(0,B.__assign)({path:a},i);return o},update:function(r,t){var e=t.getContainer(),i=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),l=(0,h.mix)({},i,s.attr(),o);l=(0,h.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}).linkPoints,i=t.find(function(ve){return ve.get("className")==="link-point-left"}),a=t.find(function(ve){return ve.get("className")==="link-point-right"}),o=t.find(function(ve){return ve.get("className")==="link-point-top"}),s=t.find(function(ve){return ve.get("className")==="link-point-left-bottom"}),l=t.find(function(ve){return ve.get("className")==="link-point-right-bottom"}),u=e,f=i||a||o||s||l;f&&(u=f.attr());var c=(0,h.mix)({},u,r.linkPoints),v=c.fill,g=c.stroke,C=c.lineWidth,O=c.size/2;O||(O=c.r);var F=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},G=F.left,Y=F.right,$=F.top,q=F.leftBottom,ut=F.rightBottom,kt=this.getSize(r),Nt=kt[0],Wt={r:O,fill:v,stroke:g,lineWidth:C},Ft=Math.cos((18+72*0)/180*Math.PI)*Nt,ee=Math.sin((18+72*0)/180*Math.PI)*Nt;a?!Y&&Y!==void 0?a.remove():a.attr((0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee})):Y&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Ft=Math.cos((18+72*1)/180*Math.PI)*Nt,ee=Math.sin((18+72*1)/180*Math.PI)*Nt,o?!$&&$!==void 0?o.remove():o.attr((0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee})):$&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Ft=Math.cos((18+72*2)/180*Math.PI)*Nt,ee=Math.sin((18+72*2)/180*Math.PI)*Nt,i?!G&&G!==void 0?i.remove():i.attr((0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee})):G&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Ft=Math.cos((18+72*3)/180*Math.PI)*Nt,ee=Math.sin((18+72*3)/180*Math.PI)*Nt,s?!q&&q!==void 0?s.remove():s.attr((0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee})):q&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),Ft=Math.cos((18+72*4)/180*Math.PI)*Nt,ee=Math.sin((18+72*4)/180*Math.PI)*Nt,l?!ut&&ut!==void 0?s.remove():l.attr((0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee})):ut&&t.addShape("circle",{attrs:(0,B.__assign)((0,B.__assign)({},Wt),{x:Ft,y:-ee}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node"),un.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(r,t){var e=this.shapeType,i=this.getShapeStyle(r);delete i.fill;var a=t.addShape(e,{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(r,a),a},drawClip:function(r,t){var e=this.getOptions(r).clipCfg;if(!!e.show){var i=e.type,a=e.x,o=e.y,s=e.style;if(i==="circle"){var l=e.r;t.setClip({type:"circle",attrs:(0,B.__assign)({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=e.width,f=e.height,c=a-u/2,v=o-f/2;t.setClip({type:"rect",attrs:(0,B.__assign)({x:c,y:v,width:u,height:f},s)})}else if(i==="ellipse"){var g=e.rx,C=e.ry;t.setClip({type:"ellipse",attrs:(0,B.__assign)({x:a,y:o,rx:g,ry:C},s)})}else if(i==="polygon"){var O=e.points;t.setClip({type:"polygon",attrs:(0,B.__assign)({points:O},s)})}else if(i==="path"){var F=e.path;t.setClip({type:"path",attrs:(0,B.__assign)({path:F},s)})}}},getShapeStyle:function(r){var t=this.getOptions(r).style,e=this.getSize(r),i=this.getOptions(r).img,a=e[0],o=e[1];t&&(a=t.width||e[0],o=t.height||e[1]);var s=(0,B.__assign)({x:-a/2,y:-o/2,width:a,height:o,img:i},t);return s},updateShapeStyle:function(r,t){var e=t.getContainer(),i=this.itemType+"-shape",a=e.find(function(s){return s.get("className")===i})||t.getKeyShape(),o=this.getShapeStyle(r);a&&a.attr(o)}},"single-node");function Iu(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Iu=function(t){return typeof t}:Iu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(n)}var ku=function(r){var t=r.x,e=r.y;return{x:t,y:e,centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}},I6=function(r){r===void 0&&(r=[]);var t=[],e=[];r.forEach(function(l){t.push(l.x),e.push(l.y)});var i=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,e),s=Math.max.apply(Math,e);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},y1=function(r,t){return Math.abs(r.centerX-t.centerX)*2<r.width+t.width&&Math.abs(r.centerY-t.centerY)*2<r.height+t.height},uc=function(r){var t=[],e={};return r.forEach(function(i){var a=i.x+"-"+i.y;i.id=a,e[a]=i}),(0,h.each)(e,function(i){t.push(i)}),t},Ou=function(r){return r=uc(r),r},m1=function(r,t){return[r,{x:r.x,y:t.y},t]},Bu=function(r,t){return r.width===0&&r.height===0?r:{centerX:r.centerX,centerY:r.centerY,minX:r.minX-t,minY:r.minY-t,maxX:r.maxX+t,maxY:r.maxY+t,height:r.height+2*t,width:r.width+2*t}},k6=function(r,t){var e=Math.abs(r.x-t.centerX),i=Math.abs(r.y-t.centerY);return e/t.width>i/t.height},hc=function(r,t){var e=k6(t,r);return e?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},fc=function(r,t){var e=Math.min(r.minX,t.minX),i=Math.min(r.minY,t.minY),a=Math.max(r.maxX,t.maxX),o=Math.max(r.maxY,t.maxY);return{centerX:(e+a)/2,centerY:(i+o)/2,minX:e,minY:i,maxX:a,maxY:o,height:o-i,width:a-e}},cc=function(r){var t=r.minX,e=r.minY,i=r.maxX,a=r.maxY;return[{x:t,y:e},{x:i,y:e},{x:i,y:a},{x:t,y:a}]},Du=function(r,t){var e=r.x,i=r.y;return e<t.minX||e>t.maxX||i<t.minY||i>t.maxY},O6=function(r,t){return t<r.minX||t>r.maxX?[]:[{x:t,y:r.minY},{x:t,y:r.maxY}]},B6=function(r,t){return t<r.minY||t>r.maxY?[]:[{x:r.minX,y:t},{x:r.maxX,y:t}]},D6=function(r,t){return O6(r,t.x).concat(B6(r,t.y))},Vs=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},F6=function(r,t){var e=-2,i=0;return t.forEach(function(a){a&&(r.x===a.x&&(i+=e),r.y===a.y&&(i+=e))}),i},x1=function(r,t,e,i,a){return Vs(r,t)+Vs(r,e)+F6(r,[t,e,i,a])},R6=function n(r,t,e,i,a){a===void 0&&(a=0),r.unshift(t[i]),e[i]&&e[i]!==i&&a<=100&&n(r,t,e,e[i],a+1)},N6=function(r,t){var e=r.indexOf(t);e>-1&&r.splice(e,1)},Fu=function(r,t,e,i){var a=t.x-r.x,o=t.y-r.y,s=i.x-e.x,l=i.y-e.y,u=(-o*(r.x-e.x)+a*(r.y-e.y))/(-s*o+a*l),f=(s*(r.y-e.y)-l*(r.x-e.x))/(-s*o+a*l);return u>=0&&u<=1&&f>=0&&f<=1},vc=function(r,t,e){if(e.width===0&&e.height===0)return!1;var i=cc(e),a=i[0],o=i[1],s=i[2],l=i[3];return Fu(r,t,a,o)||Fu(r,t,a,l)||Fu(r,t,o,s)||Fu(r,t,s,l)},Y6=function(r,t,e,i){var a=[];return r.forEach(function(o){o!==t&&(o.x===t.x||o.y===t.y)&&!vc(o,t,e)&&!vc(o,t,i)&&a.push(o)}),uc(a)},G6=function(r,t,e,i,a,o,s){var l=[],u=[t],f={},c={},v={};c[t.id]=0,v[t.id]=x1(t,e,t);var g={};r.forEach(function(F){g[F.id]=F});for(var C=function(){var G,Y=Infinity;if(u.forEach(function(q){v[q.id]<Y&&(Y=v[q.id],G=q)}),G===e){var $=[];return R6($,g,f,e.id),{value:$}}N6(u,G),l.push(G),Y6(r,G,i,a).forEach(function(q){if(l.indexOf(q)===-1){u.indexOf(q)===-1&&u.push(q);var ut=v[G.id]+Vs(G,q);c[q.id]&&ut>=c[q.id]||(f[q.id]=G.id,c[q.id]=ut,v[q.id]=c[q.id]+x1(q,e,t,o,s))}})};u.length;){var O=C();if(Iu(O)==="object")return O.value}return[t,e]},z6=function(r,t,e){return!(r.x===t.x&&t.x===e.x||r.y===t.y&&t.y===e.y)},X6=function(r,t,e,i){var a=Vs(r,t),o=Vs(e,t);a<i&&(i=a),o<i&&(i=o);var s={x:t.x-i/a*(t.x-r.x),y:t.y-i/a*(t.y-r.y)},l={x:t.x-i/o*(t.x-e.x),y:t.y-i/o*(t.y-e.y)};return[s,l]},b1=function(r,t){var e=[],i=r[0];return e.push("M"+i.x+" "+i.y),r.forEach(function(a,o){var s=r[o+1],l=r[o+2];if(s&&l)if(z6(a,s,l)){var u=X6(a,s,l,t),f=u[0],c=u[1];e.push("L"+f.x+" "+f.y),e.push("Q"+s.x+" "+s.y+" "+c.x+" "+c.y),e.push("L"+c.x+" "+c.y)}else e.push("L"+s.x+" "+s.y);else s&&e.push("L"+s.x+" "+s.y)}),e.join("")},V6=function(r,t,e,i,a){var o,s;if(!e||!e.getType())o=ku(r);else if(e.getType()==="combo"){var l=e.getKeyShape();o=l.getCanvasBBox()||ku(r),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=e.getBBox();if(!i||!i.getType())s=ku(t);else if(i.getType()==="combo"){var u=i.getKeyShape();s=u.getCanvasBBox()||ku(t),s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=i&&i.getBBox();if(y1(o,s))return Ou(m1(r,t));var f=Bu(o,a),c=Bu(s,a);if(y1(f,c))return Ou(m1(r,t));var v=hc(f,r),g=hc(c,t),C=I6([v,g]),O=fc(f,c),F=fc(f,C),G=fc(c,C),Y=[];Y=Y.concat(cc(F)),Y=Y.concat(cc(G));var $={x:(r.x+t.x)/2,y:(r.y+t.y)/2};[C,F,G].forEach(function(ut){Y=Y.concat(D6(ut,$).filter(function(kt){return Du(kt,f)&&Du(kt,c)}))}),[{x:v.x,y:g.y},{x:g.x,y:v.y}].forEach(function(ut){Du(ut,f)&&Du(ut,c)&&Y.push(ut)}),Y.unshift(v),Y.push(g),Y=uc(Y);var q=G6(Y,v,g,o,s,r,t);return q.unshift(r),q.push(t),Ou(q)};function Ru(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ru=function(t){return typeof t}:Ru=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(n)}var H6=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},W6=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},j6=function(r,t){return[r,t]},U6=function(r,t,e,i,a){return Ou(V6(r,t,e,i,a.offset))},Z6={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:H6,fallbackRoute:U6},az={maxAllowedDirectionChange:45,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:W6,fallbackRoute:j6},ua=function(r,t){var e=Math.floor(r/t);return e<0?0:e},K6=function(r,t,e){var i={};return r.forEach(function(a){if(a)for(var o=Bu(a.getBBox(),e),s=ua(o.minX,t);s<=ua(o.maxX,t);s+=1)for(var l=ua(o.minY,t);l<=ua(o.maxY,t);l+=1){var u=s+"-"+l;i[u]=!0}}),i},dc=function(r,t){var e=t.x-r.x,i=t.y-r.y;if(!e&&!i)return 0;var a=(360+Math.atan2(i,e)*180/Math.PI)%360;return a},w1=function(r,t){var e=Math.abs(r-t);return e>180?360-e:e},S1=function(r,t,e){for(var i=Infinity,a=0,o=t.length;a<o;a++){var s=e(r,t[a]);s<i&&(i=s)}return i},C1=function(r,t,e){var i=[];if(!t)return i;var a=e.directions,o=e.offset,s=t.getBBox(),l=Bu(t.getBBox(),o);for(var u in l)l[u]=ua(l[u],e.gridSize);var f=r.x>ua(s.minX,e.gridSize)&&r.x<ua(s.maxX,e.gridSize)&&r.y>ua(s.minY,e.gridSize)&&r.y<ua(s.maxY,e.gridSize);if(f)for(var c=0,v=a;c<v.length;c++)for(var g=v[c],C=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],u=0;u<4;u++){var O=C[u],F=Is(r,{x:r.x+g.stepX*l.width,y:r.y+g.stepY*l.height},O[0],O[1]);F&&!vc(r,F,t.getBBox())&&(F.id=F.x+"-"+F.y,i.push(F))}else{var F=hc(l,r);F.id=F.x+"-"+F.y,i.push(F)}return i},M1=function(r,t,e,i,a){var o=(0,Nn.default)(Z6,a);o.obstacles=o.obstacles||[];var s=K6(o.obstacles.concat([e,i]),o.gridSize,o.offset),l={x:ua(r.x,o.gridSize),y:ua(r.y,o.gridSize)},u={x:ua(t.x,o.gridSize),y:ua(t.y,o.gridSize)};r.id=l.x+"-"+l.y,t.id=u.x+"-"+u.y;var f=C1(l,e,o),c=C1(u,i,o);f.forEach(function(Wt){delete s[Wt.id]}),c.forEach(function(Wt){delete s[Wt.id]});for(var v={},g={},C={},O={},F={},G=0;G<f.length;G++){var Y=f[G];v[Y.id]=Y,O[Y.id]=0,F[Y.id]=S1(Y,c,o.distFunc)}for(var $=function(Ft,ee){var ve=dc(Ft,ee),fe;if(C[Ft.id]){var Be=dc({x:parseFloat(C[Ft.id].split("-")[0]),y:parseFloat(C[Ft.id].split("-")[1])},Ft);fe=w1(Be,ve)}else{var Te=dc(l,Ft);fe=w1(Te,ve)}return fe},q=function(Ft){var ee=[t],ve={x:parseFloat(Ft.split("-")[0]),y:parseFloat(Ft.split("-")[1]),id:Ft};for($(ve,u)&&ee.unshift({x:ve.x===u.x?t.x:ve.x*o.gridSize,y:ve.y===u.y?t.y:ve.y*o.gridSize});C[Ft]&&C[Ft]!==Ft;){var fe={x:parseFloat(Ft.split("-")[0]),y:parseFloat(Ft.split("-")[1]),id:Ft},Te=C[Ft],Be={x:parseFloat(Te.split("-")[0]),y:parseFloat(Te.split("-")[1]),id:Te},ke=$(Be,fe);ke&&ee.unshift({x:Be.x===fe.x?ee[0].x:Be.x*o.gridSize,y:Be.y===fe.y?ee[0].y:Be.y*o.gridSize}),Ft=Te}var Qe={x:parseFloat(Ft.split("-")[0]),y:parseFloat(Ft.split("-")[1]),id:Ft};return ee[0].x=Qe.x===l.x?r.x:ee[0].x,ee[0].y=Qe.y===l.y?r.y:ee[0].y,ee.unshift(r),ee},ut=o.maximumLoops,kt=function(){var Ft,ee=Infinity;for(var ve in v)F[ve]<=ee&&(ee=F[ve],Ft=v[ve]);if(!Ft)return"break";if(c.findIndex(function(Ze){return Ze.x===Ft.x&&Ze.y===Ft.y})>-1){var fe=q(Ft.id);return{value:fe}}delete v[Ft.id],g[Ft.id]=!0;for(var Te=0;Te<o.directions.length;Te++){var Be=o.directions[Te],ke={x:Ft.x+Be.stepX,y:Ft.y+Be.stepY,id:Ft.x+Be.stepX+"-"+(Ft.y+Be.stepY)};if(!g[ke.id]){var Qe=$(Ft,ke);if(!(Qe>o.maxAllowedDirectionChange)&&!s[ke.id]){v[ke.id]||(v[ke.id]=ke);var tr=o.distFunc(Ft,ke)+(isNaN(o.penalties[Qe])?o.gridSize:o.penalties[Qe]),rr=O[Ft.id]+tr;O[ke.id]&&rr>=O[ke.id]||(C[ke.id]=Ft.id,O[ke.id]=rr,F[ke.id]=rr+S1(ke,c,o.distFunc))}}}ut-=1};Object.keys(v).length>0&&ut>0;){var Nt=kt();if(Ru(Nt)==="object")return Nt.value;if(Nt==="break")break}return o.fallbackRoute(r,t,e,i,o)};un.registerEdge("polyline",{options:{color:Ue.defaultEdge.color,size:Ue.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Ue.defaultEdge.style.stroke,lineAppendWidth:Ue.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ue.edgeLabel.style.fill,fontSize:Ue.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:1e3,gridSize:10},stateStyles:(0,B.__assign)({},Ue.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r);e.radius===0&&delete e.radius;var i=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e});return i},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},i=(0,h.mix)({},t,e,r.style);r=this.getPathPoints(r),this.radius=i.radius,this.offset=i.offset;var a=r.startPoint,o=r.endPoint,s=this.getControlPoints(r),l=[a];s&&(l=l.concat(s)),l.push(o);var u=r.sourceNode,f=r.targetNode,c=i.radius,v=this.options.routeCfg;v.offset=i.offset;var g=this.getPath(l,u,f,c,v);((0,h.isArray)(g)&&g.length<=1||(0,h.isString)(g)&&g.indexOf("L")===-1)&&(g="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(g="M0 0, L0 0");var C=(0,h.mix)({},Ue.defaultEdge.style,i,{lineWidth:r.size,path:g});return C},updateShapeStyle:function(r,t){var e=t.getContainer(),i={stroke:r.color},a=e.find(function(Y){return Y.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var s=r.startPoint,l=r.endPoint,u=this.getControlPoints(r),f=[s];u&&(f=f.concat(u)),f.push(l);var c=(0,h.mix)({},i,a.attr(),r.style),v=r.sourceNode,g=r.targetNode,C=c.radius,O=this.options.routeCfg;O.offset=c.offset;var F=this.getPath(f,v,g,C,O);((0,h.isArray)(F)&&F.length<=1||(0,h.isString)(F)&&F.indexOf("L")===-1)&&(F="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(F="M0 0, L0 0");var G=(0,h.mix)(i,a.attr(),{lineWidth:o,path:F},r.style);a&&a.attr(G)},getPath:function(r,t,e,i,a){var o=a.offset;if(!o||r.length>2){if(i)return b1(r,i);var s=[];return(0,h.each)(r,function(c,v){v===0?s.push(["M",c.x,c.y]):s.push(["L",c.x,c.y])}),s}var l;if(i){l=M1(r[0],r[r.length-1],t,e,a);var u=b1(l,i);return u}l=M1(r[0],r[r.length-1],t,e,a);var f=ex(l);return f}},"single-edge");var $6={triangle:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=15),e===void 0&&(e=0);var i=e*2,a="M "+i+",0 L "+(i+t)+",-"+r/2+" L "+(i+t)+","+r/2+" Z";return a},vee:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=20),e===void 0&&(e=0);var i=e*2,a="M "+i+",0 L "+(i+t)+",-"+r/2+`
        L `+(i+2*t/3)+",0 L "+(i+t)+","+r/2+" Z";return a},circle:function(r,t){r===void 0&&(r=5),t===void 0&&(t=0);var e=t*2,i="M "+e+`, 0
            a `+r+","+r+" 0 1,0 "+r*2+`,0
            a `+r+","+r+" 0 1,0 "+-r*2+",0";return i},rect:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=10),e===void 0&&(e=0);var i=e*2,a="M "+i+","+-r/2+` 
        L `+(i+t)+","+-r/2+` 
        L `+(i+t)+","+r/2+` 
        L `+i+","+r/2+" Z";return a},diamond:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=0);var i=e*2,a="M "+i+`,0 
        L `+(i+t/2)+","+-r/2+` 
        L `+(i+t)+`,0 
        L `+(i+t/2)+","+r/2+" Z";return a},triangleRect:function(r,t,e,i,a,o){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+t+a,u="M "+s+",0 L "+(s+t)+",-"+r/2+" L "+(s+t)+","+r/2+` Z
            M `+l+", -"+e/2+`
            L `+(l+i)+" -"+e/2+`
            L `+(l+i)+" "+e/2+`
            L `+l+" "+e/2+`
            Z`;return u}},Q6={collapse:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r+e-4,t]]},expand:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r-e+2*e-4,t],["M",r-e+e,t-e+4],["L",r,t+e-4]]},upTriangle:function(r,t,e){var i=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-i,t+a],["L",r+i,t+a],["L",r,t-e],["Z"]]},downTriangle:function(r,t,e){var i=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-i,t-a],["L",r+i,t-a],["L",r,t+e],["Z"]]}},ls=un,J6={mat3:Sa.wO,mix:Rs.default,deepMix:Nn.default,transform:Sa.vs},q6=(0,B.__assign)((0,B.__assign)((0,B.__assign)((0,B.__assign)((0,B.__assign)((0,B.__assign)({},J6),yt),Bt),xt),Mt),bt),t9=q6,e9=function(){function n(r){this._cfgs=(0,Nn.default)(this.getDefaultCfgs(),r),this._events={},this.destroyed=!1}return n.prototype.getDefaultCfgs=function(){return{}},n.prototype.initPlugin=function(r){var t=this;t.set("graph",r);var e=t.getEvents(),i={};(0,zi.default)(e,function(a,o){var s=(0,su.default)(t,a);i[o]=s,r.on(o,s)}),this._events=i,this.init()},n.prototype.init=function(){},n.prototype.getEvents=function(){return{}},n.prototype.get=function(r){return this._cfgs[r]},n.prototype.set=function(r,t){this._cfgs[r]=t},n.prototype.destroy=function(){},n.prototype.destroyPlugin=function(){this.destroy();var r=this.get("graph"),t=this._events;(0,zi.default)(t,function(e,i){r.off(i,e)}),this._events=null,this._cfgs=null,this.destroyed=!0},n}(),Da=e9,E1="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",r9=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{img:E1}},r.prototype.init=function(){var t=this.get("graph"),e=t.get("minZoom"),i=t.get("container"),a=t.get("canvas").get("el"),o=t.get("width"),s=t.get("height"),l=this.get("img")||E1,u=(0,gn.Z)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),f=(0,gn.Z)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+l+`;
        user-select: none
        '></div>`);u.appendChild(f),(0,Vi.Z)(u,{width:o+"px",height:s+"px",left:i.offsetLeft+"px",top:i.offsetTop+"px"}),(0,Vi.Z)(f,{width:o/e+"px",height:s/e+"px",left:"0px",top:"0px"}),i.insertBefore(u,a),this.set("container",u),this.set("gridContainer",f)},r.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},r.prototype.updateGrid=function(t){var e=this.get("gridContainer"),i=t.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a="matrix("+i[0]+", "+i[1]+", "+i[3]+", "+i[4]+", 0, 0)";(0,Vi.Z)(e,{transform:a})},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){var t=this.get("graph"),e=t.get("container"),i=this.get("container");e.removeChild(i)},r}(Da),i9=r9,n9=d(34508),pc=d.n(n9);pc()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var a9=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},r.prototype.init=function(){var t=this.get("className"),e=(0,gn.Z)("<div class="+(t||"g6-component-contextmenu")+"></div>");(0,Vi.Z)(e,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),i.appendChild(e),this.set("menu",e)},r.prototype.onMenuShow=function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),!!t.item){var i=this.get("shouldBegin");if(!!i(t)){var a=this.get("itemTypes");if(t.item&&t.item.getType&&a.indexOf(t.item.getType())===-1){e.onMenuHide();return}if(!!t.item){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(t,l);(0,ki.default)(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var f=this.get("handleMenuClick");if(f){var c=function(Nt){f(Nt.target,t.item,l)};this.set("handleMenuClickWrapper",c),o.addEventListener("click",c)}var v=l.get("width"),g=l.get("height"),C=o.getBoundingClientRect(),O=this.get("offsetX")||0,F=this.get("offsetY")||0,G=l.getContainer().offsetTop,Y=l.getContainer().offsetLeft,$=t.canvasX+Y+O,q=t.canvasY+G+F;$+C.width>v&&($=t.canvasX-C.width-O+Y),q+C.height>g&&(q=t.canvasY-C.height-F+G),(0,Vi.Z)(o,{top:q+"px",left:$+"px",visibility:"visible"});var ut=function(Nt){e.onMenuHide()};document.body.addEventListener("click",ut),this.set("handler",ut)}}}},r.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");if(t){var i=this.get("menu");i.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}e&&document.body.removeEventListener("click",e)},r.prototype.onMenuHide=function(){var t=this.get("menu");t&&(0,Vi.Z)(t,{visibility:"hidden"}),this.removeMenuEventListener()},r.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(Da),o9=a9,A1=Math.max,s9="default",l9="keyShape",u9="delegate",T1="svg",h9=function(n){(0,B.__extends)(r,n);function r(){var t=n!==null&&n.apply(this,arguments)||this;return t.handleUpdateCanvas=(0,h.debounce)(function(e){var i=t;i.destroyed||i.updateCanvas()},100,!1),t}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,i=e.size,a=e.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=(0,gn.Z)(`
      <div
        class=`+e.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          border: 2px solid #1980ff'
        draggable=true>
      </div>`),u=0,f=0,c=!1,v=0,g=0,C=0,O=0,F=0,G=0;l.addEventListener("dragstart",function(Y){if(Y.dataTransfer){var $=new Image;$.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",Y.dataTransfer.setDragImage($,0,0),Y.dataTransfer.setData("text","view-port-minimap")}if(e.refresh=!1,Y.target===l){var q=l.style;v=parseInt(q.left,10),g=parseInt(q.top,10),C=parseInt(q.width,10),O=parseInt(q.height,10),!(C>i[0]||O>i[1])&&(G=a.getZoom(),F=t.get("ratio"),c=!0,u=Y.clientX,f=Y.clientY)}},!1),l.addEventListener("drag",function(Y){if(!(!c||(0,In.default)(Y.clientX)||(0,In.default)(Y.clientY))){var $=u-Y.clientX,q=f-Y.clientY;(v-$<0||v-$+C>=i[0])&&($=0),(g-q<0||g-q+O>=i[1])&&(q=0),v-=$,g-=q,(0,Vi.Z)(l,{left:v+"px",top:g+"px"}),a.translate($*G/F,q*G/F),u=Y.clientX,f=Y.clientY}},!1),l.addEventListener("dragend",function(){c=!1,e.refresh=!0},!1),this.set("viewport",l),s.appendChild(l)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("dx"),i=this.get("dy"),a=this.get("totaldx"),o=this.get("totaldy"),s=this.get("graph"),l=this.get("size"),u=s.get("width"),f=s.get("height"),c=s.getPointByCanvas(0,0),v=s.getPointByCanvas(u,f),g=this.get("viewport");g||this.initViewport();var C=s.getZoom(),O=(v.x-c.x)*t,F=(v.y-c.y)*t,G=c.x*t+a,Y=c.y*t+o,$=G+O,q=Y+F;G<0&&(O+=G,G=0),$>l[0]&&(O=O-($-l[0])),Y<0&&(F+=Y,Y=0),q>l[1]&&(F=F-(q-l[1])),this.set("ratio",t);var ut=G+"px",kt=Y+"px";(0,Vi.Z)(g,{left:ut,top:kt,width:O+"px",height:F+"px"})}},r.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),i=t.get("group");if(!i.destroyed){var a=i.clone();a.resetMatrix(),e.clear(),e.add(a);var o=t.get("renderer");o===T1&&this.updateVisible(a)}},r.prototype.updateVisible=function(t){var e=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var i=t.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),e.updateVisible(a)})}},r.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph;(0,zi.default)(e.getEdges(),function(i){t.updateOneEdgeKeyShape(i)}),(0,zi.default)(e.getNodes(),function(i){t.updateOneNodeKeyShape(i)}),this.clearDestroyedShapes()},r.prototype.updateOneNodeKeyShape=function(t){var e=this.get("canvas"),i=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox(),l=t.get("keyShape").clone(),u=l.attr(),f={x:s.centerX,y:s.centerY};o?f=Object.assign(u,f):(o=l,i.add(o));var c=o.get("type");(c==="rect"||c==="image")&&(f.x=s.minX,f.y=s.minY),o.attr(f),t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph;(0,zi.default)(e.getEdges(),function(i){t.updateOneEdgeKeyShape(i)}),(0,zi.default)(e.getNodes(),function(i){t.updateOneNodeDelegateShape(i)}),this.clearDestroyedShapes()},r.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(!(!e||e.length===0))for(var i=e.length-1;i>=0;i--){var a=t[e[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[e[i]])}},r.prototype.updateOneEdgeKeyShape=function(t){var e=this.get("canvas"),i=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")];if(o){var s=t.get("keyShape").attr("path");o.attr("path",s)}else o=t.get("keyShape").clone(),i.add(o),o.toBack();t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateOneNodeDelegateShape=function(t){var e=this.get("canvas"),i=e.get("children")[0]||e.addGroup(),a=this.get("delegateStyle"),o=this.get("itemMap")||{},s=o[t.get("id")],l=t.getBBox();if(s){var u={x:l.minX,y:l.minY,width:l.width,height:l.height};s.attr(u)}else s=i.addShape("rect",{attrs:(0,B.__assign)({x:l.minX,y:l.minY,width:l.width,height:l.height},a),name:"minimap-node-shape"});t.isVisible()||s.hide(),s.exist=!0,o[t.get("id")]=s,this.set("itemMap",o)},r.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),i=t.get("size"),a=t.get("className"),o=t.get("container"),s=(0,gn.Z)("<div class='"+a+"' style='width: "+i[0]+"px; height: "+i[1]+"px; overflow: hidden'></div>");(0,ki.default)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):e.get("container").appendChild(s),t.set("container",s);var l=(0,gn.Z)('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l);var u,f=e.get("renderer");f===T1?u=new Ds.Z({container:l,width:i[0],height:i[1]}):u=new Do.Z({container:l,width:i[0],height:i[1]}),t.set("canvas",u),t.updateCanvas()},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case s9:this.updateGraphShapes();break;case l9:this.updateKeyShapes();break;case u9:this.updateDelegateShapes();break;default:break}var l=a.get("children")[0];if(!!l){l.resetMatrix();var u=l.getCanvasBBox(),f=e.get("canvas").getBBox(),c=f.width,v=f.height;Number.isFinite(u.width)&&(c=A1(u.width,c),v=A1(u.height,v)),c+=2*s,v+=2*s;var g=Math.min(i[0]/c,i[1]/v),C=[1,0,0,0,1,0,0,0,1],O=0,F=0;Number.isFinite(u.minX)&&(O=-u.minX),Number.isFinite(u.minY)&&(F=-u.minY);var G=(i[0]-(c-2*s)*g)/2,Y=(i[1]-(v-2*s)*g)/2;C=Oa(C,[["t",O,F],["s",g,g],["t",G,Y]]),l.setMatrix(C),this.set("ratio",g),this.set("totaldx",G+O*g),this.set("totaldy",Y+F*g),this.set("dx",G),this.set("dy",Y),this.updateViewport()}}}}},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},r}(Da),f9=h9;function Fa(n,r,t){var e=n.x-r.x,i=n.y-r.y;return!t||Math.abs(e)>t||Math.abs(i)>t?Math.sqrt(e*e+i*i):t}function c9(n,r){return n.x*r.x+n.y*r.y}function _1(n,r){var t=(r.source.y-r.target.y)/(r.source.x-r.target.x),e=(t*t*r.source.x+t*(n.y-r.source.y)+n.x)/(t*t+1),i=t*(e-r.source.x)+r.source.y;return{x:e,y:i}}var v9=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},r.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick"),i=function(){e&&e(),t.refreshPositions()};this.set("tick",i)},r.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var i=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(q){(q.x===null||!q.y===null||q.x===void 0||!q.y===void 0)&&(s=!0),o[q.id]=q}),s)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",o);var l=e.get("divisions"),u=e.get("divRate"),f=e.divideEdges(l);e.set("edgePoints",f);var c=e.getEdgeBundles();e.set("edgeBundles",c);for(var v=e.get("cycles"),g=e.get("iterations"),C=e.get("iterRate"),O=e.get("lambda"),F=0;F<v;F++){for(var G=function(ut){var kt=[];i.forEach(function(Nt,Wt){if(Nt.source!==Nt.target){var Ft=o[Nt.source],ee=o[Nt.target];kt[Wt]=e.getEdgeForces({source:Ft,target:ee},Wt,l,O);for(var ve=0;ve<l+1;ve++)f[Wt][ve].x+=kt[Wt][ve].x,f[Wt][ve].y+=kt[Wt][ve].y}})},Y=0;Y<g;Y++)G(Y);O=O/2,l*=u,g*=C,f=e.divideEdges(l),e.set("edgePoints",f)}i.forEach(function(q,ut){q.source!==q.target&&(q.shape="polyline",q.type="polyline",q.controlPoints=f[ut].slice(1,f[ut].length-1))});var $=e.get("graph");$.refresh()}},r.prototype.updateBundling=function(t){var e=this,i=t.data;if(i&&e.set("data",i),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach(function(o){e.set(o,t[o])}),t.onTick){var a=this.get("graph");e.set("tick",function(){t.onTick(),a.refresh()})}e.bundling(i)},r.prototype.divideEdges=function(t){var e=this,i=e.get("data").edges,a=e.get("nodeIdMap"),o=e.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){(!o[l]||o[l]===void 0)&&(o[l]=[]);var u=a[s.source],f=a[s.target];if(t===1)o[l].push({x:u.x,y:u.y}),o[l].push({x:.5*(u.x+f.x),y:.5*(u.y+f.y)}),o[l].push({x:f.x,y:f.y});else{var c=0;!o[l]||o[l]===[]?c=Fa({x:u.x,y:u.y},{x:f.x,y:f.y}):c=e.getEdgeLength(o[l]);var v=c/(t+1),g=v,C=[{x:u.x,y:u.y}];o[l].forEach(function(O,F){if(F!==0){for(var G=Fa(O,o[l][F-1]);G>g;){var Y=g/G,$={x:o[l][F-1].x,y:o[l][F-1].y};$.x+=Y*(O.x-o[l][F-1].x),$.y+=Y*(O.y-o[l][F-1].y),C.push($),G-=g,g=v}g-=G}}),C.push({x:f.x,y:f.y}),o[l]=C}}),o},r.prototype.getEdgeLength=function(t){var e=0;return t.forEach(function(i,a){a!==0&&(e+=Fa(i,t[a-1]))}),e},r.prototype.getEdgeBundles=function(){var t=this,e=t.get("data"),i=e.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var f=o[l.source],c=o[l.target];i.forEach(function(v,g){if(!(g<=u)){var C=o[v.source],O=o[v.target],F=t.getBundleScore({source:f,target:c},{source:C,target:O});F>=a&&(s[u].push(g),s[g].push(u))}})}),s},r.prototype.getBundleScore=function(t,e){var i=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=Fa({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=Fa({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y});var a=i.getAngleScore(t,e),o=i.getScaleScore(t,e),s=i.getPositionScore(t,e),l=i.getVisibilityScore(t,e);return a*o*s*l},r.prototype.getAngleScore=function(t,e){var i=c9({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return i/(t.length*e.length)},r.prototype.getScaleScore=function(t,e){var i=(t.length+e.length)/2,a=2/(i/Math.min(t.length,e.length)+Math.max(t.length,e.length)/i);return a},r.prototype.getPositionScore=function(t,e){var i=(t.length+e.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},s=Fa(a,o);return i/(i+s)},r.prototype.getVisibilityScore=function(t,e){var i=this.getEdgeVisibility(t,e),a=this.getEdgeVisibility(e,t);return i<a?i:a},r.prototype.getEdgeVisibility=function(t,e){var i=_1(e.source,t),a=_1(e.target,t),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Fa(o,s)/Fa(i,a))},r.prototype.getEdgeForces=function(t,e,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(Fa(t.source,t.target)*(i+1)),f=[{x:0,y:0}],c=1;c<i;c++){var v={x:0,y:0},g=o.getSpringForce({pre:s[e][c-1],cur:s[e][c],next:s[e][c+1]},u),C=o.getElectrostaticForce(c,e);v.x=a*(g.x+C.x),v.y=a*(g.y+C.y),f.push(v)}return f.push({x:0,y:0}),f},r.prototype.getSpringForce=function(t,e){var i=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return i*=e,a*=e,{x:i,y:a}},r.prototype.getElectrostaticForce=function(t,e){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[e],u={x:0,y:0};return l.forEach(function(f){var c={x:s[f][t].x-s[e][t].x,y:s[f][t].y-s[e][t].y};if(Math.abs(c.x)>a||Math.abs(c.y)>a){var v=Fa(s[f][t],s[e][t]),g=1/v;u.x+=c.x*g,u.y+=c.y*g}}),u},r.prototype.isTicking=function(){return this.get("ticking")},r.prototype.getSimulation=function(){return this.get("forceSimulation")},r.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),n.prototype.destroy.call(this)},r}(Da),d9=v9,Nu=.05,P1={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},p9=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,on.d9)(P1),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},r.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var i=t.get("d");t.set("molecularParam",(i+1)*e)},r.prototype.createDelegate=function(t){var e=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(t),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){e.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=e.get("graph"),a,o=e.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Nu:a=1/(1-Nu);var u=e.get("maxR"),f=e.get("minR"),c=e.get("r");(c>(u||i.get("height"))&&a>1||c<(f||i.get("height")*.05)&&a<1)&&(a=1),c*=a,e.set("r",c),e.set("r2",c*c);var v=e.get("d");e.set("molecularParam",(v+1)*c),e.set("delegateCenterDiff",void 0),e.magnify(t,l)}},r.prototype.scaleRByDrag=function(t){var e=this;if(!!t){var i=e.get("dragPrePos"),a=e.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-i.x<0?o=1-Nu:o=1/(1-Nu);var l=e.get("maxR"),u=e.get("minR"),f=e.get("r");(f>(l||a.get("height"))&&o>1||f<(u||a.get("height")*.05)&&o<1)&&(o=1),f*=o,e.set("r",f),e.set("r2",f*f);var c=e.get("d");e.set("molecularParam",(c+1)*f),e.magnify(t,s),e.set("dragPrePos",{x:t.x,y:t.y})}},r.prototype.scaleDByWheel=function(t){var e=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=0;t.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=e.get("d"),o=a+i,s=e.get("maxD"),l=e.get("minD");if(o<s&&o>l){e.set("d",o);var u=e.get("r");e.set("molecularParam",(o+1)*u);var f=e.get("delegate"),c=f?{x:f.attr("x"),y:f.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,c)}}},r.prototype.scaleDByDrag=function(t){var e=this,i=e.get("dragPrePos"),a=t.x-i.x>0?.1:-.1,o=e.get("d"),s=o+a,l=e.get("maxD"),u=e.get("minD");if(s<l&&s>u){e.set("d",s);var f=e.get("r");e.set("molecularParam",(s+1)*f),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},r.prototype.magnify=function(t,e){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),f=i.get("r2"),c=i.get("d"),v=i.get("molecularParam"),g=a.getNodes(),C=g.length,O=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(O=i.get("cacheCenter"));var F=i.get("delegateCenterDiff");F&&(O.x+=F.x,O.y+=F.y),i.updateDelegate(O,u);for(var G=0;G<C;G++){var Y=g[G].getModel(),$=Y.x,q=Y.y;if(!(isNaN($)||isNaN(q))){var ut=($-O.x)*($-O.x)+(q-O.y)*(q-O.y);if(!isNaN(ut)&&ut<f&&ut!==0){var kt=Math.sqrt(ut),Nt=v*kt/(c*kt+u),Wt=($-O.x)/kt,Ft=(q-O.y)/kt;if(Y.x=Wt*Nt+O.x,Y.y=Ft*Nt+O.y,s[Y.id]||(s[Y.id]={x:$,y:q,texts:[]}),o.push(Y),l&&2*kt<u)for(var ee=g[G],ve=ee.getContainer(),fe=ve.getChildren(),Te=fe.length,Be=0;Be<Te;Be++){var ke=fe[Be];ke.get("type")==="text"&&(s[Y.id].texts.push({visible:ke.get("visible"),shape:ke}),ke.set("visible",!0))}}}}a.refreshPositions()},r.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),i=t.get("cachedOriginPositions"),a=e.length,o=0;o<a;o++){var s=e[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var f=u.texts.length,c=0;c<f;c++){var v=u.texts[c];v.shape.set("visible",v.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},r.prototype.updateParams=function(t){var e=this,i=t.r,a=t.d,o=t.trigger,s=t.minD,l=t.maxD,u=t.minR,f=t.maxR,c=t.scaleDBy,v=t.scaleRBy;isNaN(t.r)||(e.set("r",i),e.set("r2",i*i)),isNaN(a)||e.set("d",a),isNaN(l)||e.set("maxD",l),isNaN(s)||e.set("minD",s),isNaN(f)||e.set("maxR",f),isNaN(u)||e.set("minR",u);var g=e.get("d"),C=e.get("r");if(e.set("molecularParam",(g+1)*C),(o==="mousemove"||o==="click"||o==="drag")&&e.set("trigger",o),c==="drag"||c==="wheel"||c==="unset"){e.set("scaleDBy",c),e.get("delegate").remove(),e.get("delegate").destroy();var O=e.get("dPercentText");O&&(O.remove(),O.destroy())}if(v==="drag"||v==="wheel"||v==="unset"){e.set("scaleRBy",v),e.get("delegate").remove(),e.get("delegate").destroy();var O=e.get("dPercentText");O&&(O.remove(),O.destroy())}},r.prototype.updateDelegate=function(t,e){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||P1;s=l.addShape("circle",{attrs:(0,B.__assign)({r:e/1.5,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(C){a.scaleRByWheel(C)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){a.scaleRByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(C){i.scaleDByWheel(C)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){i.scaleDByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:e/1.5});if(a.get("showDPercent")){var f=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),c=a.get("dPercentText"),v=t.y+e/1.5+16;if(!c||c.destroyed){var g=o.get("group");c=g.addShape("text",{attrs:{text:f+"%",x:t.x,y:v,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",c)}else c.attr({text:f+"%",x:t.x,y:v})}a.set("delegate",s)},r.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},r.prototype.destroy=function(){this.clear()},r}(Da),g9=p9;pc()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var y9=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `}}},r.prototype.init=function(){var t=this,e=this.get("graph"),i=this.get("getContent"),a=i(e),o=a;(0,on.HD)(a)&&(o=(0,gn.Z)(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(c){var v=c.path.filter(function(C){return C.nodeName==="LI"});if(v.length!==0){var g=v[0].getAttribute("code");!g||(u?u(g,e):t.handleDefaultOperator(g,e))}});var f=this.get("position");f&&(0,Vi.Z)(o,{top:f.y+"px",left:f.x+"px"}),this.bindUndoRedo()},r.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!e||!i||!a||!o||t.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,f=l.length,c=u.length;f===1?(e.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),i.removeAttribute("style")),c===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},r.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(!(!e||e.length===0)){var i=e.pop();if(i){var a=i.action;t.pushStack(a,(0,on.d9)(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var f=t.findById(u.id);u.visible?t.showItem(f,!1):t.hideItem(f,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateItem(u.id,u,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var f=u.itemType;delete u.itemType,t.addItem(f,u,!1)})});break}case"add":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.removeItem(u.id,!1)})});break;default:}}}},r.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(!(!e||e.length===0)){var i=e.pop();if(i){var a=i.action,o=i.data.after;if(t.pushStack(a,(0,on.d9)(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var f=t.findById(u.id);u.visible?t.showItem(f,!1):t.hideItem(f,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateItem(u.id,u,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(s){t.removeItem(s.id,!1)}),o.nodes&&o.nodes.forEach(function(s){t.removeItem(s.id,!1)}),o.combos&&o.combos.forEach(function(s){t.removeItem(s.id,!1)});break;case"add":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var f=u.itemType;delete u.itemType,t.addItem(f,u,!1)})});break}default:}}}},r.prototype.handleDefaultOperator=function(t,e){var i=e.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":{var a=1+.05*5;if(a*i>5)return;e.zoomTo(i*1.1);break}case"zoomIn":{var o=1-.05*5;if(o*i<.3)return;e.zoomTo(i*.9);break}case"realZoom":e.zoomTo(1);break;case"autoZoom":e.fitView([20,20]);break;default:}},r.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}var i=this.get("handleClick");i&&t.removeEventListener("click",i)},r}(Da),m9=y9;pc()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var x9=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+e.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+e.item.getID()+`</span>
        `},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},r.prototype.init=function(){var t=this.get("className")||"g6-component-tooltip",e=(0,gn.Z)("<div class="+t+"></div>"),i=this.get("container");i||(i=this.get("graph").get("container")),(0,Vi.Z)(e,{position:"absolute",visibility:"hidden"}),i.appendChild(e),this.set("tooltip",e)},r.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!(t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1)){var i=t.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},r.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},r.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},r.prototype.showTooltip=function(t){if(!!t.item){var e=this.get("itemTypes");if(!(t.item.getType&&e.indexOf(t.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,ki.default)(o)?i.innerHTML=o:i.innerHTML=o.outerHTML,this.updatePosition(t)}}},r.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&(0,Vi.Z)(t,{visibility:"hidden"})},r.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),i=this.get("tooltip");if(!e(t)){(0,Vi.Z)(i,{visibility:"hidden"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,f=a.getPointByClient(t.clientX,t.clientY),c=a.getCanvasByPoint(f.x,f.y),v=c.x,g=c.y;v+=l,g+=u;var C=i.getBoundingClientRect();v+C.width>o&&(v=v-C.width-l),g+C.height>s&&(g=g-C.height-u),(0,Vi.Z)(i,{left:v+"px",top:g+"px",visibility:"visible"})},r.prototype.hide=function(){this.onMouseLeave()},r.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(Da),b9=x9,L1=d(2005);function w9(n){return(0,h.map)(n,function(r,t){var e=t===0?"M":"L",i=r[0],a=r[1];return[e,i,a]})}function I1(n){return w9(n)}function S9(n){if(n.length<=2)return I1(n);var r=[];(0,h.each)(n,function(o){(0,h.isEqual)(o,r.slice(r.length-2))||r.push(o[0],o[1])});var t=qs.catmullRom2Bezier(r,!1),e=(0,h.head)(n),i=e[0],a=e[1];return t.unshift(["M",i,a]),t}function C9(n,r,t,e){e===void 0&&(e=!0);var i=new Qr.Linear({values:n}),a=new Qr.Category({values:(0,h.map)(n,function(s,l){return l})}),o=(0,h.map)(n,function(s,l){return[a.scale(l)*r,t-i.scale(s)*t]});return e?S9(o):I1(o)}function M9(n,r,t){for(var e=new Qr.Linear({values:n}),i=new Qr.Category({values:(0,h.map)(n,function(c,v){return v})}),a=(0,h.map)(n,function(c,v){return[i.scale(v)*r,t-e.scale(c)*t]}),o=[],s=0;s<a.length;s++){var l=a[s],u={x:l[0],y:l[1],y0:t,size:5},f=T9(u);o.push.apply(o,f)}return _9(o)}function E9(n,r){var t=new Qr.Linear({values:n}),e=Math.max(0,t.min);return r-t.scale(e)*r}function A9(n,r,t,e){var i=(0,B.__spreadArrays)(n),a=E9(e,t);return i.push(["L",r,a]),i.push(["L",0,a]),i.push(["Z"]),i}function T9(n){var r=n.x,t=n.y,e=n.y0,i=n.size,a,o;(0,L1.isArray)(t)?(a=t[0],o=t[1]):(a=e,o=t);var s,l;(0,L1.isArray)(r)?(s=r[0],l=r[1]):(s=r-i/2,l=r+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function _9(n,r){r===void 0&&(r=!0);var t=[],e=n[0];t.push(["M",e.x,e.y]);for(var i=1,a=n.length;i<a;i++)t.push(["L",n[i].x,n[i].y]);return r&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}var oz={opacity:.5},P9={stroke:"#C5C5C5",strokeOpacity:.85},L9={fill:"#CACED4",opacity:.85},I9=function(){function n(r){var t=r.x,e=t===void 0?0:t,i=r.y,a=i===void 0?0:i,o=r.width,s=o===void 0?200:o,l=r.height,u=l===void 0?26:l,f=r.smooth,c=f===void 0?!0:f,v=r.isArea,g=v===void 0?!1:v,C=r.data,O=C===void 0?[]:C,F=r.lineStyle,G=r.areaStyle,Y=r.group,$=r.interval,q=$===void 0?null:$;this.group=Y,this.x=e,this.y=a,this.width=s,this.height=u,this.data=O,this.smooth=c,this.isArea=g,this.lineStyle=Object.assign({},P9,F),this.areaStyle=Object.assign({},L9,G),this.intervalConfig=q,this.renderLine()}return n.prototype.renderLine=function(){var r=this,t=r.x,e=r.y,i=r.width,a=r.height,o=r.data,s=r.smooth,l=r.isArea,u=r.backgroundStyle,f=r.lineStyle,c=r.areaStyle,v=this.group.addGroup({name:"trend-group"});if(o){var g=C9(o,i,a,s);if(v.addShape("path",{attrs:(0,B.__assign)({path:g},f)}),l){var C=A9(g,i,a,o);v.addShape("path",{attrs:(0,B.__assign)({path:C},c)})}}this.intervalConfig&&v.addShape("path",{attrs:(0,B.__assign)({path:M9(this.intervalConfig.data,i,a)},this.intervalConfig.style)}),v.move(t,e)},n.prototype.destory=function(){this.group.destroy()},n}(),k9=I9,O9={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},B9={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},D9=function(){function n(r){var t=r.group,e=r.name,i=r.type,a=r.x,o=a===void 0?0:a,s=r.y,l=s===void 0?0:s,u=r.width,f=u===void 0?2:u,c=r.height,v=c===void 0?24:c,g=r.style,C=g===void 0?{}:g;this.group=t,this.name=e,this.handleType=i,this.x=o,this.y=l,this.width=f,this.height=v,i==="trend"?this.style=(0,B.__assign)((0,B.__assign)({},O9),C):i==="simple"&&(this.style=(0,B.__assign)((0,B.__assign)({},B9),C)),this.renderHandle()}return n.prototype.setX=function(r){this.setXY(r,void 0)},n.prototype.setY=function(r){this.setXY(void 0,r)},n.prototype.setXY=function(r,t){(0,h.isNumber)(r)&&(this.x=r),(0,h.isNumber)(t)&&(this.y=t),this.updateXY()},n.prototype.renderHandle=function(){var r=this,t=r.width,e=r.height,i=r.style,a=r.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,f=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:o,stroke:s,radius:l,opacity:u,cursor:f},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:f},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:f},name:a+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:f},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:f},name:a+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},n.prototype.bindEvents=function(){var r=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",function(){var e=r.style.highLightFill;r.background.attr("fill",e)}),this.handleGroup.on(t+"-handler:mouseleave",function(){var e=r.style.fill;r.background.attr("fill",e)})},n.prototype.show=function(){this.handleGroup.show()},n.prototype.hide=function(){this.handleGroup.hide()},n.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},n}(),k1=D9,F9=function(){function n(r){this.config=(0,h.deepMix)({},r),this.init()}return n.prototype.update=function(r){this.config=(0,h.deepMix)({},this.config,r),this.updateElement(),this.renderMarker()},n.prototype.init=function(){this.initElement(),this.renderMarker()},n.prototype.initElement=function(){var r=this.config,t=r.group,e=r.style;this.circle=t.addShape("circle",{attrs:(0,B.__assign)({x:this.config.x,y:this.config.y,r:this.config.r},e)}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=t.addGroup();var i=1/4*this.config.r,a=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:i*2.5,height:a,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:i,height:a,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-a/2,width:i,height:a,fill:"#ccc"},name:"playPauseBtn"})},n.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var r=1/4*this.config.r,t=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-t/2),this.pauseLeftMarker.attr("width",r),this.pauseLeftMarker.attr("height",t),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-t/2),this.pauseRightMarker.attr("width",r),this.pauseRightMarker.attr("height",t)},n.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},n.prototype.getStartMarkerPath=function(){var r=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-r/Math.sqrt(3)/2,this.config.y-r/2],["L",this.config.x+r/Math.sqrt(3),this.config.y],["L",this.config.x-r/Math.sqrt(3)/2,this.config.y+r/2]]},n}(),R9=F9,N9="#ccc",Y9="green",G9={fill:"#607889",stroke:"#607889"},z9={fill:"#fff"},X9={fill:"green"},V9={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},Hs=110,Ra=50,H9=function(){function n(r){this.controllerCfg=(0,h.deepMix)({},V9,r),this.group=r.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.init()}return n.prototype.init=function(){this.renderPlayButton()},n.prototype.getNextMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r+e,t],["L",r,t+e]]},n.prototype.getPreMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r-e,t],["L",r,t+e]]},n.prototype.renderPlayButton=function(){var r=this.controllerCfg,t=r.width,e=r.height,i=r.x,a=r.y,o=r.hiddleToggle,s=r.fill,l=s===void 0?N9:s,u=r.stroke,f=u===void 0?Y9:u,c=r.playBtnStyle,v=c===void 0?G9:c,g=r.preBtnStyle,C=g===void 0?z9:g,O=r.nextBtnStyle,F=O===void 0?X9:O,G=e/2-5,Y=a+10,$=this.group.addShape("rect",{attrs:{x:i,y:Y,width:t,height:e,stroke:f,fill:l},name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:Y,r:G}):this.playButton=new R9({group:this.group,x:t/2,y:Y+G+5,r:G,isPlay:this.isPlay,style:v}),this.group.addShape("path",{attrs:(0,B.__assign)({path:this.getPreMarkerPath(t/2-5*G,Y+G+5,G*.5)},C),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,B.__assign)({path:this.getPreMarkerPath(t/2-4.5*G,Y+G+5,G*.5)},C),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,B.__assign)({path:this.getNextMarkerPath(t/2+5*G,Y+G+5,G*.5)},F),name:"nextStepBtn"}),this.group.addShape("path",{attrs:(0,B.__assign)({path:this.getNextMarkerPath(t/2+4.5*G,Y+G+5,G*.5)},F),name:"nextStepBtn"}),$.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent()},n.prototype.renderSpeedBtn=function(){var r=this.controllerCfg,t=r.y,e=r.width,i=r.hiddleToggle,a=this.group.addGroup({name:"speed-group"});this.speedGroup=a;for(var o=1,s=[],l=9,u=0;u<5;u++){var f=t+15+u*(u+1)+o;a.addShape("rect",{attrs:{x:e-(i?Ra:Hs),y:f,width:15,height:2,fill:"#ccc"},speed:l,name:"speed-rect"}),this.speedAxisY.push(f),s.push(l),l=l-2,o++}for(var u=0;u<4;u++)a.addShape("rect",{attrs:{x:e-(i?Ra:Hs),y:this.speedAxisY[u]+2,width:15,height:2*u+1,fill:"#fff",opacity:.3},speed:s[u]-1,name:"speed-rect"});this.speedText=a.addShape("text",{attrs:{x:e-(i?Ra:Hs)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc"}}),this.speedPoint=a.addShape("path",{attrs:{path:this.getPath(e-(i?Ra:Hs),this.speedAxisY[4]),fill:"#ccc"}})},n.prototype.getPath=function(r,t){return[["M",r,t],["L",r-12,t-6],["L",r-12,t+6],["Z"]]},n.prototype.renderToggleTime=function(){var r=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:r-Ra,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",r-Ra+3,this.speedAxisY[1]+6],["L",r-Ra+7,this.speedAxisY[1]+10],["L",r-Ra+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:"\u5355\u4E00\u65F6\u95F4",x:r-Ra+20,y:this.speedAxisY[1]+15,fill:"#ccc"}})},n.prototype.bindEvent=function(){var r=this,t=this.controllerCfg,e=t.width,i=t.hiddleToggle;this.speedGroup.on("speed-rect:click",function(a){r.speedPoint.attr("path",r.getPath(e-(i?Ra:Hs),a.y)),r.currentSpeed=a.target.get("speed"),r.speedText.attr("text",r.currentSpeed+".0X"),r.group.emit("timebarConfigChanged",{speed:r.currentSpeed,type:r.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(a){var o=a.target.get("isChecked");o?(r.checkedIcon.hide(),r.checkedText.attr("text","\u5355\u4E00\u65F6\u95F4"),r.currentType="range"):(r.checkedIcon.show(),r.checkedText.attr("text","\u65F6\u95F4\u8303\u56F4"),r.currentType="single"),a.target.set("isChecked",!o),r.group.emit("timebarConfigChanged",{type:r.currentType,speed:r.currentSpeed})})},n.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},n}(),O1=H9,B1="timelinestart",D1="timelineend",Na="valueChange",Yu="timebarConfigChanged",Gu="playPauseBtn",zu="nextStepBtn",Xu="preStepBtn",W9={fill:"#416180",opacity:.05},j9={fill:"#416180",opacity:.15,radius:5},U9={fill:"#5B8FF9",opacity:.3,cursor:"move"},gc=2,Z9={width:gc,height:24},K9={textBaseline:"middle",fill:"#000",opacity:.45},$9=function(){function n(r){var t=this;this.prevX=0,this.onMouseDown=function(Ke){return function(wr){t.currentHandler=Ke;var br=wr.originalEvent;br.stopPropagation(),br.preventDefault(),t.prevX=(0,h.get)(br,"touches.0.pageX",br.pageX);var Ir=t.canvas.get("container");Ir.addEventListener("mousemove",t.onMouseMove),Ir.addEventListener("mouseup",t.onMouseUp),Ir.addEventListener("mouseleave",t.onMouseUp),Ir.addEventListener("touchmove",t.onMouseMove),Ir.addEventListener("touchend",t.onMouseUp),Ir.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Ke){Ke.stopPropagation(),Ke.preventDefault();var wr=(0,h.get)(Ke,"touches.0.pageX",Ke.pageX),br=wr-t.prevX,Ir=t.adjustOffsetRange(br/t.width);t.updateStartEnd(Ir),t.updateUI(),t.prevX=wr},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Ke=t.canvas.get("container");Ke&&(Ke.removeEventListener("mousemove",t.onMouseMove),Ke.removeEventListener("mouseup",t.onMouseUp),Ke.removeEventListener("mouseleave",t.onMouseUp),Ke.removeEventListener("touchmove",t.onMouseMove),Ke.removeEventListener("touchend",t.onMouseUp),Ke.removeEventListener("touchcancel",t.onMouseUp))};var e=r.x,i=e===void 0?0:e,a=r.y,o=a===void 0?0:a,s=r.width,l=s===void 0?100:s,u=r.height,f=r.padding,c=f===void 0?10:f,v=r.trendCfg,g=r.controllerCfg,C=g===void 0?{speed:1}:g,O=r.backgroundStyle,F=O===void 0?{}:O,G=r.foregroundStyle,Y=G===void 0?{}:G,$=r.handlerStyle,q=$===void 0?{}:$,ut=r.textStyle,kt=ut===void 0?{}:ut,Nt=r.start,Wt=Nt===void 0?0:Nt,Ft=r.end,ee=Ft===void 0?1:Ft,ve=r.minText,fe=ve===void 0?"":ve,Te=r.maxText,Be=Te===void 0?"":Te,ke=r.group,Qe=r.graph,tr=r.canvas,rr=r.ticks,Ze=r.type;this.graph=Qe,this.canvas=tr,this.group=ke,this.timeBarType=Ze,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=c,this.ticks=rr,this.trendCfg=v,this.controllerCfg=C,this.currentSpeed=C.speed,Ze==="trend"?this.backgroundStyle=(0,B.__assign)((0,B.__assign)({},W9),F):Ze==="simple"&&(this.backgroundStyle=(0,B.__assign)((0,B.__assign)({},j9),F)),this.foregroundStyle=(0,B.__assign)((0,B.__assign)({},U9),Y),this.handlerStyle=(0,B.__assign)((0,B.__assign)({},Z9),q),this.textStyle=(0,B.__assign)((0,B.__assign)({},K9),kt),this.currentMode="range",this.start=Wt,this.end=ee,this.minText=fe,this.maxText=Be,this.renderSlider()}return n.prototype.update=function(r){var t=r.x,e=r.y,i=r.width,a=r.height,o=r.minText,s=r.maxText,l=r.start,u=r.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),(0,h.assign)(this,{x:t,y:e,width:i,height:a,minText:o,maxText:s}),this.updateUI()},n.prototype.setText=function(r,t){this.minTextShape.attr("text",r),this.maxTextShape.attr("text",t)},n.prototype.renderSlider=function(){var r=this,t=this,e=t.width,i=t.height,a=t.timeBarType;if(a==="trend"&&(0,h.size)((0,h.get)(this.trendCfg,"data"))){var o=new k9((0,B.__assign)((0,B.__assign)({x:this.x,y:this.y,width:e,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:(0,B.__assign)({x:0,y:0,width:e,height:i},this.backgroundStyle)});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:(0,B.__assign)({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:(0,B.__assign)({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1},this.textStyle),capture:!1})):(this.minTextShape=l.addShape("text",{attrs:(0,B.__assign)({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:(0,B.__assign)({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:(0,B.__assign)({x:0,y:this.y,height:i},this.foregroundStyle)});var u=(0,h.get)(this.handlerStyle,"width",2),f=(0,h.get)(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new k1((0,B.__assign)({name:"minHandlerShape",group:c,type:a,x:this.x,y:this.y,width:u,height:f,cursor:"ew-resize"},this.handlerStyle));var v=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new k1((0,B.__assign)({name:"maxHandlerShape",group:v,type:a,x:this.x,y:this.y,width:u,height:f,cursor:"ew-resize"},this.handlerStyle));var g=this.ticks,C=e/(g.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(F){F.destroy()});var O=-Infinity;this.textList=g.map(function(F,G){r.tickPosList.push(r.x+G*C);var Y=r.group.addShape("text",{attrs:{x:r.x+G*C,y:r.y+i+5,text:F,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),$=r.group.addShape("line",{attrs:{x1:r.x+G*C,y1:r.y+i+2,x2:r.x+G*C,y2:r.y+i+6,lineWidth:1,stroke:"#ccc"}}),q=Y.getBBox();return q.minX>O?(Y.show(),$.show(),O=q.minX+q.width+10):(Y.hide(),$.hide()),Y}),this.controllerBtnGroup=new O1({group:this.group,x:this.x,y:this.y+i+25,width:e,height:40}),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},n.prototype.bindEvents=function(){var r=this,t=this.group.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var e=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});e&&(e.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),e.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on(Gu+":click",function(){r.isPlay=!r.isPlay,r.currentHandler=r.maxHandlerShape,r.changePlayStatus()}),this.group.on(zu+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(.01),r.updateUI()}),this.group.on(Xu+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(-.01),r.updateUI()}),this.group.on(Yu,function(i){var a=i.type,o=i.speed;r.currentSpeed=o,r.currentMode=a,a==="single"?(r.minHandlerShape.hide(),r.foregroundShape.hide(),r.minTextShape.hide()):a==="range"&&(r.minHandlerShape.show(),r.foregroundShape.show(),r.minTextShape.show())})},n.prototype.adjustTickIndex=function(r){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=r&&r<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-r)<Math.abs(r-this.tickPosList[t+1])?t:t+1},n.prototype.adjustOffsetRange=function(r){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,e=1-this.start;return Math.min(e,Math.max(t,r))}case this.maxHandlerShape:{var t=0-this.end,e=1-this.end;return Math.min(e,Math.max(t,r))}case this.foregroundShape:{var t=0-this.start,e=1-this.end;return Math.min(e,Math.max(t,r))}default:return 0}},n.prototype.updateStartEnd=function(r){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=r,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=r,this.end+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;default:break}},n.prototype.updateUI=function(){var r=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.start*this.width,e=this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",e-t);var i=(0,h.get)(this.handlerStyle,"width",gc);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,e]),o=a[0],s=a[1];this.minHandlerShape.setX(t-i/2),(0,h.each)(o,function(l,u){return r.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(e-i/2),(0,h.each)(s,function(l,u){return r.maxTextShape.attr(u,l)}),this.currentMode==="range"?this.graph.emit(Na,{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit(Na,{value:[this.end,this.end]})},n.prototype.dodgeText=function(r){var t,e,i=2,a=(0,h.get)(this.handlerStyle,"width",gc),o=this.minTextShape,s=this.maxTextShape,l=r[0],u=r[1],f=!1;l>u&&(t=[u,l],l=t[0],u=t[1],e=[s,o],o=e[0],s=e[1],f=!0);var c=o.getBBox(),v=s.getBBox(),g=null,C=null;return this.timeBarType==="trend"?(g=c.width>l-i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},C=v.width>this.width-u-i?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(g=c.width>l-i?{x:l+a/2+i,textAlign:"center"}:{x:l-a/2-i,textAlign:"center"},C=v.width>this.width-u-i?{x:u-a/2-i,textAlign:"center"}:{x:u+a/2+i,textAlign:"center"}),f?[C,g]:[g,C]},n.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r,e=t.ticks,i=t.width,a=r.currentSpeed,o=i/e.length,s=o/((10-a)*1e3/60),l=r.adjustOffsetRange(s/r.width);r.updateStartEnd(l),r.updateUI(),r.isPlay&&(r.playHandler=r.startPlay())})},n.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(B1,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(D1,null))},n.prototype.destory=function(){this.graph.off(Na);var r=this.group,t=r.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var e=r.find(function(i){return i.get("name")==="maxHandlerShape"});e&&(e.off("maxHandlerShape-handler:mousedown"),e.off("maxHandlerShape-handler:touchstart"),e.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),r.off(Gu+":click"),r.off(zu+":click"),r.off(Xu+":click"),r.off(Yu),r.destroy(),this.trendComponent&&this.trendComponent.destory()},n}(),Q9=$9,sz={opacity:.5,fill:"#000"},lz={opacity:.5,fill:"#000",r:5},uz={fill:"#fff",fontSize:12},J9=function(){function n(r){var t=r.x,e=t===void 0?0:t,i=r.y,a=i===void 0?0:i,o=r.container,s=r.text,l=r.padding,u=l===void 0?[4,4,4,4]:l,f=r.className,c=f===void 0?"g6-component-timebar-tooltip":f,v=r.backgroundColor,g=v===void 0?"#000":v,C=r.textColor,O=C===void 0?"#fff":C,F=r.opacity,G=F===void 0?.8:F,Y=r.fontSize,$=Y===void 0?12:Y;this.container=o,this.className=c,this.backgroundColor=g,this.textColor=O,this.x=e,this.y=a,this.text=s,this.padding=u,this.opacity=G,this.fontSize=$,this.render()}return n.prototype.render=function(){var r=this,t=r.className,e=r.x,i=r.y,a=r.backgroundColor,o=r.textColor,s=r.text,l=r.padding,u=r.opacity,f=r.fontSize,c=r.container,v=(0,gn.Z)("<div class='"+t+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+u+'"></div>');(0,h.isString)(c)&&(c=document.getElementById(c)),c.appendChild(v),r.parentHeight=c.offsetHeight,r.parentWidth=c.offsetWidth,(0,Vi.Z)(v,{visibility:"hidden",top:0,left:0});var g=(0,gn.Z)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+a+"; font-size: "+f+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+o+"; padding: "+l[0]+"px "+l[1]+"px "+l[2]+"px "+l[3]+"px'></div>");g.innerHTML=s,v.appendChild(g),r.backgroundDOM=g;var C=(0,gn.Z)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+a+"'></div>");v.appendChild(C),r.arrowDOM=C,r.container=v},n.prototype.show=function(r){var t=this,e=r.text,i=r.x,a=r.y,o=r.clientX,s=r.clientY;t.backgroundDOM.innerHTML=e;var l=t.backgroundDOM.offsetWidth,u=t.backgroundDOM.offsetHeight,f=t.arrowDOM.offsetWidth,c=t.arrowDOM.offsetHeight;(0,Vi.Z)(t.container,{top:-u-c+"px",left:i+"px",visibility:"visible"}),(0,Vi.Z)(t.backgroundDOM,{marginLeft:-l/2+"px"}),(0,Vi.Z)(t.arrowDOM,{marginLeft:-f/2+"px",top:u+"px"});var v=i-l/2,g=i+l/2;v<0?(0,Vi.Z)(t.backgroundDOM,{marginLeft:-l/2-v+"px"}):g>t.parentWidth&&(0,Vi.Z)(t.backgroundDOM,{marginLeft:-l/2-g+t.parentWidth+12+"px"})},n.prototype.hide=function(){(0,Vi.Z)(this.container,{top:0,left:0,visibility:"hidden"})},n}(),q9=J9,t8={fill:"#5B8FF9"},e8={fill:"#e6e8e9"},r8=function(){function n(r){this.frameCount=0;var t=r.graph,e=r.canvas,i=r.group,a=r.width,o=r.height,s=r.padding,l=r.data,u=r.start,f=r.end,c=r.x,v=c===void 0?0:c,g=r.y,C=g===void 0?0:g,O=r.tickLabelFormatter,F=r.selectedTickStyle,G=F===void 0?t8:F,Y=r.unselectedTickStyle,$=Y===void 0?e8:Y,q=r.tooltipBackgroundColor,ut=r.tooltipFomatter;this.graph=t,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=e,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=f,this.tickLabelFormatter=O,this.selectedTickStyle=G,this.unselectedTickStyle=$,this.x=v,this.y=C,this.tooltipBackgroundColor=q,this.tooltipFomatter=ut,this.renderSlices(),this.initEvent()}return n.prototype.renderSlices=function(){var r=this,t=r.width,e=r.height,i=r.padding,a=r.data,o=r.start,s=r.end,l=r.tickLabelFormatter,u=r.selectedTickStyle,f=r.unselectedTickStyle,c=t-2*i,v=10,g=4,C=3*i+g+v,O=e-C-2*i,F=2,G=a.length,Y=(c-F*(G-1))/G;this.tickWidth=Y;var $=this.sliceGroup,q=[],ut=[],kt=Math.round(G*o),Nt=Math.round(G*s);this.startTickRectId=kt,this.endTickRectId=Nt,a.forEach(function(Ft,ee){var ve=ee>=kt&&ee<=Nt,fe=ve?u:f,Te=$.addShape("rect",{attrs:(0,B.__assign)({x:i+ee*(Y+F),y:i,width:Y,height:O},fe),draggable:!0,name:"tick-rect-"+ee}),Be=$.addShape("rect",{attrs:{x:i+ee*Y+F*(2*ee-1)/2,y:i,width:ee===0||ee===G-1?Y+F/2:Y+F,height:O,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+ee});Be.toFront();var ke=Te.getBBox(),Qe=(ke.minX+ke.maxX)/2;q.push({rect:Te,pickRect:Be,value:Ft.date,x:Qe,y:ke.minY});var tr;if(l?(tr=l(Ft),!(0,h.isString)(tr)&&tr&&(tr=Ft.date)):ee%Math.round(G/10)==0&&(tr=Ft.date),tr){ut.push(tr);var rr=ke.maxY+i*2;$.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Qe,y1:rr,x2:Qe,y2:rr+g}});var Ze=rr+g+i,Ke=$.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Qe,y:Ze,textAlign:"center",text:tr,textBaseline:"top",fontSize:10},capture:!1}),wr=Ke.getBBox();wr.maxX>t?Ke.attr("textAlign","right"):wr.minX<0&&Ke.attr("textAlign","left")}}),this.tickRects=q;var Wt=this.group;this.currentSpeed=1,this.controllerBtnGroup=new O1({group:Wt,x:this.x,y:this.y+e+5,width:t,height:40,hiddleToggle:!0,speed:this.currentSpeed})},n.prototype.initEvent=function(){var r=this,t=this.sliceGroup;t.on("click",function(f){var c=f.target;if(!(c.get("type")!=="rect"||!c.get("name"))){var v=parseInt(c.get("name").split("-")[2],10);if(!isNaN(v)){var g=r.tickRects,C=r.unselectedTickStyle;g.forEach(function(Y){Y.rect.attr(C)});var O=r.selectedTickStyle;g[v].rect.attr(O),r.startTickRectId=v,r.endTickRectId=v;var F=g.length,G=v/F;r.graph.emit(Na,{value:[G,G]})}}}),t.on("dragstart",function(f){var c=r.tickRects,v=r.unselectedTickStyle;c.forEach(function(Y){Y.rect.attr(v)});var g=f.target,C=parseInt(g.get("name").split("-")[2],10),O=r.selectedTickStyle;c[C].rect.attr(O),r.startTickRectId=C;var F=c.length,G=C/F;r.graph.emit(Na,{value:[G,G]}),r.dragging=!0}),t.on("dragover",function(f){if(!!r.dragging&&f.target.get("type")==="rect"){for(var c=parseInt(f.target.get("name").split("-")[2],10),v=r.startTickRectId,g=r.tickRects,C=r.selectedTickStyle,O=r.unselectedTickStyle,F=0;F<g.length;F++){var G=F>=v&&F<=c?C:O;g[F].rect.attr(G)}var Y=g.length;r.endTickRectId=c;var $=v/Y,q=c/Y;r.graph.emit(Na,{value:[$,q]})}}),t.on("drop",function(f){if(!!r.dragging&&(r.dragging=!1,f.target.get("type")==="rect")){var c=r.startTickRectId,v=parseInt(f.target.get("name").split("-")[2],10);if(!(v<c)){var g=r.selectedTickStyle,C=r.tickRects;C[v].rect.attr(g),r.endTickRectId=v;var O=C.length,F=c/O,G=v/O;r.graph.emit(Na,{value:[F,G]})}}});var e=this,i=e.tooltipBackgroundColor,a=e.tooltipFomatter,o=e.canvas,s=new q9({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(f){var c=f.pickRect;c.on("mouseenter",function(v){var g=v.target;if(g.get("type")==="rect"){var C=parseInt(g.get("name").split("-")[2],10),O=o.getClientByPoint(l[C].x,l[C].y);s.show({x:l[C].x,y:l[C].y,clientX:O.x,clientY:O.y,text:a?a(l[C].value):l[C].value})}}),c.on("mouseleave",function(v){s.hide()})});var u=this.group;u.on(Gu+":click",function(){r.isPlay=!r.isPlay,r.changePlayStatus()}),u.on(zu+":click",function(){r.updateStartEnd(1)}),u.on(Xu+":click",function(){r.updateStartEnd(-1)}),u.on(Yu,function(f){var c=f.type,v=f.speed;r.currentSpeed=v})},n.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(B1,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(D1,null))},n.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r.currentSpeed;r.frameCount%(60/t)==0&&(r.frameCount=0,r.updateStartEnd(1)),r.frameCount++,r.isPlay&&(r.playHandler=r.startPlay())})},n.prototype.updateStartEnd=function(r){var t=this,e=this.tickRects,i=e.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(r>0?t.endTickRectId++:(e[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var l=t.startTickRectId;l<=t.endTickRectId-1;l++)e[l].rect.attr(a);t.startTickRectId=t.endTickRectId}if(e[t.endTickRectId]){e[t.endTickRectId].rect.attr(o);var u=t.startTickRectId/i,f=t.endTickRectId/i;this.graph.emit(Na,{value:[u,f]})}},n.prototype.destory=function(){this.graph.off(Na);var r=this.sliceGroup;r.off("click"),r.off("dragstart"),r.off("dragover"),r.off("drop"),this.tickRects.forEach(function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")}),this.tickRects.length=0,r.off(Gu+":click"),r.off(zu+":click"),r.off(Xu+":click"),r.off(Yu),this.sliceGroup.destroy()},n}(),i8=r8,n8=8,a8=26,o8=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]}}},r.prototype.initContainer=function(){var t=this.get("graph"),e=this._cfgs,i=e.width,a=e.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container"),u;s?u=s:(u=(0,gn.Z)("<div class='"+o+"'></div>"),(0,Vi.Z)(u,{position:"relative"})),l.appendChild(u),this.set("timeBarContainer",u);var f,c=t.get("renderer");c==="SVG"?f=new Ds.Z({container:u,width:i,height:a}):f=new Do.Z({container:u,width:i,height:a}),this.set("canvas",f)},r.prototype.init=function(){this.initContainer();var t=this.get("canvas"),e=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent()},r.prototype.renderTrend=function(){var t=this._cfgs,e=t.width,i=t.x,a=t.y,o=t.padding,s=t.type,l=t.trend,u=t.slider,f=t.controllerCfg,c=l.data,v=(0,B.__rest)(l,["data"]),g=e-2*o,C=s==="trend"?a8:n8,O=this.get("graph"),F=this.get("timeBarGroup"),G=this.get("canvas"),Y=null;if(s==="trend"||s==="simple")Y=new Q9((0,B.__assign)((0,B.__assign)({graph:O,canvas:G,group:F,type:s,x:i+o,y:s==="trend"?a+o:a+o+15,width:g,height:C,padding:o,trendCfg:(0,B.__assign)((0,B.__assign)({},v),{data:c.map(function(q){return q.value})})},u),{ticks:c.map(function(q){return q.date}),handlerStyle:(0,B.__assign)((0,B.__assign)({},u.handlerStyle),{height:u.height||C}),controllerCfg:f}));else if(s==="tick"){var $=this._cfgs.tick;Y=new i8((0,B.__assign)({graph:O,canvas:G,group:F,x:i+o,y:a+o},$))}this.set("timebar",Y)},r.prototype.filterData=function(t){var e=t.value,i=null,a=this._cfgs.type;if(a==="trend"||a==="simple"?i=this._cfgs.trend.data:a==="tick"&&(i=this._cfgs.tick.data),!i||i.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var o=this.get("rangeChange"),s=this.get("graph"),l=Math.round(i.length*e[0]),u=Math.round(i.length*e[1]);u=u>=i.length?i.length-1:u;var f=i[l].date,c=i[u].date;if(a!=="tick"){var v=this.get("timebar");v.setText(f,c)}if(o)o(s,f,c);else{var g=s.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=g);var C=this.cacheGraphData.nodes.filter(function(G){return G.date>=f&&G.date<=c}),O=C.map(function(G){return G.id}),F=this.cacheGraphData.edges.filter(function(G){return O.includes(G.source)&&O.includes(G.target)});s.changeData({nodes:C,edges:F})}},r.prototype.initEvent=function(){var t=this,e=0,i=0,a=this._cfgs.type;!a||a==="trend"||a==="simple"?(e=this._cfgs.slider.start,i=this._cfgs.slider.end):a==="tick"&&(e=this._cfgs.tick.start,i=this._cfgs.tick.end);var o=this.get("graph");o.on("afterrender",function(){t.filterData({value:[e,i]})}),o.on(Na,function(s){t.filterData(s)})},r.prototype.destroy=function(){var t=this.get("timebar");t&&t.destory&&t.destory(),n.prototype.destroy.call(this);var e=this.get("timeBarContainer");if(e){var i=this.get("container");i||(i=this.get("graph").get("container")),i.removeChild(e)}},r}(Da),s8=o8;function l8(n,r){var t,e;if(n.naturalWidth)t=n.naturalWidth,e=n.naturalHeight;else{var i=new Image;i.src=n.src,i.onload=function(){r==null||r(i.width,i.height)}}return[t,e]}var u8=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,i=e.graph;if(!this.destroyed){var a=this.get("container"),o=(0,gn.Z)("<div class="+e.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),s=0,l=0,u=!1,f=0,c=0,v=0,g=0,C=0,O=0;a.addEventListener("mousedown",function(F){if(e.refresh=!1,F.target===o){var G=o.style;v=parseInt(G.width,10),g=parseInt(G.height,10);var Y=t.get("width"),$=t.get("height");v>Y||g>$||(O=i.getZoom(),C=t.get("ratio"),u=!0,s=F.clientX,l=F.clientY)}},!1),a.addEventListener("mousemove",function(F){if(!(!u||(0,In.default)(F.clientX)||(0,In.default)(F.clientY))){var G=t.get("width"),Y=t.get("height"),$=o.style;f=parseInt($.left,10),c=parseInt($.top,10),v=parseInt($.width,10),g=parseInt($.height,10);var q=s-F.clientX,ut=l-F.clientY;f-q<0?q=f:f-q+v>=G&&(q=0),c-ut<0?ut=c:c-ut+g>=Y&&(ut=0),f-=q,c-=ut,(0,Vi.Z)(o,{left:f+"px",top:c+"px"}),i.translate(q*O/C,ut*O/C),s=F.clientX,l=F.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,e.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,e.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),f=u.getCanvasBBox(),c=[(f.minX+f.maxX)/2,(f.minY+f.maxY)/2],v=[f.maxX-f.minX,f.maxY-f.minY],g={centerX:c[0],centerY:c[1],width:0,height:0,minX:0,minY:0};f[0]/f[1]>l?(g.width=v[0],g.height=g.width/l):(g.height=v[1],g.width=g.height*l),g.minX=c[0]-g.width/2,g.minY=c[1]-g.height/2;var C=u.getMatrix();C||(C=[1,0,0,0,1,0,0,0,1]);var O=qa.invert([],C),F=ks({x:g.minX,y:g.minY},O),G=a.getCanvasByPoint(F.x,F.y),Y=this.get("viewport");Y||this.initViewport();var $=o/g.width,q=$*e,ut=$*i,kt=e*-G.x/g.width,Nt=i*-G.y/g.height,Wt=kt+q,Ft=Nt+ut;kt<0&&(q+=kt,kt=0),Wt>e&&(q=q-(Wt-e)),Nt<0&&(ut+=Nt,Nt=0),Ft>i&&(ut=ut-(Ft-i)),this.set("ratio",t);var ee=kt+"px",ve=Nt+"px";(0,Vi.Z)(Y,{left:ee,top:ve,width:q+"px",height:ut+"px"})}},r.prototype.init=function(){this.initContainer()},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),i=e.get("width"),a=e.get("height"),o=a/i,s=t.get("className"),l=t.get("container"),u=t.get("width"),f=t.get("height");!u&&!f&&(u=200),u?(f=o*u,t.set("height",f)):(u=1/o*f,t.set("width",u));var c=(0,gn.Z)("<div class='"+s+"' style='width: "+u+"px; height: "+f+"px; overflow: hidden; position: relative;'></div>");(0,ki.default)(l)&&(l=document.getElementById(l)),l?l.appendChild(c):e.get("container").appendChild(c),t.set("container",c);var v=(0,gn.Z)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');c.appendChild(v);var g=(0,gn.Z)('<span style="display: table-cell; vertical-align: middle; "></span>');v.appendChild(g),t.set("containerDOM",v),t.set("containerSpan",g);var C=(0,gn.Z)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');t.set("imgDOM",C),t.updateImgSize(),g.appendChild(C),t.updateCanvas()},r.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),i=t.get("width"),a=t.get("height");e.onload=function(){var o=l8(e);o[0]>o[1]?e.width=i:e.height=a}},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=e.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.updateGraphImg=function(t){var e=this,i=e.get("imgDOM");i.remove(),e.set("graphImg",t);var a=(0,gn.Z)('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');e.set("imgDOM",a),a.src=t,e.updateImgSize();var o=e.get("containerSpan");o.appendChild(a),e.updateCanvas()},r.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},r}(Da),h8=u8,F1=.05,R1={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},f8=function(n){(0,B.__extends)(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,on.d9)(R1),showLabel:"edge",scaleRBy:"wheel"}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},r.prototype.init=function(){var t=this,e=t.get("showLabel"),i=e==="node"||e==="both",a=e==="edge"||e==="both";t.set("showNodeLabel",i),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},r.prototype.createDelegate=function(t){var e=this,i=e.get("delegate");(!i||i.destroyed)&&(e.filter(t),i=e.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){e.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){e.scaleRByWheel(a)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var i=e.get("graph"),a,o=e.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-F1:a=1/(1-F1);var u=e.get("maxR"),f=e.get("minR"),c=e.get("r");(c>(u||i.get("height"))&&a>1||c<(f||i.get("height")*.05)&&a<1)&&(a=1),c*=a,e.set("r",c),e.filter(t)}},r.prototype.filter=function(t){var e=this,i=e.get("graph"),a=i.getNodes(),o={},s=e.get("r"),l=e.get("type"),u={x:t.x,y:t.y};e.updateDelegate(u,s);var f=e.get("shouldShow"),c=e.get("vShapes");c&&c.forEach(function(G){G.remove(),G.destroy()}),c=[],a.forEach(function(G){var Y=G.getModel(),$=Y.x,q=Y.y;Os({x:$,y:q},u)<s&&(o[Y.id]=G)});var v=i.getEdges(),g=[];v.forEach(function(G){var Y=G.getModel(),$=Y.source,q=Y.target;f(Y)&&(l==="only-source"||l==="one"?o[$]&&!o[q]&&g.push(G):l==="only-target"||l==="one"?o[q]&&!o[$]&&g.push(G):l==="both"&&o[$]&&o[q]&&g.push(G))});var C=e.get("showNodeLabel"),O=e.get("showEdgelabel"),F=i.get("group");g.forEach(function(G){var Y=G.get("group").get("children");Y.forEach(function($){var q=$.get("type"),ut=F.addShape(q,{attrs:$.attr()});c.push(ut),C&&q==="text"&&ut.set("visible",!0)})}),Object.keys(o).forEach(function(G){var Y=o[G],$=Y.get("group").clone();if(F.add($),c.push($),O)for(var q=$.get("children"),ut=0;ut<q.length;ut++){var kt=q[ut];kt.get("type")==="text"&&kt.set("visible",!0)}}),e.set("vShapes",c)},r.prototype.updateParams=function(t){var e=this,i=t.r,a=t.trigger,o=t.minR,s=t.maxR,l=t.scaleRBy,u=t.showLabel,f=t.shouldShow;if(isNaN(t.r)||e.set("r",i),isNaN(s)||e.set("maxR",s),isNaN(o)||e.set("minR",o),(a==="mousemove"||a==="click")&&e.set("trigger",a),l==="wheel"||l==="unset"){e.set("scaleRBy",l),e.get("delegate").remove(),e.get("delegate").destroy();var c=e.get("dPercentText");c&&(c.remove(),c.destroy())}(u==="node"||u==="both")&&e.set("showNodeLabel",!0),(u==="edge"||u==="both")&&e.set("showEdgeLabel",!0),f&&e.set("shouldShow",f)},r.prototype.updateDelegate=function(t,e){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||R1;o=s.addShape("circle",{attrs:(0,B.__assign)({r:e,x:t.x,y:t.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:t.x,y:t.y,r:e});i.set("delegate",o)},r.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach(function(a){a.remove(),a.destroy()}),e=[],t.set("vShapes",e);var i=t.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},r.prototype.destroy=function(){this.clear()},r}(Da),c8=f8,jn={Menu:o9,Grid:i9,Minimap:f9,Bundling:d9,ToolBar:m9,Tooltip:b9,Fisheye:g9,TimeBar:s8,ImageMinimap:h8,EdgeFilterLens:c8};function v8(n){n===void 0&&(n={});var r=n,t=function(){},e=function(){var i={};return function(a){var o=a.next;return i[o.get("id")]?!1:(i[o.get("id")]=!0,!0)}}();return r.allowTraversal=n.allowTraversal||e,r.enter=n.enter||t,r.leave=n.leave||t,r}function N1(n,r,t,e){e.enter({current:r,previous:t}),n.getNeighbors(r,"target").forEach(function(i){e.allowTraversal({previous:t,current:r,next:i})&&N1(n,i,r,e)}),e.leave({current:r,previous:t})}function Y1(n,r,t){var e=null,i=n.findById(r);N1(n,i,e,v8(t))}var d8=function(){function n(){this.linkedList=new s1}return n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},n.prototype.enqueue=function(r){this.linkedList.append(r)},n.prototype.dequeue=function(){var r=this.linkedList.deleteHead();return r?r.value:null},n.prototype.toString=function(r){return this.linkedList.toString(r)},n}(),p8=d8;function g8(n){n===void 0&&(n={});var r=n,t=function(){},e=function(){var i={};return function(a){var o=a.next,s=o.get("id");return i[s]?!1:(i[s]=!0,!0)}}();return r.allowTraversal=n.allowTraversal||e,r.enter=n.enter||t,r.leave=n.leave||t,r}var y8=function(r,t,e){var i=g8(e),a=new p8,o=r.findById(t);a.enqueue(o);for(var s=null,l=function(){var f=a.dequeue();i.enter({current:f,previous:s}),r.getNeighbors(f,"target").forEach(function(c){i.allowTraversal({previous:s,current:f,next:c})&&a.enqueue(c)}),i.leave({current:f,previous:s}),s=f};!a.isEmpty();)l()},m8=y8;function x8(n){for(var r=[],t={},e=[],i=function l(u){e.push(u),t[u.get("id")]=!0;for(var f=u.getNeighbors(),c=0;c<f.length;++c){var v=f[c];t[v.get("id")]||l(v)}},a=0;a<n.length;a++){var o=n[a];if(!t[o.get("id")]){i(o);for(var s=[];e.length>0;)s.push(e.pop());r.push(s)}}return r}function G1(n){for(var r=[],t={},e={},i={},a=[],o=0,s=function c(v){e[v.get("id")]=o,i[v.get("id")]=o,o+=1,r.push(v),t[v.get("id")]=!0;for(var g=v.getNeighbors("target").filter(function(Y){return n.indexOf(Y)>-1}),C=0;C<g.length;C++){var O=g[C];!e[O.get("id")]&&e[O.get("id")]!==0?(c(O),i[v.get("id")]=Math.min(i[v.get("id")],i[O.get("id")])):t[O.get("id")]&&(i[v.get("id")]=Math.min(i[v.get("id")],e[O.get("id")]))}if(i[v.get("id")]===e[v.get("id")]){for(var F=[];r.length>0;){var G=r.pop();if(t[G.get("id")]=!1,F.push(G),G===v)break}F.length>0&&a.push(F)}},l=0,u=n;l<u.length;l++){var f=u[l];!e[f.get("id")]&&e[f.get("id")]!==0&&s(f)}return a}function z1(n,r){var t=r===void 0?n.get("directed"):r,e=n.getNodes();return t?G1(e):x8(e)}var b8=function(r){var t=null,e={},i={},a={},o={};r.getNodes().forEach(function(u){i[u.getID()]=u});for(var s={enter:function(f){var c=f.current,v=f.previous;if(a[c.getID()]){t={};for(var g=c,C=v;C.getID()!==c.getID();)t[g.getID()]=C,g=C,C=e[C.getID()];t[g.getID()]=C}else a[c.getID()]=c,delete i[c.getID()],e[c.getID()]=v},leave:function(f){var c=f.current;o[c.getID()]=c,delete a[c.getID()]},allowTraversal:function(f){var c=f.next;return t?!1:!o[c.getID()]}};Object.keys(i).length;){var l=Object.keys(i)[0];Y1(r,l,s)}return t},X1=function(r,t,e){var i,a,o;e===void 0&&(e=!0);for(var s=[],l=z1(r,!1),u=0,f=l;u<f.length;u++){var c=f[u];if(!!c.length)for(var v=c[0],g=v.get("id"),C=[v],O=(i={},i[g]=v,i),F=(a={},a[g]=new Set,a);C.length>0;)for(var G=C.pop(),Y=G.get("id"),$=G.getNeighbors(),q=0;q<$.length;q+=1){var ut=$[q],kt=ut.get("id");if(kt===Y)s.push((o={},o[ut.getID()]=G,o));else if(!(kt in F))O[kt]=G,C.push(ut),F[kt]=new Set([G]);else if(!F[Y].has(ut)){for(var Nt=!0,Wt=[ut,G],Ft=O[Y];F[kt].size&&!F[kt].has(Ft)&&(Wt.push(Ft),Ft!==O[Ft.getID()]);)Ft=O[Ft.getID()];if(Wt.push(Ft),t&&e?(Nt=!1,Wt.findIndex(function(fe){return t.indexOf(fe.get("id"))>-1})>-1&&(Nt=!0)):t&&!e&&Wt.findIndex(function(fe){return t.indexOf(fe.get("id"))>-1})>-1&&(Nt=!1),Nt){for(var ee={},ve=1;ve<Wt.length;ve+=1)ee[Wt[ve-1].getID()]=Wt[ve];Wt.length&&(ee[Wt[Wt.length-1].getID()]=Wt[0]),s.push(ee)}F[kt].add(G)}}}return s},V1=function(r,t,e){e===void 0&&(e=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},f=function(ee){for(var ve=[ee];ve.length>0;){var fe=ve.pop();a.has(fe)&&(a.delete(fe),o[fe.get("id")].forEach(function(Te){ve.push(Te)}),o[fe.get("id")].clear())}},c=function Ft(ee,ve,fe){var Te=!1;if(t&&e===!1&&t.indexOf(ee.get("id"))>-1)return Te;i.push(ee),a.add(ee);for(var Be=fe[ee.getID()],ke=0;ke<Be.length;ke+=1){var Qe=l[Be[ke]];if(Qe===ve){for(var tr={},rr=1;rr<i.length;rr+=1)tr[i[rr-1].getID()]=i[rr];i.length&&(tr[i[i.length-1].getID()]=i[0]),s.push(tr),Te=!0}else a.has(Qe)||Ft(Qe,ve,fe)&&(Te=!0)}if(Te)f(ee);else for(var ke=0;ke<Be.length;ke+=1){var Qe=l[Be[ke]];o[Qe.get("id")].has(ee)||o[Qe.get("id")].add(ee)}return i.pop(),Te},v=r.getNodes(),g=0;g<v.length;g+=1){var C=v[g],O=C.getID();u[O]=g,l[g]=C}if(t&&e)for(var g=0;g<t.length;g++){var O=t[g];u[v[g].getID()]=u[O],u[O]=0,l[0]=r.findById(O),l[u[v[g].getID()]]=v[g]}for(var F=function(ee){for(var ve,fe,Te=Infinity,Be=0;Be<ee.length;Be+=1)for(var ke=ee[Be],Qe=0;Qe<ke.length;Qe++){var tr=u[ke[Qe].getID()];tr<Te&&(Te=tr,fe=Be)}for(var rr=ee[fe],Ze=[],Be=0;Be<rr.length;Be+=1){var Ke=rr[Be];Ze[Ke.getID()]=[];for(var wr=0,br=Ke.getNeighbors("target").filter(function(Mr){return rr.indexOf(Mr)>-1});wr<br.length;wr++){var Ir=br[wr];Ir===Ke&&!(e===!1&&t.indexOf(Ke.getId())>-1)?s.push((ve={},ve[Ke.getID()]=Ke,ve)):Ze[Ke.getID()].push(u[Ir.getID()])}}return{component:rr,adjList:Ze,minIdx:Te}},G=0;G<v.length;){var Y=v.filter(function(Ft){return u[Ft.getID()]>=G}),$=G1(Y).filter(function(Ft){return Ft.length>1});if($.length===0)break;var q=F($),ut=q.minIdx,kt=q.adjList,Nt=q.component;if(Nt.length>1){Nt.forEach(function(Ft){o[Ft.get("id")]=new Set});var Wt=l[ut];if(t&&e&&t.indexOf(Wt.get("id"))===-1)return s;c(Wt,Wt,kt),G=ut+1}else break}return s},w8=function(r,t,e,i){return i===void 0&&(i=!0),t===void 0&&(t=r.get("directed")),t?V1(r,e,i):X1(r,e,i)},S8=b8,C8=function(r,t,e,i){var a=r.getNodes(),o=[],s={},l={},u={};a.forEach(function(F,G){var Y=F.getID();o.push(Y),l[Y]=Infinity,Y===t&&(l[Y]=0)});for(var f=a.length,c=function(G){var Y=M8(l,a,s),$=Y.get("id");if(s[$]=!0,l[$]===Infinity)return"continue";var q=[];e?q=Y.getOutEdges():q=Y.getEdges(),q.forEach(function(ut){var kt=ut.getTarget().getID(),Nt=ut.getSource().getID(),Wt=kt===$?Nt:kt,Ft=i&&ut.getModel()[i]?ut.getModel()[i]:1;l[Wt]>l[Y.get("id")]+Ft&&(l[Wt]=l[Y.get("id")]+Ft,u[Wt]=Y.get("id"))})},v=0;v<f;v++)c(v);var g={};for(var C in l){g[C]=[C];for(var O=u[C];O!==void 0;)g[C].unshift(O),O=u[O]}return{length:l,path:g}};function M8(n,r,t){for(var e=Infinity,i,a=0;a<r.length;a++){var o=r[a].get("id");!t[o]&&n[o]<=e&&(e=n[o],i=r[a])}return i}var E8=C8,A8=function(r,t,e,i,a){(0,h.isString)(t)&&(t=r.findById(t)),(0,h.isString)(e)&&(e=r.findById(e));var o=E8(r,t.get("id"),i,a),s=o.length,l=o.path;return{length:s[e.get("id")],path:l[e.get("id")]}},T8=function(r,t,e,i){var a;if((0,h.isString)(t)&&(t=r.findById(t)),(0,h.isString)(e)&&(e=r.findById(e)),i===void 0&&(i=r.get("directed")),t===e)return[[t.get("id")]];var o=[t],s=(a={},a[t.get("id")]=!0,a),l=[],u=[],f=i?t.getNeighbors("target"):t.getNeighbors();for(l.push(f);o.length>0&&l.length>0;){var c=l[l.length-1];if(c.length){var v=c.shift();v&&(o.push(v),s[v.get("id")]=!0,f=i?v.getNeighbors("target"):v.getNeighbors(),l.push(f.filter(function(O){return!s[O.get("id")]})))}else{var g=o.pop();s[g.get("id")]=!1,l.pop();continue}if(o[o.length-1]===e){var C=o.map(function(F){return F.get("id")});u.push(C);var g=o.pop();s[g.get("id")]=!1,l.pop()}}return u},_8=function(){function n(r){this.count=r.length,this.parent={};for(var t=0,e=r;t<e.length;t++){var i=e[t];this.parent[i]=i}}return n.prototype.find=function(r){for(;this.parent[r]!==r;)r=this.parent[r];return r},n.prototype.union=function(r,t){var e=this.find(r),i=this.find(t);e!==i&&(e<i?(this.parent[t]!==t&&this.union(this.parent[t],r),this.parent[t]=this.parent[r]):(this.parent[r]!==r&&this.union(this.parent[r],t),this.parent[r]=this.parent[t]))},n.prototype.connected=function(r,t){return this.find(r)===this.find(t)},n}(),P8=_8,L8=function(r,t){return r-t},I8=function(){function n(r){r===void 0&&(r=L8),this.compareFn=r,this.list=[]}return n.prototype.getLeft=function(r){return 2*r+1},n.prototype.getRight=function(r){return 2*r+2},n.prototype.getParent=function(r){return r===0?null:Math.floor((r-1)/2)},n.prototype.isEmpty=function(){return this.list.length<=0},n.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},n.prototype.delMin=function(){var r=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),r},n.prototype.insert=function(r){if(r!==null){this.list.push(r);var t=this.list.length-1;return this.moveUp(t),!0}return!1},n.prototype.moveUp=function(r){for(var t=this.getParent(r);r&&r>0&&this.compareFn(this.list[t],this.list[r])>0;){var e=this.list[t];this.list[t]=this.list[r],this.list[r]=e,r=t,t=this.getParent(r)}},n.prototype.moveDown=function(r){var t,e=r,i=this.getLeft(r),a=this.getRight(r),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[e],this.list[i])>0?e=i:a!==null&&a<o&&this.compareFn(this.list[e],this.list[a])>0&&(e=a),r!==e&&(t=[this.list[e],this.list[r]],this.list[r]=t[0],this.list[e]=t[1],this.moveDown(e))},n}(),k8=I8,O8=function(r,t){var e=[],i=r.getNodes();if(i.length===0)return e;var a=i[0],o=new Set;o.add(a);var s=function(g,C){return t?g.getModel()[t]-C.getModel()[t]:0},l=new k8(s);for(a.getEdges().forEach(function(v){l.insert(v)});!l.isEmpty();){var u=l.delMin(),f=u.getSource(),c=u.getTarget();o.has(f)&&o.has(c)||(e.push(u),o.has(f)||(o.add(f),f.getEdges().forEach(function(v){l.insert(v)})),o.has(c)||(o.add(c),c.getEdges().forEach(function(v){l.insert(v)})))}return e},H1=function(r,t){var e=[];if(r.getNodes().length===0)return e;var i=r.getEdges().map(function(u){return u});t&&i.sort(function(u,f){return u.getModel()[t]-f.getModel()[t]});for(var a=new P8(r.getNodes().map(function(u){return u.get("id")}));i.length>0;){var o=i.shift(),s=o.getSource().get("id"),l=o.getTarget().get("id");a.connected(s,l)||(e.push(o),a.union(s,l))}return e};function B8(n,r,t){var e={prim:O8,kruskal:H1};return t?e[t](n,r):H1(n,r)}var D8=function(r,t,e){typeof t!="number"&&(t=1e-6),typeof e!="number"&&(e=.85);for(var i=1,a=0,o=1e3,s=r.getNodes(),l=s.length,u,f={},c={},v=0;v<l;++v){var g=s[v],C=g.get("id");f[C]=1/l,c[C]=1/l}for(;o>0&&i>t;){a=0;for(var v=0;v<l;++v){var g=s[v],C=g.get("id");if(u=0,r.getNodeDegree(g,"in")===0)f[C]=0;else{for(var O=g.getNeighbors("source"),F=0;F<O.length;++F){var G=O[F],Y=r.getNodeDegree(G,"out");Y>0&&(u+=c[G.get("id")]/Y)}f[C]=e*u,a+=f[C]}}a=(1-a)/l,i=0;for(var v=0;v<l;++v){var g=s[v],C=g.get("id");u=f[C]+a,i+=Math.abs(u-c[C]),c[C]=u}o-=1}return c},F8=D8,hz=ls.registerNode,fz=ls.registerEdge,cz=ls.registerCombo,vz=fx.registerBehavior,dz=Xs.registerLayout,pz=jn.Minimap,gz=jn.Grid,yz=jn.Bundling,mz=jn.Menu,R8=jn.Fisheye,xz=jn.ToolBar,bz=jn.Tooltip,N8=jn.TimeBar,Y8=jn.ImageMinimap,G8=jn.EdgeFilterLens,Yn={version:vR.i8,Graph:d1,TreeGraph:S6,Util:t9,registerNode:ls.registerNode,registerEdge:ls.registerEdge,registerCombo:ls.registerCombo,registerBehavior:fx.registerBehavior,registerLayout:Xs.registerLayout,Layout:Xs,Global:Ue,Minimap:jn.Minimap,Grid:jn.Grid,Bundling:jn.Bundling,Menu:jn.Menu,ToolBar:jn.ToolBar,Tooltip:jn.Tooltip,TimeBar:N8,Fisheye:R8,ImageMinimap:Y8,EdgeFilterLens:G8,Algorithm:wt,Arrow:$6,Marker:Q6};function W1(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,e)}return t}function Ya(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?W1(Object(t),!0).forEach(function(e){z8(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):W1(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function z8(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}Yn.registerNode("card-node",{draw:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",i=r&&r.size?r.size:[100,30];typeof i=="number"&&(i=[i,i]);var a=r&&r.style?r.style:{};a=Object.assign({radius:2,fill:"#fff"},a),e=a.stroke||"#5B8FF9";var o=a.radius||0,s=t.addShape("rect",{attrs:Ya({x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1],stroke:e},a),name:"main-box",draggable:!0}),l=r.title||r.label,u,f=r&&r.labelCfg&&r.labelCfg.style?r.labelCfg.style:{};if(l){var c=Object.assign({fill:"#fff"},f);u=t.addShape("text",{attrs:Ya(Ya({textBaseline:"top",x:-i[0]/2+8,y:-i[1]/2+2,text:l},c),{},{fill:"#fff"}),name:"title"})}var v=u?u.getBBox():{height:i[1]/2},g=t.addShape("rect",{attrs:{x:-i[0]/2,y:-i[1]/2,width:i[0],height:v.height+4,fill:e,radius:[o,o,0,0]},name:"title-rect",draggable:!0});u&&u.toFront();var C;r.children&&(C=t.addShape("marker",{attrs:{x:i[0]/2,y:0,r:6,cursor:"pointer",symbol:r.collapsed?Yn.Marker.expand:Yn.Marker.collapse,stroke:e,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var O=r&&r.description?r.description:void 0,F=g.getBBox(),G;if(O&&(G=t.addShape("text",{attrs:Ya({textBaseline:"top",x:-i[0]/2+8,y:-i[1]/2+F.height+8,text:O},f),name:"description"})),G){var Y,$=G.getBBox(),q=F.height+16+$.height,ut=i[0]>$.width+16?i[0]:$.width+16;s.attr({width:ut,height:q}),g==null||g.attr("width",ut),(Y=C)===null||Y===void 0||Y.attr({x:ut-i[0]/2,y:q/2-i[1]/2})}return s},update:void 0},"single-node"),Yn.registerNode("round-rect",{drawShape:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",i=r&&r.size?r.size:[100,30];typeof i=="number"&&(i=[i,i]);var a=r&&r.style?r.style:{};a.stroke&&(e=a.stroke);var o=a&&a.fill?a.fill:"#fff";a=Object.assign({width:i[0],height:i[1],radius:i[1]/2,fill:o,lineWidth:1.2,stroke:e},a);var s=t.addShape("rect",{attrs:Ya({x:-i[0]/2,y:-i[1]/2},a),name:"rect-shape"});return t.addShape("circle",{attrs:{x:-i[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape"}),t.addShape("circle",{attrs:{x:i[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape2"}),s},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(r,t){var e=t.getContainer(),i=e.get("children"),a=i[0],o=i[1],s=i[2],l=r.style&&r.style.stroke?r.style.stroke:"#5B8FF9";l&&(a.attr("stroke",l),o.attr("fill",l),s.attr("fill",l))}},"single-node");var X8=function(r){Yn.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(e,i){var a=this.getShapeStyle(e),o=e.labelCfg,s=o===void 0?{}:o,l=i.addShape("rect",{attrs:Ya(Ya({},a),{},{x:0,y:0})}),u={fill:"#e6fffb"},f="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return e.leftIcon&&(u=Object.assign({},u,e.leftIcon.style),f=e.leftIcon.img),i.addShape("rect",{attrs:Ya({x:1,y:1,width:38,height:a.height-2},u)}),i.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:f},name:"image-shape"}),r.enableEdit&&(i.addShape("marker",{attrs:{x:a.width/3,y:a.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Yn.Marker.expand},name:"add-item"}),i.addShape("marker",{attrs:{x:a.width*2/3,y:a.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:Yn.Marker.collapse},name:"remove-item"})),e.label&&i.addShape("text",{attrs:Ya(Ya({},s.style),{},{text:e.label,x:a.width/2,y:a.height/1.5})}),l}},"rect")};Yn.registerEdge("fund-polyline",{draw:function(r,t){var e=r.startPoint,i=r.endPoint,a=i.y-e.y,o=a!==0?500/Math.abs(a):0,s=16,l=a<0?s:-s,u={x:e.x+o,y:i.y+l},f={x:u.x+s,y:i.y},c={x:(u.x-e.x)*(i.y-e.y)/(u.y-e.y)+e.x,y:i.y},v=[["M",e.x,e.y],["L",u.x,u.y],["Q",c.x,c.y,f.x,f.y],["L",i.x,i.y]];a===0&&(v=[["M",e.x,e.y],["L",i.x,i.y]]);var g=r||{},C=g.style,O=t.addShape("path",{attrs:{path:v,stroke:C.stroke||r.colorMap&&r.colorMap[r.dataType]?r.colorMap[r.dataType]:"#5B8FF9",lineWidth:C.lineWidth||1.2,endArrow:!1},name:"path-shape"}),F=0,G=8,Y;if(r.label&&(Y=t.addShape("text",{attrs:{text:r.label,x:f.x+F,y:i.y-G-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),r.dataType){var $=Y?Y.getBBox():{height:0};t.addShape("text",{attrs:{text:r.dataType,x:f.x+F,y:i.y-G-$.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return r.subLabel&&t.addShape("text",{attrs:{text:r.subLabel,x:f.x+F,y:i.y+G+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),O},update:void 0},"single-edge"),Yn.registerEdge("flow-line",{draw:function(r,t){var e=r.startPoint,i=r.endPoint,a=r.style,o=a===void 0?{}:a,s=t.addShape("path",{attrs:{stroke:o.stroke,endArrow:o.endArrow,path:[["M",e.x,e.y],["L",e.x,(e.y+i.y)/2],["L",i.x,(e.y+i.y)/2],["L",i.x,i.y]]}});return s}});function j1(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,e)}return t}function V8(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?j1(Object(t),!0).forEach(function(e){H8(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j1(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function H8(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}var W8={show:!1,size:[150,100],type:"keyShape"},Ws=function(r,t,e){var i,a;return e&&e.current&&(i=e.current.offsetWidth,a=e.current.offsetHeight||500),console.log("graph size",i,a,t,r,e,e.current),!r&&!i||!t&&!a?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[r||i||500,t||a||500]},js=function(r,t){if(!(!t||t.destroyed)&&r&&r.show){var e=Object.assign(W8,r),i=new Yn.Minimap(V8({},e));return t.addPlugin(i),i}};function Vu(n,r,t){var e=(0,H.useRef)(),i=r.data,a=r.nodeStyle,o=r.nodeAnchorPoints,s=r.nodeType,l=r.edgeType,u=r.edgeStyle,f=r.width,c=r.height,v=r.layout,g=r.minimapCfg,C=r.behaviors,O=r.nodeLabelCfg,F=r.edgeLabelCfg,G;return(0,H.useEffect)(function(){n&&!n.destroyed&&(n.changeData(i),n.layout())},[i]),(0,H.useEffect)(function(){n&&!n.destroyed&&n.getNodes().forEach(function(Y){n.updateItem(Y,{type:s,style:a,anchorPoints:o,labelCfg:O})})},[a,o,s]),(0,H.useEffect)(function(){n&&!n.destroyed&&n.getEdges().forEach(function(Y){n.updateItem(Y,{type:l,style:u,labelCfg:F})})},[u,l]),(0,H.useEffect)(function(){if(n&&!n.destroyed){var Y=Ws(f,c,t);n.changeSize(Y[0],Y[1])}},[t,f,c]),(0,H.useEffect)(function(){n&&!n.destroyed&&n.updateLayout(v)},[v]),(0,H.useEffect)(function(){if(!(!g||!n||n.destroyed))if(g.show)G=js(g,n),G&&G.updateCanvas();else{var Y=n.get("plugins")[0];Y&&n.removePlugin(Y)}},[g]),(0,H.useEffect)(function(){if(n&&!n.destroyed){var Y=n.get("modes"),$=Y.default,q=[];$.forEach(function(ut){(0,h.isObject)(ut)?q.push(ut.type):(0,h.isString)(ut)&&q.push(ut)}),n.removeBehaviors(q,"default"),n.addBehaviors(C,"default")}},[C]),(0,H.useEffect)(function(){if(e.current=n,n&&!n.destroyed)return function(){n.destroy(),n=void 0}},[]),{graphHook:e}}var U1={hover:{stroke:"#1890ff",lineWidth:2}},j8={fill:"#91d5ff",stroke:"#40a9ff",radius:5},U8={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},Z8={type:"compactBox",direction:"TB",getId:function(r){return r.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},Z1={style:{fill:"#000",fontSize:12}},Xi,K8=function(r){var t=r.data,e=r.className,i=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"rect":s,u=r.edgeType,f=u===void 0?"flow-line":u,c=r.collapseExpand,v=c===void 0?!1:c,g=r.nodeSize,C=g===void 0?[120,40]:g,O=r.nodeLabelCfg,F=O===void 0?Z1:O,G=r.edgeLabelCfg,Y=G===void 0?Z1:G,$=r.layout,q=$===void 0?Z8:$,ut=r.enableEdit,kt=ut===void 0?!1:ut,Nt=r.minimapCfg,Wt=r.nodeStyle,Ft=Wt===void 0?j8:Wt,ee=r.edgeStyle,ve=ee===void 0?U8:ee,fe=r.nodeStateStyles,Te=fe===void 0?U1:fe,Be=r.edgeStateStyles,ke=Be===void 0?U1:Be,Qe=r.handleNodeClick,tr=r.handleEdgeClick,rr=r.handleNodeHover,Ze=r.handleNodeUnHover,Ke=r.handleEdgeHover,wr=r.handleEdgeUnHover,br=r.handleCanvasClick,Ir=r.graphRef,ir={data:t,className:e,style:i,width:a,height:o,nodeType:l,edgeType:f,collapseExpand:v,nodeSize:C,nodeLabelCfg:F,edgeLabelCfg:Y,layout:q,enableEdit:kt,minimapCfg:Nt,nodeStyle:Ft,edgeStyle:ve,nodeStateStyles:Te,edgeStateStyles:ke,handleNodeClick:Qe,handleEdgeClick:tr,handleNodeHover:rr,handleNodeUnHover:Ze,handleEdgeHover:Ke,handleEdgeUnHover:wr,handleCanvasClick:br,graphRef:Ir},Mr=H.useRef(null);return Vu(Xi,ir,Mr),(0,H.useEffect)(function(){var zr=Ws(a,o,Mr);return(!Xi||Xi.destroyed)&&(l==="icon-node"&&X8({enableEdit:kt}),Xi=new Yn.TreeGraph({container:Mr.current,width:zr[0],height:zr[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:l,size:C,style:Ft,labelCfg:F},defaultEdge:{type:f,style:ve,labelCfg:Y},nodeStateStyles:Te,edgeStateStyles:ke,layout:q}),Ir&&(Ir.current=Xi)),js(Nt,Xi),Xi.data(t),Xi.render(),Xi.fitView(),v&&Xi.addBehaviors({type:"collapse-expand",onChange:function(_r,Hr){if(!_r)return!1;var li=_r.get("model").data;return li.collapsed=Hr,!0}},"default"),Xi.on("node:mouseenter",function(Lr){var _r=Lr.item;Xi.setItemState(_r,"hover",!0),rr&&rr(_r,Xi)}),Xi.on("node:mouseleave",function(Lr){var _r=Lr.item;Xi.setItemState(_r,"hover",!1),Ze&&Ze(_r,Xi)}),Xi.on("node:click",function(Lr){var _r=Lr.item,Hr=Lr.target,li=Hr.get("type"),Br=Hr.get("name");if(li==="marker"){var Ne=_r.getModel();if(Br==="add-item"){Ne.children||(Ne.children=[]);var ar=Math.random().toString(36).slice(-8);Ne.children.push({id:ar,label:ar}),Xi.updateChild(Ne,Ne.id)}else Br==="remove-item"&&Xi.removeChild(Ne.id)}else Qe&&Qe(_r,Xi)}),Xi.on("edge:mouseenter",function(Lr){var _r=Lr.item;Xi.setItemState(_r,"hover",!0),Ke&&Ke(_r,Xi)}),Xi.on("edge:mouseleave",function(Lr){var _r=Lr.item;Xi.setItemState(_r,"hover",!1),wr&&wr(_r,Xi)}),Xi.on("edge:click",function(Lr){var _r=Lr.item;tr&&tr(_r,Xi)}),Xi.on("canvas:click",function(Lr){br&&br(Xi)}),function(){return Xi.destroy()}},[]),H.createElement(ci,null,H.createElement("div",{className:e,style:i,ref:Mr}))},$8=K8,K1={hover:{stroke:"#1890ff",lineWidth:2}},Q8=[120,40],J8={stroke:"#40a9ff"},q8=[[.5,0],[.5,1]],tY={stroke:"#91d5ff",endArrow:{path:Yn.Arrow.vee(10,10),fill:"#91d5ff"}},eY={type:"dagre",rankdir:"TB",nodesepFunc:function(r){return 0},ranksepFunc:function(r){return 0},controlPoints:!0},$1={style:{fill:"#000",fontSize:12}},Qi,rY=function(r){var t=r.data,e=r.className,i=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"modelRect":s,u=r.edgeType,f=u===void 0?"polyline":u,c=r.behaviors,v=c===void 0?["zoom-canvas","drag-canvas"]:c,g=r.nodeSize,C=g===void 0?Q8:g,O=r.nodeLabelCfg,F=O===void 0?$1:O,G=r.edgeLabelCfg,Y=G===void 0?$1:G,$=r.nodeAnchorPoints,q=$===void 0?q8:$,ut=r.layout,kt=ut===void 0?eY:ut,Nt=r.minimapCfg,Wt=r.nodeStyle,Ft=Wt===void 0?J8:Wt,ee=r.edgeStyle,ve=ee===void 0?tY:ee,fe=r.nodeStateStyles,Te=fe===void 0?K1:fe,Be=r.edgeStateStyles,ke=Be===void 0?K1:Be,Qe=r.handleEdgeClick,tr=r.handleEdgeHover,rr=r.handleEdgeUnHover,Ze=r.handleNodeClick,Ke=r.handleNodeHover,wr=r.handleNodeUnHover,br=r.handleCanvasClick,Ir=r.graphRef,ir={data:t,className:e,style:i,width:a,height:o,nodeType:l,edgeType:f,behaviors:v,nodeSize:C,nodeLabelCfg:F,edgeLabelCfg:Y,nodeAnchorPoints:q,layout:kt,minimapCfg:Nt,nodeStyle:Ft,edgeStyle:ve,nodeStateStyles:Te,edgeStateStyles:ke,handleEdgeClick:Qe,handleEdgeHover:tr,handleEdgeUnHover:rr,handleNodeClick:Ze,handleNodeHover:Ke,handleNodeUnHover:wr,handleCanvasClick:br,graphRef:Ir},Mr=H.useRef(null);return Vu(Qi,ir,Mr),(0,H.useEffect)(function(){var zr=Ws(a,o,Mr);return(!Qi||Qi.destroyed)&&(Qi=new Yn.Graph({container:Mr.current,width:zr[0],height:zr[1],modes:{default:v},defaultNode:{type:l,size:C,style:Ft,anchorPoints:q,labelCfg:F},defaultEdge:{type:f,style:ve,labelCfg:Y},nodeStateStyles:Te,edgeStateStyles:ke,layout:kt}),Ir&&(Ir.current=Qi)),js(Nt,Qi),Qi.data(t),Qi.render(),Qi.fitView(),Qi.on("edge:mouseenter",function(Lr){var _r=Lr.item;Qi.setItemState(_r,"hover",!0),tr&&tr(_r,Qi)}),Qi.on("node:mouseenter",function(Lr){var _r=Lr.item;Qi.setItemState(_r,"hover",!1),Ke&&Ke(_r,Qi)}),Qi.on("edge:mouseleave",function(Lr){var _r=Lr.item;Qi.setItemState(_r,"hover",!1),rr&&rr(_r,Qi)}),Qi.on("node:mouseleave",function(Lr){var _r=Lr.item;Qi.setItemState(_r,"hover",!1),wr&&wr(_r,Qi)}),Qi.on("edge:click",function(Lr){var _r=Lr.item;Qe&&Qe(_r,Qi)}),Qi.on("node:click",function(Lr){var _r=Lr.item;Ze&&Ze(_r,Qi)}),Qi.on("canvas:click",function(Lr){br&&br(Qi)}),function(){return Qi.destroy()}},[]),H.createElement(ci,null,H.createElement("div",{className:e,style:i,ref:Mr}))},iY=rY,Q1={hover:{stroke:"#1890ff",lineWidth:2}},nY=[150,30],aY={stroke:"#72CC4A",fill:"#f00"},oY=[[.5,0],[.5,1]],sY={stroke:"#91d5ff",endArrow:{path:Yn.Arrow.vee(10,10),fill:"#91d5ff"}},lY={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},J1={style:{fill:"#000000A6",fontSize:10}},ji,uY=function(r){var t=r.data,e=r.className,i=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"round-rect":s,u=r.edgeType,f=u===void 0?"fund-polyline":u,c=r.behaviors,v=c===void 0?["zoom-canvas","drag-canvas"]:c,g=r.nodeSize,C=g===void 0?nY:g,O=r.nodeLabelCfg,F=O===void 0?J1:O,G=r.edgeLabelCfg,Y=G===void 0?J1:G,$=r.nodeAnchorPoints,q=$===void 0?oY:$,ut=r.layout,kt=ut===void 0?lY:ut,Nt=r.minimapCfg,Wt=r.nodeStyle,Ft=Wt===void 0?aY:Wt,ee=r.edgeStyle,ve=ee===void 0?sY:ee,fe=r.nodeStateStyles,Te=fe===void 0?Q1:fe,Be=r.edgeStateStyles,ke=Be===void 0?Q1:Be,Qe=r.colorMap,tr=Qe===void 0?{}:Qe,rr=r.handleEdgeClick,Ze=r.handleEdgeHover,Ke=r.handleEdgeUnHover,wr=r.handleNodeClick,br=r.handleNodeHover,Ir=r.handleNodeUnHover,ir=r.handleCanvasClick,Mr=r.graphRef,zr=H.useRef(null),Lr={data:t,className:e,style:i,width:a,height:o,nodeType:l,edgeType:f,behaviors:v,nodeSize:C,nodeLabelCfg:F,edgeLabelCfg:Y,nodeAnchorPoints:q,layout:kt,minimapCfg:Nt,nodeStyle:Ft,edgeStyle:ve,nodeStateStyles:Te,edgeStateStyles:ke,colorMap:tr,handleEdgeClick:rr,handleEdgeHover:Ze,handleEdgeUnHover:Ke,handleNodeClick:wr,handleNodeHover:br,handleNodeUnHover:Ir,handleCanvasClick:ir,graphRef:Mr};return Vu(ji,Lr,zr),(0,H.useEffect)(function(){var _r=Ws(a,o,zr);(!ji||ji.destroyed)&&(ji=new Yn.Graph({container:zr.current,width:_r[0],height:_r[1],modes:{default:v},defaultNode:{type:l,size:C,style:Ft,anchorPoints:q,labelCfg:F},defaultEdge:{type:f,style:ve,colorMap:tr,labelCfg:Y},nodeStateStyles:Te,edgeStateStyles:ke,layout:kt}),Mr&&(Mr.current=ji)),js(Nt,ji),ji.data(t),ji.render();var Hr=ji.getEdges();return Hr.forEach(function(li){var Br=li.getKeyShape(),Ne=Br.attr("stroke"),ar=li.getTarget();ar.update({style:{stroke:Ne}})}),ji.fitView(),ji.on("edge:mouseenter",function(li){var Br=li.item;ji.setItemState(Br,"hover",!0),Ze&&Ze(Br,ji)}),ji.on("edge:mouseleave",function(li){var Br=li.item;ji.setItemState(Br,"hover",!1),Ke&&Ke(Br,ji)}),ji.on("edge:click",function(li){var Br=li.item;rr&&rr(Br,ji)}),ji.on("node:mouseenter",function(li){var Br=li.item;ji.setItemState(Br,"hover",!1),br&&br(Br,ji)}),ji.on("node:mouseleave",function(li){var Br=li.item;ji.setItemState(Br,"hover",!1),Ir&&Ir(Br,ji)}),ji.on("node:click",function(li){var Br=li.item;wr&&wr(Br,ji)}),ji.on("canvas:click",function(li){ir&&ir(ji)}),function(){return ji.destroy()}},[]),H.createElement(ci,null,H.createElement("div",{className:e,style:i,ref:zr}))},hY=uY,q1={hover:{stroke:"#1890ff",lineWidth:2}},fY=[120,40],cY={stroke:"#40a9ff"},vY=[[0,.5],[1,.5]],dY={stroke:"#ccc",endArrow:{path:Yn.Arrow.vee(10,10),fill:"#ccc"}},pY={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(r){return 100}},gY={style:{fill:"#000",fontSize:12}},Hi,yY=function(r){var t=r.data,e=r.className,i=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"card-node":s,u=r.edgeType,f=u===void 0?"cubic-horizontal":u,c=r.behaviors,v=c===void 0?["zoom-canvas","drag-canvas"]:c,g=r.nodeSize,C=g===void 0?fY:g,O=r.nodeLabelCfg,F=O===void 0?gY:O,G=r.nodeAnchorPoints,Y=G===void 0?vY:G,$=r.layout,q=$===void 0?pY:$,ut=r.minimapCfg,kt=r.nodeStyle,Nt=kt===void 0?cY:kt,Wt=r.edgeStyle,Ft=Wt===void 0?dY:Wt,ee=r.nodeStateStyles,ve=ee===void 0?q1:ee,fe=r.edgeStateStyles,Te=fe===void 0?q1:fe,Be=r.collapseExpand,ke=Be===void 0?!0:Be,Qe=r.handleEdgeClick,tr=r.handleEdgeHover,rr=r.handleEdgeUnHover,Ze=r.handleNodeClick,Ke=r.handleNodeHover,wr=r.handleNodeUnHover,br=r.handleCanvasClick,Ir=r.graphRef,ir=H.useRef(null),Mr={data:t,className:e,style:i,width:a,height:o,nodeType:l,edgeType:f,behaviors:v,nodeSize:C,nodeLabelCfg:F,nodeAnchorPoints:Y,layout:q,minimapCfg:ut,nodeStyle:Nt,edgeStyle:Ft,nodeStateStyles:ve,edgeStateStyles:Te,collapseExpand:ke,handleEdgeClick:Qe,handleEdgeHover:tr,handleEdgeUnHover:rr,handleNodeClick:Ze,handleNodeHover:Ke,handleNodeUnHover:wr,handleCanvasClick:br,graphRef:Ir};return Vu(Hi,Mr,ir),(0,H.useEffect)(function(){var zr=Ws(a,o,ir);return(!Hi||Hi.destroyed)&&(Hi=new Yn.TreeGraph({container:ir.current,width:zr[0],height:zr[1],modes:{default:v},defaultNode:{type:l,size:C,style:Nt,anchorPoints:Y,labelCfg:F},defaultEdge:{type:f,style:Ft},nodeStateStyles:ve,edgeStateStyles:Te,layout:q}),Ir&&(Ir.current=Hi)),js(ut,Hi),Hi.data(t),Hi.render(),Hi.fitView(),ke&&Hi.on("node:click",function(Lr){var _r=Lr.item;Lr.target.get("name")==="collapse-icon"?(Hi.updateItem(_r,{collapsed:!_r.getModel().collapsed}),Hi.layout()):Ze&&Ze(_r,Hi)}),Hi.on("edge:mouseenter",function(Lr){var _r=Lr.item;Hi.setItemState(_r,"hover",!0),tr&&tr(_r,Hi)}),Hi.on("edge:mouseleave",function(Lr){var _r=Lr.item;Hi.setItemState(_r,"hover",!1),rr&&rr(_r,Hi)}),Hi.on("edge:click",function(Lr){var _r=Lr.item;Qe&&Qe(_r,Hi)}),Hi.on("node:mouseenter",function(Lr){var _r=Lr.item;Hi.setItemState(_r,"hover",!1),Ke&&Ke(_r,Hi)}),Hi.on("node:mouseleave",function(Lr){var _r=Lr.item;Hi.setItemState(_r,"hover",!1),wr&&wr(_r,Hi)}),Hi.on("canvas:click",function(Lr){br&&br(Hi)}),function(){return Hi.destroy()}},[]),H.createElement(ci,null,H.createElement("div",{className:e,style:i,ref:ir}))},mY=yY,wz={Area:$D,Bar:qD,Bubble:r5,Bullet:a5,Calendar:u5,Column:A0,ColumnLine:d5,DensityHeatmap:y5,Donut:L0,DualLine:S5,FanGauge:E5,Funnel:P5,Gauge:B0,GroupedBar:B5,GroupedColumn:R5,GroupedColumnLine:G5,GroupedRose:V5,Heatmap:j5,Histogram:K5,Line:X0,Liquid:H0,MeterGauge:rF,PercentStackedArea:aF,PercentStackedBar:lF,PercentStackedColumn:fF,Pie:dF,Progress:Q0,Radar:q0,RangeBar:wF,RangeColumn:MF,RingProgress:im,Rose:PF,Scatter:kF,StackedArea:DF,StackedBar:NF,StackedColumn:zF,StackedColumnLine:HF,StackedRose:UF,StepLine:$F,TinyArea:vm,TinyColumn:pm,TinyLine:iR,Treemap:oR,Waterfall:uR,WordCloud:xm,OrganizationTreeGraph:$8,DagreGraph:iY,IndentedTree:mY,DagreFundFlowGraph:hY,G2:_}},84177:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(8501),I=function(){function P(_){var T=_.xField,M=_.yField,A=_.adjustNames,p=A===void 0?["x","y"]:A,w=_.dimValuesMap;this.adjustNames=p,this.xField=T,this.yField=M,this.dimValuesMap=w}return P.prototype.isAdjust=function(_){return this.adjustNames.indexOf(_)>=0},P.prototype.getAdjustRange=function(_,T,M){var A=this.yField,p=M.indexOf(T),w=M.length,y,b;return!A&&this.isAdjust("y")?(y=0,b=1):w>1?(y=M[p===0?0:p-1],b=M[p===w-1?w-1:p+1],p!==0?y+=(T-y)/2:y-=(b-T)/2,p!==w-1?b-=(b-T)/2:b+=(T-M[w-2])/2):(y=T===0?0:T-.5,b=T===0?1:T+.5),{pre:y,next:b}},P.prototype.adjustData=function(_,T){var M=this,A=this.getDimValues(T);m.each(_,function(p,w){m.each(A,function(y,b){M.adjustDim(b,y,p,w)})})},P.prototype.groupData=function(_,T){return m.each(_,function(M){M[T]===void 0&&(M[T]=L.DEFAULT_Y)}),m.groupBy(_,T)},P.prototype.adjustDim=function(_,T,M,A){},P.prototype.getDimValues=function(_){var T=this,M=T.xField,A=T.yField,p=m.assign({},this.dimValuesMap),w=[];if(M&&this.isAdjust("x")&&w.push(M),A&&this.isAdjust("y")&&w.push(A),w.forEach(function(b){p&&p[b]||(p[b]=m.valuesOfKey(_,b).sort(function(x,E){return x-E}))}),!A&&this.isAdjust("y")){var y="y";p[y]=[L.DEFAULT_Y,1]}return p},P}();S.default=I},8501:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.GAP=S.DODGE_RATIO=S.MARGIN_RATIO=S.DEFAULT_Y=void 0,S.DEFAULT_Y=0,S.MARGIN_RATIO=1/2,S.DODGE_RATIO=1/2,S.GAP=.05},63638:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Adjust=S.registerAdjust=S.getAdjust=void 0;var m=d(51467),L=d(84177);S.Adjust=L.default;var I={},P=function(T){return I[T.toLowerCase()]};S.getAdjust=P;var _=function(T,M){if(P(T))throw new Error("Adjust type '"+T+"' existed.");I[T.toLowerCase()]=M};S.registerAdjust=_,m.__exportStar(d(26445),S)},26445:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0})},36652:function(lt,S,d){"use strict";d.r(S),d.d(S,{Attribute:function(){return P},Color:function(){return A},Opacity:function(){return w},Position:function(){return b},Scale:function(){return N.Scale},Shape:function(){return E},Size:function(){return D},getAttribute:function(){return W},registerAttribute:function(){return X}});var m=d(26169),L=function(U,et){return(0,m.isString)(et)?et:U.invert(U.scale(et))},I=function(){function U(et){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(et)}return U.prototype.mapping=function(){for(var et=this,Q=[],ct=0;ct<arguments.length;ct++)Q[ct]=arguments[ct];var Lt=Q.map(function(_t,yt){return et._toOriginParam(_t,et.scales[yt])});return this.callback.apply(this,Lt)},U.prototype.getLinearValue=function(et){var Q=this.values.length-1,ct=Math.floor(Q*et),Lt=Q*et-ct,_t=this.values[ct],yt=ct===Q?_t:this.values[ct+1];return _t+(yt-_t)*Lt},U.prototype.getNames=function(){for(var et=this.scales,Q=this.names,ct=Math.min(et.length,Q.length),Lt=[],_t=0;_t<ct;_t+=1)Lt.push(Q[_t]);return Lt},U.prototype.getFields=function(){return this.scales.map(function(et){return et.field})},U.prototype.getScale=function(et){return this.scales[this.names.indexOf(et)]},U.prototype.defaultCallback=function(){for(var et=this,Q=[],ct=0;ct<arguments.length;ct++)Q[ct]=arguments[ct];return Q.length===0?this.values:Q.map(function(Lt,_t){var yt=et.scales[_t];return yt.type==="identity"?yt.values[0]:et._getAttributeValue(yt,Lt)})},U.prototype._parseCfg=function(et){var Q=this,ct=et.type,Lt=ct===void 0?"base":ct,_t=et.names,yt=_t===void 0?[]:_t,bt=et.scales,Mt=bt===void 0?[]:bt,xt=et.values,Bt=xt===void 0?[]:xt,wt=et.callback;this.type=Lt,this.scales=Mt,this.values=Bt,this.names=yt,this.callback=function(){for(var H=[],K=0;K<arguments.length;K++)H[K]=arguments[K];if(wt){var B=wt.apply(void 0,H);if(!(0,m.isNil)(B))return[B]}return Q.defaultCallback.apply(Q,H)}},U.prototype._getAttributeValue=function(et,Q){if(et.isCategory&&!this.linear){var ct=et.translate(Q);return this.values[ct%this.values.length]}var Lt=et.scale(Q);return this.getLinearValue(Lt)},U.prototype._toOriginParam=function(et,Q){return Q.isLinear?et:(0,m.isArray)(et)?et.map(function(ct){return L(Q,ct)}):L(Q,et)},U}(),P=I,_=d(51467),T=d(87892),M=function(U){(0,_.__extends)(et,U);function et(Q){var ct=U.call(this,Q)||this;return ct.type="color",ct.names=["color"],(0,m.isString)(ct.values)&&(ct.linear=!0),ct.gradient=T.default.gradient(ct.values),ct}return et.prototype.getLinearValue=function(Q){return this.gradient(Q)},et}(P),A=M,p=function(U){(0,_.__extends)(et,U);function et(Q){var ct=U.call(this,Q)||this;return ct.type="opacity",ct.names=["opacity"],ct}return et}(P),w=p,y=function(U){(0,_.__extends)(et,U);function et(Q){var ct=U.call(this,Q)||this;return ct.names=["x","y"],ct.type="position",ct}return et.prototype.mapping=function(Q,ct){var Lt=this.scales,_t=Lt[0],yt=Lt[1];return(0,m.isNil)(Q)||(0,m.isNil)(ct)?[]:[(0,m.isArray)(Q)?Q.map(function(bt){return _t.scale(bt)}):_t.scale(Q),(0,m.isArray)(ct)?ct.map(function(bt){return yt.scale(bt)}):yt.scale(ct)]},et}(P),b=y,x=function(U){(0,_.__extends)(et,U);function et(Q){var ct=U.call(this,Q)||this;return ct.type="shape",ct.names=["shape"],ct}return et.prototype.getLinearValue=function(Q){var ct=Math.round((this.values.length-1)*Q);return this.values[ct]},et}(P),E=x,k=function(U){(0,_.__extends)(et,U);function et(Q){var ct=U.call(this,Q)||this;return ct.type="size",ct.names=["size"],ct}return et}(P),D=k,N=d(65624),z={},W=function(U){return z[U.toLowerCase()]},X=function(U,et){if(W(U))throw new Error("Attribute type '"+U+"' existed.");z[U.toLowerCase()]=et};X("Color",A),X("Opacity",w),X("Position",b),X("Shape",E),X("Size",D)},1620:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=function(P,_){return m.isString(_)?_:P.invert(P.scale(_))},I=function(){function P(_){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(_)}return P.prototype.mapping=function(){for(var _=this,T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var A=T.map(function(p,w){return _._toOriginParam(p,_.scales[w])});return this.callback.apply(this,A)},P.prototype.getLinearValue=function(_){var T=this.values.length-1,M=Math.floor(T*_),A=T*_-M,p=this.values[M],w=M===T?p:this.values[M+1];return p+(w-p)*A},P.prototype.getNames=function(){for(var _=this.scales,T=this.names,M=Math.min(_.length,T.length),A=[],p=0;p<M;p+=1)A.push(T[p]);return A},P.prototype.getFields=function(){return this.scales.map(function(_){return _.field})},P.prototype.getScale=function(_){return this.scales[this.names.indexOf(_)]},P.prototype.defaultCallback=function(){for(var _=this,T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];return T.length===0?this.values:T.map(function(A,p){var w=_.scales[p];return w.type==="identity"?w.values[0]:_._getAttributeValue(w,A)})},P.prototype._parseCfg=function(_){var T=this,M=_.type,A=M===void 0?"base":M,p=_.names,w=p===void 0?[]:p,y=_.scales,b=y===void 0?[]:y,x=_.values,E=x===void 0?[]:x,k=_.callback;this.type=A,this.scales=b,this.values=E,this.names=w,this.callback=function(){for(var D=[],N=0;N<arguments.length;N++)D[N]=arguments[N];if(k){var z=k.apply(void 0,D);if(!m.isNil(z))return[z]}return T.defaultCallback.apply(T,D)}},P.prototype._getAttributeValue=function(_,T){if(_.isCategory&&!this.linear){var M=_.translate(T);return this.values[M%this.values.length]}var A=_.scale(T);return this.getLinearValue(A)},P.prototype._toOriginParam=function(_,T){return T.isLinear?_:m.isArray(_)?_.map(function(M){return L(T,M)}):L(T,_)},P}();S.default=I},76499:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Attribute=S.registerAttribute=S.getAttribute=void 0;var m=d(51467),L=d(1620);S.Attribute=L.default;var I={},P=function(T){return I[T.toLowerCase()]};S.getAttribute=P;var _=function(T,M){if(P(T))throw new Error("Attribute type '"+T+"' existed.");I[T.toLowerCase()]=M};S.registerAttribute=_,m.__exportStar(d(77646),S)},77646:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Scale=void 0;var m=d(65624);Object.defineProperty(S,"Scale",{enumerable:!0,get:function(){return m.Scale}})},87892:function(lt,S,d){"use strict";d.r(S);var m=d(26169),L=/rgba?\(([\s.,0-9]+)\)/,I=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,P=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,T=function(N){return/^[r,R,L,l]{1}[\s]*\(/.test(N)},M=function(){var N=document.createElement("i");return N.title="Web Colour Picker",N.style.display="none",document.body.appendChild(N),N},A=function(N,z,W,X){return N[X]+(z[X]-N[X])*W};function p(N){return"#"+y(N[0])+y(N[1])+y(N[2])}var w=function(N){return[parseInt(N.substr(1,2),16),parseInt(N.substr(3,2),16),parseInt(N.substr(5,2),16)]},y=function(N){var z=Math.round(N).toString(16);return z.length===1?"0"+z:z},b=function(N,z){var W=isNaN(Number(z))||z<0?0:z>1?1:Number(z),X=N.length-1,U=Math.floor(X*W),et=X*W-U,Q=N[U],ct=U===X?Q:N[U+1];return p([A(Q,ct,et,0),A(Q,ct,et,1),A(Q,ct,et,2)])},x,E=function(N){if(N[0]==="#"&&N.length===7)return N;x||(x=M()),x.style.color=N;var z=document.defaultView.getComputedStyle(x,"").getPropertyValue("color"),W=L.exec(z),X=W[1].split(/\s*,\s*/).map(function(U){return Number(U)});return z=p(X),z},k=function(N){var z=(0,m.isString)(N)?N.split("-"):N,W=(0,m.map)(z,function(X){return w(X.indexOf("#")===-1?E(X):X)});return function(X){return b(W,X)}},D=function(N){if(T(N)){var z,W=void 0;if(N[0]==="l"){var X=I.exec(N),U=+X[1]+90;W=X[2],z="linear-gradient("+U+"deg, "}else if(N[0]==="r"){z="radial-gradient(";var X=P.exec(N);W=X[4]}var et=W.match(_);return(0,m.each)(et,function(Q,ct){var Lt=Q.split(":");z+=Lt[1]+" "+Lt[0]*100+"%",ct!==et.length-1&&(z+=", ")}),z+=")",z}return N};S.default={rgb2arr:w,gradient:k,toRGB:(0,m.memoize)(E),toCSSGradient:D}},41026:function(lt,S,d){"use strict";d.r(S),d.d(S,{Annotation:function(){return m},Axis:function(){return T},Component:function(){return Pt},Crosshair:function(){return M},Grid:function(){return A},GroupComponent:function(){return J},HtmlComponent:function(){return Ln},Legend:function(){return p},Scrollbar:function(){return Ha},Slider:function(){return no},Tooltip:function(){return y}});var m={};d.r(m),d.d(m,{Arc:function(){return mn},DataMarker:function(){return ce},DataRegion:function(){return Ee},Image:function(){return $t},Line:function(){return bi},Region:function(){return Xn},RegionFilter:function(){return Le},Text:function(){return gi}});var L={};d.r(L),d.d(L,{ellipsisHead:function(){return fr},ellipsisMiddle:function(){return yr},ellipsisTail:function(){return Sr},getDefault:function(){return Ar}});var I={};d.r(I),d.d(I,{equidistance:function(){return Kt},getDefault:function(){return Kr},reserveBoth:function(){return Ut},reserveFirst:function(){return Vr},reserveLast:function(){return Zr}});var P={};d.r(P),d.d(P,{fixedAngle:function(){return Pe},getDefault:function(){return Me},unfixedAngle:function(){return Je}});var _={};d.r(_),d.d(_,{autoEllipsis:function(){return L},autoHide:function(){return I},autoRotate:function(){return P}});var T={};d.r(T),d.d(T,{Base:function(){return Xe},Circle:function(){return Tr},Line:function(){return Dr}});var M={};d.r(M),d.d(M,{Base:function(){return Mi},Circle:function(){return qi},Html:function(){return de},Line:function(){return di}});var A={};d.r(A),d.d(A,{Base:function(){return ye},Circle:function(){return je},Line:function(){return vr}});var p={};d.r(p),d.d(p,{Base:function(){return kr},Category:function(){return dt},Continuous:function(){return St}});var w={};d.r(w),d.d(w,{CONTAINER_CLASS:function(){return qt},CROSSHAIR_X:function(){return nr},CROSSHAIR_Y:function(){return ze},LIST_CLASS:function(){return ne},LIST_ITEM_CLASS:function(){return Oe},MARKER_CLASS:function(){return Ie},NAME_CLASS:function(){return or},TITLE_CLASS:function(){return ae},VALUE_CLASS:function(){return De}});var y={};d.r(y),d.d(y,{Html:function(){return Oi}});var b=d(51467),x=d(26169),E=d(58992);function k(Gt,at,R){var V=new E.default(at,R);V.target=Gt,V.propagationPath.push(Gt),Gt.emitDelegation(at,V);for(var tt=Gt.getParent();tt;)tt.emitDelegation(at,V),V.propagationPath.push(tt),tt=tt.getParent()}var D=d(50669),N=d(7124),z=[1,0,0,0,1,0,0,0,1];function W(Gt,at,R){if(R===void 0&&(R=z),!at)return null;var V=D.transform(R,[["t",-Gt.x,-Gt.y],["r",at],["t",Gt.x,Gt.y]]);return V}function X(Gt,at){return!Gt.x&&!Gt.y?null:D.transform(at||z,[["t",Gt.x,Gt.y]])}function U(Gt){var at=[1,0,0],R=[0,0,0];return vec3.transformMat3(R,at,Gt),Math.atan2(R[1],R[0])}function et(Gt,at){var R=[0,0];return N.transformMat3(R,at,Gt),R}function Q(Gt,at){var R=et(Gt,[at.minX,at.minY]),V=et(Gt,[at.maxX,at.minY]),tt=et(Gt,[at.minX,at.maxY]),ht=et(Gt,[at.maxX,at.maxY]),It=Math.min(R[0],V[0],tt[0],ht[0]),Yt=Math.max(R[0],V[0],tt[0],ht[0]),re=Math.min(R[1],V[1],tt[1],ht[1]),le=Math.max(R[1],V[1],tt[1],ht[1]);return{x:It,y:re,minX:It,minY:re,maxX:Yt,maxY:le,width:Yt-It,height:le-re}}function ct(Gt,at,R,V){if(at){var tt=W({x:R,y:V},at,Gt.getMatrix());Gt.setMatrix(tt)}}function Lt(Gt,at,R){var V=X({x:at,y:R});Gt.attr("matrix",V)}function _t(Gt){var at=0,R=0,V=0,tt=0;return(0,x.isNumber)(Gt)?at=R=V=tt=Gt:(0,x.isArray)(Gt)&&(at=Gt[0],V=(0,x.isNil)(Gt[1])?Gt[0]:Gt[1],tt=(0,x.isNil)(Gt[2])?Gt[0]:Gt[2],R=(0,x.isNil)(Gt[3])?V:Gt[3]),[at,V,tt,R]}function yt(Gt){for(var at=Gt.childNodes,R=at.length,V=R-1;V>=0;V--)Gt.removeChild(at[V])}function bt(Gt,at){return!!Gt.className.match(new RegExp("(\\s|^)"+at+"(\\s|$)"))}function Mt(Gt){var at=Gt.start,R=Gt.end,V=Math.min(at.x,R.x),tt=Math.min(at.y,R.y),ht=Math.max(at.x,R.x),It=Math.max(at.y,R.y);return{x:V,y:tt,minX:V,minY:tt,maxX:ht,maxY:It,width:ht-V,height:It-tt}}function xt(Gt){var at=Gt.map(function(Yt){return Yt.x}),R=Gt.map(function(Yt){return Yt.y}),V=Math.min.apply(Math,at),tt=Math.min.apply(Math,R),ht=Math.max.apply(Math,at),It=Math.max.apply(Math,R);return{x:V,y:tt,minX:V,minY:tt,maxX:ht,maxY:It,width:ht-V,height:It-tt}}function Bt(Gt,at,R,V){return{x:Gt,y:at,width:R,height:V,minX:Gt,minY:at,maxX:Gt+R,maxY:at+V}}function wt(Gt,at,R){return(1-R)*Gt+at*R}function H(Gt,at,R){return{x:Gt.x+Math.cos(R)*at,y:Gt.y+Math.sin(R)*at}}function K(Gt,at){var R=at.x-Gt.x,V=at.y-Gt.y;return Math.sqrt(R*R+V*V)}var B=function(Gt){return new Promise(function(at){setTimeout(at,Gt)})},h=function(Gt,at){return[Gt,at].includes(Infinity)?Math.abs(Gt)===Math.abs(at):Math.abs(Gt-at)<Math.pow(Number.EPSILON,.5)};function mt(Gt,at){var R=Math.max(Gt.minX,at.minX),V=Math.max(Gt.minY,at.minY),tt=Math.min(Gt.maxX,at.maxX),ht=Math.min(Gt.maxY,at.maxY);return Bt(R,V,tt-R,ht-V)}function gt(Gt,at){var R=Math.min(Gt.minX,at.minX),V=Math.min(Gt.minY,at.minY),tt=Math.max(Gt.maxX,at.maxX),ht=Math.max(Gt.maxY,at.maxY);return Bt(R,V,tt-R,ht-V)}function Vt(Gt){var at=Gt.getClip(),R=at&&at.getBBox(),V;if(!Gt.isGroup())V=Gt.getBBox();else{var tt=Infinity,ht=-Infinity,It=Infinity,Yt=-Infinity,re=Gt.getChildren();re.length>0?(0,x.each)(re,function(le){if(le.get("visible")){if(le.isGroup()&&le.get("children").length===0)return!0;var be=Vt(le),Ae=le.applyToMatrix([be.minX,be.minY,1]),We=le.applyToMatrix([be.minX,be.maxY,1]),qe=le.applyToMatrix([be.maxX,be.minY,1]),Cr=le.applyToMatrix([be.maxX,be.maxY,1]),jr=Math.min(Ae[0],We[0],qe[0],Cr[0]),Gr=Math.max(Ae[0],We[0],qe[0],Cr[0]),mi=Math.min(Ae[1],We[1],qe[1],Cr[1]),wi=Math.max(Ae[1],We[1],qe[1],Cr[1]);jr<tt&&(tt=jr),Gr>ht&&(ht=Gr),mi<It&&(It=mi),wi>Yt&&(Yt=wi)}}):(tt=0,ht=0,It=0,Yt=0),V=Bt(tt,It,ht-tt,Yt-It)}return R?mt(V,R):V}function Jt(Gt,at){if(!(!Gt.getClip()&&!at.getClip())){var R=at.getClip();if(!R){Gt.setClip(null);return}var V={type:R.get("type"),attrs:R.attr()};Gt.setClip(V)}}function zt(Gt){return Gt+"px"}function Qt(Gt,at,R,V){var tt=K(Gt,at),ht=V/tt,It=0;return R==="start"?It=0-ht:R==="end"&&(It=1+ht),{x:wt(Gt.x,at.x,It),y:wt(Gt.y,at.y,It)}}var oe=d(23443),se={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},jt=function(Gt){(0,b.__extends)(at,Gt);function at(R){var V=Gt.call(this,R)||this;return V.initCfg(),V}return at.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},at.prototype.clear=function(){},at.prototype.update=function(R){var V=this,tt=this.get("defaultCfg");(0,x.each)(R,function(ht,It){var Yt=V.get(It),re=ht;Yt!==ht&&((0,x.isObject)(ht)&&tt[It]&&(re=(0,x.deepMix)({},tt[It],ht)),V.set(It,re))}),this.updateInner(R),this.afterUpdate(R)},at.prototype.updateInner=function(R){},at.prototype.afterUpdate=function(R){(0,x.hasKey)(R,"visible")&&(R.visible?this.show():this.hide()),(0,x.hasKey)(R,"capture")&&this.setCapture(R.capture)},at.prototype.getLayoutBBox=function(){return this.getBBox()},at.prototype.getLocationType=function(){return this.get("locationType")},at.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},at.prototype.setOffset=function(R,V){this.update({offsetX:R,offsetY:V})},at.prototype.setLocation=function(R){var V=(0,b.__assign)({},R);this.update(V)},at.prototype.getLocation=function(){var R=this,V={},tt=this.get("locationType"),ht=se[tt];return(0,x.each)(ht,function(It){V[It]=R.get(It)}),V},at.prototype.isList=function(){return!1},at.prototype.isSlider=function(){return!1},at.prototype.init=function(){},at.prototype.initCfg=function(){var R=this,V=this.get("defaultCfg");(0,x.each)(V,function(tt,ht){var It=R.get(ht);if((0,x.isObject)(It)){var Yt=(0,x.deepMix)({},tt,It);R.set(ht,Yt)}})},at}(oe.Base),Pt=jt,pt="update_status",st=["visible","tip","delegateObject"],Ct=["container","group","shapesMap","isRegister","isUpdating","destroyed"],nt=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},at.prototype.remove=function(){this.clear();var R=this.get("group");R.remove()},at.prototype.clear=function(){var R=this.get("group");R.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},at.prototype.getChildComponentById=function(R){var V=this.getElementById(R),tt=V&&V.get("component");return tt},at.prototype.getElementById=function(R){return this.get("shapesMap")[R]},at.prototype.getElementByLocalId=function(R){var V=this.getElementId(R);return this.getElementById(V)},at.prototype.getElementsByName=function(R){var V=[];return(0,x.each)(this.get("shapesMap"),function(tt){tt.get("name")===R&&V.push(tt)}),V},at.prototype.getContainer=function(){return this.get("container")},at.prototype.updateInner=function(R){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},at.prototype.render=function(){var R=this.get("offScreenGroup");R||(R=this.offScreenRender());var V=this.get("group");this.updateElements(R,V),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},at.prototype.show=function(){var R=this.get("group");R.show(),this.set("visible",!0)},at.prototype.hide=function(){var R=this.get("group");R.hide(),this.set("visible",!1)},at.prototype.setCapture=function(R){var V=this.get("group");V.set("capture",R),this.set("capture",R)},at.prototype.destroy=function(){this.removeEvent(),this.remove(),Gt.prototype.destroy.call(this)},at.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},at.prototype.getLayoutBBox=function(){var R=this.get("group"),V=this.getInnerLayoutBBox(),tt=R.getTotalMatrix();return tt&&(V=Q(tt,V)),V},at.prototype.on=function(R,V,tt){var ht=this.get("group");return ht.on(R,V,tt),this},at.prototype.off=function(R,V){var tt=this.get("group");return tt&&tt.off(R,V),this},at.prototype.emit=function(R,V){var tt=this.get("group");tt.emit(R,V)},at.prototype.init=function(){Gt.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},at.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},at.prototype.delegateEmit=function(R,V){var tt=this.get("group");V.target=tt,tt.emit(R,V),k(tt,R,V)},at.prototype.createOffScreenGroup=function(){var R=this.get("group"),V=R.getGroupBase(),tt=new V({delegateObject:this.getDelegateObject()});return tt},at.prototype.applyOffset=function(){var R=this.get("offsetX"),V=this.get("offsetY");this.moveElementTo(this.get("group"),{x:R,y:V})},at.prototype.initGroup=function(){var R=this.get("container");this.set("group",R.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},at.prototype.offScreenRender=function(){this.clearOffScreenCache();var R=this.createOffScreenGroup();return this.renderInner(R),this.set("offScreenGroup",R),this.set("offScreenBBox",Vt(R)),R},at.prototype.addGroup=function(R,V){this.appendDelegateObject(R,V);var tt=R.addGroup(V);return this.get("isRegister")&&this.registerElement(tt),tt},at.prototype.addShape=function(R,V){this.appendDelegateObject(R,V);var tt=R.addShape(V);return this.get("isRegister")&&this.registerElement(tt),tt},at.prototype.addComponent=function(R,V){var tt=V.id,ht=V.component,It=(0,b.__rest)(V,["id","component"]),Yt=new ht((0,b.__assign)((0,b.__assign)({},It),{id:tt,container:R,updateAutoRender:this.get("updateAutoRender")}));return Yt.init(),Yt.render(),this.get("isRegister")&&this.registerElement(Yt.get("group")),Yt},at.prototype.initEvent=function(){},at.prototype.removeEvent=function(){var R=this.get("group");R.off()},at.prototype.getElementId=function(R){var V=this.get("id"),tt=this.get("name");return V+"-"+tt+"-"+R},at.prototype.registerElement=function(R){var V=R.get("id");this.get("shapesMap")[V]=R},at.prototype.unregisterElement=function(R){var V=R.get("id");delete this.get("shapesMap")[V]},at.prototype.moveElementTo=function(R,V){var tt=X(V);R.attr("matrix",tt)},at.prototype.addAnimation=function(R,V,tt){var ht=V.attr("opacity");(0,x.isNil)(ht)&&(ht=1),V.attr("opacity",0),V.animate({opacity:ht},tt)},at.prototype.removeAnimation=function(R,V,tt){V.animate({opacity:0},tt)},at.prototype.updateAnimation=function(R,V,tt,ht){V.animate(tt,ht)},at.prototype.updateElements=function(R,V){var tt=this,ht=this.get("animate"),It=this.get("animateOption"),Yt=R.getChildren().slice(0),re;(0,x.each)(Yt,function(le){var be=le.get("id"),Ae=tt.getElementById(be),We=le.get("name");if(Ae)if(le.get("isComponent")){var qe=le.get("component"),Cr=Ae.get("component"),jr=(0,x.pick)(qe.cfg,(0,x.difference)((0,x.keys)(qe.cfg),Ct));Cr.update(jr),Ae.set(pt,"update")}else{var Gr=tt.getReplaceAttrs(Ae,le);ht&&It.update?tt.updateAnimation(We,Ae,Gr,It.update):Ae.attr(Gr),le.isGroup()&&tt.updateElements(le,Ae),(0,x.each)(st,function(At){Ae.set(At,le.get(At))}),Jt(Ae,le),re=Ae,Ae.set(pt,"update")}else{V.add(le);var mi=V.getChildren();if(mi.splice(mi.length-1,1),re){var wi=mi.indexOf(re);mi.splice(wi+1,0,le)}else mi.unshift(le);if(tt.registerElement(le),le.set(pt,"add"),le.get("isComponent")){var qe=le.get("component");qe.set("container",V)}else le.isGroup()&&tt.registerNewGroup(le);if(re=le,ht){var xi=tt.get("isInit")?It.appear:It.enter;xi&&tt.addAnimation(We,le,xi)}}})},at.prototype.clearUpdateStatus=function(R){var V=R.getChildren();(0,x.each)(V,function(tt){tt.set(pt,null)})},at.prototype.clearOffScreenCache=function(){var R=this.get("offScreenGroup");R&&R.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},at.prototype.getDelegateObject=function(){var R,V=this.get("name"),tt=(R={},R[V]=this,R.component=this,R);return tt},at.prototype.appendDelegateObject=function(R,V){var tt=R.get("delegateObject");V.delegateObject||(V.delegateObject={}),(0,x.mix)(V.delegateObject,tt)},at.prototype.getReplaceAttrs=function(R,V){var tt=R.attr(),ht=V.attr();return(0,x.each)(tt,function(It,Yt){ht[Yt]===void 0&&(ht[Yt]=void 0)}),ht},at.prototype.registerNewGroup=function(R){var V=this,tt=R.getChildren();(0,x.each)(tt,function(ht){V.registerElement(ht),ht.set(pt,"add"),ht.isGroup()&&V.registerNewGroup(ht)})},at.prototype.deleteElements=function(){var R=this,V=this.get("shapesMap"),tt=[];(0,x.each)(V,function(Yt,re){!Yt.get(pt)||Yt.destroyed?tt.push([re,Yt]):Yt.set(pt,null)});var ht=this.get("animate"),It=this.get("animateOption");(0,x.each)(tt,function(Yt){var re=Yt[0],le=Yt[1];if(!le.destroyed){var be=le.get("name");if(ht&&It.leave){var Ae=(0,x.mix)({callback:function(){R.removeElement(le)}},It.leave);R.removeAnimation(be,le,Ae)}else R.removeElement(le)}delete V[re]})},at.prototype.removeElement=function(R){if(R.get("isGroup")){var V=R.get("component");V&&V.destroy()}R.remove()},at}(Pt),J=nt,vt="\u2026";function Tt(Gt){for(var at=0,R=0;R<Gt.length;R++)at+=Ht(Gt,R);return at}function Ht(Gt,at){return Gt.charCodeAt(at)>0&&Gt.charCodeAt(at)<128?1:2}function ue(Gt,at,R){R===void 0&&(R="tail");var V=Gt.length,tt="";if(R==="tail"){for(var ht=0,It=0;ht<at;){var Yt=Ht(Gt,It);if(ht+Yt<=at)tt+=Gt[It],ht+=Ht(Gt,It),It++;else break}tt+=vt}else if(R==="head"){for(var ht=0,It=V-1;ht<at;){var Yt=Ht(Gt,It);if(ht+Yt<=at)tt+=Gt[It],ht+=Ht(Gt,It),It--;else break}tt=vt+tt}else{for(var re="",le="",ht=0,be=0,Ae=V-1;ht<at;){var We=Ht(Gt,be),qe=!1;We+ht<=at&&(re+=Gt[be],be++,ht+=We,qe=!0);var Cr=Ht(Gt,Ae);if(Cr+ht<=at&&(le=Gt[Ae]+le,ht+=Cr,Ae--,qe=!0),!qe)break}tt=re+vt+le}return tt}var Ce="\u2026",Fe=2;function Ve(Gt){var at=0;return(0,x.each)(Gt,function(R){var V=R.getBBox(),tt=V.width;at<tt&&(at=tt)}),at}function dr(Gt,at){var R=at.getCanvasBBox();return Gt?R.width:R.height}function xr(Gt,at){return Gt.getBBox().width<at}function Er(Gt,at,R,V){V===void 0&&(V="tail");var tt=at.attr("text"),ht=dr(Gt,at),It=Tt(tt),Yt=!1;if(R<ht){var re=Math.floor(R/ht*It)-Fe,le=void 0;re>=0?le=ue(tt,re,V):le=Ce,le&&(at.attr("text",le),Yt=!0)}return Yt?at.set("tip",tt):at.set("tip",null),Yt}function Yr(Gt,at){var R=at.x,V=at.y,tt=at.content,ht=at.style,It=at.id,Yt=at.name,re=at.rotate,le=at.maxLength,be=at.autoEllipsis,Ae=at.isVertical,We=at.ellipsisPosition,qe=at.background,Cr=Gt.addGroup({id:It+"-group",name:Yt+"-group",attrs:{x:R,y:V}}),jr=Cr.addShape({type:"text",id:It,name:Yt,attrs:(0,b.__assign)({x:0,y:0,text:tt},ht)}),Gr=_t((0,x.get)(qe,"padding",0));if(le&&be){var mi=le-(Gr[1]+Gr[3]);Er(!Ae,jr,mi,We)}if(qe){var wi=(0,x.get)(qe,"style",{}),xi=jr.getCanvasBBox(),At=xi.minX,te=xi.minY,ge=xi.width,Se=xi.height,Ye=Cr.addShape("rect",{id:It+"-bg",name:It+"-bg",attrs:(0,b.__assign)({x:At-Gr[3],y:te-Gr[0],width:ge+Gr[1]+Gr[3],height:Se+Gr[0]+Gr[2]},wi)});Ye.toBack()}Lt(Cr,R,V),ct(Cr,re,R,V)}var gr={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},ri=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:gr.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:gr.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:gr.lineColor,lineWidth:1}}}})},at.prototype.renderInner=function(R){this.renderLine(R),this.get("text")&&this.renderLabel(R)},at.prototype.renderLine=function(R){var V=this.get("start"),tt=this.get("end"),ht=this.get("style");this.addShape(R,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,b.__assign)({x1:V.x,y1:V.y,x2:tt.x,y2:tt.y},ht)})},at.prototype.getLabelPoint=function(R,V,tt){var ht;return tt==="start"?ht=0:tt==="center"?ht=.5:(0,x.isString)(tt)&&tt.indexOf("%")!==-1?ht=parseInt(tt,10)/100:(0,x.isNumber)(tt)?ht=tt:ht=1,(ht>1||ht<0)&&(ht=1),{x:wt(R.x,V.x,ht),y:wt(R.y,V.y,ht)}},at.prototype.renderLabel=function(R){var V=this.get("text"),tt=this.get("start"),ht=this.get("end"),It=V.position,Yt=V.content,re=V.style,le=V.offsetX,be=V.offsetY,Ae=V.autoRotate,We=V.maxLength,qe=V.autoEllipsis,Cr=V.ellipsisPosition,jr=V.background,Gr=V.isVertical,mi=Gr===void 0?!1:Gr,wi=this.getLabelPoint(tt,ht,It),xi=wi.x+le,At=wi.y+be,te={id:this.getElementId("line-text"),name:"annotation-line-text",x:xi,y:At,content:Yt,style:re,maxLength:We,autoEllipsis:qe,ellipsisPosition:Cr,background:jr,isVertical:mi};if(Ae){var ge=[ht.x-tt.x,ht.y-tt.y];te.rotate=Math.atan2(ge[1],ge[0])}Yr(R,te)},at}(J),bi=ri,Qr=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:gr.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:gr.fontFamily}}})},at.prototype.setLocation=function(R){this.set("x",R.x),this.set("y",R.y),this.resetLocation()},at.prototype.renderInner=function(R){var V=this.getLocation(),tt=V.x,ht=V.y,It=this.get("content"),Yt=this.get("style"),re=this.getElementId("text"),le=this.get("name")+"-text",be=this.get("maxLength"),Ae=this.get("autoEllipsis"),We=this.get("isVertical"),qe=this.get("ellipsisPosition"),Cr=this.get("background"),jr=this.get("rotate"),Gr={id:re,name:le,x:tt,y:ht,content:It,style:Yt,maxLength:be,autoEllipsis:Ae,isVertical:We,ellipsisPosition:qe,background:Cr,rotate:jr};Yr(R,Gr)},at.prototype.resetLocation=function(){var R=this.getElementByLocalId("text-group");if(R){var V=this.getLocation(),tt=V.x,ht=V.y,It=this.get("rotate");Lt(R,tt,ht),ct(R,It,tt,ht)}},at}(J),gi=Qr,hn=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},at.prototype.renderInner=function(R){this.renderArc(R)},at.prototype.getArcPath=function(){var R=this.getLocation(),V=R.center,tt=R.radius,ht=R.startAngle,It=R.endAngle,Yt=H(V,tt,ht),re=H(V,tt,It),le=It-ht>Math.PI?1:0,be=[["M",Yt.x,Yt.y]];if(It-ht==Math.PI*2){var Ae=H(V,tt,ht+Math.PI);be.push(["A",tt,tt,0,le,1,Ae.x,Ae.y]),be.push(["A",tt,tt,0,le,1,re.x,re.y])}else be.push(["A",tt,tt,0,le,1,re.x,re.y]);return be},at.prototype.renderArc=function(R){var V=this.getArcPath(),tt=this.get("style");this.addShape(R,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,b.__assign)({path:V},tt)})},at}(J),mn=hn,Cn=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:gr.regionColor,opacity:.4}}})},at.prototype.renderInner=function(R){this.renderRegion(R)},at.prototype.renderRegion=function(R){var V=this.get("start"),tt=this.get("end"),ht=this.get("style"),It=Mt({start:V,end:tt});this.addShape(R,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,b.__assign)({x:It.x,y:It.y,width:It.width,height:It.height},ht)})},at}(J),Xn=Cn,Xt=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},at.prototype.renderInner=function(R){this.renderImage(R)},at.prototype.getImageAttrs=function(){var R=this.get("start"),V=this.get("end"),tt=this.get("style"),ht=Mt({start:R,end:V}),It=this.get("src");return(0,b.__assign)({x:ht.x,y:ht.y,img:It,width:ht.width,height:ht.height},tt)},at.prototype.renderImage=function(R){this.addShape(R,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},at}(J),$t=Xt,he=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:gr.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:gr.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:gr.fontFamily}}}})},at.prototype.renderInner=function(R){(0,x.get)(this.get("line"),"display")&&this.renderLine(R),(0,x.get)(this.get("text"),"display")&&this.renderText(R),(0,x.get)(this.get("point"),"display")&&this.renderPoint(R),this.get("autoAdjust")&&this.autoAdjust(R)},at.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},at.prototype.renderPoint=function(R){var V=this.getShapeAttrs().point;this.addShape(R,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:V})},at.prototype.renderLine=function(R){var V=this.getShapeAttrs().line;this.addShape(R,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:V})},at.prototype.renderText=function(R){var V=this.getShapeAttrs().text,tt=V.x,ht=V.y,It=V.text,Yt=(0,b.__rest)(V,["x","y","text"]),re=this.get("text"),le=re.background,be=re.maxLength,Ae=re.autoEllipsis,We=re.isVertival,qe=re.ellipsisPosition,Cr={x:tt,y:ht,id:this.getElementId("text"),name:"annotation-text",content:It,style:Yt,background:le,maxLength:be,autoEllipsis:Ae,isVertival:We,ellipsisPosition:qe};Yr(R,Cr)},at.prototype.autoAdjust=function(R){var V=this.get("direction"),tt=this.get("x"),ht=this.get("y"),It=(0,x.get)(this.get("line"),"length",0),Yt=this.get("coordinateBBox"),re=R.getBBox(),le=re.minX,be=re.maxX,Ae=re.minY,We=re.maxY,qe=R.findById(this.getElementId("text-group")),Cr=R.findById(this.getElementId("text")),jr=R.findById(this.getElementId("line"));if(!!Yt){if(qe){if(tt+le<=Yt.minX){var Gr=Yt.minX-(tt+le);Lt(qe,qe.attr("x")+Gr,qe.attr("y"))}if(tt+be>=Yt.maxX){var Gr=tt+be-Yt.maxX;Lt(qe,qe.attr("x")-Gr,qe.attr("y"))}}if(V==="upward"&&ht+Ae<=Yt.minY||V!=="upward"&&ht+We>=Yt.maxY){var mi=void 0,wi=void 0;V==="upward"&&ht+Ae<=Yt.minY?(mi="top",wi=1):(mi="bottom",wi=-1),Cr.attr("textBaseline",mi),jr&&jr.attr("path",[["M",0,0],["L",0,It*wi]]),Lt(qe,qe.attr("x"),(It+2)*wi)}}},at.prototype.getShapeAttrs=function(){var R=(0,x.get)(this.get("line"),"display"),V=(0,x.get)(this.get("point"),"style",{}),tt=(0,x.get)(this.get("line"),"style",{}),ht=(0,x.get)(this.get("text"),"style",{}),It=this.get("direction"),Yt=R?(0,x.get)(this.get("line"),"length",0):0,re=It==="upward"?-1:1;return{point:(0,b.__assign)({x:0,y:0},V),line:(0,b.__assign)({path:[["M",0,0],["L",0,Yt*re]]},tt),text:(0,b.__assign)({x:0,y:(Yt+2)*re,text:(0,x.get)(this.get("text"),"content",""),textBaseline:It==="upward"?"bottom":"top"},ht)}},at}(J),ce=he,we=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:gr.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:gr.textColor,fontFamily:gr.fontFamily}}}})},at.prototype.renderInner=function(R){var V=(0,x.get)(this.get("region"),"style",{}),tt=(0,x.get)(this.get("text"),"style",{}),ht=this.get("lineLength")||0,It=this.get("points");if(!!It.length){var Yt=xt(It),re=[];re.push(["M",It[0].x,Yt.minY-ht]),It.forEach(function(be){re.push(["L",be.x,be.y])}),re.push(["L",It[It.length-1].x,It[It.length-1].y-ht]),this.addShape(R,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,b.__assign)({path:re},V)});var le=(0,b.__assign)({id:this.getElementId("text"),name:"annotation-text",x:(Yt.minX+Yt.maxX)/2,y:Yt.minY-ht},this.get("text"));Yr(R,le)}},at}(J),Ee=we,_e=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},at.prototype.renderInner=function(R){var V=this,tt=this.get("start"),ht=this.get("end"),It=this.addGroup(R,{id:this.getElementId("region-filter"),capture:!1});(0,x.each)(this.get("shapes"),function(re,le){var be=re.get("type"),Ae=(0,x.clone)(re.attr());V.adjustShapeAttrs(Ae),V.addShape(It,{id:V.getElementId("shape-"+be+"-"+le),capture:!1,type:be,attrs:Ae})});var Yt=Mt({start:tt,end:ht});It.setClip({type:"rect",attrs:{x:Yt.minX,y:Yt.minY,width:Yt.width,height:Yt.height}})},at.prototype.adjustShapeAttrs=function(R){var V=this.get("color");R.fill&&(R.fill=R.fillStyle=V),R.stroke=R.strokeStyle=V},at}(J),Le=_e;function xe(Gt,at,R){var V=at+"Style",tt=null;return(0,x.each)(R,function(ht,It){Gt[It]&&ht[V]&&(tt||(tt={}),(0,x.mix)(tt,ht[V]))}),tt}var er=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},defaultCfg:{line:{style:{lineWidth:1,stroke:gr.lineColor}},tickLine:{style:{lineWidth:1,stroke:gr.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:gr.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:gr.textColor,textBaseline:"middle",fontFamily:gr.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:gr.textColor,textBaseline:"middle",fontFamily:gr.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:gr.uncheckedColor}}}}})},at.prototype.renderInner=function(R){this.get("line")&&this.drawLine(R),this.drawTicks(R),this.get("title")&&this.drawTitle(R)},at.prototype.isList=function(){return!0},at.prototype.getItems=function(){return this.get("ticks")},at.prototype.setItems=function(R){this.update({ticks:R})},at.prototype.updateItem=function(R,V){(0,x.mix)(R,V),this.clear(),this.render()},at.prototype.clearItems=function(){var R=this.getElementByLocalId("label-group");R&&R.clear()},at.prototype.setItemState=function(R,V,tt){R[V]=tt,this.updateTickStates(R)},at.prototype.hasState=function(R,V){return!!R[V]},at.prototype.getItemStates=function(R){var V=this.get("tickStates"),tt=[];return(0,x.each)(V,function(ht,It){R[It]&&tt.push(It)}),tt},at.prototype.clearItemsState=function(R){var V=this,tt=this.getItemsByState(R);(0,x.each)(tt,function(ht){V.setItemState(ht,R,!1)})},at.prototype.getItemsByState=function(R){var V=this,tt=this.getItems();return(0,x.filter)(tt,function(ht){return V.hasState(ht,R)})},at.prototype.getSidePoint=function(R,V){var tt=this,ht=tt.getSideVector(V,R);return{x:R.x+ht[0],y:R.y+ht[1]}},at.prototype.getTextAnchor=function(R){var V;return(0,x.isNumberEqual)(R[0],0)?V="center":R[0]>0?V="start":R[0]<0&&(V="end"),V},at.prototype.processOverlap=function(R){},at.prototype.drawLine=function(R){var V=this.getLinePath(),tt=this.get("line");this.addShape(R,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,x.mix)({path:V},tt.style)})},at.prototype.getTickLineItems=function(R){var V=this,tt=[],ht=this.get("tickLine"),It=ht.alignTick,Yt=ht.length,re=1,le=R.length;return le>=2&&(re=R[1].value-R[0].value),(0,x.each)(R,function(be){var Ae=be.point;It||(Ae=V.getTickPoint(be.value-re/2));var We=V.getSidePoint(Ae,Yt);tt.push({startPoint:Ae,tickValue:be.value,endPoint:We,tickId:be.id,id:"tickline-"+be.id})}),tt},at.prototype.getSubTickLineItems=function(R){var V=[],tt=this.get("subTickLine"),ht=tt.count,It=R.length;if(It>=2)for(var Yt=0;Yt<It-1;Yt++)for(var re=R[Yt],le=R[Yt+1],be=0;be<ht;be++){var Ae=(be+1)/(ht+1),We=(1-Ae)*re.tickValue+Ae*le.tickValue,qe=this.getTickPoint(We),Cr=this.getSidePoint(qe,tt.length);V.push({startPoint:qe,endPoint:Cr,tickValue:We,id:"sub-"+re.id+"-"+be})}return V},at.prototype.getTickLineAttrs=function(R,V){var tt=this.get(V).style,ht=R.startPoint,It=R.endPoint,Yt=(0,x.mix)({x1:ht.x,y1:ht.y,x2:It.x,y2:It.y},tt);return Yt},at.prototype.drawTick=function(R,V,tt){this.addShape(V,{type:"line",id:this.getElementId(R.id),name:"axis-"+tt,attrs:this.getTickLineAttrs(R,tt)})},at.prototype.drawTickLines=function(R){var V=this,tt=this.get("ticks"),ht=this.get("subTickLine"),It=this.getTickLineItems(tt),Yt=this.addGroup(R,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),re=this.get("tickLine");if((0,x.each)(It,function(be){if(re.displayWithLabel){var Ae=V.getElementId("label-"+be.tickId);R.findById(Ae)&&V.drawTick(be,Yt,"tickLine")}else V.drawTick(be,Yt,"tickLine")}),ht){var le=this.getSubTickLineItems(It);(0,x.each)(le,function(be){V.drawTick(be,Yt,"subTickLine")})}},at.prototype.processTicks=function(){var R=this,V=this.get("ticks");(0,x.each)(V,function(tt){tt.point=R.getTickPoint(tt.value),(0,x.isNil)(tt.id)&&(tt.id=tt.name)})},at.prototype.drawTicks=function(R){var V=this;this.processTicks(),this.get("label")&&this.drawLabels(R),this.get("tickLine")&&this.drawTickLines(R);var tt=this.get("ticks");(0,x.each)(tt,function(ht){V.applyTickStates(ht,R)})},at.prototype.getLabelAttrs=function(R,V){var tt=this.get("label"),ht=tt.offset,It=tt.style,Yt=tt.rotate,re=tt.formatter,le=this.getSidePoint(R.point,ht),be=this.getSideVector(ht,le),Ae=re?re(R.name,R,V):R.name,We=(0,x.mix)({x:le.x,y:le.y,text:Ae,textAlign:this.getTextAnchor(be)},It);return Yt&&(We.matrix=W(le,Yt)),We},at.prototype.drawLabels=function(R){var V=this,tt=this.get("ticks"),ht=this.addGroup(R,{name:"axis-label-group",id:this.getElementId("label-group")});(0,x.each)(tt,function(It,Yt){V.addShape(ht,{type:"text",name:"axis-label",id:V.getElementId("label-"+It.id),attrs:V.getLabelAttrs(It,Yt),delegateObject:{tick:It,item:It,index:Yt}})}),this.processOverlap(ht)},at.prototype.getTitleAttrs=function(){var R=this.get("title"),V=R.style,tt=R.position,ht=R.offset,It=R.spacing,Yt=It===void 0?0:It,re=R.autoRotate,le=V.fontSize,be=.5;tt==="start"?be=0:tt==="end"&&(be=1);var Ae=this.getTickPoint(be),We=this.getSidePoint(Ae,ht||Yt+le/2),qe=(0,x.mix)({x:We.x,y:We.y,text:R.text},V),Cr=R.rotate,jr=Cr;if((0,x.isNil)(Cr)&&re){var Gr=this.getAxisVector(Ae),mi=[1,0];jr=D.angleTo(Gr,mi,!0)}if(jr){var wi=W(We,jr);qe.matrix=wi}return qe},at.prototype.drawTitle=function(R){this.addShape(R,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},at.prototype.applyTickStates=function(R,V){var tt=this.getItemStates(R);if(tt.length){var ht=this.get("tickStates"),It=this.getElementId("label-"+R.id),Yt=V.findById(It);if(Yt){var re=xe(R,"label",ht);re&&Yt.attr(re)}var le=this.getElementId("tickline-"+R.id),be=V.findById(le);if(be){var Ae=xe(R,"tickLine",ht);Ae&&be.attr(Ae)}}},at.prototype.updateTickStates=function(R){var V=this.getItemStates(R),tt=this.get("tickStates"),ht=this.get("label"),It=this.getElementByLocalId("label-"+R.id),Yt=this.get("tickLine"),re=this.getElementByLocalId("tickline-"+R.id);if(V.length){if(It){var le=xe(R,"label",tt);le&&It.attr(le)}if(re){var be=xe(R,"tickLine",tt);be&&re.attr(be)}}else It&&It.attr(ht.style),re&&re.attr(Yt.style)},at}(J),Xe=er;function hr(Gt,at,R,V){var tt=at.getChildren(),ht=!1;return(0,x.each)(tt,function(It){var Yt=Er(Gt,It,R,V);ht=ht||Yt}),ht}function Ar(){return Sr}function fr(Gt,at,R){return hr(Gt,at,R,"head")}function Sr(Gt,at,R){return hr(Gt,at,R,"tail")}function yr(Gt,at,R){return hr(Gt,at,R,"middle")}function Or(Gt){var at=Gt.attr("matrix");return at&&at[0]!==1}function lr(Gt,at,R,V,tt){tt===void 0&&(tt=!1);var ht=!1;if(Gt)ht=Math.abs(R.y-V.y)<R.height;else if(at){var It=tt?V.height:R.height;ht=Math.abs(R.x-V.x)<It}else{var Yt=tt?V.width:R.width;ht=Math.abs(R.x-V.x)<Yt}return ht}function Fr(Gt,at,R){var V=at.getChildren().slice();if(!V.length)return!1;var tt=!1;R&&V.reverse();for(var ht=V.length,It=V[0],Yt=Or(It),re=It.getBBox(),le=1;le<ht;le++){var be=V[le],Ae=be.getBBox(),We=lr(Gt,Yt,re,Ae,R);We?(be.hide(),tt=!0):re=Ae}return tt}function Kr(){return Kt}function Vr(Gt,at){return Fr(Gt,at,!1)}function Zr(Gt,at){return Fr(Gt,at,!0)}function Ut(Gt,at){var R=at.getChildren().slice();if(R.length<=2)return!1;for(var V=!1,tt=R.length,ht=R[0],It=R[tt-1],Yt=Or(ht),re=ht.getBBox(),le=ht,be=1;be<tt-1;be++){var Ae=R[be],We=Ae.getBBox(),qe=lr(Gt,Yt,re,We);qe?(Ae.hide(),V=!0):(re=We,le=Ae)}var Cr=It.getBBox(),jr=lr(Gt,Yt,re,Cr);return jr&&(le.hide(),V=!0),V}function Kt(Gt,at){var R=at.getChildren().slice();if(R.length<2)return!1;var V=!1,tt=R[0],ht=tt.getBBox(),It=R[1],Yt=Or(tt),re=R.length,le=0;if(Gt){var be=Math.abs(It.attr("y")-tt.attr("y"));le=ht.height/be}else if(Yt){var be=Math.abs(It.attr("x")-tt.attr("x"));le=ht.width/be}else{var Ae=Ve(R),be=Math.abs(It.attr("x")-tt.attr("x"));le=Ae/be}if(le>1){le=Math.ceil(le);for(var We=0;We<re;We++)We%le!=0&&(R[We].hide(),V=!0)}return V}function ie(Gt,at){(0,x.each)(Gt,function(R){var V=R.attr("x"),tt=R.attr("y"),ht=W({x:V,y:tt},at);R.attr("matrix",ht)})}function me(Gt,at,R,V){var tt=at.getChildren();if(!tt.length||!Gt&&tt.length<2)return!1;var ht=Ve(tt),It=!1;if(Gt)It=!!R&&ht>R;else{var Yt=Math.abs(tt[1].attr("x")-tt[0].attr("x"));It=ht>Yt}if(It){var re=V(R,ht);ie(tt,re)}return It}function Me(){return Pe}function Pe(Gt,at,R){return me(Gt,at,R,function(){return Gt?gr.verticalAxisRotate:gr.horizontalAxisRotate})}function Je(Gt,at,R){return me(Gt,at,R,function(V,tt){if(!V)return Gt?gr.verticalAxisRotate:gr.horizontalAxisRotate;if(Gt)return-Math.acos(V/tt);var ht=0;return V>tt?ht=Math.PI/4:(ht=Math.asin(V/tt),ht>Math.PI/4&&(ht=Math.PI/4)),ht})}var sr=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{type:"line",locationType:"region",start:null,end:null})},at.prototype.getLinePath=function(){var R=this.get("start"),V=this.get("end"),tt=[];return tt.push(["M",R.x,R.y]),tt.push(["L",V.x,V.y]),tt},at.prototype.getInnerLayoutBBox=function(){var R=this.get("start"),V=this.get("end"),tt=Gt.prototype.getInnerLayoutBBox.call(this),ht=Math.min(R.x,V.x,tt.x),It=Math.min(R.y,V.y,tt.y),Yt=Math.max(R.x,V.x,tt.maxX),re=Math.max(R.y,V.y,tt.maxY);return{x:ht,y:It,minX:ht,minY:It,maxX:Yt,maxY:re,width:Yt-ht,height:re-It}},at.prototype.isVertical=function(){var R=this.get("start"),V=this.get("end");return(0,x.isNumberEqual)(R.x,V.x)},at.prototype.isHorizontal=function(){var R=this.get("start"),V=this.get("end");return(0,x.isNumberEqual)(R.y,V.y)},at.prototype.getTickPoint=function(R){var V=this,tt=V.get("start"),ht=V.get("end"),It=ht.x-tt.x,Yt=ht.y-tt.y;return{x:tt.x+It*R,y:tt.y+Yt*R}},at.prototype.getSideVector=function(R){var V=this.getAxisVector(),tt=N.normalize([0,0],V),ht=this.get("verticalFactor"),It=[tt[1],tt[0]*-1];return N.scale([0,0],It,R*ht)},at.prototype.getAxisVector=function(){var R=this.get("start"),V=this.get("end");return[V.x-R.x,V.y-R.y]},at.prototype.processOverlap=function(R){var V=this,tt=this.isVertical(),ht=this.isHorizontal();if(!(!tt&&!ht)){var It=this.get("label"),Yt=this.get("title"),re=this.get("verticalLimitLength"),le=It.offset,be=re,Ae=0,We=0;Yt&&(Ae=Yt.style.fontSize,We=Yt.spacing),be&&(be=be-le-We-Ae);var qe=this.get("overlapOrder");if((0,x.each)(qe,function(Gr){It[Gr]&&V.autoProcessOverlap(Gr,It[Gr],R,be)}),Yt){var Cr=R.getBBox(),jr=tt?Cr.width:Cr.height;(0,x.isNil)(Yt.offset)&&(Yt.offset=le+jr+We+Ae/2)}}},at.prototype.autoProcessOverlap=function(R,V,tt,ht){var It=this,Yt=this.isVertical(),re=!1,le=_[R];if(V===!0?re=le.getDefault()(Yt,tt,ht):(0,x.isFunction)(V)?re=V(Yt,tt,ht):le[V]&&(re=le[V](Yt,tt,ht)),R==="autoRotate"){if(re){var be=tt.getChildren(),Ae=this.get("verticalFactor");(0,x.each)(be,function(qe){var Cr=qe.attr("textAlign");if(Cr==="center"){var jr=Ae>0?"end":"start";qe.attr("textAlign",jr)}})}}else if(R==="autoHide"){var We=tt.getChildren().slice(0);(0,x.each)(We,function(qe){qe.get("visible")||(It.get("isRegister")&&It.unregisterElement(qe),qe.remove())})}},at}(Xe),Dr=sr,Re=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},at.prototype.getLinePath=function(){var R=this.get("center"),V=R.x,tt=R.y,ht=this.get("radius"),It=ht,Yt=this.get("startAngle"),re=this.get("endAngle"),le=[];if(Math.abs(re-Yt)===Math.PI*2)le=[["M",V,tt-It],["A",ht,It,0,1,1,V,tt+It],["A",ht,It,0,1,1,V,tt-It],["Z"]];else{var be=this.getCirclePoint(Yt),Ae=this.getCirclePoint(re),We=Math.abs(re-Yt)>Math.PI?1:0,qe=Yt>re?0:1;le=[["M",V,tt],["L",be.x,be.y],["A",ht,It,0,We,qe,Ae.x,Ae.y],["L",V,tt]]}return le},at.prototype.getTickPoint=function(R){var V=this.get("startAngle"),tt=this.get("endAngle"),ht=V+(tt-V)*R;return this.getCirclePoint(ht)},at.prototype.getSideVector=function(R,V){var tt=this.get("center"),ht=[V.x-tt.x,V.y-tt.y],It=this.get("verticalFactor"),Yt=N.length(ht);return N.scale(ht,ht,It*R/Yt),ht},at.prototype.getAxisVector=function(R){var V=this.get("center"),tt=[R.x-V.x,R.y-V.y];return[tt[1],-1*tt[0]]},at.prototype.getCirclePoint=function(R,V){var tt=this.get("center");return V=V||this.get("radius"),{x:tt.x+Math.cos(R)*V,y:tt.y+Math.sin(R)*V}},at}(Xe),Tr=Re,vi=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:gr.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:gr.textColor,textAlign:"center",textBaseline:"middle",fontFamily:gr.fontFamily}},textBackground:{padding:5,style:{stroke:gr.lineColor}}}})},at.prototype.renderInner=function(R){this.get("line")&&this.renderLine(R),this.get("text")&&(this.renderText(R),this.renderBackground(R))},at.prototype.renderText=function(R){var V=this.get("text"),tt=V.style,ht=V.autoRotate,It=V.content;if(!(0,x.isNil)(It)){var Yt=this.getTextPoint(),re=null;if(ht){var le=this.getRotateAngle();re=W(Yt,le)}this.addShape(R,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,b.__assign)((0,b.__assign)((0,b.__assign)({},Yt),{text:It,matrix:re}),tt)})}},at.prototype.renderLine=function(R){var V=this.getLinePath(),tt=this.get("line"),ht=tt.style;this.addShape(R,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,b.__assign)({path:V},ht)})},at.prototype.renderBackground=function(R){var V=this.getElementId("text"),tt=R.findById(V),ht=this.get("textBackground");if(ht&&tt){var It=tt.getBBox(),Yt=_t(ht.padding),re=ht.style,le=this.addShape(R,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,b.__assign)({x:It.x-Yt[3],y:It.y-Yt[0],width:It.width+Yt[1]+Yt[3],height:It.height+Yt[0]+Yt[2],matrix:tt.attr("matrix")},re)});le.toBack()}},at}(J),Mi=vi,oi=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{type:"line",locationType:"region",start:null,end:null})},at.prototype.getRotateAngle=function(){var R=this.getLocation(),V=R.start,tt=R.end,ht=this.get("text").position,It=Math.atan2(tt.y-V.y,tt.x-V.x),Yt=ht==="start"?It-Math.PI/2:It+Math.PI/2;return Yt},at.prototype.getTextPoint=function(){var R=this.getLocation(),V=R.start,tt=R.end,ht=this.get("text"),It=ht.position,Yt=ht.offset;return Qt(V,tt,It,Yt)},at.prototype.getLinePath=function(){var R=this.getLocation(),V=R.start,tt=R.end;return[["M",V.x,V.y],["L",tt.x,tt.y]]},at}(Mi),di=oi,Li=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},at.prototype.getRotateAngle=function(){var R=this.getLocation(),V=R.startAngle,tt=R.endAngle,ht=this.get("text").position,It=ht==="start"?V+Math.PI/2:tt-Math.PI/2;return It},at.prototype.getTextPoint=function(){var R=this.get("text"),V=R.position,tt=R.offset,ht=this.getLocation(),It=ht.center,Yt=ht.radius,re=ht.startAngle,le=ht.endAngle,be=V==="start"?re:le,Ae=this.getRotateAngle()-Math.PI,We=H(It,Yt,be),qe=Math.cos(Ae)*tt,Cr=Math.sin(Ae)*tt;return{x:We.x+qe,y:We.y+Cr}},at.prototype.getLinePath=function(){var R=this.getLocation(),V=R.center,tt=R.radius,ht=R.startAngle,It=R.endAngle,Yt=null;if(It-ht==Math.PI*2){var re=V.x,le=V.y;Yt=[["M",re,le-tt],["A",tt,tt,0,1,1,re,le+tt],["A",tt,tt,0,1,1,re,le-tt],["Z"]]}else{var be=H(V,tt,ht),Ae=H(V,tt,It),We=Math.abs(It-ht)>Math.PI?1:0,qe=ht>It?0:1;Yt=[["M",be.x,be.y],["A",tt,tt,0,We,qe,Ae.x,Ae.y]]}return Yt},at}(Mi),qi=Li,fn=d(44717),Ii=d(62870),pn=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},at.prototype.getContainer=function(){return this.get("container")},at.prototype.show=function(){var R=this.get("container");R.style.display="",this.set("visible",!0)},at.prototype.hide=function(){var R=this.get("container");R.style.display="none",this.set("visible",!1)},at.prototype.setCapture=function(R){var V=this.getContainer(),tt=R?"auto":"none";V.style.pointerEvents=tt,this.set("capture",R)},at.prototype.getBBox=function(){var R=this.getContainer(),V=parseFloat(R.style.left)||0,tt=parseFloat(R.style.top)||0;return Bt(V,tt,R.clientWidth,R.clientHeight)},at.prototype.clear=function(){var R=this.get("container");yt(R)},at.prototype.destroy=function(){this.removeEvent(),this.removeDom(),Gt.prototype.destroy.call(this)},at.prototype.init=function(){Gt.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},at.prototype.initCapture=function(){this.setCapture(this.get("capture"))},at.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},at.prototype.initDom=function(){},at.prototype.initContainer=function(){var R=this.get("container");if((0,x.isNil)(R)){R=this.createDom();var V=this.get("parent");(0,x.isString)(V)&&(V=document.getElementById(V),this.set("parent",V)),V.appendChild(R),this.set("container",R)}else(0,x.isString)(R)&&(R=document.getElementById(R),this.set("container",R));this.get("parent")||this.set("parent",R.parentNode)},at.prototype.resetStyles=function(){var R=this.get("domStyles"),V=this.get("defaultStyles");R?R=(0,x.deepMix)({},V,R):R=V,this.set("domStyles",R)},at.prototype.applyStyles=function(){var R=this.get("domStyles");if(!!R){var V=this.getContainer();this.applyChildrenStyles(V,R);var tt=this.get("containerClassName");if(tt&&bt(V,tt)){var ht=R[tt];(0,Ii.Z)(V,ht)}}},at.prototype.applyChildrenStyles=function(R,V){(0,x.each)(V,function(tt,ht){var It=R.getElementsByClassName(ht);(0,x.each)(It,function(Yt){(0,Ii.Z)(Yt,tt)})})},at.prototype.applyStyle=function(R,V){var tt=this.get("domStyles");(0,Ii.Z)(V,tt[R])},at.prototype.createDom=function(){var R=this.get("containerTpl");return(0,fn.Z)(R)},at.prototype.initEvent=function(){},at.prototype.removeDom=function(){var R=this.get("container");R&&R.parentNode.removeChild(R)},at.prototype.removeEvent=function(){},at.prototype.updateInner=function(R){(0,x.hasKey)(R,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},at.prototype.resetPosition=function(){},at}(Pt),Ln=pn,Et="g2-crosshair",ft=Et+"-line",it=Et+"-text",ot,Ot=(ot={},ot[""+Et]={position:"relative"},ot[""+ft]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},ot[""+it]={position:"absolute",color:gr.textColor,fontFamily:gr.fontFamily},ot),Zt=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Et+'"></div>',crosshairTpl:'<div class="'+ft+'"></div>',textTpl:'<span class="'+it+'">{content}</span>',domStyles:null,containerClassName:Et,defaultStyles:Ot,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},at.prototype.render=function(){this.resetText(),this.resetPosition()},at.prototype.initCrossHair=function(){var R=this.getContainer(),V=this.get("crosshairTpl"),tt=(0,fn.Z)(V);R.appendChild(tt),this.applyStyle(ft,tt),this.set("crosshairEl",tt)},at.prototype.getTextPoint=function(){var R=this.getLocation(),V=R.start,tt=R.end,ht=this.get("text"),It=ht.position,Yt=ht.offset;return Qt(V,tt,It,Yt)},at.prototype.resetText=function(){var R=this.get("text"),V=this.get("textEl");if(R){var tt=R.content;if(!V){var ht=this.getContainer(),It=(0,x.substitute)(this.get("textTpl"),R);V=(0,fn.Z)(It),ht.appendChild(V),this.applyStyle(it,V),this.set("textEl",V)}V.innerHTML=tt}else V&&V.remove()},at.prototype.isVertical=function(R,V){return R.x===V.x},at.prototype.resetPosition=function(){var R=this.get("crosshairEl");R||(this.initCrossHair(),R=this.get("crosshairEl"));var V=this.get("start"),tt=this.get("end"),ht=Math.min(V.x,tt.x),It=Math.min(V.y,tt.y);this.isVertical(V,tt)?(0,Ii.Z)(R,{width:"1px",height:zt(Math.abs(tt.y-V.y))}):(0,Ii.Z)(R,{height:"1px",width:zt(Math.abs(tt.x-V.x))}),(0,Ii.Z)(R,{top:zt(It),left:zt(ht)}),this.alignText()},at.prototype.alignText=function(){var R=this.get("textEl");if(R){var V=this.get("text").align,tt=R.clientWidth,ht=this.getTextPoint();switch(V){case"center":ht.x=ht.x-tt/2;break;case"right":ht.x=ht.x-tt;case"left":break}(0,Ii.Z)(R,{top:zt(ht.y),left:zt(ht.x)})}},at.prototype.updateInner=function(R){(0,x.hasKey)(R,"text")&&this.resetText(),Gt.prototype.updateInner.call(this,R)},at}(Ln),de=Zt,pe=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:gr.lineColor}}}})},at.prototype.getLineType=function(){var R=this.get("line")||this.get("defaultCfg").line;return R.type},at.prototype.renderInner=function(R){this.drawGrid(R)},at.prototype.getAlternatePath=function(R,V){var tt=this.getGridPath(R),ht=V.slice(0).reverse(),It=this.getGridPath(ht,!0),Yt=this.get("closed");return Yt?tt=tt.concat(It):(It[0][0]="L",tt=tt.concat(It),tt.push(["Z"])),tt},at.prototype.getPathStyle=function(){return this.get("line").style},at.prototype.drawGrid=function(R){var V=this,tt=this.get("line"),ht=this.get("items"),It=this.get("alternateColor"),Yt=null;(0,x.each)(ht,function(re,le){var be=re.id||le;if(tt){var Ae=V.getPathStyle(),We=V.getElementId("line-"+be),qe=V.getGridPath(re.points);V.addShape(R,{type:"path",name:"grid-line",id:We,attrs:(0,x.mix)({path:qe},Ae)})}if(It&&le>0){var Cr=V.getElementId("region-"+be),jr=le%2==0;if((0,x.isString)(It))jr&&V.drawAlternateRegion(Cr,R,Yt.points,re.points,It);else{var Gr=jr?It[1]:It[0];V.drawAlternateRegion(Cr,R,Yt.points,re.points,Gr)}}Yt=re})},at.prototype.drawAlternateRegion=function(R,V,tt,ht,It){var Yt=this.getAlternatePath(tt,ht);this.addShape(V,{type:"path",id:R,name:"grid-region",attrs:{path:Yt,fill:It}})},at}(J),ye=pe;function Ge(Gt,at,R,V){var tt=R-Gt,ht=V-at;return Math.sqrt(tt*tt+ht*ht)}var $e=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{type:"circle",center:null,closed:!0})},at.prototype.getGridPath=function(R,V){var tt=this.getLineType(),ht=this.get("closed"),It=[];if(R.length)if(tt==="circle"){var Yt=this.get("center"),re=R[0],le=Ge(Yt.x,Yt.y,re.x,re.y),be=V?0:1;ht?(It.push(["M",Yt.x,Yt.y-le]),It.push(["A",le,le,0,0,be,Yt.x,Yt.y+le]),It.push(["A",le,le,0,0,be,Yt.x,Yt.y-le]),It.push(["Z"])):(0,x.each)(R,function(Ae,We){We===0?It.push(["M",Ae.x,Ae.y]):It.push(["A",le,le,0,0,be,Ae.x,Ae.y])})}else(0,x.each)(R,function(Ae,We){We===0?It.push(["M",Ae.x,Ae.y]):It.push(["L",Ae.x,Ae.y])}),ht&&It.push(["Z"]);return It},at}(ye),je=$e,mr=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{type:"line"})},at.prototype.getGridPath=function(R){var V=[];return(0,x.each)(R,function(tt,ht){ht===0?V.push(["M",tt.x,tt.y]):V.push(["L",tt.x,tt.y])}),V},at}(ye),vr=mr,He=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},at.prototype.getLayoutBBox=function(){var R=Gt.prototype.getLayoutBBox.call(this),V=this.get("x"),tt=this.get("y"),ht=this.get("offsetX"),It=this.get("offsetY"),Yt=this.get("maxWidth"),re=this.get("maxHeight"),le=V+ht,be=tt+It,Ae=R.maxX-le,We=R.maxY-be;return Yt&&(Ae=Math.min(Ae,Yt)),re&&(We=Math.min(We,re)),Bt(le,be,Ae,We)},at.prototype.setLocation=function(R){this.set("x",R.x),this.set("y",R.y),this.resetLocation()},at.prototype.resetLocation=function(){var R=this.get("x"),V=this.get("y"),tt=this.get("offsetX"),ht=this.get("offsetY");this.moveElementTo(this.get("group"),{x:R+tt,y:V+ht})},at.prototype.applyOffset=function(){this.resetLocation()},at.prototype.getDrawPoint=function(){return this.get("currentPoint")},at.prototype.setDrawPoint=function(R){return this.set("currentPoint",R)},at.prototype.renderInner=function(R){this.resetDraw(),this.get("title")&&this.drawTitle(R),this.drawLegendContent(R),this.get("background")&&this.drawBackground(R)},at.prototype.drawBackground=function(R){var V=this.get("background"),tt=R.getBBox(),ht=_t(V.padding),It=(0,b.__assign)({x:0,y:0,width:tt.width+ht[1]+ht[3],height:tt.height+ht[0]+ht[2]},V.style),Yt=this.addShape(R,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:It});Yt.toBack()},at.prototype.drawTitle=function(R){var V=this.get("currentPoint"),tt=this.get("title"),ht=tt.spacing,It=tt.style,Yt=tt.text,re=this.addShape(R,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,b.__assign)({text:Yt,x:V.x,y:V.y},It)}),le=re.getBBox();this.set("currentPoint",{x:V.x,y:le.maxY+ht})},at.prototype.resetDraw=function(){var R=this.get("background"),V={x:0,y:0};if(R){var tt=_t(R.padding);V.x=tt[3],V.y=tt[0]}this.set("currentPoint",V)},at}(J),kr=He,ti=function(Gt){(0,b.__extends)(at,Gt);function at(){var R=Gt!==null&&Gt.apply(this,arguments)||this;return R.currentPageIndex=1,R.totalPagesCnt=1,R.pageWidth=0,R.pageHeight=0,R.startX=0,R.startY=0,R.onNavigationBack=function(){var V=R.getElementByLocalId("item-group");if(R.currentPageIndex>1){R.currentPageIndex-=1,R.updateNavigation();var tt=R.getCurrentNavigationMatrix();R.get("animate")?V.animate({matrix:tt},100):V.attr({matrix:tt})}},R.onNavigationAfter=function(){var V=R.getElementByLocalId("item-group");if(R.currentPageIndex<R.totalPagesCnt){R.currentPageIndex+=1,R.updateNavigation();var tt=R.getCurrentNavigationMatrix();R.get("animate")?V.animate({matrix:tt},100):V.attr({matrix:tt})}},R}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"legend",type:"category",itemSpacing:24,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:gr.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:gr.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:gr.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:gr.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:gr.uncheckedColor},markerStyle:{fill:gr.uncheckedColor,stroke:gr.uncheckedColor}},inactive:{nameStyle:{fill:gr.uncheckedColor},markerStyle:{opacity:.2}}}}})},at.prototype.isList=function(){return!0},at.prototype.getItems=function(){return this.get("items")},at.prototype.setItems=function(R){this.update({items:R})},at.prototype.updateItem=function(R,V){(0,x.mix)(R,V),this.clear(),this.render()},at.prototype.clearItems=function(){var R=this.getElementByLocalId("item-group");R&&R.clear()},at.prototype.setItemState=function(R,V,tt){R[V]=tt;var ht=this.getElementByLocalId("item-"+R.id);if(ht){var It=this.getItems(),Yt=It.indexOf(R),re=this.createOffScreenGroup(),le=this.drawItem(R,Yt,this.getItemHeight(),re);this.updateElements(le,ht),this.clearUpdateStatus(ht)}},at.prototype.hasState=function(R,V){return!!R[V]},at.prototype.getItemStates=function(R){var V=this.get("itemStates"),tt=[];return(0,x.each)(V,function(ht,It){R[It]&&tt.push(It)}),tt},at.prototype.clearItemsState=function(R){var V=this,tt=this.getItemsByState(R);(0,x.each)(tt,function(ht){V.setItemState(ht,R,!1)})},at.prototype.getItemsByState=function(R){var V=this,tt=this.getItems();return(0,x.filter)(tt,function(ht){return V.hasState(ht,R)})},at.prototype.drawLegendContent=function(R){this.processItems(),this.drawItems(R)},at.prototype.processItems=function(){var R=this.get("items");(0,x.each)(R,function(V){V.id||(V.id=V.name)})},at.prototype.drawItems=function(R){var V=this,tt=this.addGroup(R,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),ht=this.addGroup(tt,{id:this.getElementId("item-group"),name:"legend-item-group"}),It=this.getItemHeight(),Yt=this.get("itemWidth"),re=this.get("itemSpacing"),le=this.get("currentPoint"),be=le.x,Ae=le.y,We=this.get("layout"),qe=this.get("items"),Cr=!1,jr=0,Gr=this.get("maxWidth"),mi=this.get("maxHeight");(0,x.each)(qe,function(wi,xi){var At=V.drawItem(wi,xi,It,ht),te=At.getBBox(),ge=Yt||te.width;ge>jr&&(jr=ge),We==="horizontal"?(Gr&&Gr<le.x+ge-be&&(Cr=!0,le.x=be,le.y+=It),V.moveElementTo(At,le),le.x+=ge+re):(mi&&mi<le.y+It-Ae&&(Cr=!0,le.x+=jr+re,le.y=Ae,jr=0),V.moveElementTo(At,le),le.y+=It)}),Cr&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=be,this.startY=Ae,this.adjustNavigation(R,ht))},at.prototype.getItemHeight=function(){var R=this.get("itemHeight");if(!R){var V=this.get("itemName");V&&(R=V.style.fontSize+8)}return R},at.prototype.drawMarker=function(R,V,tt,ht){var It=(0,b.__assign)((0,b.__assign)((0,b.__assign)({x:0,y:ht/2},V.style),{symbol:(0,x.get)(tt.marker,"symbol","circle")}),(0,x.get)(tt.marker,"style",{})),Yt=this.addShape(R,{type:"marker",id:this.getElementId("item-"+tt.id+"-marker"),name:"legend-item-marker",attrs:It}),re=Yt.getBBox();Yt.attr("x",re.width/2);var le=Yt.attr(),be=le.stroke,Ae=le.fill;return be&&Yt.set("isStroke",!0),Ae&&Yt.set("isFill",!0),Yt},at.prototype.drawItemText=function(R,V,tt,ht,It,Yt,re){var le=tt.formatter,be=(0,b.__assign)({x:Yt,y:It/2,text:le?le(ht[V],ht,re):ht[V]},tt.style);return this.addShape(R,{type:"text",id:this.getElementId("item-"+ht.id+"-"+V),name:"legend-item-"+V,attrs:be})},at.prototype.drawItem=function(R,V,tt,ht){var It="item-"+R.id,Yt=this.addGroup(ht,{name:"legend-item-container",id:this.getElementId("item-container-"+It),delegateObject:{item:R,index:V}}),re=this.addGroup(Yt,{name:"legend-item",id:this.getElementId(It),delegateObject:{item:R,index:V}}),le=this.get("marker"),be=this.get("itemName"),Ae=this.get("itemValue"),We=this.get("itemBackground"),qe=this.getLimitItemWidth(),Cr=0;if(le){var jr=this.drawMarker(re,le,R,tt);Cr=jr.getBBox().maxX+le.spacing}if(be){var Gr=this.drawItemText(re,"name",be,R,tt,Cr,V);qe&&Er(!0,Gr,(0,x.clamp)(qe-Cr,0,qe)),Cr=Gr.getBBox().maxX+be.spacing}if(Ae){var mi=this.drawItemText(re,"value",Ae,R,tt,Cr,V);qe&&(Ae.alignRight?(mi.attr({textAlign:"right",x:qe}),Er(!0,mi,(0,x.clamp)(qe-Cr,0,qe),"head")):Er(!0,mi,(0,x.clamp)(qe-Cr,0,qe)))}if(We){var wi=re.getBBox(),xi=this.addShape(re,{type:"rect",name:"legend-item-background",id:this.getElementId(It+"-background"),attrs:(0,b.__assign)({x:0,y:0,width:wi.width,height:tt},We.style)});xi.toBack()}return this.applyItemStates(R,re),re},at.prototype.adjustNavigation=function(R,V){var tt=this,ht=this.startX,It=this.startY,Yt=this.get("layout"),re=V.findAll(function(ge){return ge.get("name")==="legend-item"}),le=this.get("maxWidth"),be=this.get("maxHeight"),Ae=this.get("itemWidth"),We=this.get("itemSpacing"),qe=this.getItemHeight(),Cr=this.drawNavigation(R,Yt,"00/00",12),jr=Cr.getBBox(),Gr={x:ht,y:It},mi=1,wi=0,xi=0,At=0;if(Yt==="horizontal")this.pageHeight=qe,(0,x.each)(re,function(ge){var Se=ge.getBBox(),Ye=Ae||Se.width;(wi&&wi<Gr.x+Ye+We||le<Gr.x+Ye+We+jr.width)&&(mi===1&&(wi=Gr.x+We,tt.pageWidth=wi,tt.moveElementTo(Cr,{x:le-We-jr.width-jr.minX,y:Gr.y+qe/2-jr.height/2-jr.minY})),mi+=1,Gr.x=ht,Gr.y+=qe),tt.moveElementTo(ge,Gr),ge.getParent().setClip({type:"rect",attrs:{x:Gr.x,y:Gr.y,width:Ye+We,height:qe}}),Gr.x+=Ye+We});else{(0,x.each)(re,function(ge){var Se=ge.getBBox();Se.width>xi&&(xi=Se.width)}),At=xi,xi+=We,le&&(xi=Math.min(le,xi),At=Math.min(le,At)),this.pageWidth=xi,this.pageHeight=be-Math.max(jr.height,qe);var te=Math.floor(this.pageHeight/qe);(0,x.each)(re,function(ge,Se){Se!==0&&Se%te==0&&(mi+=1,Gr.x+=xi,Gr.y=It),tt.moveElementTo(ge,Gr),ge.getParent().setClip({type:"rect",attrs:{x:Gr.x,y:Gr.y,width:xi,height:qe}}),Gr.y+=qe}),this.totalPagesCnt=mi,this.moveElementTo(Cr,{x:ht+At/2-jr.width/2-jr.minX,y:be-jr.height-jr.minY})}this.pageHeight&&this.pageWidth&&V.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=mi,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(Cr),V.attr("matrix",this.getCurrentNavigationMatrix())},at.prototype.drawNavigation=function(R,V,tt,ht){var It={x:0,y:0},Yt=this.addGroup(R,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),re=this.drawArrow(Yt,It,"navigation-arrow-left",V==="horizontal"?"up":"left",ht);re.on("click",this.onNavigationBack);var le=re.getBBox();It.x+=le.width+2;var be=this.addShape(Yt,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:It.x,y:It.y+ht/2,text:tt,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),Ae=be.getBBox();It.x+=Ae.width+2;var We=this.drawArrow(Yt,It,"navigation-arrow-right",V==="horizontal"?"down":"right",ht);return We.on("click",this.onNavigationAfter),Yt},at.prototype.updateNavigation=function(R){var V=this.currentPageIndex+"/"+this.totalPagesCnt,tt=R?R.getChildren()[1]:this.getElementByLocalId("navigation-text"),ht=R?R.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),It=R?R.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),Yt=tt.getBBox();tt.attr("text",V);var re=tt.getBBox();tt.attr("x",tt.attr("x")-(re.width-Yt.width)/2),ht.attr("opacity",this.currentPageIndex===1?.45:1),ht.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),It.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),It.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},at.prototype.drawArrow=function(R,V,tt,ht,It){var Yt=V.x,re=V.y,le={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},be=this.addShape(R,{type:"path",id:this.getElementId(tt),name:tt,attrs:{path:[["M",Yt+It/2,re],["L",Yt,re+It],["L",Yt+It,re+It],["Z"]],fill:"#000",cursor:"pointer"}});return be.attr("matrix",W({x:Yt+It/2,y:re+It/2},le[ht])),be},at.prototype.getCurrentNavigationMatrix=function(){var R=this,V=R.currentPageIndex,tt=R.pageWidth,ht=R.pageHeight,It=this.get("layout"),Yt=It==="horizontal"?{x:0,y:ht*(1-V)}:{x:tt*(1-V),y:0};return X(Yt)},at.prototype.applyItemStates=function(R,V){var tt=this.getItemStates(R),ht=tt.length>0;if(ht){var It=V.getChildren(),Yt=this.get("itemStates");(0,x.each)(It,function(re){var le=re.get("name"),be=le.split("-")[2],Ae=xe(R,be,Yt);Ae&&(re.attr(Ae),be==="marker"&&!(re.get("isStroke")&&re.get("isFill"))&&(re.get("isStroke")&&re.attr("fill",null),re.get("isFill")&&re.attr("stroke",null)))})}},at.prototype.getLimitItemWidth=function(){var R=this.get("itemWidth"),V=this.get("maxItemWidth");return V?R&&(V=R<=V?R:V):R&&(V=R),V},at}(kr),dt=ti,rt=1.4,j=.4,Z=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:gr.textColor,textBaseline:"middle",fontFamily:gr.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:gr.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},at.prototype.isSlider=function(){return!0},at.prototype.getValue=function(){return this.getCurrentValue()},at.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},at.prototype.setRange=function(R,V){this.update({min:R,max:V})},at.prototype.setValue=function(R){var V=this.getValue();this.set("value",R);var tt=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(tt),this.delegateEmit("valuechanged",{originValue:V,value:R})},at.prototype.initEvent=function(){var R=this.get("group");this.bindSliderEvent(R),this.bindRailEvent(R),this.bindTrackEvent(R)},at.prototype.drawLegendContent=function(R){this.drawRail(R),this.drawLabels(R),this.fixedElements(R),this.resetTrack(R),this.resetTrackClip(R),this.get("slidable")&&this.resetHandlers(R)},at.prototype.bindSliderEvent=function(R){this.bindHandlersEvent(R)},at.prototype.bindHandlersEvent=function(R){var V=this;R.on("legend-handler-min:drag",function(tt){var ht=V.getValueByCanvasPoint(tt.x,tt.y),It=V.getCurrentValue(),Yt=It[1];Yt<ht&&(Yt=ht),V.setValue([ht,Yt])}),R.on("legend-handler-max:drag",function(tt){var ht=V.getValueByCanvasPoint(tt.x,tt.y),It=V.getCurrentValue(),Yt=It[0];Yt>ht&&(Yt=ht),V.setValue([Yt,ht])})},at.prototype.bindRailEvent=function(R){},at.prototype.bindTrackEvent=function(R){var V=this,tt=null;R.on("legend-track:dragstart",function(ht){tt={x:ht.x,y:ht.y}}),R.on("legend-track:drag",function(ht){if(!!tt){var It=V.getValueByCanvasPoint(tt.x,tt.y),Yt=V.getValueByCanvasPoint(ht.x,ht.y),re=V.getCurrentValue(),le=re[1]-re[0],be=V.getRange(),Ae=Yt-It;Ae<0?re[0]+Ae>be.min?V.setValue([re[0]+Ae,re[1]+Ae]):V.setValue([be.min,be.min+le]):Ae>0&&(Ae>0&&re[1]+Ae<be.max?V.setValue([re[0]+Ae,re[1]+Ae]):V.setValue([be.max-le,be.max])),tt={x:ht.x,y:ht.y}}}),R.on("legend-track:dragend",function(ht){tt=null})},at.prototype.drawLabels=function(R){this.drawLabel("min",R),this.drawLabel("max",R)},at.prototype.drawLabel=function(R,V){var tt=this.get("label"),ht=tt.style,It=tt.align,Yt=this.get(R),re=this.getLabelAlignAttrs(R,It),le="label-"+R;this.addShape(V,{type:"text",id:this.getElementId(le),name:"legend-label-"+R,attrs:(0,b.__assign)((0,b.__assign)({x:0,y:0,text:Yt},ht),re)})},at.prototype.getLabelAlignAttrs=function(R,V){var tt=this.isVertical(),ht="center",It="middle";return tt?(ht="start",V!=="rail"?R==="min"?It="top":It="bottom":It="top"):V!=="rail"?(It="top",R==="min"?ht="start":ht="end"):(ht="start",It="middle"),{textAlign:ht,textBaseline:It}},at.prototype.getRailPath=function(R,V,tt,ht){var It=this.get("rail"),Yt=It.size,re=It.defaultLength,le=It.type,be=this.isVertical(),Ae=re,We=tt,qe=ht;We||(We=be?Yt:Ae),qe||(qe=be?Ae:Yt);var Cr=[];return le==="color"?(Cr.push(["M",R,V]),Cr.push(["L",R+We,V]),Cr.push(["L",R+We,V+qe]),Cr.push(["L",R,V+qe]),Cr.push(["Z"])):(Cr.push(["M",R+We,V]),Cr.push(["L",R+We,V+qe]),Cr.push(["L",R,V+qe]),Cr.push(["Z"])),Cr},at.prototype.drawRail=function(R){var V=this.get("rail"),tt=V.style;this.addShape(R,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,b.__assign)({path:this.getRailPath(0,0)},tt)})},at.prototype.getTrackColor=function(R){var V=R.length;if(!V)return null;if(V===1)return R[0];var tt;this.isVertical()?tt="l(90)":tt="l(0)";for(var ht=0;ht<V;ht++){var It=ht/(V-1);tt+=" "+It+":"+R[ht]}return tt},at.prototype.getTrackPath=function(R){var V=this.getRailShape(R),tt=V.attr("path");return(0,x.clone)(tt)},at.prototype.getClipTrackAttrs=function(R){var V=this.getCurrentValue(),tt=V[0],ht=V[1],It=this.getRailBBox(R),Yt=this.getPointByValue(tt,R),re=this.getPointByValue(ht,R),le=this.isVertical(),be,Ae,We,qe;return le?(be=It.minX,Ae=Yt.y,We=It.width,qe=re.y-Yt.y):(be=Yt.x,Ae=It.minY,We=re.x-Yt.x,qe=It.height),{x:be,y:Ae,width:We,height:qe}},at.prototype.getTrackAttrs=function(R){var V=this.get("track"),tt=this.get("colors"),ht=this.getTrackPath(R);return(0,x.mix)({path:ht,fill:this.getTrackColor(tt)},V.style)},at.prototype.resetTrackClip=function(R){var V=R||this.get("group"),tt=this.getElementId("track"),ht=V.findById(tt),It=ht.getClip(),Yt=this.getClipTrackAttrs(R);It?It.attr(Yt):ht.setClip({type:"rect",attrs:Yt})},at.prototype.resetTrack=function(R){var V=this.getElementId("track"),tt=R.findById(V),ht=this.getTrackAttrs(R);tt?tt.attr(ht):this.addShape(R,{type:"path",id:V,draggable:this.get("slidable"),name:"legend-track",attrs:ht})},at.prototype.getPointByValue=function(R,V){var tt=this.getRange(),ht=tt.min,It=tt.max,Yt=(R-ht)/(It-ht),re=this.getRailBBox(V),le=this.isVertical(),be={x:0,y:0};return le?(be.x=re.minX+re.width/2,be.y=wt(re.minY,re.maxY,Yt)):(be.x=wt(re.minX,re.maxX,Yt),be.y=re.minY+re.height/2),be},at.prototype.getRailShape=function(R){var V=R||this.get("group");return V.findById(this.getElementId("rail"))},at.prototype.getRailBBox=function(R){var V=this.getRailShape(R),tt=V.getBBox();return tt},at.prototype.getRailCanvasBBox=function(){var R=this.get("group"),V=R.findById(this.getElementId("rail")),tt=V.getCanvasBBox();return tt},at.prototype.isVertical=function(){return this.get("layout")==="vertical"},at.prototype.getValueByCanvasPoint=function(R,V){var tt=this.getRange(),ht=tt.min,It=tt.max,Yt=this.getRailCanvasBBox(),re=this.isVertical(),le=this.get("step"),be;re?be=(V-Yt.minY)/Yt.height:be=(R-Yt.minX)/Yt.width;var Ae=wt(ht,It,be);if(le){var We=Math.round((Ae-ht)/le);Ae=ht+We*le}return Ae>It&&(Ae=It),Ae<ht&&(Ae=ht),Ae},at.prototype.getCurrentValue=function(){var R=this.get("value");return R||(R=[this.get("min"),this.get("max")]),R},at.prototype.resetHandlers=function(R){var V=this.getCurrentValue(),tt=V[0],ht=V[1];this.resetHandler(R,"min",tt),this.resetHandler(R,"max",ht)},at.prototype.getHandlerPath=function(R,V){var tt=this.isVertical(),ht=[],It=R.size,Yt=V.x,re=V.y,le=It*rt,be=It/2,Ae=It/6;if(tt){var We=Yt+le*j;ht.push(["M",Yt,re]),ht.push(["L",We,re+be]),ht.push(["L",Yt+le,re+be]),ht.push(["L",Yt+le,re-be]),ht.push(["L",We,re-be]),ht.push(["Z"]),ht.push(["M",We,re+Ae]),ht.push(["L",Yt+le-2,re+Ae]),ht.push(["M",We,re-Ae]),ht.push(["L",Yt+le-2,re-Ae])}else{var qe=re+le*j;ht.push(["M",Yt,re]),ht.push(["L",Yt-be,qe]),ht.push(["L",Yt-be,re+le]),ht.push(["L",Yt+be,re+le]),ht.push(["L",Yt+be,qe]),ht.push(["Z"]),ht.push(["M",Yt-Ae,qe]),ht.push(["L",Yt-Ae,re+le-2]),ht.push(["M",Yt+Ae,qe]),ht.push(["L",Yt+Ae,re+le-2])}return ht},at.prototype.resetHandler=function(R,V,tt){var ht=this.getPointByValue(tt,R),It=this.get("handler"),Yt=this.getHandlerPath(It,ht),re=this.getElementId("handler-"+V),le=R.findById(re),be=this.isVertical();le?le.attr("path",Yt):this.addShape(R,{type:"path",name:"legend-handler-"+V,draggable:!0,id:re,attrs:(0,b.__assign)((0,b.__assign)({path:Yt},It.style),{cursor:be?"ns-resize":"ew-resize"})})},at.prototype.fixedElements=function(R){var V=R.findById(this.getElementId("rail")),tt=R.findById(this.getElementId("label-min")),ht=R.findById(this.getElementId("label-max")),It=this.getDrawPoint();this.isVertical()?this.fixedVertail(tt,ht,V,It):this.fixedHorizontal(tt,ht,V,It)},at.prototype.fitRailLength=function(R,V,tt,ht){var It=this.isVertical(),Yt=It?"height":"width",re=this.get("label"),le=re.align,be=re.spacing,Ae=this.get("max"+(0,x.upperFirst)(Yt));if(Ae){var We=le==="rail"?tt[Yt]+R[Yt]+V[Yt]+be*2:tt[Yt],qe=We-Ae;qe>0&&this.changeRailLength(ht,Yt,tt[Yt]-qe)}},at.prototype.changeRailLength=function(R,V,tt){var ht=R.getBBox(),It;V==="height"?It=this.getRailPath(ht.x,ht.y,ht.width,tt):It=this.getRailPath(ht.x,ht.y,tt,ht.height),R.attr("path",It)},at.prototype.changeRailPosition=function(R,V,tt){var ht=R.getBBox(),It=this.getRailPath(V,tt,ht.width,ht.height);R.attr("path",It)},at.prototype.fixedHorizontal=function(R,V,tt,ht){var It=this.get("label"),Yt=It.align,re=It.spacing,le=tt.getBBox(),be=R.getBBox(),Ae=V.getBBox(),We=le.height;this.fitRailLength(be,Ae,le,tt),le=tt.getBBox(),Yt==="rail"?(R.attr({x:ht.x,y:ht.y+We/2}),this.changeRailPosition(tt,ht.x+be.width+re,ht.y),V.attr({x:ht.x+be.width+le.width+re*2,y:ht.y+We/2})):Yt==="top"?(R.attr({x:ht.x,y:ht.y}),V.attr({x:ht.x+le.width,y:ht.y}),this.changeRailPosition(tt,ht.x,ht.y+be.height+re)):(this.changeRailPosition(tt,ht.x,ht.y),R.attr({x:ht.x,y:ht.y+le.height+re}),V.attr({x:ht.x+le.width,y:ht.y+le.height+re}))},at.prototype.fixedVertail=function(R,V,tt,ht){var It=this.get("label"),Yt=It.align,re=It.spacing,le=tt.getBBox(),be=R.getBBox(),Ae=V.getBBox();if(this.fitRailLength(be,Ae,le,tt),le=tt.getBBox(),Yt==="rail")R.attr({x:ht.x,y:ht.y}),this.changeRailPosition(tt,ht.x,ht.y+be.height+re),V.attr({x:ht.x,y:ht.y+be.height+le.height+re*2});else if(Yt==="right")R.attr({x:ht.x+le.width+re,y:ht.y}),this.changeRailPosition(tt,ht.x,ht.y),V.attr({x:ht.x+le.width+re,y:ht.y+le.height});else{var We=Math.max(be.width,Ae.width);R.attr({x:ht.x,y:ht.y}),this.changeRailPosition(tt,ht.x+We+re,ht.y),V.attr({x:ht.x,y:ht.y+le.height})}},at}(kr),St=Z,Dt=d(87892),qt="g2-tooltip",ae="g2-tooltip-title",ne="g2-tooltip-list",Oe="g2-tooltip-list-item",Ie="g2-tooltip-marker",De="g2-tooltip-value",or="g2-tooltip-name",nr="g2-tooltip-crosshair-x",ze="g2-tooltip-crosshair-y",cr,Rr=(cr={},cr[""+qt]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:gr.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},cr[""+ae]={marginBottom:"4px"},cr[""+ne]={margin:"0px",listStyleType:"none",padding:"0px"},cr[""+Oe]={listStyleType:"none",marginBottom:"4px"},cr[""+Ie]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},cr[""+De]={display:"inline-block",float:"right",marginLeft:"30px"},cr[""+nr]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},cr[""+ze]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},cr);function Jr(Gt,at,R,V,tt){var ht={left:Gt<tt.x,right:Gt+R>tt.x+tt.width,top:at<tt.y,bottom:at+V>tt.y+tt.height};return ht}function $r(Gt,at,R,V,tt,ht){var It=Gt,Yt=at;switch(ht){case"left":It=Gt-V-R,Yt=at-tt/2;break;case"right":It=Gt+R,Yt=at-tt/2;break;case"top":It=Gt-V/2,Yt=at-tt-R;break;case"bottom":It=Gt-V/2,Yt=at+R;break;default:It=Gt+R,Yt=at-tt-R;break}return{x:It,y:Yt}}function Pr(Gt,at,R,V,tt,ht,It){var Yt=$r(Gt,at,R,V,tt,ht);if(It){var re=Jr(Yt.x,Yt.y,V,tt,It);ht==="auto"?(re.right&&(Yt.x=Math.max(0,Gt-V-R)),re.top&&(Yt.y=Math.max(0,at-tt-R))):ht==="top"||ht==="bottom"?(re.left&&(Yt.x=It.x),re.right&&(Yt.x=It.x+It.width-V),ht==="top"&&re.top&&(Yt.y=at+R),ht==="bottom"&&re.bottom&&(Yt.y=at-tt-R)):(re.top&&(Yt.y=It.y),re.bottom&&(Yt.y=It.y+It.height-tt),ht==="left"&&re.left&&(Yt.x=Gt+R),ht==="right"&&re.right&&(Yt.x=Gt-V-R))}return Yt}function ur(Gt,at){var R=!1;return(0,x.each)(at,function(V){if((0,x.hasKey)(Gt,V))return R=!0,!1}),R}var ii=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+qt+'"><div class="'+ae+'"></div><ul class="'+ne+'"></ul></div>',itemTpl:'<li class="'+Oe+`" data-index={index}>
          <span class="`+Ie+`" style="background:{color}"></span>
          <span class="`+or+`">{name}</span>:
          <span class="`+De+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+nr+'"></div>',yCrosshairTpl:'<div class="'+ze+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:qt,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:Rr})},at.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},at.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},at.prototype.show=function(){var R=this.getContainer();!R||this.destroyed||(this.set("visible",!0),(0,Ii.Z)(R,{visibility:"visible"}),this.setCrossHairsVisible(!0))},at.prototype.hide=function(){var R=this.getContainer();!R||this.destroyed||(this.set("visible",!1),(0,Ii.Z)(R,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},at.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},at.prototype.setLocation=function(R){this.set("x",R.x),this.set("y",R.y),this.resetPosition()},at.prototype.setCrossHairsVisible=function(R){var V=R?"":"none",tt=this.get("xCrosshairDom"),ht=this.get("yCrosshairDom");tt&&(0,Ii.Z)(tt,{display:V}),ht&&(0,Ii.Z)(ht,{display:V})},at.prototype.initContainer=function(){if(Gt.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var R=this.getHtmlContentNode();this.get("parent").appendChild(R),this.set("container",R),this.resetStyles(),this.applyStyles()}},at.prototype.updateInner=function(R){this.get("customContent")?this.renderCustomContent():(ur(R,["title","showTitle"])&&this.resetTitle(),(0,x.hasKey)(R,"items")&&this.renderItems()),Gt.prototype.updateInner.call(this,R)},at.prototype.initDom=function(){this.cacheDoms()},at.prototype.removeDom=function(){Gt.prototype.removeDom.call(this),this.clearCrosshairs()},at.prototype.resetPosition=function(){var R=this.get("x"),V=this.get("y"),tt=this.get("offset"),ht=this.getOffset(),It=ht.offsetX,Yt=ht.offsetY,re=this.get("position"),le=this.get("region"),be=this.getContainer(),Ae=this.getBBox(),We=Ae.width,qe=Ae.height,Cr;le&&(Cr=Mt(le));var jr=Pr(R,V,tt,We,qe,re,Cr);(0,Ii.Z)(be,{left:zt(jr.x+It),top:zt(jr.y+Yt)}),this.resetCrosshairs()},at.prototype.renderCustomContent=function(){var R=this.getHtmlContentNode(),V=this.get("parent"),tt=this.get("container");tt&&tt.parentNode===V?V.replaceChild(R,tt):V.appendChild(R),this.set("container",R),this.resetStyles(),this.applyStyles()},at.prototype.getHtmlContentNode=function(){var R,V=this.get("customContent");if(V){var tt=V(this.get("title"),this.get("items"));(0,x.isElement)(tt)?R=tt:R=(0,fn.Z)(tt)}return R},at.prototype.cacheDoms=function(){var R=this.getContainer(),V=R.getElementsByClassName(ae)[0],tt=R.getElementsByClassName(ne)[0];this.set("titleDom",V),this.set("listDom",tt)},at.prototype.resetTitle=function(){var R=this.get("title"),V=this.get("showTitle");V&&R?this.setTitle(R):this.setTitle("")},at.prototype.setTitle=function(R){var V=this.get("titleDom");V&&(V.innerText=R)},at.prototype.resetCrosshairs=function(){var R=this.get("crosshairsRegion"),V=this.get("crosshairs");if(!R||!V)this.clearCrosshairs();else{var tt=Mt(R),ht=this.get("xCrosshairDom"),It=this.get("yCrosshairDom");V==="x"?(this.resetCrosshair("x",tt),It&&(It.remove(),this.set("yCrosshairDom",null))):V==="y"?(this.resetCrosshair("y",tt),ht&&(ht.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",tt),this.resetCrosshair("y",tt)),this.setCrossHairsVisible(this.get("visible"))}},at.prototype.resetCrosshair=function(R,V){var tt=this.checkCrosshair(R),ht=this.get(R);R==="x"?(0,Ii.Z)(tt,{left:zt(ht),top:zt(V.y),height:zt(V.height)}):(0,Ii.Z)(tt,{top:zt(ht),left:zt(V.x),width:zt(V.width)})},at.prototype.checkCrosshair=function(R){var V=R+"CrosshairDom",tt=R+"CrosshairTpl",ht="CROSSHAIR_"+R.toUpperCase(),It=w[ht],Yt=this.get(V),re=this.get("parent");return Yt||(Yt=(0,fn.Z)(this.get(tt)),this.applyStyle(It,Yt),re.appendChild(Yt),this.set(V,Yt)),Yt},at.prototype.renderItems=function(){this.clearItemDoms();var R=this.get("items"),V=this.get("itemTpl"),tt=this.get("listDom");tt&&((0,x.each)(R,function(ht){var It=Dt.default.toCSSGradient(ht.color),Yt=(0,b.__assign)((0,b.__assign)({},ht),{color:It}),re=(0,x.substitute)(V,Yt),le=(0,fn.Z)(re);tt.appendChild(le)}),this.applyChildrenStyles(tt,this.get("domStyles")))},at.prototype.clearItemDoms=function(){this.get("listDom")&&yt(this.get("listDom"))},at.prototype.clearCrosshairs=function(){var R=this.get("xCrosshairDom"),V=this.get("yCrosshairDom");R&&R.remove(),V&&V.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},at}(Ln),Oi=ii,Wi={opacity:0},an={stroke:"#C5C5C5",strokeOpacity:.85},oa={fill:"#CACED4",opacity:.85},Vn=d(62029),xn=d(65624);function ha(Gt){return(0,x.map)(Gt,function(at,R){var V=R===0?"M":"L",tt=at[0],ht=at[1];return[V,tt,ht]})}function ea(Gt){return ha(Gt)}function _a(Gt){if(Gt.length<=2)return ea(Gt);var at=[];(0,x.each)(Gt,function(It){(0,x.isEqual)(It,at.slice(at.length-2))||at.push(It[0],It[1])});var R=(0,Vn.catmullRom2Bezier)(at,!1),V=(0,x.head)(Gt),tt=V[0],ht=V[1];return R.unshift(["M",tt,ht]),R}function fa(Gt,at,R,V){V===void 0&&(V=!0);var tt=new xn.Linear({values:Gt}),ht=new xn.Category({values:(0,x.map)(Gt,function(Yt,re){return re})}),It=(0,x.map)(Gt,function(Yt,re){return[ht.scale(re)*at,R-tt.scale(Yt)*R]});return V?_a(It):ea(It)}function wo(Gt,at,R){var V=(0,b.__spreadArrays)(Gt);return V.push(["L",at,0]),V.push(["L",0,R]),V.push(["Z"]),V}var za=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Wi,lineStyle:an,areaStyle:oa})},at.prototype.renderInner=function(R){var V=this.cfg,tt=V.width,ht=V.height,It=V.data,Yt=V.smooth,re=V.isArea,le=V.backgroundStyle,be=V.lineStyle,Ae=V.areaStyle;this.addShape(R,{id:this.getElementId("background"),type:"rect",attrs:(0,b.__assign)({x:0,y:0,width:tt,height:ht},le)});var We=fa(It,tt,ht,Yt);if(this.addShape(R,{id:this.getElementId("line"),type:"path",attrs:(0,b.__assign)({path:We},be)}),re){var qe=wo(We,tt,ht);this.addShape(R,{id:this.getElementId("area"),type:"path",attrs:(0,b.__assign)({path:qe},Ae)})}},at.prototype.applyOffset=function(){var R=this.cfg,V=R.x,tt=R.y;this.moveElementTo(this.get("group"),{x:V,y:tt})},at}(J),So=null,Pa={fill:"#416180",opacity:.05},Xa={fill:"#5B8FF9",opacity:.15,cursor:"move"},Un=10,bn={width:Un,height:24},ro={textBaseline:"middle",fill:"#000",opacity:.45},io="sliderchange",Zn={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Va=function(Gt){(0,b.__extends)(at,Gt);function at(){return Gt!==null&&Gt.apply(this,arguments)||this}return at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"handler",x:0,y:0,width:10,height:24,style:Zn})},at.prototype.renderInner=function(R){var V=this.cfg,tt=V.width,ht=V.height,It=V.style,Yt=It.fill,re=It.stroke,le=It.radius,be=It.opacity,Ae=It.cursor;this.addShape(R,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:tt,height:ht,fill:Yt,stroke:re,radius:le,opacity:be,cursor:Ae}});var We=1/3*tt,qe=2/3*tt,Cr=1/4*ht,jr=3/4*ht;this.addShape(R,{id:this.getElementId("line-left"),type:"line",attrs:{x1:We,y1:Cr,x2:We,y2:jr,stroke:re,cursor:Ae}}),this.addShape(R,{id:this.getElementId("line-right"),type:"line",attrs:{x1:qe,y1:Cr,x2:qe,y2:jr,stroke:re,cursor:Ae}})},at.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},at.prototype.initEvent=function(){this.bindEvents()},at.prototype.bindEvents=function(){var R=this;this.get("group").on("mouseenter",function(){var V=R.get("style").highLightFill;R.getElementByLocalId("background").attr("fill",V),R.draw()}),this.get("group").on("mouseleave",function(){var V=R.get("style").fill;R.getElementByLocalId("background").attr("fill",V),R.draw()})},at.prototype.draw=function(){var R=this.get("container").get("canvas");R&&R.draw()},at}(J),Fi=null,no=function(Gt){(0,b.__extends)(at,Gt);function at(){var R=Gt!==null&&Gt.apply(this,arguments)||this;return R.onMouseDown=function(V){return function(tt){R.currentTarget=V;var ht=tt.originalEvent;ht.stopPropagation(),ht.preventDefault(),R.prevX=(0,x.get)(ht,"touches.0.pageX",ht.pageX),R.prevY=(0,x.get)(ht,"touches.0.pageY",ht.pageY);var It=R.getContainerDOM();It.addEventListener("mousemove",R.onMouseMove),It.addEventListener("mouseup",R.onMouseUp),It.addEventListener("mouseleave",R.onMouseUp),It.addEventListener("touchmove",R.onMouseMove),It.addEventListener("touchend",R.onMouseUp),It.addEventListener("touchcancel",R.onMouseUp)}},R.onMouseMove=function(V){var tt=R.cfg.width,ht=[R.get("start"),R.get("end")];V.stopPropagation(),V.preventDefault();var It=(0,x.get)(V,"touches.0.pageX",V.pageX),Yt=(0,x.get)(V,"touches.0.pageY",V.pageY),re=It-R.prevX,le=R.adjustOffsetRange(re/tt);R.updateStartEnd(le),R.updateUI(R.getElementByLocalId("foreground"),R.getElementByLocalId("minText"),R.getElementByLocalId("maxText")),R.prevX=It,R.prevY=Yt,R.draw(),R.emit(io,[R.get("start"),R.get("end")].sort()),R.delegateEmit("valuechanged",{originValue:ht,value:[R.get("start"),R.get("end")]})},R.onMouseUp=function(){R.currentTarget&&(R.currentTarget=void 0);var V=R.getContainerDOM();V&&(V.removeEventListener("mousemove",R.onMouseMove),V.removeEventListener("mouseup",R.onMouseUp),V.removeEventListener("mouseleave",R.onMouseUp),V.removeEventListener("touchmove",R.onMouseMove),V.removeEventListener("touchend",R.onMouseUp),V.removeEventListener("touchcancel",R.onMouseUp))},R}return at.prototype.setRange=function(R,V){this.set("minLimit",R),this.set("maxLimit",V);var tt=this.get("start"),ht=this.get("end"),It=(0,x.clamp)(tt,R,V),Yt=(0,x.clamp)(ht,R,V);!this.get("isInit")&&(tt!==It||ht!==Yt)&&this.setValue([It,Yt])},at.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},at.prototype.setValue=function(R){var V=this.getRange();if((0,x.isArray)(R)&&R.length===2){var tt=[this.get("start"),this.get("end")];this.update({start:(0,x.clamp)(R[0],V.min,V.max),end:(0,x.clamp)(R[1],V.min,V.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:tt,value:R})}},at.prototype.getValue=function(){return[this.get("start"),this.get("end")]},at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Pa,foregroundStyle:Xa,handlerStyle:bn,textStyle:ro}})},at.prototype.update=function(R){var V=R.start,tt=R.end,ht=(0,b.__assign)({},R);(0,x.isNil)(V)||(ht.start=(0,x.clamp)(V,0,1)),(0,x.isNil)(tt)||(ht.end=(0,x.clamp)(tt,0,1)),Gt.prototype.update.call(this,ht),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler"))},at.prototype.init=function(){this.set("start",(0,x.clamp)(this.get("start"),0,1)),this.set("end",(0,x.clamp)(this.get("end"),0,1)),Gt.prototype.init.call(this)},at.prototype.renderInner=function(R){var V=this.cfg,tt=V.start,ht=V.end,It=V.width,Yt=V.height,re=V.trendCfg,le=re===void 0?{}:re,be=V.minText,Ae=V.maxText,We=V.backgroundStyle,qe=We===void 0?{}:We,Cr=V.foregroundStyle,jr=Cr===void 0?{}:Cr,Gr=V.textStyle,mi=Gr===void 0?{}:Gr,wi=V.handlerStyle,xi=wi===void 0?{}:wi,At=tt*It,te=ht*It;(0,x.size)((0,x.get)(le,"data"))&&this.addComponent(R,(0,b.__assign)({component:za,id:this.getElementId("trend"),x:0,y:0,width:It,height:Yt},le)),this.addShape(R,{id:this.getElementId("background"),type:"rect",attrs:(0,b.__assign)({x:0,y:0,width:It,height:Yt},qe)});var ge=this.addShape(R,{id:this.getElementId("minText"),type:"text",attrs:(0,b.__assign)({y:Yt/2,textAlign:"right",text:be,silent:!1},mi)}),Se=this.addShape(R,{id:this.getElementId("maxText"),type:"text",attrs:(0,b.__assign)({y:Yt/2,textAlign:"left",text:Ae,silent:!1},mi)}),Ye=this.addShape(R,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,b.__assign)({y:0,height:Yt},jr)}),pr=(0,x.get)(xi,"height",24);this.minHandler=this.addComponent(R,(0,b.__assign)({component:Va,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(Yt-pr)/2,width:It,height:pr,cursor:"ew-resize"},xi)),this.maxHandler=this.addComponent(R,(0,b.__assign)({component:Va,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(Yt-pr)/2,width:It,height:pr,cursor:"ew-resize"},xi)),this.updateUI(Ye,ge,Se)},at.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},at.prototype.initEvent=function(){this.bindEvents()},at.prototype.updateUI=function(R,V,tt){var ht=this.cfg,It=ht.start,Yt=ht.end,re=ht.width,le=ht.minText,be=ht.maxText,Ae=ht.handlerStyle,We=It*re,qe=Yt*re;R.attr("x",We),R.attr("width",qe-We);var Cr=(0,x.get)(Ae,"width",Un);V.attr("text",le),tt.attr("text",be);var jr=this._dodgeText([We,qe],V,tt),Gr=jr[0],mi=jr[1];this.minHandler&&(this.minHandler.update({x:We-Cr/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,x.each)(Gr,function(wi,xi){return V.attr(xi,wi)}),this.maxHandler&&(this.maxHandler.update({x:qe-Cr/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,x.each)(mi,function(wi,xi){return tt.attr(xi,wi)})},at.prototype.bindEvents=function(){var R=this.get("group");R.on("handler-min:mousedown",this.onMouseDown("minHandler")),R.on("handler-min:touchstart",this.onMouseDown("minHandler")),R.on("handler-max:mousedown",this.onMouseDown("maxHandler")),R.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var V=R.findById(this.getElementId("foreground"));V.on("mousedown",this.onMouseDown("foreground")),V.on("touchstart",this.onMouseDown("foreground"))},at.prototype.adjustOffsetRange=function(R){var V=this.cfg,tt=V.start,ht=V.end;switch(this.currentTarget){case"minHandler":{var It=0-tt,Yt=1-tt;return Math.min(Yt,Math.max(It,R))}case"maxHandler":{var It=0-ht,Yt=1-ht;return Math.min(Yt,Math.max(It,R))}case"foreground":{var It=0-tt,Yt=1-ht;return Math.min(Yt,Math.max(It,R))}}},at.prototype.updateStartEnd=function(R){var V=this.cfg,tt=V.start,ht=V.end;switch(this.currentTarget){case"minHandler":tt+=R;break;case"maxHandler":ht+=R;break;case"foreground":tt+=R,ht+=R;break}this.set("start",tt),this.set("end",ht)},at.prototype._dodgeText=function(R,V,tt){var ht,It,Yt=this.cfg,re=Yt.handlerStyle,le=Yt.width,be=2,Ae=(0,x.get)(re,"width",Un),We=R[0],qe=R[1],Cr=!1;We>qe&&(ht=[qe,We],We=ht[0],qe=ht[1],It=[tt,V],V=It[0],tt=It[1],Cr=!0);var jr=V.getBBox(),Gr=tt.getBBox(),mi=jr.width>We-be?{x:We+Ae/2+be,textAlign:"left"}:{x:We-Ae/2-be,textAlign:"right"},wi=Gr.width>le-qe-be?{x:qe-Ae/2-be,textAlign:"right"}:{x:qe+Ae/2+be,textAlign:"left"};return Cr?[wi,mi]:[mi,wi]},at.prototype.draw=function(){var R=this.get("container"),V=R&&R.get("canvas");V&&V.draw()},at.prototype.getContainerDOM=function(){var R=this.get("container"),V=R&&R.get("canvas");return V&&V.get("container")},at}(J),cn=null,Ri=d(36886),ao={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},Ni={default:ao,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Ha=function(Gt){(0,b.__extends)(at,Gt);function at(){var R=Gt!==null&&Gt.apply(this,arguments)||this;return R.clearEvents=x.noop,R.onStartEvent=function(V){return function(tt){R.isMobile=V,tt.originalEvent.preventDefault();var ht=V?(0,x.get)(tt.originalEvent,"touches.0.clientX"):tt.clientX,It=V?(0,x.get)(tt.originalEvent,"touches.0.clientY"):tt.clientY;R.startPos=R.cfg.isHorizontal?ht:It,R.bindLaterEvent()}},R.bindLaterEvent=function(){var V=R.getContainerDOM(),tt=[];R.isMobile?tt=[(0,Ri.Z)(V,"touchmove",R.onMouseMove),(0,Ri.Z)(V,"touchend",R.onMouseUp),(0,Ri.Z)(V,"touchcancel",R.onMouseUp)]:tt=[(0,Ri.Z)(V,"mousemove",R.onMouseMove),(0,Ri.Z)(V,"mouseup",R.onMouseUp),(0,Ri.Z)(V,"mouseleave",R.onMouseUp)],R.clearEvents=function(){tt.forEach(function(ht){ht.remove()})}},R.onMouseMove=function(V){var tt=R.cfg,ht=tt.isHorizontal,It=tt.thumbOffset;V.preventDefault();var Yt=R.isMobile?(0,x.get)(V,"touches.0.clientX"):V.clientX,re=R.isMobile?(0,x.get)(V,"touches.0.clientY"):V.clientY,le=ht?Yt:re,be=le-R.startPos;R.startPos=le,R.updateThumbOffset(It+be)},R.onMouseUp=function(V){V.preventDefault(),R.clearEvents()},R.onTrackClick=function(V){var tt=R.cfg,ht=tt.isHorizontal,It=tt.x,Yt=tt.y,re=tt.thumbLen,le=R.getContainerDOM(),be=le.getBoundingClientRect(),Ae=V.clientX,We=V.clientY,qe=ht?Ae-be.left-It-re/2:We-be.top-Yt-re/2,Cr=R.validateRange(qe);R.updateThumbOffset(Cr)},R.onThumbMouseOver=function(){var V=R.cfg.theme.hover.thumbColor;R.getElementByLocalId("thumb").attr("stroke",V),R.draw()},R.onThumbMouseOut=function(){var V=R.cfg.theme.default.thumbColor;R.getElementByLocalId("thumb").attr("stroke",V),R.draw()},R}return at.prototype.setRange=function(R,V){this.set("minLimit",R),this.set("maxLimit",V);var tt=this.getValue(),ht=(0,x.clamp)(tt,R,V);tt!==ht&&!this.get("isInit")&&this.setValue(ht)},at.prototype.getRange=function(){var R=this.get("minLimit")||0,V=this.get("maxLimit")||1;return{min:R,max:V}},at.prototype.setValue=function(R){var V=this.getRange(),tt=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,x.clamp)(R,V.min,V.max)}),this.delegateEmit("valuechange",{originalValue:tt,value:this.getValue()})},at.prototype.getValue=function(){return(0,x.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},at.prototype.getDefaultCfg=function(){var R=Gt.prototype.getDefaultCfg.call(this);return(0,b.__assign)((0,b.__assign)({},R),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Ni})},at.prototype.renderInner=function(R){this.renderTrackShape(R),this.renderThumbShape(R)},at.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},at.prototype.initEvent=function(){this.bindEvents()},at.prototype.renderTrackShape=function(R){var V=this.cfg,tt=V.trackLen,ht=V.theme,It=ht===void 0?{default:{}}:ht,Yt=It.default,re=Yt.lineCap,le=Yt.trackColor,be=Yt.size,Ae=this.get("isHorizontal")?{x1:0+be/2,y1:be/2,x2:tt-be/2,y2:be/2,lineWidth:be,stroke:le,lineCap:re}:{x1:be/2,y1:0+be/2,x2:be/2,y2:tt-be/2,lineWidth:be,stroke:le,lineCap:re};return this.addShape(R,{id:this.getElementId("track"),name:"track",type:"line",attrs:Ae})},at.prototype.renderThumbShape=function(R){var V=this.cfg,tt=V.thumbOffset,ht=V.thumbLen,It=V.theme,Yt=It===void 0?{default:{}}:It,re=Yt.default,le=re.size,be=re.lineCap,Ae=re.thumbColor,We=this.get("isHorizontal")?{x1:tt+le/2,y1:le/2,x2:tt+ht-le/2,y2:le/2,lineWidth:le,stroke:Ae,lineCap:be,cursor:"default"}:{x1:le/2,y1:tt+le/2,x2:le/2,y2:tt+ht-le/2,lineWidth:le,stroke:Ae,lineCap:be,cursor:"default"};return this.addShape(R,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:We})},at.prototype.bindEvents=function(){var R=this.get("group");R.on("mousedown",this.onStartEvent(!1)),R.on("mouseup",this.onMouseUp),R.on("touchstart",this.onStartEvent(!0)),R.on("touchend",this.onMouseUp);var V=R.findById(this.getElementId("track"));V.on("click",this.onTrackClick);var tt=R.findById(this.getElementId("thumb"));tt.on("mouseover",this.onThumbMouseOver),tt.on("mouseout",this.onThumbMouseOut)},at.prototype.getContainerDOM=function(){var R=this.get("container"),V=R&&R.get("canvas");return V&&V.get("container")},at.prototype.validateRange=function(R){var V=this.cfg,tt=V.thumbLen,ht=V.trackLen,It=R;return R+tt>ht?It=ht-tt:R+tt<tt&&(It=0),It},at.prototype.draw=function(){var R=this.get("container"),V=R&&R.get("canvas");V&&V.draw()},at.prototype.updateThumbOffset=function(R){var V=this.cfg,tt=V.thumbOffset,ht=V.isHorizontal,It=V.thumbLen,Yt=V.size,re=this.validateRange(R);if(re!==tt){var le=this.getElementByLocalId("thumb");ht?le.attr({x1:re+Yt/2,x2:re+It-Yt/2}):le.attr({y1:re+Yt/2,y2:re+It-Yt/2}),this.emitOffsetChange(re)}},at.prototype.emitOffsetChange=function(R){var V=this.cfg,tt=V.thumbOffset,ht=V.trackLen,It=V.thumbLen;this.cfg.thumbOffset=R,this.emit("scrollchange",{thumbOffset:R,ratio:(0,x.clamp)(R/(ht-It),0,1)}),this.delegateEmit("valuechange",{originalValue:tt,value:R})},at}(J)},11627:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(51467),L=d(23443),I=d(26169),P={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},_=function(T){m.__extends(M,T);function M(A){var p=T.call(this,A)||this;return p.initCfg(),p}return M.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},M.prototype.clear=function(){},M.prototype.update=function(A){var p=this,w=this.get("defaultCfg");I.each(A,function(y,b){var x=p.get(b),E=y;x!==y&&(I.isObject(y)&&w[b]&&(E=I.deepMix({},w[b],y)),p.set(b,E))}),this.updateInner(A),this.afterUpdate(A)},M.prototype.updateInner=function(A){},M.prototype.afterUpdate=function(A){I.hasKey(A,"visible")&&(A.visible?this.show():this.hide()),I.hasKey(A,"capture")&&this.setCapture(A.capture)},M.prototype.getLayoutBBox=function(){return this.getBBox()},M.prototype.getLocationType=function(){return this.get("locationType")},M.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},M.prototype.setOffset=function(A,p){this.update({offsetX:A,offsetY:p})},M.prototype.setLocation=function(A){var p=m.__assign({},A);this.update(p)},M.prototype.getLocation=function(){var A=this,p={},w=this.get("locationType"),y=P[w];return I.each(y,function(b){p[b]=A.get(b)}),p},M.prototype.isList=function(){return!1},M.prototype.isSlider=function(){return!1},M.prototype.init=function(){},M.prototype.initCfg=function(){var A=this,p=this.get("defaultCfg");I.each(p,function(w,y){var b=A.get(y);if(I.isObject(b)){var x=I.deepMix({},w,b);A.set(y,x)}})},M}(L.Base);S.default=_},7093:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(51467),L=d(70546),I=d(26169),P=d(20033),_=d(11627),T=function(M){m.__extends(A,M);function A(){return M!==null&&M.apply(this,arguments)||this}return A.prototype.getDefaultCfg=function(){var p=M.prototype.getDefaultCfg.call(this);return m.__assign(m.__assign({},p),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},A.prototype.getContainer=function(){return this.get("container")},A.prototype.show=function(){var p=this.get("container");p.style.display="",this.set("visible",!0)},A.prototype.hide=function(){var p=this.get("container");p.style.display="none",this.set("visible",!1)},A.prototype.setCapture=function(p){var w=this.getContainer(),y=p?"auto":"none";w.style.pointerEvents=y,this.set("capture",p)},A.prototype.getBBox=function(){var p=this.getContainer(),w=parseFloat(p.style.left)||0,y=parseFloat(p.style.top)||0;return P.createBBox(w,y,p.clientWidth,p.clientHeight)},A.prototype.clear=function(){var p=this.get("container");P.clearDom(p)},A.prototype.destroy=function(){this.removeEvent(),this.removeDom(),M.prototype.destroy.call(this)},A.prototype.init=function(){M.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},A.prototype.initCapture=function(){this.setCapture(this.get("capture"))},A.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},A.prototype.initDom=function(){},A.prototype.initContainer=function(){var p=this.get("container");if(I.isNil(p)){p=this.createDom();var w=this.get("parent");I.isString(w)&&(w=document.getElementById(w),this.set("parent",w)),w.appendChild(p),this.set("container",p)}else I.isString(p)&&(p=document.getElementById(p),this.set("container",p));this.get("parent")||this.set("parent",p.parentNode)},A.prototype.resetStyles=function(){var p=this.get("domStyles"),w=this.get("defaultStyles");p?p=I.deepMix({},w,p):p=w,this.set("domStyles",p)},A.prototype.applyStyles=function(){var p=this.get("domStyles");if(!!p){var w=this.getContainer();this.applyChildrenStyles(w,p);var y=this.get("containerClassName");if(y&&P.hasClass(w,y)){var b=p[y];L.modifyCSS(w,b)}}},A.prototype.applyChildrenStyles=function(p,w){I.each(w,function(y,b){var x=p.getElementsByClassName(b);I.each(x,function(E){L.modifyCSS(E,y)})})},A.prototype.applyStyle=function(p,w){var y=this.get("domStyles");L.modifyCSS(w,y[p])},A.prototype.createDom=function(){var p=this.get("containerTpl");return L.createDom(p)},A.prototype.initEvent=function(){},A.prototype.removeDom=function(){var p=this.get("container");p&&p.parentNode.removeChild(p)},A.prototype.removeEvent=function(){},A.prototype.updateInner=function(p){I.hasKey(p,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},A.prototype.resetPosition=function(){},A}(_.default);S.default=T},44414:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CROSSHAIR_Y=S.CROSSHAIR_X=S.NAME_CLASS=S.VALUE_CLASS=S.MARKER_CLASS=S.LIST_ITEM_CLASS=S.LIST_CLASS=S.TITLE_CLASS=S.CONTAINER_CLASS=void 0,S.CONTAINER_CLASS="g2-tooltip",S.TITLE_CLASS="g2-tooltip-title",S.LIST_CLASS="g2-tooltip-list",S.LIST_ITEM_CLASS="g2-tooltip-list-item",S.MARKER_CLASS="g2-tooltip-marker",S.VALUE_CLASS="g2-tooltip-value",S.NAME_CLASS="g2-tooltip-name",S.CROSSHAIR_X="g2-tooltip-crosshair-x",S.CROSSHAIR_Y="g2-tooltip-crosshair-y"},98906:function(lt,S,d){"use strict";var m;Object.defineProperty(S,"__esModule",{value:!0});var L=d(59618),I=d(44414);S.default=(m={},m[""+I.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:L.default.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},m[""+I.TITLE_CLASS]={marginBottom:"4px"},m[""+I.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},m[""+I.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},m[""+I.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},m[""+I.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},m[""+I.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},m[""+I.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},m)},12946:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(51467),I=d(87892),P=d(70546),_=d(26169),T=d(7093),M=d(20033),A=d(44414),p=d(98906),w=d(99850);function y(x,E){var k=!1;return _.each(E,function(D){if(_.hasKey(x,D))return k=!0,!1}),k}var b=function(x){L.__extends(E,x);function E(){return x!==null&&x.apply(this,arguments)||this}return E.prototype.getDefaultCfg=function(){var k=x.prototype.getDefaultCfg.call(this);return L.__assign(L.__assign({},k),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+A.CONTAINER_CLASS+'"><div class="'+A.TITLE_CLASS+'"></div><ul class="'+A.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+A.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+A.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+A.NAME_CLASS+`">{name}</span>:
          <span class="`+A.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+A.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+A.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:A.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:p.default})},E.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},E.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},E.prototype.show=function(){var k=this.getContainer();!k||this.destroyed||(this.set("visible",!0),P.modifyCSS(k,{visibility:"visible"}),this.setCrossHairsVisible(!0))},E.prototype.hide=function(){var k=this.getContainer();!k||this.destroyed||(this.set("visible",!1),P.modifyCSS(k,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},E.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},E.prototype.setLocation=function(k){this.set("x",k.x),this.set("y",k.y),this.resetPosition()},E.prototype.setCrossHairsVisible=function(k){var D=k?"":"none",N=this.get("xCrosshairDom"),z=this.get("yCrosshairDom");N&&P.modifyCSS(N,{display:D}),z&&P.modifyCSS(z,{display:D})},E.prototype.initContainer=function(){if(x.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var k=this.getHtmlContentNode();this.get("parent").appendChild(k),this.set("container",k),this.resetStyles(),this.applyStyles()}},E.prototype.updateInner=function(k){this.get("customContent")?this.renderCustomContent():(y(k,["title","showTitle"])&&this.resetTitle(),_.hasKey(k,"items")&&this.renderItems()),x.prototype.updateInner.call(this,k)},E.prototype.initDom=function(){this.cacheDoms()},E.prototype.removeDom=function(){x.prototype.removeDom.call(this),this.clearCrosshairs()},E.prototype.resetPosition=function(){var k=this.get("x"),D=this.get("y"),N=this.get("offset"),z=this.getOffset(),W=z.offsetX,X=z.offsetY,U=this.get("position"),et=this.get("region"),Q=this.getContainer(),ct=this.getBBox(),Lt=ct.width,_t=ct.height,yt;et&&(yt=M.regionToBBox(et));var bt=w.getAlignPoint(k,D,N,Lt,_t,U,yt);P.modifyCSS(Q,{left:M.toPx(bt.x+W),top:M.toPx(bt.y+X)}),this.resetCrosshairs()},E.prototype.renderCustomContent=function(){var k=this.getHtmlContentNode(),D=this.get("parent"),N=this.get("container");N&&N.parentNode===D?D.replaceChild(k,N):D.appendChild(k),this.set("container",k),this.resetStyles(),this.applyStyles()},E.prototype.getHtmlContentNode=function(){var k,D=this.get("customContent");if(D){var N=D(this.get("title"),this.get("items"));_.isElement(N)?k=N:k=P.createDom(N)}return k},E.prototype.cacheDoms=function(){var k=this.getContainer(),D=k.getElementsByClassName(A.TITLE_CLASS)[0],N=k.getElementsByClassName(A.LIST_CLASS)[0];this.set("titleDom",D),this.set("listDom",N)},E.prototype.resetTitle=function(){var k=this.get("title"),D=this.get("showTitle");D&&k?this.setTitle(k):this.setTitle("")},E.prototype.setTitle=function(k){var D=this.get("titleDom");D&&(D.innerText=k)},E.prototype.resetCrosshairs=function(){var k=this.get("crosshairsRegion"),D=this.get("crosshairs");if(!k||!D)this.clearCrosshairs();else{var N=M.regionToBBox(k),z=this.get("xCrosshairDom"),W=this.get("yCrosshairDom");D==="x"?(this.resetCrosshair("x",N),W&&(W.remove(),this.set("yCrosshairDom",null))):D==="y"?(this.resetCrosshair("y",N),z&&(z.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",N),this.resetCrosshair("y",N)),this.setCrossHairsVisible(this.get("visible"))}},E.prototype.resetCrosshair=function(k,D){var N=this.checkCrosshair(k),z=this.get(k);k==="x"?P.modifyCSS(N,{left:M.toPx(z),top:M.toPx(D.y),height:M.toPx(D.height)}):P.modifyCSS(N,{top:M.toPx(z),left:M.toPx(D.x),width:M.toPx(D.width)})},E.prototype.checkCrosshair=function(k){var D=k+"CrosshairDom",N=k+"CrosshairTpl",z="CROSSHAIR_"+k.toUpperCase(),W=A[z],X=this.get(D),U=this.get("parent");return X||(X=P.createDom(this.get(N)),this.applyStyle(W,X),U.appendChild(X),this.set(D,X)),X},E.prototype.renderItems=function(){this.clearItemDoms();var k=this.get("items"),D=this.get("itemTpl"),N=this.get("listDom");N&&(_.each(k,function(z){var W=I.default.toCSSGradient(z.color),X=L.__assign(L.__assign({},z),{color:W}),U=_.substitute(D,X),et=P.createDom(U);N.appendChild(et)}),this.applyChildrenStyles(N,this.get("domStyles")))},E.prototype.clearItemDoms=function(){this.get("listDom")&&M.clearDom(this.get("listDom"))},E.prototype.clearCrosshairs=function(){var k=this.get("xCrosshairDom"),D=this.get("yCrosshairDom");k&&k.remove(),D&&D.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},E}(T.default);S.Z=b},99850:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getAlignPoint=S.getPointByPosition=S.getOutSides=void 0;function d(I,P,_,T,M){var A={left:I<M.x,right:I+_>M.x+M.width,top:P<M.y,bottom:P+T>M.y+M.height};return A}S.getOutSides=d;function m(I,P,_,T,M,A){var p=I,w=P;switch(A){case"left":p=I-T-_,w=P-M/2;break;case"right":p=I+_,w=P-M/2;break;case"top":p=I-T/2,w=P-M-_;break;case"bottom":p=I-T/2,w=P+_;break;default:p=I+_,w=P-M-_;break}return{x:p,y:w}}S.getPointByPosition=m;function L(I,P,_,T,M,A,p){var w=m(I,P,_,T,M,A);if(p){var y=d(w.x,w.y,T,M,p);A==="auto"?(y.right&&(w.x=Math.max(0,I-T-_)),y.top&&(w.y=Math.max(0,P-M-_))):A==="top"||A==="bottom"?(y.left&&(w.x=p.x),y.right&&(w.x=p.x+p.width-T),A==="top"&&y.top&&(w.y=P+_),A==="bottom"&&y.bottom&&(w.y=P-M-_)):(y.top&&(w.y=p.y),y.bottom&&(w.y=p.y+p.height-M),A==="left"&&y.left&&(w.x=I+_),A==="right"&&y.right&&(w.x=I-T-_))}return w}S.getAlignPoint=L},82614:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.propagationDelegate=void 0;var m=d(58992);function L(I,P,_){var T=new m.default(P,_);T.target=I,T.propagationPath.push(I),I.emitDelegation(P,T);for(var M=I.getParent();M;)M.emitDelegation(P,T),T.propagationPath.push(M),M=M.getParent()}S.propagationDelegate=L},59618:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},20033:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getTextPoint=S.toPx=S.updateClip=S.getBBoxWithClip=S.mergeBBox=S.intersectBBox=S.near=S.wait=S.distance=S.getCirclePoint=S.getValueByPercent=S.createBBox=S.pointsToBBox=S.regionToBBox=S.hasClass=S.clearDom=S.formatPadding=void 0;var m=d(26169);function L(N){var z=0,W=0,X=0,U=0;return m.isNumber(N)?z=W=X=U=N:m.isArray(N)&&(z=N[0],X=m.isNil(N[1])?N[0]:N[1],U=m.isNil(N[2])?N[0]:N[2],W=m.isNil(N[3])?X:N[3]),[z,X,U,W]}S.formatPadding=L;function I(N){for(var z=N.childNodes,W=z.length,X=W-1;X>=0;X--)N.removeChild(z[X])}S.clearDom=I;function P(N,z){return!!N.className.match(new RegExp("(\\s|^)"+z+"(\\s|$)"))}S.hasClass=P;function _(N){var z=N.start,W=N.end,X=Math.min(z.x,W.x),U=Math.min(z.y,W.y),et=Math.max(z.x,W.x),Q=Math.max(z.y,W.y);return{x:X,y:U,minX:X,minY:U,maxX:et,maxY:Q,width:et-X,height:Q-U}}S.regionToBBox=_;function T(N){var z=N.map(function(ct){return ct.x}),W=N.map(function(ct){return ct.y}),X=Math.min.apply(Math,z),U=Math.min.apply(Math,W),et=Math.max.apply(Math,z),Q=Math.max.apply(Math,W);return{x:X,y:U,minX:X,minY:U,maxX:et,maxY:Q,width:et-X,height:Q-U}}S.pointsToBBox=T;function M(N,z,W,X){return{x:N,y:z,width:W,height:X,minX:N,minY:z,maxX:N+W,maxY:z+X}}S.createBBox=M;function A(N,z,W){return(1-W)*N+z*W}S.getValueByPercent=A;function p(N,z,W){return{x:N.x+Math.cos(W)*z,y:N.y+Math.sin(W)*z}}S.getCirclePoint=p;function w(N,z){var W=z.x-N.x,X=z.y-N.y;return Math.sqrt(W*W+X*X)}S.distance=w,S.wait=function(N){return new Promise(function(z){setTimeout(z,N)})},S.near=function(N,z){return[N,z].includes(Infinity)?Math.abs(N)===Math.abs(z):Math.abs(N-z)<Math.pow(Number.EPSILON,.5)};function y(N,z){var W=Math.max(N.minX,z.minX),X=Math.max(N.minY,z.minY),U=Math.min(N.maxX,z.maxX),et=Math.min(N.maxY,z.maxY);return M(W,X,U-W,et-X)}S.intersectBBox=y;function b(N,z){var W=Math.min(N.minX,z.minX),X=Math.min(N.minY,z.minY),U=Math.max(N.maxX,z.maxX),et=Math.max(N.maxY,z.maxY);return M(W,X,U-W,et-X)}S.mergeBBox=b;function x(N){var z=N.getClip(),W=z&&z.getBBox(),X;if(!N.isGroup())X=N.getBBox();else{var U=Infinity,et=-Infinity,Q=Infinity,ct=-Infinity,Lt=N.getChildren();Lt.length>0?m.each(Lt,function(_t){if(_t.get("visible")){if(_t.isGroup()&&_t.get("children").length===0)return!0;var yt=x(_t),bt=_t.applyToMatrix([yt.minX,yt.minY,1]),Mt=_t.applyToMatrix([yt.minX,yt.maxY,1]),xt=_t.applyToMatrix([yt.maxX,yt.minY,1]),Bt=_t.applyToMatrix([yt.maxX,yt.maxY,1]),wt=Math.min(bt[0],Mt[0],xt[0],Bt[0]),H=Math.max(bt[0],Mt[0],xt[0],Bt[0]),K=Math.min(bt[1],Mt[1],xt[1],Bt[1]),B=Math.max(bt[1],Mt[1],xt[1],Bt[1]);wt<U&&(U=wt),H>et&&(et=H),K<Q&&(Q=K),B>ct&&(ct=B)}}):(U=0,et=0,Q=0,ct=0),X=M(U,Q,et-U,ct-Q)}return W?y(X,W):X}S.getBBoxWithClip=x;function E(N,z){if(!(!N.getClip()&&!z.getClip())){var W=z.getClip();if(!W){N.setClip(null);return}var X={type:W.get("type"),attrs:W.attr()};N.setClip(X)}}S.updateClip=E;function k(N){return N+"px"}S.toPx=k;function D(N,z,W,X){var U=w(N,z),et=X/U,Q=0;return W==="start"?Q=0-et:W==="end"&&(Q=1+et),{x:A(N.x,z.x,Q),y:A(N.y,z.y,Q)}}S.getTextPoint=D},14533:function(lt,S,d){"use strict";d.r(S),d.d(S,{Coordinate:function(){return M},getCoordinate:function(){return D},registerCoordinate:function(){return N}});var m=d(44614),L=d(92541),I=d(58198),P=d(50669),_=d(26169),T=function(){function z(W){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var X=W.start,U=W.end,et=W.matrix,Q=et===void 0?[1,0,0,0,1,0,0,0,1]:et,ct=W.isTransposed,Lt=ct===void 0?!1:ct;this.start=X,this.end=U,this.matrix=Q,this.originalMatrix=(0,m.__spreadArray)([],Q),this.isTransposed=Lt}return z.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},z.prototype.update=function(W){(0,_.assign)(this,W),this.initial()},z.prototype.convertDim=function(W,X){var U,et=this[X],Q=et.start,ct=et.end;return this.isReflect(X)&&(U=[ct,Q],Q=U[0],ct=U[1]),Q+W*(ct-Q)},z.prototype.invertDim=function(W,X){var U,et=this[X],Q=et.start,ct=et.end;return this.isReflect(X)&&(U=[ct,Q],Q=U[0],ct=U[1]),(W-Q)/(ct-Q)},z.prototype.applyMatrix=function(W,X,U){U===void 0&&(U=0);var et=this.matrix,Q=[W,X,U];return L.transformMat3(Q,Q,et),Q},z.prototype.invertMatrix=function(W,X,U){U===void 0&&(U=0);var et=this.matrix,Q=I.invert([0,0,0,0,0,0,0,0,0],et),ct=[W,X,U];return Q&&L.transformMat3(ct,ct,Q),ct},z.prototype.convert=function(W){var X=this.convertPoint(W),U=X.x,et=X.y,Q=this.applyMatrix(U,et,1);return{x:Q[0],y:Q[1]}},z.prototype.invert=function(W){var X=this.invertMatrix(W.x,W.y,1);return this.invertPoint({x:X[0],y:X[1]})},z.prototype.rotate=function(W){var X=this.matrix,U=this.center;return P.leftTranslate(X,X,[-U.x,-U.y]),P.leftRotate(X,X,W),P.leftTranslate(X,X,[U.x,U.y]),this},z.prototype.reflect=function(W){return W==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},z.prototype.scale=function(W,X){var U=this.matrix,et=this.center;return P.leftTranslate(U,U,[-et.x,-et.y]),P.leftScale(U,U,[W,X]),P.leftTranslate(U,U,[et.x,et.y]),this},z.prototype.translate=function(W,X){var U=this.matrix;return P.leftTranslate(U,U,[W,X]),this},z.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},z.prototype.getCenter=function(){return this.center},z.prototype.getWidth=function(){return this.width},z.prototype.getHeight=function(){return this.height},z.prototype.getRadius=function(){return this.radius},z.prototype.isReflect=function(W){return W==="x"?this.isReflectX:this.isReflectY},z.prototype.resetMatrix=function(W){this.matrix=W||(0,m.__spreadArray)([],this.originalMatrix)},z}(),M=T,A=function(z){(0,m.__extends)(W,z);function W(X){var U=z.call(this,X)||this;return U.isRect=!0,U.type="cartesian",U.initial(),U}return W.prototype.initial=function(){z.prototype.initial.call(this);var X=this.start,U=this.end;this.x={start:X.x,end:U.x},this.y={start:X.y,end:U.y}},W.prototype.convertPoint=function(X){var U,et=X.x,Q=X.y;return this.isTransposed&&(U=[Q,et],et=U[0],Q=U[1]),{x:this.convertDim(et,"x"),y:this.convertDim(Q,"y")}},W.prototype.invertPoint=function(X){var U,et=this.invertDim(X.x,"x"),Q=this.invertDim(X.y,"y");return this.isTransposed&&(U=[Q,et],et=U[0],Q=U[1]),{x:et,y:Q}},W}(M),p=A,w=d(7124),y=function(z){(0,m.__extends)(W,z);function W(X){var U=z.call(this,X)||this;U.isHelix=!0,U.type="helix";var et=X.startAngle,Q=et===void 0?1.25*Math.PI:et,ct=X.endAngle,Lt=ct===void 0?7.25*Math.PI:ct,_t=X.innerRadius,yt=_t===void 0?0:_t,bt=X.radius;return U.startAngle=Q,U.endAngle=Lt,U.innerRadius=yt,U.radius=bt,U.initial(),U}return W.prototype.initial=function(){z.prototype.initial.call(this);var X=(this.endAngle-this.startAngle)/(2*Math.PI)+1,U=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(U=U*this.radius),this.d=Math.floor(U*(1-this.innerRadius)/X),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*U,end:this.innerRadius*U+this.d*.99}},W.prototype.convertPoint=function(X){var U,et=X.x,Q=X.y;this.isTransposed&&(U=[Q,et],et=U[0],Q=U[1]);var ct=this.convertDim(et,"x"),Lt=this.a*ct,_t=this.convertDim(Q,"y");return{x:this.center.x+Math.cos(ct)*(Lt+_t),y:this.center.y+Math.sin(ct)*(Lt+_t)}},W.prototype.invertPoint=function(X){var U,et=this.d+this.y.start,Q=w.subtract([0,0],[X.x,X.y],[this.center.x,this.center.y]),ct=P.angleTo(Q,[1,0],!0),Lt=ct*this.a;w.length(Q)<Lt&&(Lt=w.length(Q));var _t=Math.floor((w.length(Q)-Lt)/et);ct=2*_t*Math.PI+ct;var yt=this.a*ct,bt=w.length(Q)-yt;bt=(0,_.isNumberEqual)(bt,0)?0:bt;var Mt=this.invertDim(ct,"x"),xt=this.invertDim(bt,"y");return Mt=(0,_.isNumberEqual)(Mt,0)?0:Mt,xt=(0,_.isNumberEqual)(xt,0)?0:xt,this.isTransposed&&(U=[xt,Mt],Mt=U[0],xt=U[1]),{x:Mt,y:xt}},W}(M),b=y,x=function(z){(0,m.__extends)(W,z);function W(X){var U=z.call(this,X)||this;U.isPolar=!0,U.type="polar";var et=X.startAngle,Q=et===void 0?-Math.PI/2:et,ct=X.endAngle,Lt=ct===void 0?Math.PI*3/2:ct,_t=X.innerRadius,yt=_t===void 0?0:_t,bt=X.radius;return U.startAngle=Q,U.endAngle=Lt,U.innerRadius=yt,U.radius=bt,U.initial(),U}return W.prototype.initial=function(){for(z.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var X=this.getOneBox(),U=X.maxX-X.minX,et=X.maxY-X.minY,Q=Math.abs(X.minX)/U,ct=Math.abs(X.minY)/et,Lt;this.height/et>this.width/U?(Lt=this.width/U,this.circleCenter={x:this.center.x-(.5-Q)*this.width,y:this.center.y-(.5-ct)*Lt*et}):(Lt=this.height/et,this.circleCenter={x:this.center.x-(.5-Q)*Lt*U,y:this.center.y-(.5-ct)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Lt*this.radius:(this.radius<=0||this.radius>Lt)&&(this.polarRadius=Lt):this.polarRadius=Lt,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},W.prototype.getRadius=function(){return this.polarRadius},W.prototype.convertPoint=function(X){var U,et=this.getCenter(),Q=X.x,ct=X.y;return this.isTransposed&&(U=[ct,Q],Q=U[0],ct=U[1]),Q=this.convertDim(Q,"x"),ct=this.convertDim(ct,"y"),{x:et.x+Math.cos(Q)*ct,y:et.y+Math.sin(Q)*ct}},W.prototype.invertPoint=function(X){var U,et=this.getCenter(),Q=[X.x-et.x,X.y-et.y],ct=this,Lt=ct.startAngle,_t=ct.endAngle;this.isReflect("x")&&(U=[_t,Lt],Lt=U[0],_t=U[1]);var yt=[1,0,0,0,1,0,0,0,1];P.leftRotate(yt,yt,Lt);var bt=[1,0,0];L.transformMat3(bt,bt,yt);var Mt=[bt[0],bt[1]],xt=P.angleTo(Mt,Q,_t<Lt);(0,_.isNumberEqual)(xt,Math.PI*2)&&(xt=0);var Bt=w.length(Q),wt=xt/(_t-Lt);wt=_t-Lt>0?wt:-wt;var H=this.invertDim(Bt,"y"),K={x:0,y:0};return K.x=this.isTransposed?H:wt,K.y=this.isTransposed?wt:H,K},W.prototype.getCenter=function(){return this.circleCenter},W.prototype.getOneBox=function(){var X=this.startAngle,U=this.endAngle;if(Math.abs(U-X)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var et=[0,Math.cos(X),Math.cos(U)],Q=[0,Math.sin(X),Math.sin(U)],ct=Math.min(X,U);ct<Math.max(X,U);ct+=Math.PI/18)et.push(Math.cos(ct)),Q.push(Math.sin(ct));return{minX:Math.min.apply(Math,et),maxX:Math.max.apply(Math,et),minY:Math.min.apply(Math,Q),maxY:Math.max.apply(Math,Q)}},W}(M),E=x,k={},D=function(z){return k[z.toLowerCase()]},N=function(z,W){k[z.toLowerCase()]=W};N("rect",p),N("cartesian",p),N("polar",E),N("helix",b)},36886:function(lt,S,d){"use strict";d.d(S,{Z:function(){return m}});function m(L,I,P){if(L){if(typeof L.addEventListener=="function")return L.addEventListener(I,P,!1),{remove:function(){L.removeEventListener(I,P,!1)}};if(typeof L.attachEvent=="function")return L.attachEvent("on"+I,P),{remove:function(){L.detachEvent("on"+I,P)}}}}},44717:function(lt,S,d){"use strict";d.d(S,{Z:function(){return T}});var m,L,I,P;function _(){m=document.createElement("table"),L=document.createElement("tr"),I=/^\s*<(\w+|!)[^>]*>/,P={tr:document.createElement("tbody"),tbody:m,thead:m,tfoot:m,td:L,th:L,"*":document.createElement("div")}}function T(M){m||_();var A=I.test(M)&&RegExp.$1;(!A||!(A in P))&&(A="*");var p=P[A];M=typeof M=="string"?M.replace(/(^\s*)|(\s*$)/g,""):M,p.innerHTML=""+M;var w=p.childNodes[0];return w&&p.contains(w)&&p.removeChild(w),w}},53642:function(lt,S,d){"use strict";d.d(S,{Z:function(){return L}});var m=d(27707);function L(I,P){var _=(0,m.Z)(I,"height",P);return _==="auto"&&(_=I.offsetHeight),parseFloat(_)}},20311:function(lt,S,d){"use strict";d.d(S,{Z:function(){return I}});var m=d(27707),L=d(53642);function I(P,_){var T=(0,L.Z)(P,_),M=parseFloat((0,m.Z)(P,"borderTopWidth"))||0,A=parseFloat((0,m.Z)(P,"paddingTop"))||0,p=parseFloat((0,m.Z)(P,"paddingBottom"))||0,w=parseFloat((0,m.Z)(P,"borderBottomWidth"))||0,y=parseFloat((0,m.Z)(P,"marginTop"))||0,b=parseFloat((0,m.Z)(P,"marginBottom"))||0;return T+M+w+A+p+y+b}},74940:function(lt,S,d){"use strict";d.d(S,{Z:function(){return I}});var m=d(27707),L=d(92926);function I(P,_){var T=(0,L.Z)(P,_),M=parseFloat((0,m.Z)(P,"borderLeftWidth"))||0,A=parseFloat((0,m.Z)(P,"paddingLeft"))||0,p=parseFloat((0,m.Z)(P,"paddingRight"))||0,w=parseFloat((0,m.Z)(P,"borderRightWidth"))||0,y=parseFloat((0,m.Z)(P,"marginRight"))||0,b=parseFloat((0,m.Z)(P,"marginLeft"))||0;return T+M+w+A+p+b+y}},27707:function(lt,S,d){"use strict";d.d(S,{Z:function(){return m}});function m(L,I,P){var _;try{_=window.getComputedStyle?window.getComputedStyle(L,null)[I]:L.style[I]}catch(T){}finally{_=_===void 0?P:_}return _}},92926:function(lt,S,d){"use strict";d.d(S,{Z:function(){return L}});var m=d(27707);function L(I,P){var _=(0,m.Z)(I,"width",P);return _==="auto"&&(_=I.offsetWidth),parseFloat(_)}},70546:function(lt,S,d){"use strict";d.r(S),d.d(S,{addEventListener:function(){return m.Z},createDom:function(){return L.Z},getHeight:function(){return I.Z},getOuterHeight:function(){return P.Z},getOuterWidth:function(){return _.Z},getRatio:function(){return T},getStyle:function(){return M.Z},getWidth:function(){return A.Z},modifyCSS:function(){return p.Z}});var m=d(36886),L=d(44717),I=d(53642),P=d(20311),_=d(74940);function T(){return window.devicePixelRatio?window.devicePixelRatio:2}var M=d(27707),A=d(92926),p=d(62870)},62870:function(lt,S,d){"use strict";d.d(S,{Z:function(){return m}});function m(L,I){if(L)for(var P in I)I.hasOwnProperty(P)&&(L.style[P]=I[P]);return L}},9159:function(lt,S){"use strict";var d;d={value:!0};function m(L,I,P){if(L){if(typeof L.addEventListener=="function")return L.addEventListener(I,P,!1),{remove:function(){L.removeEventListener(I,P,!1)}};if(typeof L.attachEvent=="function")return L.attachEvent("on"+I,P),{remove:function(){L.detachEvent("on"+I,P)}}}}S.Z=m},6279:function(lt,S){"use strict";var d;d={value:!0};var m,L,I,P;function _(){m=document.createElement("table"),L=document.createElement("tr"),I=/^\s*<(\w+|!)[^>]*>/,P={tr:document.createElement("tbody"),tbody:m,thead:m,tfoot:m,td:L,th:L,"*":document.createElement("div")}}function T(M){m||_();var A=I.test(M)&&RegExp.$1;(!A||!(A in P))&&(A="*");var p=P[A];M=typeof M=="string"?M.replace(/(^\s*)|(\s*$)/g,""):M,p.innerHTML=""+M;var w=p.childNodes[0];return w&&p.contains(w)&&p.removeChild(w),w}S.Z=T},19495:function(lt,S){"use strict";var d;d={value:!0};function m(L,I){if(L)for(var P in I)I.hasOwnProperty(P)&&(L.style[P]=I[P]);return L}S.Z=m},49336:function(lt,S,d){"use strict";d.r(S);var m="*",L=function(){function I(){this._events={}}return I.prototype.on=function(P,_,T){return this._events[P]||(this._events[P]=[]),this._events[P].push({callback:_,once:!!T}),this},I.prototype.once=function(P,_){return this.on(P,_,!0)},I.prototype.emit=function(P){for(var _=this,T=[],M=1;M<arguments.length;M++)T[M-1]=arguments[M];var A=this._events[P]||[],p=this._events[m]||[],w=function(y){for(var b=y.length,x=0;x<b;x++)if(!!y[x]){var E=y[x],k=E.callback,D=E.once;D&&(y.splice(x,1),y.length===0&&delete _._events[P],b--,x--),k.apply(_,T)}};w(A),w(p)},I.prototype.off=function(P,_){if(!P)this._events={};else if(!_)delete this._events[P];else{for(var T=this._events[P]||[],M=T.length,A=0;A<M;A++)T[A].callback===_&&(T.splice(A,1),M--,A--);T.length===0&&delete this._events[P]}return this},I.prototype.getEvents=function(){return this._events},I}();S.default=L},23443:function(lt,S,d){"use strict";d.r(S),d.d(S,{AbstractCanvas:function(){return di},AbstractGroup:function(){return qi},AbstractShape:function(){return Ii},Base:function(){return Fe},Event:function(){return zt},PathUtil:function(){return m},version:function(){return Ln}});var m={};d.r(m),d.d(m,{catmullRomToBezier:function(){return M},fillPath:function(){return wt},fillPathByDiff:function(){return h},formatPath:function(){return Vt},intersection:function(){return bt},parsePathArray:function(){return k},parsePathString:function(){return T},pathToAbsolute:function(){return p},pathToCurve:function(){return x},rectPath:function(){return U}});var L=d(26169),I=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,P=new RegExp("([a-z])["+I+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+I+"]*,?["+I+"]*)+)","ig"),_=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+I+"]*,?["+I+"]*","ig"),T=function(Et){if(!Et)return null;if((0,L.isArray)(Et))return Et;var ft={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},it=[];return String(Et).replace(P,function(ot,Ot,Zt){var de=[],pe=Ot.toLowerCase();if(Zt.replace(_,function(ye,Ge){Ge&&de.push(+Ge)}),pe==="m"&&de.length>2&&(it.push([Ot].concat(de.splice(0,2))),pe="l",Ot=Ot==="m"?"l":"L"),pe==="o"&&de.length===1&&it.push([Ot,de[0]]),pe==="r")it.push([Ot].concat(de));else for(;de.length>=ft[pe]&&(it.push([Ot].concat(de.splice(0,ft[pe]))),!!ft[pe]););return Et}),it},M=function(Et,ft){for(var it=[],ot=0,Ot=Et.length;Ot-2*!ft>ot;ot+=2){var Zt=[{x:+Et[ot-2],y:+Et[ot-1]},{x:+Et[ot],y:+Et[ot+1]},{x:+Et[ot+2],y:+Et[ot+3]},{x:+Et[ot+4],y:+Et[ot+5]}];ft?ot?Ot-4===ot?Zt[3]={x:+Et[0],y:+Et[1]}:Ot-2===ot&&(Zt[2]={x:+Et[0],y:+Et[1]},Zt[3]={x:+Et[2],y:+Et[3]}):Zt[0]={x:+Et[Ot-2],y:+Et[Ot-1]}:Ot-4===ot?Zt[3]=Zt[2]:ot||(Zt[0]={x:+Et[ot],y:+Et[ot+1]}),it.push(["C",(-Zt[0].x+6*Zt[1].x+Zt[2].x)/6,(-Zt[0].y+6*Zt[1].y+Zt[2].y)/6,(Zt[1].x+6*Zt[2].x-Zt[3].x)/6,(Zt[1].y+6*Zt[2].y-Zt[3].y)/6,Zt[2].x,Zt[2].y])}return it},A=function(Et,ft,it,ot,Ot){var Zt=[];if(Ot===null&&ot===null&&(ot=it),Et=+Et,ft=+ft,it=+it,ot=+ot,Ot!==null){var de=Math.PI/180,pe=Et+it*Math.cos(-ot*de),ye=Et+it*Math.cos(-Ot*de),Ge=ft+it*Math.sin(-ot*de),$e=ft+it*Math.sin(-Ot*de);Zt=[["M",pe,Ge],["A",it,it,0,+(Ot-ot>180),0,ye,$e]]}else Zt=[["M",Et,ft],["m",0,-ot],["a",it,ot,0,1,1,0,2*ot],["a",it,ot,0,1,1,0,-2*ot],["z"]];return Zt},p=function(Et){if(Et=T(Et),!Et||!Et.length)return[["M",0,0]];var ft=[],it=0,ot=0,Ot=0,Zt=0,de=0,pe,ye;Et[0][0]==="M"&&(it=+Et[0][1],ot=+Et[0][2],Ot=it,Zt=ot,de++,ft[0]=["M",it,ot]);for(var Ge=Et.length===3&&Et[0][0]==="M"&&Et[1][0].toUpperCase()==="R"&&Et[2][0].toUpperCase()==="Z",$e=void 0,je=void 0,mr=de,vr=Et.length;mr<vr;mr++){if(ft.push($e=[]),je=Et[mr],pe=je[0],pe!==pe.toUpperCase())switch($e[0]=pe.toUpperCase(),$e[0]){case"A":$e[1]=je[1],$e[2]=je[2],$e[3]=je[3],$e[4]=je[4],$e[5]=je[5],$e[6]=+je[6]+it,$e[7]=+je[7]+ot;break;case"V":$e[1]=+je[1]+ot;break;case"H":$e[1]=+je[1]+it;break;case"R":ye=[it,ot].concat(je.slice(1));for(var He=2,kr=ye.length;He<kr;He++)ye[He]=+ye[He]+it,ye[++He]=+ye[He]+ot;ft.pop(),ft=ft.concat(M(ye,Ge));break;case"O":ft.pop(),ye=A(it,ot,je[1],je[2]),ye.push(ye[0]),ft=ft.concat(ye);break;case"U":ft.pop(),ft=ft.concat(A(it,ot,je[1],je[2],je[3])),$e=["U"].concat(ft[ft.length-1].slice(-2));break;case"M":Ot=+je[1]+it,Zt=+je[2]+ot;break;default:for(var He=1,kr=je.length;He<kr;He++)$e[He]=+je[He]+(He%2?it:ot)}else if(pe==="R")ye=[it,ot].concat(je.slice(1)),ft.pop(),ft=ft.concat(M(ye,Ge)),$e=["R"].concat(je.slice(-2));else if(pe==="O")ft.pop(),ye=A(it,ot,je[1],je[2]),ye.push(ye[0]),ft=ft.concat(ye);else if(pe==="U")ft.pop(),ft=ft.concat(A(it,ot,je[1],je[2],je[3])),$e=["U"].concat(ft[ft.length-1].slice(-2));else for(var ti=0,dt=je.length;ti<dt;ti++)$e[ti]=je[ti];if(pe=pe.toUpperCase(),pe!=="O")switch($e[0]){case"Z":it=+Ot,ot=+Zt;break;case"H":it=$e[1];break;case"V":ot=$e[1];break;case"M":Ot=$e[$e.length-2],Zt=$e[$e.length-1];break;default:it=$e[$e.length-2],ot=$e[$e.length-1]}}return ft},w=function(Et,ft,it,ot){return[Et,ft,it,ot,it,ot]},y=function(Et,ft,it,ot,Ot,Zt){var de=1/3,pe=2/3;return[de*Et+pe*it,de*ft+pe*ot,de*Ot+pe*it,de*Zt+pe*ot,Ot,Zt]},b=function(Et,ft,it,ot,Ot,Zt,de,pe,ye,Ge){it===ot&&(it+=1);var $e=Math.PI*120/180,je=Math.PI/180*(+Ot||0),mr=[],vr,He,kr,ti,dt,rt=function(Vn,xn,ha){var ea=Vn*Math.cos(ha)-xn*Math.sin(ha),_a=Vn*Math.sin(ha)+xn*Math.cos(ha);return{x:ea,y:_a}};if(Ge)He=Ge[0],kr=Ge[1],ti=Ge[2],dt=Ge[3];else{vr=rt(Et,ft,-je),Et=vr.x,ft=vr.y,vr=rt(pe,ye,-je),pe=vr.x,ye=vr.y,Et===pe&&ft===ye&&(pe+=1,ye+=1);var j=(Et-pe)/2,Z=(ft-ye)/2,St=j*j/(it*it)+Z*Z/(ot*ot);St>1&&(St=Math.sqrt(St),it=St*it,ot=St*ot);var Dt=it*it,qt=ot*ot,ae=(Zt===de?-1:1)*Math.sqrt(Math.abs((Dt*qt-Dt*Z*Z-qt*j*j)/(Dt*Z*Z+qt*j*j)));ti=ae*it*Z/ot+(Et+pe)/2,dt=ae*-ot*j/it+(ft+ye)/2,He=Math.asin(((ft-dt)/ot).toFixed(9)),kr=Math.asin(((ye-dt)/ot).toFixed(9)),He=Et<ti?Math.PI-He:He,kr=pe<ti?Math.PI-kr:kr,He<0&&(He=Math.PI*2+He),kr<0&&(kr=Math.PI*2+kr),de&&He>kr&&(He=He-Math.PI*2),!de&&kr>He&&(kr=kr-Math.PI*2)}var ne=kr-He;if(Math.abs(ne)>$e){var Oe=kr,Ie=pe,De=ye;kr=He+$e*(de&&kr>He?1:-1),pe=ti+it*Math.cos(kr),ye=dt+ot*Math.sin(kr),mr=b(pe,ye,it,ot,Ot,0,de,Ie,De,[kr,Oe,ti,dt])}ne=kr-He;var or=Math.cos(He),nr=Math.sin(He),ze=Math.cos(kr),cr=Math.sin(kr),Rr=Math.tan(ne/4),Jr=4/3*it*Rr,$r=4/3*ot*Rr,Pr=[Et,ft],ur=[Et+Jr*nr,ft-$r*or],ii=[pe+Jr*cr,ye-$r*ze],Oi=[pe,ye];if(ur[0]=2*Pr[0]-ur[0],ur[1]=2*Pr[1]-ur[1],Ge)return[ur,ii,Oi].concat(mr);mr=[ur,ii,Oi].concat(mr).join().split(",");for(var Wi=[],an=0,oa=mr.length;an<oa;an++)Wi[an]=an%2?rt(mr[an-1],mr[an],je).y:rt(mr[an],mr[an+1],je).x;return Wi},x=function(Et,ft){var it=p(Et),ot=ft&&p(ft),Ot={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Zt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},de=[],pe=[],ye="",Ge="",$e,je=function(j,Z,St){var Dt,qt;if(!j)return["C",Z.x,Z.y,Z.x,Z.y,Z.x,Z.y];switch(!(j[0]in{T:1,Q:1})&&(Z.qx=Z.qy=null),j[0]){case"M":Z.X=j[1],Z.Y=j[2];break;case"A":j=["C"].concat(b.apply(0,[Z.x,Z.y].concat(j.slice(1))));break;case"S":St==="C"||St==="S"?(Dt=Z.x*2-Z.bx,qt=Z.y*2-Z.by):(Dt=Z.x,qt=Z.y),j=["C",Dt,qt].concat(j.slice(1));break;case"T":St==="Q"||St==="T"?(Z.qx=Z.x*2-Z.qx,Z.qy=Z.y*2-Z.qy):(Z.qx=Z.x,Z.qy=Z.y),j=["C"].concat(y(Z.x,Z.y,Z.qx,Z.qy,j[1],j[2]));break;case"Q":Z.qx=j[1],Z.qy=j[2],j=["C"].concat(y(Z.x,Z.y,j[1],j[2],j[3],j[4]));break;case"L":j=["C"].concat(w(Z.x,Z.y,j[1],j[2]));break;case"H":j=["C"].concat(w(Z.x,Z.y,j[1],Z.y));break;case"V":j=["C"].concat(w(Z.x,Z.y,Z.x,j[1]));break;case"Z":j=["C"].concat(w(Z.x,Z.y,Z.X,Z.Y));break;default:break}return j},mr=function(j,Z){if(j[Z].length>7){j[Z].shift();for(var St=j[Z];St.length;)de[Z]="A",ot&&(pe[Z]="A"),j.splice(Z++,0,["C"].concat(St.splice(0,6)));j.splice(Z,1),$e=Math.max(it.length,ot&&ot.length||0)}},vr=function(j,Z,St,Dt,qt){j&&Z&&j[qt][0]==="M"&&Z[qt][0]!=="M"&&(Z.splice(qt,0,["M",Dt.x,Dt.y]),St.bx=0,St.by=0,St.x=j[qt][1],St.y=j[qt][2],$e=Math.max(it.length,ot&&ot.length||0))};$e=Math.max(it.length,ot&&ot.length||0);for(var He=0;He<$e;He++){it[He]&&(ye=it[He][0]),ye!=="C"&&(de[He]=ye,He&&(Ge=de[He-1])),it[He]=je(it[He],Ot,Ge),de[He]!=="A"&&ye==="C"&&(de[He]="C"),mr(it,He),ot&&(ot[He]&&(ye=ot[He][0]),ye!=="C"&&(pe[He]=ye,He&&(Ge=pe[He-1])),ot[He]=je(ot[He],Zt,Ge),pe[He]!=="A"&&ye==="C"&&(pe[He]="C"),mr(ot,He)),vr(it,ot,Ot,Zt,He),vr(ot,it,Zt,Ot,He);var kr=it[He],ti=ot&&ot[He],dt=kr.length,rt=ot&&ti.length;Ot.x=kr[dt-2],Ot.y=kr[dt-1],Ot.bx=parseFloat(kr[dt-4])||Ot.x,Ot.by=parseFloat(kr[dt-3])||Ot.y,Zt.bx=ot&&(parseFloat(ti[rt-4])||Zt.x),Zt.by=ot&&(parseFloat(ti[rt-3])||Zt.y),Zt.x=ot&&ti[rt-2],Zt.y=ot&&ti[rt-1]}return ot?[it,ot]:it},E=/,?([a-z]),?/gi,k=function(Et){return Et.join(",").replace(E,"$1")},D=function(Et,ft,it,ot,Ot){var Zt=-3*ft+9*it-9*ot+3*Ot,de=Et*Zt+6*ft-12*it+6*ot;return Et*de-3*ft+3*it},N=function(Et,ft,it,ot,Ot,Zt,de,pe,ye){ye===null&&(ye=1),ye=ye>1?1:ye<0?0:ye;for(var Ge=ye/2,$e=12,je=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],mr=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],vr=0,He=0;He<$e;He++){var kr=Ge*je[He]+Ge,ti=D(kr,Et,it,Ot,de),dt=D(kr,ft,ot,Zt,pe),rt=ti*ti+dt*dt;vr+=mr[He]*Math.sqrt(rt)}return Ge*vr},z=function(Et,ft,it,ot,Ot,Zt,de,pe){for(var ye=[],Ge=[[],[]],$e,je,mr,vr,He=0;He<2;++He){if(He===0?(je=6*Et-12*it+6*Ot,$e=-3*Et+9*it-9*Ot+3*de,mr=3*it-3*Et):(je=6*ft-12*ot+6*Zt,$e=-3*ft+9*ot-9*Zt+3*pe,mr=3*ot-3*ft),Math.abs($e)<1e-12){if(Math.abs(je)<1e-12)continue;vr=-mr/je,vr>0&&vr<1&&ye.push(vr);continue}var kr=je*je-4*mr*$e,ti=Math.sqrt(kr);if(!(kr<0)){var dt=(-je+ti)/(2*$e);dt>0&&dt<1&&ye.push(dt);var rt=(-je-ti)/(2*$e);rt>0&&rt<1&&ye.push(rt)}}for(var j=ye.length,Z=j,St;j--;)vr=ye[j],St=1-vr,Ge[0][j]=St*St*St*Et+3*St*St*vr*it+3*St*vr*vr*Ot+vr*vr*vr*de,Ge[1][j]=St*St*St*ft+3*St*St*vr*ot+3*St*vr*vr*Zt+vr*vr*vr*pe;return Ge[0][Z]=Et,Ge[1][Z]=ft,Ge[0][Z+1]=de,Ge[1][Z+1]=pe,Ge[0].length=Ge[1].length=Z+2,{min:{x:Math.min.apply(0,Ge[0]),y:Math.min.apply(0,Ge[1])},max:{x:Math.max.apply(0,Ge[0]),y:Math.max.apply(0,Ge[1])}}},W=function(Et,ft,it,ot,Ot,Zt,de,pe){if(!(Math.max(Et,it)<Math.min(Ot,de)||Math.min(Et,it)>Math.max(Ot,de)||Math.max(ft,ot)<Math.min(Zt,pe)||Math.min(ft,ot)>Math.max(Zt,pe))){var ye=(Et*ot-ft*it)*(Ot-de)-(Et-it)*(Ot*pe-Zt*de),Ge=(Et*ot-ft*it)*(Zt-pe)-(ft-ot)*(Ot*pe-Zt*de),$e=(Et-it)*(Zt-pe)-(ft-ot)*(Ot-de);if(!!$e){var je=ye/$e,mr=Ge/$e,vr=+je.toFixed(2),He=+mr.toFixed(2);if(!(vr<+Math.min(Et,it).toFixed(2)||vr>+Math.max(Et,it).toFixed(2)||vr<+Math.min(Ot,de).toFixed(2)||vr>+Math.max(Ot,de).toFixed(2)||He<+Math.min(ft,ot).toFixed(2)||He>+Math.max(ft,ot).toFixed(2)||He<+Math.min(Zt,pe).toFixed(2)||He>+Math.max(Zt,pe).toFixed(2)))return{x:je,y:mr}}}},X=function(Et,ft,it){return ft>=Et.x&&ft<=Et.x+Et.width&&it>=Et.y&&it<=Et.y+Et.height},U=function(Et,ft,it,ot,Ot){if(Ot)return[["M",+Et+ +Ot,ft],["l",it-Ot*2,0],["a",Ot,Ot,0,0,1,Ot,Ot],["l",0,ot-Ot*2],["a",Ot,Ot,0,0,1,-Ot,Ot],["l",Ot*2-it,0],["a",Ot,Ot,0,0,1,-Ot,-Ot],["l",0,Ot*2-ot],["a",Ot,Ot,0,0,1,Ot,-Ot],["z"]];var Zt=[["M",Et,ft],["l",it,0],["l",0,ot],["l",-it,0],["z"]];return Zt.parsePathArray=k,Zt},et=function(Et,ft,it,ot){return Et===null&&(Et=ft=it=ot=0),ft===null&&(ft=Et.y,it=Et.width,ot=Et.height,Et=Et.x),{x:Et,y:ft,width:it,w:it,height:ot,h:ot,x2:Et+it,y2:ft+ot,cx:Et+it/2,cy:ft+ot/2,r1:Math.min(it,ot)/2,r2:Math.max(it,ot)/2,r0:Math.sqrt(it*it+ot*ot)/2,path:U(Et,ft,it,ot),vb:[Et,ft,it,ot].join(" ")}},Q=function(Et,ft){return Et=et(Et),ft=et(ft),X(ft,Et.x,Et.y)||X(ft,Et.x2,Et.y)||X(ft,Et.x,Et.y2)||X(ft,Et.x2,Et.y2)||X(Et,ft.x,ft.y)||X(Et,ft.x2,ft.y)||X(Et,ft.x,ft.y2)||X(Et,ft.x2,ft.y2)||(Et.x<ft.x2&&Et.x>ft.x||ft.x<Et.x2&&ft.x>Et.x)&&(Et.y<ft.y2&&Et.y>ft.y||ft.y<Et.y2&&ft.y>Et.y)},ct=function(Et,ft,it,ot,Ot,Zt,de,pe){(0,L.isArray)(Et)||(Et=[Et,ft,it,ot,Ot,Zt,de,pe]);var ye=z.apply(null,Et);return et(ye.min.x,ye.min.y,ye.max.x-ye.min.x,ye.max.y-ye.min.y)},Lt=function(Et,ft,it,ot,Ot,Zt,de,pe,ye){var Ge=1-ye,$e=Math.pow(Ge,3),je=Math.pow(Ge,2),mr=ye*ye,vr=mr*ye,He=$e*Et+je*3*ye*it+Ge*3*ye*ye*Ot+vr*de,kr=$e*ft+je*3*ye*ot+Ge*3*ye*ye*Zt+vr*pe,ti=Et+2*ye*(it-Et)+mr*(Ot-2*it+Et),dt=ft+2*ye*(ot-ft)+mr*(Zt-2*ot+ft),rt=it+2*ye*(Ot-it)+mr*(de-2*Ot+it),j=ot+2*ye*(Zt-ot)+mr*(pe-2*Zt+ot),Z=Ge*Et+ye*it,St=Ge*ft+ye*ot,Dt=Ge*Ot+ye*de,qt=Ge*Zt+ye*pe,ae=90-Math.atan2(ti-rt,dt-j)*180/Math.PI;return{x:He,y:kr,m:{x:ti,y:dt},n:{x:rt,y:j},start:{x:Z,y:St},end:{x:Dt,y:qt},alpha:ae}},_t=function(Et,ft,it){var ot=ct(Et),Ot=ct(ft);if(!Q(ot,Ot))return it?0:[];for(var Zt=N.apply(0,Et),de=N.apply(0,ft),pe=~~(Zt/8),ye=~~(de/8),Ge=[],$e=[],je={},mr=it?0:[],vr=0;vr<pe+1;vr++){var He=Lt.apply(0,Et.concat(vr/pe));Ge.push({x:He.x,y:He.y,t:vr/pe})}for(var vr=0;vr<ye+1;vr++){var He=Lt.apply(0,ft.concat(vr/ye));$e.push({x:He.x,y:He.y,t:vr/ye})}for(var vr=0;vr<pe;vr++)for(var kr=0;kr<ye;kr++){var ti=Ge[vr],dt=Ge[vr+1],rt=$e[kr],j=$e[kr+1],Z=Math.abs(dt.x-ti.x)<.001?"y":"x",St=Math.abs(j.x-rt.x)<.001?"y":"x",Dt=W(ti.x,ti.y,dt.x,dt.y,rt.x,rt.y,j.x,j.y);if(Dt){if(je[Dt.x.toFixed(4)]===Dt.y.toFixed(4))continue;je[Dt.x.toFixed(4)]=Dt.y.toFixed(4);var qt=ti.t+Math.abs((Dt[Z]-ti[Z])/(dt[Z]-ti[Z]))*(dt.t-ti.t),ae=rt.t+Math.abs((Dt[St]-rt[St])/(j[St]-rt[St]))*(j.t-rt.t);qt>=0&&qt<=1&&ae>=0&&ae<=1&&(it?mr+=1:mr.push({x:Dt.x,y:Dt.y,t1:qt,t2:ae}))}}return mr},yt=function(Et,ft,it){Et=x(Et),ft=x(ft);for(var ot,Ot,Zt,de,pe,ye,Ge,$e,je,mr,vr=it?0:[],He=0,kr=Et.length;He<kr;He++){var ti=Et[He];if(ti[0]==="M")ot=pe=ti[1],Ot=ye=ti[2];else{ti[0]==="C"?(je=[ot,Ot].concat(ti.slice(1)),ot=je[6],Ot=je[7]):(je=[ot,Ot,ot,Ot,pe,ye,pe,ye],ot=pe,Ot=ye);for(var dt=0,rt=ft.length;dt<rt;dt++){var j=ft[dt];if(j[0]==="M")Zt=Ge=j[1],de=$e=j[2];else{j[0]==="C"?(mr=[Zt,de].concat(j.slice(1)),Zt=mr[6],de=mr[7]):(mr=[Zt,de,Zt,de,Ge,$e,Ge,$e],Zt=Ge,de=$e);var Z=_t(je,mr,it);if(it)vr+=Z;else{for(var St=0,Dt=Z.length;St<Dt;St++)Z[St].segment1=He,Z[St].segment2=dt,Z[St].bez1=je,Z[St].bez2=mr;vr=vr.concat(Z)}}}}}return vr},bt=function(Et,ft){return yt(Et,ft)};function Mt(Et,ft){var it=[],ot=[];function Ot(Zt,de){if(Zt.length===1)it.push(Zt[0]),ot.push(Zt[0]);else{for(var pe=[],ye=0;ye<Zt.length-1;ye++)ye===0&&it.push(Zt[0]),ye===Zt.length-2&&ot.push(Zt[ye+1]),pe[ye]=[(1-de)*Zt[ye][0]+de*Zt[ye+1][0],(1-de)*Zt[ye][1]+de*Zt[ye+1][1]];Ot(pe,de)}}return Et.length&&Ot(Et,ft),{left:it,right:ot.reverse()}}function xt(Et,ft,it){var ot=[[Et[1],Et[2]]];it=it||2;var Ot=[];ft[0]==="A"?(ot.push(ft[6]),ot.push(ft[7])):ft[0]==="C"?(ot.push([ft[1],ft[2]]),ot.push([ft[3],ft[4]]),ot.push([ft[5],ft[6]])):ft[0]==="S"||ft[0]==="Q"?(ot.push([ft[1],ft[2]]),ot.push([ft[3],ft[4]])):ot.push([ft[1],ft[2]]);for(var Zt=ot,de=1/it,pe=0;pe<it-1;pe++){var ye=de/(1-de*pe),Ge=Mt(Zt,ye);Ot.push(Ge.left),Zt=Ge.right}Ot.push(Zt);var $e=Ot.map(function(je){var mr=[];return je.length===4&&(mr.push("C"),mr=mr.concat(je[2])),je.length>=3&&(je.length===3&&mr.push("Q"),mr=mr.concat(je[1])),je.length===2&&mr.push("L"),mr=mr.concat(je[je.length-1]),mr});return $e}var Bt=function(Et,ft,it){if(it===1)return[[].concat(Et)];var ot=[];if(ft[0]==="L"||ft[0]==="C"||ft[0]==="Q")ot=ot.concat(xt(Et,ft,it));else{var Ot=[].concat(Et);Ot[0]==="M"&&(Ot[0]="L");for(var Zt=0;Zt<=it-1;Zt++)ot.push(Ot)}return ot},wt=function(Et,ft){if(Et.length===1)return Et;var it=Et.length-1,ot=ft.length-1,Ot=it/ot,Zt=[];if(Et.length===1&&Et[0][0]==="M"){for(var de=0;de<ot-it;de++)Et.push(Et[0]);return Et}for(var de=0;de<ot;de++){var pe=Math.floor(Ot*de);Zt[pe]=(Zt[pe]||0)+1}var ye=Zt.reduce(function(Ge,$e,je){return je===it?Ge.concat(Et[it]):Ge.concat(Bt(Et[je],Et[je+1],$e))},[]);return ye.unshift(Et[0]),(ft[ot]==="Z"||ft[ot]==="z")&&ye.push("Z"),ye},H=function(Et,ft){if(Et.length!==ft.length)return!1;var it=!0;return(0,L.each)(Et,function(ot,Ot){if(ot!==ft[Ot])return it=!1,!1}),it};function K(Et,ft,it){var ot=null,Ot=it;return ft<Ot&&(Ot=ft,ot="add"),Et<Ot&&(Ot=Et,ot="del"),{type:ot,min:Ot}}var B=function(Et,ft){var it=Et.length,ot=ft.length,Ot,Zt,de=0;if(it===0||ot===0)return null;for(var pe=[],ye=0;ye<=it;ye++)pe[ye]=[],pe[ye][0]={min:ye};for(var Ge=0;Ge<=ot;Ge++)pe[0][Ge]={min:Ge};for(var ye=1;ye<=it;ye++){Ot=Et[ye-1];for(var Ge=1;Ge<=ot;Ge++){Zt=ft[Ge-1],H(Ot,Zt)?de=0:de=1;var $e=pe[ye-1][Ge].min+1,je=pe[ye][Ge-1].min+1,mr=pe[ye-1][Ge-1].min+de;pe[ye][Ge]=K($e,je,mr)}}return pe},h=function(Et,ft){var it=B(Et,ft),ot=Et.length,Ot=ft.length,Zt=[],de=1,pe=1;if(it[ot][Ot].min!==ot){for(var ye=1;ye<=ot;ye++){var Ge=it[ye][ye].min;pe=ye;for(var $e=de;$e<=Ot;$e++)it[ye][$e].min<Ge&&(Ge=it[ye][$e].min,pe=$e);de=pe,it[ye][de].type&&Zt.push({index:ye-1,type:it[ye][de].type})}for(var ye=Zt.length-1;ye>=0;ye--)de=Zt[ye].index,Zt[ye].type==="add"?Et.splice(de,0,[].concat(Et[de])):Et.splice(de,1)}ot=Et.length;var je=Ot-ot;if(ot<Ot)for(var ye=0;ye<je;ye++)Et[ot-1][0]==="z"||Et[ot-1][0]==="Z"?Et.splice(ot-2,0,Et[ot-2]):Et.push(Et[ot-1]),ot+=1;return Et};function mt(Et,ft,it){for(var ot=[].concat(Et),Ot,Zt=1/(it+1),de=gt(ft)[0],pe=1;pe<=it;pe++)Zt*=pe,Ot=Math.floor(Et.length*Zt),Ot===0?ot.unshift([de[0]*Zt+Et[Ot][0]*(1-Zt),de[1]*Zt+Et[Ot][1]*(1-Zt)]):ot.splice(Ot,0,[de[0]*Zt+Et[Ot][0]*(1-Zt),de[1]*Zt+Et[Ot][1]*(1-Zt)]);return ot}function gt(Et){var ft=[];switch(Et[0]){case"M":ft.push([Et[1],Et[2]]);break;case"L":ft.push([Et[1],Et[2]]);break;case"A":ft.push([Et[6],Et[7]]);break;case"Q":ft.push([Et[3],Et[4]]),ft.push([Et[1],Et[2]]);break;case"T":ft.push([Et[1],Et[2]]);break;case"C":ft.push([Et[5],Et[6]]),ft.push([Et[1],Et[2]]),ft.push([Et[3],Et[4]]);break;case"S":ft.push([Et[3],Et[4]]),ft.push([Et[1],Et[2]]);break;case"H":ft.push([Et[1],Et[1]]);break;case"V":ft.push([Et[1],Et[1]]);break;default:}return ft}var Vt=function(Et,ft){if(Et.length<=1)return Et;for(var it,ot=0;ot<ft.length;ot++)if(Et[ot][0]!==ft[ot][0])switch(it=gt(Et[ot]),ft[ot][0]){case"M":Et[ot]=["M"].concat(it[0]);break;case"L":Et[ot]=["L"].concat(it[0]);break;case"A":Et[ot]=[].concat(ft[ot]),Et[ot][6]=it[0][0],Et[ot][7]=it[0][1];break;case"Q":if(it.length<2)if(ot>0)it=mt(it,Et[ot-1],1);else{Et[ot]=ft[ot];break}Et[ot]=["Q"].concat(it.reduce(function(Ot,Zt){return Ot.concat(Zt)},[]));break;case"T":Et[ot]=["T"].concat(it[0]);break;case"C":if(it.length<3)if(ot>0)it=mt(it,Et[ot-1],2);else{Et[ot]=ft[ot];break}Et[ot]=["C"].concat(it.reduce(function(Ot,Zt){return Ot.concat(Zt)},[]));break;case"S":if(it.length<2)if(ot>0)it=mt(it,Et[ot-1],1);else{Et[ot]=ft[ot];break}Et[ot]=["S"].concat(it.reduce(function(Ot,Zt){return Ot.concat(Zt)},[]));break;default:Et[ot]=ft[ot]}return Et},Jt=function(){function Et(ft,it){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=ft,this.name=ft,this.originalEvent=it,this.timeStamp=it.timeStamp}return Et.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},Et.prototype.stopPropagation=function(){this.propagationStopped=!0},Et.prototype.toString=function(){var ft=this.type;return"[Event (type="+ft+")]"},Et.prototype.save=function(){},Et.prototype.restore=function(){},Et}(),zt=Jt,Qt=d(44614),oe=d(49336),se=d(83438),jt=d(91110),Pt=d(55535),pt=d(41367),st=d(21429),Ct=d(7165),nt=d(91577),J=d(18092);function vt(Et,ft){var it=Et.indexOf(ft);it!==-1&&Et.splice(it,1)}var Tt=typeof window!="undefined"&&typeof window.document!="undefined";function Ht(Et,ft){if(Et.isCanvas())return!0;for(var it=ft.getParent(),ot=!1;it;){if(it===Et){ot=!0;break}it=it.getParent()}return ot}function ue(Et){return Et.cfg.visible&&Et.cfg.capture}var Ce=function(Et){(0,Qt.__extends)(ft,Et);function ft(it){var ot=Et.call(this)||this;ot.destroyed=!1;var Ot=ot.getDefaultCfg();return ot.cfg=(0,Ct.default)(Ot,it),ot}return ft.prototype.getDefaultCfg=function(){return{}},ft.prototype.get=function(it){return this.cfg[it]},ft.prototype.set=function(it,ot){this.cfg[it]=ot},ft.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},ft}(oe.default),Fe=Ce,Ve=d(93229),dr=d(50669);function xr(Et,ft){var it=[],ot=Et[0],Ot=Et[1],Zt=Et[2],de=Et[3],pe=Et[4],ye=Et[5],Ge=Et[6],$e=Et[7],je=Et[8],mr=ft[0],vr=ft[1],He=ft[2],kr=ft[3],ti=ft[4],dt=ft[5],rt=ft[6],j=ft[7],Z=ft[8];return it[0]=mr*ot+vr*de+He*Ge,it[1]=mr*Ot+vr*pe+He*$e,it[2]=mr*Zt+vr*ye+He*je,it[3]=kr*ot+ti*de+dt*Ge,it[4]=kr*Ot+ti*pe+dt*$e,it[5]=kr*Zt+ti*ye+dt*je,it[6]=rt*ot+j*de+Z*Ge,it[7]=rt*Ot+j*pe+Z*$e,it[8]=rt*Zt+j*ye+Z*je,it}function Er(Et,ft){var it=[],ot=ft[0],Ot=ft[1];return it[0]=Et[0]*ot+Et[3]*Ot+Et[6],it[1]=Et[1]*ot+Et[4]*Ot+Et[7],it}function Yr(Et){var ft=[],it=Et[0],ot=Et[1],Ot=Et[2],Zt=Et[3],de=Et[4],pe=Et[5],ye=Et[6],Ge=Et[7],$e=Et[8],je=$e*de-pe*Ge,mr=-$e*Zt+pe*ye,vr=Ge*Zt-de*ye,He=it*je+ot*mr+Ot*vr;return He?(He=1/He,ft[0]=je*He,ft[1]=(-$e*ot+Ot*Ge)*He,ft[2]=(pe*ot-Ot*de)*He,ft[3]=mr*He,ft[4]=($e*it-Ot*ye)*He,ft[5]=(-pe*it+Ot*Zt)*He,ft[6]=vr*He,ft[7]=(-Ge*it+ot*ye)*He,ft[8]=(de*it-ot*Zt)*He,ft):null}var gr="matrix",ri=["zIndex","capture","visible","type"],bi=["repeat"],Qr=":",gi="*";function hn(Et){for(var ft=[],it=0;it<Et.length;it++)(0,L.isArray)(Et[it])?ft.push([].concat(Et[it])):ft.push(Et[it]);return ft}function mn(Et,ft){var it={},ot=ft.attrs;for(var Ot in Et)it[Ot]=ot[Ot];return it}function Cn(Et,ft){var it={},ot=ft.attr();return(0,L.each)(Et,function(Ot,Zt){bi.indexOf(Zt)===-1&&!(0,L.isEqual)(ot[Zt],Ot)&&(it[Zt]=Ot)}),it}function Xn(Et,ft){if(ft.onFrame)return Et;var it=ft.startTime,ot=ft.delay,Ot=ft.duration,Zt=Object.prototype.hasOwnProperty;return(0,L.each)(Et,function(de){it+ot<de.startTime+de.delay+de.duration&&Ot>de.delay&&(0,L.each)(ft.toAttrs,function(pe,ye){Zt.call(de.toAttrs,ye)&&(delete de.toAttrs[ye],delete de.fromAttrs[ye])})}),Et}var Xt=function(Et){(0,Qt.__extends)(ft,Et);function ft(it){var ot=Et.call(this,it)||this;ot.attrs={};var Ot=ot.getDefaultAttrs();return(0,L.mix)(Ot,it.attrs),ot.attrs=Ot,ot.initAttrs(Ot),ot.initAnimate(),ot}return ft.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},ft.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},ft.prototype.onCanvasChange=function(it){},ft.prototype.initAttrs=function(it){},ft.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},ft.prototype.isGroup=function(){return!1},ft.prototype.getParent=function(){return this.get("parent")},ft.prototype.getCanvas=function(){return this.get("canvas")},ft.prototype.attr=function(){for(var it,ot=[],Ot=0;Ot<arguments.length;Ot++)ot[Ot]=arguments[Ot];var Zt=ot[0],de=ot[1];if(!Zt)return this.attrs;if((0,L.isObject)(Zt)){for(var pe in Zt)this.setAttr(pe,Zt[pe]);return this.afterAttrsChange(Zt),this}return ot.length===2?(this.setAttr(Zt,de),this.afterAttrsChange((it={},it[Zt]=de,it)),this):this.attrs[Zt]},ft.prototype.isClipped=function(it,ot){var Ot=this.getClip();return Ot&&!Ot.isHit(it,ot)},ft.prototype.setAttr=function(it,ot){var Ot=this.attrs[it];Ot!==ot&&(this.attrs[it]=ot,this.onAttrChange(it,ot,Ot))},ft.prototype.onAttrChange=function(it,ot,Ot){it==="matrix"&&this.set("totalMatrix",null)},ft.prototype.afterAttrsChange=function(it){this.onCanvasChange("attr")},ft.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},ft.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},ft.prototype.setZIndex=function(it){this.set("zIndex",it);var ot=this.getParent();return ot&&ot.sort(),this},ft.prototype.toFront=function(){var it=this.getParent();if(!!it){var ot=it.getChildren(),Ot=this.get("el"),Zt=ot.indexOf(this);ot.splice(Zt,1),ot.push(this),this.onCanvasChange("zIndex")}},ft.prototype.toBack=function(){var it=this.getParent();if(!!it){var ot=it.getChildren(),Ot=this.get("el"),Zt=ot.indexOf(this);ot.splice(Zt,1),ot.unshift(this),this.onCanvasChange("zIndex")}},ft.prototype.remove=function(it){it===void 0&&(it=!0);var ot=this.getParent();ot?(vt(ot.getChildren(),this),ot.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),it&&this.destroy()},ft.prototype.resetMatrix=function(){this.attr(gr,this.getDefaultMatrix()),this.onCanvasChange("matrix")},ft.prototype.getMatrix=function(){return this.attr(gr)},ft.prototype.setMatrix=function(it){this.attr(gr,it),this.onCanvasChange("matrix")},ft.prototype.getTotalMatrix=function(){var it=this.get("totalMatrix");if(!it){var ot=this.attr("matrix"),Ot=this.get("parentMatrix");Ot&&ot?it=xr(Ot,ot):it=ot||Ot,this.set("totalMatrix",it)}return it},ft.prototype.applyMatrix=function(it){var ot=this.attr("matrix"),Ot=null;it&&ot?Ot=xr(it,ot):Ot=ot||it,this.set("totalMatrix",Ot),this.set("parentMatrix",it)},ft.prototype.getDefaultMatrix=function(){return null},ft.prototype.applyToMatrix=function(it){var ot=this.attr("matrix");return ot?Er(ot,it):it},ft.prototype.invertFromMatrix=function(it){var ot=this.attr("matrix");if(ot){var Ot=Yr(ot);if(Ot)return Er(Ot,it)}return it},ft.prototype.setClip=function(it){var ot=this.getCanvas(),Ot=null;if(it){var Zt=this.getShapeBase(),de=(0,L.upperFirst)(it.type),pe=Zt[de];pe&&(Ot=new pe({type:it.type,isClipShape:!0,attrs:it.attrs,canvas:ot}))}return this.set("clipShape",Ot),this.onCanvasChange("clip"),Ot},ft.prototype.getClip=function(){var it=this.cfg.clipShape;return it||null},ft.prototype.clone=function(){var it=this,ot=this.attrs,Ot={};(0,L.each)(ot,function(pe,ye){(0,L.isArray)(ot[ye])?Ot[ye]=hn(ot[ye]):Ot[ye]=ot[ye]});var Zt=this.constructor,de=new Zt({attrs:Ot});return(0,L.each)(ri,function(pe){de.set(pe,it.get(pe))}),de},ft.prototype.destroy=function(){var it=this.destroyed;it||(this.attrs={},Et.prototype.destroy.call(this))},ft.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},ft.prototype.animate=function(){for(var it=[],ot=0;ot<arguments.length;ot++)it[ot]=arguments[ot];this.set("animating",!0);var Ot=this.get("timeline");Ot||(Ot=this.get("canvas").get("timeline"),this.set("timeline",Ot));var Zt=this.get("animations")||[];Ot.timer||Ot.initTimer();var de=it[0],pe=it[1],ye=it[2],Ge=ye===void 0?"easeLinear":ye,$e=it[3],je=$e===void 0?L.noop:$e,mr=it[4],vr=mr===void 0?0:mr,He,kr,ti,dt,rt;(0,L.isFunction)(de)?(He=de,de={}):(0,L.isObject)(de)&&de.onFrame&&(He=de.onFrame,kr=de.repeat),(0,L.isObject)(pe)?(rt=pe,pe=rt.duration,Ge=rt.easing||"easeLinear",vr=rt.delay||0,kr=rt.repeat||kr||!1,je=rt.callback||L.noop,ti=rt.pauseCallback||L.noop,dt=rt.resumeCallback||L.noop):((0,L.isNumber)(je)&&(vr=je,je=null),(0,L.isFunction)(Ge)?(je=Ge,Ge="easeLinear"):Ge=Ge||"easeLinear");var j=Cn(de,this),Z={fromAttrs:mn(j,this),toAttrs:j,duration:pe,easing:Ge,repeat:kr,callback:je,pauseCallback:ti,resumeCallback:dt,delay:vr,startTime:Ot.getTime(),id:(0,L.uniqueId)(),onFrame:He,pathFormatted:!1};Zt.length>0?Zt=Xn(Zt,Z):Ot.addAnimator(this),Zt.push(Z),this.set("animations",Zt),this.set("_pause",{isPaused:!1})},ft.prototype.stopAnimate=function(it){var ot=this;it===void 0&&(it=!0);var Ot=this.get("animations");(0,L.each)(Ot,function(Zt){it&&(Zt.onFrame?ot.attr(Zt.onFrame(1)):ot.attr(Zt.toAttrs)),Zt.callback&&Zt.callback()}),this.set("animating",!1),this.set("animations",[])},ft.prototype.pauseAnimate=function(){var it=this.get("timeline"),ot=this.get("animations"),Ot=it.getTime();return(0,L.each)(ot,function(Zt){Zt._paused=!0,Zt._pauseTime=Ot,Zt.pauseCallback&&Zt.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:Ot}),this},ft.prototype.resumeAnimate=function(){var it=this.get("timeline"),ot=it.getTime(),Ot=this.get("animations"),Zt=this.get("_pause").pauseTime;return(0,L.each)(Ot,function(de){de.startTime=de.startTime+(ot-Zt),de._paused=!1,de._pauseTime=null,de.resumeCallback&&de.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",Ot),this},ft.prototype.emitDelegation=function(it,ot){var Ot=this,Zt=ot.propagationPath,de=this.getEvents(),pe;it==="mouseenter"?pe=ot.fromShape:it==="mouseleave"&&(pe=ot.toShape);for(var ye=function(mr){var vr=Zt[mr],He=vr.get("name");if(He){if((vr.isGroup()||vr.isCanvas&&vr.isCanvas())&&pe&&Ht(vr,pe))return"break";(0,L.isArray)(He)?(0,L.each)(He,function(kr){Ot.emitDelegateEvent(vr,kr,ot)}):Ge.emitDelegateEvent(vr,He,ot)}},Ge=this,$e=0;$e<Zt.length;$e++){var je=ye($e);if(je==="break")break}},ft.prototype.emitDelegateEvent=function(it,ot,Ot){var Zt=this.getEvents(),de=ot+Qr+Ot.type;(Zt[de]||Zt[gi])&&(Ot.name=de,Ot.currentTarget=it,Ot.delegateTarget=this,Ot.delegateObject=it.get("delegateObject"),this.emit(de,Ot))},ft.prototype.translate=function(it,ot){it===void 0&&(it=0),ot===void 0&&(ot=0);var Ot=this.getMatrix(),Zt=dr.transform(Ot,[["t",it,ot]]);return this.setMatrix(Zt),this},ft.prototype.move=function(it,ot){var Ot=this.attr("x")||0,Zt=this.attr("y")||0;return this.translate(it-Ot,ot-Zt),this},ft.prototype.moveTo=function(it,ot){return this.move(it,ot)},ft.prototype.scale=function(it,ot){var Ot=this.getMatrix(),Zt=dr.transform(Ot,[["s",it,ot||it]]);return this.setMatrix(Zt),this},ft.prototype.rotate=function(it){var ot=this.getMatrix(),Ot=dr.transform(ot,[["r",it]]);return this.setMatrix(Ot),this},ft.prototype.rotateAtStart=function(it){var ot=this.attr(),Ot=ot.x,Zt=ot.y,de=this.getMatrix(),pe=dr.transform(de,[["t",-Ot,-Zt],["r",it],["t",Ot,Zt]]);return this.setMatrix(pe),this},ft.prototype.rotateAtPoint=function(it,ot,Ot){var Zt=this.getMatrix(),de=dr.transform(Zt,[["t",-it,-ot],["r",Ot],["t",it,ot]]);return this.setMatrix(de),this},ft}(Fe),$t=Xt,he={},ce="_INDEX";function we(Et){Et.isGroup()?(Et.isEntityGroup()||Et.get("children").length)&&Et.onCanvasChange("add"):Et.onCanvasChange("add")}function Ee(Et,ft){if(Et.set("canvas",ft),Et.isGroup()){var it=Et.get("children");it.length&&it.forEach(function(ot){Ee(ot,ft)})}}function _e(Et,ft){if(Et.set("timeline",ft),Et.isGroup()){var it=Et.get("children");it.length&&it.forEach(function(ot){_e(ot,ft)})}}function Le(Et,ft){var it=Et.getChildren();return it.indexOf(ft)>=0}function xe(Et,ft,it){it===void 0&&(it=!0),it?ft.destroy():(ft.set("parent",null),ft.set("canvas",null)),vt(Et.getChildren(),ft)}function er(Et){return function(ft,it){var ot=Et(ft,it);return ot===0?ft[ce]-it[ce]:ot}}var Xe=function(Et){(0,Qt.__extends)(ft,Et);function ft(){return Et!==null&&Et.apply(this,arguments)||this}return ft.prototype.isCanvas=function(){return!1},ft.prototype.getBBox=function(){var it=Infinity,ot=-Infinity,Ot=Infinity,Zt=-Infinity,de=[],pe=[],ye=this.getChildren().filter(function($e){return $e.get("visible")&&(!$e.isGroup()||$e.isGroup()&&$e.getChildren().length>0)});ye.length>0?((0,nt.default)(ye,function($e){var je=$e.getBBox();de.push(je.minX,je.maxX),pe.push(je.minY,je.maxY)}),it=Math.min.apply(null,de),ot=Math.max.apply(null,de),Ot=Math.min.apply(null,pe),Zt=Math.max.apply(null,pe)):(it=0,ot=0,Ot=0,Zt=0);var Ge={x:it,y:Ot,minX:it,minY:Ot,maxX:ot,maxY:Zt,width:ot-it,height:Zt-Ot};return Ge},ft.prototype.getCanvasBBox=function(){var it=Infinity,ot=-Infinity,Ot=Infinity,Zt=-Infinity,de=[],pe=[],ye=this.getChildren().filter(function($e){return $e.get("visible")&&(!$e.isGroup()||$e.isGroup()&&$e.getChildren().length>0)});ye.length>0?((0,nt.default)(ye,function($e){var je=$e.getCanvasBBox();de.push(je.minX,je.maxX),pe.push(je.minY,je.maxY)}),it=Math.min.apply(null,de),ot=Math.max.apply(null,de),Ot=Math.min.apply(null,pe),Zt=Math.max.apply(null,pe)):(it=0,ot=0,Ot=0,Zt=0);var Ge={x:it,y:Ot,minX:it,minY:Ot,maxX:ot,maxY:Zt,width:ot-it,height:Zt-Ot};return Ge},ft.prototype.getDefaultCfg=function(){var it=Et.prototype.getDefaultCfg.call(this);return it.children=[],it},ft.prototype.onAttrChange=function(it,ot,Ot){if(Et.prototype.onAttrChange.call(this,it,ot,Ot),it==="matrix"){var Zt=this.getTotalMatrix();this._applyChildrenMarix(Zt)}},ft.prototype.applyMatrix=function(it){var ot=this.getTotalMatrix();Et.prototype.applyMatrix.call(this,it);var Ot=this.getTotalMatrix();Ot!==ot&&this._applyChildrenMarix(Ot)},ft.prototype._applyChildrenMarix=function(it){var ot=this.getChildren();(0,nt.default)(ot,function(Ot){Ot.applyMatrix(it)})},ft.prototype.addShape=function(){for(var it=[],ot=0;ot<arguments.length;ot++)it[ot]=arguments[ot];var Ot=it[0],Zt=it[1];(0,pt.default)(Ot)?Zt=Ot:Zt.type=Ot;var de=he[Zt.type];de||(de=(0,J.default)(Zt.type),he[Zt.type]=de);var pe=this.getShapeBase(),ye=new pe[de](Zt);return this.add(ye),ye},ft.prototype.addGroup=function(){for(var it=[],ot=0;ot<arguments.length;ot++)it[ot]=arguments[ot];var Ot=it[0],Zt=it[1],de;if((0,jt.default)(Ot))Zt?de=new Ot(Zt):de=new Ot({parent:this});else{var pe=Ot||{},ye=this.getGroupBase();de=new ye(pe)}return this.add(de),de},ft.prototype.getCanvas=function(){var it;return this.isCanvas()?it=this:it=this.get("canvas"),it},ft.prototype.getShape=function(it,ot,Ot){if(!ue(this))return null;var Zt=this.getChildren(),de;if(this.isCanvas())de=this._findShape(Zt,it,ot,Ot);else{var pe=[it,ot,1];pe=this.invertFromMatrix(pe),this.isClipped(pe[0],pe[1])||(de=this._findShape(Zt,pe[0],pe[1],Ot))}return de},ft.prototype._findShape=function(it,ot,Ot,Zt){for(var de=null,pe=it.length-1;pe>=0;pe--){var ye=it[pe];if(ue(ye)&&(ye.isGroup()?de=ye.getShape(ot,Ot,Zt):ye.isHit(ot,Ot)&&(de=ye)),de)break}return de},ft.prototype.add=function(it){var ot=this.getCanvas(),Ot=this.getChildren(),Zt=this.get("timeline"),de=it.getParent();de&&xe(de,it,!1),it.set("parent",this),ot&&Ee(it,ot),Zt&&_e(it,Zt),Ot.push(it),we(it),this._applyElementMatrix(it)},ft.prototype._applyElementMatrix=function(it){var ot=this.getTotalMatrix();ot&&it.applyMatrix(ot)},ft.prototype.getChildren=function(){return this.get("children")},ft.prototype.sort=function(){var it=this.getChildren();(0,nt.default)(it,function(ot,Ot){return ot[ce]=Ot,ot}),it.sort(er(function(ot,Ot){return ot.get("zIndex")-Ot.get("zIndex")})),this.onCanvasChange("sort")},ft.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var it=this.getChildren(),ot=it.length-1;ot>=0;ot--)it[ot].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},ft.prototype.destroy=function(){this.get("destroyed")||(this.clear(),Et.prototype.destroy.call(this))},ft.prototype.getFirst=function(){return this.getChildByIndex(0)},ft.prototype.getLast=function(){var it=this.getChildren();return this.getChildByIndex(it.length-1)},ft.prototype.getChildByIndex=function(it){var ot=this.getChildren();return ot[it]},ft.prototype.getCount=function(){var it=this.getChildren();return it.length},ft.prototype.contain=function(it){var ot=this.getChildren();return ot.indexOf(it)>-1},ft.prototype.removeChild=function(it,ot){ot===void 0&&(ot=!0),this.contain(it)&&it.remove(ot)},ft.prototype.findAll=function(it){var ot=[],Ot=this.getChildren();return(0,nt.default)(Ot,function(Zt){it(Zt)&&ot.push(Zt),Zt.isGroup()&&(ot=ot.concat(Zt.findAll(it)))}),ot},ft.prototype.find=function(it){var ot=null,Ot=this.getChildren();return(0,nt.default)(Ot,function(Zt){if(it(Zt)?ot=Zt:Zt.isGroup()&&(ot=Zt.find(it)),ot)return!1}),ot},ft.prototype.findById=function(it){return this.find(function(ot){return ot.get("id")===it})},ft.prototype.findByClassName=function(it){return this.find(function(ot){return ot.get("className")===it})},ft.prototype.findAllByName=function(it){return this.findAll(function(ot){return ot.get("name")===it})},ft}($t),hr=Xe,Ar=d(7802),fr=d(99868),Sr=d(45257),yr=d(39751),Or=function(Et){return["fill","stroke","fillStyle","strokeStyle"].includes(Et)},lr=function(Et){return/^[r,R,L,l]{1}[\s]*\(/.test(Et)},Fr=[1,0,0,0,1,0,0,0,1];function Kr(Et,ft,it){var ot={},Ot=ft.fromAttrs,Zt=ft.toAttrs;if(!Et.destroyed){var de;for(var pe in Zt)if(!(0,L.isEqual)(Ot[pe],Zt[pe]))if(pe==="path"){var ye=Zt[pe],Ge=Ot[pe];ye.length>Ge.length?(ye=T(Zt[pe]),Ge=T(Ot[pe]),Ge=h(Ge,ye),Ge=Vt(Ge,ye),ft.fromAttrs.path=Ge,ft.toAttrs.path=ye):ft.pathFormatted||(ye=T(Zt[pe]),Ge=T(Ot[pe]),Ge=Vt(Ge,ye),ft.fromAttrs.path=Ge,ft.toAttrs.path=ye,ft.pathFormatted=!0),ot[pe]=[];for(var $e=0;$e<ye.length;$e++){for(var je=ye[$e],mr=Ge[$e],vr=[],He=0;He<je.length;He++)(0,L.isNumber)(je[He])&&mr&&(0,L.isNumber)(mr[He])?(de=(0,Sr.Z)(mr[He],je[He]),vr.push(de(it))):vr.push(je[He]);ot[pe].push(vr)}}else if(pe==="matrix"){var kr=(0,yr.Z)(Ot[pe]||Fr,Zt[pe]||Fr),ti=kr(it);ot[pe]=ti}else Or(pe)&&lr(Zt[pe])?ot[pe]=Zt[pe]:(0,L.isFunction)(Zt[pe])||(de=(0,Sr.Z)(Ot[pe],Zt[pe]),ot[pe]=de(it));Et.attr(ot)}}function Vr(Et,ft,it){var ot=ft.startTime,Ot=ft.delay;if(it<ot+Ot||ft._paused)return!1;var Zt,de=ft.duration,pe=ft.easing;if(it=it-ot-ft.delay,ft.repeat)Zt=it%de/de,Zt=fr[pe](Zt);else if(Zt=it/de,Zt<1)Zt=fr[pe](Zt);else return ft.onFrame?Et.attr(ft.onFrame(1)):Et.attr(ft.toAttrs),!0;if(ft.onFrame){var ye=ft.onFrame(Zt);Et.attr(ye)}else Kr(Et,ft,Zt);return!1}var Zr=function(){function Et(ft){this.animators=[],this.current=0,this.timer=null,this.canvas=ft}return Et.prototype.initTimer=function(){var ft=this,it=!1,ot,Ot,Zt;this.timer=Ar.HT(function(de){if(ft.current=de,ft.animators.length>0){for(var pe=ft.animators.length-1;pe>=0;pe--){if(ot=ft.animators[pe],ot.destroyed){ft.removeAnimator(pe);continue}if(!ot.isAnimatePaused()){Ot=ot.get("animations");for(var ye=Ot.length-1;ye>=0;ye--)Zt=Ot[ye],it=Vr(ot,Zt,de),it&&(Ot.splice(ye,1),it=!1,Zt.callback&&Zt.callback())}Ot.length===0&&ft.removeAnimator(pe)}var Ge=ft.canvas.get("autoDraw");Ge||ft.canvas.draw()}})},Et.prototype.addAnimator=function(ft){this.animators.push(ft)},Et.prototype.removeAnimator=function(ft){this.animators.splice(ft,1)},Et.prototype.isAnimating=function(){return!!this.animators.length},Et.prototype.stop=function(){this.timer&&this.timer.stop()},Et.prototype.stopAllAnimations=function(ft){ft===void 0&&(ft=!0),this.animators.forEach(function(it){it.stopAnimate(ft)}),this.animators=[],this.canvas.draw()},Et.prototype.getTime=function(){return this.current},Et}(),Ut=Zr,Kt=40,ie=0,me=":",Me=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Pe(Et,ft){for(var it in Et)if(Et.hasOwnProperty(it)&&it.indexOf(me+ft)>=0)return!0;return!1}function Je(Et,ft,it){it.name=ft,it.target=Et,it.currentTarget=Et,it.delegateTarget=Et,Et.emit(ft,it)}function sr(Et,ft,it){if(it.bubbles){var ot=void 0,Ot=!1;if(ft==="mouseenter"?(ot=it.fromShape,Ot=!0):ft==="mouseleave"&&(Ot=!0,ot=it.toShape),Et.isCanvas()&&Ot)return;if(ot&&Ht(Et,ot)){it.bubbles=!1;return}it.name=ft,it.currentTarget=Et,it.delegateTarget=Et,Et.emit(ft,it)}}var Dr=function(){function Et(ft){var it=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(ot){var Ot=ot.type;it._triggerEvent(Ot,ot)},this._onDocumentMove=function(ot){var Ot=it.canvas,Zt=Ot.get("el");if(Zt!==ot.target&&(it.dragging||it.currentShape)){var de=it._getPointInfo(ot);it.dragging&&it._emitEvent("drag",ot,de,it.draggingShape)}},this._onDocumentMouseUp=function(ot){var Ot=it.canvas,Zt=Ot.get("el");if(Zt!==ot.target&&it.dragging){var de=it._getPointInfo(ot);it.draggingShape&&it._emitEvent("drop",ot,de,null),it._emitEvent("dragend",ot,de,it.draggingShape),it._afterDrag(it.draggingShape,de,ot)}},this.canvas=ft.canvas}return Et.prototype.init=function(){this._bindEvents()},Et.prototype._bindEvents=function(){var ft=this,it=this.canvas.get("el");(0,nt.default)(Me,function(ot){it.addEventListener(ot,ft._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},Et.prototype._clearEvents=function(){var ft=this,it=this.canvas.get("el");(0,nt.default)(Me,function(ot){it.removeEventListener(ot,ft._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},Et.prototype._getEventObj=function(ft,it,ot,Ot,Zt,de){var pe=new zt(ft,it);return pe.fromShape=Zt,pe.toShape=de,pe.x=ot.x,pe.y=ot.y,pe.clientX=ot.clientX,pe.clientY=ot.clientY,pe.propagationPath.push(Ot),pe},Et.prototype._getShape=function(ft,it){return this.canvas.getShape(ft.x,ft.y,it)},Et.prototype._getPointInfo=function(ft){var it=this.canvas,ot=it.getClientByEvent(ft),Ot=it.getPointByEvent(ft);return{x:Ot.x,y:Ot.y,clientX:ot.x,clientY:ot.y}},Et.prototype._triggerEvent=function(ft,it){var ot=this._getPointInfo(it),Ot=this._getShape(ot,it),Zt=this["_on"+ft],de=!1;if(Zt)Zt.call(this,ot,Ot,it);else{var pe=this.currentShape;ft==="mouseenter"||ft==="dragenter"||ft==="mouseover"?(this._emitEvent(ft,it,ot,null,null,Ot),Ot&&this._emitEvent(ft,it,ot,Ot,null,Ot),ft==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",it,ot,null)):ft==="mouseleave"||ft==="dragleave"||ft==="mouseout"?(de=!0,pe&&this._emitEvent(ft,it,ot,pe,pe,null),this._emitEvent(ft,it,ot,null,pe,null),ft==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",it,ot,null)):this._emitEvent(ft,it,ot,Ot,null,null)}if(de||(this.currentShape=Ot),Ot&&!Ot.get("destroyed")){var ye=this.canvas,Ge=ye.get("el");Ge.style.cursor=Ot.attr("cursor")||ye.get("cursor")}},Et.prototype._onmousedown=function(ft,it,ot){ot.button===ie&&(this.mousedownShape=it,this.mousedownPoint=ft,this.mousedownTimeStamp=ot.timeStamp),this._emitEvent("mousedown",ot,ft,it,null,null)},Et.prototype._emitMouseoverEvents=function(ft,it,ot,Ot){var Zt=this.canvas.get("el");ot!==Ot&&(ot&&(this._emitEvent("mouseout",ft,it,ot,ot,Ot),this._emitEvent("mouseleave",ft,it,ot,ot,Ot),(!Ot||Ot.get("destroyed"))&&(Zt.style.cursor=this.canvas.get("cursor"))),Ot&&(this._emitEvent("mouseover",ft,it,Ot,ot,Ot),this._emitEvent("mouseenter",ft,it,Ot,ot,Ot)))},Et.prototype._emitDragoverEvents=function(ft,it,ot,Ot,Zt){Ot?(Ot!==ot&&(ot&&this._emitEvent("dragleave",ft,it,ot,ot,Ot),this._emitEvent("dragenter",ft,it,Ot,ot,Ot)),Zt||this._emitEvent("dragover",ft,it,Ot)):ot&&this._emitEvent("dragleave",ft,it,ot,ot,Ot),Zt&&this._emitEvent("dragover",ft,it,Ot)},Et.prototype._afterDrag=function(ft,it,ot){ft&&(ft.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Ot=this._getShape(it,ot);Ot!==ft&&this._emitMouseoverEvents(ot,it,ft,Ot),this.currentShape=Ot},Et.prototype._onmouseup=function(ft,it,ot){if(ot.button===ie){var Ot=this.draggingShape;this.dragging?(Ot&&this._emitEvent("drop",ot,ft,it),this._emitEvent("dragend",ot,ft,Ot),this._afterDrag(Ot,ft,ot)):(this._emitEvent("mouseup",ot,ft,it),it===this.mousedownShape&&this._emitEvent("click",ot,ft,it),this.mousedownShape=null,this.mousedownPoint=null)}},Et.prototype._ondragover=function(ft,it,ot){ot.preventDefault();var Ot=this.currentShape;this._emitDragoverEvents(ot,ft,Ot,it,!0)},Et.prototype._onmousemove=function(ft,it,ot){var Ot=this.canvas,Zt=this.currentShape,de=this.draggingShape;if(this.dragging)de&&this._emitDragoverEvents(ot,ft,Zt,it,!1),this._emitEvent("drag",ot,ft,de);else{var pe=this.mousedownPoint;if(pe){var ye=this.mousedownShape,Ge=ot.timeStamp,$e=Ge-this.mousedownTimeStamp,je=pe.clientX-ft.clientX,mr=pe.clientY-ft.clientY,vr=je*je+mr*mr;$e>120||vr>Kt?ye&&ye.get("draggable")?(de=this.mousedownShape,de.set("capture",!1),this.draggingShape=de,this.dragging=!0,this._emitEvent("dragstart",ot,ft,de),this.mousedownShape=null,this.mousedownPoint=null):!ye&&Ot.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",ot,ft,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(ot,ft,Zt,it),this._emitEvent("mousemove",ot,ft,it)):(this._emitMouseoverEvents(ot,ft,Zt,it),this._emitEvent("mousemove",ot,ft,it))}else this._emitMouseoverEvents(ot,ft,Zt,it),this._emitEvent("mousemove",ot,ft,it)}},Et.prototype._emitEvent=function(ft,it,ot,Ot,Zt,de){var pe=this._getEventObj(ft,it,ot,Ot,Zt,de);if(Ot){pe.shape=Ot,Je(Ot,ft,pe);for(var ye=Ot.getParent();ye;)ye.emitDelegation(ft,pe),pe.propagationStopped||sr(ye,ft,pe),pe.propagationPath.push(ye),ye=ye.getParent()}else{var Ge=this.canvas;Je(Ge,ft,pe)}},Et.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},Et}(),Re=Dr,Tr="px",vi=(0,Ve.detect)(),Mi=vi&&vi.name==="firefox",oi=function(Et){(0,Qt.__extends)(ft,Et);function ft(it){var ot=Et.call(this,it)||this;return ot.initContainer(),ot.initDom(),ot.initEvents(),ot.initTimeline(),ot}return ft.prototype.getDefaultCfg=function(){var it=Et.prototype.getDefaultCfg.call(this);return it.cursor="default",it.supportCSSTransform=!1,it},ft.prototype.initContainer=function(){var it=this.get("container");(0,Pt.default)(it)&&(it=document.getElementById(it),this.set("container",it))},ft.prototype.initDom=function(){var it=this.createDom();this.set("el",it);var ot=this.get("container");ot.appendChild(it),this.setDOMSize(this.get("width"),this.get("height"))},ft.prototype.initEvents=function(){var it=new Re({canvas:this});it.init(),this.set("eventController",it)},ft.prototype.initTimeline=function(){var it=new Ut(this);this.set("timeline",it)},ft.prototype.setDOMSize=function(it,ot){var Ot=this.get("el");Tt&&(Ot.style.width=it+Tr,Ot.style.height=ot+Tr)},ft.prototype.changeSize=function(it,ot){this.setDOMSize(it,ot),this.set("width",it),this.set("height",ot),this.onCanvasChange("changeSize")},ft.prototype.getRenderer=function(){return this.get("renderer")},ft.prototype.getCursor=function(){return this.get("cursor")},ft.prototype.setCursor=function(it){this.set("cursor",it);var ot=this.get("el");Tt&&ot&&(ot.style.cursor=it)},ft.prototype.getPointByEvent=function(it){var ot=this.get("supportCSSTransform");if(ot){if(Mi&&!(0,se.default)(it.layerX)&&it.layerX!==it.offsetX)return{x:it.layerX,y:it.layerY};if(!(0,se.default)(it.offsetX))return{x:it.offsetX,y:it.offsetY}}var Ot=this.getClientByEvent(it),Zt=Ot.x,de=Ot.y;return this.getPointByClient(Zt,de)},ft.prototype.getClientByEvent=function(it){var ot=it;return it.touches&&(it.type==="touchend"?ot=it.changedTouches[0]:ot=it.touches[0]),{x:ot.clientX,y:ot.clientY}},ft.prototype.getPointByClient=function(it,ot){var Ot=this.get("el"),Zt=Ot.getBoundingClientRect();return{x:it-Zt.left,y:ot-Zt.top}},ft.prototype.getClientByPoint=function(it,ot){var Ot=this.get("el"),Zt=Ot.getBoundingClientRect();return{x:it+Zt.left,y:ot+Zt.top}},ft.prototype.draw=function(){},ft.prototype.removeDom=function(){var it=this.get("el");it.parentNode.removeChild(it)},ft.prototype.clearEvents=function(){var it=this.get("eventController");it.destroy()},ft.prototype.isCanvas=function(){return!0},ft.prototype.getParent=function(){return null},ft.prototype.destroy=function(){var it=this.get("timeline");this.get("destroyed")||(this.clear(),it&&it.stop(),this.clearEvents(),this.removeDom(),Et.prototype.destroy.call(this))},ft}(hr),di=oi,Li=function(Et){(0,Qt.__extends)(ft,Et);function ft(){return Et!==null&&Et.apply(this,arguments)||this}return ft.prototype.isGroup=function(){return!0},ft.prototype.isEntityGroup=function(){return!1},ft.prototype.clone=function(){for(var it=Et.prototype.clone.call(this),ot=this.getChildren(),Ot=0;Ot<ot.length;Ot++){var Zt=ot[Ot];it.add(Zt.clone())}return it},ft}(hr),qi=Li,fn=function(Et){(0,Qt.__extends)(ft,Et);function ft(it){return Et.call(this,it)||this}return ft.prototype._isInBBox=function(it,ot){var Ot=this.getBBox();return Ot.minX<=it&&Ot.maxX>=it&&Ot.minY<=ot&&Ot.maxY>=ot},ft.prototype.afterAttrsChange=function(it){Et.prototype.afterAttrsChange.call(this,it),this.clearCacheBBox()},ft.prototype.getBBox=function(){var it=this.get("bbox");return it||(it=this.calculateBBox(),this.set("bbox",it)),it},ft.prototype.getCanvasBBox=function(){var it=this.get("canvasBox");return it||(it=this.calculateCanvasBBox(),this.set("canvasBox",it)),it},ft.prototype.applyMatrix=function(it){Et.prototype.applyMatrix.call(this,it),this.set("canvasBox",null)},ft.prototype.calculateCanvasBBox=function(){var it=this.getBBox(),ot=this.getTotalMatrix(),Ot=it.minX,Zt=it.minY,de=it.maxX,pe=it.maxY;if(ot){var ye=Er(ot,[it.minX,it.minY]),Ge=Er(ot,[it.maxX,it.minY]),$e=Er(ot,[it.minX,it.maxY]),je=Er(ot,[it.maxX,it.maxY]);Ot=Math.min(ye[0],Ge[0],$e[0],je[0]),de=Math.max(ye[0],Ge[0],$e[0],je[0]),Zt=Math.min(ye[1],Ge[1],$e[1],je[1]),pe=Math.max(ye[1],Ge[1],$e[1],je[1])}var mr=this.attrs;if(mr.shadowColor){var vr=mr.shadowBlur,He=vr===void 0?0:vr,kr=mr.shadowOffsetX,ti=kr===void 0?0:kr,dt=mr.shadowOffsetY,rt=dt===void 0?0:dt,j=Ot-He+ti,Z=de+He+ti,St=Zt-He+rt,Dt=pe+He+rt;Ot=Math.min(Ot,j),de=Math.max(de,Z),Zt=Math.min(Zt,St),pe=Math.max(pe,Dt)}return{x:Ot,y:Zt,minX:Ot,minY:Zt,maxX:de,maxY:pe,width:de-Ot,height:pe-Zt}},ft.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBox",null)},ft.prototype.isClipShape=function(){return this.get("isClipShape")},ft.prototype.isInShape=function(it,ot){return!1},ft.prototype.isOnlyHitBox=function(){return!1},ft.prototype.isHit=function(it,ot){var Ot=this.get("startArrowShape"),Zt=this.get("endArrowShape"),de=[it,ot,1];de=this.invertFromMatrix(de);var pe=de[0],ye=de[1],Ge=this._isInBBox(pe,ye);return this.isOnlyHitBox()?Ge:!!(Ge&&!this.isClipped(pe,ye)&&(this.isInShape(pe,ye)||Ot&&Ot.isHit(pe,ye)||Zt&&Zt.isHit(pe,ye)))},ft}($t),Ii=fn,pn=d(43479),Ln=pn.version},36102:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m){var L=m.attr(),I=L.x,P=L.y,_=L.r;return{x:I-_,y:P-_,width:_*2,height:_*2}}S.default=d},20545:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m){var L=m.attr(),I=L.x,P=L.y,_=L.rx,T=L.ry;return{x:I-_,y:P-T,width:_*2,height:T*2}}S.default=d},46479:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(76541);S.b=L.getMethod;var I=d(17349),P=d(36102),_=d(78803),T=d(53337),M=d(45861),A=d(61188),p=d(49794),w=d(20545);L.register("rect",I.default),L.register("image",I.default),L.register("circle",P.default),L.register("marker",P.default),L.register("polyline",_.default),L.register("polygon",T.default),L.register("text",M.default),L.register("path",A.default),L.register("line",p.default),L.register("ellipse",w.default)},49794:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(90923);function L(I){var P=I.attr(),_=P.x1,T=P.y1,M=P.x2,A=P.y2,p=Math.min(_,M),w=Math.max(_,M),y=Math.min(T,A),b=Math.max(T,A),x={minX:p,maxX:w,minY:y,maxY:b};return x=m.mergeArrowBBox(I,x),{x:x.minX,y:x.minY,width:x.maxX-x.minX,height:x.maxY-x.minY}}S.default=L},61188:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(63308),L=d(84104),I=d(93695),P=d(36021),_=d(47203),T=d(90923);function M(w,y){for(var b=[],x=[],E=[],k=0;k<w.length;k++){var D=w[k],N=D.currentPoint,z=D.params,W=D.prePoint,X=void 0;switch(D.command){case"Q":X=m.default.box(W[0],W[1],z[1],z[2],z[3],z[4]);break;case"C":X=L.default.box(W[0],W[1],z[1],z[2],z[3],z[4],z[5],z[6]);break;case"A":var U=D.arcParams;X=I.default.box(U.cx,U.cy,U.rx,U.ry,U.xRotation,U.startAngle,U.endAngle);break;default:b.push(N[0]),x.push(N[1]);break}X&&(D.box=X,b.push(X.x,X.x+X.width),x.push(X.y,X.y+X.height)),y&&(D.command==="L"||D.command==="M")&&D.prePoint&&D.nextPoint&&E.push(D)}b=b.filter(function(yt){return!Number.isNaN(yt)}),x=x.filter(function(yt){return!Number.isNaN(yt)});var et=Math.min.apply(null,b),Q=Math.min.apply(null,x),ct=Math.max.apply(null,b),Lt=Math.max.apply(null,x);if(E.length===0)return{x:et,y:Q,width:ct-et,height:Lt-Q};for(var k=0;k<E.length;k++){var D=E[k],N=D.currentPoint,_t=void 0;N[0]===et?(_t=A(D,y),et=et-_t.xExtra):N[0]===ct&&(_t=A(D,y),ct=ct+_t.xExtra),N[1]===Q?(_t=A(D,y),Q=Q-_t.yExtra):N[1]===Lt&&(_t=A(D,y),Lt=Lt+_t.yExtra)}return{x:et,y:Q,width:ct-et,height:Lt-Q}}function A(w,y){var b=w.prePoint,x=w.currentPoint,E=w.nextPoint,k=Math.pow(x[0]-b[0],2)+Math.pow(x[1]-b[1],2),D=Math.pow(x[0]-E[0],2)+Math.pow(x[1]-E[1],2),N=Math.pow(b[0]-E[0],2)+Math.pow(b[1]-E[1],2),z=Math.acos((k+D-N)/(2*Math.sqrt(k)*Math.sqrt(D)));if(!z||Math.sin(z)===0||_.default(z,0))return{xExtra:0,yExtra:0};var W=Math.abs(Math.atan2(E[1]-x[1],E[0]-x[0])),X=Math.abs(Math.atan2(E[0]-x[0],E[1]-x[1]));W=W>Math.PI/2?Math.PI-W:W,X=X>Math.PI/2?Math.PI-X:X;var U={xExtra:Math.cos(z/2-W)*(y/2*(1/Math.sin(z/2)))-y/2||0,yExtra:Math.cos(X-z/2)*(y/2*(1/Math.sin(z/2)))-y/2||0};return U}function p(w){var y=w.attr(),b=y.path,x=y.stroke,E=x?y.lineWidth:0,k=w.get("segments")||P.default(b),D=M(k,E),N=D.x,z=D.y,W=D.width,X=D.height,U={minX:N,minY:z,maxX:N+W,maxY:z+X};return U=T.mergeArrowBBox(w,U),{x:U.minX,y:U.minY,width:U.maxX-U.minX,height:U.maxY-U.minY}}S.default=p},53337:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(3195);function L(I){for(var P=I.attr(),_=P.points,T=[],M=[],A=0;A<_.length;A++){var p=_[A];T.push(p[0]),M.push(p[1])}return m.getBBoxByArray(T,M)}S.default=L},78803:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(3195),L=d(90923);function I(P){for(var _=P.attr(),T=_.points,M=[],A=[],p=0;p<T.length;p++){var w=T[p];M.push(w[0]),A.push(w[1])}var y=m.getBBoxByArray(M,A),b=y.x,x=y.y,E=y.width,k=y.height,D={minX:b,minY:x,maxX:b+E,maxY:x+k};return D=L.mergeArrowBBox(P,D),{x:D.minX,y:D.minY,width:D.maxX-D.minX,height:D.maxY-D.minY}}S.default=I},17349:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m){var L=m.attr(),I=L.x,P=L.y,_=L.width,T=L.height;return{x:I,y:P,width:_,height:T}}S.default=d},76541:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=new Map;function m(I,P){d.set(I,P)}S.register=m;function L(I){return d.get(I)}S.getMethod=L},45861:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(79343);function L(I){var P=I.attr(),_=P.x,T=P.y,M=P.text,A=P.fontSize,p=P.lineHeight,w=P.font;w||(w=m.assembleFont(P));var y=m.getTextWidth(M,w),b;if(!y)b={x:_,y:T,width:0,height:0};else{var x=P.textAlign,E=P.textBaseline,k=m.getTextHeight(M,A,p),D={x:_,y:T-k};x&&(x==="end"||x==="right"?D.x-=y:x==="center"&&(D.x-=y/2)),E&&(E==="top"?D.y+=k:E==="middle"&&(D.y+=k/2)),b={x:D.x,y:D.y,width:y,height:k}}return b}S.default=L},90923:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(L,I){return!L||!I?L||I:{minX:Math.min(L.minX,I.minX),minY:Math.min(L.minY,I.minY),maxX:Math.max(L.maxX,I.maxX),maxY:Math.max(L.maxY,I.maxY)}}S.mergeBBox=d;function m(L,I){var P=L.get("startArrowShape"),_=L.get("endArrowShape"),T=null,M=null;return P&&(T=P.getCanvasBBox(),I=d(I,T)),_&&(M=_.getCanvasBBox(),I=d(I,M)),I}S.mergeArrowBBox=m},58992:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(){function m(L,I){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=L,this.name=L,this.originalEvent=I,this.timeStamp=I.timeStamp}return m.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},m.prototype.stopPropagation=function(){this.propagationStopped=!0},m.prototype.toString=function(){var L=this.type;return"[Event (type="+L+")]"},m.prototype.save=function(){},m.prototype.restore=function(){},m}();S.default=d},39058:function(lt,S){"use strict";var d;d={value:!0}},51271:function(lt,S){"use strict";Object.defineProperty(S,"X",{value:!0})},27202:function(lt,S){"use strict";var d;d={value:!0};function m(P,_){var T=[],M=P[0],A=P[1],p=P[2],w=P[3],y=P[4],b=P[5],x=P[6],E=P[7],k=P[8],D=_[0],N=_[1],z=_[2],W=_[3],X=_[4],U=_[5],et=_[6],Q=_[7],ct=_[8];return T[0]=D*M+N*w+z*x,T[1]=D*A+N*y+z*E,T[2]=D*p+N*b+z*k,T[3]=W*M+X*w+U*x,T[4]=W*A+X*y+U*E,T[5]=W*p+X*b+U*k,T[6]=et*M+Q*w+ct*x,T[7]=et*A+Q*y+ct*E,T[8]=et*p+Q*b+ct*k,T}d=m;function L(P,_){var T=[],M=_[0],A=_[1];return T[0]=P[0]*M+P[3]*A+P[6],T[1]=P[1]*M+P[4]*A+P[7],T}S.rG=L;function I(P){var _=[],T=P[0],M=P[1],A=P[2],p=P[3],w=P[4],y=P[5],b=P[6],x=P[7],E=P[8],k=E*w-y*x,D=-E*p+y*b,N=x*p-w*b,z=T*k+M*D+A*N;return z?(z=1/z,_[0]=k*z,_[1]=(-E*M+A*x)*z,_[2]=(y*M-A*w)*z,_[3]=D*z,_[4]=(E*T-A*b)*z,_[5]=(-y*T+A*p)*z,_[6]=N*z,_[7]=(-x*T+M*b)*z,_[8]=(w*T-M*p)*z,_):null}S.U_=I},29423:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=null;function m(){if(!d){var L=document.createElement("canvas");L.width=1,L.height=1,d=L.getContext("2d")}return d}S.getOffScreenContext=m},79343:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(34668),L=d(29423);function I(M,A,p){var w=1;if(m.isString(M)&&(w=M.split(`
`).length),w>1){var y=P(A,p);return A*w+y*(w-1)}return A}S.getTextHeight=I;function P(M,A){return A?A-M:M*.14}S.getLineSpaceing=P;function _(M,A){var p=L.getOffScreenContext(),w=0;if(m.isNil(M)||M==="")return w;if(p.save(),p.font=A,m.isString(M)&&M.includes(`
`)){var y=M.split(`
`);m.each(y,function(b){var x=p.measureText(b).width;w<x&&(w=x)})}else w=p.measureText(M).width;return p.restore(),w}S.getTextWidth=_;function T(M){var A=M.fontSize,p=M.fontFamily,w=M.fontWeight,y=M.fontStyle,b=M.fontVariant;return[y,b,w,A+"px",p].join(" ").trim()}S.assembleFont=T},34668:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function m(b,x){var E=b.indexOf(x);E!==-1&&b.splice(E,1)}S.removeFromArray=m,S.isBrowser=typeof window!="undefined"&&typeof window.document!="undefined";var L=d(83438);S.isNil=L.default;var I=d(91110);S.isFunction=I.default;var P=d(55535);S.isString=P.default;var _=d(41367);S.isObject=_.default;var T=d(21429);S.isArray=T.default;var M=d(7165);S.mix=M.default;var A=d(91577);S.each=A.default;var p=d(18092);S.upperFirst=p.default;function w(b,x){if(b.isCanvas())return!0;for(var E=x.getParent(),k=!1;E;){if(E===b){k=!0;break}E=E.getParent()}return k}S.isParent=w;function y(b){return b.cfg.visible&&b.cfg.capture}S.isAllowCapture=y},43479:function(lt){"use strict";lt.exports=JSON.parse('{"name":"@antv/g-base","version":"0.4.7","description":"A common util collection for antv projects","main":"lib/index.js","module":"esm/index.js","types":"lib/index.d.ts","files":["package.json","esm","lib","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","clean":"rm -rf esm lib","watch:cjs":"tsc-watch -p tsconfig.json --target ES5 --module commonjs --outDir lib --compiler typescript/bin/tsc","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/util.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/util/issues"},"devDependencies":{"@antv/torch":"^1.0.0","gl-matrix":"^3.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","tsc-watch":"^4.0.0"},"homepage":"https://github.com/antvis/util#readme","dependencies":{"@antv/event-emitter":"^0.1.1","@antv/g-math":"^0.1.3","@antv/matrix-util":"^3.1.0-beta.1","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","@types/d3-timer":"^1.0.9","d3-ease":"^1.0.5","d3-interpolate":"^1.3.2","d3-timer":"^1.0.9","detect-browser":"^5.1.0"},"__npminstall_done":"Mon Jul 04 2022 00:47:14 GMT+0800 (\u4E2D\u56FD\u6807\u51C6\u65F6\u95F4)","gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a","_from":"@antv/g-base@0.4.7","_resolved":"https://registry.npmmirror.com/@antv/g-base/-/g-base-0.4.7.tgz"}')},25940:function(lt,S,d){"use strict";d.r(S),d.d(S,{AbstractCanvas:function(){return Re},AbstractGroup:function(){return vi},AbstractShape:function(){return oi},Base:function(){return Ct},Event:function(){return zt},PathUtil:function(){return m},assembleFont:function(){return ye},getBBoxMethod:function(){return qi},getOffScreenContext:function(){return Ot},getTextHeight:function(){return Zt},invert:function(){return Ht},isAllowCapture:function(){return pt},multiplyVec2:function(){return Tt},registerBBox:function(){return Li},registerEasing:function(){return Xe},version:function(){return ti}});var m={};d.r(m),d.d(m,{catmullRomToBezier:function(){return M},fillPath:function(){return wt},fillPathByDiff:function(){return h},formatPath:function(){return Vt},intersection:function(){return bt},parsePathArray:function(){return k},parsePathString:function(){return T},pathToAbsolute:function(){return p},pathToCurve:function(){return x},rectPath:function(){return U}});var L=d(26169),I=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,P=new RegExp("([a-z])["+I+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+I+"]*,?["+I+"]*)+)","ig"),_=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+I+"]*,?["+I+"]*","ig"),T=function(dt){if(!dt)return null;if((0,L.isArray)(dt))return dt;var rt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},j=[];return String(dt).replace(P,function(Z,St,Dt){var qt=[],ae=St.toLowerCase();if(Dt.replace(_,function(ne,Oe){Oe&&qt.push(+Oe)}),ae==="m"&&qt.length>2&&(j.push([St].concat(qt.splice(0,2))),ae="l",St=St==="m"?"l":"L"),ae==="o"&&qt.length===1&&j.push([St,qt[0]]),ae==="r")j.push([St].concat(qt));else for(;qt.length>=rt[ae]&&(j.push([St].concat(qt.splice(0,rt[ae]))),!!rt[ae]););return dt}),j},M=function(dt,rt){for(var j=[],Z=0,St=dt.length;St-2*!rt>Z;Z+=2){var Dt=[{x:+dt[Z-2],y:+dt[Z-1]},{x:+dt[Z],y:+dt[Z+1]},{x:+dt[Z+2],y:+dt[Z+3]},{x:+dt[Z+4],y:+dt[Z+5]}];rt?Z?St-4===Z?Dt[3]={x:+dt[0],y:+dt[1]}:St-2===Z&&(Dt[2]={x:+dt[0],y:+dt[1]},Dt[3]={x:+dt[2],y:+dt[3]}):Dt[0]={x:+dt[St-2],y:+dt[St-1]}:St-4===Z?Dt[3]=Dt[2]:Z||(Dt[0]={x:+dt[Z],y:+dt[Z+1]}),j.push(["C",(-Dt[0].x+6*Dt[1].x+Dt[2].x)/6,(-Dt[0].y+6*Dt[1].y+Dt[2].y)/6,(Dt[1].x+6*Dt[2].x-Dt[3].x)/6,(Dt[1].y+6*Dt[2].y-Dt[3].y)/6,Dt[2].x,Dt[2].y])}return j},A=function(dt,rt,j,Z,St){var Dt=[];if(St===null&&Z===null&&(Z=j),dt=+dt,rt=+rt,j=+j,Z=+Z,St!==null){var qt=Math.PI/180,ae=dt+j*Math.cos(-Z*qt),ne=dt+j*Math.cos(-St*qt),Oe=rt+j*Math.sin(-Z*qt),Ie=rt+j*Math.sin(-St*qt);Dt=[["M",ae,Oe],["A",j,j,0,+(St-Z>180),0,ne,Ie]]}else Dt=[["M",dt,rt],["m",0,-Z],["a",j,Z,0,1,1,0,2*Z],["a",j,Z,0,1,1,0,-2*Z],["z"]];return Dt},p=function(dt){if(dt=T(dt),!dt||!dt.length)return[["M",0,0]];var rt=[],j=0,Z=0,St=0,Dt=0,qt=0,ae,ne;dt[0][0]==="M"&&(j=+dt[0][1],Z=+dt[0][2],St=j,Dt=Z,qt++,rt[0]=["M",j,Z]);for(var Oe=dt.length===3&&dt[0][0]==="M"&&dt[1][0].toUpperCase()==="R"&&dt[2][0].toUpperCase()==="Z",Ie=void 0,De=void 0,or=qt,nr=dt.length;or<nr;or++){if(rt.push(Ie=[]),De=dt[or],ae=De[0],ae!==ae.toUpperCase())switch(Ie[0]=ae.toUpperCase(),Ie[0]){case"A":Ie[1]=De[1],Ie[2]=De[2],Ie[3]=De[3],Ie[4]=De[4],Ie[5]=De[5],Ie[6]=+De[6]+j,Ie[7]=+De[7]+Z;break;case"V":Ie[1]=+De[1]+Z;break;case"H":Ie[1]=+De[1]+j;break;case"R":ne=[j,Z].concat(De.slice(1));for(var ze=2,cr=ne.length;ze<cr;ze++)ne[ze]=+ne[ze]+j,ne[++ze]=+ne[ze]+Z;rt.pop(),rt=rt.concat(M(ne,Oe));break;case"O":rt.pop(),ne=A(j,Z,De[1],De[2]),ne.push(ne[0]),rt=rt.concat(ne);break;case"U":rt.pop(),rt=rt.concat(A(j,Z,De[1],De[2],De[3])),Ie=["U"].concat(rt[rt.length-1].slice(-2));break;case"M":St=+De[1]+j,Dt=+De[2]+Z;break;default:for(var ze=1,cr=De.length;ze<cr;ze++)Ie[ze]=+De[ze]+(ze%2?j:Z)}else if(ae==="R")ne=[j,Z].concat(De.slice(1)),rt.pop(),rt=rt.concat(M(ne,Oe)),Ie=["R"].concat(De.slice(-2));else if(ae==="O")rt.pop(),ne=A(j,Z,De[1],De[2]),ne.push(ne[0]),rt=rt.concat(ne);else if(ae==="U")rt.pop(),rt=rt.concat(A(j,Z,De[1],De[2],De[3])),Ie=["U"].concat(rt[rt.length-1].slice(-2));else for(var Rr=0,Jr=De.length;Rr<Jr;Rr++)Ie[Rr]=De[Rr];if(ae=ae.toUpperCase(),ae!=="O")switch(Ie[0]){case"Z":j=+St,Z=+Dt;break;case"H":j=Ie[1];break;case"V":Z=Ie[1];break;case"M":St=Ie[Ie.length-2],Dt=Ie[Ie.length-1];break;default:j=Ie[Ie.length-2],Z=Ie[Ie.length-1]}}return rt},w=function(dt,rt,j,Z){return[dt,rt,j,Z,j,Z]},y=function(dt,rt,j,Z,St,Dt){var qt=1/3,ae=2/3;return[qt*dt+ae*j,qt*rt+ae*Z,qt*St+ae*j,qt*Dt+ae*Z,St,Dt]},b=function(dt,rt,j,Z,St,Dt,qt,ae,ne,Oe){j===Z&&(j+=1);var Ie=Math.PI*120/180,De=Math.PI/180*(+St||0),or=[],nr,ze,cr,Rr,Jr,$r=function(Fi,no,cn){var Ri=Fi*Math.cos(cn)-no*Math.sin(cn),ao=Fi*Math.sin(cn)+no*Math.cos(cn);return{x:Ri,y:ao}};if(Oe)ze=Oe[0],cr=Oe[1],Rr=Oe[2],Jr=Oe[3];else{nr=$r(dt,rt,-De),dt=nr.x,rt=nr.y,nr=$r(ae,ne,-De),ae=nr.x,ne=nr.y,dt===ae&&rt===ne&&(ae+=1,ne+=1);var Pr=(dt-ae)/2,ur=(rt-ne)/2,ii=Pr*Pr/(j*j)+ur*ur/(Z*Z);ii>1&&(ii=Math.sqrt(ii),j=ii*j,Z=ii*Z);var Oi=j*j,Wi=Z*Z,an=(Dt===qt?-1:1)*Math.sqrt(Math.abs((Oi*Wi-Oi*ur*ur-Wi*Pr*Pr)/(Oi*ur*ur+Wi*Pr*Pr)));Rr=an*j*ur/Z+(dt+ae)/2,Jr=an*-Z*Pr/j+(rt+ne)/2,ze=Math.asin(((rt-Jr)/Z).toFixed(9)),cr=Math.asin(((ne-Jr)/Z).toFixed(9)),ze=dt<Rr?Math.PI-ze:ze,cr=ae<Rr?Math.PI-cr:cr,ze<0&&(ze=Math.PI*2+ze),cr<0&&(cr=Math.PI*2+cr),qt&&ze>cr&&(ze=ze-Math.PI*2),!qt&&cr>ze&&(cr=cr-Math.PI*2)}var oa=cr-ze;if(Math.abs(oa)>Ie){var Vn=cr,xn=ae,ha=ne;cr=ze+Ie*(qt&&cr>ze?1:-1),ae=Rr+j*Math.cos(cr),ne=Jr+Z*Math.sin(cr),or=b(ae,ne,j,Z,St,0,qt,xn,ha,[cr,Vn,Rr,Jr])}oa=cr-ze;var ea=Math.cos(ze),_a=Math.sin(ze),fa=Math.cos(cr),wo=Math.sin(cr),za=Math.tan(oa/4),So=4/3*j*za,Pa=4/3*Z*za,Xa=[dt,rt],Un=[dt+So*_a,rt-Pa*ea],bn=[ae+So*wo,ne-Pa*fa],ro=[ae,ne];if(Un[0]=2*Xa[0]-Un[0],Un[1]=2*Xa[1]-Un[1],Oe)return[Un,bn,ro].concat(or);or=[Un,bn,ro].concat(or).join().split(",");for(var io=[],Zn=0,Va=or.length;Zn<Va;Zn++)io[Zn]=Zn%2?$r(or[Zn-1],or[Zn],De).y:$r(or[Zn],or[Zn+1],De).x;return io},x=function(dt,rt){var j=p(dt),Z=rt&&p(rt),St={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Dt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},qt=[],ae=[],ne="",Oe="",Ie,De=function(Pr,ur,ii){var Oi,Wi;if(!Pr)return["C",ur.x,ur.y,ur.x,ur.y,ur.x,ur.y];switch(!(Pr[0]in{T:1,Q:1})&&(ur.qx=ur.qy=null),Pr[0]){case"M":ur.X=Pr[1],ur.Y=Pr[2];break;case"A":Pr=["C"].concat(b.apply(0,[ur.x,ur.y].concat(Pr.slice(1))));break;case"S":ii==="C"||ii==="S"?(Oi=ur.x*2-ur.bx,Wi=ur.y*2-ur.by):(Oi=ur.x,Wi=ur.y),Pr=["C",Oi,Wi].concat(Pr.slice(1));break;case"T":ii==="Q"||ii==="T"?(ur.qx=ur.x*2-ur.qx,ur.qy=ur.y*2-ur.qy):(ur.qx=ur.x,ur.qy=ur.y),Pr=["C"].concat(y(ur.x,ur.y,ur.qx,ur.qy,Pr[1],Pr[2]));break;case"Q":ur.qx=Pr[1],ur.qy=Pr[2],Pr=["C"].concat(y(ur.x,ur.y,Pr[1],Pr[2],Pr[3],Pr[4]));break;case"L":Pr=["C"].concat(w(ur.x,ur.y,Pr[1],Pr[2]));break;case"H":Pr=["C"].concat(w(ur.x,ur.y,Pr[1],ur.y));break;case"V":Pr=["C"].concat(w(ur.x,ur.y,ur.x,Pr[1]));break;case"Z":Pr=["C"].concat(w(ur.x,ur.y,ur.X,ur.Y));break;default:break}return Pr},or=function(Pr,ur){if(Pr[ur].length>7){Pr[ur].shift();for(var ii=Pr[ur];ii.length;)qt[ur]="A",Z&&(ae[ur]="A"),Pr.splice(ur++,0,["C"].concat(ii.splice(0,6)));Pr.splice(ur,1),Ie=Math.max(j.length,Z&&Z.length||0)}},nr=function(Pr,ur,ii,Oi,Wi){Pr&&ur&&Pr[Wi][0]==="M"&&ur[Wi][0]!=="M"&&(ur.splice(Wi,0,["M",Oi.x,Oi.y]),ii.bx=0,ii.by=0,ii.x=Pr[Wi][1],ii.y=Pr[Wi][2],Ie=Math.max(j.length,Z&&Z.length||0))};Ie=Math.max(j.length,Z&&Z.length||0);for(var ze=0;ze<Ie;ze++){j[ze]&&(ne=j[ze][0]),ne!=="C"&&(qt[ze]=ne,ze&&(Oe=qt[ze-1])),j[ze]=De(j[ze],St,Oe),qt[ze]!=="A"&&ne==="C"&&(qt[ze]="C"),or(j,ze),Z&&(Z[ze]&&(ne=Z[ze][0]),ne!=="C"&&(ae[ze]=ne,ze&&(Oe=ae[ze-1])),Z[ze]=De(Z[ze],Dt,Oe),ae[ze]!=="A"&&ne==="C"&&(ae[ze]="C"),or(Z,ze)),nr(j,Z,St,Dt,ze),nr(Z,j,Dt,St,ze);var cr=j[ze],Rr=Z&&Z[ze],Jr=cr.length,$r=Z&&Rr.length;St.x=cr[Jr-2],St.y=cr[Jr-1],St.bx=parseFloat(cr[Jr-4])||St.x,St.by=parseFloat(cr[Jr-3])||St.y,Dt.bx=Z&&(parseFloat(Rr[$r-4])||Dt.x),Dt.by=Z&&(parseFloat(Rr[$r-3])||Dt.y),Dt.x=Z&&Rr[$r-2],Dt.y=Z&&Rr[$r-1]}return Z?[j,Z]:j},E=/,?([a-z]),?/gi,k=function(dt){return dt.join(",").replace(E,"$1")},D=function(dt,rt,j,Z,St){var Dt=-3*rt+9*j-9*Z+3*St,qt=dt*Dt+6*rt-12*j+6*Z;return dt*qt-3*rt+3*j},N=function(dt,rt,j,Z,St,Dt,qt,ae,ne){ne===null&&(ne=1),ne=ne>1?1:ne<0?0:ne;for(var Oe=ne/2,Ie=12,De=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],or=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],nr=0,ze=0;ze<Ie;ze++){var cr=Oe*De[ze]+Oe,Rr=D(cr,dt,j,St,qt),Jr=D(cr,rt,Z,Dt,ae),$r=Rr*Rr+Jr*Jr;nr+=or[ze]*Math.sqrt($r)}return Oe*nr},z=function(dt,rt,j,Z,St,Dt,qt,ae){for(var ne=[],Oe=[[],[]],Ie,De,or,nr,ze=0;ze<2;++ze){if(ze===0?(De=6*dt-12*j+6*St,Ie=-3*dt+9*j-9*St+3*qt,or=3*j-3*dt):(De=6*rt-12*Z+6*Dt,Ie=-3*rt+9*Z-9*Dt+3*ae,or=3*Z-3*rt),Math.abs(Ie)<1e-12){if(Math.abs(De)<1e-12)continue;nr=-or/De,nr>0&&nr<1&&ne.push(nr);continue}var cr=De*De-4*or*Ie,Rr=Math.sqrt(cr);if(!(cr<0)){var Jr=(-De+Rr)/(2*Ie);Jr>0&&Jr<1&&ne.push(Jr);var $r=(-De-Rr)/(2*Ie);$r>0&&$r<1&&ne.push($r)}}for(var Pr=ne.length,ur=Pr,ii;Pr--;)nr=ne[Pr],ii=1-nr,Oe[0][Pr]=ii*ii*ii*dt+3*ii*ii*nr*j+3*ii*nr*nr*St+nr*nr*nr*qt,Oe[1][Pr]=ii*ii*ii*rt+3*ii*ii*nr*Z+3*ii*nr*nr*Dt+nr*nr*nr*ae;return Oe[0][ur]=dt,Oe[1][ur]=rt,Oe[0][ur+1]=qt,Oe[1][ur+1]=ae,Oe[0].length=Oe[1].length=ur+2,{min:{x:Math.min.apply(0,Oe[0]),y:Math.min.apply(0,Oe[1])},max:{x:Math.max.apply(0,Oe[0]),y:Math.max.apply(0,Oe[1])}}},W=function(dt,rt,j,Z,St,Dt,qt,ae){if(!(Math.max(dt,j)<Math.min(St,qt)||Math.min(dt,j)>Math.max(St,qt)||Math.max(rt,Z)<Math.min(Dt,ae)||Math.min(rt,Z)>Math.max(Dt,ae))){var ne=(dt*Z-rt*j)*(St-qt)-(dt-j)*(St*ae-Dt*qt),Oe=(dt*Z-rt*j)*(Dt-ae)-(rt-Z)*(St*ae-Dt*qt),Ie=(dt-j)*(Dt-ae)-(rt-Z)*(St-qt);if(!!Ie){var De=ne/Ie,or=Oe/Ie,nr=+De.toFixed(2),ze=+or.toFixed(2);if(!(nr<+Math.min(dt,j).toFixed(2)||nr>+Math.max(dt,j).toFixed(2)||nr<+Math.min(St,qt).toFixed(2)||nr>+Math.max(St,qt).toFixed(2)||ze<+Math.min(rt,Z).toFixed(2)||ze>+Math.max(rt,Z).toFixed(2)||ze<+Math.min(Dt,ae).toFixed(2)||ze>+Math.max(Dt,ae).toFixed(2)))return{x:De,y:or}}}},X=function(dt,rt,j){return rt>=dt.x&&rt<=dt.x+dt.width&&j>=dt.y&&j<=dt.y+dt.height},U=function(dt,rt,j,Z,St){if(St)return[["M",+dt+ +St,rt],["l",j-St*2,0],["a",St,St,0,0,1,St,St],["l",0,Z-St*2],["a",St,St,0,0,1,-St,St],["l",St*2-j,0],["a",St,St,0,0,1,-St,-St],["l",0,St*2-Z],["a",St,St,0,0,1,St,-St],["z"]];var Dt=[["M",dt,rt],["l",j,0],["l",0,Z],["l",-j,0],["z"]];return Dt.parsePathArray=k,Dt},et=function(dt,rt,j,Z){return dt===null&&(dt=rt=j=Z=0),rt===null&&(rt=dt.y,j=dt.width,Z=dt.height,dt=dt.x),{x:dt,y:rt,width:j,w:j,height:Z,h:Z,x2:dt+j,y2:rt+Z,cx:dt+j/2,cy:rt+Z/2,r1:Math.min(j,Z)/2,r2:Math.max(j,Z)/2,r0:Math.sqrt(j*j+Z*Z)/2,path:U(dt,rt,j,Z),vb:[dt,rt,j,Z].join(" ")}},Q=function(dt,rt){return dt=et(dt),rt=et(rt),X(rt,dt.x,dt.y)||X(rt,dt.x2,dt.y)||X(rt,dt.x,dt.y2)||X(rt,dt.x2,dt.y2)||X(dt,rt.x,rt.y)||X(dt,rt.x2,rt.y)||X(dt,rt.x,rt.y2)||X(dt,rt.x2,rt.y2)||(dt.x<rt.x2&&dt.x>rt.x||rt.x<dt.x2&&rt.x>dt.x)&&(dt.y<rt.y2&&dt.y>rt.y||rt.y<dt.y2&&rt.y>dt.y)},ct=function(dt,rt,j,Z,St,Dt,qt,ae){(0,L.isArray)(dt)||(dt=[dt,rt,j,Z,St,Dt,qt,ae]);var ne=z.apply(null,dt);return et(ne.min.x,ne.min.y,ne.max.x-ne.min.x,ne.max.y-ne.min.y)},Lt=function(dt,rt,j,Z,St,Dt,qt,ae,ne){var Oe=1-ne,Ie=Math.pow(Oe,3),De=Math.pow(Oe,2),or=ne*ne,nr=or*ne,ze=Ie*dt+De*3*ne*j+Oe*3*ne*ne*St+nr*qt,cr=Ie*rt+De*3*ne*Z+Oe*3*ne*ne*Dt+nr*ae,Rr=dt+2*ne*(j-dt)+or*(St-2*j+dt),Jr=rt+2*ne*(Z-rt)+or*(Dt-2*Z+rt),$r=j+2*ne*(St-j)+or*(qt-2*St+j),Pr=Z+2*ne*(Dt-Z)+or*(ae-2*Dt+Z),ur=Oe*dt+ne*j,ii=Oe*rt+ne*Z,Oi=Oe*St+ne*qt,Wi=Oe*Dt+ne*ae,an=90-Math.atan2(Rr-$r,Jr-Pr)*180/Math.PI;return{x:ze,y:cr,m:{x:Rr,y:Jr},n:{x:$r,y:Pr},start:{x:ur,y:ii},end:{x:Oi,y:Wi},alpha:an}},_t=function(dt,rt,j){var Z=ct(dt),St=ct(rt);if(!Q(Z,St))return j?0:[];for(var Dt=N.apply(0,dt),qt=N.apply(0,rt),ae=~~(Dt/8),ne=~~(qt/8),Oe=[],Ie=[],De={},or=j?0:[],nr=0;nr<ae+1;nr++){var ze=Lt.apply(0,dt.concat(nr/ae));Oe.push({x:ze.x,y:ze.y,t:nr/ae})}for(var nr=0;nr<ne+1;nr++){var ze=Lt.apply(0,rt.concat(nr/ne));Ie.push({x:ze.x,y:ze.y,t:nr/ne})}for(var nr=0;nr<ae;nr++)for(var cr=0;cr<ne;cr++){var Rr=Oe[nr],Jr=Oe[nr+1],$r=Ie[cr],Pr=Ie[cr+1],ur=Math.abs(Jr.x-Rr.x)<.001?"y":"x",ii=Math.abs(Pr.x-$r.x)<.001?"y":"x",Oi=W(Rr.x,Rr.y,Jr.x,Jr.y,$r.x,$r.y,Pr.x,Pr.y);if(Oi){if(De[Oi.x.toFixed(4)]===Oi.y.toFixed(4))continue;De[Oi.x.toFixed(4)]=Oi.y.toFixed(4);var Wi=Rr.t+Math.abs((Oi[ur]-Rr[ur])/(Jr[ur]-Rr[ur]))*(Jr.t-Rr.t),an=$r.t+Math.abs((Oi[ii]-$r[ii])/(Pr[ii]-$r[ii]))*(Pr.t-$r.t);Wi>=0&&Wi<=1&&an>=0&&an<=1&&(j?or+=1:or.push({x:Oi.x,y:Oi.y,t1:Wi,t2:an}))}}return or},yt=function(dt,rt,j){dt=x(dt),rt=x(rt);for(var Z,St,Dt,qt,ae,ne,Oe,Ie,De,or,nr=j?0:[],ze=0,cr=dt.length;ze<cr;ze++){var Rr=dt[ze];if(Rr[0]==="M")Z=ae=Rr[1],St=ne=Rr[2];else{Rr[0]==="C"?(De=[Z,St].concat(Rr.slice(1)),Z=De[6],St=De[7]):(De=[Z,St,Z,St,ae,ne,ae,ne],Z=ae,St=ne);for(var Jr=0,$r=rt.length;Jr<$r;Jr++){var Pr=rt[Jr];if(Pr[0]==="M")Dt=Oe=Pr[1],qt=Ie=Pr[2];else{Pr[0]==="C"?(or=[Dt,qt].concat(Pr.slice(1)),Dt=or[6],qt=or[7]):(or=[Dt,qt,Dt,qt,Oe,Ie,Oe,Ie],Dt=Oe,qt=Ie);var ur=_t(De,or,j);if(j)nr+=ur;else{for(var ii=0,Oi=ur.length;ii<Oi;ii++)ur[ii].segment1=ze,ur[ii].segment2=Jr,ur[ii].bez1=De,ur[ii].bez2=or;nr=nr.concat(ur)}}}}}return nr},bt=function(dt,rt){return yt(dt,rt)};function Mt(dt,rt){var j=[],Z=[];function St(Dt,qt){if(Dt.length===1)j.push(Dt[0]),Z.push(Dt[0]);else{for(var ae=[],ne=0;ne<Dt.length-1;ne++)ne===0&&j.push(Dt[0]),ne===Dt.length-2&&Z.push(Dt[ne+1]),ae[ne]=[(1-qt)*Dt[ne][0]+qt*Dt[ne+1][0],(1-qt)*Dt[ne][1]+qt*Dt[ne+1][1]];St(ae,qt)}}return dt.length&&St(dt,rt),{left:j,right:Z.reverse()}}function xt(dt,rt,j){var Z=[[dt[1],dt[2]]];j=j||2;var St=[];rt[0]==="A"?(Z.push(rt[6]),Z.push(rt[7])):rt[0]==="C"?(Z.push([rt[1],rt[2]]),Z.push([rt[3],rt[4]]),Z.push([rt[5],rt[6]])):rt[0]==="S"||rt[0]==="Q"?(Z.push([rt[1],rt[2]]),Z.push([rt[3],rt[4]])):Z.push([rt[1],rt[2]]);for(var Dt=Z,qt=1/j,ae=0;ae<j-1;ae++){var ne=qt/(1-qt*ae),Oe=Mt(Dt,ne);St.push(Oe.left),Dt=Oe.right}St.push(Dt);var Ie=St.map(function(De){var or=[];return De.length===4&&(or.push("C"),or=or.concat(De[2])),De.length>=3&&(De.length===3&&or.push("Q"),or=or.concat(De[1])),De.length===2&&or.push("L"),or=or.concat(De[De.length-1]),or});return Ie}var Bt=function(dt,rt,j){if(j===1)return[[].concat(dt)];var Z=[];if(rt[0]==="L"||rt[0]==="C"||rt[0]==="Q")Z=Z.concat(xt(dt,rt,j));else{var St=[].concat(dt);St[0]==="M"&&(St[0]="L");for(var Dt=0;Dt<=j-1;Dt++)Z.push(St)}return Z},wt=function(dt,rt){if(dt.length===1)return dt;var j=dt.length-1,Z=rt.length-1,St=j/Z,Dt=[];if(dt.length===1&&dt[0][0]==="M"){for(var qt=0;qt<Z-j;qt++)dt.push(dt[0]);return dt}for(var qt=0;qt<Z;qt++){var ae=Math.floor(St*qt);Dt[ae]=(Dt[ae]||0)+1}var ne=Dt.reduce(function(Oe,Ie,De){return De===j?Oe.concat(dt[j]):Oe.concat(Bt(dt[De],dt[De+1],Ie))},[]);return ne.unshift(dt[0]),(rt[Z]==="Z"||rt[Z]==="z")&&ne.push("Z"),ne},H=function(dt,rt){if(dt.length!==rt.length)return!1;var j=!0;return(0,L.each)(dt,function(Z,St){if(Z!==rt[St])return j=!1,!1}),j};function K(dt,rt,j){var Z=null,St=j;return rt<St&&(St=rt,Z="add"),dt<St&&(St=dt,Z="del"),{type:Z,min:St}}var B=function(dt,rt){var j=dt.length,Z=rt.length,St,Dt,qt=0;if(j===0||Z===0)return null;for(var ae=[],ne=0;ne<=j;ne++)ae[ne]=[],ae[ne][0]={min:ne};for(var Oe=0;Oe<=Z;Oe++)ae[0][Oe]={min:Oe};for(var ne=1;ne<=j;ne++){St=dt[ne-1];for(var Oe=1;Oe<=Z;Oe++){Dt=rt[Oe-1],H(St,Dt)?qt=0:qt=1;var Ie=ae[ne-1][Oe].min+1,De=ae[ne][Oe-1].min+1,or=ae[ne-1][Oe-1].min+qt;ae[ne][Oe]=K(Ie,De,or)}}return ae},h=function(dt,rt){var j=B(dt,rt),Z=dt.length,St=rt.length,Dt=[],qt=1,ae=1;if(j[Z][St].min!==Z){for(var ne=1;ne<=Z;ne++){var Oe=j[ne][ne].min;ae=ne;for(var Ie=qt;Ie<=St;Ie++)j[ne][Ie].min<Oe&&(Oe=j[ne][Ie].min,ae=Ie);qt=ae,j[ne][qt].type&&Dt.push({index:ne-1,type:j[ne][qt].type})}for(var ne=Dt.length-1;ne>=0;ne--)qt=Dt[ne].index,Dt[ne].type==="add"?dt.splice(qt,0,[].concat(dt[qt])):dt.splice(qt,1)}Z=dt.length;var De=St-Z;if(Z<St)for(var ne=0;ne<De;ne++)dt[Z-1][0]==="z"||dt[Z-1][0]==="Z"?dt.splice(Z-2,0,dt[Z-2]):dt.push(dt[Z-1]),Z+=1;return dt};function mt(dt,rt,j){for(var Z=[].concat(dt),St,Dt=1/(j+1),qt=gt(rt)[0],ae=1;ae<=j;ae++)Dt*=ae,St=Math.floor(dt.length*Dt),St===0?Z.unshift([qt[0]*Dt+dt[St][0]*(1-Dt),qt[1]*Dt+dt[St][1]*(1-Dt)]):Z.splice(St,0,[qt[0]*Dt+dt[St][0]*(1-Dt),qt[1]*Dt+dt[St][1]*(1-Dt)]);return Z}function gt(dt){var rt=[];switch(dt[0]){case"M":rt.push([dt[1],dt[2]]);break;case"L":rt.push([dt[1],dt[2]]);break;case"A":rt.push([dt[6],dt[7]]);break;case"Q":rt.push([dt[3],dt[4]]),rt.push([dt[1],dt[2]]);break;case"T":rt.push([dt[1],dt[2]]);break;case"C":rt.push([dt[5],dt[6]]),rt.push([dt[1],dt[2]]),rt.push([dt[3],dt[4]]);break;case"S":rt.push([dt[3],dt[4]]),rt.push([dt[1],dt[2]]);break;case"H":rt.push([dt[1],dt[1]]);break;case"V":rt.push([dt[1],dt[1]]);break;default:}return rt}var Vt=function(dt,rt){if(dt.length<=1)return dt;for(var j,Z=0;Z<rt.length;Z++)if(dt[Z][0]!==rt[Z][0])switch(j=gt(dt[Z]),rt[Z][0]){case"M":dt[Z]=["M"].concat(j[0]);break;case"L":dt[Z]=["L"].concat(j[0]);break;case"A":dt[Z]=[].concat(rt[Z]),dt[Z][6]=j[0][0],dt[Z][7]=j[0][1];break;case"Q":if(j.length<2)if(Z>0)j=mt(j,dt[Z-1],1);else{dt[Z]=rt[Z];break}dt[Z]=["Q"].concat(j.reduce(function(St,Dt){return St.concat(Dt)},[]));break;case"T":dt[Z]=["T"].concat(j[0]);break;case"C":if(j.length<3)if(Z>0)j=mt(j,dt[Z-1],2);else{dt[Z]=rt[Z];break}dt[Z]=["C"].concat(j.reduce(function(St,Dt){return St.concat(Dt)},[]));break;case"S":if(j.length<2)if(Z>0)j=mt(j,dt[Z-1],1);else{dt[Z]=rt[Z];break}dt[Z]=["S"].concat(j.reduce(function(St,Dt){return St.concat(Dt)},[]));break;default:dt[Z]=rt[Z]}return dt},Jt=function(){function dt(rt,j){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=rt,this.name=rt,this.originalEvent=j,this.timeStamp=j.timeStamp}return dt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},dt.prototype.stopPropagation=function(){this.propagationStopped=!0},dt.prototype.toString=function(){var rt=this.type;return"[Event (type="+rt+")]"},dt.prototype.save=function(){},dt.prototype.restore=function(){},dt}(),zt=Jt,Qt=d(44614),oe=d(49336);function se(dt,rt){var j=dt.indexOf(rt);j!==-1&&dt.splice(j,1)}var jt=typeof window!="undefined"&&typeof window.document!="undefined";function Pt(dt,rt){if(dt.isCanvas())return!0;for(var j=rt.getParent(),Z=!1;j;){if(j===dt){Z=!0;break}j=j.getParent()}return Z}function pt(dt){return dt.cfg.visible&&dt.cfg.capture}var st=function(dt){(0,Qt.__extends)(rt,dt);function rt(j){var Z=dt.call(this)||this;Z.destroyed=!1;var St=Z.getDefaultCfg();return Z.cfg=(0,L.mix)(St,j),Z}return rt.prototype.getDefaultCfg=function(){return{}},rt.prototype.get=function(j){return this.cfg[j]},rt.prototype.set=function(j,Z){this.cfg[j]=Z},rt.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},rt}(oe.default),Ct=st,nt=d(93229),J=d(50669);function vt(dt,rt){var j=[],Z=dt[0],St=dt[1],Dt=dt[2],qt=dt[3],ae=dt[4],ne=dt[5],Oe=dt[6],Ie=dt[7],De=dt[8],or=rt[0],nr=rt[1],ze=rt[2],cr=rt[3],Rr=rt[4],Jr=rt[5],$r=rt[6],Pr=rt[7],ur=rt[8];return j[0]=or*Z+nr*qt+ze*Oe,j[1]=or*St+nr*ae+ze*Ie,j[2]=or*Dt+nr*ne+ze*De,j[3]=cr*Z+Rr*qt+Jr*Oe,j[4]=cr*St+Rr*ae+Jr*Ie,j[5]=cr*Dt+Rr*ne+Jr*De,j[6]=$r*Z+Pr*qt+ur*Oe,j[7]=$r*St+Pr*ae+ur*Ie,j[8]=$r*Dt+Pr*ne+ur*De,j}function Tt(dt,rt){var j=[],Z=rt[0],St=rt[1];return j[0]=dt[0]*Z+dt[3]*St+dt[6],j[1]=dt[1]*Z+dt[4]*St+dt[7],j}function Ht(dt){var rt=[],j=dt[0],Z=dt[1],St=dt[2],Dt=dt[3],qt=dt[4],ae=dt[5],ne=dt[6],Oe=dt[7],Ie=dt[8],De=Ie*qt-ae*Oe,or=-Ie*Dt+ae*ne,nr=Oe*Dt-qt*ne,ze=j*De+Z*or+St*nr;return ze?(ze=1/ze,rt[0]=De*ze,rt[1]=(-Ie*Z+St*Oe)*ze,rt[2]=(ae*Z-St*qt)*ze,rt[3]=or*ze,rt[4]=(Ie*j-St*ne)*ze,rt[5]=(-ae*j+St*Dt)*ze,rt[6]=nr*ze,rt[7]=(-Oe*j+Z*ne)*ze,rt[8]=(qt*j-Z*Dt)*ze,rt):null}var ue=J.transform,Ce="matrix",Fe=["zIndex","capture","visible","type"],Ve=["repeat"],dr=":",xr="*";function Er(dt){for(var rt=[],j=0;j<dt.length;j++)(0,L.isArray)(dt[j])?rt.push([].concat(dt[j])):rt.push(dt[j]);return rt}function Yr(dt,rt){var j={},Z=rt.attrs;for(var St in dt)j[St]=Z[St];return j}function gr(dt,rt){var j={},Z=rt.attr();return(0,L.each)(dt,function(St,Dt){Ve.indexOf(Dt)===-1&&!(0,L.isEqual)(Z[Dt],St)&&(j[Dt]=St)}),j}function ri(dt,rt){if(rt.onFrame)return dt;var j=rt.startTime,Z=rt.delay,St=rt.duration,Dt=Object.prototype.hasOwnProperty;return(0,L.each)(dt,function(qt){j+Z<qt.startTime+qt.delay+qt.duration&&St>qt.delay&&(0,L.each)(rt.toAttrs,function(ae,ne){Dt.call(qt.toAttrs,ne)&&(delete qt.toAttrs[ne],delete qt.fromAttrs[ne])})}),dt}var bi=function(dt){(0,Qt.__extends)(rt,dt);function rt(j){var Z=dt.call(this,j)||this;Z.attrs={};var St=Z.getDefaultAttrs();return(0,L.mix)(St,j.attrs),Z.attrs=St,Z.initAttrs(St),Z.initAnimate(),Z}return rt.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},rt.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},rt.prototype.onCanvasChange=function(j){},rt.prototype.initAttrs=function(j){},rt.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},rt.prototype.isGroup=function(){return!1},rt.prototype.getParent=function(){return this.get("parent")},rt.prototype.getCanvas=function(){return this.get("canvas")},rt.prototype.attr=function(){for(var j,Z=[],St=0;St<arguments.length;St++)Z[St]=arguments[St];var Dt=Z[0],qt=Z[1];if(!Dt)return this.attrs;if((0,L.isObject)(Dt)){for(var ae in Dt)this.setAttr(ae,Dt[ae]);return this.afterAttrsChange(Dt),this}return Z.length===2?(this.setAttr(Dt,qt),this.afterAttrsChange((j={},j[Dt]=qt,j)),this):this.attrs[Dt]},rt.prototype.isClipped=function(j,Z){var St=this.getClip();return St&&!St.isHit(j,Z)},rt.prototype.setAttr=function(j,Z){var St=this.attrs[j];St!==Z&&(this.attrs[j]=Z,this.onAttrChange(j,Z,St))},rt.prototype.onAttrChange=function(j,Z,St){j==="matrix"&&this.set("totalMatrix",null)},rt.prototype.afterAttrsChange=function(j){if(this.cfg.isClipShape){var Z=this.cfg.applyTo;Z&&Z.onCanvasChange("clip")}else this.onCanvasChange("attr")},rt.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},rt.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},rt.prototype.setZIndex=function(j){this.set("zIndex",j);var Z=this.getParent();return Z&&Z.sort(),this},rt.prototype.toFront=function(){var j=this.getParent();if(!!j){var Z=j.getChildren(),St=this.get("el"),Dt=Z.indexOf(this);Z.splice(Dt,1),Z.push(this),this.onCanvasChange("zIndex")}},rt.prototype.toBack=function(){var j=this.getParent();if(!!j){var Z=j.getChildren(),St=this.get("el"),Dt=Z.indexOf(this);Z.splice(Dt,1),Z.unshift(this),this.onCanvasChange("zIndex")}},rt.prototype.remove=function(j){j===void 0&&(j=!0);var Z=this.getParent();Z?(se(Z.getChildren(),this),Z.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),j&&this.destroy()},rt.prototype.resetMatrix=function(){this.attr(Ce,this.getDefaultMatrix()),this.onCanvasChange("matrix")},rt.prototype.getMatrix=function(){return this.attr(Ce)},rt.prototype.setMatrix=function(j){this.attr(Ce,j),this.onCanvasChange("matrix")},rt.prototype.getTotalMatrix=function(){var j=this.cfg.totalMatrix;if(!j){var Z=this.attr("matrix"),St=this.cfg.parentMatrix;St&&Z?j=vt(St,Z):j=Z||St,this.set("totalMatrix",j)}return j},rt.prototype.applyMatrix=function(j){var Z=this.attr("matrix"),St=null;j&&Z?St=vt(j,Z):St=Z||j,this.set("totalMatrix",St),this.set("parentMatrix",j)},rt.prototype.getDefaultMatrix=function(){return null},rt.prototype.applyToMatrix=function(j){var Z=this.attr("matrix");return Z?Tt(Z,j):j},rt.prototype.invertFromMatrix=function(j){var Z=this.attr("matrix");if(Z){var St=Ht(Z);if(St)return Tt(St,j)}return j},rt.prototype.setClip=function(j){var Z=this.getCanvas(),St=null;if(j){var Dt=this.getShapeBase(),qt=(0,L.upperFirst)(j.type),ae=Dt[qt];ae&&(St=new ae({type:j.type,isClipShape:!0,applyTo:this,attrs:j.attrs,canvas:Z}))}return this.set("clipShape",St),this.onCanvasChange("clip"),St},rt.prototype.getClip=function(){var j=this.cfg.clipShape;return j||null},rt.prototype.clone=function(){var j=this,Z=this.attrs,St={};(0,L.each)(Z,function(ae,ne){(0,L.isArray)(Z[ne])?St[ne]=Er(Z[ne]):St[ne]=Z[ne]});var Dt=this.constructor,qt=new Dt({attrs:St});return(0,L.each)(Fe,function(ae){qt.set(ae,j.get(ae))}),qt},rt.prototype.destroy=function(){var j=this.destroyed;j||(this.attrs={},dt.prototype.destroy.call(this))},rt.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},rt.prototype.animate=function(){for(var j=[],Z=0;Z<arguments.length;Z++)j[Z]=arguments[Z];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var St=this.get("timeline");St||(St=this.get("canvas").get("timeline"),this.set("timeline",St));var Dt=this.get("animations")||[];St.timer||St.initTimer();var qt=j[0],ae=j[1],ne=j[2],Oe=ne===void 0?"easeLinear":ne,Ie=j[3],De=Ie===void 0?L.noop:Ie,or=j[4],nr=or===void 0?0:or,ze,cr,Rr,Jr,$r;(0,L.isFunction)(qt)?(ze=qt,qt={}):(0,L.isObject)(qt)&&qt.onFrame&&(ze=qt.onFrame,cr=qt.repeat),(0,L.isObject)(ae)?($r=ae,ae=$r.duration,Oe=$r.easing||"easeLinear",nr=$r.delay||0,cr=$r.repeat||cr||!1,De=$r.callback||L.noop,Rr=$r.pauseCallback||L.noop,Jr=$r.resumeCallback||L.noop):((0,L.isNumber)(De)&&(nr=De,De=null),(0,L.isFunction)(Oe)?(De=Oe,Oe="easeLinear"):Oe=Oe||"easeLinear");var Pr=gr(qt,this),ur={fromAttrs:Yr(Pr,this),toAttrs:Pr,duration:ae,easing:Oe,repeat:cr,callback:De,pauseCallback:Rr,resumeCallback:Jr,delay:nr,startTime:St.getTime(),id:(0,L.uniqueId)(),onFrame:ze,pathFormatted:!1};Dt.length>0?Dt=ri(Dt,ur):St.addAnimator(this),Dt.push(ur),this.set("animations",Dt),this.set("_pause",{isPaused:!1})}},rt.prototype.stopAnimate=function(j){var Z=this;j===void 0&&(j=!0);var St=this.get("animations");(0,L.each)(St,function(Dt){j&&(Dt.onFrame?Z.attr(Dt.onFrame(1)):Z.attr(Dt.toAttrs)),Dt.callback&&Dt.callback()}),this.set("animating",!1),this.set("animations",[])},rt.prototype.pauseAnimate=function(){var j=this.get("timeline"),Z=this.get("animations"),St=j.getTime();return(0,L.each)(Z,function(Dt){Dt._paused=!0,Dt._pauseTime=St,Dt.pauseCallback&&Dt.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:St}),this},rt.prototype.resumeAnimate=function(){var j=this.get("timeline"),Z=j.getTime(),St=this.get("animations"),Dt=this.get("_pause").pauseTime;return(0,L.each)(St,function(qt){qt.startTime=qt.startTime+(Z-Dt),qt._paused=!1,qt._pauseTime=null,qt.resumeCallback&&qt.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",St),this},rt.prototype.emitDelegation=function(j,Z){var St=this,Dt=Z.propagationPath,qt=this.getEvents(),ae;j==="mouseenter"?ae=Z.fromShape:j==="mouseleave"&&(ae=Z.toShape);for(var ne=function(or){var nr=Dt[or],ze=nr.get("name");if(ze){if((nr.isGroup()||nr.isCanvas&&nr.isCanvas())&&ae&&Pt(nr,ae))return"break";(0,L.isArray)(ze)?(0,L.each)(ze,function(cr){St.emitDelegateEvent(nr,cr,Z)}):Oe.emitDelegateEvent(nr,ze,Z)}},Oe=this,Ie=0;Ie<Dt.length;Ie++){var De=ne(Ie);if(De==="break")break}},rt.prototype.emitDelegateEvent=function(j,Z,St){var Dt=this.getEvents(),qt=Z+dr+St.type;(Dt[qt]||Dt[xr])&&(St.name=qt,St.currentTarget=j,St.delegateTarget=this,St.delegateObject=j.get("delegateObject"),this.emit(qt,St))},rt.prototype.translate=function(j,Z){j===void 0&&(j=0),Z===void 0&&(Z=0);var St=this.getMatrix(),Dt=ue(St,[["t",j,Z]]);return this.setMatrix(Dt),this},rt.prototype.move=function(j,Z){var St=this.attr("x")||0,Dt=this.attr("y")||0;return this.translate(j-St,Z-Dt),this},rt.prototype.moveTo=function(j,Z){return this.move(j,Z)},rt.prototype.scale=function(j,Z){var St=this.getMatrix(),Dt=ue(St,[["s",j,Z||j]]);return this.setMatrix(Dt),this},rt.prototype.rotate=function(j){var Z=this.getMatrix(),St=ue(Z,[["r",j]]);return this.setMatrix(St),this},rt.prototype.rotateAtStart=function(j){var Z=this.attr(),St=Z.x,Dt=Z.y,qt=this.getMatrix(),ae=ue(qt,[["t",-St,-Dt],["r",j],["t",St,Dt]]);return this.setMatrix(ae),this},rt.prototype.rotateAtPoint=function(j,Z,St){var Dt=this.getMatrix(),qt=ue(Dt,[["t",-j,-Z],["r",St],["t",j,Z]]);return this.setMatrix(qt),this},rt}(Ct),Qr=bi,gi={},hn="_INDEX";function mn(dt,rt){if(dt.set("canvas",rt),dt.isGroup()){var j=dt.get("children");j.length&&j.forEach(function(Z){mn(Z,rt)})}}function Cn(dt,rt){if(dt.set("timeline",rt),dt.isGroup()){var j=dt.get("children");j.length&&j.forEach(function(Z){Cn(Z,rt)})}}function Xn(dt,rt){var j=dt.getChildren();return j.indexOf(rt)>=0}function Xt(dt,rt,j){j===void 0&&(j=!0),j?rt.destroy():(rt.set("parent",null),rt.set("canvas",null)),se(dt.getChildren(),rt)}function $t(dt){return function(rt,j){var Z=dt(rt,j);return Z===0?rt[hn]-j[hn]:Z}}var he=function(dt){(0,Qt.__extends)(rt,dt);function rt(){return dt!==null&&dt.apply(this,arguments)||this}return rt.prototype.isCanvas=function(){return!1},rt.prototype.getBBox=function(){var j=Infinity,Z=-Infinity,St=Infinity,Dt=-Infinity,qt=[],ae=[],ne=this.getChildren().filter(function(Ie){return Ie.get("visible")&&(!Ie.isGroup()||Ie.isGroup()&&Ie.getChildren().length>0)});ne.length>0?((0,L.each)(ne,function(Ie){var De=Ie.getBBox();qt.push(De.minX,De.maxX),ae.push(De.minY,De.maxY)}),j=(0,L.min)(qt),Z=(0,L.max)(qt),St=(0,L.min)(ae),Dt=(0,L.max)(ae)):(j=0,Z=0,St=0,Dt=0);var Oe={x:j,y:St,minX:j,minY:St,maxX:Z,maxY:Dt,width:Z-j,height:Dt-St};return Oe},rt.prototype.getCanvasBBox=function(){var j=Infinity,Z=-Infinity,St=Infinity,Dt=-Infinity,qt=[],ae=[],ne=this.getChildren().filter(function(Ie){return Ie.get("visible")&&(!Ie.isGroup()||Ie.isGroup()&&Ie.getChildren().length>0)});ne.length>0?((0,L.each)(ne,function(Ie){var De=Ie.getCanvasBBox();qt.push(De.minX,De.maxX),ae.push(De.minY,De.maxY)}),j=(0,L.min)(qt),Z=(0,L.max)(qt),St=(0,L.min)(ae),Dt=(0,L.max)(ae)):(j=0,Z=0,St=0,Dt=0);var Oe={x:j,y:St,minX:j,minY:St,maxX:Z,maxY:Dt,width:Z-j,height:Dt-St};return Oe},rt.prototype.getDefaultCfg=function(){var j=dt.prototype.getDefaultCfg.call(this);return j.children=[],j},rt.prototype.onAttrChange=function(j,Z,St){if(dt.prototype.onAttrChange.call(this,j,Z,St),j==="matrix"){var Dt=this.getTotalMatrix();this._applyChildrenMarix(Dt)}},rt.prototype.applyMatrix=function(j){var Z=this.getTotalMatrix();dt.prototype.applyMatrix.call(this,j);var St=this.getTotalMatrix();St!==Z&&this._applyChildrenMarix(St)},rt.prototype._applyChildrenMarix=function(j){var Z=this.getChildren();(0,L.each)(Z,function(St){St.applyMatrix(j)})},rt.prototype.addShape=function(){for(var j=[],Z=0;Z<arguments.length;Z++)j[Z]=arguments[Z];var St=j[0],Dt=j[1];(0,L.isObject)(St)?Dt=St:Dt.type=St;var qt=gi[Dt.type];qt||(qt=(0,L.upperFirst)(Dt.type),gi[Dt.type]=qt);var ae=this.getShapeBase(),ne=new ae[qt](Dt);return this.add(ne),ne},rt.prototype.addGroup=function(){for(var j=[],Z=0;Z<arguments.length;Z++)j[Z]=arguments[Z];var St=j[0],Dt=j[1],qt;if((0,L.isFunction)(St))Dt?qt=new St(Dt):qt=new St({parent:this});else{var ae=St||{},ne=this.getGroupBase();qt=new ne(ae)}return this.add(qt),qt},rt.prototype.getCanvas=function(){var j;return this.isCanvas()?j=this:j=this.get("canvas"),j},rt.prototype.getShape=function(j,Z,St){if(!pt(this))return null;var Dt=this.getChildren(),qt;if(this.isCanvas())qt=this._findShape(Dt,j,Z,St);else{var ae=[j,Z,1];ae=this.invertFromMatrix(ae),this.isClipped(ae[0],ae[1])||(qt=this._findShape(Dt,ae[0],ae[1],St))}return qt},rt.prototype._findShape=function(j,Z,St,Dt){for(var qt=null,ae=j.length-1;ae>=0;ae--){var ne=j[ae];if(pt(ne)&&(ne.isGroup()?qt=ne.getShape(Z,St,Dt):ne.isHit(Z,St)&&(qt=ne)),qt)break}return qt},rt.prototype.add=function(j){var Z=this.getCanvas(),St=this.getChildren(),Dt=this.get("timeline"),qt=j.getParent();qt&&Xt(qt,j,!1),j.set("parent",this),Z&&mn(j,Z),Dt&&Cn(j,Dt),St.push(j),j.onCanvasChange("add"),this._applyElementMatrix(j)},rt.prototype._applyElementMatrix=function(j){var Z=this.getTotalMatrix();Z&&j.applyMatrix(Z)},rt.prototype.getChildren=function(){return this.get("children")},rt.prototype.sort=function(){var j=this.getChildren();(0,L.each)(j,function(Z,St){return Z[hn]=St,Z}),j.sort($t(function(Z,St){return Z.get("zIndex")-St.get("zIndex")})),this.onCanvasChange("sort")},rt.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var j=this.getChildren(),Z=j.length-1;Z>=0;Z--)j[Z].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},rt.prototype.destroy=function(){this.get("destroyed")||(this.clear(),dt.prototype.destroy.call(this))},rt.prototype.getFirst=function(){return this.getChildByIndex(0)},rt.prototype.getLast=function(){var j=this.getChildren();return this.getChildByIndex(j.length-1)},rt.prototype.getChildByIndex=function(j){var Z=this.getChildren();return Z[j]},rt.prototype.getCount=function(){var j=this.getChildren();return j.length},rt.prototype.contain=function(j){var Z=this.getChildren();return Z.indexOf(j)>-1},rt.prototype.removeChild=function(j,Z){Z===void 0&&(Z=!0),this.contain(j)&&j.remove(Z)},rt.prototype.findAll=function(j){var Z=[],St=this.getChildren();return(0,L.each)(St,function(Dt){j(Dt)&&Z.push(Dt),Dt.isGroup()&&(Z=Z.concat(Dt.findAll(j)))}),Z},rt.prototype.find=function(j){var Z=null,St=this.getChildren();return(0,L.each)(St,function(Dt){if(j(Dt)?Z=Dt:Dt.isGroup()&&(Z=Dt.find(j)),Z)return!1}),Z},rt.prototype.findById=function(j){return this.find(function(Z){return Z.get("id")===j})},rt.prototype.findByClassName=function(j){return this.find(function(Z){return Z.get("className")===j})},rt.prototype.findAllByName=function(j){return this.findAll(function(Z){return Z.get("name")===j})},rt}(Qr),ce=he,we=d(7802),Ee=d(45257),_e=d(39751),Le=d(99868),xe={};function er(dt){return xe[dt.toLowerCase()]||Le[dt]}function Xe(dt,rt){xe[dt.toLowerCase()]=rt}var hr=function(dt){return["fill","stroke","fillStyle","strokeStyle"].includes(dt)},Ar=function(dt){return/^[r,R,L,l]{1}[\s]*\(/.test(dt)},fr=[1,0,0,0,1,0,0,0,1];function Sr(dt,rt,j){var Z={},St=rt.fromAttrs,Dt=rt.toAttrs;if(!dt.destroyed){var qt;for(var ae in Dt)if(!(0,L.isEqual)(St[ae],Dt[ae]))if(ae==="path"){var ne=Dt[ae],Oe=St[ae];ne.length>Oe.length?(ne=T(Dt[ae]),Oe=T(St[ae]),Oe=h(Oe,ne),Oe=Vt(Oe,ne),rt.fromAttrs.path=Oe,rt.toAttrs.path=ne):rt.pathFormatted||(ne=T(Dt[ae]),Oe=T(St[ae]),Oe=Vt(Oe,ne),rt.fromAttrs.path=Oe,rt.toAttrs.path=ne,rt.pathFormatted=!0),Z[ae]=[];for(var Ie=0;Ie<ne.length;Ie++){for(var De=ne[Ie],or=Oe[Ie],nr=[],ze=0;ze<De.length;ze++)(0,L.isNumber)(De[ze])&&or&&(0,L.isNumber)(or[ze])?(qt=(0,Ee.Z)(or[ze],De[ze]),nr.push(qt(j))):nr.push(De[ze]);Z[ae].push(nr)}}else if(ae==="matrix"){var cr=(0,_e.Z)(St[ae]||fr,Dt[ae]||fr),Rr=cr(j);Z[ae]=Rr}else hr(ae)&&Ar(Dt[ae])?Z[ae]=Dt[ae]:(0,L.isFunction)(Dt[ae])||(qt=(0,Ee.Z)(St[ae],Dt[ae]),Z[ae]=qt(j));dt.attr(Z)}}function yr(dt,rt,j){var Z=rt.startTime,St=rt.delay;if(j<Z+St||rt._paused)return!1;var Dt,qt=rt.duration,ae=rt.easing,ne=er(ae);if(j=j-Z-rt.delay,rt.repeat)Dt=j%qt/qt,Dt=ne(Dt);else if(Dt=j/qt,Dt<1)Dt=ne(Dt);else return rt.onFrame?dt.attr(rt.onFrame(1)):dt.attr(rt.toAttrs),!0;if(rt.onFrame){var Oe=rt.onFrame(Dt);dt.attr(Oe)}else Sr(dt,rt,Dt);return!1}var Or=function(){function dt(rt){this.animators=[],this.current=0,this.timer=null,this.canvas=rt}return dt.prototype.initTimer=function(){var rt=this,j=!1,Z,St,Dt;this.timer=we.HT(function(qt){if(rt.current=qt,rt.animators.length>0){for(var ae=rt.animators.length-1;ae>=0;ae--){if(Z=rt.animators[ae],Z.destroyed){rt.removeAnimator(ae);continue}if(!Z.isAnimatePaused()){St=Z.get("animations");for(var ne=St.length-1;ne>=0;ne--)Dt=St[ne],j=yr(Z,Dt,qt),j&&(St.splice(ne,1),j=!1,Dt.callback&&Dt.callback())}St.length===0&&rt.removeAnimator(ae)}var Oe=rt.canvas.get("autoDraw");Oe||rt.canvas.draw()}})},dt.prototype.addAnimator=function(rt){this.animators.push(rt)},dt.prototype.removeAnimator=function(rt){this.animators.splice(rt,1)},dt.prototype.isAnimating=function(){return!!this.animators.length},dt.prototype.stop=function(){this.timer&&this.timer.stop()},dt.prototype.stopAllAnimations=function(rt){rt===void 0&&(rt=!0),this.animators.forEach(function(j){j.stopAnimate(rt)}),this.animators=[],this.canvas.draw()},dt.prototype.getTime=function(){return this.current},dt}(),lr=Or,Fr=40,Kr=0,Vr=":",Zr=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ut(dt,rt){for(var j in dt)if(dt.hasOwnProperty(j)&&j.indexOf(Vr+rt)>=0)return!0;return!1}function Kt(dt,rt,j){j.name=rt,j.target=dt,j.currentTarget=dt,j.delegateTarget=dt,dt.emit(rt,j)}function ie(dt,rt,j){if(j.bubbles){var Z=void 0,St=!1;if(rt==="mouseenter"?(Z=j.fromShape,St=!0):rt==="mouseleave"&&(St=!0,Z=j.toShape),dt.isCanvas()&&St)return;if(Z&&Pt(dt,Z)){j.bubbles=!1;return}j.name=rt,j.currentTarget=dt,j.delegateTarget=dt,dt.emit(rt,j)}}var me=function(){function dt(rt){var j=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Z){var St=Z.type;j._triggerEvent(St,Z)},this._onDocumentMove=function(Z){var St=j.canvas,Dt=St.get("el");if(Dt!==Z.target&&(j.dragging||j.currentShape)){var qt=j._getPointInfo(Z);j.dragging&&j._emitEvent("drag",Z,qt,j.draggingShape)}},this._onDocumentMouseUp=function(Z){var St=j.canvas,Dt=St.get("el");if(Dt!==Z.target&&j.dragging){var qt=j._getPointInfo(Z);j.draggingShape&&j._emitEvent("drop",Z,qt,null),j._emitEvent("dragend",Z,qt,j.draggingShape),j._afterDrag(j.draggingShape,qt,Z)}},this.canvas=rt.canvas}return dt.prototype.init=function(){this._bindEvents()},dt.prototype._bindEvents=function(){var rt=this,j=this.canvas.get("el");(0,L.each)(Zr,function(Z){j.addEventListener(Z,rt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},dt.prototype._clearEvents=function(){var rt=this,j=this.canvas.get("el");(0,L.each)(Zr,function(Z){j.removeEventListener(Z,rt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},dt.prototype._getEventObj=function(rt,j,Z,St,Dt,qt){var ae=new zt(rt,j);return ae.fromShape=Dt,ae.toShape=qt,ae.x=Z.x,ae.y=Z.y,ae.clientX=Z.clientX,ae.clientY=Z.clientY,ae.propagationPath.push(St),ae},dt.prototype._getShape=function(rt,j){return this.canvas.getShape(rt.x,rt.y,j)},dt.prototype._getPointInfo=function(rt){var j=this.canvas,Z=j.getClientByEvent(rt),St=j.getPointByEvent(rt);return{x:St.x,y:St.y,clientX:Z.x,clientY:Z.y}},dt.prototype._triggerEvent=function(rt,j){var Z=this._getPointInfo(j),St=this._getShape(Z,j),Dt=this["_on"+rt],qt=!1;if(Dt)Dt.call(this,Z,St,j);else{var ae=this.currentShape;rt==="mouseenter"||rt==="dragenter"||rt==="mouseover"?(this._emitEvent(rt,j,Z,null,null,St),St&&this._emitEvent(rt,j,Z,St,null,St),rt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",j,Z,null)):rt==="mouseleave"||rt==="dragleave"||rt==="mouseout"?(qt=!0,ae&&this._emitEvent(rt,j,Z,ae,ae,null),this._emitEvent(rt,j,Z,null,ae,null),rt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",j,Z,null)):this._emitEvent(rt,j,Z,St,null,null)}if(qt||(this.currentShape=St),St&&!St.get("destroyed")){var ne=this.canvas,Oe=ne.get("el");Oe.style.cursor=St.attr("cursor")||ne.get("cursor")}},dt.prototype._onmousedown=function(rt,j,Z){Z.button===Kr&&(this.mousedownShape=j,this.mousedownPoint=rt,this.mousedownTimeStamp=Z.timeStamp),this._emitEvent("mousedown",Z,rt,j,null,null)},dt.prototype._emitMouseoverEvents=function(rt,j,Z,St){var Dt=this.canvas.get("el");Z!==St&&(Z&&(this._emitEvent("mouseout",rt,j,Z,Z,St),this._emitEvent("mouseleave",rt,j,Z,Z,St),(!St||St.get("destroyed"))&&(Dt.style.cursor=this.canvas.get("cursor"))),St&&(this._emitEvent("mouseover",rt,j,St,Z,St),this._emitEvent("mouseenter",rt,j,St,Z,St)))},dt.prototype._emitDragoverEvents=function(rt,j,Z,St,Dt){St?(St!==Z&&(Z&&this._emitEvent("dragleave",rt,j,Z,Z,St),this._emitEvent("dragenter",rt,j,St,Z,St)),Dt||this._emitEvent("dragover",rt,j,St)):Z&&this._emitEvent("dragleave",rt,j,Z,Z,St),Dt&&this._emitEvent("dragover",rt,j,St)},dt.prototype._afterDrag=function(rt,j,Z){rt&&(rt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var St=this._getShape(j,Z);St!==rt&&this._emitMouseoverEvents(Z,j,rt,St),this.currentShape=St},dt.prototype._onmouseup=function(rt,j,Z){if(Z.button===Kr){var St=this.draggingShape;this.dragging?(St&&this._emitEvent("drop",Z,rt,j),this._emitEvent("dragend",Z,rt,St),this._afterDrag(St,rt,Z)):(this._emitEvent("mouseup",Z,rt,j),j===this.mousedownShape&&this._emitEvent("click",Z,rt,j),this.mousedownShape=null,this.mousedownPoint=null)}},dt.prototype._ondragover=function(rt,j,Z){Z.preventDefault();var St=this.currentShape;this._emitDragoverEvents(Z,rt,St,j,!0)},dt.prototype._onmousemove=function(rt,j,Z){var St=this.canvas,Dt=this.currentShape,qt=this.draggingShape;if(this.dragging)qt&&this._emitDragoverEvents(Z,rt,Dt,j,!1),this._emitEvent("drag",Z,rt,qt);else{var ae=this.mousedownPoint;if(ae){var ne=this.mousedownShape,Oe=Z.timeStamp,Ie=Oe-this.mousedownTimeStamp,De=ae.clientX-rt.clientX,or=ae.clientY-rt.clientY,nr=De*De+or*or;Ie>120||nr>Fr?ne&&ne.get("draggable")?(qt=this.mousedownShape,qt.set("capture",!1),this.draggingShape=qt,this.dragging=!0,this._emitEvent("dragstart",Z,rt,qt),this.mousedownShape=null,this.mousedownPoint=null):!ne&&St.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Z,rt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Z,rt,Dt,j),this._emitEvent("mousemove",Z,rt,j)):(this._emitMouseoverEvents(Z,rt,Dt,j),this._emitEvent("mousemove",Z,rt,j))}else this._emitMouseoverEvents(Z,rt,Dt,j),this._emitEvent("mousemove",Z,rt,j)}},dt.prototype._emitEvent=function(rt,j,Z,St,Dt,qt){var ae=this._getEventObj(rt,j,Z,St,Dt,qt);if(St){ae.shape=St,Kt(St,rt,ae);for(var ne=St.getParent();ne;)ne.emitDelegation(rt,ae),ae.propagationStopped||ie(ne,rt,ae),ae.propagationPath.push(ne),ne=ne.getParent()}else{var Oe=this.canvas;Kt(Oe,rt,ae)}},dt.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},dt}(),Me=me,Pe="px",Je=(0,nt.detect)(),sr=Je&&Je.name==="firefox",Dr=function(dt){(0,Qt.__extends)(rt,dt);function rt(j){var Z=dt.call(this,j)||this;return Z.initContainer(),Z.initDom(),Z.initEvents(),Z.initTimeline(),Z}return rt.prototype.getDefaultCfg=function(){var j=dt.prototype.getDefaultCfg.call(this);return j.cursor="default",j.supportCSSTransform=!1,j},rt.prototype.initContainer=function(){var j=this.get("container");(0,L.isString)(j)&&(j=document.getElementById(j),this.set("container",j))},rt.prototype.initDom=function(){var j=this.createDom();this.set("el",j);var Z=this.get("container");Z.appendChild(j),this.setDOMSize(this.get("width"),this.get("height"))},rt.prototype.initEvents=function(){var j=new Me({canvas:this});j.init(),this.set("eventController",j)},rt.prototype.initTimeline=function(){var j=new lr(this);this.set("timeline",j)},rt.prototype.setDOMSize=function(j,Z){var St=this.get("el");jt&&(St.style.width=j+Pe,St.style.height=Z+Pe)},rt.prototype.changeSize=function(j,Z){this.setDOMSize(j,Z),this.set("width",j),this.set("height",Z),this.onCanvasChange("changeSize")},rt.prototype.getRenderer=function(){return this.get("renderer")},rt.prototype.getCursor=function(){return this.get("cursor")},rt.prototype.setCursor=function(j){this.set("cursor",j);var Z=this.get("el");jt&&Z&&(Z.style.cursor=j)},rt.prototype.getPointByEvent=function(j){var Z=this.get("supportCSSTransform");if(Z){if(sr&&!(0,L.isNil)(j.layerX)&&j.layerX!==j.offsetX)return{x:j.layerX,y:j.layerY};if(!(0,L.isNil)(j.offsetX))return{x:j.offsetX,y:j.offsetY}}var St=this.getClientByEvent(j),Dt=St.x,qt=St.y;return this.getPointByClient(Dt,qt)},rt.prototype.getClientByEvent=function(j){var Z=j;return j.touches&&(j.type==="touchend"?Z=j.changedTouches[0]:Z=j.touches[0]),{x:Z.clientX,y:Z.clientY}},rt.prototype.getPointByClient=function(j,Z){var St=this.get("el"),Dt=St.getBoundingClientRect();return{x:j-Dt.left,y:Z-Dt.top}},rt.prototype.getClientByPoint=function(j,Z){var St=this.get("el"),Dt=St.getBoundingClientRect();return{x:j+Dt.left,y:Z+Dt.top}},rt.prototype.draw=function(){},rt.prototype.removeDom=function(){var j=this.get("el");j.parentNode.removeChild(j)},rt.prototype.clearEvents=function(){var j=this.get("eventController");j.destroy()},rt.prototype.isCanvas=function(){return!0},rt.prototype.getParent=function(){return null},rt.prototype.destroy=function(){var j=this.get("timeline");this.get("destroyed")||(this.clear(),j&&j.stop(),this.clearEvents(),this.removeDom(),dt.prototype.destroy.call(this))},rt}(ce),Re=Dr,Tr=function(dt){(0,Qt.__extends)(rt,dt);function rt(){return dt!==null&&dt.apply(this,arguments)||this}return rt.prototype.isGroup=function(){return!0},rt.prototype.isEntityGroup=function(){return!1},rt.prototype.clone=function(){for(var j=dt.prototype.clone.call(this),Z=this.getChildren(),St=0;St<Z.length;St++){var Dt=Z[St];j.add(Dt.clone())}return j},rt}(ce),vi=Tr,Mi=function(dt){(0,Qt.__extends)(rt,dt);function rt(j){return dt.call(this,j)||this}return rt.prototype._isInBBox=function(j,Z){var St=this.getBBox();return St.minX<=j&&St.maxX>=j&&St.minY<=Z&&St.maxY>=Z},rt.prototype.afterAttrsChange=function(j){dt.prototype.afterAttrsChange.call(this,j),this.clearCacheBBox()},rt.prototype.getBBox=function(){var j=this.cfg.bbox;return j||(j=this.calculateBBox(),this.set("bbox",j)),j},rt.prototype.getCanvasBBox=function(){var j=this.cfg.canvasBBox;return j||(j=this.calculateCanvasBBox(),this.set("canvasBBox",j)),j},rt.prototype.applyMatrix=function(j){dt.prototype.applyMatrix.call(this,j),this.set("canvasBBox",null)},rt.prototype.calculateCanvasBBox=function(){var j=this.getBBox(),Z=this.getTotalMatrix(),St=j.minX,Dt=j.minY,qt=j.maxX,ae=j.maxY;if(Z){var ne=Tt(Z,[j.minX,j.minY]),Oe=Tt(Z,[j.maxX,j.minY]),Ie=Tt(Z,[j.minX,j.maxY]),De=Tt(Z,[j.maxX,j.maxY]);St=Math.min(ne[0],Oe[0],Ie[0],De[0]),qt=Math.max(ne[0],Oe[0],Ie[0],De[0]),Dt=Math.min(ne[1],Oe[1],Ie[1],De[1]),ae=Math.max(ne[1],Oe[1],Ie[1],De[1])}var or=this.attrs;if(or.shadowColor){var nr=or.shadowBlur,ze=nr===void 0?0:nr,cr=or.shadowOffsetX,Rr=cr===void 0?0:cr,Jr=or.shadowOffsetY,$r=Jr===void 0?0:Jr,Pr=St-ze+Rr,ur=qt+ze+Rr,ii=Dt-ze+$r,Oi=ae+ze+$r;St=Math.min(St,Pr),qt=Math.max(qt,ur),Dt=Math.min(Dt,ii),ae=Math.max(ae,Oi)}return{x:St,y:Dt,minX:St,minY:Dt,maxX:qt,maxY:ae,width:qt-St,height:ae-Dt}},rt.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},rt.prototype.isClipShape=function(){return this.get("isClipShape")},rt.prototype.isInShape=function(j,Z){return!1},rt.prototype.isOnlyHitBox=function(){return!1},rt.prototype.isHit=function(j,Z){var St=this.get("startArrowShape"),Dt=this.get("endArrowShape"),qt=[j,Z,1];qt=this.invertFromMatrix(qt);var ae=qt[0],ne=qt[1],Oe=this._isInBBox(ae,ne);return this.isOnlyHitBox()?Oe:!!(Oe&&!this.isClipped(ae,ne)&&(this.isInShape(ae,ne)||St&&St.isHit(ae,ne)||Dt&&Dt.isHit(ae,ne)))},rt}(Qr),oi=Mi,di=new Map;function Li(dt,rt){di.set(dt,rt)}function qi(dt){return di.get(dt)}function fn(dt){var rt=dt.attr(),j=rt.x,Z=rt.y,St=rt.width,Dt=rt.height;return{x:j,y:Z,width:St,height:Dt}}function Ii(dt){var rt=dt.attr(),j=rt.x,Z=rt.y,St=rt.r;return{x:j-St,y:Z-St,width:St*2,height:St*2}}var pn=d(51824);function Ln(dt,rt){return!dt||!rt?dt||rt:{minX:Math.min(dt.minX,rt.minX),minY:Math.min(dt.minY,rt.minY),maxX:Math.max(dt.maxX,rt.maxX),maxY:Math.max(dt.maxY,rt.maxY)}}function Et(dt,rt){var j=dt.get("startArrowShape"),Z=dt.get("endArrowShape"),St=null,Dt=null;return j&&(St=j.getCanvasBBox(),rt=Ln(rt,St)),Z&&(Dt=Z.getCanvasBBox(),rt=Ln(rt,Dt)),rt}function ft(dt){for(var rt=dt.attr(),j=rt.points,Z=[],St=[],Dt=0;Dt<j.length;Dt++){var qt=j[Dt];Z.push(qt[0]),St.push(qt[1])}var ae=pn.Util.getBBoxByArray(Z,St),ne=ae.x,Oe=ae.y,Ie=ae.width,De=ae.height,or={minX:ne,minY:Oe,maxX:ne+Ie,maxY:Oe+De};return or=Et(dt,or),{x:or.minX,y:or.minY,width:or.maxX-or.minX,height:or.maxY-or.minY}}function it(dt){for(var rt=dt.attr(),j=rt.points,Z=[],St=[],Dt=0;Dt<j.length;Dt++){var qt=j[Dt];Z.push(qt[0]),St.push(qt[1])}return pn.Util.getBBoxByArray(Z,St)}var ot=null;function Ot(){if(!ot){var dt=document.createElement("canvas");dt.width=1,dt.height=1,ot=dt.getContext("2d")}return ot}function Zt(dt,rt,j){var Z=1;if((0,L.isString)(dt)&&(Z=dt.split(`
`).length),Z>1){var St=de(rt,j);return rt*Z+St*(Z-1)}return rt}function de(dt,rt){return rt?rt-dt:dt*.14}function pe(dt,rt){var j=Ot(),Z=0;if((0,L.isNil)(dt)||dt==="")return Z;if(j.save(),j.font=rt,(0,L.isString)(dt)&&dt.includes(`
`)){var St=dt.split(`
`);(0,L.each)(St,function(Dt){var qt=j.measureText(Dt).width;Z<qt&&(Z=qt)})}else Z=j.measureText(dt).width;return j.restore(),Z}function ye(dt){var rt=dt.fontSize,j=dt.fontFamily,Z=dt.fontWeight,St=dt.fontStyle,Dt=dt.fontVariant;return[St,Dt,Z,rt+"px",j].join(" ").trim()}function Ge(dt){var rt=dt.attr(),j=rt.x,Z=rt.y,St=rt.text,Dt=rt.fontSize,qt=rt.lineHeight,ae=rt.font;ae||(ae=ye(rt));var ne=pe(St,ae),Oe;if(!ne)Oe={x:j,y:Z,width:0,height:0};else{var Ie=rt.textAlign,De=rt.textBaseline,or=Zt(St,Dt,qt),nr={x:j,y:Z-or};Ie&&(Ie==="end"||Ie==="right"?nr.x-=ne:Ie==="center"&&(nr.x-=ne/2)),De&&(De==="top"?nr.y+=or:De==="middle"&&(nr.y+=or/2)),Oe={x:nr.x,y:nr.y,width:ne,height:or}}return Oe}var $e=d(62029);function je(dt,rt){for(var j=[],Z=[],St=[],Dt=0;Dt<dt.length;Dt++){var qt=dt[Dt],ae=qt.currentPoint,ne=qt.params,Oe=qt.prePoint,Ie=void 0;switch(qt.command){case"Q":Ie=pn.Quad.box(Oe[0],Oe[1],ne[1],ne[2],ne[3],ne[4]);break;case"C":Ie=pn.Cubic.box(Oe[0],Oe[1],ne[1],ne[2],ne[3],ne[4],ne[5],ne[6]);break;case"A":var De=qt.arcParams;Ie=pn.Arc.box(De.cx,De.cy,De.rx,De.ry,De.xRotation,De.startAngle,De.endAngle);break;default:j.push(ae[0]),Z.push(ae[1]);break}Ie&&(qt.box=Ie,j.push(Ie.x,Ie.x+Ie.width),Z.push(Ie.y,Ie.y+Ie.height)),rt&&(qt.command==="L"||qt.command==="M")&&qt.prePoint&&qt.nextPoint&&St.push(qt)}j=j.filter(function(Jr){return!Number.isNaN(Jr)&&Jr!==Infinity&&Jr!==-Infinity}),Z=Z.filter(function(Jr){return!Number.isNaN(Jr)&&Jr!==Infinity&&Jr!==-Infinity});var or=(0,L.min)(j),nr=(0,L.min)(Z),ze=(0,L.max)(j),cr=(0,L.max)(Z);if(St.length===0)return{x:or,y:nr,width:ze-or,height:cr-nr};for(var Dt=0;Dt<St.length;Dt++){var qt=St[Dt],ae=qt.currentPoint,Rr=void 0;ae[0]===or?(Rr=mr(qt,rt),or=or-Rr.xExtra):ae[0]===ze&&(Rr=mr(qt,rt),ze=ze+Rr.xExtra),ae[1]===nr?(Rr=mr(qt,rt),nr=nr-Rr.yExtra):ae[1]===cr&&(Rr=mr(qt,rt),cr=cr+Rr.yExtra)}return{x:or,y:nr,width:ze-or,height:cr-nr}}function mr(dt,rt){var j=dt.prePoint,Z=dt.currentPoint,St=dt.nextPoint,Dt=Math.pow(Z[0]-j[0],2)+Math.pow(Z[1]-j[1],2),qt=Math.pow(Z[0]-St[0],2)+Math.pow(Z[1]-St[1],2),ae=Math.pow(j[0]-St[0],2)+Math.pow(j[1]-St[1],2),ne=Math.acos((Dt+qt-ae)/(2*Math.sqrt(Dt)*Math.sqrt(qt)));if(!ne||Math.sin(ne)===0||(0,L.isNumberEqual)(ne,0))return{xExtra:0,yExtra:0};var Oe=Math.abs(Math.atan2(St[1]-Z[1],St[0]-Z[0])),Ie=Math.abs(Math.atan2(St[0]-Z[0],St[1]-Z[1]));Oe=Oe>Math.PI/2?Math.PI-Oe:Oe,Ie=Ie>Math.PI/2?Math.PI-Ie:Ie;var De={xExtra:Math.cos(ne/2-Oe)*(rt/2*(1/Math.sin(ne/2)))-rt/2||0,yExtra:Math.cos(Ie-ne/2)*(rt/2*(1/Math.sin(ne/2)))-rt/2||0};return De}function vr(dt){var rt=dt.attr(),j=rt.path,Z=rt.stroke,St=Z?rt.lineWidth:0,Dt=dt.get("segments")||(0,$e.path2Segments)(j),qt=je(Dt,St),ae=qt.x,ne=qt.y,Oe=qt.width,Ie=qt.height,De={minX:ae,minY:ne,maxX:ae+Oe,maxY:ne+Ie};return De=Et(dt,De),{x:De.minX,y:De.minY,width:De.maxX-De.minX,height:De.maxY-De.minY}}function He(dt){var rt=dt.attr(),j=rt.x1,Z=rt.y1,St=rt.x2,Dt=rt.y2,qt=Math.min(j,St),ae=Math.max(j,St),ne=Math.min(Z,Dt),Oe=Math.max(Z,Dt),Ie={minX:qt,maxX:ae,minY:ne,maxY:Oe};return Ie=Et(dt,Ie),{x:Ie.minX,y:Ie.minY,width:Ie.maxX-Ie.minX,height:Ie.maxY-Ie.minY}}function kr(dt){var rt=dt.attr(),j=rt.x,Z=rt.y,St=rt.rx,Dt=rt.ry;return{x:j-St,y:Z-Dt,width:St*2,height:Dt*2}}Li("rect",fn),Li("image",fn),Li("circle",Ii),Li("marker",Ii),Li("polyline",ft),Li("polygon",it),Li("text",Ge),Li("path",vr),Li("line",He),Li("ellipse",kr);var ti="0.5.11"},57814:function(lt,S){"use strict";var d;d={value:!0};var m=function(){function L(I,P){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=I,this.name=I,this.originalEvent=P,this.timeStamp=P.timeStamp}return L.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},L.prototype.stopPropagation=function(){this.propagationStopped=!0},L.prototype.toString=function(){var I=this.type;return"[Event (type="+I+")]"},L.prototype.save=function(){},L.prototype.restore=function(){},L}();S.Z=m},29291:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(75612);function I(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function P(M,A){return I(M)*I(A)?(M[0]*A[0]+M[1]*A[1])/(I(M)*I(A)):1}function _(M,A){return(M[0]*A[1]<M[1]*A[0]?-1:1)*Math.acos(P(M,A))}function T(M,A){var p=A[1],w=A[2],y=L.mod(L.toRadian(A[3]),Math.PI*2),b=A[4],x=A[5],E=M[0],k=M[1],D=A[6],N=A[7],z=Math.cos(y)*(E-D)/2+Math.sin(y)*(k-N)/2,W=-1*Math.sin(y)*(E-D)/2+Math.cos(y)*(k-N)/2,X=z*z/(p*p)+W*W/(w*w);X>1&&(p*=Math.sqrt(X),w*=Math.sqrt(X));var U=p*p*(W*W)+w*w*(z*z),et=U?Math.sqrt((p*p*(w*w)-U)/U):1;b===x&&(et*=-1),isNaN(et)&&(et=0);var Q=w?et*p*W/w:0,ct=p?et*-w*z/p:0,Lt=(E+D)/2+Math.cos(y)*Q-Math.sin(y)*ct,_t=(k+N)/2+Math.sin(y)*Q+Math.cos(y)*ct,yt=[(z-Q)/p,(W-ct)/w],bt=[(-1*z-Q)/p,(-1*W-ct)/w],Mt=_([1,0],yt),xt=_(yt,bt);return P(yt,bt)<=-1&&(xt=Math.PI),P(yt,bt)>=1&&(xt=0),x===0&&xt>0&&(xt=xt-2*Math.PI),x===1&&xt<0&&(xt=xt+2*Math.PI),{cx:Lt,cy:_t,rx:L.isSamePoint(M,[D,N])?0:p,ry:L.isSamePoint(M,[D,N])?0:w,startAngle:Mt,endAngle:Mt+xt,xRotation:y,arcFlag:b,sweepFlag:x}}S.Z=T},75612:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isSamePoint=S.mergeRegion=S.intersectRect=S.inBox=S.distance=S.getPixelRatio=void 0;function m(){return window?window.devicePixelRatio:1}S.getPixelRatio=m;function L(N,z,W,X){var U=N-W,et=z-X;return Math.sqrt(U*U+et*et)}S.distance=L;function I(N,z,W,X,U,et){return U>=N&&U<=N+W&&et>=z&&et<=z+X}S.inBox=I;function P(N,z){return!(z.minX>N.maxX||z.maxX<N.minX||z.minY>N.maxY||z.maxY<N.minY)}S.intersectRect=P;function _(N,z){return!N||!z?N||z:{minX:Math.min(N.minX,z.minX),minY:Math.min(N.minY,z.minY),maxX:Math.max(N.maxX,z.maxX),maxY:Math.max(N.maxY,z.maxY)}}S.mergeRegion=_;function T(N,z){return N[0]===z[0]&&N[1]===z[1]}S.isSamePoint=T;var M=d(83438);Object.defineProperty(S,"isNil",{enumerable:!0,get:function(){return M.default}});var A=d(55535);Object.defineProperty(S,"isString",{enumerable:!0,get:function(){return A.default}});var p=d(91110);Object.defineProperty(S,"isFunction",{enumerable:!0,get:function(){return p.default}});var w=d(21429);Object.defineProperty(S,"isArray",{enumerable:!0,get:function(){return w.default}});var y=d(91577);Object.defineProperty(S,"each",{enumerable:!0,get:function(){return y.default}});var b=d(61823);Object.defineProperty(S,"toRadian",{enumerable:!0,get:function(){return b.default}});var x=d(62352);Object.defineProperty(S,"mod",{enumerable:!0,get:function(){return x.default}});var E=d(47203);Object.defineProperty(S,"isNumberEqual",{enumerable:!0,get:function(){return E.default}});var k=d(37250);Object.defineProperty(S,"requestAnimationFrame",{enumerable:!0,get:function(){return k.default}});var D=d(88041);Object.defineProperty(S,"clearAnimationFrame",{enumerable:!0,get:function(){return D.default}})},40779:function(lt){"use strict";lt.exports=JSON.parse('{"name":"@antv/g-canvas","version":"0.4.15","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit","dist":"webpack --config webpack.config.js --mode production"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.26.1","webpack-cli":"^3.1.2"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","gl-matrix":"^3.0.0"},"__npminstall_done":"Mon Jul 04 2022 00:47:14 GMT+0800 (\u4E2D\u56FD\u6807\u51C6\u65F6\u95F4)","gitHead":"9092384bf6b7efd6ec71bbcdec1b801a0079c403","_from":"@antv/g-canvas@0.4.15","_resolved":"https://registry.npmmirror.com/@antv/g-canvas/-/g-canvas-0.4.15.tgz"}')},5162:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(44614),I=d(25940),P=d(25250),_=d(30570),T=d(16717),M=d(80995),A=d(33663),p=function(w){L.__extends(y,w);function y(){return w!==null&&w.apply(this,arguments)||this}return y.prototype.getDefaultCfg=function(){var b=w.prototype.getDefaultCfg.call(this);return b.renderer="canvas",b.autoDraw=!0,b.localRefresh=!0,b.refreshElements=[],b.clipView=!0,b.quickHit=!1,b},y.prototype.onCanvasChange=function(b){(b==="attr"||b==="sort"||b==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},y.prototype.getShapeBase=function(){return _},y.prototype.getGroupBase=function(){return T.default},y.prototype.getPixelRatio=function(){var b=this.get("pixelRatio")||M.getPixelRatio();return b>=1?Math.ceil(b):1},y.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},y.prototype.createDom=function(){var b=document.createElement("canvas"),x=b.getContext("2d");return this.set("context",x),b},y.prototype.setDOMSize=function(b,x){w.prototype.setDOMSize.call(this,b,x);var E=this.get("context"),k=this.get("el"),D=this.getPixelRatio();k.width=D*b,k.height=D*x,D>1&&E.scale(D,D)},y.prototype.clear=function(){w.prototype.clear.call(this),this._clearFrame();var b=this.get("context"),x=this.get("el");b.clearRect(0,0,x.width,x.height)},y.prototype.getShape=function(b,x){var E;return this.get("quickHit")?E=P.getShape(this,b,x):E=w.prototype.getShape.call(this,b,x,null),E},y.prototype._getRefreshRegion=function(){var b=this.get("refreshElements"),x=this.getViewRange(),E;if(b.length&&b[0]===this)E=x;else if(E=A.getMergedRegion(b),E){E.minX=Math.floor(E.minX),E.minY=Math.floor(E.minY),E.maxX=Math.ceil(E.maxX),E.maxY=Math.ceil(E.maxY),E.maxY+=1;var k=this.get("clipView");k&&(E=A.mergeView(E,x))}return E},y.prototype.refreshElement=function(b){var x=this.get("refreshElements");x.push(b)},y.prototype._clearFrame=function(){var b=this.get("drawFrame");b&&(M.clearAnimationFrame(b),this.set("drawFrame",null),this.set("refreshElements",[]))},y.prototype.draw=function(){var b=this.get("drawFrame");this.get("autoDraw")&&b||this._startDraw()},y.prototype._drawAll=function(){var b=this.get("context"),x=this.get("el"),E=this.getChildren();b.clearRect(0,0,x.width,x.height),A.applyAttrsToContext(b,this),A.drawChildren(b,E),this.set("refreshElements",[])},y.prototype._drawRegion=function(){var b=this.get("context"),x=this.get("refreshElements"),E=this.getChildren(),k=this._getRefreshRegion();k?(b.clearRect(k.minX,k.minY,k.maxX-k.minX,k.maxY-k.minY),b.save(),b.beginPath(),b.rect(k.minX,k.minY,k.maxX-k.minX,k.maxY-k.minY),b.clip(),A.applyAttrsToContext(b,this),A.checkRefresh(this,E,k),A.drawChildren(b,E,k),b.restore()):x.length&&A.clearChanged(x),M.each(x,function(D){D.get("hasChanged")&&D.set("hasChanged",!1)}),this.set("refreshElements",[])},y.prototype._startDraw=function(){var b=this,x=this.get("drawFrame");x||(x=M.requestAnimationFrame(function(){b.get("localRefresh")?b._drawRegion():b._drawAll(),b.set("drawFrame",null)}),this.set("drawFrame",x))},y.prototype.skipDraw=function(){},y.prototype.removeDom=function(){var b=this.get("el");b.width=0,b.height=0,b.parentNode.removeChild(b)},y}(I.AbstractCanvas);S.Z=p},16717:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(25940),I=d(30570),P=d(33663),_=d(26169),T=d(80995),M=function(A){m.__extends(p,A);function p(){return A!==null&&A.apply(this,arguments)||this}return p.prototype.onCanvasChange=function(w){P.refreshElement(this,w)},p.prototype.getShapeBase=function(){return I},p.prototype.getGroupBase=function(){return p},p.prototype._applyClip=function(w,y){y&&(w.save(),P.applyAttrsToContext(w,y),y.createPath(w),w.restore(),w.clip(),y._afterDraw())},p.prototype.cacheCanvasBBox=function(){var w=this.cfg.children,y=[],b=[];_.each(w,function(X){var U=X.cfg.cacheCanvasBBox;U&&X.cfg.isInView&&(y.push(U.minX,U.maxX),b.push(U.minY,U.maxY))});var x=null;if(y.length){var E=_.min(y),k=_.max(y),D=_.min(b),N=_.max(b);x={minX:E,minY:D,x:E,y:D,maxX:k,maxY:N,width:k-E,height:N-D};var z=this.cfg.canvas;if(z){var W=z.getViewRange();this.set("isInView",T.intersectRect(x,W))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",x)},p.prototype.draw=function(w,y){var b=this.cfg.children,x=y?this.cfg.refresh:!0;b.length&&x&&(w.save(),P.applyAttrsToContext(w,this),this._applyClip(w,this.getClip()),P.drawChildren(w,b,y),w.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},p.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},p}(L.AbstractGroup);S.default=M},19585:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(25940),I=d(80995),P=d(33663),_=d(25940),T=d(30570),M=d(16717),A=function(p){m.__extends(w,p);function w(){return p!==null&&p.apply(this,arguments)||this}return w.prototype.getDefaultAttrs=function(){var y=p.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},y),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},w.prototype.getShapeBase=function(){return T},w.prototype.getGroupBase=function(){return M.default},w.prototype.onCanvasChange=function(y){P.refreshElement(this,y)},w.prototype.calculateBBox=function(){var y=this.get("type"),b=this.getHitLineWidth(),x=_.getBBoxMethod(y),E=x(this),k=b/2,D=E.x-k,N=E.y-k,z=E.x+E.width+k,W=E.y+E.height+k;return{x:D,minX:D,y:N,minY:N,width:E.width+b,height:E.height+b,maxX:z,maxY:W}},w.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},w.prototype.isStroke=function(){return!!this.attrs.stroke},w.prototype._applyClip=function(y,b){b&&(y.save(),P.applyAttrsToContext(y,b),b.createPath(y),y.restore(),y.clip(),b._afterDraw())},w.prototype.draw=function(y,b){var x=this.cfg.clipShape;if(b){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var E=this.getCanvasBBox();if(!I.intersectRect(b,E)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}y.save(),P.applyAttrsToContext(y,this),this._applyClip(y,x),this.drawPath(y),y.restore(),this._afterDraw()},w.prototype.getCanvasViewBox=function(){var y=this.cfg.canvas;return y?y.getViewRange():null},w.prototype.cacheCanvasBBox=function(){var y=this.getCanvasViewBox();if(y){var b=this.getCanvasBBox(),x=I.intersectRect(b,y);this.set("isInView",x),x?this.set("cacheCanvasBBox",b):this.set("cacheCanvasBBox",null)}},w.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},w.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},w.prototype.drawPath=function(y){this.createPath(y),this.strokeAndFill(y),this.afterDrawPath(y)},w.prototype.fill=function(y){y.fill()},w.prototype.stroke=function(y){y.stroke()},w.prototype.strokeAndFill=function(y){var b=this.attrs,x=b.lineWidth,E=b.opacity,k=b.strokeOpacity,D=b.fillOpacity;this.isFill()&&(!I.isNil(D)&&D!==1?(y.globalAlpha=D,this.fill(y),y.globalAlpha=E):this.fill(y)),this.isStroke()&&x>0&&(!I.isNil(k)&&k!==1&&(y.globalAlpha=k),this.stroke(y)),this.afterDrawPath(y)},w.prototype.createPath=function(y){},w.prototype.afterDrawPath=function(y){},w.prototype.isInShape=function(y,b){var x=this.isStroke(),E=this.isFill(),k=this.getHitLineWidth();return this.isInStrokeOrPath(y,b,x,E,k)},w.prototype.isInStrokeOrPath=function(y,b,x,E,k){return!1},w.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var y=this.attrs;return y.lineWidth+y.lineAppendWidth},w}(L.AbstractShape);S.default=A},10741:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(19585),I=d(80995),P=function(_){m.__extends(T,_);function T(){return _!==null&&_.apply(this,arguments)||this}return T.prototype.getDefaultAttrs=function(){var M=_.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},M),{x:0,y:0,r:0})},T.prototype.isInStrokeOrPath=function(M,A,p,w,y){var b=this.attr(),x=b.x,E=b.y,k=b.r,D=y/2,N=I.distance(x,E,M,A);return w&&p?N<=k+D:w?N<=k:p?N>=k-D&&N<=k+D:!1},T.prototype.createPath=function(M){var A=this.attr(),p=A.x,w=A.y,y=A.r;M.beginPath(),M.arc(p,w,y,0,Math.PI*2,!1),M.closePath()},T}(L.default);S.default=P},70946:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(19585);function I(_,T,M,A){return _/(M*M)+T/(A*A)}var P=function(_){m.__extends(T,_);function T(){return _!==null&&_.apply(this,arguments)||this}return T.prototype.getDefaultAttrs=function(){var M=_.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},M),{x:0,y:0,rx:0,ry:0})},T.prototype.isInStrokeOrPath=function(M,A,p,w,y){var b=this.attr(),x=y/2,E=b.x,k=b.y,D=b.rx,N=b.ry,z=(M-E)*(M-E),W=(A-k)*(A-k);return w&&p?I(z,W,D+x,N+x)<=1:w?I(z,W,D,N)<=1:p?I(z,W,D-x,N-x)>=1&&I(z,W,D+x,N+x)<=1:!1},T.prototype.createPath=function(M){var A=this.attr(),p=A.x,w=A.y,y=A.rx,b=A.ry;if(M.beginPath(),M.ellipse)M.ellipse(p,w,y,b,0,0,Math.PI*2,!1);else{var x=y>b?y:b,E=y>b?1:y/b,k=y>b?b/y:1;M.save(),M.translate(p,w),M.scale(E,k),M.arc(0,0,x,0,Math.PI*2),M.restore(),M.closePath()}},T}(L.default);S.default=P},74168:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(19585),I=d(80995);function P(T){return T instanceof HTMLElement&&I.isString(T.nodeName)&&T.nodeName.toUpperCase()==="CANVAS"}var _=function(T){m.__extends(M,T);function M(){return T!==null&&T.apply(this,arguments)||this}return M.prototype.getDefaultAttrs=function(){var A=T.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},A),{x:0,y:0,width:0,height:0})},M.prototype.initAttrs=function(A){this._setImage(A.img)},M.prototype.isStroke=function(){return!1},M.prototype.isOnlyHitBox=function(){return!0},M.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var A=this.get("canvas");A?A.draw():this.createPath(this.get("context"))}},M.prototype._setImage=function(A){var p=this,w=this.attrs;if(I.isString(A)){var y=new Image;y.onload=function(){if(p.destroyed)return!1;p.attr("img",y),p.set("loading",!1),p._afterLoading();var b=p.get("callback");b&&b.call(p)},y.crossOrigin="Anonymous",y.src=A,this.set("loading",!0)}else A instanceof Image?(w.width||(w.width=A.width),w.height||(w.height=A.height)):P(A)&&(w.width||(w.width=Number(A.getAttribute("width"))),w.height||(w.height,Number(A.getAttribute("height"))))},M.prototype.onAttrChange=function(A,p,w){T.prototype.onAttrChange.call(this,A,p,w),A==="img"&&this._setImage(p)},M.prototype.createPath=function(A){if(this.get("loading")){this.set("toDraw",!0),this.set("context",A);return}var p=this.attr(),w=p.x,y=p.y,b=p.width,x=p.height,E=p.sx,k=p.sy,D=p.swidth,N=p.sheight,z=p.img;(z instanceof Image||P(z))&&(!I.isNil(E)&&!I.isNil(k)&&!I.isNil(D)&&!I.isNil(N)?A.drawImage(z,E,k,D,N,w,y,b,x):A.drawImage(z,w,y,b,x))},M}(L.default);S.default=_},30570:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Text=S.Rect=S.Polyline=S.Polygon=S.Path=S.Marker=S.Line=S.Image=S.Ellipse=S.Circle=S.Base=void 0;var m=d(19585);Object.defineProperty(S,"Base",{enumerable:!0,get:function(){return m.default}});var L=d(10741);Object.defineProperty(S,"Circle",{enumerable:!0,get:function(){return L.default}});var I=d(70946);Object.defineProperty(S,"Ellipse",{enumerable:!0,get:function(){return I.default}});var P=d(74168);Object.defineProperty(S,"Image",{enumerable:!0,get:function(){return P.default}});var _=d(75692);Object.defineProperty(S,"Line",{enumerable:!0,get:function(){return _.default}});var T=d(86734);Object.defineProperty(S,"Marker",{enumerable:!0,get:function(){return T.default}});var M=d(52124);Object.defineProperty(S,"Path",{enumerable:!0,get:function(){return M.default}});var A=d(72610);Object.defineProperty(S,"Polygon",{enumerable:!0,get:function(){return A.default}});var p=d(74031);Object.defineProperty(S,"Polyline",{enumerable:!0,get:function(){return p.default}});var w=d(59254);Object.defineProperty(S,"Rect",{enumerable:!0,get:function(){return w.default}});var y=d(80236);Object.defineProperty(S,"Text",{enumerable:!0,get:function(){return y.default}})},75692:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(51824),I=d(19585),P=d(82897),_=d(48237),T=function(M){m.__extends(A,M);function A(){return M!==null&&M.apply(this,arguments)||this}return A.prototype.getDefaultAttrs=function(){var p=M.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},p),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},A.prototype.initAttrs=function(p){this.setArrow()},A.prototype.onAttrChange=function(p,w,y){M.prototype.onAttrChange.call(this,p,w,y),this.setArrow()},A.prototype.setArrow=function(){var p=this.attr(),w=p.x1,y=p.y1,b=p.x2,x=p.y2,E=p.startArrow,k=p.endArrow;E&&_.addStartArrow(this,p,b,x,w,y),k&&_.addEndArrow(this,p,w,y,b,x)},A.prototype.isInStrokeOrPath=function(p,w,y,b,x){if(!y||!x)return!1;var E=this.attr(),k=E.x1,D=E.y1,N=E.x2,z=E.y2;return P.default(k,D,N,z,x,p,w)},A.prototype.createPath=function(p){var w=this.attr(),y=w.x1,b=w.y1,x=w.x2,E=w.y2,k=w.startArrow,D=w.endArrow,N={dx:0,dy:0},z={dx:0,dy:0};k&&k.d&&(N=_.getShortenOffset(y,b,x,E,w.startArrow.d)),D&&D.d&&(z=_.getShortenOffset(y,b,x,E,w.endArrow.d)),p.beginPath(),p.moveTo(y+N.dx,b+N.dy),p.lineTo(x-z.dx,E-z.dy)},A.prototype.afterDrawPath=function(p){var w=this.get("startArrowShape"),y=this.get("endArrowShape");w&&w.draw(p),y&&y.draw(p)},A.prototype.getTotalLength=function(){var p=this.attr(),w=p.x1,y=p.y1,b=p.x2,x=p.y2;return L.Line.length(w,y,b,x)},A.prototype.getPoint=function(p){var w=this.attr(),y=w.x1,b=w.y1,x=w.x2,E=w.y2;return L.Line.pointAt(y,b,x,E,p)},A}(I.default);S.default=T},86734:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(62029),P=d(19585),_=d(80995),T=d(33663),M={circle:function(p,w,y){return[["M",p-y,w],["A",y,y,0,1,0,p+y,w],["A",y,y,0,1,0,p-y,w]]},square:function(p,w,y){return[["M",p-y,w-y],["L",p+y,w-y],["L",p+y,w+y],["L",p-y,w+y],["Z"]]},diamond:function(p,w,y){return[["M",p-y,w],["L",p,w-y],["L",p+y,w],["L",p,w+y],["Z"]]},triangle:function(p,w,y){var b=y*Math.sin(1/3*Math.PI);return[["M",p-y,w+b],["L",p,w-b],["L",p+y,w+b],["Z"]]},"triangle-down":function(p,w,y){var b=y*Math.sin(1/3*Math.PI);return[["M",p-y,w-b],["L",p+y,w-b],["L",p,w+b],["Z"]]}},A=function(p){m.__extends(w,p);function w(){return p!==null&&p.apply(this,arguments)||this}return w.prototype.initAttrs=function(y){this._resetParamsCache()},w.prototype._resetParamsCache=function(){this.set("paramsCache",{})},w.prototype.onAttrChange=function(y,b,x){p.prototype.onAttrChange.call(this,y,b,x),["symbol","x","y","r","radius"].indexOf(y)!==-1&&this._resetParamsCache()},w.prototype.isOnlyHitBox=function(){return!0},w.prototype._getR=function(y){return L.isNil(y.r)?y.radius:y.r},w.prototype._getPath=function(){var y=this.attr(),b=y.x,x=y.y,E=y.symbol||"circle",k=this._getR(y),D,N;if(_.isFunction(E))D=E,N=D(b,x,k),N=I.path2Absolute(N);else{if(D=w.Symbols[E],!D)return console.warn(E+" marker is not supported."),null;N=D(b,x,k)}return N},w.prototype.createPath=function(y){var b=this._getPath(),x=this.get("paramsCache");T.drawPath(this,y,{path:b},x)},w.Symbols=M,w}(P.default);S.default=A},52124:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(51824),I=d(26169),P=d(19585),_=d(62029),T=d(33663),M=d(90978),A=d(5169),p=d(40371),w=d(48237);function y(x,E,k){for(var D=!1,N=0;N<x.length;N++){var z=x[N];if(D=A.default(z,E,k),D)break}return D}var b=function(x){m.__extends(E,x);function E(){return x!==null&&x.apply(this,arguments)||this}return E.prototype.getDefaultAttrs=function(){var k=x.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},k),{startArrow:!1,endArrow:!1})},E.prototype.initAttrs=function(k){this._setPathArr(k.path),this.setArrow()},E.prototype.onAttrChange=function(k,D,N){x.prototype.onAttrChange.call(this,k,D,N),k==="path"&&this._setPathArr(D),this.setArrow()},E.prototype._setPathArr=function(k){this.attrs.path=_.path2Absolute(k);var D=p.default.hasArc(k);this.set("hasArc",D),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},E.prototype.getSegments=function(){var k=this.get("segements");return k||(k=_.path2Segments(this.attr("path")),this.set("segments",k)),k},E.prototype.setArrow=function(){var k=this.attr(),D=k.startArrow,N=k.endArrow;if(D){var z=this.getStartTangent();w.addStartArrow(this,k,z[0][0],z[0][1],z[1][0],z[1][1])}if(N){var z=this.getEndTangent();w.addEndArrow(this,k,z[0][0],z[0][1],z[1][0],z[1][1])}},E.prototype.isInStrokeOrPath=function(k,D,N,z,W){var X=this.getSegments(),U=this.get("hasArc"),et=!1;if(N){var Q=this.getTotalLength();et=p.default.isPointInStroke(X,W,k,D,Q)}if(!et&&z)if(U)et=M.default(this,k,D);else{var ct=this.attr("path"),Lt=p.default.extractPolygons(ct);et=y(Lt.polygons,k,D)||y(Lt.polylines,k,D)}return et},E.prototype.createPath=function(k){var D=this.attr(),N=this.get("paramsCache");T.drawPath(this,k,D,N)},E.prototype.afterDrawPath=function(k){var D=this.get("startArrowShape"),N=this.get("endArrowShape");D&&D.draw(k),N&&N.draw(k)},E.prototype.getTotalLength=function(){var k=this.get("totalLength");return I.isNil(k)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):k},E.prototype.getPoint=function(k){var D=this.get("tCache");D||(this._calculateCurve(),this._setTcache(),D=this.get("tCache"));var N,z,W=this.get("curve");if(!D||D.length===0)return W?{x:W[0][1],y:W[0][2]}:null;I.each(D,function(Q,ct){k>=Q[0]&&k<=Q[1]&&(N=(k-Q[0])/(Q[1]-Q[0]),z=ct)});var X=W[z];if(I.isNil(X)||I.isNil(z))return null;var U=X.length,et=W[z+1];return L.Cubic.pointAt(X[U-2],X[U-1],et[1],et[2],et[3],et[4],et[5],et[6],N)},E.prototype._calculateCurve=function(){var k=this.attr().path;this.set("curve",p.default.pathToCurve(k))},E.prototype._setTcache=function(){var k=0,D=0,N=[],z,W,X,U,et=this.get("curve");if(!!et){if(I.each(et,function(Q,ct){X=et[ct+1],U=Q.length,X&&(k+=L.Cubic.length(Q[U-2],Q[U-1],X[1],X[2],X[3],X[4],X[5],X[6])||0)}),this.set("totalLength",k),k===0){this.set("tCache",[]);return}I.each(et,function(Q,ct){X=et[ct+1],U=Q.length,X&&(z=[],z[0]=D/k,W=L.Cubic.length(Q[U-2],Q[U-1],X[1],X[2],X[3],X[4],X[5],X[6]),D+=W||0,z[1]=D/k,N.push(z))}),this.set("tCache",N)}},E.prototype.getStartTangent=function(){var k=this.getSegments(),D;if(k.length>1){var N=k[0].currentPoint,z=k[1].currentPoint,W=k[1].startTangent;D=[],W?(D.push([N[0]-W[0],N[1]-W[1]]),D.push([N[0],N[1]])):(D.push([z[0],z[1]]),D.push([N[0],N[1]]))}return D},E.prototype.getEndTangent=function(){var k=this.getSegments(),D=k.length,N;if(D>1){var z=k[D-2].currentPoint,W=k[D-1].currentPoint,X=k[D-1].endTangent;N=[],X?(N.push([W[0]-X[0],W[1]-X[1]]),N.push([W[0],W[1]])):(N.push([z[0],z[1]]),N.push([W[0],W[1]]))}return N},E}(P.default);S.default=b},72610:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(19585),I=d(81543),P=d(5169),_=function(T){m.__extends(M,T);function M(){return T!==null&&T.apply(this,arguments)||this}return M.prototype.isInStrokeOrPath=function(A,p,w,y,b){var x=this.attr().points,E=!1;return w&&(E=I.default(x,b,A,p,!0)),!E&&y&&(E=P.default(x,A,p)),E},M.prototype.createPath=function(A){var p=this.attr(),w=p.points;if(!(w.length<2)){A.beginPath();for(var y=0;y<w.length;y++){var b=w[y];y===0?A.moveTo(b[0],b[1]):A.lineTo(b[0],b[1])}A.closePath()}},M}(L.default);S.default=_},74031:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(51824),I=d(51824),P=d(26169),_=d(19585),T=d(81543),M=d(48237),A=function(p){m.__extends(w,p);function w(){return p!==null&&p.apply(this,arguments)||this}return w.prototype.getDefaultAttrs=function(){var y=p.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},y),{startArrow:!1,endArrow:!1})},w.prototype.initAttrs=function(y){this.setArrow()},w.prototype.onAttrChange=function(y,b,x){p.prototype.onAttrChange.call(this,y,b,x),this.setArrow(),["points"].indexOf(y)!==-1&&this._resetCache()},w.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},w.prototype.setArrow=function(){var y=this.attr(),b=this.attrs,x=b.points,E=b.startArrow,k=b.endArrow,D=x.length,N=x[0][0],z=x[0][1],W=x[D-1][0],X=x[D-1][1];E&&M.addStartArrow(this,y,x[1][0],x[1][1],N,z),k&&M.addEndArrow(this,y,x[D-2][0],x[D-2][1],W,X)},w.prototype.isFill=function(){return!1},w.prototype.isInStrokeOrPath=function(y,b,x,E,k){if(!x||!k)return!1;var D=this.attr().points;return T.default(D,k,y,b,!1)},w.prototype.isStroke=function(){return!0},w.prototype.createPath=function(y){var b=this.attr(),x=b.points,E=b.startArrow,k=b.endArrow,D=x.length;if(!(x.length<2)){var N=x[0][0],z=x[0][1],W=x[D-1][0],X=x[D-1][1];if(E&&E.d){var U=M.getShortenOffset(N,z,x[1][0],x[1][1],E.d);N+=U.dx,z+=U.dy}if(k&&k.d){var U=M.getShortenOffset(x[D-2][0],x[D-2][1],W,X,k.d);W-=U.dx,X-=U.dy}y.beginPath(),y.moveTo(N,z);for(var et=0;et<D-1;et++){var Q=x[et];y.lineTo(Q[0],Q[1])}y.lineTo(W,X)}},w.prototype.afterDrawPath=function(y){var b=this.get("startArrowShape"),x=this.get("endArrowShape");b&&b.draw(y),x&&x.draw(y)},w.prototype.getTotalLength=function(){var y=this.attr().points,b=this.get("totalLength");return P.isNil(b)?(this.set("totalLength",I.Polyline.length(y)),this.get("totalLength")):b},w.prototype.getPoint=function(y){var b=this.attr().points,x=this.get("tCache");x||(this._setTcache(),x=this.get("tCache"));var E,k;return P.each(x,function(D,N){y>=D[0]&&y<=D[1]&&(E=(y-D[0])/(D[1]-D[0]),k=N)}),L.Line.pointAt(b[k][0],b[k][1],b[k+1][0],b[k+1][1],E)},w.prototype._setTcache=function(){var y=this.attr().points;if(!(!y||y.length===0)){var b=this.getTotalLength();if(!(b<=0)){var x=0,E=[],k,D;P.each(y,function(N,z){y[z+1]&&(k=[],k[0]=x/b,D=L.Line.length(N[0],N[1],y[z+1][0],y[z+1][1]),x+=D,k[1]=x/b,E.push(k))}),this.set("tCache",E)}}},w.prototype.getStartTangent=function(){var y=this.attr().points,b=[];return b.push([y[1][0],y[1][1]]),b.push([y[0][0],y[0][1]]),b},w.prototype.getEndTangent=function(){var y=this.attr().points,b=y.length-1,x=[];return x.push([y[b-1][0],y[b-1][1]]),x.push([y[b][0],y[b][1]]),x},w}(_.default);S.default=A},59254:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(19585),I=d(99425),P=d(80995),_=d(12684),T=d(26086),M=d(90978),A=function(p){m.__extends(w,p);function w(){return p!==null&&p.apply(this,arguments)||this}return w.prototype.getDefaultAttrs=function(){var y=p.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},y),{x:0,y:0,width:0,height:0,radius:0})},w.prototype.isInStrokeOrPath=function(y,b,x,E,k){var D=this.attr(),N=D.x,z=D.y,W=D.width,X=D.height,U=D.radius;if(U){var Q=!1;return x&&(Q=T.default(N,z,W,X,U,k,y,b)),!Q&&E&&(Q=M.default(this,y,b)),Q}else{var et=k/2;if(E&&x)return P.inBox(N-et,z-et,W+et,X+et,y,b);if(E)return P.inBox(N,z,W,X,y,b);if(x)return _.default(N,z,W,X,k,y,b)}},w.prototype.createPath=function(y){var b=this.attr(),x=b.x,E=b.y,k=b.width,D=b.height,N=b.radius;if(y.beginPath(),N===0)y.rect(x,E,k,D);else{var z=I.parseRadius(N),W=z[0],X=z[1],U=z[2],et=z[3];y.moveTo(x+W,E),y.lineTo(x+k-X,E),X!==0&&y.arc(x+k-X,E+X,X,-Math.PI/2,0),y.lineTo(x+k,E+D-U),U!==0&&y.arc(x+k-U,E+D-U,U,0,Math.PI/2),y.lineTo(x+et,E+D),et!==0&&y.arc(x+et,E+D-et,et,Math.PI/2,Math.PI),y.lineTo(x,E+W),W!==0&&y.arc(x+W,E+W,W,Math.PI,Math.PI*1.5),y.closePath()}},w}(L.default);S.default=A},80236:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(19585),I=d(80995),P=d(25940),_=function(T){m.__extends(M,T);function M(){return T!==null&&T.apply(this,arguments)||this}return M.prototype.getDefaultAttrs=function(){var A=T.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},A),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},M.prototype.isOnlyHitBox=function(){return!0},M.prototype.initAttrs=function(A){this._assembleFont(),A.text&&this._setText(A.text)},M.prototype._assembleFont=function(){var A=this.attrs;A.font=P.assembleFont(A)},M.prototype._setText=function(A){var p=null;I.isString(A)&&A.indexOf(`
`)!==-1&&(p=A.split(`
`)),this.set("textArr",p)},M.prototype.onAttrChange=function(A,p,w){T.prototype.onAttrChange.call(this,A,p,w),A.startsWith("font")&&this._assembleFont(),A==="text"&&this._setText(p)},M.prototype._getSpaceingY=function(){var A=this.attrs,p=A.lineHeight,w=A.fontSize*1;return p?p-w:w*.14},M.prototype._drawTextArr=function(A,p,w){var y=this.attrs,b=y.textBaseline,x=y.x,E=y.y,k=y.fontSize*1,D=this._getSpaceingY(),N=P.getTextHeight(y.text,y.fontSize,y.lineHeight),z;I.each(p,function(W,X){z=E+X*(D+k)-N+k,b==="middle"&&(z+=N-k-(N-k)/2),b==="top"&&(z+=N-k),I.isNil(W)||(w?A.fillText(W,x,z):A.strokeText(W,x,z))})},M.prototype._drawText=function(A,p){var w=this.attr(),y=w.x,b=w.y,x=this.get("textArr");if(x)this._drawTextArr(A,x,p);else{var E=w.text;I.isNil(E)||(p?A.fillText(E,y,b):A.strokeText(E,y,b))}},M.prototype.strokeAndFill=function(A){var p=this.attrs,w=p.lineWidth,y=p.opacity,b=p.strokeOpacity,x=p.fillOpacity;this.isStroke()&&w>0&&(!I.isNil(b)&&b!==1&&(A.globalAlpha=y),this.stroke(A)),this.isFill()&&(!I.isNil(x)&&x!==1?(A.globalAlpha=x,this.fill(A),A.globalAlpha=y):this.fill(A)),this.afterDrawPath(A)},M.prototype.fill=function(A){this._drawText(A,!0)},M.prototype.stroke=function(A){this._drawText(A,!1)},M}(L.default);S.default=_},83804:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(80995);function L(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])}function I(T,M){return L(T)*L(M)?(T[0]*M[0]+T[1]*M[1])/(L(T)*L(M)):1}function P(T,M){return(T[0]*M[1]<T[1]*M[0]?-1:1)*Math.acos(I(T,M))}function _(T,M){var A=M[1],p=M[2],w=m.mod(m.toRadian(M[3]),Math.PI*2),y=M[4],b=M[5],x=T[0],E=T[1],k=M[6],D=M[7],N=Math.cos(w)*(x-k)/2+Math.sin(w)*(E-D)/2,z=-1*Math.sin(w)*(x-k)/2+Math.cos(w)*(E-D)/2,W=N*N/(A*A)+z*z/(p*p);W>1&&(A*=Math.sqrt(W),p*=Math.sqrt(W));var X=A*A*(z*z)+p*p*(N*N),U=X?Math.sqrt((A*A*(p*p)-X)/X):1;y===b&&(U*=-1),isNaN(U)&&(U=0);var et=p?U*A*z/p:0,Q=A?U*-p*N/A:0,ct=(x+k)/2+Math.cos(w)*et-Math.sin(w)*Q,Lt=(E+D)/2+Math.sin(w)*et+Math.cos(w)*Q,_t=[(N-et)/A,(z-Q)/p],yt=[(-1*N-et)/A,(-1*z-Q)/p],bt=P([1,0],_t),Mt=P(_t,yt);return I(_t,yt)<=-1&&(Mt=Math.PI),I(_t,yt)>=1&&(Mt=0),b===0&&Mt>0&&(Mt=Mt-2*Math.PI),b===1&&Mt<0&&(Mt=Mt+2*Math.PI),{cx:ct,cy:Lt,rx:m.isSamePoint(T,[k,D])?0:A,ry:m.isSamePoint(T,[k,D])?0:p,startAngle:bt,endAngle:bt+Mt,xRotation:w,arcFlag:y,sweepFlag:b}}S.default=_},48237:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.addEndArrow=S.addStartArrow=S.getShortenOffset=void 0;var m=d(44614),L=d(30570),I=Math.sin,P=Math.cos,_=Math.atan2,T=Math.PI;function M(b,x,E,k,D,N,z){var W=x.stroke,X=x.lineWidth,U=E-D,et=k-N,Q=_(et,U),ct=new L.Path({type:"path",canvas:b.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*P(T/6)+","+10*I(T/6)+" L0,0 L"+10*P(T/6)+",-"+10*I(T/6),stroke:W,lineWidth:X}});ct.translate(D,N),ct.rotateAtPoint(D,N,Q),b.set(z?"startArrowShape":"endArrowShape",ct)}function A(b,x,E,k,D,N,z){var W=x.startArrow,X=x.endArrow,U=x.stroke,et=x.lineWidth,Q=z?W:X,ct=Q.d,Lt=Q.fill,_t=Q.stroke,yt=Q.lineWidth,bt=m.__rest(Q,["d","fill","stroke","lineWidth"]),Mt=E-D,xt=k-N,Bt=_(xt,Mt);ct&&(D=D-P(Bt)*ct,N=N-I(Bt)*ct);var wt=new L.Path({type:"path",canvas:b.get("canvas"),isArrowShape:!0,attrs:m.__assign(m.__assign({},bt),{stroke:_t||U,lineWidth:yt||et,fill:Lt})});wt.translate(D,N),wt.rotateAtPoint(D,N,Bt),b.set(z?"startArrowShape":"endArrowShape",wt)}function p(b,x,E,k,D){var N=_(k-x,E-b);return{dx:P(N)*D,dy:I(N)*D}}S.getShortenOffset=p;function w(b,x,E,k,D,N){typeof x.startArrow=="object"?A(b,x,E,k,D,N,!0):x.startArrow?M(b,x,E,k,D,N,!0):b.set("startArrowShape",null)}S.addStartArrow=w;function y(b,x,E,k,D,N){typeof x.endArrow=="object"?A(b,x,E,k,D,N,!1):x.endArrow?M(b,x,E,k,D,N,!1):b.set("startArrowShape",null)}S.addEndArrow=y},33663:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.mergeView=S.getMergedRegion=S.getRefreshRegion=S.refreshElement=S.drawPath=S.clearChanged=S.checkChildrenRefresh=S.checkRefresh=S.drawChildren=S.applyAttrsToContext=void 0;var m=d(26169),L=d(99425),I=d(83804),P=d(80995),_=d(48237),T={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function M(W,X){var U=X.attr();for(var et in U){var Q=U[et],ct=T[et]?T[et]:et;ct==="matrix"&&Q?W.transform(Q[0],Q[1],Q[3],Q[4],Q[6],Q[7]):ct==="lineDash"&&W.setLineDash?m.isArray(Q)&&W.setLineDash(Q):(ct==="strokeStyle"||ct==="fillStyle"?Q=L.parseStyle(W,X,Q):ct==="globalAlpha"&&(Q=Q*W.globalAlpha),W[ct]=Q)}}S.applyAttrsToContext=M;function A(W,X,U){for(var et=0;et<X.length;et++){var Q=X[et];Q.cfg.visible?Q.draw(W,U):Q.skipDraw()}}S.drawChildren=A;function p(W,X,U){var et=W.get("refreshElements");m.each(et,function(Q){if(Q!==W)for(var ct=Q.cfg.parent;ct&&ct!==W&&!ct.cfg.refresh;)ct.cfg.refresh=!0,ct=ct.cfg.parent}),et[0]===W?b(X,U):w(X,U)}S.checkRefresh=p;function w(W,X){for(var U=0;U<W.length;U++){var et=W[U];if(et.cfg.visible)if(et.cfg.hasChanged)et.cfg.refresh=!0,et.isGroup()&&b(et.cfg.children,X);else if(et.cfg.refresh)et.isGroup()&&w(et.cfg.children,X);else{var Q=x(et,X);et.cfg.refresh=Q,Q&&et.isGroup()&&w(et.cfg.children,X)}}}S.checkChildrenRefresh=w;function y(W){for(var X=0;X<W.length;X++){var U=W[X];U.cfg.hasChanged=!1,U.isGroup()&&!U.destroyed&&y(U.cfg.children)}}S.clearChanged=y;function b(W,X){for(var U=0;U<W.length;U++){var et=W[U];et.cfg.refresh=!0,et.isGroup()&&b(et.get("children"),X)}}function x(W,X){var U=W.cfg.cacheCanvasBBox,et=W.cfg.isInView&&U&&P.intersectRect(U,X);return et}function E(W,X,U,et){var Q=U.path,ct=U.startArrow,Lt=U.endArrow;if(!!Q){var _t=[0,0],yt=[0,0],bt={dx:0,dy:0};X.beginPath();for(var Mt=0;Mt<Q.length;Mt++){var xt=Q[Mt],Bt=xt[0];if(Mt===0&&ct&&ct.d){var wt=W.getStartTangent();bt=_.getShortenOffset(wt[0][0],wt[0][1],wt[1][0],wt[1][1],ct.d)}else if(Mt===Q.length-2&&Q[Mt+1][0]==="Z"&&Lt&&Lt.d){var H=Q[Mt+1];if(H[0]==="Z"){var wt=W.getEndTangent();bt=_.getShortenOffset(wt[0][0],wt[0][1],wt[1][0],wt[1][1],Lt.d)}}else if(Mt===Q.length-1&&Lt&&Lt.d&&Q[0]!=="Z"){var wt=W.getEndTangent();bt=_.getShortenOffset(wt[0][0],wt[0][1],wt[1][0],wt[1][1],Lt.d)}var K=bt.dx,B=bt.dy;switch(Bt){case"M":X.moveTo(xt[1]-K,xt[2]-B),yt=[xt[1],xt[2]];break;case"L":X.lineTo(xt[1]-K,xt[2]-B);break;case"Q":X.quadraticCurveTo(xt[1],xt[2],xt[3]-K,xt[4]-B);break;case"C":X.bezierCurveTo(xt[1],xt[2],xt[3],xt[4],xt[5]-K,xt[6]-B);break;case"A":{var h=void 0;et?(h=et[Mt],h||(h=I.default(_t,xt),et[Mt]=h)):h=I.default(_t,xt);var mt=h.cx,gt=h.cy,Vt=h.rx,Jt=h.ry,zt=h.startAngle,Qt=h.endAngle,oe=h.xRotation,se=h.sweepFlag;if(X.ellipse)X.ellipse(mt,gt,Vt,Jt,oe,zt,Qt,1-se);else{var jt=Vt>Jt?Vt:Jt,Pt=Vt>Jt?1:Vt/Jt,pt=Vt>Jt?Jt/Vt:1;X.translate(mt,gt),X.rotate(oe),X.scale(Pt,pt),X.arc(0,0,jt,zt,Qt,1-se),X.scale(1/Pt,1/pt),X.rotate(-oe),X.translate(-mt,-gt)}break}case"Z":X.closePath();break;default:break}if(Bt==="Z")_t=yt;else{var st=xt.length;_t=[xt[st-2],xt[st-1]]}}}}S.drawPath=E;function k(W,X){var U=W.get("canvas");U&&(X==="remove"&&(W._cacheCanvasBBox=W.get("cacheCanvasBBox")),W.get("hasChanged")||(W.set("hasChanged",!0),W.cfg.parent&&W.cfg.parent.get("hasChanged")||(U.refreshElement(W,X,U),U.get("autoDraw")&&U.draw())))}S.refreshElement=k;function D(W){var X;if(W.destroyed)X=W._cacheCanvasBBox;else{var U=W.get("cacheCanvasBBox"),et=U&&!!(U.width&&U.height),Q=W.getCanvasBBox(),ct=Q&&!!(Q.width&&Q.height);et&&ct?X=P.mergeRegion(U,Q):et?X=U:ct&&(X=Q)}return X}S.getRefreshRegion=D;function N(W){if(!W.length)return null;var X=[],U=[],et=[],Q=[];return m.each(W,function(ct){var Lt=D(ct);Lt&&(X.push(Lt.minX),U.push(Lt.minY),et.push(Lt.maxX),Q.push(Lt.maxY))}),{minX:m.min(X),minY:m.min(U),maxX:m.max(et),maxY:m.max(Q)}}S.getMergedRegion=N;function z(W,X){return!W||!X||!P.intersectRect(W,X)?null:{minX:Math.max(W.minX,X.minX),minY:Math.max(W.minY,X.minY),maxX:Math.min(W.maxX,X.maxX),maxY:Math.min(W.maxY,X.maxY)}}S.mergeView=z},25250:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getShape=void 0;var m=d(25940);function L(T,M){if(M){var A=m.invert(M);return m.multiplyVec2(A,T)}return T}function I(T,M,A){var p=T.getTotalMatrix();if(p){var w=L([M,A,1],p),y=w[0],b=w[1];return[y,b]}return[M,A]}function P(T,M,A){if(T.isCanvas&&T.isCanvas())return!0;if(!m.isAllowCapture(T)||T.cfg.isInView===!1)return!1;if(T.cfg.clipShape){var p=I(T,M,A),w=p[0],y=p[1];if(T.isClipped(w,y))return!1}var b=T.cfg.cacheCanvasBBox||T.getCanvasBBox();return M>=b.minX&&M<=b.maxX&&A>=b.minY&&A<=b.maxY}function _(T,M,A){if(!P(T,M,A))return null;for(var p=null,w=T.getChildren(),y=w.length,b=y-1;b>=0;b--){var x=w[b];if(x.isGroup())p=_(x,M,A);else if(P(x,M,A)){var E=x,k=I(x,M,A),D=k[0],N=k[1];E.isInShape(D,N)&&(p=x)}if(p)break}return p}S.getShape=_},90978:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(25940);function L(I,P,_){var T=m.getOffScreenContext();return I.createPath(T),T.isPointInPath(P,_)}S.default=L},5169:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=1e-6;function m(P){return Math.abs(P)<d?0:P<0?-1:1}function L(P,_,T){return(T[0]-P[0])*(_[1]-P[1])==(_[0]-P[0])*(T[1]-P[1])&&Math.min(P[0],_[0])<=T[0]&&T[0]<=Math.max(P[0],_[0])&&Math.min(P[1],_[1])<=T[1]&&T[1]<=Math.max(P[1],_[1])}function I(P,_,T){var M=!1,A=P.length;if(A<=2)return!1;for(var p=0;p<A;p++){var w=P[p],y=P[(p+1)%A];if(L(w,y,[_,T]))return!0;m(w[1]-T)>0!=m(y[1]-T)>0&&m(_-(T-w[1])*(w[0]-y[0])/(w[1]-y[1])-w[0])<0&&(M=!M)}return M}S.default=I},37378:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(80995);function L(I,P,_,T,M,A,p,w){var y=(Math.atan2(w-P,p-I)+Math.PI*2)%(Math.PI*2);if(y<T||y>M)return!1;var b={x:I+_*Math.cos(y),y:P+_*Math.sin(y)};return m.distance(b.x,b.y,p,w)<=A/2}S.default=L},82897:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(51824);function L(I,P,_,T,M,A,p){var w=Math.min(I,_),y=Math.max(I,_),b=Math.min(P,T),x=Math.max(P,T),E=M/2;return A>=w-E&&A<=y+E&&p>=b-E&&p<=x+E?m.Line.pointToLine(I,P,_,T,A,p)<=M/2:!1}S.default=L},81543:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(82897);function L(I,P,_,T,M){var A=I.length;if(A<2)return!1;for(var p=0;p<A-1;p++){var w=I[p][0],y=I[p][1],b=I[p+1][0],x=I[p+1][1];if(m.default(w,y,b,x,P,_,T))return!0}if(M){var E=I[0],k=I[A-1];if(m.default(E[0],E[1],k[0],k[1],P,_,T))return!0}return!1}S.default=L},26086:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(82897),L=d(37378);function I(P,_,T,M,A,p,w,y){var b=p/2;return m.default(P+A,_,P+T-A,_,p,w,y)||m.default(P+T,_+A,P+T,_+M-A,p,w,y)||m.default(P+T-A,_+M,P+A,_+M,p,w,y)||m.default(P,_+M-A,P,_+A,p,w,y)||L.default(P+T-A,_+A,A,1.5*Math.PI,2*Math.PI,p,w,y)||L.default(P+T-A,_+M-A,A,0,.5*Math.PI,p,w,y)||L.default(P+A,_+M-A,A,.5*Math.PI,Math.PI,p,w,y)||L.default(P+A,_+A,A,Math.PI,1.5*Math.PI,p,w,y)}S.default=I},12684:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(80995);function L(I,P,_,T,M,A,p){var w=M/2;return m.inBox(I-w,P-w,_,M,A,p)||m.inBox(I+_-w,P-w,M,T,A,p)||m.inBox(I+w,P+T-w,_,M,A,p)||m.inBox(I-w,P+w,M,T,A,p)}S.default=L},99425:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseRadius=S.parseStyle=S.parsePattern=S.parseRadialGradient=S.parseLineGradient=void 0;var m=d(80995),L=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,I=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,P=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function T(b,x){var E=b.match(_);m.each(E,function(k){var D=k.split(":");x.addColorStop(D[0],D[1])})}function M(b,x,E){var k=L.exec(E),D=parseFloat(k[1])%360*(Math.PI/180),N=k[2],z=x.getBBox(),W,X;D>=0&&D<1/2*Math.PI?(W={x:z.minX,y:z.minY},X={x:z.maxX,y:z.maxY}):1/2*Math.PI<=D&&D<Math.PI?(W={x:z.maxX,y:z.minY},X={x:z.minX,y:z.maxY}):Math.PI<=D&&D<3/2*Math.PI?(W={x:z.maxX,y:z.maxY},X={x:z.minX,y:z.minY}):(W={x:z.minX,y:z.maxY},X={x:z.maxX,y:z.minY});var U=Math.tan(D),et=U*U,Q=(X.x-W.x+U*(X.y-W.y))/(et+1)+W.x,ct=U*(X.x-W.x+U*(X.y-W.y))/(et+1)+W.y,Lt=b.createLinearGradient(W.x,W.y,Q,ct);return T(N,Lt),Lt}S.parseLineGradient=M;function A(b,x,E){var k=I.exec(E),D=parseFloat(k[1]),N=parseFloat(k[2]),z=parseFloat(k[3]),W=k[4];if(z===0){var X=W.match(_);return X[X.length-1].split(":")[1]}var U=x.getBBox(),et=U.maxX-U.minX,Q=U.maxY-U.minY,ct=Math.sqrt(et*et+Q*Q)/2,Lt=b.createRadialGradient(U.minX+et*D,U.minY+Q*N,0,U.minX+et/2,U.minY+Q/2,z*ct);return T(W,Lt),Lt}S.parseRadialGradient=A;function p(b,x,E){if(x.get("patternSource")&&x.get("patternSource")===E)return x.get("pattern");var k,D,N=P.exec(E),z=N[1],W=N[2];function X(){k=b.createPattern(D,z),x.set("pattern",k),x.set("patternSource",E)}switch(z){case"a":z="repeat";break;case"x":z="repeat-x";break;case"y":z="repeat-y";break;case"n":z="no-repeat";break;default:z="no-repeat"}return D=new Image,W.match(/^data:/i)||(D.crossOrigin="Anonymous"),D.src=W,D.complete?X():(D.onload=X,D.src=D.src),k}S.parsePattern=p;function w(b,x,E){var k=x.getBBox();if(isNaN(k.x)||isNaN(k.y)||isNaN(k.width)||isNaN(k.height))return E;if(m.isString(E)){if(E[1]==="("||E[2]==="("){if(E[0]==="l")return M(b,x,E);if(E[0]==="r")return A(b,x,E);if(E[0]==="p")return p(b,x,E)}return E}if(E instanceof CanvasPattern)return E}S.parseStyle=w;function y(b){var x=0,E=0,k=0,D=0;return m.isArray(b)?b.length===1?x=E=k=D=b[0]:b.length===2?(x=k=b[0],E=D=b[1]):b.length===3?(x=b[0],E=D=b[1],k=b[2]):(x=b[0],E=b[1],k=b[2],D=b[3]):x=E=k=D=b,[x,E,k,D]}S.parseRadius=y},40371:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(25940),I=d(51824),P=d(51824),_=d(36694),T=d(92541),M=d(80995),A=d(82897),p=d(37378),w=_.ext.transform;function y(E){for(var k=!1,D=E.length,N=0;N<D;N++){var z=E[N],W=z[0];if(W==="C"||W==="A"||W==="Q"){k=!0;break}}return k}function b(E,k,D,N,z){for(var W=!1,X=k/2,U=0;U<E.length;U++){var et=E[U],Q=et.currentPoint,ct=et.params,Lt=et.prePoint,_t=et.box;if(!(_t&&!M.inBox(_t.x-X,_t.y-X,_t.width+k,_t.height+k,D,N))){switch(et.command){case"L":case"Z":W=A.default(Lt[0],Lt[1],Q[0],Q[1],k,D,N);break;case"Q":var yt=I.Quad.pointDistance(Lt[0],Lt[1],ct[1],ct[2],ct[3],ct[4],D,N);W=yt<=k/2;break;case"C":var bt=P.Cubic.pointDistance(Lt[0],Lt[1],ct[1],ct[2],ct[3],ct[4],ct[5],ct[6],D,N,z);W=bt<=k/2;break;case"A":var Mt=et.arcParams,xt=Mt.cx,Bt=Mt.cy,wt=Mt.rx,H=Mt.ry,K=Mt.startAngle,B=Mt.endAngle,h=Mt.xRotation,mt=[D,N,1],gt=wt>H?wt:H,Vt=wt>H?1:wt/H,Jt=wt>H?H/wt:1,zt=w(null,[["t",-xt,-Bt],["r",-h],["s",1/Vt,1/Jt]]);T.transformMat3(mt,mt,zt),W=p.default(0,0,gt,K,B,k,mt[0],mt[1]);break;default:break}if(W)break}}return W}function x(E){for(var k=E.length,D=[],N=[],z=[],W=0;W<k;W++){var X=E[W],U=X[0];U==="M"?(z.length&&(N.push(z),z=[]),z.push([X[1],X[2]])):U==="Z"?z.length&&(D.push(z),z=[]):z.push([X[1],X[2]])}return z.length>0&&N.push(z),{polygons:D,polylines:N}}S.default=m.__assign({hasArc:y,extractPolygons:x,isPointInStroke:b},L.PathUtil)},80995:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.clearAnimationFrame=S.requestAnimationFrame=S.isNumberEqual=S.mod=S.toRadian=S.each=S.isArray=S.isFunction=S.isString=S.isNil=S.isSamePoint=S.mergeRegion=S.intersectRect=S.inBox=S.distance=S.getPixelRatio=void 0;function m(){return window?window.devicePixelRatio:1}S.getPixelRatio=m;function L(A,p,w,y){var b=A-w,x=p-y;return Math.sqrt(b*b+x*x)}S.distance=L;function I(A,p,w,y,b,x){return b>=A&&b<=A+w&&x>=p&&x<=p+y}S.inBox=I;function P(A,p){return!(p.minX>A.maxX||p.maxX<A.minX||p.minY>A.maxY||p.maxY<A.minY)}S.intersectRect=P;function _(A,p){return!A||!p?A||p:{minX:Math.min(A.minX,p.minX),minY:Math.min(A.minY,p.minY),maxX:Math.max(A.maxX,p.maxX),maxY:Math.max(A.maxY,p.maxY)}}S.mergeRegion=_;function T(A,p){return A[0]===p[0]&&A[1]===p[1]}S.isSamePoint=T;var M=d(26169);Object.defineProperty(S,"isNil",{enumerable:!0,get:function(){return M.isNil}}),Object.defineProperty(S,"isString",{enumerable:!0,get:function(){return M.isString}}),Object.defineProperty(S,"isFunction",{enumerable:!0,get:function(){return M.isFunction}}),Object.defineProperty(S,"isArray",{enumerable:!0,get:function(){return M.isArray}}),Object.defineProperty(S,"each",{enumerable:!0,get:function(){return M.each}}),Object.defineProperty(S,"toRadian",{enumerable:!0,get:function(){return M.toRadian}}),Object.defineProperty(S,"mod",{enumerable:!0,get:function(){return M.mod}}),Object.defineProperty(S,"isNumberEqual",{enumerable:!0,get:function(){return M.isNumberEqual}}),Object.defineProperty(S,"requestAnimationFrame",{enumerable:!0,get:function(){return M.requestAnimationFrame}}),Object.defineProperty(S,"clearAnimationFrame",{enumerable:!0,get:function(){return M.clearAnimationFrame}})},51824:function(lt,S,d){"use strict";d.r(S),d.d(S,{Arc:function(){return mt},Cubic:function(){return Lt},Line:function(){return w},Polygon:function(){return jt},Polyline:function(){return oe},Quad:function(){return W},Util:function(){return m}});var m={};d.r(m),d.d(m,{distance:function(){return P},getBBoxByArray:function(){return T},getBBoxRange:function(){return M},isNumberEqual:function(){return _},piMod:function(){return A}});function L(Pt){return Math.min.apply(null,Pt)}function I(Pt){return Math.max.apply(null,Pt)}function P(Pt,pt,st,Ct){var nt=Pt-st,J=pt-Ct;return Math.sqrt(nt*nt+J*J)}function _(Pt,pt){return Math.abs(Pt-pt)<.001}function T(Pt,pt){var st=L(Pt),Ct=L(pt),nt=I(Pt),J=I(pt);return{x:st,y:Ct,width:nt-st,height:J-Ct}}function M(Pt,pt,st,Ct){return{minX:L([Pt,st]),maxX:I([Pt,st]),minY:L([pt,Ct]),maxY:I([pt,Ct])}}function A(Pt){return(Pt+Math.PI*2)%(Math.PI*2)}var p=d(7124),w={box:function(Pt,pt,st,Ct){return T([Pt,st],[pt,Ct])},length:function(Pt,pt,st,Ct){return P(Pt,pt,st,Ct)},pointAt:function(Pt,pt,st,Ct,nt){return{x:(1-nt)*Pt+nt*st,y:(1-nt)*pt+nt*Ct}},pointDistance:function(Pt,pt,st,Ct,nt,J){var vt=(st-Pt)*(nt-Pt)+(Ct-pt)*(J-pt);if(vt<0)return P(Pt,pt,nt,J);var Tt=(st-Pt)*(st-Pt)+(Ct-pt)*(Ct-pt);return vt>Tt?P(st,Ct,nt,J):this.pointToLine(Pt,pt,st,Ct,nt,J)},pointToLine:function(Pt,pt,st,Ct,nt,J){var vt=[st-Pt,Ct-pt];if(p.exactEquals(vt,[0,0]))return Math.sqrt((nt-Pt)*(nt-Pt)+(J-pt)*(J-pt));var Tt=[-vt[1],vt[0]];p.normalize(Tt,Tt);var Ht=[nt-Pt,J-pt];return Math.abs(p.dot(Ht,Tt))},tangentAngle:function(Pt,pt,st,Ct){return Math.atan2(Ct-pt,st-Pt)}},y=1e-4;function b(Pt,pt,st,Ct,nt,J){var vt,Tt=Infinity,Ht=[st,Ct],ue=20;J&&J>200&&(ue=J/10);for(var Ce=1/ue,Fe=Ce/10,Ve=0;Ve<=ue;Ve++){var dr=Ve*Ce,xr=[nt.apply(null,Pt.concat([dr])),nt.apply(null,pt.concat([dr]))],Er=P(Ht[0],Ht[1],xr[0],xr[1]);Er<Tt&&(vt=dr,Tt=Er)}if(vt===0)return{x:Pt[0],y:pt[0]};if(vt===1){var Yr=Pt.length;return{x:Pt[Yr-1],y:pt[Yr-1]}}Tt=Infinity;for(var Ve=0;Ve<32&&!(Fe<y);Ve++){var gr=vt-Fe,ri=vt+Fe,xr=[nt.apply(null,Pt.concat([gr])),nt.apply(null,pt.concat([gr]))],Er=P(Ht[0],Ht[1],xr[0],xr[1]);if(gr>=0&&Er<Tt)vt=gr,Tt=Er;else{var bi=[nt.apply(null,Pt.concat([ri])),nt.apply(null,pt.concat([ri]))],Qr=P(Ht[0],Ht[1],bi[0],bi[1]);ri<=1&&Qr<Tt?(vt=ri,Tt=Qr):Fe*=.5}}return{x:nt.apply(null,Pt.concat([vt])),y:nt.apply(null,pt.concat([vt]))}}function x(Pt,pt){for(var st=0,Ct=Pt.length,nt=0;nt<Ct;nt++){var J=Pt[nt],vt=pt[nt],Tt=Pt[(nt+1)%Ct],Ht=pt[(nt+1)%Ct];st+=P(J,vt,Tt,Ht)}return st/2}function E(Pt,pt,st,Ct){var nt=1-Ct;return nt*nt*Pt+2*Ct*nt*pt+Ct*Ct*st}function k(Pt,pt,st){var Ct=Pt+st-2*pt;if(_(Ct,0))return[.5];var nt=(Pt-pt)/Ct;return nt<=1&&nt>=0?[nt]:[]}function D(Pt,pt,st,Ct){return 2*(1-Ct)*(pt-Pt)+2*Ct*(st-pt)}function N(Pt,pt,st,Ct,nt,J,vt){var Tt=E(Pt,st,nt,vt),Ht=E(pt,Ct,J,vt),ue=w.pointAt(Pt,pt,st,Ct,vt),Ce=w.pointAt(st,Ct,nt,J,vt);return[[Pt,pt,ue.x,ue.y,Tt,Ht],[Tt,Ht,Ce.x,Ce.y,nt,J]]}function z(Pt,pt,st,Ct,nt,J,vt){if(vt===0)return(P(Pt,pt,st,Ct)+P(st,Ct,nt,J)+P(Pt,pt,nt,J))/2;var Tt=N(Pt,pt,st,Ct,nt,J,.5),Ht=Tt[0],ue=Tt[1];return Ht.push(vt-1),ue.push(vt-1),z.apply(null,Ht)+z.apply(null,ue)}var W={box:function(Pt,pt,st,Ct,nt,J){var vt=k(Pt,st,nt)[0],Tt=k(pt,Ct,J)[0],Ht=[Pt,nt],ue=[pt,J];return vt!==void 0&&Ht.push(E(Pt,st,nt,vt)),Tt!==void 0&&ue.push(E(pt,Ct,J,Tt)),T(Ht,ue)},length:function(Pt,pt,st,Ct,nt,J){return z(Pt,pt,st,Ct,nt,J,3)},nearestPoint:function(Pt,pt,st,Ct,nt,J,vt,Tt){return b([Pt,st,nt],[pt,Ct,J],vt,Tt,E)},pointDistance:function(Pt,pt,st,Ct,nt,J,vt,Tt){var Ht=this.nearestPoint(Pt,pt,st,Ct,nt,J,vt,Tt);return P(Ht.x,Ht.y,vt,Tt)},interpolationAt:E,pointAt:function(Pt,pt,st,Ct,nt,J,vt){return{x:E(Pt,st,nt,vt),y:E(pt,Ct,J,vt)}},divide:function(Pt,pt,st,Ct,nt,J,vt){return N(Pt,pt,st,Ct,nt,J,vt)},tangentAngle:function(Pt,pt,st,Ct,nt,J,vt){var Tt=D(Pt,st,nt,vt),Ht=D(pt,Ct,J,vt),ue=Math.atan2(Ht,Tt);return A(ue)}};function X(Pt,pt,st,Ct,nt){var J=1-nt;return J*J*J*Pt+3*pt*nt*J*J+3*st*nt*nt*J+Ct*nt*nt*nt}function U(Pt,pt,st,Ct,nt){var J=1-nt;return 3*(J*J*(pt-Pt)+2*J*nt*(st-pt)+nt*nt*(Ct-st))}function et(Pt,pt,st,Ct){var nt=-3*Pt+9*pt-9*st+3*Ct,J=6*Pt-12*pt+6*st,vt=3*pt-3*Pt,Tt=[],Ht,ue,Ce;if(_(nt,0))_(J,0)||(Ht=-vt/J,Ht>=0&&Ht<=1&&Tt.push(Ht));else{var Fe=J*J-4*nt*vt;_(Fe,0)?Tt.push(-J/(2*nt)):Fe>0&&(Ce=Math.sqrt(Fe),Ht=(-J+Ce)/(2*nt),ue=(-J-Ce)/(2*nt),Ht>=0&&Ht<=1&&Tt.push(Ht),ue>=0&&ue<=1&&Tt.push(ue))}return Tt}function Q(Pt,pt,st,Ct,nt,J,vt,Tt,Ht){var ue=X(Pt,st,nt,vt,Ht),Ce=X(pt,Ct,J,Tt,Ht),Fe=w.pointAt(Pt,pt,st,Ct,Ht),Ve=w.pointAt(st,Ct,nt,J,Ht),dr=w.pointAt(nt,J,vt,Tt,Ht),xr=w.pointAt(Fe.x,Fe.y,Ve.x,Ve.y,Ht),Er=w.pointAt(Ve.x,Ve.y,dr.x,dr.y,Ht);return[[Pt,pt,Fe.x,Fe.y,xr.x,xr.y,ue,Ce],[ue,Ce,Er.x,Er.y,dr.x,dr.y,vt,Tt]]}function ct(Pt,pt,st,Ct,nt,J,vt,Tt,Ht){if(Ht===0)return x([Pt,st,nt,vt],[pt,Ct,J,Tt]);var ue=Q(Pt,pt,st,Ct,nt,J,vt,Tt,.5),Ce=ue[0],Fe=ue[1];return Ce.push(Ht-1),Fe.push(Ht-1),ct.apply(null,Ce)+ct.apply(null,Fe)}var Lt={extrema:et,box:function(Pt,pt,st,Ct,nt,J,vt,Tt){for(var Ht=[Pt,vt],ue=[pt,Tt],Ce=et(Pt,st,nt,vt),Fe=et(pt,Ct,J,Tt),Ve=0;Ve<Ce.length;Ve++)Ht.push(X(Pt,st,nt,vt,Ce[Ve]));for(var Ve=0;Ve<Fe.length;Ve++)ue.push(X(pt,Ct,J,Tt,Fe[Ve]));return T(Ht,ue)},length:function(Pt,pt,st,Ct,nt,J,vt,Tt){return ct(Pt,pt,st,Ct,nt,J,vt,Tt,3)},nearestPoint:function(Pt,pt,st,Ct,nt,J,vt,Tt,Ht,ue,Ce){return b([Pt,st,nt,vt],[pt,Ct,J,Tt],Ht,ue,X,Ce)},pointDistance:function(Pt,pt,st,Ct,nt,J,vt,Tt,Ht,ue,Ce){var Fe=this.nearestPoint(Pt,pt,st,Ct,nt,J,vt,Tt,Ht,ue,Ce);return P(Fe.x,Fe.y,Ht,ue)},interpolationAt:X,pointAt:function(Pt,pt,st,Ct,nt,J,vt,Tt,Ht){return{x:X(Pt,st,nt,vt,Ht),y:X(pt,Ct,J,Tt,Ht)}},divide:function(Pt,pt,st,Ct,nt,J,vt,Tt,Ht){return Q(Pt,pt,st,Ct,nt,J,vt,Tt,Ht)},tangentAngle:function(Pt,pt,st,Ct,nt,J,vt,Tt,Ht){var ue=U(Pt,st,nt,vt,Ht),Ce=U(pt,Ct,J,Tt,Ht);return A(Math.atan2(Ce,ue))}};function _t(Pt,pt){var st=Math.abs(Pt);return pt>0?st:st*-1}var yt={box:function(Pt,pt,st,Ct){return{x:Pt-st,y:pt-Ct,width:st*2,height:Ct*2}},length:function(Pt,pt,st,Ct){return Math.PI*(3*(st+Ct)-Math.sqrt((3*st+Ct)*(st+3*Ct)))},nearestPoint:function(Pt,pt,st,Ct,nt,J){var vt=st,Tt=Ct;if(vt===0||Tt===0)return{x:Pt,y:pt};for(var Ht=nt-Pt,ue=J-pt,Ce=Math.abs(Ht),Fe=Math.abs(ue),Ve=vt*vt,dr=Tt*Tt,xr=Math.PI/4,Er,Yr,gr=0;gr<4;gr++){Er=vt*Math.cos(xr),Yr=Tt*Math.sin(xr);var ri=(Ve-dr)*Math.pow(Math.cos(xr),3)/vt,bi=(dr-Ve)*Math.pow(Math.sin(xr),3)/Tt,Qr=Er-ri,gi=Yr-bi,hn=Ce-ri,mn=Fe-bi,Cn=Math.hypot(gi,Qr),Xn=Math.hypot(mn,hn),Xt=Cn*Math.asin((Qr*mn-gi*hn)/(Cn*Xn)),$t=Xt/Math.sqrt(Ve+dr-Er*Er-Yr*Yr);xr+=$t,xr=Math.min(Math.PI/2,Math.max(0,xr))}return{x:Pt+_t(Er,Ht),y:pt+_t(Yr,ue)}},pointDistance:function(Pt,pt,st,Ct,nt,J){var vt=this.nearestPoint(Pt,pt,st,Ct,nt,J);return P(vt.x,vt.y,nt,J)},pointAt:function(Pt,pt,st,Ct,nt){var J=2*Math.PI*nt;return{x:Pt+st*Math.cos(J),y:pt+Ct*Math.sin(J)}},tangentAngle:function(Pt,pt,st,Ct,nt){var J=2*Math.PI*nt,vt=Math.atan2(Ct*Math.cos(J),-st*Math.sin(J));return A(vt)}};function bt(Pt,pt,st,Ct,nt,J,vt,Tt){return-1*st*Math.cos(nt)*Math.sin(Tt)-Ct*Math.sin(nt)*Math.cos(Tt)}function Mt(Pt,pt,st,Ct,nt,J,vt,Tt){return-1*st*Math.sin(nt)*Math.sin(Tt)+Ct*Math.cos(nt)*Math.cos(Tt)}function xt(Pt,pt,st){return Math.atan(-pt/Pt*Math.tan(st))}function Bt(Pt,pt,st){return Math.atan(pt/(Pt*Math.tan(st)))}function wt(Pt,pt,st,Ct,nt,J){return st*Math.cos(nt)*Math.cos(J)-Ct*Math.sin(nt)*Math.sin(J)+Pt}function H(Pt,pt,st,Ct,nt,J){return st*Math.sin(nt)*Math.cos(J)+Ct*Math.cos(nt)*Math.sin(J)+pt}function K(Pt,pt,st,Ct){var nt=Math.atan2(Ct*Pt,st*pt);return(nt+Math.PI*2)%(Math.PI*2)}function B(Pt,pt,st){return{x:Pt*Math.cos(st),y:pt*Math.sin(st)}}function h(Pt,pt,st){var Ct=Math.cos(st),nt=Math.sin(st);return[Pt*Ct-pt*nt,Pt*nt+pt*Ct]}var mt={box:function(Pt,pt,st,Ct,nt,J,vt){for(var Tt=xt(st,Ct,nt),Ht=Infinity,ue=-Infinity,Ce=[J,vt],Fe=-Math.PI*2;Fe<=Math.PI*2;Fe+=Math.PI){var Ve=Tt+Fe;J<vt?J<Ve&&Ve<vt&&Ce.push(Ve):vt<Ve&&Ve<J&&Ce.push(Ve)}for(var Fe=0;Fe<Ce.length;Fe++){var dr=wt(Pt,pt,st,Ct,nt,Ce[Fe]);dr<Ht&&(Ht=dr),dr>ue&&(ue=dr)}for(var xr=Bt(st,Ct,nt),Er=Infinity,Yr=-Infinity,gr=[J,vt],Fe=-Math.PI*2;Fe<=Math.PI*2;Fe+=Math.PI){var ri=xr+Fe;J<vt?J<ri&&ri<vt&&gr.push(ri):vt<ri&&ri<J&&gr.push(ri)}for(var Fe=0;Fe<gr.length;Fe++){var bi=H(Pt,pt,st,Ct,nt,gr[Fe]);bi<Er&&(Er=bi),bi>Yr&&(Yr=bi)}return{x:Ht,y:Er,width:ue-Ht,height:Yr-Er}},length:function(Pt,pt,st,Ct,nt,J,vt){},nearestPoint:function(Pt,pt,st,Ct,nt,J,vt,Tt,Ht){var ue=h(Tt-Pt,Ht-pt,-nt),Ce=ue[0],Fe=ue[1],Ve=yt.nearestPoint(0,0,st,Ct,Ce,Fe),dr=K(st,Ct,Ve.x,Ve.y);dr<J?Ve=B(st,Ct,J):dr>vt&&(Ve=B(st,Ct,vt));var xr=h(Ve.x,Ve.y,nt);return{x:xr[0]+Pt,y:xr[1]+pt}},pointDistance:function(Pt,pt,st,Ct,nt,J,vt,Tt,Ht){var ue=this.nearestPoint(Pt,pt,st,Ct,Tt,Ht);return P(ue.x,ue.y,Tt,Ht)},pointAt:function(Pt,pt,st,Ct,nt,J,vt,Tt){var Ht=(vt-J)*Tt+J;return{x:wt(Pt,pt,st,Ct,nt,Ht),y:H(Pt,pt,st,Ct,nt,Ht)}},tangentAngle:function(Pt,pt,st,Ct,nt,J,vt,Tt){var Ht=(vt-J)*Tt+J,ue=bt(Pt,pt,st,Ct,nt,J,vt,Ht),Ce=Mt(Pt,pt,st,Ct,nt,J,vt,Ht);return A(Math.atan2(Ce,ue))}};function gt(Pt){for(var pt=0,st=[],Ct=0;Ct<Pt.length-1;Ct++){var nt=Pt[Ct],J=Pt[Ct+1],vt=P(nt[0],nt[1],J[0],J[1]),Tt={from:nt,to:J,length:vt};st.push(Tt),pt+=vt}return{segments:st,totalLength:pt}}function Vt(Pt){if(Pt.length<2)return 0;for(var pt=0,st=0;st<Pt.length-1;st++){var Ct=Pt[st],nt=Pt[st+1];pt+=P(Ct[0],Ct[1],nt[0],nt[1])}return pt}function Jt(Pt,pt){if(pt>1||pt<0||Pt.length<2)return null;var st=gt(Pt),Ct=st.segments,nt=st.totalLength;if(nt===0)return{x:Pt[0][0],y:Pt[0][1]};for(var J=0,vt=null,Tt=0;Tt<Ct.length;Tt++){var Ht=Ct[Tt],ue=Ht.from,Ce=Ht.to,Fe=Ht.length/nt;if(pt>=J&&pt<=J+Fe){var Ve=(pt-J)/Fe;vt=w.pointAt(ue[0],ue[1],Ce[0],Ce[1],Ve);break}J+=Fe}return vt}function zt(Pt,pt){if(pt>1||pt<0||Pt.length<2)return 0;for(var st=gt(Pt),Ct=st.segments,nt=st.totalLength,J=0,vt=0,Tt=0;Tt<Ct.length;Tt++){var Ht=Ct[Tt],ue=Ht.from,Ce=Ht.to,Fe=Ht.length/nt;if(pt>=J&&pt<=J+Fe){vt=Math.atan2(Ce[1]-ue[1],Ce[0]-ue[0]);break}J+=Fe}return vt}function Qt(Pt,pt,st){for(var Ct=Infinity,nt=0;nt<Pt.length-1;nt++){var J=Pt[nt],vt=Pt[nt+1],Tt=w.pointDistance(J[0],J[1],vt[0],vt[1],pt,st);Tt<Ct&&(Ct=Tt)}return Ct}var oe={box:function(Pt){for(var pt=[],st=[],Ct=0;Ct<Pt.length;Ct++){var nt=Pt[Ct];pt.push(nt[0]),st.push(nt[1])}return T(pt,st)},length:function(Pt){return Vt(Pt)},pointAt:function(Pt,pt){return Jt(Pt,pt)},pointDistance:function(Pt,pt,st){return Qt(Pt,pt,st)},tangentAngle:function(Pt,pt){return zt(Pt,pt)}};function se(Pt){var pt=Pt.slice(0);return Pt.length&&pt.push(Pt[0]),pt}var jt={box:function(Pt){return oe.box(Pt)},length:function(Pt){return Vt(se(Pt))},pointAt:function(Pt,pt){return Jt(se(Pt),pt)},pointDistance:function(Pt,pt,st){return Qt(se(Pt),pt,st)},tangentAngle:function(Pt,pt){return zt(se(Pt),pt)}}},93695:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(3195),L=d(88825);function I(b,x,E,k,D,N,z,W){return-1*E*Math.cos(D)*Math.sin(W)-k*Math.sin(D)*Math.cos(W)}function P(b,x,E,k,D,N,z,W){return-1*E*Math.sin(D)*Math.sin(W)+k*Math.cos(D)*Math.cos(W)}function _(b,x,E){return Math.atan(-x/b*Math.tan(E))}function T(b,x,E){return Math.atan(x/(b*Math.tan(E)))}function M(b,x,E,k,D,N){return E*Math.cos(D)*Math.cos(N)-k*Math.sin(D)*Math.sin(N)+b}function A(b,x,E,k,D,N){return E*Math.sin(D)*Math.cos(N)+k*Math.cos(D)*Math.sin(N)+x}function p(b,x,E,k){var D=Math.atan2(k*b,E*x);return(D+Math.PI*2)%(Math.PI*2)}function w(b,x,E){return{x:b*Math.cos(E),y:x*Math.sin(E)}}function y(b,x,E){var k=Math.cos(E),D=Math.sin(E);return[b*k-x*D,b*D+x*k]}S.default={box:function(b,x,E,k,D,N,z){for(var W=_(E,k,D),X=Infinity,U=-Infinity,et=[N,z],Q=-Math.PI*2;Q<=Math.PI*2;Q+=Math.PI){var ct=W+Q;N<z?N<ct&&ct<z&&et.push(ct):z<ct&&ct<N&&et.push(ct)}for(var Q=0;Q<et.length;Q++){var Lt=M(b,x,E,k,D,et[Q]);Lt<X&&(X=Lt),Lt>U&&(U=Lt)}for(var _t=T(E,k,D),yt=Infinity,bt=-Infinity,Mt=[N,z],Q=-Math.PI*2;Q<=Math.PI*2;Q+=Math.PI){var xt=_t+Q;N<z?N<xt&&xt<z&&Mt.push(xt):z<xt&&xt<N&&Mt.push(xt)}for(var Q=0;Q<Mt.length;Q++){var Bt=A(b,x,E,k,D,Mt[Q]);Bt<yt&&(yt=Bt),Bt>bt&&(bt=Bt)}return{x:X,y:yt,width:U-X,height:bt-yt}},length:function(b,x,E,k,D,N,z){},nearestPoint:function(b,x,E,k,D,N,z,W,X){var U=y(W-b,X-x,-D),et=U[0],Q=U[1],ct=L.default.nearestPoint(0,0,E,k,et,Q),Lt=p(E,k,ct.x,ct.y);Lt<N?ct=w(E,k,N):Lt>z&&(ct=w(E,k,z));var _t=y(ct.x,ct.y,D);return{x:_t[0]+b,y:_t[1]+x}},pointDistance:function(b,x,E,k,D,N,z,W,X){var U=this.nearestPoint(b,x,E,k,W,X);return m.distance(U.x,U.y,W,X)},pointAt:function(b,x,E,k,D,N,z,W){var X=(z-N)*W+N;return{x:M(b,x,E,k,D,X),y:A(b,x,E,k,D,X)}},tangentAngle:function(b,x,E,k,D,N,z,W){var X=(z-N)*W+N,U=I(b,x,E,k,D,N,z,X),et=P(b,x,E,k,D,N,z,X);return m.piMod(Math.atan2(et,U))}}},28487:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.snapLength=S.nearestPoint=void 0;var m=d(3195),L=1e-4;function I(_,T,M,A,p,w){var y,b=Infinity,x=[M,A],E=20;w&&w>200&&(E=w/10);for(var k=1/E,D=k/10,N=0;N<=E;N++){var z=N*k,W=[p.apply(null,_.concat([z])),p.apply(null,T.concat([z]))],X=m.distance(x[0],x[1],W[0],W[1]);X<b&&(y=z,b=X)}if(y===0)return{x:_[0],y:T[0]};if(y===1){var U=_.length;return{x:_[U-1],y:T[U-1]}}b=Infinity;for(var N=0;N<32&&!(D<L);N++){var et=y-D,Q=y+D,W=[p.apply(null,_.concat([et])),p.apply(null,T.concat([et]))],X=m.distance(x[0],x[1],W[0],W[1]);if(et>=0&&X<b)y=et,b=X;else{var ct=[p.apply(null,_.concat([Q])),p.apply(null,T.concat([Q]))],Lt=m.distance(x[0],x[1],ct[0],ct[1]);Q<=1&&Lt<b?(y=Q,b=Lt):D*=.5}}return{x:p.apply(null,_.concat([y])),y:p.apply(null,T.concat([y]))}}S.nearestPoint=I;function P(_,T){for(var M=0,A=_.length,p=0;p<A;p++){var w=_[p],y=T[p],b=_[(p+1)%A],x=T[(p+1)%A];M+=m.distance(w,y,b,x)}return M/2}S.snapLength=P},84104:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(3195),L=d(50131),I=d(28487);function P(p,w,y,b,x){var E=1-x;return E*E*E*p+3*w*x*E*E+3*y*x*x*E+b*x*x*x}function _(p,w,y,b,x){var E=1-x;return 3*(E*E*(w-p)+2*E*x*(y-w)+x*x*(b-y))}function T(p,w,y,b){var x=-3*p+9*w-9*y+3*b,E=6*p-12*w+6*y,k=3*w-3*p,D=[],N,z,W;if(m.isNumberEqual(x,0))m.isNumberEqual(E,0)||(N=-k/E,N>=0&&N<=1&&D.push(N));else{var X=E*E-4*x*k;m.isNumberEqual(X,0)?D.push(-E/(2*x)):X>0&&(W=Math.sqrt(X),N=(-E+W)/(2*x),z=(-E-W)/(2*x),N>=0&&N<=1&&D.push(N),z>=0&&z<=1&&D.push(z))}return D}function M(p,w,y,b,x,E,k,D,N){var z=P(p,y,x,k,N),W=P(w,b,E,D,N),X=L.default.pointAt(p,w,y,b,N),U=L.default.pointAt(y,b,x,E,N),et=L.default.pointAt(x,E,k,D,N),Q=L.default.pointAt(X.x,X.y,U.x,U.y,N),ct=L.default.pointAt(U.x,U.y,et.x,et.y,N);return[[p,w,X.x,X.y,Q.x,Q.y,z,W],[z,W,ct.x,ct.y,et.x,et.y,k,D]]}function A(p,w,y,b,x,E,k,D,N){if(N===0)return I.snapLength([p,y,x,k],[w,b,E,D]);var z=M(p,w,y,b,x,E,k,D,.5),W=z[0],X=z[1];return W.push(N-1),X.push(N-1),A.apply(null,W)+A.apply(null,X)}S.default={extrema:T,box:function(p,w,y,b,x,E,k,D){for(var N=[p,k],z=[w,D],W=T(p,y,x,k),X=T(w,b,E,D),U=0;U<W.length;U++)N.push(P(p,y,x,k,W[U]));for(var U=0;U<X.length;U++)z.push(P(w,b,E,D,X[U]));return m.getBBoxByArray(N,z)},length:function(p,w,y,b,x,E,k,D){return A(p,w,y,b,x,E,k,D,3)},nearestPoint:function(p,w,y,b,x,E,k,D,N,z,W){return I.nearestPoint([p,y,x,k],[w,b,E,D],N,z,P,W)},pointDistance:function(p,w,y,b,x,E,k,D,N,z,W){var X=this.nearestPoint(p,w,y,b,x,E,k,D,N,z,W);return m.distance(X.x,X.y,N,z)},interpolationAt:P,pointAt:function(p,w,y,b,x,E,k,D,N){return{x:P(p,y,x,k,N),y:P(w,b,E,D,N)}},divide:function(p,w,y,b,x,E,k,D,N){return M(p,w,y,b,x,E,k,D,N)},tangentAngle:function(p,w,y,b,x,E,k,D,N){var z=_(p,y,x,k,N),W=_(w,b,E,D,N);return m.piMod(Math.atan2(W,z))}}},88825:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(3195);function L(I,P){var _=Math.abs(I);return P>0?_:_*-1}S.default={box:function(I,P,_,T){return{x:I-_,y:P-T,width:_*2,height:T*2}},length:function(I,P,_,T){return Math.PI*(3*(_+T)-Math.sqrt((3*_+T)*(_+3*T)))},nearestPoint:function(I,P,_,T,M,A){var p=_,w=T;if(p===0||w===0)return{x:I,y:P};for(var y=M-I,b=A-P,x=Math.abs(y),E=Math.abs(b),k=p*p,D=w*w,N=Math.PI/4,z,W,X=0;X<4;X++){z=p*Math.cos(N),W=w*Math.sin(N);var U=(k-D)*Math.pow(Math.cos(N),3)/p,et=(D-k)*Math.pow(Math.sin(N),3)/w,Q=z-U,ct=W-et,Lt=x-U,_t=E-et,yt=Math.hypot(ct,Q),bt=Math.hypot(_t,Lt),Mt=yt*Math.asin((Q*_t-ct*Lt)/(yt*bt)),xt=Mt/Math.sqrt(k+D-z*z-W*W);N+=xt,N=Math.min(Math.PI/2,Math.max(0,N))}return{x:I+L(z,y),y:P+L(W,b)}},pointDistance:function(I,P,_,T,M,A){var p=this.nearestPoint(I,P,_,T,M,A);return m.distance(p.x,p.y,M,A)},pointAt:function(I,P,_,T,M){var A=2*Math.PI*M;return{x:I+_*Math.cos(A),y:P+T*Math.sin(A)}},tangentAngle:function(I,P,_,T,M){var A=2*Math.PI*M,p=Math.atan2(T*Math.cos(A),-_*Math.sin(A));return m.piMod(p)}}},50131:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(3195),L=d(7124);S.default={box:function(I,P,_,T){return m.getBBoxByArray([I,_],[P,T])},length:function(I,P,_,T){return m.distance(I,P,_,T)},pointAt:function(I,P,_,T,M){return{x:(1-M)*I+M*_,y:(1-M)*P+M*T}},pointDistance:function(I,P,_,T,M,A){var p=(_-I)*(M-I)+(T-P)*(A-P);if(p<0)return m.distance(I,P,M,A);var w=(_-I)*(_-I)+(T-P)*(T-P);return p>w?m.distance(_,T,M,A):this.pointToLine(I,P,_,T,M,A)},pointToLine:function(I,P,_,T,M,A){var p=[_-I,T-P];if(L.exactEquals(p,[0,0]))return Math.sqrt((M-I)*(M-I)+(A-P)*(A-P));var w=[-p[1],p[0]];L.normalize(w,w);var y=[M-I,A-P];return Math.abs(L.dot(y,w))},tangentAngle:function(I,P,_,T){return Math.atan2(T-P,_-I)}}},590:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(40850),I=d(3195);S.Z={box:function(P){for(var _=[],T=[],M=0;M<P.length;M++){var A=P[M];_.push(A[0]),T.push(A[1])}return I.getBBoxByArray(_,T)},length:function(P){return L.lengthOfSegment(P)},pointAt:function(P,_){return L.pointAtSegments(P,_)},pointDistance:function(P,_,T){return L.distanceAtSegment(P,_,T)},tangentAngle:function(P,_){return L.angleAtSegments(P,_)}}},63308:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(50131),L=d(3195),I=d(28487);function P(p,w,y,b){var x=1-b;return x*x*p+2*b*x*w+b*b*y}function _(p,w,y){var b=p+y-2*w;if(L.isNumberEqual(b,0))return[.5];var x=(p-w)/b;return x<=1&&x>=0?[x]:[]}function T(p,w,y,b){return 2*(1-b)*(w-p)+2*b*(y-w)}function M(p,w,y,b,x,E,k){var D=P(p,y,x,k),N=P(w,b,E,k),z=m.default.pointAt(p,w,y,b,k),W=m.default.pointAt(y,b,x,E,k);return[[p,w,z.x,z.y,D,N],[D,N,W.x,W.y,x,E]]}function A(p,w,y,b,x,E,k){if(k===0)return(L.distance(p,w,y,b)+L.distance(y,b,x,E)+L.distance(p,w,x,E))/2;var D=M(p,w,y,b,x,E,.5),N=D[0],z=D[1];return N.push(k-1),z.push(k-1),A.apply(null,N)+A.apply(null,z)}S.default={box:function(p,w,y,b,x,E){var k=_(p,y,x)[0],D=_(w,b,E)[0],N=[p,x],z=[w,E];return k!==void 0&&N.push(P(p,y,x,k)),D!==void 0&&z.push(P(w,b,E,D)),L.getBBoxByArray(N,z)},length:function(p,w,y,b,x,E){return A(p,w,y,b,x,E,3)},nearestPoint:function(p,w,y,b,x,E,k,D){return I.nearestPoint([p,y,x],[w,b,E],k,D,P)},pointDistance:function(p,w,y,b,x,E,k,D){var N=this.nearestPoint(p,w,y,b,x,E,k,D);return L.distance(N.x,N.y,k,D)},interpolationAt:P,pointAt:function(p,w,y,b,x,E,k){return{x:P(p,y,x,k),y:P(w,b,E,k)}},divide:function(p,w,y,b,x,E,k){return M(p,w,y,b,x,E,k)},tangentAngle:function(p,w,y,b,x,E,k){var D=T(p,y,x,k),N=T(w,b,E,k),z=Math.atan2(N,D);return L.piMod(z)}}},40850:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.distanceAtSegment=S.angleAtSegments=S.pointAtSegments=S.lengthOfSegment=void 0;var m=d(50131),L=d(3195);function I(A){for(var p=0,w=[],y=0;y<A.length-1;y++){var b=A[y],x=A[y+1],E=L.distance(b[0],b[1],x[0],x[1]),k={from:b,to:x,length:E};w.push(k),p+=E}return{segments:w,totalLength:p}}function P(A){if(A.length<2)return 0;for(var p=0,w=0;w<A.length-1;w++){var y=A[w],b=A[w+1];p+=L.distance(y[0],y[1],b[0],b[1])}return p}S.lengthOfSegment=P;function _(A,p){if(p>1||p<0||A.length<2)return null;var w=I(A),y=w.segments,b=w.totalLength;if(b===0)return{x:A[0][0],y:A[0][1]};for(var x=0,E=null,k=0;k<y.length;k++){var D=y[k],N=D.from,z=D.to,W=D.length/b;if(p>=x&&p<=x+W){var X=(p-x)/W;E=m.default.pointAt(N[0],N[1],z[0],z[1],X);break}x+=W}return E}S.pointAtSegments=_;function T(A,p){if(p>1||p<0||A.length<2)return 0;for(var w=I(A),y=w.segments,b=w.totalLength,x=0,E=0,k=0;k<y.length;k++){var D=y[k],N=D.from,z=D.to,W=D.length/b;if(p>=x&&p<=x+W){E=Math.atan2(z[1]-N[1],z[0]-N[0]);break}x+=W}return E}S.angleAtSegments=T;function M(A,p,w){for(var y=Infinity,b=0;b<A.length-1;b++){var x=A[b],E=A[b+1],k=m.default.pointDistance(x[0],x[1],E[0],E[1],p,w);k<y&&(y=k)}return y}S.distanceAtSegment=M},3195:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.piMod=S.getBBoxRange=S.getBBoxByArray=S.isNumberEqual=S.distance=void 0;function d(M){return Math.min.apply(null,M)}function m(M){return Math.max.apply(null,M)}function L(M,A,p,w){var y=M-p,b=A-w;return Math.sqrt(y*y+b*b)}S.distance=L;function I(M,A){return Math.abs(M-A)<.001}S.isNumberEqual=I;function P(M,A){var p=d(M),w=d(A),y=m(M),b=m(A);return{x:p,y:w,width:y-p,height:b-w}}S.getBBoxByArray=P;function _(M,A,p,w){return{minX:d([M,p]),maxX:m([M,p]),minY:d([A,w]),maxY:m([A,w])}}S.getBBoxRange=_;function T(M){return(M+Math.PI*2)%(Math.PI*2)}S.piMod=T},63826:function(lt){"use strict";lt.exports=JSON.parse('{"name":"@antv/g-svg","version":"0.4.7","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.39.3","webpack-cli":"^3.3.7"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/util":"~2.0.0","detect-browser":"^4.6.0"},"__npminstall_done":"Mon Jul 04 2022 00:47:14 GMT+0800 (\u4E2D\u56FD\u6807\u51C6\u65F6\u95F4)","gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a","_from":"@antv/g-svg@0.4.7","_resolved":"https://registry.npmmirror.com/@antv/g-svg/-/g-svg-0.4.7.tgz"}')},40169:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(44614),I=d(25940),P=d(14982),_=d(38888),T=d(56143),M=d(20783),A=d(92671),p=d(71525),w=d(51353),y=function(b){L.__extends(x,b);function x(E){return b.call(this,L.__assign(L.__assign({},E),{autoDraw:!0,renderer:"svg"}))||this}return x.prototype.getShapeBase=function(){return A},x.prototype.getGroupBase=function(){return p.default},x.prototype.getShape=function(E,k,D){var N=D.target||D.srcElement;if(!P.SHAPE_TO_TAGS[N.tagName]){for(var z=N.parentNode;z&&!P.SHAPE_TO_TAGS[z.tagName];)z=z.parentNode;N=z}return this.find(function(W){return W.get("el")===N})},x.prototype.createDom=function(){var E=M.createSVGElement("svg"),k=new w.default(E);return E.setAttribute("width",""+this.get("width")),E.setAttribute("height",""+this.get("height")),this.set("context",k),E},x.prototype.onCanvasChange=function(E){var k=this.get("context"),D=this.get("el");if(E==="sort"){var N=this.get("children");N&&N.length&&M.sortDom(this,function(W,X){return N.indexOf(W)-N.indexOf(X)?1:0})}else if(E==="clear"){if(D){D.innerHTML="";var z=k.el;z.innerHTML="",D.appendChild(z)}}else E==="matrix"?T.setTransform(this):E==="clip"?T.setClip(this,k):E==="changeSize"&&(D.setAttribute("width",""+this.get("width")),D.setAttribute("height",""+this.get("height")))},x.prototype.draw=function(){var E=this.get("context"),k=this.getChildren();T.setClip(this,E),k.length&&_.drawChildren(E,k)},x}(I.AbstractCanvas);S.Z=y},14982:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.EVENTS=S.SVG_ATTR_MAP=S.SHAPE_TO_TAGS=void 0,S.SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},S.SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},S.EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},86514:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(20783),I=function(){function P(_,T){this.cfg={};var M=L.createSVGElement("marker"),A=m.uniqueId("marker_");M.setAttribute("id",A);var p=L.createSVGElement("path");p.setAttribute("stroke",_.stroke||"none"),p.setAttribute("fill",_.fill||"none"),M.appendChild(p),M.setAttribute("overflow","visible"),M.setAttribute("orient","auto-start-reverse"),this.el=M,this.child=p,this.id=A;var w=_[T==="marker-start"?"startArrow":"endArrow"];return this.stroke=_.stroke||"#000",w===!0?this._setDefaultPath(T,p):(this.cfg=w,this._setMarker(_.lineWidth,p)),this}return P.prototype.match=function(){return!1},P.prototype._setDefaultPath=function(_,T){var M=this.el;T.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),M.setAttribute("refX",""+10*Math.cos(Math.PI/6)),M.setAttribute("refY",""+5)},P.prototype._setMarker=function(_,T){var M=this.el,A=this.cfg.path,p=this.cfg.d;m.isArray(A)&&(A=A.map(function(w){return w.join(" ")}).join("")),T.setAttribute("d",A),M.appendChild(T),p&&M.setAttribute("refX",""+p/_)},P.prototype.update=function(_){var T=this.child;T.attr?T.attr("fill",_):T.setAttribute("fill",_)},P}();S.default=I},68025:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(20783),I=function(){function P(_){this.type="clip",this.cfg={};var T=L.createSVGElement("clipPath");this.el=T,this.id=m.uniqueId("clip_"),T.id=this.id;var M=_.cfg.el;return T.appendChild(M),this.cfg=_,this}return P.prototype.match=function(){return!1},P.prototype.remove=function(){var _=this.el;_.parentNode.removeChild(_)},P}();S.default=I},58819:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(20783),I=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,P=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function T(w){var y=w.match(_);if(!y)return"";var b="";return y.sort(function(x,E){return x=x.split(":"),E=E.split(":"),Number(x[0])-Number(E[0])}),m.each(y,function(x){x=x.split(":"),b+='<stop offset="'+x[0]+'" stop-color="'+x[1]+'"></stop>'}),b}function M(w,y){var b=I.exec(w),x=m.mod(m.toRadian(parseFloat(b[1])),Math.PI*2),E=b[2],k,D;x>=0&&x<.5*Math.PI?(k={x:0,y:0},D={x:1,y:1}):.5*Math.PI<=x&&x<Math.PI?(k={x:1,y:0},D={x:0,y:1}):Math.PI<=x&&x<1.5*Math.PI?(k={x:1,y:1},D={x:0,y:0}):(k={x:0,y:1},D={x:1,y:0});var N=Math.tan(x),z=N*N,W=(D.x-k.x+N*(D.y-k.y))/(z+1)+k.x,X=N*(D.x-k.x+N*(D.y-k.y))/(z+1)+k.y;y.setAttribute("x1",k.x),y.setAttribute("y1",k.y),y.setAttribute("x2",W),y.setAttribute("y2",X),y.innerHTML=T(E)}function A(w,y){var b=P.exec(w),x=parseFloat(b[1]),E=parseFloat(b[2]),k=parseFloat(b[3]),D=b[4];y.setAttribute("cx",x),y.setAttribute("cy",E),y.setAttribute("r",k),y.innerHTML=T(D)}var p=function(){function w(y){this.cfg={};var b=null,x=m.uniqueId("gradient_");return y.toLowerCase()[0]==="l"?(b=L.createSVGElement("linearGradient"),M(y,b)):(b=L.createSVGElement("radialGradient"),A(y,b)),b.setAttribute("id",x),this.el=b,this.id=x,this.cfg=y,this}return w.prototype.match=function(y,b){return this.cfg===b},w}();S.default=p},51353:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(58819),I=d(10413),P=d(86514),_=d(68025),T=d(252),M=d(20783),A=function(){function p(w){var y=M.createSVGElement("defs"),b=m.uniqueId("defs_");y.id=b,w.appendChild(y),this.children=[],this.defaultArrow={},this.el=y,this.canvas=w}return p.prototype.find=function(w,y){for(var b=this.children,x=null,E=0;E<b.length;E++)if(b[E].match(w,y)){x=b[E].id;break}return x},p.prototype.findById=function(w){for(var y=this.children,b=null,x=0;x<y.length;x++)if(y[x].id===w){b=y[x];break}return b},p.prototype.add=function(w){this.children.push(w),w.canvas=this.canvas,w.parent=this},p.prototype.getDefaultArrow=function(w,y){var b=w.stroke||w.strokeStyle;if(this.defaultArrow[b])return this.defaultArrow[b].id;var x=new P.default(w,y);return this.defaultArrow[b]=x,this.el.appendChild(x.el),this.add(x),x.id},p.prototype.addGradient=function(w){var y=new L.default(w);return this.el.appendChild(y.el),this.add(y),y.id},p.prototype.addArrow=function(w,y){var b=new P.default(w,y);return this.el.appendChild(b.el),this.add(b),b.id},p.prototype.addShadow=function(w){var y=new I.default(w);return this.el.appendChild(y.el),this.add(y),y.id},p.prototype.addPattern=function(w){var y=new T.default(w);return this.el.appendChild(y.el),this.add(y),y.id},p.prototype.addClip=function(w){var y=new _.default(w);return this.el.appendChild(y.el),this.add(y),y.id},p}();S.default=A},252:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(20783),I=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,P=function(){function _(T){this.cfg={};var M=L.createSVGElement("pattern");M.setAttribute("patternUnits","userSpaceOnUse");var A=L.createSVGElement("image");M.appendChild(A);var p=m.uniqueId("pattern_");M.id=p,this.el=M,this.id=p,this.cfg=T;var w=I.exec(T),y=w[2];A.setAttribute("href",y);var b=new Image;y.match(/^data:/i)||(b.crossOrigin="Anonymous"),b.src=y;function x(){M.setAttribute("width",""+b.width),M.setAttribute("height",""+b.height)}return b.complete?x():(b.onload=x,b.src=b.src),this}return _.prototype.match=function(T,M){return this.cfg===M},_}();S.default=P},10413:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(20783),I={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},P={x:"-40%",y:"-40%",width:"200%",height:"200%"},_=function(){function T(M){this.type="filter",this.cfg={},this.type="filter";var A=L.createSVGElement("filter");return m.each(P,function(p,w){A.setAttribute(w,p)}),this.el=A,this.id=m.uniqueId("filter_"),this.el.id=this.id,this.cfg=M,this._parseShadow(M,A),this}return T.prototype.match=function(M,A){if(this.type!==M)return!1;var p=!0,w=this.cfg;return m.each(Object.keys(w),function(y){if(w[y]!==A[y])return p=!1,!1}),p},T.prototype.update=function(M,A){var p=this.cfg;return p[I[M]]=A,this._parseShadow(p,this.el),this},T.prototype._parseShadow=function(M,A){var p=`<feDropShadow
      dx="`+(M.dx||0)+`"
      dy="`+(M.dy||0)+`"
      stdDeviation="`+(M.blur?M.blur/10:0)+`"
      flood-color="`+(M.color?M.color:"#000")+`"
      flood-opacity="`+(M.opacity?M.opacity:1)+`"
      />`;A.innerHTML=p},T}();S.default=_},71525:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(25940),I=d(26169),P=d(92671),_=d(38888),T=d(56143),M=d(14982),A=d(20783),p=function(w){m.__extends(y,w);function y(){return w!==null&&w.apply(this,arguments)||this}return y.prototype.isEntityGroup=function(){return!0},y.prototype.createDom=function(){var b=A.createSVGElement("g");this.set("el",b);var x=this.getParent();if(x){var E=x.get("el");E||(E=x.createDom(),x.set("el",E)),E.appendChild(b)}return b},y.prototype.afterAttrsChange=function(b){w.prototype.afterAttrsChange.call(this,b);var x=this.get("canvas");if(x&&x.get("autoDraw")){var E=x.get("context");this.createPath(E,b)}},y.prototype.onCanvasChange=function(b){_.refreshElement(this,b)},y.prototype.getShapeBase=function(){return P},y.prototype.getGroupBase=function(){return y},y.prototype.draw=function(b){var x=this.getChildren(),E=this.get("el");this.get("destroyed")?E&&E.parentNode.removeChild(E):(E||this.createDom(),T.setClip(this,b),this.createPath(b),x.length&&_.drawChildren(b,x))},y.prototype.createPath=function(b,x){var E=this.attr(),k=this.get("el");I.each(x||E,function(D,N){M.SVG_ATTR_MAP[N]&&k.setAttribute(M.SVG_ATTR_MAP[N],D)}),T.setTransform(this)},y}(L.AbstractGroup);S.default=p},45392:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(25940),I=d(56143),P=d(20783),_=d(38888),T=d(14982),M=d(92671),A=d(71525),p=d(25940),w=function(y){m.__extends(b,y);function b(){var x=y!==null&&y.apply(this,arguments)||this;return x.type="svg",x.canFill=!1,x.canStroke=!1,x}return b.prototype.getDefaultAttrs=function(){var x=y.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},x),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},b.prototype.afterAttrsChange=function(x){y.prototype.afterAttrsChange.call(this,x);var E=this.get("canvas");if(E&&E.get("autoDraw")){var k=E.get("context");this.draw(k,x)}},b.prototype.getShapeBase=function(){return M},b.prototype.getGroupBase=function(){return A.default},b.prototype.onCanvasChange=function(x){_.refreshElement(this,x)},b.prototype.calculateBBox=function(){var x=this.get("el"),E=null;if(x)E=x.getBBox();else{var k=p.getBBoxMethod(this.get("type"));k&&(E=k(this))}if(E){var D=E.x,N=E.y,z=E.width,W=E.height,X=this.getHitLineWidth(),U=X/2,et=D-U,Q=N-U,ct=D+z+U,Lt=N+W+U;return{x:et,y:Q,minX:et,minY:Q,maxX:ct,maxY:Lt,width:z+X,height:W+X}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},b.prototype.isFill=function(){var x=this.attr(),E=x.fill,k=x.fillStyle;return(E||k||this.isClipShape())&&this.canFill},b.prototype.isStroke=function(){var x=this.attr(),E=x.stroke,k=x.strokeStyle;return(E||k)&&this.canStroke},b.prototype.draw=function(x,E){var k=this.get("el");this.get("destroyed")?k&&k.parentNode.removeChild(k):(k||P.createDom(this),I.setClip(this,x),this.createPath(x,E),this.shadow(x,E),this.strokeAndFill(x,E),this.transform(E))},b.prototype.createPath=function(x,E){},b.prototype.strokeAndFill=function(x,E){var k=E||this.attr(),D=k.fill,N=k.fillStyle,z=k.stroke,W=k.strokeStyle,X=k.fillOpacity,U=k.strokeOpacity,et=k.lineWidth,Q=this.get("el");this.canFill&&(E?"fill"in k?this._setColor(x,"fill",D):"fillStyle"in k&&this._setColor(x,"fill",N):this._setColor(x,"fill",D||N),X&&Q.setAttribute(T.SVG_ATTR_MAP.fillOpacity,X)),this.canStroke&&et>0&&(E?"stroke"in k?this._setColor(x,"stroke",z):"strokeStyle"in k&&this._setColor(x,"stroke",W):this._setColor(x,"stroke",z||W),U&&Q.setAttribute(T.SVG_ATTR_MAP.strokeOpacity,U),et&&Q.setAttribute(T.SVG_ATTR_MAP.lineWidth,et))},b.prototype._setColor=function(x,E,k){var D=this.get("el");if(!k){D.setAttribute(T.SVG_ATTR_MAP[E],"none");return}if(k=k.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(k)){var N=x.find("gradient",k);N||(N=x.addGradient(k)),D.setAttribute(T.SVG_ATTR_MAP[E],"url(#"+N+")")}else if(/^[p,P]{1}[\s]*\(/.test(k)){var N=x.find("pattern",k);N||(N=x.addPattern(k)),D.setAttribute(T.SVG_ATTR_MAP[E],"url(#"+N+")")}else D.setAttribute(T.SVG_ATTR_MAP[E],k)},b.prototype.shadow=function(x,E){var k=this.attr(),D=E||k,N=D.shadowOffsetX,z=D.shadowOffsetY,W=D.shadowBlur,X=D.shadowColor;(N||z||W||X)&&I.setShadow(this,x)},b.prototype.transform=function(x){var E=this.attr(),k=(x||E).matrix;k&&I.setTransform(this)},b.prototype.isInShape=function(x,E){return this.isPointInPath(x,E)},b.prototype.isPointInPath=function(x,E){var k=this.get("el"),D=this.get("canvas"),N=D.get("el").getBoundingClientRect(),z=x+N.left,W=E+N.top,X=document.elementFromPoint(z,W);return!!(X&&X.isEqualNode(k))},b.prototype.getHitLineWidth=function(){var x=this.attrs,E=x.lineWidth,k=x.lineAppendWidth;return this.isStroke()?E+k:0},b}(L.AbstractShape);S.default=w},87327:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(14982),P=d(45392),_=function(T){m.__extends(M,T);function M(){var A=T!==null&&T.apply(this,arguments)||this;return A.type="circle",A.canFill=!0,A.canStroke=!0,A}return M.prototype.getDefaultAttrs=function(){var A=T.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},A),{x:0,y:0,r:0})},M.prototype.createPath=function(A,p){var w=this.attr(),y=this.get("el");L.each(p||w,function(b,x){x==="x"||x==="y"?y.setAttribute("c"+x,b):I.SVG_ATTR_MAP[x]&&y.setAttribute(I.SVG_ATTR_MAP[x],b)})},M}(P.default);S.default=_},22716:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(14982),P=d(45392),_=function(T){m.__extends(M,T);function M(){var A=T!==null&&T.apply(this,arguments)||this;return A.type="dom",A.canFill=!1,A.canStroke=!1,A}return M.prototype.createPath=function(A,p){var w=this.attr(),y=this.get("el");if(L.each(p||w,function(k,D){I.SVG_ATTR_MAP[D]&&y.setAttribute(I.SVG_ATTR_MAP[D],k)}),typeof w.html=="function"){var b=w.html.call(this,w);if(b instanceof Element||b instanceof HTMLDocument){for(var x=y.childNodes,E=x.length-1;E>=0;E--)y.removeChild(x[E]);y.appendChild(b)}else y.innerHTML=b}else y.innerHTML=w.html},M}(P.default);S.default=_},61936:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(14982),P=d(45392),_=function(T){m.__extends(M,T);function M(){var A=T!==null&&T.apply(this,arguments)||this;return A.type="ellipse",A.canFill=!0,A.canStroke=!0,A}return M.prototype.getDefaultAttrs=function(){var A=T.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},A),{x:0,y:0,rx:0,ry:0})},M.prototype.createPath=function(A,p){var w=this.attr(),y=this.get("el");L.each(p||w,function(b,x){x==="x"||x==="y"?y.setAttribute("c"+x,b):I.SVG_ATTR_MAP[x]&&y.setAttribute(I.SVG_ATTR_MAP[x],b)})},M}(P.default);S.default=_},39346:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(14982),P=d(45392),_=function(T){m.__extends(M,T);function M(){var A=T!==null&&T.apply(this,arguments)||this;return A.type="image",A.canFill=!1,A.canStroke=!1,A}return M.prototype.getDefaultAttrs=function(){var A=T.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},A),{x:0,y:0,width:0,height:0})},M.prototype.createPath=function(A,p){var w=this,y=this.attr(),b=this.get("el");L.each(p||y,function(x,E){E==="img"?w._setImage(y.img):I.SVG_ATTR_MAP[E]&&b.setAttribute(I.SVG_ATTR_MAP[E],x)})},M.prototype.setAttr=function(A,p){this.attrs[A]=p,A==="img"&&this._setImage(p)},M.prototype._setImage=function(A){var p=this.attr(),w=this.get("el");if(L.isString(A))w.setAttribute("href",A);else if(A instanceof window.Image)p.width||(w.setAttribute("width",A.width),this.attr("width",A.width)),p.height||(w.setAttribute("height",A.height),this.attr("height",A.height)),w.setAttribute("href",A.src);else if(A instanceof HTMLElement&&L.isString(A.nodeName)&&A.nodeName.toUpperCase()==="CANVAS")w.setAttribute("href",A.toDataURL());else if(A instanceof ImageData){var y=document.createElement("canvas");y.setAttribute("width",""+A.width),y.setAttribute("height",""+A.height),y.getContext("2d").putImageData(A,0,0),p.width||(w.setAttribute("width",""+A.width),this.attr("width",A.width)),p.height||(w.setAttribute("height",""+A.height),this.attr("height",A.height)),w.setAttribute("href",y.toDataURL())}},M}(P.default);S.default=_},92671:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(45392);Object.defineProperty(S,"Base",{enumerable:!0,get:function(){return m.default}});var L=d(87327);Object.defineProperty(S,"Circle",{enumerable:!0,get:function(){return L.default}});var I=d(22716);Object.defineProperty(S,"Dom",{enumerable:!0,get:function(){return I.default}});var P=d(61936);Object.defineProperty(S,"Ellipse",{enumerable:!0,get:function(){return P.default}});var _=d(39346);Object.defineProperty(S,"Image",{enumerable:!0,get:function(){return _.default}});var T=d(52427);Object.defineProperty(S,"Line",{enumerable:!0,get:function(){return T.default}});var M=d(64507);Object.defineProperty(S,"Marker",{enumerable:!0,get:function(){return M.default}});var A=d(58944);Object.defineProperty(S,"Path",{enumerable:!0,get:function(){return A.default}});var p=d(3540);Object.defineProperty(S,"Polygon",{enumerable:!0,get:function(){return p.default}});var w=d(87078);Object.defineProperty(S,"Polyline",{enumerable:!0,get:function(){return w.default}});var y=d(59315);Object.defineProperty(S,"Rect",{enumerable:!0,get:function(){return y.default}});var b=d(65070);Object.defineProperty(S,"Text",{enumerable:!0,get:function(){return b.default}})},52427:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(51824),I=d(26169),P=d(14982),_=d(45392),T=function(M){m.__extends(A,M);function A(){var p=M!==null&&M.apply(this,arguments)||this;return p.type="line",p.canFill=!1,p.canStroke=!0,p}return A.prototype.getDefaultAttrs=function(){var p=M.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},p),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},A.prototype.createPath=function(p,w){var y=this.attr(),b=this.get("el");I.each(w||y,function(x,E){if(E==="startArrow"||E==="endArrow")if(x){var k=I.isObject(x)?p.addArrow(y,P.SVG_ATTR_MAP[E]):p.getDefaultArrow(y,P.SVG_ATTR_MAP[E]);b.setAttribute(P.SVG_ATTR_MAP[E],"url(#"+k+")")}else b.removeAttribute(P.SVG_ATTR_MAP[E]);else P.SVG_ATTR_MAP[E]&&b.setAttribute(P.SVG_ATTR_MAP[E],x)})},A.prototype.getTotalLength=function(){var p=this.attr(),w=p.x1,y=p.y1,b=p.x2,x=p.y2;return L.Line.length(w,y,b,x)},A.prototype.getPoint=function(p){var w=this.attr(),y=w.x1,b=w.y1,x=w.x2,E=w.y2;return L.Line.pointAt(y,b,x,E,p)},A}(_.default);S.default=T},64507:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(45392),P=d(13017),_=function(T){m.__extends(M,T);function M(){var A=T!==null&&T.apply(this,arguments)||this;return A.type="marker",A.canFill=!0,A.canStroke=!0,A}return M.prototype.createPath=function(A){var p=this.get("el");p.setAttribute("d",this._assembleMarker())},M.prototype._assembleMarker=function(){var A=this._getPath();return L.isArray(A)?A.map(function(p){return p.join(" ")}).join(""):A},M.prototype._getPath=function(){var A=this.attr(),p=A.x,w=A.y,y=A.r||A.radius,b=A.symbol||"circle",x;return L.isFunction(b)?x=b:x=P.default.get(b),x?x(p,w,y):(console.warn(x+" symbol is not exist."),null)},M.symbolsFactory=P.default,M}(I.default);S.default=_},13017:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d={circle:function(m,L,I){return[["M",m,L],["m",-I,0],["a",I,I,0,1,0,I*2,0],["a",I,I,0,1,0,-I*2,0]]},square:function(m,L,I){return[["M",m-I,L-I],["L",m+I,L-I],["L",m+I,L+I],["L",m-I,L+I],["Z"]]},diamond:function(m,L,I){return[["M",m-I,L],["L",m,L-I],["L",m+I,L],["L",m,L+I],["Z"]]},triangle:function(m,L,I){var P=I*Math.sin(1/3*Math.PI);return[["M",m-I,L+P],["L",m,L-P],["L",m+I,L+P],["z"]]},triangleDown:function(m,L,I){var P=I*Math.sin(1/3*Math.PI);return[["M",m-I,L-P],["L",m+I,L-P],["L",m,L+P],["Z"]]}};S.default={get:function(m){return d[m]},register:function(m,L){d[m]=L},remove:function(m){delete d[m]},getAll:function(){return d}}},58944:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(14982),P=d(45392),_=function(T){m.__extends(M,T);function M(){var A=T!==null&&T.apply(this,arguments)||this;return A.type="path",A.canFill=!0,A.canStroke=!0,A}return M.prototype.getDefaultAttrs=function(){var A=T.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},A),{startArrow:!1,endArrow:!1})},M.prototype.createPath=function(A,p){var w=this,y=this.attr(),b=this.get("el");L.each(p||y,function(x,E){if(E==="path"&&L.isArray(x))b.setAttribute("d",w._formatPath(x));else if(E==="startArrow"||E==="endArrow")if(x){var k=L.isObject(x)?A.addArrow(y,I.SVG_ATTR_MAP[E]):A.getDefaultArrow(y,I.SVG_ATTR_MAP[E]);b.setAttribute(I.SVG_ATTR_MAP[E],"url(#"+k+")")}else b.removeAttribute(I.SVG_ATTR_MAP[E]);else I.SVG_ATTR_MAP[E]&&b.setAttribute(I.SVG_ATTR_MAP[E],x)})},M.prototype._formatPath=function(A){var p=A.map(function(w){return w.join(" ")}).join("");return~p.indexOf("NaN")?"":p},M.prototype.getTotalLength=function(){var A=this.get("el");return A?A.getTotalLength():null},M.prototype.getPoint=function(A){var p=this.get("el"),w=this.getTotalLength();if(w===0)return null;var y=p?p.getPointAtLength(A*w):null;return y?{x:y.x,y:y.y}:null},M}(P.default);S.default=_},3540:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(14982),P=d(45392),_=function(T){m.__extends(M,T);function M(){var A=T!==null&&T.apply(this,arguments)||this;return A.type="polygon",A.canFill=!0,A.canStroke=!0,A}return M.prototype.createPath=function(A,p){var w=this.attr(),y=this.get("el");L.each(p||w,function(b,x){x==="points"&&L.isArray(b)&&b.length>=2?y.setAttribute("points",b.map(function(E){return E[0]+","+E[1]}).join(" ")):I.SVG_ATTR_MAP[x]&&y.setAttribute(I.SVG_ATTR_MAP[x],b)})},M}(P.default);S.default=_},87078:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(51824),I=d(51824),P=d(26169),_=d(14982),T=d(45392),M=function(A){m.__extends(p,A);function p(){var w=A!==null&&A.apply(this,arguments)||this;return w.type="polyline",w.canFill=!0,w.canStroke=!0,w}return p.prototype.getDefaultAttrs=function(){var w=A.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},w),{startArrow:!1,endArrow:!1})},p.prototype.onAttrChange=function(w,y,b){A.prototype.onAttrChange.call(this,w,y,b),["points"].indexOf(w)!==-1&&this._resetCache()},p.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},p.prototype.createPath=function(w,y){var b=this.attr(),x=this.get("el");P.each(y||b,function(E,k){k==="points"&&P.isArray(E)&&E.length>=2?x.setAttribute("points",E.map(function(D){return D[0]+","+D[1]}).join(" ")):_.SVG_ATTR_MAP[k]&&x.setAttribute(_.SVG_ATTR_MAP[k],E)})},p.prototype.getTotalLength=function(){var w=this.attr().points,y=this.get("totalLength");return P.isNil(y)?(this.set("totalLength",L.Polyline.length(w)),this.get("totalLength")):y},p.prototype.getPoint=function(w){var y=this.attr().points,b=this.get("tCache");b||(this._setTcache(),b=this.get("tCache"));var x,E;return P.each(b,function(k,D){w>=k[0]&&w<=k[1]&&(x=(w-k[0])/(k[1]-k[0]),E=D)}),I.Line.pointAt(y[E][0],y[E][1],y[E+1][0],y[E+1][1],x)},p.prototype._setTcache=function(){var w=this.attr().points;if(!(!w||w.length===0)){var y=this.getTotalLength();if(!(y<=0)){var b=0,x=[],E,k;P.each(w,function(D,N){w[N+1]&&(E=[],E[0]=b/y,k=I.Line.length(D[0],D[1],w[N+1][0],w[N+1][1]),b+=k,E[1]=b/y,x.push(E))}),this.set("tCache",x)}}},p.prototype.getStartTangent=function(){var w=this.attr().points,y=[];return y.push([w[1][0],w[1][1]]),y.push([w[0][0],w[0][1]]),y},p.prototype.getEndTangent=function(){var w=this.attr().points,y=w.length-1,b=[];return b.push([w[y-1][0],w[y-1][1]]),b.push([w[y][0],w[y][1]]),b},p}(T.default);S.default=M},59315:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(45392),P=d(14982),_=d(86035),T=function(M){m.__extends(A,M);function A(){var p=M!==null&&M.apply(this,arguments)||this;return p.type="rect",p.canFill=!0,p.canStroke=!0,p}return A.prototype.getDefaultAttrs=function(){var p=M.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},p),{x:0,y:0,width:0,height:0,radius:0})},A.prototype.createPath=function(p,w){var y=this,b=this.attr(),x=this.get("el"),E=!1,k=["x","y","width","height","radius"];L.each(w||b,function(D,N){k.indexOf(N)!==-1&&!E?(x.setAttribute("d",y._assembleRect(b)),E=!0):k.indexOf(N)===-1&&P.SVG_ATTR_MAP[N]&&x.setAttribute(P.SVG_ATTR_MAP[N],D)})},A.prototype._assembleRect=function(p){var w=p.x,y=p.y,b=p.width,x=p.height,E=p.radius;if(!E)return"M "+w+","+y+" l "+b+",0 l 0,"+x+" l"+-b+" 0 z";var k=_.parseRadius(E);L.isArray(E)?E.length===1?k.r1=k.r2=k.r3=k.r4=E[0]:E.length===2?(k.r1=k.r3=E[0],k.r2=k.r4=E[1]):E.length===3?(k.r1=E[0],k.r2=k.r4=E[1],k.r3=E[2]):(k.r1=E[0],k.r2=E[1],k.r3=E[2],k.r4=E[3]):k.r1=k.r2=k.r3=k.r4=E;var D=[["M "+(w+k.r1)+","+y],["l "+(b-k.r1-k.r2)+",0"],["a "+k.r2+","+k.r2+",0,0,1,"+k.r2+","+k.r2],["l 0,"+(x-k.r2-k.r3)],["a "+k.r3+","+k.r3+",0,0,1,"+-k.r3+","+k.r3],["l "+(k.r3+k.r4-b)+",0"],["a "+k.r4+","+k.r4+",0,0,1,"+-k.r4+","+-k.r4],["l 0,"+(k.r4+k.r1-x)],["a "+k.r1+","+k.r1+",0,0,1,"+k.r1+","+-k.r1],["z"]];return D.join(" ")},A}(I.default);S.default=T},65070:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(26169),I=d(93229),P=d(56143),_=d(14982),T=d(45392),M=.3,A={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},p={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},w={left:"left",start:"left",center:"middle",right:"end",end:"end"},y=function(b){m.__extends(x,b);function x(){var E=b!==null&&b.apply(this,arguments)||this;return E.type="text",E.canFill=!0,E.canStroke=!0,E}return x.prototype.getDefaultAttrs=function(){var E=b.prototype.getDefaultAttrs.call(this);return m.__assign(m.__assign({},E),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},x.prototype.createPath=function(E,k){var D=this,N=this.attr(),z=this.get("el");this._setFont(),L.each(k||N,function(W,X){X==="text"?D._setText(""+W):X==="matrix"&&W?P.setTransform(D):_.SVG_ATTR_MAP[X]&&z.setAttribute(_.SVG_ATTR_MAP[X],W)}),z.setAttribute("paint-order","stroke"),z.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},x.prototype._setFont=function(){var E=this.get("el"),k=this.attr(),D=k.textBaseline,N=k.textAlign,z=I.detect();z&&z.name==="firefox"?E.setAttribute("dominant-baseline",p[D]||"alphabetic"):E.setAttribute("alignment-baseline",A[D]||"baseline"),E.setAttribute("text-anchor",w[N]||"left")},x.prototype._setText=function(E){var k=this.get("el"),D=this.attr(),N=D.x,z=D.textBaseline,W=z===void 0?"bottom":z;if(!E)k.innerHTML="";else if(~E.indexOf(`
`)){var X=E.split(`
`),U=X.length-1,et="";L.each(X,function(Q,ct){ct===0?W==="alphabetic"?et+='<tspan x="'+N+'" dy="'+-U+'em">'+Q+"</tspan>":W==="top"?et+='<tspan x="'+N+'" dy="0.9em">'+Q+"</tspan>":W==="middle"?et+='<tspan x="'+N+'" dy="'+-(U-1)/2+'em">'+Q+"</tspan>":W==="bottom"?et+='<tspan x="'+N+'" dy="-'+(U+M)+'em">'+Q+"</tspan>":W==="hanging"&&(et+='<tspan x="'+N+'" dy="'+(-(U-1)-M)+'em">'+Q+"</tspan>"):et+='<tspan x="'+N+'" dy="1em">'+Q+"</tspan>"}),k.innerHTML=et}else k.innerHTML=E},x}(T.default);S.default=y},20783:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.moveTo=S.sortDom=S.createDom=S.createSVGElement=void 0;var m=d(26169),L=d(14982);function I(M){return document.createElementNS("http://www.w3.org/2000/svg",M)}S.createSVGElement=I;function P(M){var A=L.SHAPE_TO_TAGS[M.type],p=M.getParent();if(!A)throw new Error("the type "+M.type+" is not supported by svg");var w=I(A);if(M.get("id")&&(w.id=M.get("id")),M.set("el",w),M.set("attrs",{}),p){var y=p.get("el");y||(y=p.createDom(),p.set("el",y)),y.appendChild(w)}return w}S.createDom=P;function _(M,A){var p=M.get("el"),w=m.toArray(p.children).sort(A),y=document.createDocumentFragment();w.forEach(function(b){y.appendChild(b)}),p.appendChild(y)}S.sortDom=_;function T(M,A){var p=M.parentNode,w=Array.from(p.childNodes).filter(function(E){return E.nodeType===1&&E.nodeName.toLowerCase()!=="defs"}),y=w[A],b=w.indexOf(M);if(y){if(b>A)p.insertBefore(M,y);else if(b<A){var x=w[A+1];x?p.insertBefore(M,x):p.appendChild(M)}}else p.appendChild(M)}S.moveTo=T},38888:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.refreshElement=S.drawChildren=void 0;var m=d(56143),L=d(20783);function I(_,T){T.forEach(function(M){M.draw(_)})}S.drawChildren=I;function P(_,T){var M=_.get("canvas");if(M&&M.get("autoDraw")){var A=M.get("context"),p=_.getParent(),w=p?p.getChildren():[M],y=_.get("el");if(T==="remove"){var b=_.get("isClipShape");if(b){var x=y&&y.parentNode,E=x&&x.parentNode;x&&E&&E.removeChild(x)}else y&&y.parentNode&&y.parentNode.removeChild(y)}else if(T==="show")y.setAttribute("visibility","visible");else if(T==="hide")y.setAttribute("visibility","hidden");else if(T==="zIndex")L.moveTo(y,w.indexOf(_));else if(T==="sort"){var k=_.get("children");k&&k.length&&L.sortDom(_,function(D,N){return k.indexOf(D)-k.indexOf(N)?1:0})}else T==="clear"?y&&(y.innerHTML=""):T==="matrix"?m.setTransform(_):T==="clip"?m.setClip(_,A):T==="attr"||T==="add"&&_.draw(A)}}S.refreshElement=P},86035:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parsePath=S.parseRadius=void 0;var m=d(26169),L=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,I=/[^\s,]+/gi;function P(T){var M=0,A=0,p=0,w=0;return m.isArray(T)?T.length===1?M=A=p=w=T[0]:T.length===2?(M=p=T[0],A=w=T[1]):T.length===3?(M=T[0],A=w=T[1],p=T[2]):(M=T[0],A=T[1],p=T[2],w=T[3]):M=A=p=w=T,{r1:M,r2:A,r3:p,r4:w}}S.parseRadius=P;function _(T){if(T=T||[],m.isArray(T))return T;if(m.isString(T))return T=T.match(L),m.each(T,function(M,A){if(M=M.match(I),M[0].length>1){var p=M[0].charAt(0);M.splice(1,0,M[0].substr(1)),M[0]=p}m.each(M,function(w,y){isNaN(w)||(M[y]=+w)}),T[A]=M}),T}S.parsePath=_},56143:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.setClip=S.setTransform=S.setShadow=void 0;var m=d(20783);function L(_,T){var M=_.cfg.el,A=_.attr(),p={dx:A.shadowOffsetX,dy:A.shadowOffsetY,blur:A.shadowBlur,color:A.shadowColor};if(!p.dx&&!p.dy&&!p.blur&&!p.color)M.removeAttribute("filter");else{var w=T.find("filter",p);w||(w=T.addShadow(p)),M.setAttribute("filter","url(#"+w+")")}}S.setShadow=L;function I(_){var T=_.attr().matrix;if(T){for(var M=_.cfg.el,A=[],p=0;p<9;p+=3)A.push(T[p]+","+T[p+1]);A=A.join(","),A.indexOf("NaN")===-1?M.setAttribute("transform","matrix("+A+")"):console.warn("invalid matrix:",T)}}S.setTransform=I;function P(_,T){var M=_.getClip(),A=_.get("el");if(!M)A.removeAttribute("clip-path");else if(M&&!A.hasAttribute("clip-path")){m.createDom(M),M.createPath(T);var p=T.addClip(M);A.setAttribute("clip-path","url(#"+p+")")}}S.setClip=P},15451:function(){},61343:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.registerAnimation=S.getAnimation=void 0;var d={};function m(I){return d[I.toLowerCase()]}S.getAnimation=m;function L(I,P){d[I.toLowerCase()]=P}S.registerAnimation=L},23361:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.doGroupAppearAnimate=S.doAnimate=S.getDefaultAnimateCfg=S.DEFAULT_ANIMATE_CFG=void 0;var m=d(44614),L=d(26169),I=d(43599),P=d(61343);S.DEFAULT_ANIMATE_CFG={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}};var _={interval:function(y){return{enter:{animation:y.isRect?y.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:y.isPolar&&y.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},T={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(y){var b;return y.isRect?b=y.isTransposed?"grow-in-x":"grow-in-y":(b="grow-in-xy",y.isPolar&&y.isTransposed&&(b="wave-in")),{animation:b}},schema:function(y){var b;return y.isRect?b=y.isTransposed?"grow-in-x":"grow-in-y":b="grow-in-xy",{animation:b}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function M(y,b){return{delay:L.isFunction(y.delay)?y.delay(b):y.delay,easing:L.isFunction(y.easing)?y.easing(b):y.easing,duration:L.isFunction(y.duration)?y.duration(b):y.duration,callback:y.callback}}function A(y,b,x){var E=_[y];return E&&(L.isFunction(E)&&(E=E(b)),E=L.deepMix({},S.DEFAULT_ANIMATE_CFG,E),x)?E[x]:E}S.getDefaultAnimateCfg=A;function p(y,b,x){var E=L.get(y.get("origin"),"data",I.FIELD_ORIGIN),k=b.animation,D=M(b,E);if(k){var N=P.getAnimation(k);N&&N(y,D,x)}else y.animate(x.toAttrs,D)}S.doAnimate=p;function w(y,b,x,E,k){if(T[x]){var D=T[x](E),N=P.getAnimation(L.get(D,"animation",""));if(N){var z=m.__assign(m.__assign(m.__assign({},S.DEFAULT_ANIMATE_CFG.appear),D),b);y.stopAnimate(),N(y,z,{coordinate:E,minYPoint:k,toAttrs:null})}}}S.doGroupAppearAnimate=w},52961:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=m.__importDefault(d(49336)),I=function(P){m.__extends(_,P);function _(T){var M=P.call(this)||this;M.destroyed=!1;var A=T.visible,p=A===void 0?!0:A;return M.visible=p,M}return _.prototype.show=function(){var T=this.visible;T||this.changeVisible(!0)},_.prototype.hide=function(){var T=this.visible;T&&this.changeVisible(!1)},_.prototype.destroy=function(){this.off(),this.destroyed=!0},_.prototype.changeVisible=function(T){this.visible!==T&&(this.visible=T)},_}(L.default);S.default=I},13595:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Controller=void 0;var m=d(26169),L=function(){function I(P){this.visible=!0,this.components=[],this.view=P}return I.prototype.clear=function(){m.each(this.components,function(P){P.component.destroy()}),this.components=[]},I.prototype.destroy=function(){this.clear()},I.prototype.getComponents=function(){return this.components},I.prototype.changeVisible=function(P){this.visible!==P&&(this.components.forEach(function(_){P?_.component.show():_.component.hide()}),this.visible=P)},I}();S.Controller=L},50058:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(44614),I=d(13595),P=250,_=function(w,y){var b=y.x-w.x,x=y.y-w.y;return Math.abs(b)>Math.abs(x)?b>0?"right":"left":x>0?"down":"up"},T=function(w,y){var b=Math.abs(y.x-w.x),x=Math.abs(y.y-w.y);return Math.sqrt(b*b+x*x)},M=function(w,y){var b=(w.x+y.x)/2,x=(w.y+y.y)/2;return{x:b,y:x}},A=function(w,y){if(!!w){for(var b=[],x=w.length,E=0;E<x;E++){var k=w[E],D=k.clientX,N=k.clientY,z=y.getPointByClient(D,N);b.push(z)}return b}},p=function(w){L.__extends(y,w);function y(b){var x=w.call(this,b)||this;return x.processEvent={},x.touchStart=function(E){var k=A(E.originalEvent.touches,x.canvas);!k||(E.points=k,x.reset(),x.startTime=Date.now(),x.startPoints=k,k.length>1?(x.startDistance=T(k[0],k[1]),x.center=M(k[0],k[1])):x.pressTimeout=setTimeout(function(){var D="press";E.direction="none",x.emitStart(D,E),x.emitEvent(D,E),x.eventType=D},P))},x.touchMove=function(E){var k=A(E.originalEvent.touches,x.canvas);if(!!k){x.clearPressTimeout(),E.points=k;var D=x.startPoints;if(!!D)if(k.length>1){var N=x.startDistance,z=T(k[0],k[1]);E.zoom=z/N,E.center=x.center,x.emitStart("pinch",E),x.emitEvent("pinch",E)}else{var W=k[0].x-D[0].x,X=k[0].y-D[0].y,U=x.direction||_(D[0],k[0]);x.direction=U;var et=x.getEventType(k);E.direction=U,E.deltaX=W,E.deltaY=X,x.emitStart(et,E),x.emitEvent(et,E);var Q=x.lastMoveTime,ct=Date.now();ct-Q>0&&(x.prevMoveTime=Q,x.prevMovePoints=x.lastMovePoints,x.lastMoveTime=ct,x.lastMovePoints=k)}}},x.touchEnd=function(E){x.emitEnd(E);var k=x.lastMoveTime,D=Date.now();if(D-k<100){var N=x.prevMoveTime||x.startTime,z=k-N;if(z>0){var W=x.prevMovePoints||x.startPoints,X=x.lastMovePoints,U=T(W[0],X[0])/z;U>.3&&(E.velocity=U,E.direction=_(W[0],X[0]),x.emitEvent("swipe",E))}}x.reset();var et=E.touches;et&&et.length>0&&x.touchStart(E)},x.canvas=b.getCanvas(),x.delegateEvent(),x.processEvent={},x}return Object.defineProperty(y.prototype,"name",{get:function(){return"gesture"},enumerable:!1,configurable:!0}),y.prototype.init=function(){},y.prototype.render=function(){},y.prototype.layout=function(){},y.prototype.update=function(){},y.prototype.destroy=function(){this.reset(),this.offEvent(),this.processEvent=null},y.prototype.delegateEvent=function(){this.canvas.on("touchstart",this.touchStart),this.canvas.on("touchmove",this.touchMove),this.canvas.on("touchend",this.touchEnd)},y.prototype.offEvent=function(){this.canvas.off("touchstart",this.touchStart),this.canvas.off("touchmove",this.touchMove),this.canvas.off("touchend",this.touchEnd)},y.prototype.emitEvent=function(b,x){var E=this.view;E.emit(b,x)},y.prototype.emitStart=function(b,x){this.isProcess(b)||(this.enable(b),this.emitEvent(b+"start",x))},y.prototype.emitEnd=function(b){var x=this,E=this.processEvent;Object.keys(E).forEach(function(k){x.emitEvent(k+"end",b),delete E[k]})},y.prototype.enable=function(b){this.processEvent[b]=!0},y.prototype.isProcess=function(b){return this.processEvent[b]},y.prototype.reset=function(){this.clearPressTimeout(),this.startTime=0,this.startPoints=null,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoints=null,this.lastMoveTime=0,this.lastMovePoints=null},y.prototype.clearPressTimeout=function(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=0)},y.prototype.getEventType=function(b){var x=this,E=x.eventType,k=x.view,D=x.startTime,N=x.startPoints;if(E)return E;var z,W=k.getEvents().pan;if(!W||!W.length)z="press";else{var X=Date.now();X-D>P&&T(N[0],b[0])<10?z="press":z="pan"}return this.eventType=z,z},y}(I.Controller);S.Z=p},77684:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(44614),I=d(26169),P=d(80292),_=d(52715),T=d(85433),M=d(71866),A=d(13595);function p(y){for(var b=[],x=function(k){var D=y[k],N=I.find(b,function(z){return z.color===D.color&&z.name===D.name&&z.value===D.value&&z.title===D.title});N||b.push(D)},E=0;E<y.length;E++)x(E);return b}var w=function(y){L.__extends(b,y);function b(){var x=y!==null&&y.apply(this,arguments)||this;return x.isLocked=!1,x}return Object.defineProperty(b.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),b.prototype.init=function(){},b.prototype.isVisible=function(){var x=this.view.getOptions().tooltip;return x!==!1},b.prototype.render=function(){},b.prototype.showTooltip=function(x){if(this.point=x,!!this.isVisible()){var E=this.view,k=this.getTooltipItems(x);if(!k.length){this.hideTooltip();return}var D=this.getTitle(k),N={x:k[0].x,y:k[0].y};E.emit("tooltip:show",L.__assign({items:k,title:D},x));var z=this.getTooltipCfg(),W=z.follow,X=z.showMarkers,U=z.showCrosshairs,et=z.showContent,Q=z.marker,ct=this.items,Lt=this.title;if(!I.isEqual(Lt,D)||!I.isEqual(ct,k)?(E.emit("tooltip:change",L.__assign({items:k,title:D},x)),et&&(this.tooltip||this.renderTooltip(),this.tooltip.update(I.mix({},z,{items:k,title:D},W?x:{})),this.tooltip.show()),X&&this.renderTooltipMarkers(k,Q)):(this.tooltip&&W&&(this.tooltip.update(x),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=k,this.title=D,U){var _t=I.get(z,["crosshairs","follow"],!1);this.renderCrosshairs(_t?x:N,z)}}},b.prototype.hideTooltip=function(){var x=this.getTooltipCfg().follow;if(!x){this.point=null;return}var E=this.tooltipMarkersGroup;E&&E.hide();var k=this.xCrosshair,D=this.yCrosshair;k&&k.hide(),D&&D.hide();var N=this.tooltip;N&&N.hide(),this.view.emit("tooltip:hide",{}),this.point=null},b.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},b.prototype.unlockTooltip=function(){this.isLocked=!1;var x=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(x.capture)},b.prototype.isTooltipLocked=function(){return this.isLocked},b.prototype.clear=function(){var x=this,E=x.tooltip,k=x.xCrosshair,D=x.yCrosshair,N=x.tooltipMarkersGroup;E&&(E.hide(),E.clear()),k&&k.clear(),D&&D.clear(),N&&N.clear()},b.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},b.prototype.changeVisible=function(x){if(this.visible!==x){var E=this,k=E.tooltip,D=E.tooltipMarkersGroup,N=E.xCrosshair,z=E.yCrosshair;x?(k&&k.show(),D&&D.show(),N&&N.show(),z&&z.show()):(k&&k.hide(),D&&D.hide(),N&&N.hide(),z&&z.hide()),this.visible=x}},b.prototype.getTooltipItems=function(x){var E=this.findItemsFromView(this.view,x);if(E.length){E=I.flatten(E);for(var k=0,D=E;k<D.length;k++)for(var N=D[k],z=0,W=N;z<W.length;z++){var X=W[z],U=X.mappingData,et=U.x,Q=U.y;X.x=I.isArray(et)?et[et.length-1]:et,X.y=I.isArray(Q)?Q[Q.length-1]:Q}var ct=this.getTooltipCfg().shared;if(ct===!1&&E.length>1){for(var Lt=E[0],_t=Math.abs(x.y-Lt[0].y),yt=0,bt=E;yt<bt.length;yt++){var Mt=bt[yt],xt=Math.abs(x.y-Mt[0].y);xt<=_t&&(Lt=Mt,_t=xt)}E=[Lt]}return p(I.flatten(E))}return[]},b.prototype.layout=function(){},b.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var x=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:x.get("width"),y:x.get("height")}})}},b.prototype.getTooltipCfg=function(){var x=this.view,E=x.getOptions().tooltip,k=x.getTheme(),D=I.get(k,["components","tooltip"],{}),N=I.isUndefined(I.get(E,"enterable"))?D.enterable:I.get(E,"enterable");return I.deepMix({},D,E,{capture:!!(N||this.isLocked)})},b.prototype.getTitle=function(x){var E=x[0].title||x[0].name;return this.title=E,E},b.prototype.renderTooltip=function(){var x=this.view.getCanvas(),E={start:{x:0,y:0},end:{x:x.get("width"),y:x.get("height")}},k=this.getTooltipCfg(),D=new P.HtmlTooltip(L.__assign(L.__assign({parent:x.get("el").parentNode,region:E},k),{visible:!1,crosshairs:null}));D.init(),this.tooltip=D},b.prototype.renderTooltipMarkers=function(x,E){for(var k=this.getTooltipMarkersGroup(),D=0,N=x;D<N.length;D++){var z=N[D],W=z.x,X=z.y,U=L.__assign(L.__assign({fill:z.color,symbol:"circle",shadowColor:z.color},E),{x:W,y:X});k.addShape("marker",{attrs:U})}},b.prototype.renderCrosshairs=function(x,E){var k=I.get(E,["crosshairs","type"],"x");k==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(x,E)):k==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(x,E)):k==="xy"&&(this.renderXCrosshairs(x,E),this.renderYCrosshairs(x,E))},b.prototype.renderXCrosshairs=function(x,E){var k=this.getViewWithGeometry(this.view).getCoordinate();if(!!_.isPointInCoordinate(k,x)){var D,N;if(k.isRect)k.isTransposed?(D={x:k.start.x,y:x.y},N={x:k.end.x,y:x.y}):(D={x:x.x,y:k.end.y},N={x:x.x,y:k.start.y});else{var z=_.getAngleByPoint(k,x),W=k.getCenter(),X=k.getRadius();N=T.polarToCartesian(W.x,W.y,X,z),D=W}var U=I.deepMix({start:D,end:N,container:this.getTooltipCrosshairsGroup()},I.get(E,"crosshairs",{}),this.getCrosshairsText("x",x,E));delete U.type;var et=this.xCrosshair;et?et.update(U):(et=new P.Crosshair.Line(U),et.init()),et.render(),et.show(),this.xCrosshair=et}},b.prototype.renderYCrosshairs=function(x,E){var k=this.getViewWithGeometry(this.view).getCoordinate();if(!!_.isPointInCoordinate(k,x)){var D,N;if(k.isRect){var z=void 0,W=void 0;k.isTransposed?(z={x:x.x,y:k.end.y},W={x:x.x,y:k.start.y}):(z={x:k.start.x,y:x.y},W={x:k.end.x,y:x.y}),D={start:z,end:W},N="Line"}else D={center:k.getCenter(),radius:_.getDistanceToCenter(k,x),startAngle:k.startAngle,endAngle:k.endAngle},N="Circle";D=I.deepMix({container:this.getTooltipCrosshairsGroup()},D,I.get(E,"crosshairs",{}),this.getCrosshairsText("y",x,E)),delete D.type;var X=this.yCrosshair;X?k.isRect&&X.get("type")==="circle"||!k.isRect&&X.get("type")==="line"?(X=new P.Crosshair[N](D),X.init()):X.update(D):(X=new P.Crosshair[N](D),X.init()),X.render(),X.show(),this.yCrosshair=X}},b.prototype.getCrosshairsText=function(x,E,k){var D=I.get(k,["crosshairs","text"]),N=I.get(k,["crosshairs","follow"]),z=this.items;if(D){var W=this.getViewWithGeometry(this.view),X=z[0],U=W.getXScale(),et=W.getYScales()[0],Q=void 0,ct=void 0;if(N){var Lt=this.view.getCoordinate().invert(E);Q=U.invert(Lt.x),ct=et.invert(Lt.y)}else Q=X.data[U.field],ct=X.data[et.field];var _t=x==="x"?Q:ct;return I.isFunction(D)?D=D(x,_t,z,E):D.content=_t,{text:D}}},b.prototype.getGuideGroup=function(){if(!this.guideGroup){var x=this.view.foregroundGroup;this.guideGroup=x.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},b.prototype.getTooltipMarkersGroup=function(){var x=this.tooltipMarkersGroup;return x&&!x.destroyed?(x.clear(),x.show()):(x=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),x.toFront(),this.tooltipMarkersGroup=x),x},b.prototype.getTooltipCrosshairsGroup=function(){var x=this.tooltipCrosshairsGroup;return x||(x=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),x.toBack(),this.tooltipCrosshairsGroup=x),x},b.prototype.getTooltipItemsByHitShape=function(x,E,k){var D=[],N=x.container,z=N.getShape(E.x,E.y);if(z&&z.get("visible")&&z.get("origin")){var W=z.get("origin").mappingData,X=M.getTooltipItems(W,x,k);X.length&&D.push(X)}return D},b.prototype.getTooltipItemsByFindData=function(x,E,k){var D=[],N=x.dataArray;x.sort(N);for(var z=0,W=N;z<W.length;z++){var X=W[z],U=M.findDataByPoint(E,X,x);if(U){var et=x.getElementId(U),Q=x.elementsMap[et];if(x.type==="heatmap"||Q.visible){var ct=M.getTooltipItems(U,x,k);ct.length&&D.push(ct)}}}return D},b.prototype.findItemsFromView=function(x,E){if(x.getOptions().tooltip===!1)return[];for(var k=[],D=x.geometries,N=this.getTooltipCfg(),z=N.shared,W=N.title,X=0,U=D;X<U.length;X++){var et=U[X];if(et.visible&&et.tooltipOption!==!1){var Q=et.type,ct=void 0;["point","edge","polygon"].includes(Q)?ct=this.getTooltipItemsByHitShape(et,E,W):["area","line","path","heatmap"].includes(Q)?ct=this.getTooltipItemsByFindData(et,E,W):z!==!1?ct=this.getTooltipItemsByFindData(et,E,W):ct=this.getTooltipItemsByHitShape(et,E,W),ct.length&&k.push(ct)}}for(var Lt=0,_t=x.views;Lt<_t.length;Lt++){var yt=_t[Lt];k=k.concat(this.findItemsFromView(yt,E))}return k},b.prototype.getViewWithGeometry=function(x){var E=this;return x.geometries.length?x:I.find(x.views,function(k){return E.getViewWithGeometry(k)})},b}(A.Controller);S.Z=w},43599:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.COMPONENT_MAX_VIEW_PERCENTAGE=S.MIN_CHART_HEIGHT=S.MIN_CHART_WIDTH=S.FIELD_ORIGIN=S.GROUP_ATTRS=S.ELEMENT_STATE=S.PLOT_EVENTS=S.VIEW_LIFE_CIRCLE=S.GROUP_Z_INDEX=S.COMPONENT_TYPE=S.DIRECTION=S.LAYER=void 0;var d;(function(T){T.FORE="fore",T.MID="mid",T.BG="bg"})(d=S.LAYER||(S.LAYER={}));var m;(function(T){T.TOP="top",T.TOP_LEFT="top-left",T.TOP_RIGHT="top-right",T.RIGHT="right",T.RIGHT_TOP="right-top",T.RIGHT_BOTTOM="right-bottom",T.LEFT="left",T.LEFT_TOP="left-top",T.LEFT_BOTTOM="left-bottom",T.BOTTOM="bottom",T.BOTTOM_LEFT="bottom-left",T.BOTTOM_RIGHT="bottom-right",T.RADIUS="radius",T.CIRCLE="circle",T.NONE="none"})(m=S.DIRECTION||(S.DIRECTION={}));var L;(function(T){T.AXIS="axis",T.GRID="grid",T.LEGEND="legend",T.TOOLTIP="tooltip",T.ANNOTATION="annotation",T.OTHER="other"})(L=S.COMPONENT_TYPE||(S.COMPONENT_TYPE={})),S.GROUP_Z_INDEX={FORE:3,MID:2,BG:1};var I;(function(T){T.BEFORE_RENDER="beforerender",T.AFTER_RENDER="afterrender",T.BEFORE_PAINT="beforepaint",T.AFTER_PAINT="afterpaint",T.BEFORE_CHANGE_DATA="beforechangedata",T.AFTER_CHANGE_DATA="afterchangedata",T.BEFORE_CLEAR="beforeclear",T.AFTER_CLEAR="afterclear",T.BEFORE_DESTROY="beforedestroy"})(I=S.VIEW_LIFE_CIRCLE||(S.VIEW_LIFE_CIRCLE={}));var P;(function(T){T.MOUSE_ENTER="plot:mouseenter",T.MOUSE_DOWN="plot:mousedown",T.MOUSE_MOVE="plot:mousemove",T.MOUSE_UP="plot:mouseup",T.MOUSE_LEAVE="plot:mouseleave",T.TOUCH_START="plot:touchstart",T.TOUCH_MOVE="plot:touchmove",T.TOUCH_END="plot:touchend",T.TOUCH_CANCEL="plot:touchcancel",T.CLICK="plot:click",T.DBLCLICK="plot:dblclick",T.CONTEXTMENU="plot:contextmenu",T.LEAVE="plot:leave",T.ENTER="plot:enter"})(P=S.PLOT_EVENTS||(S.PLOT_EVENTS={}));var _;(function(T){T.ACTIVE="active",T.INACTIVE="inactive",T.SELECTED="selected",T.DEFAULT="default"})(_=S.ELEMENT_STATE||(S.ELEMENT_STATE={})),S.GROUP_ATTRS=["color","shape","size"],S.FIELD_ORIGIN="_origin",S.MIN_CHART_WIDTH=1,S.MIN_CHART_HEIGHT=1,S.COMPONENT_MAX_VIEW_PERCENTAGE=.25},80292:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Slider=S.HtmlTooltip=S.ContinuousLegend=S.CategoryLegend=S.CircleGrid=S.LineGrid=S.CircleAxis=S.LineAxis=S.Annotation=S.Crosshair=S.Component=S.GroupComponent=S.HtmlComponent=void 0;var m=d(23443);Object.defineProperty(S,"Event",{enumerable:!0,get:function(){return m.Event}}),Object.defineProperty(S,"AbstractGroup",{enumerable:!0,get:function(){return m.AbstractGroup}}),Object.defineProperty(S,"AbstractShape",{enumerable:!0,get:function(){return m.AbstractShape}});var L=d(63638);Object.defineProperty(S,"registerAdjust",{enumerable:!0,get:function(){return L.registerAdjust}}),Object.defineProperty(S,"getAdjust",{enumerable:!0,get:function(){return L.getAdjust}}),Object.defineProperty(S,"Adjust",{enumerable:!0,get:function(){return L.Adjust}});var I=d(76499);Object.defineProperty(S,"getAttribute",{enumerable:!0,get:function(){return I.getAttribute}}),Object.defineProperty(S,"Attribute",{enumerable:!0,get:function(){return I.Attribute}});var P=d(36652);Object.defineProperty(S,"Color",{enumerable:!0,get:function(){return P.Color}});var _=d(14533);Object.defineProperty(S,"getCoordinate",{enumerable:!0,get:function(){return _.getCoordinate}}),Object.defineProperty(S,"registerCoordinate",{enumerable:!0,get:function(){return _.registerCoordinate}}),Object.defineProperty(S,"Coordinate",{enumerable:!0,get:function(){return _.Coordinate}});var T=d(65624);Object.defineProperty(S,"getScale",{enumerable:!0,get:function(){return T.getScale}}),Object.defineProperty(S,"registerScale",{enumerable:!0,get:function(){return T.registerScale}}),Object.defineProperty(S,"Scale",{enumerable:!0,get:function(){return T.Scale}});var M=d(41026);Object.defineProperty(S,"Annotation",{enumerable:!0,get:function(){return M.Annotation}}),Object.defineProperty(S,"Component",{enumerable:!0,get:function(){return M.Component}}),Object.defineProperty(S,"Crosshair",{enumerable:!0,get:function(){return M.Crosshair}}),Object.defineProperty(S,"GroupComponent",{enumerable:!0,get:function(){return M.GroupComponent}}),Object.defineProperty(S,"HtmlComponent",{enumerable:!0,get:function(){return M.HtmlComponent}}),Object.defineProperty(S,"Slider",{enumerable:!0,get:function(){return M.Slider}});var A=M.Axis.Line,p=M.Axis.Circle;S.LineAxis=A,S.CircleAxis=p;var w=M.Grid.Line,y=M.Grid.Circle;S.LineGrid=w,S.CircleGrid=y;var b=M.Legend.Category,x=M.Legend.Continuous;S.CategoryLegend=b,S.ContinuousLegend=x;var E=M.Tooltip.Html;S.HtmlTooltip=E},4329:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(44614),I=d(26169),P=d(23361),_=L.__importDefault(d(52961)),T=d(85433),M=d(82614),A=function(p){L.__extends(w,p);function w(y){var b=p.call(this,y)||this;b.states=[];var x=y.shapeFactory,E=y.container,k=y.offscreenGroup,D=y.visible,N=D===void 0?!0:D;return b.shapeFactory=x,b.container=E,b.offscreenGroup=k,b.visible=N,b}return w.prototype.draw=function(y,b){b===void 0&&(b=!1),this.model=y,this.data=y.data,this.shapeType=this.getShapeType(y),this.drawShape(y,b),this.visible===!1&&this.changeVisible(!1)},w.prototype.update=function(y){var b=this,x=b.shapeFactory,E=b.shape;if(!!E){this.model=y,this.data=y.data,this.shapeType=this.getShapeType(y),this.setShapeInfo(E,y);var k=this.getOffscreenGroup(),D=x.drawShape(this.shapeType,y,k);D.cfg.data=this.data,D.cfg.origin=y,this.syncShapeStyle(E,D,"",this.getAnimateCfg("update"))}},w.prototype.destroy=function(){var y=this,b=y.shapeFactory,x=y.shape;if(x){var E=this.getAnimateCfg("leave");E?P.doAnimate(x,E,{coordinate:b.coordinate,toAttrs:L.__assign({},x.attr())}):x.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,p.prototype.destroy.call(this)},w.prototype.changeVisible=function(y){p.prototype.changeVisible.call(this,y),y?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(b){b.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(b){b.hide()}))},w.prototype.setState=function(y,b){var x=this,E=this,k=E.states,D=E.shapeFactory,N=E.model,z=E.shape,W=E.shapeType,X=k.indexOf(y);if(b){if(X>-1)return;k.push(y),(y==="active"||y==="selected")&&z.toFront()}else{if(X===-1)return;k.splice(X,1),(y==="active"||y==="selected")&&z.toBack()}var U=D.drawShape(W,N,this.getOffscreenGroup());k.length?k.forEach(function(Q){x.syncShapeStyle(z,U,Q,null)}):this.syncShapeStyle(z,U,"reset",null),U.remove(!0);var et={state:y,stateStatus:b,element:this,target:this.container};this.container.emit("statechange",et),M.propagationDelegate(this.shape,"statechange",et)},w.prototype.clearStates=function(){var y=this,b=this.states;I.each(b,function(x){y.setState(x,!1)}),this.states=[]},w.prototype.hasState=function(y){return this.states.includes(y)},w.prototype.getStates=function(){return this.states},w.prototype.getData=function(){return this.data},w.prototype.getModel=function(){return this.model},w.prototype.getBBox=function(){var y=this,b=y.shape,x=y.labelShape,E={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return b&&(E=b.getCanvasBBox()),x&&x.forEach(function(k){var D=k.getCanvasBBox();E.x=Math.min(D.x,E.x),E.y=Math.min(D.y,E.y),E.minX=Math.min(D.minX,E.minX),E.minY=Math.min(D.minY,E.minY),E.maxX=Math.max(D.maxX,E.maxX),E.maxY=Math.max(D.maxY,E.maxY)}),E.width=E.maxX-E.minX,E.height=E.maxY-E.minY,E},w.prototype.getStatesStyle=function(){if(!this.statesStyle){var y=this,b=y.shapeType,x=y.geometry,E=y.shapeFactory,k=x.stateOption,D=E.defaultShapeType,N=E.theme[b]||E.theme[D];this.statesStyle=I.deepMix({},N,k)}return this.statesStyle},w.prototype.getStateStyle=function(y,b){var x=this.getStatesStyle(),E=I.get(x,[y,"style"],{}),k=E[b]||E;return I.isFunction(k)?k(this):k},w.prototype.getAnimateCfg=function(y){var b=this.animate;return b?b[y]:null},w.prototype.drawShape=function(y,b){b===void 0&&(b=!1);var x=this,E=x.shapeFactory,k=x.container,D=x.shapeType;if(this.shape=E.drawShape(D,y,k),this.shape){this.setShapeInfo(this.shape,y);var N=this.shape.cfg.name;N?I.isString(N)&&(this.shape.cfg.name=["element",N]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var z=b?"enter":"appear",W=this.getAnimateCfg(z);W&&P.doAnimate(this.shape,W,{coordinate:E.coordinate,toAttrs:L.__assign({},this.shape.attr())})}},w.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var y=this.container.getGroupBase();this.offscreenGroup=new y({})}return this.offscreenGroup},w.prototype.setShapeInfo=function(y,b){var x=this;if(y.cfg.origin=b,y.cfg.element=this,y.isGroup()){var E=y.get("children");E.forEach(function(k){x.setShapeInfo(k,b)})}},w.prototype.syncShapeStyle=function(y,b,x,E,k){if(x===void 0&&(x=""),k===void 0&&(k=0),y.isGroup())for(var D=y.get("children"),N=b.get("children"),z=0;z<D.length;z++)this.syncShapeStyle(D[z],N[z],x,E,k+z);else{if(x&&x!=="reset"){var W=y.get("name");I.isArray(W)&&(W=W[1]);var X=this.getStateStyle(x,W||k);b.attr(X)}var U=T.getReplaceAttrs(y,b);this.animate?E?P.doAnimate(y,E,{coordinate:this.shapeFactory.coordinate,toAttrs:U,shapeModel:this.model}):x?(y.stopAnimate(),y.animate(U,{duration:300})):y.attr(U):y.attr(U)}},w.prototype.getShapeType=function(y){var b=I.get(y,"shape");return I.isArray(b)?b[0]:b},w}(_.default);m=A},74236:function(lt,S,d){"use strict";var m;m={value:!0},S.iV=m=m=void 0;var L=d(44614),I=d(96466),P=d(26877);m=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],m=["cross","tick","plus","hyphen","line"];function _(T,M,A,p,w){var y=P.getStyle(M,w,!w,"r"),b=T.parsePoints(M.points),x=b[0];if(M.isStack)x=b[1];else if(b.length>1){for(var E=A.addGroup(),k=0,D=b;k<D.length;k++){var N=D[k];E.addShape({type:"marker",attrs:L.__assign(L.__assign(L.__assign({},y),{symbol:I.MarkerSymbols[p]||p}),N)})}return E}return A.addShape({type:"marker",attrs:L.__assign(L.__assign(L.__assign({},y),{symbol:I.MarkerSymbols[p]||p}),x)})}S.iV=_},26877:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getStyle=void 0;var m=d(44614),L=d(26169);function I(P,_,T,M){M===void 0&&(M="");var A=P.style,p=A===void 0?{}:A,w=P.defaultStyle,y=P.color,b=P.size,x=m.__assign(m.__assign({},w),p);return y&&(_&&(p.stroke||(x.stroke=y)),T&&(p.fill||(x.fill=y))),M&&L.isNil(p[M])&&!L.isNil(b)&&(x[M]=b),x}S.getStyle=I},24902:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.convertPolarPath=S.convertNormalPath=S.getSplinePath=S.getLinePath=S.catmullRom2bezier=S.smoothBezier=void 0;var m=d(36694),L=d(26169),I=d(52715);function P(x,E){var k=[];if(x.length){k.push(["M",x[0].x,x[0].y]);for(var D=1,N=x.length;D<N;D+=1){var z=x[D];k.push(["L",z.x,z.y])}E&&k.push(["Z"])}return k}function _(x,E){for(var k=[x[0]],D=1,N=x.length;D<N;D=D+2){var z=E.convert({x:x[D],y:x[D+1]});k.push(z.x,z.y)}return k}function T(x,E,k){var D=k.isTransposed,N=k.startAngle,z=k.endAngle,W={x:x[1],y:x[2]},X={x:E[1],y:E[2]},U=[],et=D?"y":"x",Q=Math.abs(X[et]-W[et])*(z-N),ct=X[et]>=W[et]?1:0,Lt=Q>Math.PI?1:0,_t=k.convert(X),yt=I.getDistanceToCenter(k,_t);if(yt>=.5)if(Q===Math.PI*2){var bt={x:(X.x+W.x)/2,y:(X.y+W.y)/2},Mt=k.convert(bt);U.push(["A",yt,yt,0,Lt,ct,Mt.x,Mt.y]),U.push(["A",yt,yt,0,Lt,ct,_t.x,_t.y])}else U.push(["A",yt,yt,0,Lt,ct,_t.x,_t.y]);return U}function M(x){L.each(x,function(E,k){var D=E;if(D[0].toLowerCase()==="a"){var N=x[k-1],z=x[k+1];z&&z[0].toLowerCase()==="a"?N&&N[0].toLowerCase()==="l"&&(N[0]="M"):N&&N[0].toLowerCase()==="a"&&z&&z[0].toLowerCase()==="l"&&(z[0]="M")}})}S.smoothBezier=function(x,E,k,D){var N=[],z,W,X=!!D,U,et;if(X){U=[Infinity,Infinity],et=[-Infinity,-Infinity];for(var Q=0,ct=x.length;Q<ct;Q++){var Lt=x[Q];U=m.vec2.min([0,0],U,Lt),et=m.vec2.max([0,0],et,Lt)}U=m.vec2.min([0,0],U,D[0]),et=m.vec2.max([0,0],et,D[1])}for(var Q=0,_t=x.length;Q<_t;Q++){var Lt=x[Q];if(k)z=x[Q?Q-1:_t-1],W=x[(Q+1)%_t];else if(Q===0||Q===_t-1){N.push(Lt);continue}else z=x[Q-1],W=x[Q+1];var yt=[0,0];yt=m.vec2.sub(yt,W,z),yt=m.vec2.scale(yt,yt,E);var bt=m.vec2.distance(Lt,z),Mt=m.vec2.distance(Lt,W),xt=bt+Mt;xt!==0&&(bt/=xt,Mt/=xt);var Bt=m.vec2.scale([0,0],yt,-bt),wt=m.vec2.scale([0,0],yt,Mt),H=m.vec2.add([0,0],Lt,Bt),K=m.vec2.add([0,0],Lt,wt);X&&(H=m.vec2.max([0,0],H,U),H=m.vec2.min([0,0],H,et),K=m.vec2.max([0,0],K,U),K=m.vec2.min([0,0],K,et)),N.push(H),N.push(K)}return k&&N.push(N.shift()),N};function A(x,E,k){for(var D=!!E,N=[],z=0,W=x.length;z<W;z+=2)N.push([x[z],x[z+1]]);for(var X=S.smoothBezier(N,.4,D,k),U=N.length,et=[],Q,ct,Lt,z=0;z<U-1;z++)Q=X[z*2],ct=X[z*2+1],Lt=N[z+1],et.push(["C",Q[0],Q[1],ct[0],ct[1],Lt[0],Lt[1]]);return D&&(Q=X[U],ct=X[U+1],Lt=N[0],et.push(["C",Q[0],Q[1],ct[0],ct[1],Lt[0],Lt[1]])),et}S.catmullRom2bezier=A;function p(x,E){return P(x,E)}S.getLinePath=p;function w(x,E,k){var D=[],N=x[0],z=null;if(x.length<=2)return p(x,E);for(var W=0,X=x.length;W<X;W++){var U=x[W];(!z||!(z.x===U.x&&z.y===U.y))&&(D.push(U.x),D.push(U.y),z=U)}var et=k||[[0,0],[1,1]],Q=A(D,E,et);return Q.unshift(["M",N.x,N.y]),Q}S.getSplinePath=w;function y(x,E){var k=[];return L.each(E,function(D){var N=D[0];switch(N.toLowerCase()){case"m":case"l":case"c":k.push(_(D,x));break;case"z":default:k.push(D);break}}),k}S.convertNormalPath=y;function b(x,E){var k=[],D,N,z,W;return L.each(E,function(X,U){var et=X[0];switch(et.toLowerCase()){case"m":case"c":case"q":k.push(_(X,x));break;case"l":D=E[U-1],N=X,z=x.isTransposed,W=z?D[D.length-2]===N[1]:D[D.length-1]===N[2],W?k=k.concat(T(D,N,x)):k.push(_(X,x));break;case"z":default:k.push(X);break}}),M(k),k}S.convertPolarPath=b},85909:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=function(){function I(P,_){this.context=P,this.cfg=_,P.addAction(this)}return I.prototype.applyCfg=function(P){m.assign(this,P)},I.prototype.init=function(){this.applyCfg(this.cfg)},I.prototype.destroy=function(){this.context.removeAction(this),this.context=null},I}();S.default=L},37611:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=m.__importDefault(d(85909)),I=function(P){m.__extends(_,P);function _(){return P!==null&&P.apply(this,arguments)||this}return _.prototype.execute=function(){this.callback&&this.callback(this.context)},_.prototype.destroy=function(){P.prototype.destroy.call(this),this.callback=null},_}(L.default);S.default=I},53155:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createCallbackAction=S.unregisterAction=S.registerAction=S.getActionClass=S.createAction=void 0;var m=d(44614),L=m.__importDefault(d(37611)),I=d(26169),P={};function _(w,y){var b=P[w],x=null;if(b){var E=b.ActionClass,k=b.cfg;x=new E(y,k),x.name=w,x.init()}return x}S.createAction=_;function T(w){var y=P[w];return I.get(y,"ActionClass")}S.getActionClass=T;function M(w,y,b){P[w]={ActionClass:y,cfg:b}}S.registerAction=M;function A(w){delete P[w]}S.unregisterAction=A;function p(w,y){var b=new L.default(y);return b.callback=w,b.name="callback",b}S.createCallbackAction=p},48564:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getScaleByField=S.isInRecords=S.getSiblingPoint=S.getSilbings=S.isInBox=S.getSpline=S.distance=S.getComponents=S.getElementsByPath=S.getIntersectElements=S.intersectRect=S.getElementValue=S.getElementsByState=S.getElementsByField=S.getElements=S.getSiblingMaskElements=S.getMaskedElements=S.isMask=S.isSlider=S.isList=S.isElementChange=S.getDelegationObject=S.getCurrentElement=void 0;var m=d(44614),L=d(26169),I=d(24902),P=d(60103),_=m.__importDefault(d(65410));function T(H,K){var B=H.event,h=B.target,mt=h.getCanvasBBox();return mt.width>=K||mt.height>=K?mt:null}function M(H,K){var B=H.event,h=B.target,mt=h.getCanvasBBox();return mt.width>=K||mt.height>=K?h.attr("path"):null}function A(H){var K=H.event,B,h=K.target;return h&&(B=h.get("element")),B}S.getCurrentElement=A;function p(H){var K=H.event,B=K.target,h;return B&&(h=B.get("delegateObject")),h}S.getDelegationObject=p;function w(H){var K=H.event.gEvent;return!(K&&K.fromShape&&K.toShape&&K.fromShape.get("element")===K.toShape.get("element"))}S.isElementChange=w;function y(H){return H&&H.component&&H.component.isList()}S.isList=y;function b(H){return H&&H.component&&H.component.isSlider()}S.isSlider=b;function x(H){var K=H.event,B=K.target;return B&&B.get("name")==="mask"}S.isMask=x;function E(H,K){var B=H.event.target;if(B.get("type")==="path"){var h=M(H,K);return h?Q(H.view,h):void 0}var mt=T(H,K);return mt?U(H.view,mt):null}S.getMaskedElements=E;function k(H,K,B){var h=T(H,B);if(!h)return null;var mt=H.view,gt=xt(mt,K,{x:h.x,y:h.y}),Vt=xt(mt,K,{x:h.maxX,y:h.maxY}),Jt={minX:gt.x,minY:gt.y,maxX:Vt.x,maxY:Vt.y};return U(K,Jt)}S.getSiblingMaskElements=k;function D(H){var K=H.geometries,B=[];return L.each(K,function(h){var mt=h.elements;B=B.concat(mt)}),H.views&&H.views.length&&L.each(H.views,function(h){B=B.concat(D(h))}),B}S.getElements=D;function N(H,K,B){var h=D(H);return h.filter(function(mt){return W(mt,K)===B})}S.getElementsByField=N;function z(H,K){var B=H.geometries,h=[];return L.each(B,function(mt){var gt=mt.getElementsBy(function(Vt){return Vt.hasState(K)});h=h.concat(gt)}),h}S.getElementsByState=z;function W(H,K){var B=H.getModel(),h=B.data,mt;return L.isArray(h)?mt=h[0][K]:mt=h[K],mt}S.getElementValue=W;function X(H,K){return!(K.minX>H.maxX||K.maxX<H.minX||K.minY>H.maxY||K.maxY<H.minY)}S.intersectRect=X;function U(H,K){var B=D(H),h=[];return L.each(B,function(mt){var gt=mt.shape,Vt=gt.getCanvasBBox();X(K,Vt)&&h.push(mt)}),h}S.getIntersectElements=U;function et(H){var K=[];return L.each(H,function(B){var h=B[0];if(h!=="A")for(var mt=1;mt<B.length;mt=mt+2)K.push([B[mt],B[mt+1]]);else{var gt=B.length;K.push([B[gt-2],B[gt-1]])}}),K}function Q(H,K){var B=D(H),h=et(K),mt=B.filter(function(gt){var Vt=gt.shape,Jt;if(Vt.get("type")==="path")Jt=et(Vt.attr("path"));else{var zt=Vt.getCanvasBBox();Jt=P.toPoints(zt)}return _.default(h,Jt)});return mt}S.getElementsByPath=Q;function ct(H){return H.getComponents().map(function(K){return K.component})}S.getComponents=ct;function Lt(H,K){var B=K.x-H.x,h=K.y-H.y;return Math.sqrt(B*B+h*h)}S.distance=Lt;function _t(H,K){if(H.length<=2)return I.getLinePath(H,!1);var B=H[0],h=[];L.each(H,function(gt){h.push(gt.x),h.push(gt.y)});var mt=I.catmullRom2bezier(h,K,null);return mt.unshift(["M",B.x,B.y]),mt}S.getSpline=_t;function yt(H,K){return H.x<=K.x&&H.maxX>=K.x&&H.y<=K.y&&H.maxY>K.y}S.isInBox=yt;function bt(H){var K=H.parent,B=null;return K&&(B=K.views.filter(function(h){return h!==H})),B}S.getSilbings=bt;function Mt(H,K){var B=H.getCoordinate();return B.invert(K)}function xt(H,K,B){var h=Mt(H,B);return K.getCoordinate().convert(h)}S.getSiblingPoint=xt;function Bt(H,K,B,h){var mt=!1;return L.each(H,function(gt){if(gt[B]===K[B]&&gt[h]===K[h])return mt=!0,!1}),mt}S.isInRecords=Bt;function wt(H,K){var B=H.getScaleByField(K);return!B&&H.views&&L.each(H.views,function(h){if(B=wt(h,K),B)return!1}),B}S.getScaleByField=wt},96053:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(48564),I=function(){function P(_){this.actions=[],this.event=null,this.cacheMap={},this.view=_}return P.prototype.cache=function(){for(var _=[],T=0;T<arguments.length;T++)_[T]=arguments[T];if(_.length===1)return this.cacheMap[_[0]];_.length===2&&(this.cacheMap[_[0]]=_[1])},P.prototype.getAction=function(_){return this.actions.find(function(T){return T.name===_})},P.prototype.addAction=function(_){this.actions.push(_)},P.prototype.removeAction=function(_){var T=this.actions,M=this.actions.indexOf(_);M>=0&&T.splice(M,1)},P.prototype.getCurrentPoint=function(){var _=this.event;if(_)if(_.target instanceof HTMLElement){var T=this.view.getCanvas(),M=T.getPointByClient(_.clientX,_.clientY);return M}else return{x:_.x,y:_.y};return null},P.prototype.getCurrentShape=function(){return m.get(this.event,["gEvent","shape"])},P.prototype.isInPlot=function(){var _=this.getCurrentPoint();return _?this.view.isPointInPlot(_):!1},P.prototype.isInShape=function(_){var T=this.getCurrentShape();return T?T.get("name")===_:!1},P.prototype.isInComponent=function(_){var T=L.getComponents(this.view),M=this.getCurrentPoint();return M?!!T.find(function(A){var p=A.getBBox();return _?A.get("name")===_&&L.isInBox(p,M):L.isInBox(p,M)}):!1},P.prototype.destroy=function(){this.view=null,this.event=null,m.each(this.actions.slice(),function(_){_.destroy()}),this.actions=null,this.cacheMap=null},P}();S.default=I},40518:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(44614),I=d(26169),P=d(53155),_=L.__importDefault(d(96053)),T=L.__importDefault(d(48025));function M(y,b){var x=y.split(":"),E=x[0],k=b.getAction(E)||P.createAction(E,b);if(!k)throw new Error("There is no action named "+E);var D=x[1];return{action:k,methodName:D}}function A(y){var b=y.action,x=y.methodName;if(b[x])b[x]();else throw new Error("Action("+b.name+") doesn't have a method called "+x)}var p={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},w=function(y){L.__extends(b,y);function b(x,E){var k=y.call(this,x,E)||this;return k.callbackCaches={},k.emitCaches={},k.steps=E,k}return b.prototype.init=function(){this.initContext(),y.prototype.init.call(this)},b.prototype.destroy=function(){y.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},b.prototype.initEvents=function(){var x=this;I.each(this.steps,function(E,k){I.each(E,function(D){var N=x.getActionCallback(k,D);N&&x.bindEvent(D.trigger,N)})})},b.prototype.clearEvents=function(){var x=this;I.each(this.steps,function(E,k){I.each(E,function(D){var N=x.getActionCallback(k,D);N&&x.offEvent(D.trigger,N)})})},b.prototype.initContext=function(){var x=this.view,E=new _.default(x);this.context=E;var k=this.steps;I.each(k,function(D){I.each(D,function(N){if(I.isFunction(N.action))N.actionObject={action:P.createCallbackAction(N.action,E),methodName:"execute"};else if(I.isString(N.action))N.actionObject=M(N.action,E);else if(I.isArray(N.action)){var z=N.action;N.actionObject=[],I.each(z,function(W){N.actionObject.push(M(W,E))})}})})},b.prototype.isAllowStep=function(x){var E=this.currentStepName,k=this.steps;if(E===x||x===p.SHOW_ENABLE)return!0;if(x===p.PROCESSING)return E===p.START;if(x===p.START)return E!==p.PROCESSING;if(x===p.END)return E===p.PROCESSING||E===p.START;if(x===p.ROLLBACK){if(k[p.END])return E===p.END;if(E===p.START)return!0}return!1},b.prototype.isAllowExcute=function(x,E){if(this.isAllowStep(x)){var k=this.getKey(x,E);return E.once&&this.emitCaches[k]?!1:E.isEnable?E.isEnable(this.context):!0}return!1},b.prototype.enterStep=function(x){this.currentStepName=x,this.emitCaches={}},b.prototype.afterExecute=function(x,E){x!==p.SHOW_ENABLE&&this.currentStepName!==x&&this.enterStep(x);var k=this.getKey(x,E);this.emitCaches[k]=!0},b.prototype.getKey=function(x,E){return x+E.trigger+E.action},b.prototype.getActionCallback=function(x,E){var k=this,D=this.context,N=this.callbackCaches,z=E.actionObject;if(E.action&&z){var W=this.getKey(x,E);if(!N[W]){var X=function(U){D.event=U,k.isAllowExcute(x,E)?(I.isArray(z)?I.each(z,function(et){D.event=U,A(et)}):(D.event=U,A(z)),k.afterExecute(x,E),E.callback&&(D.event=U,E.callback(D))):D.event=null};E.debounce?N[W]=I.debounce(X,E.debounce.wait,E.debounce.immediate):E.throttle?N[W]=I.throttle(X,E.throttle.wait,{leading:E.throttle.leading,trailing:E.throttle.trailing}):N[W]=X}return N[W]}return null},b.prototype.bindEvent=function(x,E){var k=x.split(":");k[0]==="window"?window.addEventListener(k[1],E):k[0]==="document"?document.addEventListener(k[1],E):this.view.on(x,E)},b.prototype.offEvent=function(x,E){var k=x.split(":");k[0]==="window"?window.removeEventListener(k[1],E):k[0]==="document"?document.removeEventListener(k[1],E):this.view.off(x,E)},b}(T.default);m=w},48025:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(){function m(L,I){this.view=L,this.cfg=I}return m.prototype.init=function(){this.initEvents()},m.prototype.initEvents=function(){},m.prototype.clearEvents=function(){},m.prototype.destroy=function(){this.clearEvents()},m}();S.default=d},60103:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.toPoints=S.getRegionBBox=S.BBox=void 0;var m=d(26169),L=d(43599),I=function(){function _(T,M,A,p){T===void 0&&(T=0),M===void 0&&(M=0),A===void 0&&(A=0),p===void 0&&(p=0),this.x=T,this.y=M,this.height=p,this.width=A}return _.fromRange=function(T,M,A,p){return new _(T,M,A-T,p-M)},Object.defineProperty(_.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),_.prototype.isEqual=function(T){return this.x===T.x&&this.y===T.y&&this.width===T.width&&this.height===T.height},_.prototype.clone=function(){return new _(this.x,this.y,this.width,this.height)},_.prototype.add=function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var A=this.clone();return m.each(T,function(p){A.x=Math.min(p.x,A.x),A.y=Math.min(p.y,A.y),A.width=Math.max(p.maxX,A.maxX)-A.x,A.height=Math.max(p.maxY,A.maxY)-A.y}),A},_.prototype.merge=function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var A=this.clone();return m.each(T,function(p){A.x=Math.max(p.x,A.x),A.y=Math.max(p.y,A.y),A.width=Math.min(p.maxX,A.maxX)-A.x,A.height=Math.min(p.maxY,A.maxY)-A.y}),A},_.prototype.cut=function(T,M){var A=T.width,p=T.height;switch(M){case L.DIRECTION.TOP:case L.DIRECTION.TOP_LEFT:case L.DIRECTION.TOP_RIGHT:return _.fromRange(this.minX,this.minY+p,this.maxX,this.maxY);case L.DIRECTION.RIGHT:case L.DIRECTION.RIGHT_TOP:case L.DIRECTION.RIGHT_BOTTOM:return _.fromRange(this.minX,this.minY,this.maxX-A,this.maxY);case L.DIRECTION.BOTTOM:case L.DIRECTION.BOTTOM_LEFT:case L.DIRECTION.BOTTOM_RIGHT:return _.fromRange(this.minX,this.minY,this.maxX,this.maxY-p);case L.DIRECTION.LEFT:case L.DIRECTION.LEFT_TOP:case L.DIRECTION.LEFT_BOTTOM:return _.fromRange(this.minX+A,this.minY,this.maxX,this.maxY);default:return this}},_.prototype.shrink=function(T){var M=T[0],A=T[1],p=T[2],w=T[3];return new _(this.x+w,this.y+M,this.width-w-A,this.height-M-p)},_.prototype.exceed=function(T){return[Math.max(-this.minY+T.minY,0),Math.max(this.maxX-T.maxX,0),Math.max(this.maxY-T.maxY,0),Math.max(-this.minX+T.minX,0)]},_.prototype.size=function(){return this.width*this.height},_}();S.BBox=I,S.getRegionBBox=function(_,T){var M=T.start,A=T.end;return new I(_.x+_.width*M.x,_.y+_.height*M.y,_.width*Math.abs(A.x-M.x),_.height*Math.abs(A.y-M.y))};function P(_){return[[_.minX,_.minY],[_.maxX,_.minY],[_.maxX,_.maxY],[_.minX,_.maxY]]}S.toPoints=P},52715:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getCoordinateClipCfg=S.getAngleByPoint=S.isPointInCoordinate=S.getDistanceToCenter=S.isFullCircle=S.getXDimensionLength=void 0;var m=d(85433),L=d(84920);function I(p){if(p.isPolar&&!p.isTransposed)return(p.endAngle-p.startAngle)*p.getRadius();var w=p.convert({x:0,y:0}),y=p.convert({x:1,y:0});return Math.sqrt(Math.pow(y.x-w.x,2)+Math.pow(y.y-w.y,2))}S.getXDimensionLength=I;function P(p){if(p.isPolar){var w=p.startAngle,y=p.endAngle;return y-w==Math.PI*2}return!1}S.isFullCircle=P;function _(p,w){var y=p.getCenter();return Math.sqrt(Math.pow(w.x-y.x,2)+Math.pow(w.y-y.y,2))}S.getDistanceToCenter=_;function T(p,w){var y=!1;if(p)if(p.type==="theta"){var b=p.start,x=p.end;y=L.isBetween(w.x,b.x,x.x)&&L.isBetween(w.y,b.y,x.y)}else{var E=p.invert(w);y=L.isBetween(E.x,0,1)&&L.isBetween(E.y,0,1)}return y}S.isPointInCoordinate=T;function M(p,w){var y=p.getCenter();return Math.atan2(w.y-y.y,w.x-y.x)}S.getAngleByPoint=M;function A(p,w){w===void 0&&(w=0);var y=p.start,b=p.end,x=p.getWidth(),E=p.getHeight();if(p.isPolar){var k=p.startAngle,D=p.endAngle,N=p.getCenter(),z=p.getRadius();return{type:"path",startState:{path:m.getSectorPath(N.x,N.y,z+w,k,k)},endState:function(X){var U=(D-k)*X+k,et=m.getSectorPath(N.x,N.y,z+w,k,U);return{path:et}},attrs:{path:m.getSectorPath(N.x,N.y,z+w,k,D)}}}var W;return p.isTransposed?W={height:E+w*2}:W={width:x+w*2},{type:"rect",startState:{x:y.x-w,y:b.y-w,width:p.isTransposed?x+w*2:0,height:p.isTransposed?0:E+w*2},endState:W,attrs:{x:y.x-w,y:b.y-w,width:x+w*2,height:E+w*2}}}S.getCoordinateClipCfg=A},85433:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getReplaceAttrs=S.getPolygonCentroid=S.getAngle=S.getArcPath=S.getSectorPath=S.polarToCartesian=void 0;var m=d(26169);function L(p){if(m.isEmpty(p))return null;var w=p[0].x,y=p[0].x,b=p[0].y,x=p[0].y;return m.each(p,function(E){w=w>E.x?E.x:w,y=y<E.x?E.x:y,b=b>E.y?E.y:b,x=x<E.y?E.y:x}),{minX:w,maxX:y,minY:b,maxY:x,centerX:(w+y)/2,centerY:(b+x)/2}}function I(p,w,y,b){return{x:p+y*Math.cos(b),y:w+y*Math.sin(b)}}S.polarToCartesian=I;function P(p,w,y,b,x,E){E===void 0&&(E=0);var k=I(p,w,y,b),D=I(p,w,y,x),N=I(p,w,E,b),z=I(p,w,E,x);if(x-b==Math.PI*2){var W=I(p,w,y,b+Math.PI),X=I(p,w,E,b+Math.PI),U=[["M",k.x,k.y],["A",y,y,0,1,1,W.x,W.y],["A",y,y,0,1,1,D.x,D.y],["M",N.x,N.y]];return E&&(U.push(["A",E,E,0,1,0,X.x,X.y]),U.push(["A",E,E,0,1,0,z.x,z.y])),U.push(["M",k.x,k.y]),U.push(["Z"]),U}var et=x-b<=Math.PI?0:1,Q=[["M",k.x,k.y],["A",y,y,0,et,1,D.x,D.y],["L",z.x,z.y]];return E&&Q.push(["A",E,E,0,et,0,N.x,N.y]),Q.push(["L",k.x,k.y]),Q.push(["Z"]),Q}S.getSectorPath=P;function _(p,w,y,b,x){var E=I(p,w,y,b),k=I(p,w,y,x);if(m.isNumberEqual(x-b,Math.PI*2)){var D=I(p,w,y,b+Math.PI);return[["M",E.x,E.y],["A",y,y,0,1,1,D.x,D.y],["A",y,y,0,1,1,E.x,E.y],["A",y,y,0,1,0,D.x,D.y],["A",y,y,0,1,0,E.x,E.y],["Z"]]}var N=x-b<=Math.PI?0:1;return[["M",E.x,E.y],["A",y,y,0,N,1,k.x,k.y]]}S.getArcPath=_;function T(p,w){var y=p.points,b=L(y),x,E,k=w.startAngle,D=w.endAngle,N=D-k;return w.isTransposed?(x=b.maxY*N,E=b.minY*N):(x=b.maxX*N,E=b.minX*N),x+=k,E+=k,{startAngle:E,endAngle:x}}S.getAngle=T;function M(p,w){if(m.isNumber(p)&&m.isNumber(w))return[p,w];for(var y=-1,b=0,x=0,E,k=p.length-1,D,N=0;++y<p.length;)E=k,k=y,N+=D=p[E]*w[k]-p[k]*w[E],b+=(p[E]+p[k])*D,x+=(w[E]+w[k])*D;return N*=3,[b/N,x/N]}S.getPolygonCentroid=M;function A(p,w){var y=p.attr(),b=w.attr();return m.each(y,function(x,E){b[E]===void 0&&(b[E]=void 0)}),b}S.getReplaceAttrs=A},84920:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.uniq=S.omit=S.padEnd=S.isBetween=void 0;var m=d(26169);function L(T,M,A){var p=Math.min(M,A),w=Math.max(M,A);return T>=p&&T<=w}S.isBetween=L;function I(T,M,A){if(m.isString(T))return T.padEnd(M,A);if(m.isArray(T)){var p=T.length;if(p<M)for(var w=M-p,y=0;y<w;y++)T.push(A)}return T}S.padEnd=I;function P(T,M){return M.forEach(function(A){delete T[A]}),T}S.omit=P;function _(T,M,A){M===void 0&&(M=[]),A===void 0&&(A={});for(var p=0,w=T;p<w.length;p++){var y=w[p];A[y]||(M.push(y),A[y]=!0)}return M}S.uniq=_},96466:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.MarkerSymbols=void 0,S.MarkerSymbols={hexagon:function(d,m,L){var I=L/2*Math.sqrt(3);return[["M",d,m-L],["L",d+I,m-L/2],["L",d+I,m+L/2],["L",d,m+L],["L",d-I,m+L/2],["L",d-I,m-L/2],["Z"]]},bowtie:function(d,m,L){var I=L-1.5;return[["M",d-L,m-I],["L",d+L,m+I],["L",d+L,m-I],["L",d-L,m+I],["Z"]]},cross:function(d,m,L){return[["M",d-L,m-L],["L",d+L,m+L],["M",d+L,m-L],["L",d-L,m+L]]},tick:function(d,m,L){return[["M",d-L/2,m-L],["L",d+L/2,m-L],["M",d,m-L],["L",d,m+L],["M",d-L/2,m+L],["L",d+L/2,m+L]]},plus:function(d,m,L){return[["M",d-L,m],["L",d+L,m],["M",d,m-L],["L",d,m+L]]},hyphen:function(d,m,L){return[["M",d-L,m],["L",d+L,m]]},line:function(d,m,L){return[["M",d,m-L],["L",d,m+L]]}}},76463:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getName=S.syncScale=S.createScaleByField=void 0;var m=d(44614),L=d(26169),I=d(80292),P=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function _(p){var w="linear";return P.test(p)?w="time":L.isString(p)&&(w="cat"),w}function T(p,w,y){var b=w||[];if(L.isNumber(p)||L.isNil(L.firstValue(b,p))&&L.isEmpty(y)){var x=I.getScale("identity");return new x({field:p.toString(),values:[p]})}var E=L.valuesOfKey(b,p),k=L.get(y,"type",_(E[0])),D=I.getScale(k);return new D(m.__assign({field:p,values:E},y))}S.createScaleByField=T;function M(p,w){if(p.type!=="identity"&&w.type!=="identity"){var y={};for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b]);p.change(y)}}S.syncScale=M;function A(p){return p.alias||p.field}S.getName=A},71866:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getTooltipItems=S.findDataByPoint=void 0;var m=d(44614),L=d(26169),I=d(43599),P=d(76463);function _(D,N,z){var W=z.translate(D),X=z.translate(N);return L.isNumberEqual(W,X)}function T(D,N){var z=N.coordinate,W=N.getXScale(),X=W.range,U=X[X.length-1],et=X[0],Q=z.invert(D),ct=Q.x;return z.isPolar&&ct>(1+U)/2&&(ct=et),W.translate(W.invert(ct))}function M(D,N,z){var W=z.coordinate,X=z.getYScale(),U=X.field,et=W.invert(N),Q=X.invert(et.y),ct=L.find(D,function(Lt){var _t=Lt[I.FIELD_ORIGIN];return _t[U][0]<=Q&&_t[U][1]>=Q});return ct||D[D.length-1]}var A=L.memoize(function(D){if(D.isCategory)return 1;for(var N=D.values,z=N.length,W=D.translate(N[0]),X=W,U=0;U<z;U++){var et=N[U],Q=D.translate(et);Q<W&&(W=Q),Q>X&&(X=Q)}return(X-W)/(z-1)});function p(D,N,z){var W=z;if(!z){var X=N.getAttribute("position"),U=X.getFields();W=U[0]}var et=N.scales;return et[W]?et[W].getText(D[W]):L.hasKey(D,W)?D[W]:W}function w(D){var N=L.values(D.attributes);return L.filter(N,function(z){return L.contains(I.GROUP_ATTRS,z.type)})}function y(D){for(var N=w(D),z,W=0,X=N;W<X.length;W++){var U=X[W],et=U.getScale(U.type);if(et&&et.isLinear){z=et;break}}var Q=D.getXScale(),ct=D.getYScale();return z||ct||Q}function b(D,N){var z=N.field,W=D[z];if(L.isArray(W)){var X=W.map(function(U){return N.getText(U)});return X.join("-")}return N.getText(W)}function x(D,N){var z,W=N.getGroupScales();if(W.length&&(z=W[0]),z){var X=z.field;return z.getText(D[X])}var U=y(N);return P.getName(U)}function E(D,N,z){if(N.length===0)return null;var W=z.type,X=z.getXScale(),U=z.getYScale(),et=X.field,Q=U.field,ct=null;if(W==="heatmap"||W==="point"){for(var Lt=z.coordinate,_t=Lt.invert(D),yt=X.invert(_t.x),bt=U.invert(_t.y),Mt=Infinity,xt=0;xt<N.length;xt++){var Bt=N[xt],wt=Bt[I.FIELD_ORIGIN],H=Math.pow(wt[et]-yt,2)+Math.pow(wt[Q]-bt,2);H<Mt&&(Mt=H,ct=Bt)}return ct}var K=N[0],B=N[N.length-1],h=T(D,z),mt=K[I.FIELD_ORIGIN][et],gt=K[I.FIELD_ORIGIN][Q],Vt=B[I.FIELD_ORIGIN][et],Jt=U.isLinear&&L.isArray(gt);if(L.isArray(mt)){for(var xt=0;xt<N.length;xt++){var zt=N[xt],wt=zt[I.FIELD_ORIGIN];if(X.translate(wt[et][0])<=h&&X.translate(wt[et][1])>=h)if(Jt)L.isArray(ct)||(ct=[]),ct.push(zt);else{ct=zt;break}}L.isArray(ct)&&(ct=M(ct,D,z))}else{var Qt=void 0;if(!X.isLinear&&X.type!=="timeCat"){for(var xt=0;xt<N.length;xt++){var zt=N[xt],wt=zt[I.FIELD_ORIGIN];if(_(wt[et],h,X))if(Jt)L.isArray(ct)||(ct=[]),ct.push(zt);else{ct=zt;break}else X.translate(wt[et])<=h&&(B=zt,Qt=N[xt+1])}L.isArray(ct)&&(ct=M(ct,D,z))}else{if((h>X.translate(Vt)||h<X.translate(mt))&&(h>X.max||h<X.min))return null;for(var oe=0,se=N.length-1,jt=void 0;oe<=se;){jt=Math.floor((oe+se)/2);var Pt=N[jt][I.FIELD_ORIGIN][et];if(_(Pt,h,X))return N[jt];X.translate(Pt)<=X.translate(h)?(oe=jt+1,B=N[jt],Qt=N[jt+1]):(se===0&&(B=N[0]),se=jt-1)}}B&&Qt&&Math.abs(X.translate(B[I.FIELD_ORIGIN][et])-h)>Math.abs(X.translate(Qt[I.FIELD_ORIGIN][et])-h)&&(B=Qt)}var pt=A(z.getXScale());return!ct&&Math.abs(X.translate(B[I.FIELD_ORIGIN][et])-h)<=pt/2&&(ct=B),ct}S.findDataByPoint=E;function k(D,N,z){z===void 0&&(z="");var W=D[I.FIELD_ORIGIN],X=p(W,N,z),U=N.tooltipOption,et=N.theme.defaultColor,Q=[],ct,Lt;function _t(gt,Vt){if(!L.isNil(Vt)&&Vt!==""){var Jt={title:X,data:W,mappingData:D,name:gt,value:Vt,color:D.color||et,marker:!0};Q.push(Jt)}}if(L.isObject(U)){var yt=U.fields,bt=U.callback;if(bt){var Mt=yt.map(function(gt){return D[I.FIELD_ORIGIN][gt]}),xt=bt.apply(void 0,Mt),Bt=m.__assign({data:D[I.FIELD_ORIGIN],mappingData:D,title:X,color:D.color||et,marker:!0},xt);Q.push(Bt)}else for(var wt=N.scales,H=0,K=yt;H<K.length;H++){var B=K[H];if(!L.isNil(W[B])){var h=wt[B];ct=P.getName(h),Lt=h.getText(W[B]),_t(ct,Lt)}}}else{var mt=y(N);L.isNil(W[mt.field])||(Lt=b(W,mt),ct=x(W,N),_t(ct,Lt))}return Q}S.getTooltipItems=k},19875:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.setMatrixArrayType=I,S.toRadian=_,S.equals=T;var d=S.EPSILON=1e-6,m=S.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,L=S.RANDOM=Math.random;function I(M){S.ARRAY_TYPE=m=M}var P=Math.PI/180;function _(M){return M*P}function T(M,A){return Math.abs(M-A)<=d*Math.max(1,Math.abs(M),Math.abs(A))}},25519:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.sub=S.mul=void 0,S.create=P,S.fromMat4=_,S.clone=T,S.copy=M,S.fromValues=A,S.set=p,S.identity=w,S.transpose=y,S.invert=b,S.adjoint=x,S.determinant=E,S.multiply=k,S.translate=D,S.rotate=N,S.scale=z,S.fromTranslation=W,S.fromRotation=X,S.fromScaling=U,S.fromMat2d=et,S.fromQuat=Q,S.normalFromMat4=ct,S.projection=Lt,S.str=_t,S.frob=yt,S.add=bt,S.subtract=Mt,S.multiplyScalar=xt,S.multiplyScalarAndAdd=Bt,S.exactEquals=wt,S.equals=H;var m=d(19875),L=I(m);function I(h){if(h&&h.__esModule)return h;var mt={};if(h!=null)for(var gt in h)Object.prototype.hasOwnProperty.call(h,gt)&&(mt[gt]=h[gt]);return mt.default=h,mt}function P(){var h=new L.ARRAY_TYPE(9);return L.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function _(h,mt){return h[0]=mt[0],h[1]=mt[1],h[2]=mt[2],h[3]=mt[4],h[4]=mt[5],h[5]=mt[6],h[6]=mt[8],h[7]=mt[9],h[8]=mt[10],h}function T(h){var mt=new L.ARRAY_TYPE(9);return mt[0]=h[0],mt[1]=h[1],mt[2]=h[2],mt[3]=h[3],mt[4]=h[4],mt[5]=h[5],mt[6]=h[6],mt[7]=h[7],mt[8]=h[8],mt}function M(h,mt){return h[0]=mt[0],h[1]=mt[1],h[2]=mt[2],h[3]=mt[3],h[4]=mt[4],h[5]=mt[5],h[6]=mt[6],h[7]=mt[7],h[8]=mt[8],h}function A(h,mt,gt,Vt,Jt,zt,Qt,oe,se){var jt=new L.ARRAY_TYPE(9);return jt[0]=h,jt[1]=mt,jt[2]=gt,jt[3]=Vt,jt[4]=Jt,jt[5]=zt,jt[6]=Qt,jt[7]=oe,jt[8]=se,jt}function p(h,mt,gt,Vt,Jt,zt,Qt,oe,se,jt){return h[0]=mt,h[1]=gt,h[2]=Vt,h[3]=Jt,h[4]=zt,h[5]=Qt,h[6]=oe,h[7]=se,h[8]=jt,h}function w(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h}function y(h,mt){if(h===mt){var gt=mt[1],Vt=mt[2],Jt=mt[5];h[1]=mt[3],h[2]=mt[6],h[3]=gt,h[5]=mt[7],h[6]=Vt,h[7]=Jt}else h[0]=mt[0],h[1]=mt[3],h[2]=mt[6],h[3]=mt[1],h[4]=mt[4],h[5]=mt[7],h[6]=mt[2],h[7]=mt[5],h[8]=mt[8];return h}function b(h,mt){var gt=mt[0],Vt=mt[1],Jt=mt[2],zt=mt[3],Qt=mt[4],oe=mt[5],se=mt[6],jt=mt[7],Pt=mt[8],pt=Pt*Qt-oe*jt,st=-Pt*zt+oe*se,Ct=jt*zt-Qt*se,nt=gt*pt+Vt*st+Jt*Ct;return nt?(nt=1/nt,h[0]=pt*nt,h[1]=(-Pt*Vt+Jt*jt)*nt,h[2]=(oe*Vt-Jt*Qt)*nt,h[3]=st*nt,h[4]=(Pt*gt-Jt*se)*nt,h[5]=(-oe*gt+Jt*zt)*nt,h[6]=Ct*nt,h[7]=(-jt*gt+Vt*se)*nt,h[8]=(Qt*gt-Vt*zt)*nt,h):null}function x(h,mt){var gt=mt[0],Vt=mt[1],Jt=mt[2],zt=mt[3],Qt=mt[4],oe=mt[5],se=mt[6],jt=mt[7],Pt=mt[8];return h[0]=Qt*Pt-oe*jt,h[1]=Jt*jt-Vt*Pt,h[2]=Vt*oe-Jt*Qt,h[3]=oe*se-zt*Pt,h[4]=gt*Pt-Jt*se,h[5]=Jt*zt-gt*oe,h[6]=zt*jt-Qt*se,h[7]=Vt*se-gt*jt,h[8]=gt*Qt-Vt*zt,h}function E(h){var mt=h[0],gt=h[1],Vt=h[2],Jt=h[3],zt=h[4],Qt=h[5],oe=h[6],se=h[7],jt=h[8];return mt*(jt*zt-Qt*se)+gt*(-jt*Jt+Qt*oe)+Vt*(se*Jt-zt*oe)}function k(h,mt,gt){var Vt=mt[0],Jt=mt[1],zt=mt[2],Qt=mt[3],oe=mt[4],se=mt[5],jt=mt[6],Pt=mt[7],pt=mt[8],st=gt[0],Ct=gt[1],nt=gt[2],J=gt[3],vt=gt[4],Tt=gt[5],Ht=gt[6],ue=gt[7],Ce=gt[8];return h[0]=st*Vt+Ct*Qt+nt*jt,h[1]=st*Jt+Ct*oe+nt*Pt,h[2]=st*zt+Ct*se+nt*pt,h[3]=J*Vt+vt*Qt+Tt*jt,h[4]=J*Jt+vt*oe+Tt*Pt,h[5]=J*zt+vt*se+Tt*pt,h[6]=Ht*Vt+ue*Qt+Ce*jt,h[7]=Ht*Jt+ue*oe+Ce*Pt,h[8]=Ht*zt+ue*se+Ce*pt,h}function D(h,mt,gt){var Vt=mt[0],Jt=mt[1],zt=mt[2],Qt=mt[3],oe=mt[4],se=mt[5],jt=mt[6],Pt=mt[7],pt=mt[8],st=gt[0],Ct=gt[1];return h[0]=Vt,h[1]=Jt,h[2]=zt,h[3]=Qt,h[4]=oe,h[5]=se,h[6]=st*Vt+Ct*Qt+jt,h[7]=st*Jt+Ct*oe+Pt,h[8]=st*zt+Ct*se+pt,h}function N(h,mt,gt){var Vt=mt[0],Jt=mt[1],zt=mt[2],Qt=mt[3],oe=mt[4],se=mt[5],jt=mt[6],Pt=mt[7],pt=mt[8],st=Math.sin(gt),Ct=Math.cos(gt);return h[0]=Ct*Vt+st*Qt,h[1]=Ct*Jt+st*oe,h[2]=Ct*zt+st*se,h[3]=Ct*Qt-st*Vt,h[4]=Ct*oe-st*Jt,h[5]=Ct*se-st*zt,h[6]=jt,h[7]=Pt,h[8]=pt,h}function z(h,mt,gt){var Vt=gt[0],Jt=gt[1];return h[0]=Vt*mt[0],h[1]=Vt*mt[1],h[2]=Vt*mt[2],h[3]=Jt*mt[3],h[4]=Jt*mt[4],h[5]=Jt*mt[5],h[6]=mt[6],h[7]=mt[7],h[8]=mt[8],h}function W(h,mt){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=mt[0],h[7]=mt[1],h[8]=1,h}function X(h,mt){var gt=Math.sin(mt),Vt=Math.cos(mt);return h[0]=Vt,h[1]=gt,h[2]=0,h[3]=-gt,h[4]=Vt,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h}function U(h,mt){return h[0]=mt[0],h[1]=0,h[2]=0,h[3]=0,h[4]=mt[1],h[5]=0,h[6]=0,h[7]=0,h[8]=1,h}function et(h,mt){return h[0]=mt[0],h[1]=mt[1],h[2]=0,h[3]=mt[2],h[4]=mt[3],h[5]=0,h[6]=mt[4],h[7]=mt[5],h[8]=1,h}function Q(h,mt){var gt=mt[0],Vt=mt[1],Jt=mt[2],zt=mt[3],Qt=gt+gt,oe=Vt+Vt,se=Jt+Jt,jt=gt*Qt,Pt=Vt*Qt,pt=Vt*oe,st=Jt*Qt,Ct=Jt*oe,nt=Jt*se,J=zt*Qt,vt=zt*oe,Tt=zt*se;return h[0]=1-pt-nt,h[3]=Pt-Tt,h[6]=st+vt,h[1]=Pt+Tt,h[4]=1-jt-nt,h[7]=Ct-J,h[2]=st-vt,h[5]=Ct+J,h[8]=1-jt-pt,h}function ct(h,mt){var gt=mt[0],Vt=mt[1],Jt=mt[2],zt=mt[3],Qt=mt[4],oe=mt[5],se=mt[6],jt=mt[7],Pt=mt[8],pt=mt[9],st=mt[10],Ct=mt[11],nt=mt[12],J=mt[13],vt=mt[14],Tt=mt[15],Ht=gt*oe-Vt*Qt,ue=gt*se-Jt*Qt,Ce=gt*jt-zt*Qt,Fe=Vt*se-Jt*oe,Ve=Vt*jt-zt*oe,dr=Jt*jt-zt*se,xr=Pt*J-pt*nt,Er=Pt*vt-st*nt,Yr=Pt*Tt-Ct*nt,gr=pt*vt-st*J,ri=pt*Tt-Ct*J,bi=st*Tt-Ct*vt,Qr=Ht*bi-ue*ri+Ce*gr+Fe*Yr-Ve*Er+dr*xr;return Qr?(Qr=1/Qr,h[0]=(oe*bi-se*ri+jt*gr)*Qr,h[1]=(se*Yr-Qt*bi-jt*Er)*Qr,h[2]=(Qt*ri-oe*Yr+jt*xr)*Qr,h[3]=(Jt*ri-Vt*bi-zt*gr)*Qr,h[4]=(gt*bi-Jt*Yr+zt*Er)*Qr,h[5]=(Vt*Yr-gt*ri-zt*xr)*Qr,h[6]=(J*dr-vt*Ve+Tt*Fe)*Qr,h[7]=(vt*Ce-nt*dr-Tt*ue)*Qr,h[8]=(nt*Ve-J*Ce+Tt*Ht)*Qr,h):null}function Lt(h,mt,gt){return h[0]=2/mt,h[1]=0,h[2]=0,h[3]=0,h[4]=-2/gt,h[5]=0,h[6]=-1,h[7]=1,h[8]=1,h}function _t(h){return"mat3("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+")"}function yt(h){return Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)+Math.pow(h[2],2)+Math.pow(h[3],2)+Math.pow(h[4],2)+Math.pow(h[5],2)+Math.pow(h[6],2)+Math.pow(h[7],2)+Math.pow(h[8],2))}function bt(h,mt,gt){return h[0]=mt[0]+gt[0],h[1]=mt[1]+gt[1],h[2]=mt[2]+gt[2],h[3]=mt[3]+gt[3],h[4]=mt[4]+gt[4],h[5]=mt[5]+gt[5],h[6]=mt[6]+gt[6],h[7]=mt[7]+gt[7],h[8]=mt[8]+gt[8],h}function Mt(h,mt,gt){return h[0]=mt[0]-gt[0],h[1]=mt[1]-gt[1],h[2]=mt[2]-gt[2],h[3]=mt[3]-gt[3],h[4]=mt[4]-gt[4],h[5]=mt[5]-gt[5],h[6]=mt[6]-gt[6],h[7]=mt[7]-gt[7],h[8]=mt[8]-gt[8],h}function xt(h,mt,gt){return h[0]=mt[0]*gt,h[1]=mt[1]*gt,h[2]=mt[2]*gt,h[3]=mt[3]*gt,h[4]=mt[4]*gt,h[5]=mt[5]*gt,h[6]=mt[6]*gt,h[7]=mt[7]*gt,h[8]=mt[8]*gt,h}function Bt(h,mt,gt,Vt){return h[0]=mt[0]+gt[0]*Vt,h[1]=mt[1]+gt[1]*Vt,h[2]=mt[2]+gt[2]*Vt,h[3]=mt[3]+gt[3]*Vt,h[4]=mt[4]+gt[4]*Vt,h[5]=mt[5]+gt[5]*Vt,h[6]=mt[6]+gt[6]*Vt,h[7]=mt[7]+gt[7]*Vt,h[8]=mt[8]+gt[8]*Vt,h}function wt(h,mt){return h[0]===mt[0]&&h[1]===mt[1]&&h[2]===mt[2]&&h[3]===mt[3]&&h[4]===mt[4]&&h[5]===mt[5]&&h[6]===mt[6]&&h[7]===mt[7]&&h[8]===mt[8]}function H(h,mt){var gt=h[0],Vt=h[1],Jt=h[2],zt=h[3],Qt=h[4],oe=h[5],se=h[6],jt=h[7],Pt=h[8],pt=mt[0],st=mt[1],Ct=mt[2],nt=mt[3],J=mt[4],vt=mt[5],Tt=mt[6],Ht=mt[7],ue=mt[8];return Math.abs(gt-pt)<=L.EPSILON*Math.max(1,Math.abs(gt),Math.abs(pt))&&Math.abs(Vt-st)<=L.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(st))&&Math.abs(Jt-Ct)<=L.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(Ct))&&Math.abs(zt-nt)<=L.EPSILON*Math.max(1,Math.abs(zt),Math.abs(nt))&&Math.abs(Qt-J)<=L.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(J))&&Math.abs(oe-vt)<=L.EPSILON*Math.max(1,Math.abs(oe),Math.abs(vt))&&Math.abs(se-Tt)<=L.EPSILON*Math.max(1,Math.abs(se),Math.abs(Tt))&&Math.abs(jt-Ht)<=L.EPSILON*Math.max(1,Math.abs(jt),Math.abs(Ht))&&Math.abs(Pt-ue)<=L.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(ue))}var K=S.mul=k,B=S.sub=Mt},8554:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.forEach=S.sqrLen=S.sqrDist=S.dist=S.div=S.mul=S.sub=S.len=void 0,S.create=P,S.clone=_,S.fromValues=T,S.copy=M,S.set=A,S.add=p,S.subtract=w,S.multiply=y,S.divide=b,S.ceil=x,S.floor=E,S.min=k,S.max=D,S.round=N,S.scale=z,S.scaleAndAdd=W,S.distance=X,S.squaredDistance=U,S.length=et,S.squaredLength=Q,S.negate=ct,S.inverse=Lt,S.normalize=_t,S.dot=yt,S.cross=bt,S.lerp=Mt,S.random=xt,S.transformMat2=Bt,S.transformMat2d=wt,S.transformMat3=H,S.transformMat4=K,S.rotate=B,S.angle=h,S.str=mt,S.exactEquals=gt,S.equals=Vt;var m=d(19875),L=I(m);function I(st){if(st&&st.__esModule)return st;var Ct={};if(st!=null)for(var nt in st)Object.prototype.hasOwnProperty.call(st,nt)&&(Ct[nt]=st[nt]);return Ct.default=st,Ct}function P(){var st=new L.ARRAY_TYPE(2);return L.ARRAY_TYPE!=Float32Array&&(st[0]=0,st[1]=0),st}function _(st){var Ct=new L.ARRAY_TYPE(2);return Ct[0]=st[0],Ct[1]=st[1],Ct}function T(st,Ct){var nt=new L.ARRAY_TYPE(2);return nt[0]=st,nt[1]=Ct,nt}function M(st,Ct){return st[0]=Ct[0],st[1]=Ct[1],st}function A(st,Ct,nt){return st[0]=Ct,st[1]=nt,st}function p(st,Ct,nt){return st[0]=Ct[0]+nt[0],st[1]=Ct[1]+nt[1],st}function w(st,Ct,nt){return st[0]=Ct[0]-nt[0],st[1]=Ct[1]-nt[1],st}function y(st,Ct,nt){return st[0]=Ct[0]*nt[0],st[1]=Ct[1]*nt[1],st}function b(st,Ct,nt){return st[0]=Ct[0]/nt[0],st[1]=Ct[1]/nt[1],st}function x(st,Ct){return st[0]=Math.ceil(Ct[0]),st[1]=Math.ceil(Ct[1]),st}function E(st,Ct){return st[0]=Math.floor(Ct[0]),st[1]=Math.floor(Ct[1]),st}function k(st,Ct,nt){return st[0]=Math.min(Ct[0],nt[0]),st[1]=Math.min(Ct[1],nt[1]),st}function D(st,Ct,nt){return st[0]=Math.max(Ct[0],nt[0]),st[1]=Math.max(Ct[1],nt[1]),st}function N(st,Ct){return st[0]=Math.round(Ct[0]),st[1]=Math.round(Ct[1]),st}function z(st,Ct,nt){return st[0]=Ct[0]*nt,st[1]=Ct[1]*nt,st}function W(st,Ct,nt,J){return st[0]=Ct[0]+nt[0]*J,st[1]=Ct[1]+nt[1]*J,st}function X(st,Ct){var nt=Ct[0]-st[0],J=Ct[1]-st[1];return Math.sqrt(nt*nt+J*J)}function U(st,Ct){var nt=Ct[0]-st[0],J=Ct[1]-st[1];return nt*nt+J*J}function et(st){var Ct=st[0],nt=st[1];return Math.sqrt(Ct*Ct+nt*nt)}function Q(st){var Ct=st[0],nt=st[1];return Ct*Ct+nt*nt}function ct(st,Ct){return st[0]=-Ct[0],st[1]=-Ct[1],st}function Lt(st,Ct){return st[0]=1/Ct[0],st[1]=1/Ct[1],st}function _t(st,Ct){var nt=Ct[0],J=Ct[1],vt=nt*nt+J*J;return vt>0&&(vt=1/Math.sqrt(vt),st[0]=Ct[0]*vt,st[1]=Ct[1]*vt),st}function yt(st,Ct){return st[0]*Ct[0]+st[1]*Ct[1]}function bt(st,Ct,nt){var J=Ct[0]*nt[1]-Ct[1]*nt[0];return st[0]=st[1]=0,st[2]=J,st}function Mt(st,Ct,nt,J){var vt=Ct[0],Tt=Ct[1];return st[0]=vt+J*(nt[0]-vt),st[1]=Tt+J*(nt[1]-Tt),st}function xt(st,Ct){Ct=Ct||1;var nt=L.RANDOM()*2*Math.PI;return st[0]=Math.cos(nt)*Ct,st[1]=Math.sin(nt)*Ct,st}function Bt(st,Ct,nt){var J=Ct[0],vt=Ct[1];return st[0]=nt[0]*J+nt[2]*vt,st[1]=nt[1]*J+nt[3]*vt,st}function wt(st,Ct,nt){var J=Ct[0],vt=Ct[1];return st[0]=nt[0]*J+nt[2]*vt+nt[4],st[1]=nt[1]*J+nt[3]*vt+nt[5],st}function H(st,Ct,nt){var J=Ct[0],vt=Ct[1];return st[0]=nt[0]*J+nt[3]*vt+nt[6],st[1]=nt[1]*J+nt[4]*vt+nt[7],st}function K(st,Ct,nt){var J=Ct[0],vt=Ct[1];return st[0]=nt[0]*J+nt[4]*vt+nt[12],st[1]=nt[1]*J+nt[5]*vt+nt[13],st}function B(st,Ct,nt,J){var vt=Ct[0]-nt[0],Tt=Ct[1]-nt[1],Ht=Math.sin(J),ue=Math.cos(J);return st[0]=vt*ue-Tt*Ht+nt[0],st[1]=vt*Ht+Tt*ue+nt[1],st}function h(st,Ct){var nt=st[0],J=st[1],vt=Ct[0],Tt=Ct[1],Ht=nt*nt+J*J;Ht>0&&(Ht=1/Math.sqrt(Ht));var ue=vt*vt+Tt*Tt;ue>0&&(ue=1/Math.sqrt(ue));var Ce=(nt*vt+J*Tt)*Ht*ue;return Ce>1?0:Ce<-1?Math.PI:Math.acos(Ce)}function mt(st){return"vec2("+st[0]+", "+st[1]+")"}function gt(st,Ct){return st[0]===Ct[0]&&st[1]===Ct[1]}function Vt(st,Ct){var nt=st[0],J=st[1],vt=Ct[0],Tt=Ct[1];return Math.abs(nt-vt)<=L.EPSILON*Math.max(1,Math.abs(nt),Math.abs(vt))&&Math.abs(J-Tt)<=L.EPSILON*Math.max(1,Math.abs(J),Math.abs(Tt))}var Jt=S.len=et,zt=S.sub=w,Qt=S.mul=y,oe=S.div=b,se=S.dist=X,jt=S.sqrDist=U,Pt=S.sqrLen=Q,pt=S.forEach=function(){var st=P();return function(Ct,nt,J,vt,Tt,Ht){var ue=void 0,Ce=void 0;for(nt||(nt=2),J||(J=0),vt?Ce=Math.min(vt*nt+J,Ct.length):Ce=Ct.length,ue=J;ue<Ce;ue+=nt)st[0]=Ct[ue],st[1]=Ct[ue+1],Tt(st,st,Ht),Ct[ue]=st[0],Ct[ue+1]=st[1];return Ct}}()},54069:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.forEach=S.sqrLen=S.len=S.sqrDist=S.dist=S.div=S.mul=S.sub=void 0,S.create=P,S.clone=_,S.length=T,S.fromValues=M,S.copy=A,S.set=p,S.add=w,S.subtract=y,S.multiply=b,S.divide=x,S.ceil=E,S.floor=k,S.min=D,S.max=N,S.round=z,S.scale=W,S.scaleAndAdd=X,S.distance=U,S.squaredDistance=et,S.squaredLength=Q,S.negate=ct,S.inverse=Lt,S.normalize=_t,S.dot=yt,S.cross=bt,S.lerp=Mt,S.hermite=xt,S.bezier=Bt,S.random=wt,S.transformMat4=H,S.transformMat3=K,S.transformQuat=B,S.rotateX=h,S.rotateY=mt,S.rotateZ=gt,S.angle=Vt,S.str=Jt,S.exactEquals=zt,S.equals=Qt;var m=d(19875),L=I(m);function I(J){if(J&&J.__esModule)return J;var vt={};if(J!=null)for(var Tt in J)Object.prototype.hasOwnProperty.call(J,Tt)&&(vt[Tt]=J[Tt]);return vt.default=J,vt}function P(){var J=new L.ARRAY_TYPE(3);return L.ARRAY_TYPE!=Float32Array&&(J[0]=0,J[1]=0,J[2]=0),J}function _(J){var vt=new L.ARRAY_TYPE(3);return vt[0]=J[0],vt[1]=J[1],vt[2]=J[2],vt}function T(J){var vt=J[0],Tt=J[1],Ht=J[2];return Math.sqrt(vt*vt+Tt*Tt+Ht*Ht)}function M(J,vt,Tt){var Ht=new L.ARRAY_TYPE(3);return Ht[0]=J,Ht[1]=vt,Ht[2]=Tt,Ht}function A(J,vt){return J[0]=vt[0],J[1]=vt[1],J[2]=vt[2],J}function p(J,vt,Tt,Ht){return J[0]=vt,J[1]=Tt,J[2]=Ht,J}function w(J,vt,Tt){return J[0]=vt[0]+Tt[0],J[1]=vt[1]+Tt[1],J[2]=vt[2]+Tt[2],J}function y(J,vt,Tt){return J[0]=vt[0]-Tt[0],J[1]=vt[1]-Tt[1],J[2]=vt[2]-Tt[2],J}function b(J,vt,Tt){return J[0]=vt[0]*Tt[0],J[1]=vt[1]*Tt[1],J[2]=vt[2]*Tt[2],J}function x(J,vt,Tt){return J[0]=vt[0]/Tt[0],J[1]=vt[1]/Tt[1],J[2]=vt[2]/Tt[2],J}function E(J,vt){return J[0]=Math.ceil(vt[0]),J[1]=Math.ceil(vt[1]),J[2]=Math.ceil(vt[2]),J}function k(J,vt){return J[0]=Math.floor(vt[0]),J[1]=Math.floor(vt[1]),J[2]=Math.floor(vt[2]),J}function D(J,vt,Tt){return J[0]=Math.min(vt[0],Tt[0]),J[1]=Math.min(vt[1],Tt[1]),J[2]=Math.min(vt[2],Tt[2]),J}function N(J,vt,Tt){return J[0]=Math.max(vt[0],Tt[0]),J[1]=Math.max(vt[1],Tt[1]),J[2]=Math.max(vt[2],Tt[2]),J}function z(J,vt){return J[0]=Math.round(vt[0]),J[1]=Math.round(vt[1]),J[2]=Math.round(vt[2]),J}function W(J,vt,Tt){return J[0]=vt[0]*Tt,J[1]=vt[1]*Tt,J[2]=vt[2]*Tt,J}function X(J,vt,Tt,Ht){return J[0]=vt[0]+Tt[0]*Ht,J[1]=vt[1]+Tt[1]*Ht,J[2]=vt[2]+Tt[2]*Ht,J}function U(J,vt){var Tt=vt[0]-J[0],Ht=vt[1]-J[1],ue=vt[2]-J[2];return Math.sqrt(Tt*Tt+Ht*Ht+ue*ue)}function et(J,vt){var Tt=vt[0]-J[0],Ht=vt[1]-J[1],ue=vt[2]-J[2];return Tt*Tt+Ht*Ht+ue*ue}function Q(J){var vt=J[0],Tt=J[1],Ht=J[2];return vt*vt+Tt*Tt+Ht*Ht}function ct(J,vt){return J[0]=-vt[0],J[1]=-vt[1],J[2]=-vt[2],J}function Lt(J,vt){return J[0]=1/vt[0],J[1]=1/vt[1],J[2]=1/vt[2],J}function _t(J,vt){var Tt=vt[0],Ht=vt[1],ue=vt[2],Ce=Tt*Tt+Ht*Ht+ue*ue;return Ce>0&&(Ce=1/Math.sqrt(Ce),J[0]=vt[0]*Ce,J[1]=vt[1]*Ce,J[2]=vt[2]*Ce),J}function yt(J,vt){return J[0]*vt[0]+J[1]*vt[1]+J[2]*vt[2]}function bt(J,vt,Tt){var Ht=vt[0],ue=vt[1],Ce=vt[2],Fe=Tt[0],Ve=Tt[1],dr=Tt[2];return J[0]=ue*dr-Ce*Ve,J[1]=Ce*Fe-Ht*dr,J[2]=Ht*Ve-ue*Fe,J}function Mt(J,vt,Tt,Ht){var ue=vt[0],Ce=vt[1],Fe=vt[2];return J[0]=ue+Ht*(Tt[0]-ue),J[1]=Ce+Ht*(Tt[1]-Ce),J[2]=Fe+Ht*(Tt[2]-Fe),J}function xt(J,vt,Tt,Ht,ue,Ce){var Fe=Ce*Ce,Ve=Fe*(2*Ce-3)+1,dr=Fe*(Ce-2)+Ce,xr=Fe*(Ce-1),Er=Fe*(3-2*Ce);return J[0]=vt[0]*Ve+Tt[0]*dr+Ht[0]*xr+ue[0]*Er,J[1]=vt[1]*Ve+Tt[1]*dr+Ht[1]*xr+ue[1]*Er,J[2]=vt[2]*Ve+Tt[2]*dr+Ht[2]*xr+ue[2]*Er,J}function Bt(J,vt,Tt,Ht,ue,Ce){var Fe=1-Ce,Ve=Fe*Fe,dr=Ce*Ce,xr=Ve*Fe,Er=3*Ce*Ve,Yr=3*dr*Fe,gr=dr*Ce;return J[0]=vt[0]*xr+Tt[0]*Er+Ht[0]*Yr+ue[0]*gr,J[1]=vt[1]*xr+Tt[1]*Er+Ht[1]*Yr+ue[1]*gr,J[2]=vt[2]*xr+Tt[2]*Er+Ht[2]*Yr+ue[2]*gr,J}function wt(J,vt){vt=vt||1;var Tt=L.RANDOM()*2*Math.PI,Ht=L.RANDOM()*2-1,ue=Math.sqrt(1-Ht*Ht)*vt;return J[0]=Math.cos(Tt)*ue,J[1]=Math.sin(Tt)*ue,J[2]=Ht*vt,J}function H(J,vt,Tt){var Ht=vt[0],ue=vt[1],Ce=vt[2],Fe=Tt[3]*Ht+Tt[7]*ue+Tt[11]*Ce+Tt[15];return Fe=Fe||1,J[0]=(Tt[0]*Ht+Tt[4]*ue+Tt[8]*Ce+Tt[12])/Fe,J[1]=(Tt[1]*Ht+Tt[5]*ue+Tt[9]*Ce+Tt[13])/Fe,J[2]=(Tt[2]*Ht+Tt[6]*ue+Tt[10]*Ce+Tt[14])/Fe,J}function K(J,vt,Tt){var Ht=vt[0],ue=vt[1],Ce=vt[2];return J[0]=Ht*Tt[0]+ue*Tt[3]+Ce*Tt[6],J[1]=Ht*Tt[1]+ue*Tt[4]+Ce*Tt[7],J[2]=Ht*Tt[2]+ue*Tt[5]+Ce*Tt[8],J}function B(J,vt,Tt){var Ht=Tt[0],ue=Tt[1],Ce=Tt[2],Fe=Tt[3],Ve=vt[0],dr=vt[1],xr=vt[2],Er=ue*xr-Ce*dr,Yr=Ce*Ve-Ht*xr,gr=Ht*dr-ue*Ve,ri=ue*gr-Ce*Yr,bi=Ce*Er-Ht*gr,Qr=Ht*Yr-ue*Er,gi=Fe*2;return Er*=gi,Yr*=gi,gr*=gi,ri*=2,bi*=2,Qr*=2,J[0]=Ve+Er+ri,J[1]=dr+Yr+bi,J[2]=xr+gr+Qr,J}function h(J,vt,Tt,Ht){var ue=[],Ce=[];return ue[0]=vt[0]-Tt[0],ue[1]=vt[1]-Tt[1],ue[2]=vt[2]-Tt[2],Ce[0]=ue[0],Ce[1]=ue[1]*Math.cos(Ht)-ue[2]*Math.sin(Ht),Ce[2]=ue[1]*Math.sin(Ht)+ue[2]*Math.cos(Ht),J[0]=Ce[0]+Tt[0],J[1]=Ce[1]+Tt[1],J[2]=Ce[2]+Tt[2],J}function mt(J,vt,Tt,Ht){var ue=[],Ce=[];return ue[0]=vt[0]-Tt[0],ue[1]=vt[1]-Tt[1],ue[2]=vt[2]-Tt[2],Ce[0]=ue[2]*Math.sin(Ht)+ue[0]*Math.cos(Ht),Ce[1]=ue[1],Ce[2]=ue[2]*Math.cos(Ht)-ue[0]*Math.sin(Ht),J[0]=Ce[0]+Tt[0],J[1]=Ce[1]+Tt[1],J[2]=Ce[2]+Tt[2],J}function gt(J,vt,Tt,Ht){var ue=[],Ce=[];return ue[0]=vt[0]-Tt[0],ue[1]=vt[1]-Tt[1],ue[2]=vt[2]-Tt[2],Ce[0]=ue[0]*Math.cos(Ht)-ue[1]*Math.sin(Ht),Ce[1]=ue[0]*Math.sin(Ht)+ue[1]*Math.cos(Ht),Ce[2]=ue[2],J[0]=Ce[0]+Tt[0],J[1]=Ce[1]+Tt[1],J[2]=Ce[2]+Tt[2],J}function Vt(J,vt){var Tt=M(J[0],J[1],J[2]),Ht=M(vt[0],vt[1],vt[2]);_t(Tt,Tt),_t(Ht,Ht);var ue=yt(Tt,Ht);return ue>1?0:ue<-1?Math.PI:Math.acos(ue)}function Jt(J){return"vec3("+J[0]+", "+J[1]+", "+J[2]+")"}function zt(J,vt){return J[0]===vt[0]&&J[1]===vt[1]&&J[2]===vt[2]}function Qt(J,vt){var Tt=J[0],Ht=J[1],ue=J[2],Ce=vt[0],Fe=vt[1],Ve=vt[2];return Math.abs(Tt-Ce)<=L.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(Ce))&&Math.abs(Ht-Fe)<=L.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(Fe))&&Math.abs(ue-Ve)<=L.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Ve))}var oe=S.sub=y,se=S.mul=b,jt=S.div=x,Pt=S.dist=U,pt=S.sqrDist=et,st=S.len=T,Ct=S.sqrLen=Q,nt=S.forEach=function(){var J=P();return function(vt,Tt,Ht,ue,Ce,Fe){var Ve=void 0,dr=void 0;for(Tt||(Tt=3),Ht||(Ht=0),ue?dr=Math.min(ue*Tt+Ht,vt.length):dr=vt.length,Ve=Ht;Ve<dr;Ve+=Tt)J[0]=vt[Ve],J[1]=vt[Ve+1],J[2]=vt[Ve+2],Ce(J,J,Fe),vt[Ve]=J[0],vt[Ve+1]=J[1],vt[Ve+2]=J[2];return vt}}()},99671:function(lt,S,d){function m(p,w){p.prototype=Object.create(w.prototype),p.prototype.constructor=p,p.__proto__=w}var L=d(10848),I=d(87754),P=d(17210),_=d(61206),T=function(p){m(w,p);function w(){return p.apply(this,arguments)||this}var y=w.prototype;return y.execute=function(){var x=this;return P(x.rootNode,x.options,I)},w}(L),M={};function A(p,w){return w=_.assign({},M,w),new T(p,w).execute()}lt.exports=A},7249:function(lt,S,d){function m(p,w){p.prototype=Object.create(w.prototype),p.prototype.constructor=p,p.__proto__=w}var L=d(10848),I=d(23874),P=d(17210),_=d(61206),T=function(p){m(w,p);function w(){return p.apply(this,arguments)||this}var y=w.prototype;return y.execute=function(){var x=this;return x.rootNode.width=0,P(x.rootNode,x.options,I)},w}(L),M={};function A(p,w){return w=_.assign({},M,w),new T(p,w).execute()}lt.exports=A},77064:function(lt,S,d){function m(y,b){y.prototype=Object.create(b.prototype),y.prototype.constructor=y,y.__proto__=b}var L=d(10848),I=d(79687),P=d(47241),_=d(61206),T=["LR","RL","H"],M=T[0],A=function(y){m(b,y);function b(){return y.apply(this,arguments)||this}var x=b.prototype;return x.execute=function(){var k=this,D=k.options,N=k.rootNode;D.isHorizontal=!0;var z=D.indent,W=z===void 0?20:z,X=D.dropCap,U=X===void 0?!0:X,et=D.direction||M;if(et&&T.indexOf(et)===-1)throw new TypeError("Invalid direction: "+et);if(et===T[0])I(N,W,U);else if(et===T[1])I(N,W,U),N.right2left();else if(et===T[2]){var Q=P(N,D),ct=Q.left,Lt=Q.right;I(ct,W,U),ct.right2left(),I(Lt,W,U);var _t=ct.getBoundingBox();Lt.translate(_t.width,0),N.x=Lt.x-N.width/2}return N},b}(L),p={};function w(y,b){return b=_.assign({},p,b),new A(y,b).execute()}lt.exports=w},62114:function(lt,S,d){var m={compactBox:d(99671),dendrogram:d(7249),indented:d(77064),mindmap:d(71423)};lt.exports=m},10848:function(lt,S,d){var m=d(86832),L=function(){function I(_,T){T===void 0&&(T={});var M=this;M.options=T,M.rootNode=m(_,T)}var P=I.prototype;return P.execute=function(){throw new Error("please override this method")},I}();lt.exports=L},23874:function(lt,S,d){var m=d(61206);function L(_,T){_===void 0&&(_=0),T===void 0&&(T=[]);var M=this;M.x=M.y=0,M.leftChild=M.rightChild=null,M.height=0,M.children=T}var I={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function P(_,T,M){M?(T.x=_.x,T.y=_.y):(T.x=_.y,T.y=_.x),_.children.forEach(function(A,p){P(A,T.children[p],M)})}lt.exports=function(_,T){T===void 0&&(T={}),T=m.assign({},I,T);var M=0;function A(x){if(!x)return null;x.width=0,x.depth&&x.depth>M&&(M=x.depth);var E=x.children,k=E.length,D=new L(x.height,[]);return E.forEach(function(N,z){var W=A(N);D.children.push(W),z===0&&(D.leftChild=W),z===k-1&&(D.rightChild=W)}),D.originNode=x,D.isLeaf=x.isLeaf(),D}function p(x){if(x.isLeaf||x.children.length===0)x.drawingDepth=M;else{var E=x.children.map(function(D){return p(D)}),k=Math.min.apply(null,E);x.drawingDepth=k-1}return x.drawingDepth}var w;function y(x){x.x=x.drawingDepth*T.rankSep,x.isLeaf?(x.y=0,w&&(x.y=w.y+w.height+T.nodeSep,x.originNode.parent!==w.originNode.parent&&(x.y+=T.subTreeSep)),w=x):(x.children.forEach(function(E){y(E)}),x.y=(x.leftChild.y+x.rightChild.y)/2)}var b=A(_);return p(b),y(b),P(b,_,T.isHorizontal),_}},17210:function(lt,S,d){var m=d(47241),L=["LR","RL","TB","BT","H","V"],I=["LR","RL","H"],P=function(M){return I.indexOf(M)>-1},_=L[0];lt.exports=function(T,M,A){var p=M.direction||_;if(M.isHorizontal=P(p),p&&L.indexOf(p)===-1)throw new TypeError("Invalid direction: "+p);if(p===L[0])A(T,M);else if(p===L[1])A(T,M),T.right2left();else if(p===L[2])A(T,M);else if(p===L[3])A(T,M),T.bottom2top();else if(p===L[4]||p===L[5]){var w=m(T,M),y=w.left,b=w.right;A(y,M),A(b,M),M.isHorizontal?y.right2left():y.bottom2top(),b.translate(y.x-b.x,y.y-b.y),T.x=y.x,T.y=b.y;var x=T.getBoundingBox();M.isHorizontal?x.top<0&&T.translate(0,-x.top):x.left<0&&T.translate(-x.left,0)}var E=M.fixedRoot;return E===void 0&&(E=!0),E&&T.translate(-(T.x+T.width/2+T.hgap),-(T.y+T.height/2+T.vgap)),T}},86832:function(lt,S,d){var m=d(61206),L=18,I=L*2,P=L,_={getId:function(p){return p.id||p.name},getPreH:function(p){return p.preH||0},getPreV:function(p){return p.preV||0},getHGap:function(p){return p.hgap||P},getVGap:function(p){return p.vgap||P},getChildren:function(p){return p.children},getHeight:function(p){return p.height||I},getWidth:function(p){var w=p.label||" ";return p.width||w.split("").length*L}};function T(A,p){var w=this;if(w.vgap=w.hgap=0,A instanceof T)return A;w.data=A;var y=p.getHGap(A),b=p.getVGap(A);return w.preH=p.getPreH(A),w.preV=p.getPreV(A),w.width=p.getWidth(A),w.height=p.getHeight(A),w.width+=w.preH,w.height+=w.preV,w.id=p.getId(A),w.x=w.y=0,w.depth=0,w.children||(w.children=[]),w.addGap(y,b),w}m.assign(T.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(p,w){var y=this;y.hgap+=p,y.vgap+=w,y.width+=2*p,y.height+=2*w},eachNode:function(p){for(var w=this,y=[w],b;b=y.shift();)p(b),y=b.children.concat(y)},DFTraverse:function(p){this.eachNode(p)},BFTraverse:function(p){for(var w=this,y=[w],b;b=y.shift();)p(b),y=y.concat(b.children)},getBoundingBox:function(){var p={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(w){p.left=Math.min(p.left,w.x),p.top=Math.min(p.top,w.y),p.width=Math.max(p.width,w.x+w.width),p.height=Math.max(p.height,w.y+w.height)}),p},translate:function(p,w){p===void 0&&(p=0),w===void 0&&(w=0),this.eachNode(function(y){y.x+=p,y.y+=w,y.x+=y.preH,y.y+=y.preV})},right2left:function(){var p=this,w=p.getBoundingBox();p.eachNode(function(y){y.x=y.x-(y.x-w.left)*2-y.width}),p.translate(w.width,0)},bottom2top:function(){var p=this,w=p.getBoundingBox();p.eachNode(function(y){y.y=y.y-(y.y-w.top)*2-y.height}),p.translate(0,w.height)}});function M(A,p,w){p===void 0&&(p={}),p=m.assign({},_,p);var y=new T(A,p),b=[y],x;if(!w&&!A.collapsed){for(;x=b.shift();)if(!x.data.collapsed){var E=p.getChildren(x.data),k=E?E.length:0;if(x.children=new Array(k),E&&k)for(var D=0;D<k;D++){var N=new T(E[D],p);x.children[D]=N,b.push(N),N.parent=x,N.depth=x.depth+1}}}return y}lt.exports=M},79687:function(lt){function S(d,m,L,I){var P=typeof L=="function"?L(d):L*d.depth;if(!I)try{if(d.id===d.parent.children[0].id){d.x+=P,d.y=m?m.y:0;return}}catch(_){}d.x+=P,d.y=m?m.y+m.height:0}lt.exports=function(d,m,L){var I=null;d.eachNode(function(P){S(P,I,m,L),I=P})}},84939:function(lt,S,d){var m=d(61206);function L(_,T){var M=0;return _.children.length?_.children.forEach(function(A){M+=L(A,T)}):M=_.height,_._subTreeSep=T.getSubTreeSep(_.data),_.totalHeight=Math.max(_.height,M)+2*_._subTreeSep,_.totalHeight}function I(_){var T=_.children,M=T.length;if(M){T.forEach(function(x){I(x)});var A=T[0],p=T[M-1],w=p.y-A.y+p.height,y=0;if(T.forEach(function(x){y+=x.totalHeight}),w>_.height)_.y=A.y+w/2-_.height/2;else if(T.length!==1||_.height>y){var b=_.y+(_.height-w)/2-A.y;T.forEach(function(x){x.translate(0,b)})}else _.y=(A.y+A.height/2+p.y+p.height/2)/2-_.height/2}}var P={getSubTreeSep:function(){return 0}};lt.exports=function(_,T){T===void 0&&(T={}),T=m.assign({},P,T),_.parent={x:0,width:0,height:0,y:0},_.BFTraverse(function(M){M.x=M.parent.x+M.parent.width}),_.parent=null,L(_,T),_.startY=0,_.y=_.totalHeight/2-_.height/2,_.eachNode(function(M){var A=M.children,p=A.length;if(p){var w=A[0];if(w.startY=M.startY+M._subTreeSep,p===1)w.y=M.y+M.height/2-w.height/2;else{w.y=w.startY+w.totalHeight/2-w.height/2;for(var y=1;y<p;y++){var b=A[y];b.startY=A[y-1].startY+A[y-1].totalHeight,b.y=b.startY+b.totalHeight/2-b.height/2}}}}),I(_)}},87754:function(lt){function S(_,T,M,A){A===void 0&&(A=[]);var p=this;p.w=_||0,p.h=T||0,p.y=M||0,p.x=0,p.c=A||[],p.cs=A.length,p.prelim=0,p.mod=0,p.shift=0,p.change=0,p.tl=null,p.tr=null,p.el=null,p.er=null,p.msel=0,p.mser=0}S.fromNode=function(_,T){if(!_)return null;var M=[];return _.children.forEach(function(A){M.push(S.fromNode(A,T))}),T?new S(_.height,_.width,_.x,M):new S(_.width,_.height,_.y,M)};function d(_,T,M){M?_.y+=T:_.x+=T,_.children.forEach(function(A){d(A,T,M)})}function m(_,T){var M=T?_.y:_.x;return _.children.forEach(function(A){M=Math.min(m(A,T),M)}),M}function L(_,T){var M=m(_,T);d(_,-M,T)}function I(_,T,M){M?T.y=_.x:T.x=_.x,_.c.forEach(function(A,p){I(A,T.children[p],M)})}function P(_,T,M){M===void 0&&(M=0),T?(_.x=M,M+=_.width):(_.y=M,M+=_.height),_.children.forEach(function(A){P(A,T,M)})}lt.exports=function(_,T){T===void 0&&(T={});var M=T.isHorizontal;function A(Q){if(Q.cs===0){p(Q);return}A(Q.c[0]);for(var ct=U(E(Q.c[0].el),0,null),Lt=1;Lt<Q.cs;++Lt){A(Q.c[Lt]);var _t=E(Q.c[Lt].er);w(Q,Lt,ct),ct=U(_t,Lt,ct)}N(Q),p(Q)}function p(Q){Q.cs===0?(Q.el=Q,Q.er=Q,Q.msel=Q.mser=0):(Q.el=Q.c[0].el,Q.msel=Q.c[0].msel,Q.er=Q.c[Q.cs-1].er,Q.mser=Q.c[Q.cs-1].mser)}function w(Q,ct,Lt){for(var _t=Q.c[ct-1],yt=_t.mod,bt=Q.c[ct],Mt=bt.mod;_t!==null&&bt!==null;){E(_t)>Lt.low&&(Lt=Lt.nxt);var xt=yt+_t.prelim+_t.w-(Mt+bt.prelim);xt>0&&(Mt+=xt,y(Q,ct,Lt.index,xt));var Bt=E(_t),wt=E(bt);Bt<=wt&&(_t=x(_t),_t!==null&&(yt+=_t.mod)),Bt>=wt&&(bt=b(bt),bt!==null&&(Mt+=bt.mod))}!_t&&!!bt?k(Q,ct,bt,Mt):!!_t&&!bt&&D(Q,ct,_t,yt)}function y(Q,ct,Lt,_t){Q.c[ct].mod+=_t,Q.c[ct].msel+=_t,Q.c[ct].mser+=_t,W(Q,ct,Lt,_t)}function b(Q){return Q.cs===0?Q.tl:Q.c[0]}function x(Q){return Q.cs===0?Q.tr:Q.c[Q.cs-1]}function E(Q){return Q.y+Q.h}function k(Q,ct,Lt,_t){var yt=Q.c[0].el;yt.tl=Lt;var bt=_t-Lt.mod-Q.c[0].msel;yt.mod+=bt,yt.prelim-=bt,Q.c[0].el=Q.c[ct].el,Q.c[0].msel=Q.c[ct].msel}function D(Q,ct,Lt,_t){var yt=Q.c[ct].er;yt.tr=Lt;var bt=_t-Lt.mod-Q.c[ct].mser;yt.mod+=bt,yt.prelim-=bt,Q.c[ct].er=Q.c[ct-1].er,Q.c[ct].mser=Q.c[ct-1].mser}function N(Q){Q.prelim=(Q.c[0].prelim+Q.c[0].mod+Q.c[Q.cs-1].mod+Q.c[Q.cs-1].prelim+Q.c[Q.cs-1].w)/2-Q.w/2}function z(Q,ct){ct+=Q.mod,Q.x=Q.prelim+ct,X(Q);for(var Lt=0;Lt<Q.cs;Lt++)z(Q.c[Lt],ct)}function W(Q,ct,Lt,_t){if(Lt!==ct-1){var yt=ct-Lt;Q.c[Lt+1].shift+=_t/yt,Q.c[ct].shift-=_t/yt,Q.c[ct].change-=_t-_t/yt}}function X(Q){for(var ct=0,Lt=0,_t=0;_t<Q.cs;_t++)ct+=Q.c[_t].shift,Lt+=ct+Q.c[_t].change,Q.c[_t].mod+=Lt}function U(Q,ct,Lt){for(;Lt!==null&&Q>=Lt.low;)Lt=Lt.nxt;return{low:Q,index:ct,nxt:Lt}}P(_,M);var et=S.fromNode(_,M);return A(et),z(et,0),I(et,_,M),L(_,M),_}},47241:function(lt,S,d){var m=d(86832);lt.exports=function(L,I){for(var P=m(L.data,I,!0),_=m(L.data,I,!0),T=L.children.length,M=Math.round(T/2),A=I.getSide||function(b,x){return x<M?"right":"left"},p=0;p<T;p++){var w=L.children[p],y=A(w,p);y==="right"?_.children.push(w):P.children.push(w)}return P.eachNode(function(b){b.isRoot()||(b.side="left")}),_.eachNode(function(b){b.isRoot()||(b.side="right")}),{left:P,right:_}}},71423:function(lt,S,d){function m(p,w){p.prototype=Object.create(w.prototype),p.prototype.constructor=p,p.__proto__=w}var L=d(10848),I=d(84939),P=d(17210),_=d(61206),T=function(p){m(w,p);function w(){return p.apply(this,arguments)||this}var y=w.prototype;return y.execute=function(){var x=this;return P(x.rootNode,x.options,I)},w}(L),M={};function A(p,w){return w=_.assign({},M,w),new T(p,w).execute()}lt.exports=A},61206:function(lt,S,d){var m=d(26169),L=m.mix;lt.exports={assign:L}},64916:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(83126);S.wO=L.default;var I=d(92938);m=I.default;var P=d(72806);m=P.default;var _=d(7918);S.vs=_.default},83126:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(25519);m.translate=function(L,I,P){var _=new Array(9);return m.fromTranslation(_,P),m.multiply(L,_,I)},m.rotate=function(L,I,P){var _=new Array(9);return m.fromRotation(_,P),m.multiply(L,_,I)},m.scale=function(L,I,P){var _=new Array(9);return m.fromScaling(_,P),m.multiply(L,_,I)},m.transform=function(L,I){for(var P=[].concat(L),_=0,T=I.length;_<T;_++){var M=I[_];switch(M[0]){case"t":m.translate(P,P,[M[1],M[2]]);break;case"s":m.scale(P,P,[M[1],M[2]]);break;case"r":m.rotate(P,P,M[1]);break;default:break}}return P},S.default=m},7918:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=d(83126);S.default=function(I,P){var _=I?m.clone(I):[1,0,0,0,1,0,0,0,1];return m.each(P,function(T){switch(T[0]){case"t":L.default.translate(_,_,[T[1],T[2]]);break;case"s":L.default.scale(_,_,[T[1],T[2]]);break;case"r":L.default.rotate(_,_,T[1]);break;case"m":L.default.multiply(_,_,T[1]);break;default:return!1}}),_}},92938:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(8554),L=d(26169);m.angle=function(I,P){var _=m.dot(I,P)/(m.length(I)*m.length(P));return Math.acos(L.clamp(_,-1,1))},m.direction=function(I,P){return I[0]*P[1]-P[0]*I[1]},m.angleTo=function(I,P,_){var T=m.angle(I,P),M=m.direction(I,P)>=0;return _?M?Math.PI*2-T:T:M?T:Math.PI*2-T},m.vertical=function(I,P,_){return _?(I[0]=P[1],I[1]=-1*P[0]):(I[0]=-1*P[1],I[1]=P[0]),I},S.default=m},72806:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(54069);S.default=m},50669:function(lt,S,d){"use strict";d.r(S),d.d(S,{leftTranslate:function(){return I},leftRotate:function(){return P},leftScale:function(){return _},transform:function(){return M},direction:function(){return A},angleTo:function(){return p},vertical:function(){return w}});var m=d(58198),L=d(7124);function I(y,b,x){var E=[0,0,0,0,0,0,0,0,0];return m.fromTranslation(E,x),m.multiply(y,E,b)}function P(y,b,x){var E=[0,0,0,0,0,0,0,0,0];return m.fromRotation(E,x),m.multiply(y,E,b)}function _(y,b,x){var E=[0,0,0,0,0,0,0,0,0];return m.fromScaling(E,x),m.multiply(y,E,b)}function T(y,b,x){return m.multiply(y,x,b)}function M(y,b){for(var x=y?[].concat(y):[1,0,0,0,1,0,0,0,1],E=0,k=b.length;E<k;E++){var D=b[E];switch(D[0]){case"t":I(x,x,[D[1],D[2]]);break;case"s":_(x,x,[D[1],D[2]]);break;case"r":P(x,x,D[1]);break;case"m":T(x,x,D[1]);break;default:break}}return x}function A(y,b){return y[0]*b[1]-b[0]*y[1]}function p(y,b,x){var E=L.angle(y,b),k=A(y,b)>=0;return x?k?Math.PI*2-E:E:k?E:Math.PI*2-E}function w(y,b,x){return x?(y[0]=b[1],y[1]=-1*b[0]):(y[0]=-1*b[1],y[1]=b[0]),y}},36694:function(lt,S,d){"use strict";d.r(S),d.d(S,{mat3:function(){return m},vec2:function(){return L},vec3:function(){return I},ext:function(){return P}});var m=d(58198),L=d(7124),I=d(92541),P=d(50669)},62029:function(lt,S,d){"use strict";d.r(S),d.d(S,{catmullRom2Bezier:function(){return p},fillPath:function(){return x},fillPathByDiff:function(){return D},formatPath:function(){return W},getArcParams:function(){return Ve},getLineIntersect:function(){return Yr},isPointInPolygon:function(){return Qr},isPolygonsIntersect:function(){return Xn},parsePath:function(){return _},parsePathArray:function(){return Tt},parsePathString:function(){return ct},path2Absolute:function(){return yt},path2Curve:function(){return gt},path2Segments:function(){return xr},pathIntersection:function(){return J},reactPath:function(){return X}});var m=d(26169),L=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,I=/[^\s\,]+/ig;function P(Xt){var $t=Xt||[];if((0,m.isArray)($t))return $t;if((0,m.isString)($t))return $t=$t.match(L),(0,m.each)($t,function(he,ce){if(he=he.match(I),he[0].length>1){var we=he[0].charAt(0);he.splice(1,0,he[0].substr(1)),he[0]=we}(0,m.each)(he,function(Ee,_e){isNaN(Ee)||(he[_e]=+Ee)}),$t[ce]=he}),$t}var _=P,T=d(7124);function M(Xt,$t,he,ce){var we=[],Ee=!!ce,_e,Le,xe,er,Xe,hr,Ar;if(Ee){xe=ce[0],er=ce[1];for(var fr=0,Sr=Xt.length;fr<Sr;fr+=1){var yr=Xt[fr];xe=T.min([0,0],xe,yr),er=T.max([0,0],er,yr)}}for(var fr=0,Or=Xt.length;fr<Or;fr+=1){var yr=Xt[fr];if(fr===0&&!he)Ar=yr;else if(fr===Or-1&&!he)hr=yr,we.push(Ar),we.push(hr);else{var lr=[fr?fr-1:Or-1,fr-1][he?0:1];_e=Xt[lr],Le=Xt[he?(fr+1)%Or:fr+1];var Fr=[0,0];Fr=T.sub(Fr,Le,_e),Fr=T.scale(Fr,Fr,$t);var Kr=T.distance(yr,_e),Vr=T.distance(yr,Le),Zr=Kr+Vr;Zr!==0&&(Kr/=Zr,Vr/=Zr);var Ut=T.scale([0,0],Fr,-Kr),Kt=T.scale([0,0],Fr,Vr);hr=T.add([0,0],yr,Ut),Xe=T.add([0,0],yr,Kt),Xe=T.min([0,0],Xe,T.max([0,0],Le,yr)),Xe=T.max([0,0],Xe,T.min([0,0],Le,yr)),Ut=T.sub([0,0],Xe,yr),Ut=T.scale([0,0],Ut,-Kr/Vr),hr=T.add([0,0],yr,Ut),hr=T.min([0,0],hr,T.max([0,0],_e,yr)),hr=T.max([0,0],hr,T.min([0,0],_e,yr)),Kt=T.sub([0,0],yr,hr),Kt=T.scale([0,0],Kt,Vr/Kr),Xe=T.add([0,0],yr,Kt),Ee&&(hr=T.max([0,0],hr,xe),hr=T.min([0,0],hr,er),Xe=T.max([0,0],Xe,xe),Xe=T.min([0,0],Xe,er)),we.push(Ar),we.push(hr),Ar=Xe}}return he&&we.push(we.shift()),we}function A(Xt,$t,he){$t===void 0&&($t=!1),he===void 0&&(he=[[0,0],[1,1]]);for(var ce=!!$t,we=[],Ee=0,_e=Xt.length;Ee<_e;Ee+=2)we.push([Xt[Ee],Xt[Ee+1]]);for(var Le=M(we,.4,ce,he),xe=we.length,er=[],Xe,hr,Ar,Ee=0;Ee<xe-1;Ee+=1)Xe=Le[Ee*2],hr=Le[Ee*2+1],Ar=we[Ee+1],er.push(["C",Xe[0],Xe[1],hr[0],hr[1],Ar[0],Ar[1]]);return ce&&(Xe=Le[xe],hr=Le[xe+1],Ar=we[0],er.push(["C",Xe[0],Xe[1],hr[0],hr[1],Ar[0],Ar[1]])),er}var p=A;function w(Xt,$t){var he=[],ce=[];function we(Ee,_e){if(Ee.length===1)he.push(Ee[0]),ce.push(Ee[0]);else{for(var Le=[],xe=0;xe<Ee.length-1;xe++)xe===0&&he.push(Ee[0]),xe===Ee.length-2&&ce.push(Ee[xe+1]),Le[xe]=[(1-_e)*Ee[xe][0]+_e*Ee[xe+1][0],(1-_e)*Ee[xe][1]+_e*Ee[xe+1][1]];we(Le,_e)}}return Xt.length&&we(Xt,$t),{left:he,right:ce.reverse()}}function y(Xt,$t,he){var ce=[[Xt[1],Xt[2]]];he=he||2;var we=[];$t[0]==="A"?(ce.push($t[6]),ce.push($t[7])):$t[0]==="C"?(ce.push([$t[1],$t[2]]),ce.push([$t[3],$t[4]]),ce.push([$t[5],$t[6]])):$t[0]==="S"||$t[0]==="Q"?(ce.push([$t[1],$t[2]]),ce.push([$t[3],$t[4]])):ce.push([$t[1],$t[2]]);for(var Ee=ce,_e=1/he,Le=0;Le<he-1;Le++){var xe=_e/(1-_e*Le),er=w(Ee,xe);we.push(er.left),Ee=er.right}we.push(Ee);var Xe=we.map(function(hr){var Ar=[];return hr.length===4&&(Ar.push("C"),Ar=Ar.concat(hr[2])),hr.length>=3&&(hr.length===3&&Ar.push("Q"),Ar=Ar.concat(hr[1])),hr.length===2&&Ar.push("L"),Ar=Ar.concat(hr[hr.length-1]),Ar});return Xe}function b(Xt,$t,he){if(he===1)return[[].concat(Xt)];var ce=[];if($t[0]==="L"||$t[0]==="C"||$t[0]==="Q")ce=ce.concat(y(Xt,$t,he));else{var we=[].concat(Xt);we[0]==="M"&&(we[0]="L");for(var Ee=0;Ee<=he-1;Ee++)ce.push(we)}return ce}function x(Xt,$t){if(Xt.length===1)return Xt;var he=Xt.length-1,ce=$t.length-1,we=he/ce,Ee=[];if(Xt.length===1&&Xt[0][0]==="M"){for(var _e=0;_e<ce-he;_e++)Xt.push(Xt[0]);return Xt}for(var _e=0;_e<ce;_e++){var Le=Math.floor(we*_e);Ee[Le]=(Ee[Le]||0)+1}var xe=Ee.reduce(function(er,Xe,hr){return hr===he?er.concat(Xt[he]):er.concat(b(Xt[hr],Xt[hr+1],Xe))},[]);return xe.unshift(Xt[0]),($t[ce]==="Z"||$t[ce]==="z")&&xe.push("Z"),xe}function E(Xt,$t,he){var ce=null,we=he;return $t<we&&(we=$t,ce="add"),Xt<we&&(we=Xt,ce="del"),{type:ce,min:we}}var k=function(Xt,$t){var he=Xt.length,ce=$t.length,we,Ee,_e=0;if(he===0||ce===0)return null;for(var Le=[],xe=0;xe<=he;xe++)Le[xe]=[],Le[xe][0]={min:xe};for(var er=0;er<=ce;er++)Le[0][er]={min:er};for(var xe=1;xe<=he;xe++){we=Xt[xe-1];for(var er=1;er<=ce;er++){Ee=$t[er-1],(0,m.isEqual)(we,Ee)?_e=0:_e=1;var Xe=Le[xe-1][er].min+1,hr=Le[xe][er-1].min+1,Ar=Le[xe-1][er-1].min+_e;Le[xe][er]=E(Xe,hr,Ar)}}return Le};function D(Xt,$t){var he=k(Xt,$t),ce=Xt.length,we=$t.length,Ee=[],_e=1,Le=1;if(he[ce][we]!==ce){for(var xe=1;xe<=ce;xe++){var er=he[xe][xe].min;Le=xe;for(var Xe=_e;Xe<=we;Xe++)he[xe][Xe].min<er&&(er=he[xe][Xe].min,Le=Xe);_e=Le,he[xe][_e].type&&Ee.push({index:xe-1,type:he[xe][_e].type})}for(var xe=Ee.length-1;xe>=0;xe--)_e=Ee[xe].index,Ee[xe].type==="add"?Xt.splice(_e,0,[].concat(Xt[_e])):Xt.splice(_e,1)}if(ce=Xt.length,ce<we)for(var xe=0;xe<we-ce;xe++)Xt[ce-1][0]==="z"||Xt[ce-1][0]==="Z"?Xt.splice(ce-2,0,Xt[ce-2]):Xt.push(Xt[ce-1]);return Xt}function N(Xt){var $t=[];switch(Xt[0]){case"M":$t.push([Xt[1],Xt[2]]);break;case"L":$t.push([Xt[1],Xt[2]]);break;case"A":$t.push([Xt[6],Xt[7]]);break;case"Q":$t.push([Xt[3],Xt[4]]),$t.push([Xt[1],Xt[2]]);break;case"T":$t.push([Xt[1],Xt[2]]);break;case"C":$t.push([Xt[5],Xt[6]]),$t.push([Xt[1],Xt[2]]),$t.push([Xt[3],Xt[4]]);break;case"S":$t.push([Xt[3],Xt[4]]),$t.push([Xt[1],Xt[2]]);break;case"H":$t.push([Xt[1],Xt[1]]);break;case"V":$t.push([Xt[1],Xt[1]]);break;default:}return $t}function z(Xt,$t,he){for(var ce=[].concat(Xt),we,Ee=1/(he+1),_e=N($t)[0],Le=1;Le<=he;Le++)Ee*=Le,we=Math.floor(Xt.length*Ee),we===0?ce.unshift([_e[0]*Ee+Xt[we][0]*(1-Ee),_e[1]*Ee+Xt[we][1]*(1-Ee)]):ce.splice(we,0,[_e[0]*Ee+Xt[we][0]*(1-Ee),_e[1]*Ee+Xt[we][1]*(1-Ee)]);return ce}function W(Xt,$t){if(Xt.length<=1)return Xt;for(var he,ce=0;ce<$t.length;ce++)if(Xt[ce][0]!==$t[ce][0])switch(he=N(Xt[ce]),$t[ce][0]){case"M":Xt[ce]=["M"].concat(he[0]);break;case"L":Xt[ce]=["L"].concat(he[0]);break;case"A":Xt[ce]=[].concat($t[ce]),Xt[ce][6]=he[0][0],Xt[ce][7]=he[0][1];break;case"Q":if(he.length<2)if(ce>0)he=z(he,Xt[ce-1],1);else{Xt[ce]=$t[ce];break}Xt[ce]=["Q"].concat(he.reduce(function(we,Ee){return we.concat(Ee)},[]));break;case"T":Xt[ce]=["T"].concat(he[0]);break;case"C":if(he.length<3)if(ce>0)he=z(he,Xt[ce-1],2);else{Xt[ce]=$t[ce];break}Xt[ce]=["C"].concat(he.reduce(function(we,Ee){return we.concat(Ee)},[]));break;case"S":if(he.length<2)if(ce>0)he=z(he,Xt[ce-1],1);else{Xt[ce]=$t[ce];break}Xt[ce]=["S"].concat(he.reduce(function(we,Ee){return we.concat(Ee)},[]));break;default:Xt[ce]=$t[ce]}return Xt}function X(Xt,$t,he,ce,we){return we?[["M",+Xt+ +we,$t],["l",he-we*2,0],["a",we,we,0,0,1,we,we],["l",0,ce-we*2],["a",we,we,0,0,1,-we,we],["l",we*2-he,0],["a",we,we,0,0,1,-we,-we],["l",0,we*2-ce],["a",we,we,0,0,1,we,-we],["z"]]:[["M",Xt,$t],["l",he,0],["l",0,ce],["l",-he,0],["z"]]}var U=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,et=new RegExp("([a-z])["+U+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+U+"]*,?["+U+"]*)+)","ig"),Q=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+U+"]*,?["+U+"]*","ig");function ct(Xt){if(!Xt)return null;if((0,m.isArray)(Xt))return Xt;var $t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},he=[];return String(Xt).replace(et,function(ce,we,Ee){var _e=[],Le=we.toLowerCase();if(Ee.replace(Q,function(xe,er){er&&_e.push(+er)}),Le==="m"&&_e.length>2&&(he.push([we].concat(_e.splice(0,2))),Le="l",we=we==="m"?"l":"L"),Le==="o"&&_e.length===1&&he.push([we,_e[0]]),Le==="r")he.push([we].concat(_e));else for(;_e.length>=$t[Le]&&(he.push([we].concat(_e.splice(0,$t[Le]))),!!$t[Le]););return""}),he}var Lt=/[a-z]/;function _t(Xt,$t){return[$t[0]+($t[0]-Xt[0]),$t[1]+($t[1]-Xt[1])]}function yt(Xt){var $t=ct(Xt);if(!$t||!$t.length)return[["M",0,0]];for(var he=!1,ce=0;ce<$t.length;ce++){var we=$t[ce][0];if(Lt.test(we)||["V","H","T","S"].indexOf(we)>=0){he=!0;break}}if(!he)return $t;var Ee=[],_e=0,Le=0,xe=0,er=0,Xe=0,hr,Ar,fr=$t[0];(fr[0]==="M"||fr[0]==="m")&&(_e=+fr[1],Le=+fr[2],xe=_e,er=Le,Xe++,Ee[0]=["M",_e,Le]);for(var ce=Xe,Sr=$t.length;ce<Sr;ce++){var yr=$t[ce],Or=Ee[ce-1],lr=[],we=yr[0],Fr=we.toUpperCase();if(we!==Fr)switch(lr[0]=Fr,Fr){case"A":lr[1]=yr[1],lr[2]=yr[2],lr[3]=yr[3],lr[4]=yr[4],lr[5]=yr[5],lr[6]=+yr[6]+_e,lr[7]=+yr[7]+Le;break;case"V":lr[1]=+yr[1]+Le;break;case"H":lr[1]=+yr[1]+_e;break;case"M":xe=+yr[1]+_e,er=+yr[2]+Le,lr[1]=xe,lr[2]=er;break;default:for(var Kr=1,Vr=yr.length;Kr<Vr;Kr++)lr[Kr]=+yr[Kr]+(Kr%2?_e:Le)}else lr=$t[ce];switch(Fr){case"Z":_e=+xe,Le=+er;break;case"H":_e=lr[1],lr=["L",_e,Le];break;case"V":Le=lr[1],lr=["L",_e,Le];break;case"T":_e=lr[1],Le=lr[2];var Zr=_t([Or[1],Or[2]],[Or[3],Or[4]]);lr=["Q",Zr[0],Zr[1],_e,Le];break;case"S":_e=lr[lr.length-2],Le=lr[lr.length-1];var Ut=Or.length,Kt=_t([Or[Ut-4],Or[Ut-3]],[Or[Ut-2],Or[Ut-1]]);lr=["C",Kt[0],Kt[1],lr[1],lr[2],_e,Le];break;case"M":xe=lr[lr.length-2],er=lr[lr.length-1];break;default:_e=lr[lr.length-2],Le=lr[lr.length-1]}Ee.push(lr)}return Ee}var bt=Math.PI*2,Mt=function(Xt,$t,he,ce,we,Ee,_e){var Le=Xt.x,xe=Xt.y;Le*=$t,xe*=he;var er=ce*Le-we*xe,Xe=we*Le+ce*xe;return{x:er+Ee,y:Xe+_e}},xt=function(Xt,$t){var he=$t===1.5707963267948966?.551915024494:$t===-1.5707963267948966?-.551915024494:4/3*Math.tan($t/4),ce=Math.cos(Xt),we=Math.sin(Xt),Ee=Math.cos(Xt+$t),_e=Math.sin(Xt+$t);return[{x:ce-we*he,y:we+ce*he},{x:Ee+_e*he,y:_e-Ee*he},{x:Ee,y:_e}]},Bt=function(Xt,$t,he,ce){var we=Xt*ce-$t*he<0?-1:1,Ee=Xt*he+$t*ce;return Ee>1&&(Ee=1),Ee<-1&&(Ee=-1),we*Math.acos(Ee)},wt=function(Xt,$t,he,ce,we,Ee,_e,Le,xe,er,Xe,hr){var Ar=Math.pow(we,2),fr=Math.pow(Ee,2),Sr=Math.pow(Xe,2),yr=Math.pow(hr,2),Or=Ar*fr-Ar*yr-fr*Sr;Or<0&&(Or=0),Or/=Ar*yr+fr*Sr,Or=Math.sqrt(Or)*(_e===Le?-1:1);var lr=Or*we/Ee*hr,Fr=Or*-Ee/we*Xe,Kr=er*lr-xe*Fr+(Xt+he)/2,Vr=xe*lr+er*Fr+($t+ce)/2,Zr=(Xe-lr)/we,Ut=(hr-Fr)/Ee,Kt=(-Xe-lr)/we,ie=(-hr-Fr)/Ee,me=Bt(1,0,Zr,Ut),Me=Bt(Zr,Ut,Kt,ie);return Le===0&&Me>0&&(Me-=bt),Le===1&&Me<0&&(Me+=bt),[Kr,Vr,me,Me]},H=function(Xt){var $t=Xt.px,he=Xt.py,ce=Xt.cx,we=Xt.cy,Ee=Xt.rx,_e=Xt.ry,Le=Xt.xAxisRotation,xe=Le===void 0?0:Le,er=Xt.largeArcFlag,Xe=er===void 0?0:er,hr=Xt.sweepFlag,Ar=hr===void 0?0:hr,fr=[];if(Ee===0||_e===0)return[{x1:0,y1:0,x2:0,y2:0,x:ce,y:we}];var Sr=Math.sin(xe*bt/360),yr=Math.cos(xe*bt/360),Or=yr*($t-ce)/2+Sr*(he-we)/2,lr=-Sr*($t-ce)/2+yr*(he-we)/2;if(Or===0&&lr===0)return[{x1:0,y1:0,x2:0,y2:0,x:ce,y:we}];Ee=Math.abs(Ee),_e=Math.abs(_e);var Fr=Math.pow(Or,2)/Math.pow(Ee,2)+Math.pow(lr,2)/Math.pow(_e,2);Fr>1&&(Ee*=Math.sqrt(Fr),_e*=Math.sqrt(Fr));var Kr=wt($t,he,ce,we,Ee,_e,Xe,Ar,Sr,yr,Or,lr),Vr=Kr[0],Zr=Kr[1],Ut=Kr[2],Kt=Kr[3],ie=Math.abs(Kt)/(bt/4);Math.abs(1-ie)<1e-7&&(ie=1);var me=Math.max(Math.ceil(ie),1);Kt/=me;for(var Me=0;Me<me;Me++)fr.push(xt(Ut,Kt)),Ut+=Kt;return fr.map(function(Pe){var Je=Mt(Pe[0],Ee,_e,yr,Sr,Vr,Zr),sr=Je.x,Dr=Je.y,Re=Mt(Pe[1],Ee,_e,yr,Sr,Vr,Zr),Tr=Re.x,vi=Re.y,Mi=Mt(Pe[2],Ee,_e,yr,Sr,Vr,Zr),oi=Mi.x,di=Mi.y;return{x1:sr,y1:Dr,x2:Tr,y2:vi,x:oi,y:di}})};function K(Xt,$t,he,ce,we,Ee,_e,Le,xe){var er=H({px:Xt,py:$t,cx:Le,cy:xe,rx:he,ry:ce,xAxisRotation:we,largeArcFlag:Ee,sweepFlag:_e});return er.reduce(function(Xe,hr){var Ar=hr.x1,fr=hr.y1,Sr=hr.x2,yr=hr.y2,Or=hr.x,lr=hr.y;return Xe.push(Ar,fr,Sr,yr,Or,lr),Xe},[])}function B(Xt,$t,he,ce,we,Ee){var _e=1/3,Le=2/3;return[_e*Xt+Le*he,_e*$t+Le*ce,_e*we+Le*he,_e*Ee+Le*ce,we,Ee]}function h(Xt,$t,he,ce){return[Xt,$t,he,ce,he,ce]}function mt(Xt,$t){"TQ".indexOf(Xt[0])<0&&($t.qx=null,$t.qy=null);var he=Xt.slice(1),ce=he[0],we=he[1];switch(Xt[0]){case"M":return $t.x=ce,$t.y=we,Xt;case"A":return["C"].concat(K.apply(0,[$t.x1,$t.y1].concat(Xt.slice(1))));case"Q":return $t.qx=ce,$t.qy=we,["C"].concat(B.apply(0,[$t.x1,$t.y1].concat(Xt.slice(1))));case"L":return["C"].concat(h($t.x1,$t.y1,Xt[1],Xt[2]));case"H":return["C"].concat(h($t.x1,$t.y1,Xt[1],$t.y1));case"V":return["C"].concat(h($t.x1,$t.y1,$t.x1,Xt[1]));case"Z":return["C"].concat(h($t.x1,$t.y1,$t.x,$t.y));default:}return Xt}function gt(Xt,$t){$t===void 0&&($t=!1);for(var he=yt(Xt),ce={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},we=[],Ee="",_e=he.length,Le,xe,er=[],Xe=0;Xe<_e;Xe+=1)he[Xe]&&(Ee=he[Xe][0]),we[Xe]=Ee,he[Xe]=mt(he[Xe],ce),Vt(he,we,Xe),_e=he.length,Ee==="Z"&&er.push(Xe),Le=he[Xe],xe=Le.length,ce.x1=+Le[xe-2],ce.y1=+Le[xe-1],ce.x2=+Le[xe-4]||ce.x1,ce.y2=+Le[xe-3]||ce.y1;return $t?[he,er]:he}function Vt(Xt,$t,he){if(Xt[he].length>7){Xt[he].shift();for(var ce=Xt[he],we=he;ce.length;)$t[he]="A",Xt.splice(we+=1,0,["C"].concat(ce.splice(0,6)));Xt.splice(he,1)}}var Jt=function(Xt,$t,he,ce,we){var Ee=-3*$t+9*he-9*ce+3*we,_e=Xt*Ee+6*$t-12*he+6*ce;return Xt*_e-3*$t+3*he},zt=function(Xt,$t,he,ce,we,Ee,_e,Le,xe){xe===null&&(xe=1),xe=xe>1?1:xe<0?0:xe;for(var er=xe/2,Xe=12,hr=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ar=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],fr=0,Sr=0;Sr<Xe;Sr++){var yr=er*hr[Sr]+er,Or=Jt(yr,Xt,he,we,_e),lr=Jt(yr,$t,ce,Ee,Le),Fr=Or*Or+lr*lr;fr+=Ar[Sr]*Math.sqrt(Fr)}return er*fr},Qt=function(Xt,$t,he,ce,we,Ee,_e,Le){for(var xe=[],er=[[],[]],Xe,hr,Ar,fr,Sr=0;Sr<2;++Sr){if(Sr===0?(hr=6*Xt-12*he+6*we,Xe=-3*Xt+9*he-9*we+3*_e,Ar=3*he-3*Xt):(hr=6*$t-12*ce+6*Ee,Xe=-3*$t+9*ce-9*Ee+3*Le,Ar=3*ce-3*$t),Math.abs(Xe)<1e-12){if(Math.abs(hr)<1e-12)continue;fr=-Ar/hr,fr>0&&fr<1&&xe.push(fr);continue}var yr=hr*hr-4*Ar*Xe,Or=Math.sqrt(yr);if(!(yr<0)){var lr=(-hr+Or)/(2*Xe);lr>0&&lr<1&&xe.push(lr);var Fr=(-hr-Or)/(2*Xe);Fr>0&&Fr<1&&xe.push(Fr)}}for(var Kr=xe.length,Vr=Kr,Zr;Kr--;)fr=xe[Kr],Zr=1-fr,er[0][Kr]=Zr*Zr*Zr*Xt+3*Zr*Zr*fr*he+3*Zr*fr*fr*we+fr*fr*fr*_e,er[1][Kr]=Zr*Zr*Zr*$t+3*Zr*Zr*fr*ce+3*Zr*fr*fr*Ee+fr*fr*fr*Le;return er[0][Vr]=Xt,er[1][Vr]=$t,er[0][Vr+1]=_e,er[1][Vr+1]=Le,er[0].length=er[1].length=Vr+2,{min:{x:Math.min.apply(0,er[0]),y:Math.min.apply(0,er[1])},max:{x:Math.max.apply(0,er[0]),y:Math.max.apply(0,er[1])}}},oe=function(Xt,$t,he,ce,we,Ee,_e,Le){if(!(Math.max(Xt,he)<Math.min(we,_e)||Math.min(Xt,he)>Math.max(we,_e)||Math.max($t,ce)<Math.min(Ee,Le)||Math.min($t,ce)>Math.max(Ee,Le))){var xe=(Xt*ce-$t*he)*(we-_e)-(Xt-he)*(we*Le-Ee*_e),er=(Xt*ce-$t*he)*(Ee-Le)-($t-ce)*(we*Le-Ee*_e),Xe=(Xt-he)*(Ee-Le)-($t-ce)*(we-_e);if(!!Xe){var hr=xe/Xe,Ar=er/Xe,fr=+hr.toFixed(2),Sr=+Ar.toFixed(2);if(!(fr<+Math.min(Xt,he).toFixed(2)||fr>+Math.max(Xt,he).toFixed(2)||fr<+Math.min(we,_e).toFixed(2)||fr>+Math.max(we,_e).toFixed(2)||Sr<+Math.min($t,ce).toFixed(2)||Sr>+Math.max($t,ce).toFixed(2)||Sr<+Math.min(Ee,Le).toFixed(2)||Sr>+Math.max(Ee,Le).toFixed(2)))return{x:hr,y:Ar}}}},se=function(Xt,$t,he){return $t>=Xt.x&&$t<=Xt.x+Xt.width&&he>=Xt.y&&he<=Xt.y+Xt.height},jt=function(Xt,$t,he,ce){return Xt===null&&(Xt=$t=he=ce=0),$t===null&&($t=Xt.y,he=Xt.width,ce=Xt.height,Xt=Xt.x),{x:Xt,y:$t,width:he,w:he,height:ce,h:ce,x2:Xt+he,y2:$t+ce,cx:Xt+he/2,cy:$t+ce/2,r1:Math.min(he,ce)/2,r2:Math.max(he,ce)/2,r0:Math.sqrt(he*he+ce*ce)/2,path:X(Xt,$t,he,ce),vb:[Xt,$t,he,ce].join(" ")}},Pt=function(Xt,$t){return Xt=jt(Xt),$t=jt($t),se($t,Xt.x,Xt.y)||se($t,Xt.x2,Xt.y)||se($t,Xt.x,Xt.y2)||se($t,Xt.x2,Xt.y2)||se(Xt,$t.x,$t.y)||se(Xt,$t.x2,$t.y)||se(Xt,$t.x,$t.y2)||se(Xt,$t.x2,$t.y2)||(Xt.x<$t.x2&&Xt.x>$t.x||$t.x<Xt.x2&&$t.x>Xt.x)&&(Xt.y<$t.y2&&Xt.y>$t.y||$t.y<Xt.y2&&$t.y>Xt.y)},pt=function(Xt,$t,he,ce,we,Ee,_e,Le){(0,m.isArray)(Xt)||(Xt=[Xt,$t,he,ce,we,Ee,_e,Le]);var xe=Qt.apply(null,Xt);return jt(xe.min.x,xe.min.y,xe.max.x-xe.min.x,xe.max.y-xe.min.y)},st=function(Xt,$t,he,ce,we,Ee,_e,Le,xe){var er=1-xe,Xe=Math.pow(er,3),hr=Math.pow(er,2),Ar=xe*xe,fr=Ar*xe,Sr=Xe*Xt+hr*3*xe*he+er*3*xe*xe*we+fr*_e,yr=Xe*$t+hr*3*xe*ce+er*3*xe*xe*Ee+fr*Le,Or=Xt+2*xe*(he-Xt)+Ar*(we-2*he+Xt),lr=$t+2*xe*(ce-$t)+Ar*(Ee-2*ce+$t),Fr=he+2*xe*(we-he)+Ar*(_e-2*we+he),Kr=ce+2*xe*(Ee-ce)+Ar*(Le-2*Ee+ce),Vr=er*Xt+xe*he,Zr=er*$t+xe*ce,Ut=er*we+xe*_e,Kt=er*Ee+xe*Le,ie=90-Math.atan2(Or-Fr,lr-Kr)*180/Math.PI;return{x:Sr,y:yr,m:{x:Or,y:lr},n:{x:Fr,y:Kr},start:{x:Vr,y:Zr},end:{x:Ut,y:Kt},alpha:ie}},Ct=function(Xt,$t,he){var ce=pt(Xt),we=pt($t);if(!Pt(ce,we))return he?0:[];for(var Ee=zt.apply(0,Xt),_e=zt.apply(0,$t),Le=~~(Ee/8),xe=~~(_e/8),er=[],Xe=[],hr={},Ar=he?0:[],fr=0;fr<Le+1;fr++){var Sr=st.apply(0,Xt.concat(fr/Le));er.push({x:Sr.x,y:Sr.y,t:fr/Le})}for(var fr=0;fr<xe+1;fr++){var Sr=st.apply(0,$t.concat(fr/xe));Xe.push({x:Sr.x,y:Sr.y,t:fr/xe})}for(var fr=0;fr<Le;fr++)for(var yr=0;yr<xe;yr++){var Or=er[fr],lr=er[fr+1],Fr=Xe[yr],Kr=Xe[yr+1],Vr=Math.abs(lr.x-Or.x)<.001?"y":"x",Zr=Math.abs(Kr.x-Fr.x)<.001?"y":"x",Ut=oe(Or.x,Or.y,lr.x,lr.y,Fr.x,Fr.y,Kr.x,Kr.y);if(Ut){if(hr[Ut.x.toFixed(4)]===Ut.y.toFixed(4))continue;hr[Ut.x.toFixed(4)]=Ut.y.toFixed(4);var Kt=Or.t+Math.abs((Ut[Vr]-Or[Vr])/(lr[Vr]-Or[Vr]))*(lr.t-Or.t),ie=Fr.t+Math.abs((Ut[Zr]-Fr[Zr])/(Kr[Zr]-Fr[Zr]))*(Kr.t-Fr.t);Kt>=0&&Kt<=1&&ie>=0&&ie<=1&&(he?Ar++:Ar.push({x:Ut.x,y:Ut.y,t1:Kt,t2:ie}))}}return Ar},nt=function(Xt,$t,he){Xt=gt(Xt),$t=gt($t);for(var ce,we,Ee,_e,Le,xe,er,Xe,hr,Ar,fr=he?0:[],Sr=0,yr=Xt.length;Sr<yr;Sr++){var Or=Xt[Sr];if(Or[0]==="M")ce=Le=Or[1],we=xe=Or[2];else{Or[0]==="C"?(hr=[ce,we].concat(Or.slice(1)),ce=hr[6],we=hr[7]):(hr=[ce,we,ce,we,Le,xe,Le,xe],ce=Le,we=xe);for(var lr=0,Fr=$t.length;lr<Fr;lr++){var Kr=$t[lr];if(Kr[0]==="M")Ee=er=Kr[1],_e=Xe=Kr[2];else{Kr[0]==="C"?(Ar=[Ee,_e].concat(Kr.slice(1)),Ee=Ar[6],_e=Ar[7]):(Ar=[Ee,_e,Ee,_e,er,Xe,er,Xe],Ee=er,_e=Xe);var Vr=Ct(hr,Ar,he);if(he)fr+=Vr;else{for(var Zr=0,Ut=Vr.length;Zr<Ut;Zr++)Vr[Zr].segment1=Sr,Vr[Zr].segment2=lr,Vr[Zr].bez1=hr,Vr[Zr].bez2=Ar;fr=fr.concat(Vr)}}}}}return fr};function J(Xt,$t){return nt(Xt,$t)}var vt=/,?([a-z]),?/gi;function Tt(Xt){return Xt.join(",").replace(vt,"$1")}function Ht(Xt){return Math.sqrt(Xt[0]*Xt[0]+Xt[1]*Xt[1])}function ue(Xt,$t){return Ht(Xt)*Ht($t)?(Xt[0]*$t[0]+Xt[1]*$t[1])/(Ht(Xt)*Ht($t)):1}function Ce(Xt,$t){return(Xt[0]*$t[1]<Xt[1]*$t[0]?-1:1)*Math.acos(ue(Xt,$t))}function Fe(Xt,$t){return Xt[0]===$t[0]&&Xt[1]===$t[1]}function Ve(Xt,$t){var he=$t[1],ce=$t[2],we=(0,m.mod)((0,m.toRadian)($t[3]),Math.PI*2),Ee=$t[4],_e=$t[5],Le=Xt[0],xe=Xt[1],er=$t[6],Xe=$t[7],hr=Math.cos(we)*(Le-er)/2+Math.sin(we)*(xe-Xe)/2,Ar=-1*Math.sin(we)*(Le-er)/2+Math.cos(we)*(xe-Xe)/2,fr=hr*hr/(he*he)+Ar*Ar/(ce*ce);fr>1&&(he*=Math.sqrt(fr),ce*=Math.sqrt(fr));var Sr=he*he*(Ar*Ar)+ce*ce*(hr*hr),yr=Sr?Math.sqrt((he*he*(ce*ce)-Sr)/Sr):1;Ee===_e&&(yr*=-1),isNaN(yr)&&(yr=0);var Or=ce?yr*he*Ar/ce:0,lr=he?yr*-ce*hr/he:0,Fr=(Le+er)/2+Math.cos(we)*Or-Math.sin(we)*lr,Kr=(xe+Xe)/2+Math.sin(we)*Or+Math.cos(we)*lr,Vr=[(hr-Or)/he,(Ar-lr)/ce],Zr=[(-1*hr-Or)/he,(-1*Ar-lr)/ce],Ut=Ce([1,0],Vr),Kt=Ce(Vr,Zr);return ue(Vr,Zr)<=-1&&(Kt=Math.PI),ue(Vr,Zr)>=1&&(Kt=0),_e===0&&Kt>0&&(Kt=Kt-2*Math.PI),_e===1&&Kt<0&&(Kt=Kt+2*Math.PI),{cx:Fr,cy:Kr,rx:Fe(Xt,[er,Xe])?0:he,ry:Fe(Xt,[er,Xe])?0:ce,startAngle:Ut,endAngle:Ut+Kt,xRotation:we,arcFlag:Ee,sweepFlag:_e}}function dr(Xt,$t){return[$t[0]+($t[0]-Xt[0]),$t[1]+($t[1]-Xt[1])]}function xr(Xt){Xt=_(Xt);for(var $t=[],he=null,ce=null,we=null,Ee=0,_e=Xt.length,Le=0;Le<_e;Le++){var xe=Xt[Le];ce=Xt[Le+1];var er=xe[0],Xe={command:er,prePoint:he,params:xe,startTangent:null,endTangent:null};switch(er){case"M":we=[xe[1],xe[2]],Ee=Le;break;case"A":var hr=Ve(he,xe);Xe.arcParams=hr;break;default:break}if(er==="Z")he=we,ce=Xt[Ee+1];else{var Ar=xe.length;he=[xe[Ar-2],xe[Ar-1]]}ce&&ce[0]==="Z"&&(ce=Xt[Ee],$t[Ee]&&($t[Ee].prePoint=he)),Xe.currentPoint=he,$t[Ee]&&Fe(he,$t[Ee].currentPoint)&&($t[Ee].prePoint=Xe.prePoint);var fr=ce?[ce[ce.length-2],ce[ce.length-1]]:null;Xe.nextPoint=fr;var Sr=Xe.prePoint;if(["L","H","V"].includes(er))Xe.startTangent=[Sr[0]-he[0],Sr[1]-he[1]],Xe.endTangent=[he[0]-Sr[0],he[1]-Sr[1]];else if(er==="Q"){var yr=[xe[1],xe[2]];Xe.startTangent=[Sr[0]-yr[0],Sr[1]-yr[1]],Xe.endTangent=[he[0]-yr[0],he[1]-yr[1]]}else if(er==="T"){var Or=$t[Le-1],yr=dr(Or.currentPoint,Sr);Or.command==="Q"?(Xe.command="Q",Xe.startTangent=[Sr[0]-yr[0],Sr[1]-yr[1]],Xe.endTangent=[he[0]-yr[0],he[1]-yr[1]]):(Xe.command="TL",Xe.startTangent=[Sr[0]-he[0],Sr[1]-he[1]],Xe.endTangent=[he[0]-Sr[0],he[1]-Sr[1]])}else if(er==="C"){var lr=[xe[1],xe[2]],Fr=[xe[3],xe[4]];Xe.startTangent=[Sr[0]-lr[0],Sr[1]-lr[1]],Xe.endTangent=[he[0]-Fr[0],he[1]-Fr[1]],Xe.startTangent[0]===0&&Xe.startTangent[1]===0&&(Xe.startTangent=[lr[0]-Fr[0],lr[1]-Fr[1]]),Xe.endTangent[0]===0&&Xe.endTangent[1]===0&&(Xe.endTangent=[Fr[0]-lr[0],Fr[1]-lr[1]])}else if(er==="S"){var Or=$t[Le-1],lr=dr(Or.currentPoint,Sr),Fr=[xe[1],xe[2]];Or.command==="C"?(Xe.command="C",Xe.startTangent=[Sr[0]-lr[0],Sr[1]-lr[1]],Xe.endTangent=[he[0]-Fr[0],he[1]-Fr[1]]):(Xe.command="SQ",Xe.startTangent=[Sr[0]-Fr[0],Sr[1]-Fr[1]],Xe.endTangent=[he[0]-Fr[0],he[1]-Fr[1]])}else if(er==="A"){var Kr=.001,Vr=Xe.arcParams||{},Zr=Vr.cx,Ut=Zr===void 0?0:Zr,Kt=Vr.cy,ie=Kt===void 0?0:Kt,me=Vr.rx,Me=me===void 0?0:me,Pe=Vr.ry,Je=Pe===void 0?0:Pe,sr=Vr.sweepFlag,Dr=sr===void 0?0:sr,Re=Vr.startAngle,Tr=Re===void 0?0:Re,vi=Vr.endAngle,Mi=vi===void 0?0:vi;Dr===0&&(Kr*=-1);var oi=Me*Math.cos(Tr-Kr)+Ut,di=Je*Math.sin(Tr-Kr)+ie;Xe.startTangent=[oi-we[0],di-we[1]];var Li=Me*Math.cos(Tr+Mi+Kr)+Ut,qi=Je*Math.sin(Tr+Mi-Kr)+ie;Xe.endTangent=[Sr[0]-Li,Sr[1]-qi]}$t.push(Xe)}return $t}var Er=function(Xt,$t,he){return Xt>=$t&&Xt<=he};function Yr(Xt,$t,he,ce){var we=.001,Ee={x:he.x-Xt.x,y:he.y-Xt.y},_e={x:$t.x-Xt.x,y:$t.y-Xt.y},Le={x:ce.x-he.x,y:ce.y-he.y},xe=_e.x*Le.y-_e.y*Le.x,er=xe*xe,Xe=_e.x*_e.x+_e.y*_e.y,hr=Le.x*Le.x+Le.y*Le.y,Ar=null;if(er>we*Xe*hr){var fr=(Ee.x*Le.y-Ee.y*Le.x)/xe,Sr=(Ee.x*_e.y-Ee.y*_e.x)/xe;Er(fr,0,1)&&Er(Sr,0,1)&&(Ar={x:Xt.x+fr*_e.x,y:Xt.y+fr*_e.y})}return Ar}var gr=1e-6;function ri(Xt){return Math.abs(Xt)<gr?0:Xt<0?-1:1}function bi(Xt,$t,he){return(he[0]-Xt[0])*($t[1]-Xt[1])==($t[0]-Xt[0])*(he[1]-Xt[1])&&Math.min(Xt[0],$t[0])<=he[0]&&he[0]<=Math.max(Xt[0],$t[0])&&Math.min(Xt[1],$t[1])<=he[1]&&he[1]<=Math.max(Xt[1],$t[1])}function Qr(Xt,$t,he){var ce=!1,we=Xt.length;if(we<=2)return!1;for(var Ee=0;Ee<we;Ee++){var _e=Xt[Ee],Le=Xt[(Ee+1)%we];if(bi(_e,Le,[$t,he]))return!0;ri(_e[1]-he)>0!=ri(Le[1]-he)>0&&ri($t-(he-_e[1])*(_e[0]-Le[0])/(_e[1]-Le[1])-_e[0])<0&&(ce=!ce)}return ce}function gi(Xt){for(var $t=[],he=Xt.length,ce=0;ce<he-1;ce++){var we=Xt[ce],Ee=Xt[ce+1];$t.push({from:{x:we[0],y:we[1]},to:{x:Ee[0],y:Ee[1]}})}if($t.length>1){var _e=Xt[0],Le=Xt[he-1];$t.push({from:{x:Le[0],y:Le[1]},to:{x:_e[0],y:_e[1]}})}return $t}function hn(Xt,$t){var he=!1;return(0,m.each)(Xt,function(ce){if(Yr(ce.from,ce.to,$t.from,$t.to))return he=!0,!1}),he}function mn(Xt){var $t=Xt.map(function(ce){return ce[0]}),he=Xt.map(function(ce){return ce[1]});return{minX:Math.min.apply(null,$t),maxX:Math.max.apply(null,$t),minY:Math.min.apply(null,he),maxY:Math.max.apply(null,he)}}function Cn(Xt,$t){return!($t.minX>Xt.maxX||$t.maxX<Xt.minX||$t.minY>Xt.maxY||$t.maxY<Xt.minY)}function Xn(Xt,$t){if(Xt.length<2||$t.length<2)return!1;var he=mn(Xt),ce=mn($t);if(!Cn(he,ce))return!1;var we=!1;if((0,m.each)($t,function(xe){if(Qr(Xt,xe[0],xe[1]))return we=!0,!1}),we||((0,m.each)(Xt,function(xe){if(Qr($t,xe[0],xe[1]))return we=!0,!1}),we))return!0;var Ee=gi(Xt),_e=gi($t),Le=!1;return(0,m.each)(_e,function(xe){if(hn(Ee,xe))return Le=!0,!1}),Le}},9868:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isSamePoint=void 0;var m=d(26169);function L(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function I(M,A){return L(M)*L(A)?(M[0]*A[0]+M[1]*A[1])/(L(M)*L(A)):1}function P(M,A){return(M[0]*A[1]<M[1]*A[0]?-1:1)*Math.acos(I(M,A))}function _(M,A){return M[0]===A[0]&&M[1]===A[1]}S.isSamePoint=_;function T(M,A){var p=A[1],w=A[2],y=(0,m.mod)((0,m.toRadian)(A[3]),Math.PI*2),b=A[4],x=A[5],E=M[0],k=M[1],D=A[6],N=A[7],z=Math.cos(y)*(E-D)/2+Math.sin(y)*(k-N)/2,W=-1*Math.sin(y)*(E-D)/2+Math.cos(y)*(k-N)/2,X=z*z/(p*p)+W*W/(w*w);X>1&&(p*=Math.sqrt(X),w*=Math.sqrt(X));var U=p*p*(W*W)+w*w*(z*z),et=U?Math.sqrt((p*p*(w*w)-U)/U):1;b===x&&(et*=-1),isNaN(et)&&(et=0);var Q=w?et*p*W/w:0,ct=p?et*-w*z/p:0,Lt=(E+D)/2+Math.cos(y)*Q-Math.sin(y)*ct,_t=(k+N)/2+Math.sin(y)*Q+Math.cos(y)*ct,yt=[(z-Q)/p,(W-ct)/w],bt=[(-1*z-Q)/p,(-1*W-ct)/w],Mt=P([1,0],yt),xt=P(yt,bt);return I(yt,bt)<=-1&&(xt=Math.PI),I(yt,bt)>=1&&(xt=0),x===0&&xt>0&&(xt=xt-2*Math.PI),x===1&&xt<0&&(xt=xt+2*Math.PI),{cx:Lt,cy:_t,rx:_(M,[D,N])?0:p,ry:_(M,[D,N])?0:w,startAngle:Mt,endAngle:Mt+xt,xRotation:y,arcFlag:b,sweepFlag:x}}S.default=T},29700:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(L,I,P){return L>=I&&L<=P};function m(L,I,P,_){var T=.001,M={x:P.x-L.x,y:P.y-L.y},A={x:I.x-L.x,y:I.y-L.y},p={x:_.x-P.x,y:_.y-P.y},w=A.x*p.y-A.y*p.x,y=w*w,b=A.x*A.x+A.y*A.y,x=p.x*p.x+p.y*p.y,E=null;if(y>T*b*x){var k=(M.x*p.y-M.y*p.x)/w,D=(M.x*A.y-M.y*A.x)/w;d(k,0,1)&&d(D,0,1)&&(E={x:L.x+k*A.x,y:L.y+k*A.y})}return E}S.default=m},65410:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(62604),L=d(29700),I=d(26169);function P(p){for(var w=[],y=p.length,b=0;b<y-1;b++){var x=p[b],E=p[b+1];w.push({from:{x:x[0],y:x[1]},to:{x:E[0],y:E[1]}})}if(w.length>1){var k=p[0],D=p[y-1];w.push({from:{x:D[0],y:D[1]},to:{x:k[0],y:k[1]}})}return w}function _(p,w){var y=!1;return(0,I.each)(p,function(b){if((0,L.default)(b.from,b.to,w.from,w.to))return y=!0,!1}),y}function T(p){var w=p.map(function(b){return b[0]}),y=p.map(function(b){return b[1]});return{minX:Math.min.apply(null,w),maxX:Math.max.apply(null,w),minY:Math.min.apply(null,y),maxY:Math.max.apply(null,y)}}function M(p,w){return!(w.minX>p.maxX||w.maxX<p.minX||w.minY>p.maxY||w.maxY<p.minY)}function A(p,w){if(p.length<2||w.length<2)return!1;var y=T(p),b=T(w);if(!M(y,b))return!1;var x=!1;if((0,I.each)(w,function(N){if((0,m.default)(p,N[0],N[1]))return x=!0,!1}),x||((0,I.each)(p,function(N){if((0,m.default)(w,N[0],N[1]))return x=!0,!1}),x))return!0;var E=P(p),k=P(w),D=!1;return(0,I.each)(k,function(N){if(_(E,N))return D=!0,!1}),D}S.default=A},78289:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,I=new RegExp("([a-z])["+L+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+L+"]*,?["+L+"]*)+)","ig"),P=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+L+"]*,?["+L+"]*","ig");function _(T){if(!T)return null;if((0,m.isArray)(T))return T;var M={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},A=[];return String(T).replace(I,function(p,w,y){var b=[],x=w.toLowerCase();if(y.replace(P,function(E,k){k&&b.push(+k)}),x==="m"&&b.length>2&&(A.push([w].concat(b.splice(0,2))),x="l",w=w==="m"?"l":"L"),x==="o"&&b.length===1&&A.push([w,b[0]]),x==="r")A.push([w].concat(b));else for(;b.length>=M[x]&&(A.push([w].concat(b.splice(0,M[x]))),!!M[x]););return""}),A}S.default=_},69854:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(26169),L=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,I=/[^\s\,]+/ig;function P(_){var T=_||[];if((0,m.isArray)(T))return T;if((0,m.isString)(T))return T=T.match(L),(0,m.each)(T,function(M,A){if(M=M.match(I),M[0].length>1){var p=M[0].charAt(0);M.splice(1,0,M[0].substr(1)),M[0]=p}(0,m.each)(M,function(w,y){isNaN(w)||(M[y]=+w)}),T[A]=M}),T}S.default=P},54401:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(78289),I=/[a-z]/;function P(T,M){return[M[0]+(M[0]-T[0]),M[1]+(M[1]-T[1])]}function _(T){var M=(0,L.default)(T);if(!M||!M.length)return[["M",0,0]];for(var A=!1,p=0;p<M.length;p++){var w=M[p][0];if(I.test(w)||["V","H","T","S"].indexOf(w)>=0){A=!0;break}}if(!A)return M;var y=[],b=0,x=0,E=0,k=0,D=0,N,z,W=M[0];(W[0]==="M"||W[0]==="m")&&(b=+W[1],x=+W[2],E=b,k=x,D++,y[0]=["M",b,x]);for(var p=D,X=M.length;p<X;p++){var U=M[p],et=y[p-1],Q=[],w=U[0],ct=w.toUpperCase();if(w!==ct)switch(Q[0]=ct,ct){case"A":Q[1]=U[1],Q[2]=U[2],Q[3]=U[3],Q[4]=U[4],Q[5]=U[5],Q[6]=+U[6]+b,Q[7]=+U[7]+x;break;case"V":Q[1]=+U[1]+x;break;case"H":Q[1]=+U[1]+b;break;case"M":E=+U[1]+b,k=+U[2]+x,Q[1]=E,Q[2]=k;break;default:for(var Lt=1,_t=U.length;Lt<_t;Lt++)Q[Lt]=+U[Lt]+(Lt%2?b:x)}else Q=M[p];switch(ct){case"Z":b=+E,x=+k;break;case"H":b=Q[1],Q=["L",b,x];break;case"V":x=Q[1],Q=["L",b,x];break;case"T":b=Q[1],x=Q[2];var yt=P([et[1],et[2]],[et[3],et[4]]);Q=["Q",yt[0],yt[1],b,x];break;case"S":b=Q[Q.length-2],x=Q[Q.length-1];var bt=et.length,Mt=P([et[bt-4],et[bt-3]],[et[bt-2],et[bt-1]]);Q=["C",Mt[0],Mt[1],Q[1],Q[2],b,x];break;case"M":E=Q[Q.length-2],k=Q[Q.length-1];break;default:b=Q[Q.length-2],x=Q[Q.length-1]}y.push(Q)}return y}S.Z=_},36021:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(9868),L=d(9868),I=d(69854);function P(T,M){return[M[0]+(M[0]-T[0]),M[1]+(M[1]-T[1])]}function _(T){T=(0,I.default)(T);for(var M=[],A=null,p=null,w=null,y=0,b=T.length,x=0;x<b;x++){var E=T[x];p=T[x+1];var k=E[0],D={command:k,prePoint:A,params:E,startTangent:null,endTangent:null};switch(k){case"M":w=[E[1],E[2]],y=x;break;case"A":var N=(0,m.default)(A,E);D.arcParams=N;break;default:break}if(k==="Z")A=w,p=T[y+1];else{var z=E.length;A=[E[z-2],E[z-1]]}p&&p[0]==="Z"&&(p=T[y],M[y]&&(M[y].prePoint=A)),D.currentPoint=A,M[y]&&(0,L.isSamePoint)(A,M[y].currentPoint)&&(M[y].prePoint=D.prePoint);var W=p?[p[p.length-2],p[p.length-1]]:null;D.nextPoint=W;var X=D.prePoint;if(["L","H","V"].includes(k))D.startTangent=[X[0]-A[0],X[1]-A[1]],D.endTangent=[A[0]-X[0],A[1]-X[1]];else if(k==="Q"){var U=[E[1],E[2]];D.startTangent=[X[0]-U[0],X[1]-U[1]],D.endTangent=[A[0]-U[0],A[1]-U[1]]}else if(k==="T"){var et=M[x-1],U=P(et.currentPoint,X);et.command==="Q"?(D.command="Q",D.startTangent=[X[0]-U[0],X[1]-U[1]],D.endTangent=[A[0]-U[0],A[1]-U[1]]):(D.command="TL",D.startTangent=[X[0]-A[0],X[1]-A[1]],D.endTangent=[A[0]-X[0],A[1]-X[1]])}else if(k==="C"){var Q=[E[1],E[2]],ct=[E[3],E[4]];D.startTangent=[X[0]-Q[0],X[1]-Q[1]],D.endTangent=[A[0]-ct[0],A[1]-ct[1]],D.startTangent[0]===0&&D.startTangent[1]===0&&(D.startTangent=[Q[0]-ct[0],Q[1]-ct[1]]),D.endTangent[0]===0&&D.endTangent[1]===0&&(D.endTangent=[ct[0]-Q[0],ct[1]-Q[1]])}else if(k==="S"){var et=M[x-1],Q=P(et.currentPoint,X),ct=[E[1],E[2]];et.command==="C"?(D.command="C",D.startTangent=[X[0]-Q[0],X[1]-Q[1]],D.endTangent=[A[0]-ct[0],A[1]-ct[1]]):(D.command="SQ",D.startTangent=[X[0]-ct[0],X[1]-ct[1]],D.endTangent=[A[0]-ct[0],A[1]-ct[1]])}else if(k==="A"){var Lt=.001,_t=D.arcParams||{},yt=_t.cx,bt=yt===void 0?0:yt,Mt=_t.cy,xt=Mt===void 0?0:Mt,Bt=_t.rx,wt=Bt===void 0?0:Bt,H=_t.ry,K=H===void 0?0:H,B=_t.sweepFlag,h=B===void 0?0:B,mt=_t.startAngle,gt=mt===void 0?0:mt,Vt=_t.endAngle,Jt=Vt===void 0?0:Vt;h===0&&(Lt*=-1);var zt=wt*Math.cos(gt-Lt)+bt,Qt=K*Math.sin(gt-Lt)+xt;D.startTangent=[zt-w[0],Qt-w[1]];var oe=wt*Math.cos(gt+Jt+Lt)+bt,se=K*Math.sin(gt+Jt-Lt)+xt;D.endTangent=[X[0]-oe,X[1]-se]}M.push(D)}return M}S.default=_},62604:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=1e-6;function m(P){return Math.abs(P)<d?0:P<0?-1:1}function L(P,_,T){return(T[0]-P[0])*(_[1]-P[1])==(_[0]-P[0])*(T[1]-P[1])&&Math.min(P[0],_[0])<=T[0]&&T[0]<=Math.max(P[0],_[0])&&Math.min(P[1],_[1])<=T[1]&&T[1]<=Math.max(P[1],_[1])}function I(P,_,T){var M=!1,A=P.length;if(A<=2)return!1;for(var p=0;p<A;p++){var w=P[p],y=P[(p+1)%A];if(L(w,y,[_,T]))return!0;m(w[1]-T)>0!=m(y[1]-T)>0&&m(_-(T-w[1])*(w[0]-y[0])/(w[1]-y[1])-w[0])<0&&(M=!M)}return M}S.default=I},65624:function(lt,S,d){"use strict";d.r(S),d.d(S,{Category:function(){return p},Identity:function(){return st},Linear:function(){return bt},Log:function(){return B},Pow:function(){return mt},Quantile:function(){return oe},Quantize:function(){return zt},Scale:function(){return T},Time:function(){return Vt},TimeCat:function(){return ct},getScale:function(){return jt},getTickMethod:function(){return I},registerScale:function(){return Pt},registerTickMethod:function(){return P}});var m=d(26169),L={};function I(Ut){return L[Ut]}function P(Ut,Kt){L[Ut]=Kt}var _=function(){function Ut(Kt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=Kt,this.initCfg(),this.init()}return Ut.prototype.translate=function(Kt){return Kt},Ut.prototype.change=function(Kt){(0,m.assign)(this.__cfg__,Kt),this.init()},Ut.prototype.clone=function(){return this.constructor(this.__cfg__)},Ut.prototype.getTicks=function(){var Kt=this;return(0,m.map)(this.ticks,function(ie,me){return(0,m.isObject)(ie)?ie:{text:Kt.getText(ie,me),tickValue:ie,value:Kt.scale(ie)}})},Ut.prototype.getText=function(Kt,ie){var me=this.formatter,Me=me?me(Kt,ie):Kt;return(0,m.isNil)(Me)||!(0,m.isFunction)(Me.toString)?"":Me.toString()},Ut.prototype.getConfig=function(Kt){return this.__cfg__[Kt]},Ut.prototype.init=function(){(0,m.assign)(this,this.__cfg__),this.setDomain(),(0,m.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},Ut.prototype.initCfg=function(){},Ut.prototype.setDomain=function(){},Ut.prototype.calculateTicks=function(){var Kt=this.tickMethod,ie=[];if((0,m.isString)(Kt)){var me=I(Kt);if(!me)throw new Error("There is no method to to calculate ticks!");ie=me(this)}else(0,m.isFunction)(Kt)&&(ie=Kt(this));return ie},Ut.prototype.rangeMin=function(){return this.range[0]},Ut.prototype.rangeMax=function(){return this.range[1]},Ut.prototype.calcPercent=function(Kt,ie,me){return(0,m.isNumber)(Kt)?(Kt-ie)/(me-ie):NaN},Ut.prototype.calcValue=function(Kt,ie,me){return ie+Kt*(me-ie)},Ut}(),T=_,M=d(44614),A=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="cat",ie.isCategory=!0,ie}return Kt.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var ie=0;ie<this.values.length;ie++)this.translateIndexMap.set(this.values[ie],ie)}},Kt.prototype.translate=function(ie){this.buildIndexMap();var me=this.translateIndexMap.get(ie);return me===void 0&&(me=(0,m.isNumber)(ie)?ie:NaN),me},Kt.prototype.scale=function(ie){var me=this.translate(ie),Me=this.calcPercent(me,this.min,this.max);return this.calcValue(Me,this.rangeMin(),this.rangeMax())},Kt.prototype.invert=function(ie){var me=this.max-this.min,Me=this.calcPercent(ie,this.rangeMin(),this.rangeMax()),Pe=Math.round(me*Me)+this.min;return Pe<this.min||Pe>this.max?NaN:this.values[Pe]},Kt.prototype.getText=function(ie){for(var me=[],Me=1;Me<arguments.length;Me++)me[Me-1]=arguments[Me];var Pe=ie;return(0,m.isNumber)(ie)&&!this.values.includes(ie)&&(Pe=this.values[Pe]),Ut.prototype.getText.apply(this,(0,M.__spreadArrays)([Pe],me))},Kt.prototype.initCfg=function(){this.tickMethod="cat"},Kt.prototype.setDomain=function(){if((0,m.isNil)(this.getConfig("min"))&&(this.min=0),(0,m.isNil)(this.getConfig("max"))){var ie=this.values.length;this.max=ie>1?ie-1:ie}this.translateIndexMap&&(this.translateIndexMap=void 0)},Kt}(T),p=A,w=d(27009);function y(Ut){return function(Kt,ie,me,Me){for(var Pe=(0,m.isNil)(me)?0:me,Je=(0,m.isNil)(Me)?Kt.length:Me;Pe<Je;){var sr=Pe+Je>>>1;Ut(Kt[sr])>ie?Je=sr:Pe=sr+1}return Pe}}var b="format";function x(Ut,Kt){var ie=w[b]||w.default[b];return ie(Ut,Kt)}function E(Ut){return(0,m.isString)(Ut)&&(Ut.indexOf("T")>0?Ut=new Date(Ut).getTime():Ut=new Date(Ut.replace(/-/gi,"/")).getTime()),(0,m.isDate)(Ut)&&(Ut=Ut.getTime()),Ut}var k=1e3,D=60*k,N=60*D,z=24*N,W=z*31,X=z*365,U=[["HH:mm:ss",k],["HH:mm:ss",k*10],["HH:mm:ss",k*30],["HH:mm",D],["HH:mm",D*10],["HH:mm",D*30],["HH",N],["HH",N*6],["HH",N*12],["YYYY-MM-DD",z],["YYYY-MM-DD",z*4],["YYYY-WW",z*7],["YYYY-MM",W],["YYYY-MM",W*4],["YYYY-MM",W*6],["YYYY",z*380]];function et(Ut,Kt,ie){var me=(Kt-Ut)/ie,Me=y(function(Je){return Je[1]})(U,me)-1,Pe=U[Me];return Me<0?Pe=U[0]:Me>=U.length&&(Pe=(0,m.last)(U)),Pe}var Q=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="timeCat",ie}return Kt.prototype.translate=function(ie){ie=E(ie);var me=this.values.indexOf(ie);return me===-1&&((0,m.isNumber)(ie)&&ie<this.values.length?me=ie:me=NaN),me},Kt.prototype.getText=function(ie,me){var Me=this.translate(ie);if(Me>-1){var Pe=this.values[Me],Je=this.formatter;return Pe=Je?Je(Pe,me):x(Pe,this.mask),Pe}return ie},Kt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Kt.prototype.setDomain=function(){var ie=this.values;(0,m.each)(ie,function(me,Me){ie[Me]=E(me)}),ie.sort(function(me,Me){return me-Me}),Ut.prototype.setDomain.call(this)},Kt}(p),ct=Q,Lt=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.isContinuous=!0,ie}return Kt.prototype.scale=function(ie){if((0,m.isNil)(ie))return NaN;var me=this.rangeMin(),Me=this.rangeMax(),Pe=this.max,Je=this.min;if(Pe===Je)return me;var sr=this.getScalePercent(ie);return me+sr*(Me-me)},Kt.prototype.init=function(){Ut.prototype.init.call(this);var ie=this.ticks,me=(0,m.head)(ie),Me=(0,m.last)(ie);me<this.min&&(this.min=me),Me>this.max&&(this.max=Me),(0,m.isNil)(this.minLimit)||(this.min=me),(0,m.isNil)(this.maxLimit)||(this.max=Me)},Kt.prototype.setDomain=function(){var ie=(0,m.getRange)(this.values),me=ie.min,Me=ie.max;(0,m.isNil)(this.min)&&(this.min=me),(0,m.isNil)(this.max)&&(this.max=Me),this.min>this.max&&(this.min=me,this.max=Me)},Kt.prototype.calculateTicks=function(){var ie=this,me=Ut.prototype.calculateTicks.call(this);return this.nice||(me=(0,m.filter)(me,function(Me){return Me>=ie.min&&Me<=ie.max})),me},Kt.prototype.getScalePercent=function(ie){var me=this.max,Me=this.min;return(ie-Me)/(me-Me)},Kt.prototype.getInvertPercent=function(ie){return(ie-this.rangeMin())/(this.rangeMax()-this.rangeMin())},Kt}(T),_t=Lt,yt=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="linear",ie.isLinear=!0,ie}return Kt.prototype.invert=function(ie){var me=this.getInvertPercent(ie);return this.min+me*(this.max-this.min)},Kt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},Kt}(_t),bt=yt;function Mt(Ut,Kt){var ie=Math.E,me;return Kt>=0?me=Math.pow(ie,Math.log(Kt)/Ut):me=Math.pow(ie,Math.log(-Kt)/Ut)*-1,me}function xt(Ut,Kt){return Ut===1?1:Math.log(Kt)/Math.log(Ut)}function Bt(Ut,Kt,ie){(0,m.isNil)(ie)&&(ie=Math.max.apply(null,Ut));var me=ie;return(0,m.each)(Ut,function(Me){Me>0&&Me<me&&(me=Me)}),me===ie&&(me=ie/Kt),me>1&&(me=1),me}function wt(Ut){var Kt=Ut.toString().split(/[eE]/),ie=(Kt[0].split(".")[1]||"").length-+(Kt[1]||0);return ie>0?ie:0}function H(Ut,Kt){var ie=wt(Ut),me=wt(Kt),Me=Math.pow(10,Math.max(ie,me));return(Ut*Me+Kt*Me)/Me}var K=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="log",ie}return Kt.prototype.invert=function(ie){var me=this.base,Me=xt(me,this.max),Pe=this.rangeMin(),Je=this.rangeMax()-Pe,sr,Dr=this.positiveMin;if(Dr){if(ie===0)return 0;sr=xt(me,Dr/me);var Re=1/(Me-sr)*Je;if(ie<Re)return ie/Re*Dr}else sr=xt(me,this.min);var Tr=(ie-Pe)/Je,vi=Tr*(Me-sr)+sr;return Math.pow(me,vi)},Kt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Kt.prototype.setDomain=function(){Ut.prototype.setDomain.call(this);var ie=this.min;if(ie<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");ie===0&&(this.positiveMin=Bt(this.values,this.base,this.max))},Kt.prototype.getScalePercent=function(ie){var me=this.max,Me=this.min;if(me===Me||ie<=0)return 0;var Pe=this.base,Je=this.positiveMin;Je&&(Me=Je*1/Pe);var sr;return ie<Je?sr=ie/Je/(xt(Pe,me)-xt(Pe,Me)):sr=(xt(Pe,ie)-xt(Pe,Me))/(xt(Pe,me)-xt(Pe,Me)),sr},Kt}(_t),B=K,h=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="pow",ie}return Kt.prototype.invert=function(ie){var me=this.getInvertPercent(ie),Me=this.exponent,Pe=Mt(Me,this.max),Je=Mt(Me,this.min),sr=me*(Pe-Je)+Je,Dr=sr>=0?1:-1;return Math.pow(sr,Me)*Dr},Kt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Kt.prototype.getScalePercent=function(ie){var me=this.max,Me=this.min;if(me===Me)return 0;var Pe=this.exponent,Je=(Mt(Pe,ie)-Mt(Pe,Me))/(Mt(Pe,me)-Mt(Pe,Me));return Je},Kt}(_t),mt=h,gt=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="time",ie}return Kt.prototype.getText=function(ie,me){var Me=this.translate(ie),Pe=this.formatter;return Pe?Pe(Me,me):x(Me,this.mask)},Kt.prototype.scale=function(ie){var me=ie;return((0,m.isString)(me)||(0,m.isDate)(me))&&(me=this.translate(me)),Ut.prototype.scale.call(this,me)},Kt.prototype.translate=function(ie){return E(ie)},Kt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Kt.prototype.setDomain=function(){var ie=this.values,me=this.getConfig("min"),Me=this.getConfig("max");if((!(0,m.isNil)(me)||!(0,m.isNumber)(me))&&(this.min=this.translate(this.min)),(!(0,m.isNil)(Me)||!(0,m.isNumber)(Me))&&(this.max=this.translate(this.max)),ie&&ie.length){var Pe=[],Je=Infinity,sr=Je,Dr=0;(0,m.each)(ie,function(Re){var Tr=E(Re);if(isNaN(Tr))throw new TypeError("Invalid Time: "+Re+" in time scale!");Je>Tr?(sr=Je,Je=Tr):sr>Tr&&(sr=Tr),Dr<Tr&&(Dr=Tr),Pe.push(Tr)}),ie.length>1&&(this.minTickInterval=sr-Je),(0,m.isNil)(me)&&(this.min=Je),(0,m.isNil)(Me)&&(this.max=Dr)}},Kt}(bt),Vt=gt,Jt=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="quantize",ie}return Kt.prototype.invert=function(ie){var me=this.ticks,Me=me.length,Pe=this.getInvertPercent(ie),Je=Math.floor(Pe*(Me-1));if(Je>=Me-1)return(0,m.last)(me);if(Je<0)return(0,m.head)(me);var sr=me[Je],Dr=me[Je+1],Re=Je/(Me-1),Tr=(Je+1)/(Me-1);return sr+(Pe-Re)/(Tr-Re)*(Dr-sr)},Kt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Kt.prototype.calculateTicks=function(){var ie=Ut.prototype.calculateTicks.call(this);return this.nice||((0,m.last)(ie)!==this.max&&ie.push(this.max),(0,m.head)(ie)!==this.min&&ie.unshift(this.min)),ie},Kt.prototype.getScalePercent=function(ie){var me=this.ticks;if(ie<(0,m.head)(me))return 0;if(ie>(0,m.last)(me))return 1;var Me=0;return(0,m.each)(me,function(Pe,Je){if(ie>=Pe)Me=Je;else return!1}),Me/(me.length-1)},Kt}(_t),zt=Jt,Qt=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="quantile",ie}return Kt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},Kt}(zt),oe=Qt,se={};function jt(Ut){return se[Ut]}function Pt(Ut,Kt){if(jt(Ut))throw new Error("type '"+Ut+"' existed.");se[Ut]=Kt}var pt=function(Ut){(0,M.__extends)(Kt,Ut);function Kt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.type="identity",ie.isIdentity=!0,ie}return Kt.prototype.calculateTicks=function(){return this.values},Kt.prototype.scale=function(ie){return this.values[0]!==ie&&(0,m.isNumber)(ie)?ie:this.range[0]},Kt.prototype.invert=function(ie){var me=this.range;return ie<me[0]||ie>me[1]?NaN:this.values[0]},Kt}(T),st=pt;function Ct(Ut){var Kt=Ut.values,ie=Ut.tickInterval,me=Ut.tickCount,Me=Ut.showLast;if((0,m.isNumber)(ie)){var Pe=(0,m.filter)(Kt,function(di,Li){return Li%ie==0}),Je=(0,m.last)(Kt);return Me&&(0,m.last)(Pe)!==Je&&Pe.push(Je),Pe}var sr=Kt.length,Dr=Ut.min,Re=Ut.max;if((0,m.isNil)(Dr)&&(Dr=0),(0,m.isNil)(Re)&&(Re=Kt.length-1),!(0,m.isNumber)(me)||me>=sr)return Kt.slice(Dr,Re+1);if(me<=0||Re<=0)return[];for(var Tr=me===1?sr:Math.floor(sr/(me-1)),vi=[],Mi=Dr,oi=0;oi<me&&!(Mi>=Re);oi++)Mi=Math.min(Dr+oi*Tr,Re),oi===me-1&&Me?vi.push(Kt[Re]):vi.push(Kt[Mi]);return vi}function nt(Ut){var Kt=Ut.min,ie=Ut.max,me=Ut.nice,Me=Ut.tickCount,Pe=new ue;return Pe.domain([Kt,ie]),me&&Pe.nice(Me),Pe.ticks(Me)}var J=5,vt=Math.sqrt(50),Tt=Math.sqrt(10),Ht=Math.sqrt(2),ue=function(){function Ut(){this._domain=[0,1]}return Ut.prototype.domain=function(Kt){return Kt?(this._domain=Array.from(Kt,Number),this):this._domain.slice()},Ut.prototype.nice=function(Kt){var ie,me;Kt===void 0&&(Kt=J);var Me=this._domain.slice(),Pe=0,Je=this._domain.length-1,sr=this._domain[Pe],Dr=this._domain[Je],Re;return Dr<sr&&(ie=[Dr,sr],sr=ie[0],Dr=ie[1],me=[Je,Pe],Pe=me[0],Je=me[1]),Re=Fe(sr,Dr,Kt),Re>0?(sr=Math.floor(sr/Re)*Re,Dr=Math.ceil(Dr/Re)*Re,Re=Fe(sr,Dr,Kt)):Re<0&&(sr=Math.ceil(sr*Re)/Re,Dr=Math.floor(Dr*Re)/Re,Re=Fe(sr,Dr,Kt)),Re>0?(Me[Pe]=Math.floor(sr/Re)*Re,Me[Je]=Math.ceil(Dr/Re)*Re,this.domain(Me)):Re<0&&(Me[Pe]=Math.ceil(sr*Re)/Re,Me[Je]=Math.floor(Dr*Re)/Re,this.domain(Me)),this},Ut.prototype.ticks=function(Kt){return Kt===void 0&&(Kt=J),Ce(this._domain[0],this._domain[this._domain.length-1],Kt||J)},Ut}();function Ce(Ut,Kt,ie){var me,Me=-1,Pe,Je,sr;if(Kt=+Kt,Ut=+Ut,ie=+ie,Ut===Kt&&ie>0)return[Ut];if((me=Kt<Ut)&&(Pe=Ut,Ut=Kt,Kt=Pe),(sr=Fe(Ut,Kt,ie))===0||!isFinite(sr))return[];if(sr>0)for(Ut=Math.ceil(Ut/sr),Kt=Math.floor(Kt/sr),Je=new Array(Pe=Math.ceil(Kt-Ut+1));++Me<Pe;)Je[Me]=(Ut+Me)*sr;else for(Ut=Math.floor(Ut*sr),Kt=Math.ceil(Kt*sr),Je=new Array(Pe=Math.ceil(Ut-Kt+1));++Me<Pe;)Je[Me]=(Ut-Me)/sr;return me&&Je.reverse(),Je}function Fe(Ut,Kt,ie){var me=(Kt-Ut)/Math.max(0,ie),Me=Math.floor(Math.log(me)/Math.LN10),Pe=me/Math.pow(10,Me);return Me>=0?(Pe>=vt?10:Pe>=Tt?5:Pe>=Ht?2:1)*Math.pow(10,Me):-Math.pow(10,-Me)/(Pe>=vt?10:Pe>=Tt?5:Pe>=Ht?2:1)}function Ve(Ut,Kt,ie){var me;return ie==="ceil"?me=Math.ceil(Ut/Kt):ie==="floor"?me=Math.floor(Ut/Kt):me=Math.round(Ut/Kt),me*Kt}function dr(Ut,Kt,ie){var me=Ve(Ut,ie,"floor"),Me=Ve(Kt,ie,"ceil");me=(0,m.fixedBase)(me,ie),Me=(0,m.fixedBase)(Me,ie);for(var Pe=[],Je=Math.max((Me-me)/(Math.pow(2,12)-1),ie),sr=me;sr<=Me;sr=sr+Je){var Dr=(0,m.fixedBase)(sr,Je);Pe.push(Dr)}return{min:me,max:Me,ticks:Pe}}function xr(Ut,Kt,ie){var me,Me=Ut.minLimit,Pe=Ut.maxLimit,Je=Ut.min,sr=Ut.max,Dr=Ut.tickCount,Re=Dr===void 0?5:Dr,Tr=(0,m.isNil)(Me)?(0,m.isNil)(Kt)?Je:Kt:Me,vi=(0,m.isNil)(Pe)?(0,m.isNil)(ie)?sr:ie:Pe;if(Tr>vi&&(me=[Tr,vi],vi=me[0],Tr=me[1]),Re<=2)return[Tr,vi];for(var Mi=(vi-Tr)/(Re-1),oi=[],di=0;di<Re;di++)oi.push(Tr+Mi*di);return oi}function Er(Ut){var Kt=Ut.min,ie=Ut.max,me=Ut.tickInterval,Me=Ut.minLimit,Pe=Ut.maxLimit,Je=nt(Ut);return!(0,m.isNil)(Me)||!(0,m.isNil)(Pe)?xr(Ut,(0,m.head)(Je),(0,m.last)(Je)):me?dr(Kt,ie,me).ticks:Je}function Yr(Ut){return Math.abs(Ut)<1e-15?Ut:parseFloat(Ut.toFixed(15))}var gr=[1,5,2,2.5,4,3],ri=null,bi=Number.EPSILON*100;function Qr(Ut,Kt){return(Ut%Kt+Kt)%Kt}function gi(Ut){return Math.round(Ut*1e12)/1e12}function hn(Ut,Kt,ie,me,Me,Pe){var Je=(0,m.size)(Kt),sr=(0,m.indexOf)(Kt,Ut),Dr=0,Re=Qr(me,Pe);return(Re<bi||Pe-Re<bi)&&me<=0&&Me>=0&&(Dr=1),1-sr/(Je-1)-ie+Dr}function mn(Ut,Kt,ie){var me=(0,m.size)(Kt),Me=(0,m.indexOf)(Kt,Ut),Pe=1;return 1-Me/(me-1)-ie+Pe}function Cn(Ut,Kt,ie,me,Me,Pe){var Je=(Ut-1)/(Pe-Me),sr=(Kt-1)/(Math.max(Pe,me)-Math.min(ie,Me));return 2-Math.max(Je/sr,sr/Je)}function Xn(Ut,Kt){return Ut>=Kt?2-(Ut-1)/(Kt-1):1}function Xt(Ut,Kt,ie,me){var Me=Kt-Ut;return 1-.5*(Math.pow(Kt-me,2)+Math.pow(Ut-ie,2))/Math.pow(.1*Me,2)}function $t(Ut,Kt,ie){var me=Kt-Ut;if(ie>me){var Me=(ie-me)/2;return 1-Math.pow(Me,2)/Math.pow(.1*me,2)}return 1}function he(){return 1}function ce(Ut,Kt,ie,me,Me,Pe){ie===void 0&&(ie=5),me===void 0&&(me=!0),Me===void 0&&(Me=gr),Pe===void 0&&(Pe=[.25,.2,.5,.05]);var Je=ie<0?0:Math.round(ie);if(Number.isNaN(Ut)||Number.isNaN(Kt)||typeof Ut!="number"||typeof Kt!="number"||!Je)return{min:0,max:0,ticks:[]};if(Kt-Ut<1e-15||Je===1)return{min:Ut,max:Kt,ticks:[Ut]};if(Kt-Ut>1e148){var sr=ie||5,Dr=(Kt-Ut)/sr;return{min:Ut,max:Kt,ticks:Array(sr).fill(null).map(function(ti,dt){return Yr(Ut+Dr*dt)})}}for(var Re={score:-2,lmin:0,lmax:0,lstep:0},Tr=1;Tr<Infinity;){for(var vi=0;vi<Me.length;vi+=1){var Mi=Me[vi],oi=mn(Mi,Me,Tr);if(Pe[0]*oi+Pe[1]+Pe[2]+Pe[3]<Re.score){Tr=Infinity;break}for(var di=2;di<Infinity;){var Li=Xn(di,Je);if(Pe[0]*oi+Pe[1]+Pe[2]*Li+Pe[3]<Re.score)break;for(var qi=(Kt-Ut)/(di+1)/Tr/Mi,fn=Math.ceil(Math.log10(qi));fn<Infinity;){var Ii=Tr*Mi*Math.pow(10,fn),pn=$t(Ut,Kt,Ii*(di-1));if(Pe[0]*oi+Pe[1]*pn+Pe[2]*Li+Pe[3]<Re.score)break;var Ln=Math.floor(Kt/Ii)*Tr-(di-1)*Tr,Et=Math.ceil(Ut/Ii)*Tr;if(Ln<=Et)for(var sr=Et-Ln,ft=0;ft<=sr;ft+=1){var it=Ln+ft,ot=it*(Ii/Tr),Ot=ot+Ii*(di-1),Zt=Ii,de=hn(Mi,Me,Tr,ot,Ot,Zt),pe=Xt(Ut,Kt,ot,Ot),ye=Cn(di,Je,Ut,Kt,ot,Ot),Ge=he(),$e=Pe[0]*de+Pe[1]*pe+Pe[2]*ye+Pe[3]*Ge;$e>Re.score&&(!me||ot<=Ut&&Ot>=Kt)&&(Re.lmin=ot,Re.lmax=Ot,Re.lstep=Zt,Re.score=$e)}fn+=1}di+=1}}Tr+=1}var je=Yr(Re.lmax),mr=Yr(Re.lmin),vr=Yr(Re.lstep),He=Math.floor(gi((je-mr)/vr))+1,kr=new Array(He);kr[0]=Yr(mr);for(var vi=1;vi<He;vi++)kr[vi]=Yr(kr[vi-1]+vr);return{min:Math.min(Ut,(0,m.head)(kr)),max:Math.max(Kt,(0,m.last)(kr)),ticks:kr}}function we(Ut){var Kt=Ut.min,ie=Ut.max,me=Ut.tickCount,Me=Ut.nice,Pe=Ut.tickInterval,Je=Ut.minLimit,sr=Ut.maxLimit,Dr=ce(Kt,ie,me,Me).ticks;return!(0,m.isNil)(Je)||!(0,m.isNil)(sr)?xr(Ut,(0,m.head)(Dr),(0,m.last)(Dr)):Pe?dr(Kt,ie,Pe).ticks:Dr}function Ee(Ut){var Kt=Ut.base,ie=Ut.tickCount,me=Ut.min,Me=Ut.max,Pe=Ut.values,Je,sr=xt(Kt,Me);if(me>0)Je=Math.floor(xt(Kt,me));else{var Dr=Bt(Pe,Kt,Me);Je=Math.floor(xt(Kt,Dr))}for(var Re=sr-Je,Tr=Math.ceil(Re/ie),vi=[],Mi=Je;Mi<sr+Tr;Mi=Mi+Tr)vi.push(Math.pow(Kt,Mi));return me<=0&&vi.unshift(0),vi}function _e(Ut,Kt,ie){if(ie===void 0&&(ie=5),Ut===Kt)return{max:Kt,min:Ut,ticks:[Ut]};var me=ie<0?0:Math.round(ie);if(me===0)return{max:Kt,min:Ut,ticks:[]};var Me=1.5,Pe=.5+1.5*Me,Je=Kt-Ut,sr=Je/me,Dr=Math.pow(10,Math.floor(Math.log10(sr))),Re=Dr;2*Dr-sr<Me*(sr-Re)&&(Re=2*Dr,5*Dr-sr<Pe*(sr-Re)&&(Re=5*Dr,10*Dr-sr<Me*(sr-Re)&&(Re=10*Dr)));for(var Tr=Math.ceil(Kt/Re),vi=Math.floor(Ut/Re),Mi=Math.max(Tr*Re,Kt),oi=Math.min(vi*Re,Ut),di=Math.floor((Mi-oi)/Re)+1,Li=new Array(di),qi=0;qi<di;qi++)Li[qi]=Yr(oi+qi*Re);return{min:oi,max:Mi,ticks:Li}}function Le(Ut){var Kt=Ut.exponent,ie=Ut.tickCount,me=Math.ceil(Mt(Kt,Ut.max)),Me=Math.floor(Mt(Kt,Ut.min)),Pe=_e(Me,me,ie).ticks;return Pe.map(function(Je){var sr=Je>=0?1:-1;return Math.pow(Je,Kt)*sr})}function xe(Ut,Kt){var ie=Ut.length*Kt;return Kt===1?Ut[Ut.length-1]:Kt===0?Ut[0]:ie%1!=0?Ut[Math.ceil(ie)-1]:Ut.length%2==0?(Ut[ie-1]+Ut[ie])/2:Ut[ie]}function er(Ut){var Kt=Ut.tickCount,ie=Ut.values;if(!ie||!ie.length)return[];for(var me=ie.slice().sort(function(sr,Dr){return sr-Dr}),Me=[],Pe=0;Pe<Kt;Pe++){var Je=Pe/(Kt-1);Me.push(xe(me,Je))}return Me}function Xe(Ut){var Kt=Ut.min,ie=Ut.max,me=Ut.tickCount,Me=Ut.tickInterval,Pe=Ut.minLimit,Je=Ut.maxLimit,sr=_e(Kt,ie,me).ticks;return!(0,m.isNil)(Pe)||!(0,m.isNil)(Je)?xr(Ut,(0,m.head)(sr),(0,m.last)(sr)):Me?dr(Kt,ie,Me).ticks:sr}function hr(Ut){var Kt=Ut.min,ie=Ut.max,me=Ut.minTickInterval,Me=Ut.tickInterval,Pe=Ut.tickCount;if(Me)Pe=Math.ceil((ie-Kt)/Me);else{Me=et(Kt,ie,Pe)[1];var Je=(ie-Kt)/Me,sr=Je/Pe;sr>1&&(Me=Me*Math.ceil(sr)),me&&Me<me&&(Me=me)}Me=Math.max(Math.floor((ie-Kt)/(Math.pow(2,12)-1)),Me);for(var Dr=[],Re=Kt;Re<ie+Me;Re+=Me)Dr.push(Re);return Dr}function Ar(Ut){var Kt=Ct((0,M.__assign)({showLast:!0},Ut));return Kt}function fr(Ut){return new Date(Ut).getFullYear()}function Sr(Ut){return new Date(Ut,0,1).getTime()}function yr(Ut){return new Date(Ut).getMonth()}function Or(Ut,Kt){var ie=fr(Ut),me=fr(Kt),Me=yr(Ut),Pe=yr(Kt);return(me-ie)*12+(Pe-Me)%12}function lr(Ut,Kt){return new Date(Ut,Kt,1).getTime()}function Fr(Ut,Kt){return Math.ceil((Kt-Ut)/z)}function Kr(Ut,Kt){return Math.ceil((Kt-Ut)/N)}function Vr(Ut,Kt){return Math.ceil((Kt-Ut)/(60*1e3))}function Zr(Ut){var Kt=Ut.min,ie=Ut.max,me=Ut.minTickInterval,Me=Ut.tickCount,Pe=Ut.tickInterval,Je=[];Pe||(Pe=(ie-Kt)/Me,me&&Pe<me&&(Pe=me)),Pe=Math.max(Math.floor((ie-Kt)/(Math.pow(2,12)-1)),Pe);var sr=fr(Kt);if(Pe>X)for(var Dr=fr(ie),Re=Math.ceil(Pe/X),Tr=sr;Tr<=Dr+Re;Tr=Tr+Re)Je.push(Sr(Tr));else if(Pe>W)for(var vi=Math.ceil(Pe/W),Mi=yr(Kt),oi=Or(Kt,ie),Tr=0;Tr<=oi+vi;Tr=Tr+vi)Je.push(lr(sr,Tr+Mi));else if(Pe>z)for(var di=new Date(Kt),Li=di.getFullYear(),qi=di.getMonth(),fn=di.getDate(),Ii=Math.ceil(Pe/z),pn=Fr(Kt,ie),Tr=0;Tr<pn+Ii;Tr=Tr+Ii)Je.push(new Date(Li,qi,fn+Tr).getTime());else if(Pe>N)for(var di=new Date(Kt),Li=di.getFullYear(),qi=di.getMonth(),Ii=di.getDate(),Ln=di.getHours(),Et=Math.ceil(Pe/N),ft=Kr(Kt,ie),Tr=0;Tr<=ft+Et;Tr=Tr+Et)Je.push(new Date(Li,qi,Ii,Ln+Tr).getTime());else if(Pe>D)for(var it=Vr(Kt,ie),ot=Math.ceil(Pe/D),Tr=0;Tr<=it+ot;Tr=Tr+ot)Je.push(Kt+Tr*D);else{var Ot=Pe;Ot<k&&(Ot=k);for(var Zt=Math.floor(Kt/k)*k,de=Math.ceil((ie-Kt)/k),pe=Math.ceil(Ot/k),Tr=0;Tr<de+pe;Tr=Tr+pe)Je.push(Zt+Tr*k)}return Je.length>=512&&console.warn("Notice: current ticks length("+Je.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+Pe+") is too small, increase the value to solve the problem!"),Je}P("cat",Ct),P("time-cat",Ar),P("wilkinson-extended",we),P("r-pretty",Xe),P("time",hr),P("time-pretty",Zr),P("log",Ee),P("pow",Le),P("quantile",er),P("d3-linear",Er),Pt("cat",p),Pt("category",p),Pt("identity",st),Pt("linear",bt),Pt("log",B),Pt("pow",mt),Pt("time",Vt),Pt("timeCat",ct),Pt("quantize",zt),Pt("quantile",oe)},26169:function(lt,S,d){"use strict";d.r(S),d.d(S,{Cache:function(){return xi},assign:function(){return Vn},augment:function(){return ha},clamp:function(){return fr},clearAnimationFrame:function(){return an},clone:function(){return _a},contains:function(){return P},debounce:function(){return wo},deepMix:function(){return Un},difference:function(){return A},each:function(){return z},endsWith:function(){return bi},every:function(){return gi},extend:function(){return ro},filter:function(){return T},find:function(){return bt},findIndex:function(){return xt},firstValue:function(){return wt},fixedBase:function(){return yr},flatten:function(){return K},flattenDeep:function(){return h},forIn:function(){return Et},get:function(){return R},getEllipsisText:function(){return mi},getRange:function(){return Jt},getType:function(){return j},getWrapBehavior:function(){return we},group:function(){return he},groupBy:function(){return Xt},groupToMap:function(){return $t},has:function(){return ft},hasKey:function(){return it},hasValue:function(){return Zt},head:function(){return xr},identity:function(){return We},includes:function(){return P},indexOf:function(){return Zn},isArguments:function(){return St},isArray:function(){return k},isArrayLike:function(){return L},isBoolean:function(){return qt},isDate:function(){return ne},isDecimal:function(){return Kr},isElement:function(){return Oi},isEmpty:function(){return no},isEqual:function(){return Ri},isEqualWith:function(){return ao},isError:function(){return Ie},isEven:function(){return Zr},isFinite:function(){return De},isFunction:function(){return b},isInteger:function(){return Kt},isMatch:function(){return et},isNegative:function(){return me},isNil:function(){return E},isNull:function(){return nr},isNumber:function(){return lr},isNumberEqual:function(){return Pe},isObject:function(){return D},isObjectLike:function(){return ct},isOdd:function(){return sr},isPlainObject:function(){return _t},isPositive:function(){return Re},isPrototype:function(){return Rr},isRegExp:function(){return $r},isString:function(){return Tt},isType:function(){return y},isUndefined:function(){return ur},keys:function(){return X},last:function(){return Er},lowerCase:function(){return ye},lowerFirst:function(){return $e},map:function(){return Ha},mapValues:function(){return at},max:function(){return mt},maxBy:function(){return Tr},measureTextWidth:function(){return Gr},memoize:function(){return za},min:function(){return gt},minBy:function(){return vi},mix:function(){return Vn},mod:function(){return oi},noop:function(){return Ae},number2color:function(){return er},omit:function(){return It},parseRadius:function(){return hr},pick:function(){return ht},pull:function(){return jt},pullAt:function(){return st},reduce:function(){return nt},remove:function(){return vt},requestAnimationFrame:function(){return Wi},set:function(){return V},size:function(){return qe},some:function(){return mn},sortBy:function(){return ue},startsWith:function(){return gr},substitute:function(){return mr},throttle:function(){return Yt},toArray:function(){return re},toDegree:function(){return qi},toInteger:function(){return fn},toRadian:function(){return Ln},toString:function(){return de},union:function(){return Ve},uniq:function(){return Ce},uniqueId:function(){return be},upperCase:function(){return He},upperFirst:function(){return ti},values:function(){return Ot},valuesOfKey:function(){return dr},wrapBehavior:function(){return _e}});var m=function(At){return At!==null&&typeof At!="function"&&isFinite(At.length)},L=m,I=function(At,te){return L(At)?At.indexOf(te)>-1:!1},P=I,_=function(At,te){if(!L(At))return At;for(var ge=[],Se=0;Se<At.length;Se++){var Ye=At[Se];te(Ye,Se)&&ge.push(Ye)}return ge},T=_,M=function(At,te){return te===void 0&&(te=[]),T(At,function(ge){return!P(te,ge)})},A=M,p={}.toString,w=function(At,te){return p.call(At)==="[object "+te+"]"},y=w,b=function(At){return y(At,"Function")},x=function(At){return At==null},E=x,k=function(At){return Array.isArray?Array.isArray(At):y(At,"Array")},D=function(At){var te=typeof At;return At!==null&&te==="object"||te==="function"};function N(At,te){if(!!At){var ge;if(k(At))for(var Se=0,Ye=At.length;Se<Ye&&(ge=te(At[Se],Se),ge!==!1);Se++);else if(D(At)){for(var pr in At)if(At.hasOwnProperty(pr)&&(ge=te(At[pr],pr),ge===!1))break}}}var z=N,W=Object.keys?function(At){return Object.keys(At)}:function(At){var te=[];return z(At,function(ge,Se){b(At)&&Se==="prototype"||te.push(Se)}),te},X=W;function U(At,te){var ge=X(te),Se=ge.length;if(E(At))return!Se;for(var Ye=0;Ye<Se;Ye+=1){var pr=ge[Ye];if(te[pr]!==At[pr]||!(pr in At))return!1}return!0}var et=U,Q=function(At){return typeof At=="object"&&At!==null},ct=Q,Lt=function(At){if(!ct(At)||!y(At,"Object"))return!1;if(Object.getPrototypeOf(At)===null)return!0;for(var te=At;Object.getPrototypeOf(te)!==null;)te=Object.getPrototypeOf(te);return Object.getPrototypeOf(At)===te},_t=Lt;function yt(At,te){if(!k(At))return null;var ge;if(b(te)&&(ge=te),_t(te)&&(ge=function(Ye){return et(Ye,te)}),ge){for(var Se=0;Se<At.length;Se+=1)if(ge(At[Se]))return At[Se]}return null}var bt=yt;function Mt(At,te,ge){ge===void 0&&(ge=0);for(var Se=ge;Se<At.length;Se++)if(te(At[Se],Se))return Se;return-1}var xt=Mt,Bt=function(At,te){for(var ge=null,Se=0;Se<At.length;Se++){var Ye=At[Se],pr=Ye[te];if(!E(pr)){k(pr)?ge=pr[0]:ge=pr;break}}return ge},wt=Bt,H=function(At){if(!k(At))return[];for(var te=[],ge=0;ge<At.length;ge++)te=te.concat(At[ge]);return te},K=H,B=function(At,te){if(te===void 0&&(te=[]),!k(At))te.push(At);else for(var ge=0;ge<At.length;ge+=1)B(At[ge],te);return te},h=B,mt=function(At){if(!!k(At))return At.reduce(function(te,ge){return Math.max(te,ge)},At[0])},gt=function(At){if(!!k(At))return At.reduce(function(te,ge){return Math.min(te,ge)},At[0])},Vt=function(At){var te=At.filter(function(qr){return!isNaN(qr)});if(!te.length)return{min:0,max:0};if(k(At[0])){for(var ge=[],Se=0;Se<At.length;Se++)ge=ge.concat(At[Se]);te=ge}var Ye=mt(te),pr=gt(te);return{min:pr,max:Ye}},Jt=Vt,zt=Array.prototype,Qt=zt.splice,oe=zt.indexOf,se=function(At){for(var te=[],ge=1;ge<arguments.length;ge++)te[ge-1]=arguments[ge];for(var Se=0;Se<te.length;Se++)for(var Ye=te[Se],pr=-1;(pr=oe.call(At,Ye))>-1;)Qt.call(At,pr,1);return At},jt=se,Pt=Array.prototype.splice,pt=function(te,ge){if(!L(te))return[];for(var Se=te?ge.length:0,Ye=Se-1;Se--;){var pr=void 0,qr=ge[Se];(Se===Ye||qr!==pr)&&(pr=qr,Pt.call(te,qr,1))}return te},st=pt,Ct=function(At,te,ge){if(!k(At)&&!_t(At))return At;var Se=ge;return z(At,function(Ye,pr){Se=te(Se,Ye,pr)}),Se},nt=Ct,J=function(At,te){var ge=[];if(!L(At))return ge;for(var Se=-1,Ye=[],pr=At.length;++Se<pr;){var qr=At[Se];te(qr,Se,At)&&(ge.push(qr),Ye.push(Se))}return st(At,Ye),ge},vt=J,Tt=function(At){return y(At,"String")};function Ht(At,te){var ge;if(b(te))ge=function(Ye,pr){return te(Ye)-te(pr)};else{var Se=[];Tt(te)?Se.push(te):k(te)&&(Se=te),ge=function(Ye,pr){for(var qr=0;qr<Se.length;qr+=1){var Bi=Se[qr];if(Ye[Bi]>pr[Bi])return 1;if(Ye[Bi]<pr[Bi])return-1}return 0}}return At.sort(ge),At}var ue=Ht;function Ce(At,te){te===void 0&&(te=new Map);var ge=[];if(Array.isArray(At))for(var Se=0,Ye=At.length;Se<Ye;Se++){var pr=At[Se];te.has(pr)||(ge.push(pr),te.set(pr,!0))}return ge}var Fe=function(){for(var At=[],te=0;te<arguments.length;te++)At[te]=arguments[te];return Ce([].concat.apply([],At))},Ve=Fe,dr=function(At,te){for(var ge=[],Se={},Ye=0;Ye<At.length;Ye++){var pr=At[Ye],qr=pr[te];if(!E(qr)){k(qr)||(qr=[qr]);for(var Bi=0;Bi<qr.length;Bi++){var Mn=qr[Bi];Se[Mn]||(ge.push(Mn),Se[Mn]=!0)}}}return ge};function xr(At){if(L(At))return At[0]}function Er(At){if(L(At)){var te=At;return te[te.length-1]}}function Yr(At,te){return k(At)||Tt(At)?At[0]===te:!1}var gr=Yr;function ri(At,te){return k(At)||Tt(At)?At[At.length-1]===te:!1}var bi=ri,Qr=function(At,te){for(var ge=0;ge<At.length;ge++)if(!te(At[ge],ge))return!1;return!0},gi=Qr,hn=function(At,te){for(var ge=0;ge<At.length;ge++)if(te(At[ge],ge))return!0;return!1},mn=hn,Cn=Object.prototype.hasOwnProperty;function Xn(At,te){if(!te||!k(At))return{};for(var ge={},Se=b(te)?te:function(Bi){return Bi[te]},Ye,pr=0;pr<At.length;pr++){var qr=At[pr];Ye=Se(qr),Cn.call(ge,Ye)?ge[Ye].push(qr):ge[Ye]=[qr]}return ge}var Xt=Xn;function $t(At,te){if(!te)return{0:At};if(!b(te)){var ge=k(te)?te:te.replace(/\s+/g,"").split("*");te=function(Se){for(var Ye="_",pr=0,qr=ge.length;pr<qr;pr++)Ye+=Se[ge[pr]]&&Se[ge[pr]].toString();return Ye}}return Xt(At,te)}var he=function(At,te){if(!te)return[At];var ge=$t(At,te),Se=[];for(var Ye in ge)Se.push(ge[Ye]);return Se};function ce(At,te){return At["_wrap_"+te]}var we=ce;function Ee(At,te){if(At["_wrap_"+te])return At["_wrap_"+te];var ge=function(Se){At[te](Se)};return At["_wrap_"+te]=ge,ge}var _e=Ee,Le={};function xe(At){var te=Le[At];if(!te){for(var ge=At.toString(16),Se=ge.length;Se<6;Se++)ge="0"+ge;te="#"+ge,Le[At]=te}return te}var er=xe;function Xe(At){var te=0,ge=0,Se=0,Ye=0;return k(At)?At.length===1?te=ge=Se=Ye=At[0]:At.length===2?(te=Se=At[0],ge=Ye=At[1]):At.length===3?(te=At[0],ge=Ye=At[1],Se=At[2]):(te=At[0],ge=At[1],Se=At[2],Ye=At[3]):te=ge=Se=Ye=At,{r1:te,r2:ge,r3:Se,r4:Ye}}var hr=Xe,Ar=function(At,te,ge){return At<te?te:At>ge?ge:At},fr=Ar,Sr=function(At,te){var ge=te.toString(),Se=ge.indexOf(".");if(Se===-1)return Math.round(At);var Ye=ge.substr(Se+1).length;return Ye>20&&(Ye=20),parseFloat(At.toFixed(Ye))},yr=Sr,Or=function(At){return y(At,"Number")},lr=Or,Fr=function(At){return lr(At)&&At%1!=0},Kr=Fr,Vr=function(At){return lr(At)&&At%2==0},Zr=Vr,Ut=Number.isInteger?Number.isInteger:function(At){return lr(At)&&At%1==0},Kt=Ut,ie=function(At){return lr(At)&&At<0},me=ie,Me=1e-5;function Pe(At,te,ge){return ge===void 0&&(ge=Me),Math.abs(At-te)<ge}var Je=function(At){return lr(At)&&At%2!=0},sr=Je,Dr=function(At){return lr(At)&&At>0},Re=Dr,Tr=function(At,te){if(!!k(At)){for(var ge,Se=-Infinity,Ye=0;Ye<At.length;Ye++){var pr=At[Ye],qr=b(te)?te(pr):pr[te];qr>Se&&(ge=pr,Se=qr)}return ge}},vi=function(At,te){if(!!k(At)){for(var ge,Se=Infinity,Ye=0;Ye<At.length;Ye++){var pr=At[Ye],qr=b(te)?te(pr):pr[te];qr<Se&&(ge=pr,Se=qr)}return ge}},Mi=function(At,te){return(At%te+te)%te},oi=Mi,di=180/Math.PI,Li=function(At){return di*At},qi=Li,fn=parseInt,Ii=Math.PI/180,pn=function(At){return Ii*At},Ln=pn,Et=z,ft=function(At,te){return At.hasOwnProperty(te)},it=ft,ot=Object.values?function(At){return Object.values(At)}:function(At){var te=[];return z(At,function(ge,Se){b(At)&&Se==="prototype"||te.push(ge)}),te},Ot=ot,Zt=function(At,te){return P(Ot(At),te)},de=function(At){return E(At)?"":At.toString()},pe=function(At){return de(At).toLowerCase()},ye=pe,Ge=function(At){var te=de(At);return te.charAt(0).toLowerCase()+te.substring(1)},$e=Ge;function je(At,te){return!At||!te?At:At.replace(/\\?\{([^{}]+)\}/g,function(ge,Se){return ge.charAt(0)==="\\"?ge.slice(1):te[Se]===void 0?"":te[Se]})}var mr=je,vr=function(At){return de(At).toUpperCase()},He=vr,kr=function(At){var te=de(At);return te.charAt(0).toUpperCase()+te.substring(1)},ti=kr,dt={}.toString,rt=function(At){return dt.call(At).replace(/^\[object /,"").replace(/]$/,"")},j=rt,Z=function(At){return y(At,"Arguments")},St=Z,Dt=function(At){return y(At,"Boolean")},qt=Dt,ae=function(At){return y(At,"Date")},ne=ae,Oe=function(At){return y(At,"Error")},Ie=Oe;function De(At){return lr(At)&&isFinite(At)}var or=function(At){return At===null},nr=or,ze=Object.prototype,cr=function(At){var te=At&&At.constructor,ge=typeof te=="function"&&te.prototype||ze;return At===ge},Rr=cr,Jr=function(At){return y(At,"RegExp")},$r=Jr,Pr=function(At){return At===void 0},ur=Pr,ii=function(At){return At instanceof Element||At instanceof HTMLDocument},Oi=ii;function Wi(At){var te=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(ge){return setTimeout(ge,16)};return te(At)}function an(At){var te=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;te(At)}function oa(At,te){for(var ge in te)te.hasOwnProperty(ge)&&ge!=="constructor"&&te[ge]!==void 0&&(At[ge]=te[ge])}function Vn(At,te,ge,Se){return te&&oa(At,te),ge&&oa(At,ge),Se&&oa(At,Se),At}var xn=function(){for(var At=[],te=0;te<arguments.length;te++)At[te]=arguments[te];for(var ge=At[0],Se=1;Se<At.length;Se++){var Ye=At[Se];b(Ye)&&(Ye=Ye.prototype),Vn(ge.prototype,Ye)}},ha=xn,ea=function(At){if(typeof At!="object"||At===null)return At;var te;if(k(At)){te=[];for(var ge=0,Se=At.length;ge<Se;ge++)typeof At[ge]=="object"&&At[ge]!=null?te[ge]=ea(At[ge]):te[ge]=At[ge]}else{te={};for(var Ye in At)typeof At[Ye]=="object"&&At[Ye]!=null?te[Ye]=ea(At[Ye]):te[Ye]=At[Ye]}return te},_a=ea;function fa(At,te,ge){var Se;return function(){var Ye=this,pr=arguments,qr=function(){Se=null,ge||At.apply(Ye,pr)},Bi=ge&&!Se;clearTimeout(Se),Se=setTimeout(qr,te),Bi&&At.apply(Ye,pr)}}var wo=fa,za=function(At,te){if(!b(At))throw new TypeError("Expected a function");var ge=function(){for(var Se=[],Ye=0;Ye<arguments.length;Ye++)Se[Ye]=arguments[Ye];var pr=te?te.apply(this,Se):Se[0],qr=ge.cache;if(qr.has(pr))return qr.get(pr);var Bi=At.apply(this,Se);return qr.set(pr,Bi),Bi};return ge.cache=new Map,ge},So=5;function Pa(At,te,ge,Se){ge=ge||0,Se=Se||So;for(var Ye in te)if(te.hasOwnProperty(Ye)){var pr=te[Ye];pr!==null&&_t(pr)?(_t(At[Ye])||(At[Ye]={}),ge<Se?Pa(At[Ye],pr,ge+1,Se):At[Ye]=te[Ye]):k(pr)?(At[Ye]=[],At[Ye]=At[Ye].concat(pr)):pr!==void 0&&(At[Ye]=pr)}}var Xa=function(At){for(var te=[],ge=1;ge<arguments.length;ge++)te[ge-1]=arguments[ge];for(var Se=0;Se<te.length;Se+=1)Pa(At,te[Se]);return At},Un=Xa,bn=function(At,te,ge,Se){b(te)||(ge=te,te=At,At=function(){});var Ye=Object.create?function(qr,Bi){return Object.create(qr,{constructor:{value:Bi}})}:function(qr,Bi){function Mn(){}Mn.prototype=qr;var ra=new Mn;return ra.constructor=Bi,ra},pr=Ye(te.prototype,At);return At.prototype=Vn(pr,At.prototype),At.superclass=Ye(te.prototype,te),Vn(pr,ge),Vn(At,Se),At},ro=bn,io=function(At,te){if(!L(At))return-1;var ge=Array.prototype.indexOf;if(ge)return ge.call(At,te);for(var Se=-1,Ye=0;Ye<At.length;Ye++)if(At[Ye]===te){Se=Ye;break}return Se},Zn=io,Va=Object.prototype.hasOwnProperty;function Fi(At){if(E(At))return!0;if(L(At))return!At.length;var te=j(At);if(te==="Map"||te==="Set")return!At.size;if(Rr(At))return!Object.keys(At).length;for(var ge in At)if(Va.call(At,ge))return!1;return!0}var no=Fi,cn=function(At,te){if(At===te)return!0;if(!At||!te||Tt(At)||Tt(te))return!1;if(L(At)||L(te)){if(At.length!==te.length)return!1;for(var ge=!0,Se=0;Se<At.length&&(ge=cn(At[Se],te[Se]),!!ge);Se++);return ge}if(ct(At)||ct(te)){var Ye=Object.keys(At),pr=Object.keys(te);if(Ye.length!==pr.length)return!1;for(var ge=!0,Se=0;Se<Ye.length&&(ge=cn(At[Ye[Se]],te[Ye[Se]]),!!ge);Se++);return ge}return!1},Ri=cn,ao=function(At,te,ge){return b(ge)?!!ge(At,te):Ri(At,te)},Ni=function(At,te){if(!L(At))return At;for(var ge=[],Se=0;Se<At.length;Se++){var Ye=At[Se];ge.push(te(Ye,Se))}return ge},Ha=Ni,Gt=function(At){return At},at=function(At,te){te===void 0&&(te=Gt);var ge={};return D(At)&&!E(At)&&Object.keys(At).forEach(function(Se){ge[Se]=te(At[Se],Se)}),ge},R=function(At,te,ge){for(var Se=0,Ye=Tt(te)?te.split("."):te;At&&Se<Ye.length;)At=At[Ye[Se++]];return At===void 0||Se<Ye.length?ge:At},V=function(At,te,ge){var Se=At,Ye=Tt(te)?te.split("."):te;return Ye.forEach(function(pr,qr){qr<Ye.length-1?(D(Se[pr])||(Se[pr]=lr(Ye[qr+1])?[]:{}),Se=Se[pr]):Se[pr]=ge}),At},tt=Object.prototype.hasOwnProperty,ht=function(At,te){if(At===null||!_t(At))return{};var ge={};return z(te,function(Se){tt.call(At,Se)&&(ge[Se]=At[Se])}),ge},It=function(At,te){return nt(At,function(ge,Se,Ye){return te.includes(Ye)||(ge[Ye]=Se),ge},{})},Yt=function(At,te,ge){var Se,Ye,pr,qr,Bi=0;ge||(ge={});var Mn=function(){Bi=ge.leading===!1?0:Date.now(),Se=null,qr=At.apply(Ye,pr),Se||(Ye=pr=null)},ra=function(){var sa=Date.now();!Bi&&ge.leading===!1&&(Bi=sa);var vs=te-(sa-Bi);return Ye=this,pr=arguments,vs<=0||vs>te?(Se&&(clearTimeout(Se),Se=null),Bi=sa,qr=At.apply(Ye,pr),Se||(Ye=pr=null)):!Se&&ge.trailing!==!1&&(Se=setTimeout(Mn,vs)),qr};return ra.cancel=function(){clearTimeout(Se),Bi=0,Se=Ye=pr=null},ra},re=function(At){return L(At)?Array.prototype.slice.call(At):[]},le={},be=function(At){return At=At||"g",le[At]?le[At]+=1:le[At]=1,At+le[At]},Ae=function(){},We=function(At){return At};function qe(At){return E(At)?0:L(At)?At.length:Object.keys(At).length}var Cr=d(44614),jr,Gr=za(function(At,te){te===void 0&&(te={});var ge=te.fontSize,Se=te.fontFamily,Ye=te.fontWeight,pr=te.fontStyle,qr=te.fontVariant;return jr||(jr=document.createElement("canvas").getContext("2d")),jr.font=[pr,qr,Ye,ge+"px",Se].join(" "),jr.measureText(Tt(At)?At:"").width},function(At,te){return te===void 0&&(te={}),(0,Cr.__spreadArrays)([At],Ot(te)).join("")}),mi=function(At,te,ge,Se){Se===void 0&&(Se="...");var Ye=16,pr=Gr(Se,ge),qr=Tt(At)?At:de(At),Bi=te,Mn=[],ra,sa;if(Gr(At,ge)<=te)return At;for(;ra=qr.substr(0,Ye),sa=Gr(ra,ge),!(sa+pr>Bi&&sa>Bi);)if(Mn.push(ra),Bi-=sa,qr=qr.substr(Ye),!qr)return Mn.join("");for(;ra=qr.substr(0,1),sa=Gr(ra,ge),!(sa+pr>Bi);)if(Mn.push(ra),Bi-=sa,qr=qr.substr(1),!qr)return Mn.join("");return""+Mn.join("")+Se},wi=function(){function At(){this.map={}}return At.prototype.has=function(te){return this.map[te]!==void 0},At.prototype.get=function(te,ge){var Se=this.map[te];return Se===void 0?ge:Se},At.prototype.set=function(te,ge){this.map[te]=ge},At.prototype.clear=function(){this.map={}},At.prototype.delete=function(te){delete this.map[te]},At.prototype.size=function(){return Object.keys(this.map).length},At}(),xi=wi},99438:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(7165),L=d(91110),I=function(){for(var P=[],_=0;_<arguments.length;_++)P[_]=arguments[_];for(var T=P[0],M=1;M<P.length;M++){var A=P[M];L.default(A)&&(A=A.prototype),m.default(T.prototype,A)}};S.default=I},86862:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(){function m(){this.map={}}return m.prototype.has=function(L){return this.map[L]!==void 0},m.prototype.get=function(L,I){var P=this.map[L];return P===void 0?I:P},m.prototype.set=function(L,I){this.map[L]=I},m.prototype.clear=function(){this.map={}},m.prototype.delete=function(L){delete this.map[L]},m.prototype.size=function(){return Object.keys(this.map).length},m}();S.default=d},45466:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m,L,I){return m<L?L:m>I?I:m};S.default=d},88041:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m){var L=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;L(m)}S.default=d},23098:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=function(I){if(typeof I!="object"||I===null)return I;var P;if(m.default(I)){P=[];for(var _=0,T=I.length;_<T;_++)typeof I[_]=="object"&&I[_]!=null?P[_]=L(I[_]):P[_]=I[_]}else{P={};for(var M in I)typeof I[M]=="object"&&I[M]!=null?P[M]=L(I[M]):P[M]=I[M]}return P};S.default=L},66494:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819),L=function(I,P){return m.default(I)?I.indexOf(P)>-1:!1};S.default=L},15524:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m,L,I){var P;return function(){var _=this,T=arguments,M=function(){P=null,I||m.apply(_,T)},A=I&&!P;clearTimeout(P),P=setTimeout(M,L),A&&m.apply(_,T)}}S.default=d},8098:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(38958),I=5;function P(T,M,A,p){A=A||0,p=p||I;for(var w in M)if(M.hasOwnProperty(w)){var y=M[w];y!==null&&L.default(y)?(L.default(T[w])||(T[w]={}),A<p?P(T[w],y,A+1,p):T[w]=M[w]):m.default(y)?(T[w]=[],T[w]=T[w].concat(y)):y!==void 0&&(T[w]=y)}}var _=function(T){for(var M=[],A=1;A<arguments.length;A++)M[A-1]=arguments[A];for(var p=0;p<M.length;p+=1)P(T,M[p]);return T};S.default=_},99739:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(33819),L=d(66494),I=function(P,_){return _===void 0&&(_=[]),m.default(P,function(T){return!L.default(_,T)})};S.default=I},91577:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(41367);function I(P,_){if(!!P){var T;if(m.default(P))for(var M=0,A=P.length;M<A&&(T=_(P[M],M),T!==!1);M++);else if(L.default(P)){for(var p in P)if(P.hasOwnProperty(p)&&(T=_(P[p],p),T===!1))break}}}S.default=I},96835:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(55535);function I(P,_){return m.default(P)||L.default(P)?P[P.length-1]===_:!1}S.default=I},69793:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m,L){for(var I=0;I<m.length;I++)if(!L(m[I],I))return!1;return!0};S.default=d},50773:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(7165),L=d(91110),I=function(P,_,T,M){L.default(_)||(T=_,_=P,P=function(){});var A=Object.create?function(w,y){return Object.create(w,{constructor:{value:y}})}:function(w,y){function b(){}b.prototype=w;var x=new b;return x.constructor=y,x},p=A(_.prototype,P);return P.prototype=m.default(p,P.prototype),P.superclass=A(_.prototype,_),m.default(p,T),m.default(P,M),P};S.default=I},33819:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819),L=function(I,P){if(!m.default(I))return I;for(var _=[],T=0;T<I.length;T++){var M=I[T];P(M,T)&&_.push(M)}return _};S.default=L},78950:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m,L,I){I===void 0&&(I=0);for(var P=I;P<m.length;P++)if(L(m[P],P))return P;return-1}S.default=d},93702:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91110),L=d(72330),I=d(21429),P=d(38958);function _(T,M){if(!I.default(T))return null;var A;if(m.default(M)&&(A=M),P.default(M)&&(A=function(w){return L.default(w,M)}),A){for(var p=0;p<T.length;p+=1)if(A(T[p]))return T[p]}return null}S.default=_},45971:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(83438),L=d(21429),I=function(P,_){for(var T=null,M=0;M<P.length;M++){var A=P[M],p=A[_];if(!m.default(p)){L.default(p)?T=p[0]:T=p;break}}return T};S.default=I},19170:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m,L){var I=L.toString(),P=I.indexOf(".");if(P===-1)return Math.round(m);var _=I.substr(P+1).length;return _>20&&(_=20),parseFloat(m.toFixed(_))};S.default=d},53043:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=function(I,P){if(P===void 0&&(P=[]),!m.default(I))P.push(I);else for(var _=0;_<I.length;_+=1)L(I[_],P);return P};S.default=L},42913:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=function(I){if(!m.default(I))return[];for(var P=[],_=0;_<I.length;_++)P=P.concat(I[_]);return P};S.default=L},51664:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91577);S.default=m.default},9036:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(55535),L=d(25686),I=d(72564);S.default=function(P,_,T,M){M===void 0&&(M="...");var A=16,p=I.default(M,T),w=m.default(P)?P:L.default(P),y=_,b=[],x,E;if(I.default(P,T)<=_)return P;for(;x=w.substr(0,A),E=I.default(x,T),!(E+p>y&&E>y);)if(b.push(x),y-=E,w=w.substr(A),!w)return b.join("");for(;x=w.substr(0,1),E=I.default(x,T),!(E+p>y);)if(b.push(x),y-=E,w=w.substr(1),!w)return b.join("");return""+b.join("")+M}},85744:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(6882),I=d(31302),P=function(_){var T=_.filter(function(y){return!isNaN(y)});if(!T.length)return{min:0,max:0};if(m.default(_[0])){for(var M=[],A=0;A<_.length;A++)M=M.concat(_[A]);T=M}var p=L.default(T),w=I.default(T);return{min:w,max:p}};S.default=P},90468:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d={}.toString,m=function(L){return d.call(L).replace(/^\[object /,"").replace(/]$/,"")};S.default=m},67105:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m,L){return m["_wrap_"+L]}S.default=d},87293:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(55535);S.default=function(L,I,P){for(var _=0,T=m.default(I)?I.split("."):I;L&&_<T.length;)L=L[T[_++]];return L===void 0||_<T.length?P:L}},97395:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(91110),I=Object.prototype.hasOwnProperty;function P(_,T){if(!T||!m.default(_))return{};for(var M={},A=L.default(T)?T:function(b){return b[T]},p,w=0;w<_.length;w++){var y=_[w];p=A(y),I.call(M,p)?M[p].push(y):M[p]=[y]}return M}S.default=P},30971:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(91110),I=d(97395);function P(_,T){if(!T)return{0:_};if(!L.default(T)){var M=m.default(T)?T:T.replace(/\s+/g,"").split("*");T=function(A){for(var p="_",w=0,y=M.length;w<y;w++)p+=A[M[w]]&&A[M[w]].toString();return p}}return I.default(_,T)}S.default=P},46866:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(30971);S.default=function(L,I){if(!I)return[L];var P=m.default(L,I),_=[];for(var T in P)_.push(P[T]);return _}},8551:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(93680);S.default=m.default},79712:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(66494),L=d(8026);S.default=function(I,P){return m.default(L.default(I),P)}},93680:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(d,m){return d.hasOwnProperty(m)}},70633:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819);function L(I){if(m.default(I))return I[0]}S.default=L},40131:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(d){return d}},56572:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819),L=function(I,P){if(!m.default(I))return-1;var _=Array.prototype.indexOf;if(_)return _.call(I,P);for(var T=-1,M=0;M<I.length;M++)if(I[M]===P){T=M;break}return T};S.default=L},27533:function(lt,S,d){"use strict";var m;m={value:!0};var L=d(66494);m={enumerable:!0,get:function(){return L.default}},m={enumerable:!0,get:function(){return L.default}};var I=d(99739);m={enumerable:!0,get:function(){return I.default}};var P=d(93702);m={enumerable:!0,get:function(){return P.default}};var _=d(78950);m={enumerable:!0,get:function(){return _.default}};var T=d(45971);m={enumerable:!0,get:function(){return T.default}};var M=d(42913);m={enumerable:!0,get:function(){return M.default}};var A=d(53043);m={enumerable:!0,get:function(){return A.default}};var p=d(85744);m={enumerable:!0,get:function(){return p.default}};var w=d(69228);m={enumerable:!0,get:function(){return w.default}};var y=d(91425);m={enumerable:!0,get:function(){return y.default}};var b=d(94777);m={enumerable:!0,get:function(){return b.default}};var x=d(94750);m={enumerable:!0,get:function(){return x.default}};var E=d(55713);m={enumerable:!0,get:function(){return E.default}};var k=d(85723);m={enumerable:!0,get:function(){return k.default}};var D=d(48870);m={enumerable:!0,get:function(){return D.default}};var N=d(44417);m={enumerable:!0,get:function(){return N.default}};var z=d(70633);m={enumerable:!0,get:function(){return z.default}};var W=d(8628);m={enumerable:!0,get:function(){return W.default}};var X=d(65200);m={enumerable:!0,get:function(){return X.default}};var U=d(96835);m={enumerable:!0,get:function(){return U.default}};var et=d(33819);m={enumerable:!0,get:function(){return et.default}};var Q=d(69793);m={enumerable:!0,get:function(){return Q.default}};var ct=d(35330);m={enumerable:!0,get:function(){return ct.default}};var Lt=d(46866);m={enumerable:!0,get:function(){return Lt.default}};var _t=d(97395);m={enumerable:!0,get:function(){return _t.default}};var yt=d(30971);m={enumerable:!0,get:function(){return yt.default}};var bt=d(67105);m={enumerable:!0,get:function(){return bt.default}};var Mt=d(78435);Object.defineProperty(S,"Ko",{enumerable:!0,get:function(){return Mt.default}});var xt=d(74868);m={enumerable:!0,get:function(){return xt.default}};var Bt=d(82293);m={enumerable:!0,get:function(){return Bt.default}};var wt=d(45466);m={enumerable:!0,get:function(){return wt.default}};var H=d(19170);m={enumerable:!0,get:function(){return H.default}};var K=d(45397);m={enumerable:!0,get:function(){return K.default}};var B=d(2551);m={enumerable:!0,get:function(){return B.default}};var h=d(72683);m={enumerable:!0,get:function(){return h.default}};var mt=d(31112);m={enumerable:!0,get:function(){return mt.default}};var gt=d(47203);m={enumerable:!0,get:function(){return gt.default}};var Vt=d(91383);m={enumerable:!0,get:function(){return Vt.default}};var Jt=d(49166);m={enumerable:!0,get:function(){return Jt.default}};var zt=d(6882);m={enumerable:!0,get:function(){return zt.default}};var Qt=d(21698);m={enumerable:!0,get:function(){return Qt.default}};var oe=d(31302);m={enumerable:!0,get:function(){return oe.default}};var se=d(94720);m={enumerable:!0,get:function(){return se.default}};var jt=d(62352);m={enumerable:!0,get:function(){return jt.default}};var Pt=d(62444);m={enumerable:!0,get:function(){return Pt.default}};var pt=d(94753);m={enumerable:!0,get:function(){return pt.default}};var st=d(61823);m={enumerable:!0,get:function(){return st.default}};var Ct=d(51664);m={enumerable:!0,get:function(){return Ct.default}};var nt=d(93680);m={enumerable:!0,get:function(){return nt.default}};var J=d(8551);m={enumerable:!0,get:function(){return J.default}};var vt=d(79712);m={enumerable:!0,get:function(){return vt.default}};var Tt=d(73945);m={enumerable:!0,get:function(){return Tt.default}};var Ht=d(72330);m={enumerable:!0,get:function(){return Ht.default}};var ue=d(8026);m={enumerable:!0,get:function(){return ue.default}};var Ce=d(46601);m={enumerable:!0,get:function(){return Ce.default}};var Fe=d(96087);m={enumerable:!0,get:function(){return Fe.default}};var Ve=d(40287);m={enumerable:!0,get:function(){return Ve.default}};var dr=d(57319);m={enumerable:!0,get:function(){return dr.default}};var xr=d(18092);m={enumerable:!0,get:function(){return xr.default}};var Er=d(90468);m={enumerable:!0,get:function(){return Er.default}};var Yr=d(68167);m={enumerable:!0,get:function(){return Yr.default}};var gr=d(21429);m={enumerable:!0,get:function(){return gr.default}};var ri=d(64819);m={enumerable:!0,get:function(){return ri.default}};var bi=d(77468);m={enumerable:!0,get:function(){return bi.default}};var Qr=d(87512);m={enumerable:!0,get:function(){return Qr.default}};var gi=d(8110);m={enumerable:!0,get:function(){return gi.default}};var hn=d(91110);m={enumerable:!0,get:function(){return hn.default}};var mn=d(44722);m={enumerable:!0,get:function(){return mn.default}};var Cn=d(83438);m={enumerable:!0,get:function(){return Cn.default}};var Xn=d(32083);m={enumerable:!0,get:function(){return Xn.default}};var Xt=d(41820);m={enumerable:!0,get:function(){return Xt.default}};var $t=d(41367);m={enumerable:!0,get:function(){return $t.default}};var he=d(77899);m={enumerable:!0,get:function(){return he.default}};var ce=d(38958);m={enumerable:!0,get:function(){return ce.default}};var we=d(72657);m={enumerable:!0,get:function(){return we.default}};var Ee=d(48384);m={enumerable:!0,get:function(){return Ee.default}};var _e=d(55535);Object.defineProperty(S,"HD",{enumerable:!0,get:function(){return _e.default}});var Le=d(95193);m={enumerable:!0,get:function(){return Le.default}};var xe=d(49154);m={enumerable:!0,get:function(){return xe.default}};var er=d(24460);m={enumerable:!0,get:function(){return er.default}};var Xe=d(37250);m={enumerable:!0,get:function(){return Xe.default}};var hr=d(88041);m={enumerable:!0,get:function(){return hr.default}};var Ar=d(99438);m={enumerable:!0,get:function(){return Ar.default}};var fr=d(23098);Object.defineProperty(S,"d9",{enumerable:!0,get:function(){return fr.default}});var Sr=d(15524);m={enumerable:!0,get:function(){return Sr.default}};var yr=d(41913);m={enumerable:!0,get:function(){return yr.default}};var Or=d(8098);Object.defineProperty(S,"b$",{enumerable:!0,get:function(){return Or.default}});var lr=d(91577);Object.defineProperty(S,"S6",{enumerable:!0,get:function(){return lr.default}});var Fr=d(50773);m={enumerable:!0,get:function(){return Fr.default}};var Kr=d(56572);m={enumerable:!0,get:function(){return Kr.default}};var Vr=d(51741);m={enumerable:!0,get:function(){return Vr.default}};var Zr=d(70069);m={enumerable:!0,get:function(){return Zr.default}};var Ut=d(53879);m={enumerable:!0,get:function(){return Ut.default}};var Kt=d(66723);m={enumerable:!0,get:function(){return Kt.default}};var ie=d(53091);m={enumerable:!0,get:function(){return ie.default}};var me=d(7165);m={enumerable:!0,get:function(){return me.default}},m={enumerable:!0,get:function(){return me.default}};var Me=d(87293);m={enumerable:!0,get:function(){return Me.default}};var Pe=d(36979);m={enumerable:!0,get:function(){return Pe.default}};var Je=d(61257);m={enumerable:!0,get:function(){return Je.default}};var sr=d(81029);m={enumerable:!0,get:function(){return sr.default}};var Dr=d(46098);m={enumerable:!0,get:function(){return Dr.default}};var Re=d(45856);m={enumerable:!0,get:function(){return Re.default}};var Tr=d(25686);m={enumerable:!0,get:function(){return Tr.default}};var vi=d(83355);m={enumerable:!0,get:function(){return vi.default}};var Mi=d(67122);m={enumerable:!0,get:function(){return Mi.default}};var oi=d(40131);m={enumerable:!0,get:function(){return oi.default}};var di=d(74266);m={enumerable:!0,get:function(){return di.default}};var Li=d(72564);m={enumerable:!0,get:function(){return Li.default}};var qi=d(9036);m={enumerable:!0,get:function(){return qi.default}};var fn=d(86862);m={enumerable:!0,get:function(){return fn.default}}},68167:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193),L=function(I){return m.default(I,"Arguments")};S.default=L},64819:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m){return m!==null&&typeof m!="function"&&isFinite(m.length)};S.default=d},21429:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193);S.default=function(L){return Array.isArray?Array.isArray(L):m.default(L,"Array")}},77468:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193),L=function(I){return m.default(I,"Boolean")};S.default=L},87512:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193),L=function(I){return m.default(I,"Date")};S.default=L},45397:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41820),L=function(I){return m.default(I)&&I%1!=0};S.default=L},24460:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m){return m instanceof Element||m instanceof HTMLDocument};S.default=d},51741:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(83438),L=d(64819),I=d(90468),P=d(72657),_=Object.prototype.hasOwnProperty;function T(M){if(m.default(M))return!0;if(L.default(M))return!M.length;var A=I.default(M);if(A==="Map"||A==="Set")return!M.size;if(P.default(M))return!Object.keys(M).length;for(var p in M)if(_.call(M,p))return!1;return!0}S.default=T},53879:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91110),L=d(70069);S.default=function(I,P,_){return m.default(_)?!!_(I,P):L.default(I,P)}},70069:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(77899),L=d(64819),I=d(55535),P=function(_,T){if(_===T)return!0;if(!_||!T||I.default(_)||I.default(T))return!1;if(L.default(_)||L.default(T)){if(_.length!==T.length)return!1;for(var M=!0,A=0;A<_.length&&(M=P(_[A],T[A]),!!M);A++);return M}if(m.default(_)||m.default(T)){var p=Object.keys(_),w=Object.keys(T);if(p.length!==w.length)return!1;for(var M=!0,A=0;A<p.length&&(M=P(_[p[A]],T[p[A]]),!!M);A++);return M}return!1};S.default=P},8110:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193),L=function(I){return m.default(I,"Error")};S.default=L},2551:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41820),L=function(I){return m.default(I)&&I%2==0};S.default=L},44722:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41820);function L(I){return m.default(I)&&isFinite(I)}S.default=L},91110:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193);S.default=function(L){return m.default(L,"Function")}},72683:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41820),L=Number.isInteger?Number.isInteger:function(I){return m.default(I)&&I%1==0};S.default=L},72330:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(83438),L=d(73945);function I(P,_){var T=L.default(_),M=T.length;if(m.default(P))return!M;for(var A=0;A<M;A+=1){var p=T[A];if(_[p]!==P[p]||!(p in P))return!1}return!0}S.default=I},31112:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41820),L=function(I){return m.default(I)&&I<0};S.default=L},83438:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m){return m==null};S.default=d},32083:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m){return m===null};S.default=d},47203:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=1e-5;function m(L,I,P){return P===void 0&&(P=d),Math.abs(L-I)<P}S.default=m},41820:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193),L=function(I){return m.default(I,"Number")};S.default=L},77899:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m){return typeof m=="object"&&m!==null};S.default=d},41367:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(d){var m=typeof d;return d!==null&&m==="object"||m==="function"}},91383:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41820),L=function(I){return m.default(I)&&I%2!=0};S.default=L},38958:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(77899),L=d(95193),I=function(P){if(!m.default(P)||!L.default(P,"Object"))return!1;if(Object.getPrototypeOf(P)===null)return!0;for(var _=P;Object.getPrototypeOf(_)!==null;)_=Object.getPrototypeOf(_);return Object.getPrototypeOf(P)===_};S.default=I},49166:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41820),L=function(I){return m.default(I)&&I>0};S.default=L},72657:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=Object.prototype,m=function(L){var I=L&&L.constructor,P=typeof I=="function"&&I.prototype||d;return L===P};S.default=m},48384:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193),L=function(I){return m.default(I,"RegExp")};S.default=L},55535:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(95193);S.default=function(L){return m.default(L,"String")}},95193:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d={}.toString,m=function(L,I){return d.call(L)==="[object "+I+"]"};S.default=m},49154:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m){return m===void 0};S.default=d},73945:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91577),L=d(91110),I=Object.keys?function(P){return Object.keys(P)}:function(P){var _=[];return m.default(P,function(T,M){L.default(P)&&M==="prototype"||_.push(M)}),_};S.default=I},8628:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819);function L(I){if(m.default(I)){var P=I;return P[P.length-1]}}S.default=L},46601:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(25686),L=function(I){return m.default(I).toLowerCase()};S.default=L},96087:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(25686),L=function(I){var P=m.default(I);return P.charAt(0).toLowerCase()+P.substring(1)};S.default=L},53091:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(83438),L=d(41367),I=function(P){return P};S.default=function(P,_){_===void 0&&(_=I);var T={};return L.default(P)&&!m.default(P)&&Object.keys(P).forEach(function(M){T[M]=_(P[M],M)}),T}},66723:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819),L=function(I,P){if(!m.default(I))return I;for(var _=[],T=0;T<I.length;T++){var M=I[T];_.push(P(M,T))}return _};S.default=L},21698:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(91110);S.default=function(I,P){if(!!m.default(I)){for(var _,T=-Infinity,M=0;M<I.length;M++){var A=I[M],p=L.default(P)?P(A):A[P];p>T&&(_=A,T=p)}return _}}},6882:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429);S.default=function(L){if(!!m.default(L))return L.reduce(function(I,P){return Math.max(I,P)},L[0])}},72564:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(44614),L=d(8026),I=d(41913),P=d(55535),_;S.default=I.default(function(T,M){M===void 0&&(M={});var A=M.fontSize,p=M.fontFamily,w=M.fontWeight,y=M.fontStyle,b=M.fontVariant;return _||(_=document.createElement("canvas").getContext("2d")),_.font=[y,b,w,A+"px",p].join(" "),_.measureText(P.default(T)?T:"").width},function(T,M){return M===void 0&&(M={}),m.__spreadArrays([T],L.default(M)).join("")})},41913:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91110);S.default=function(L,I){if(!m.default(L))throw new TypeError("Expected a function");var P=function(){for(var _=[],T=0;T<arguments.length;T++)_[T]=arguments[T];var M=I?I.apply(this,_):_[0],A=P.cache;if(A.has(M))return A.get(M);var p=L.apply(this,_);return A.set(M,p),p};return P.cache=new Map,P}},94720:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(91110);S.default=function(I,P){if(!!m.default(I)){for(var _,T=Infinity,M=0;M<I.length;M++){var A=I[M],p=L.default(P)?P(A):A[P];p<T&&(_=A,T=p)}return _}}},31302:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429);S.default=function(L){if(!!m.default(L))return L.reduce(function(I,P){return Math.min(I,P)},L[0])}},7165:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(L,I){for(var P in I)I.hasOwnProperty(P)&&P!=="constructor"&&I[P]!==void 0&&(L[P]=I[P])}function m(L,I,P,_){return I&&d(L,I),P&&d(L,P),_&&d(L,_),L}S.default=m},62352:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m,L){return(m%L+L)%L};S.default=d},67122:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(){}},74868:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d={};function m(L){var I=d[L];if(!I){for(var P=L.toString(16),_=P.length;_<6;_++)P="0"+P;I="#"+P,d[L]=I}return I}S.default=m},81029:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(94777);S.default=function(L,I){return m.default(L,function(P,_,T){return I.includes(T)||(P[T]=_),P},{})}},82293:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429);function L(I){var P=0,_=0,T=0,M=0;return m.default(I)?I.length===1?P=_=T=M=I[0]:I.length===2?(P=T=I[0],_=M=I[1]):I.length===3?(P=I[0],_=M=I[1],T=I[2]):(P=I[0],_=I[1],T=I[2],M=I[3]):P=_=T=M=I,{r1:P,r2:_,r3:T,r4:M}}S.default=L},61257:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91577),L=d(38958),I=Object.prototype.hasOwnProperty;S.default=function(P,_){if(P===null||!L.default(P))return{};var T={};return m.default(_,function(M){I.call(P,M)&&(T[M]=P[M])}),T}},91425:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819),L=Array.prototype.splice,I=function(_,T){if(!m.default(_))return[];for(var M=_?T.length:0,A=M-1;M--;){var p=void 0,w=T[M];(M===A||w!==p)&&(p=w,L.call(_,w,1))}return _};S.default=I},69228:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=Array.prototype,m=d.splice,L=d.indexOf,I=function(P){for(var _=[],T=1;T<arguments.length;T++)_[T-1]=arguments[T];for(var M=0;M<_.length;M++)for(var A=_[M],p=-1;(p=L.call(P,A))>-1;)m.call(P,p,1);return P};S.default=I},94777:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91577),L=d(21429),I=d(38958),P=function(_,T,M){if(!L.default(_)&&!I.default(_))return _;var A=M;return m.default(_,function(p,w){A=T(A,p,w)}),A};S.default=P},94750:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819),L=d(91425),I=function(P,_){var T=[];if(!m.default(P))return T;for(var M=-1,A=[],p=P.length;++M<p;){var w=P[M];_(w,M,P)&&(T.push(w),A.push(M))}return L.default(P,A),T};S.default=I},37250:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m){var L=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(I){return setTimeout(I,16)};return L(m)}S.default=d},36979:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(41367),L=d(55535),I=d(41820);S.default=function(P,_,T){var M=P,A=L.default(_)?_.split("."):_;return A.forEach(function(p,w){w<A.length-1?(m.default(M[p])||(M[p]=I.default(A[w+1])?[]:{}),M=M[p]):M[p]=T}),P}},74266:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(83438),L=d(64819);function I(P){return m.default(P)?0:L.default(P)?P.length:Object.keys(P).length}S.default=I},35330:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=function(m,L){for(var I=0;I<m.length;I++)if(L(m[I],I))return!0;return!1};S.default=d},55713:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(55535),I=d(91110);function P(_,T){var M;if(I.default(T))M=function(p,w){return T(p)-T(w)};else{var A=[];L.default(T)?A.push(T):m.default(T)&&(A=T),M=function(p,w){for(var y=0;y<A.length;y+=1){var b=A[y];if(p[b]>w[b])return 1;if(p[b]<w[b])return-1}return 0}}return _.sort(M),_}S.default=P},65200:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(55535);function I(P,_){return m.default(P)||L.default(P)?P[0]===_:!1}S.default=I},40287:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m,L){return!m||!L?m:m.replace(/\\?\{([^{}]+)\}/g,function(I,P){return I.charAt(0)==="\\"?I.slice(1):L[P]===void 0?"":L[P]})}S.default=d},46098:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(d,m,L){var I,P,_,T,M=0;L||(L={});var A=function(){M=L.leading===!1?0:Date.now(),I=null,T=d.apply(P,_),I||(P=_=null)},p=function(){var w=Date.now();!M&&L.leading===!1&&(M=w);var y=m-(w-M);return P=this,_=arguments,y<=0||y>m?(I&&(clearTimeout(I),I=null),M=w,T=d.apply(P,_),I||(P=_=null)):!I&&L.trailing!==!1&&(I=setTimeout(A,y)),T};return p.cancel=function(){clearTimeout(I),M=0,I=P=_=null},p}},45856:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(64819);S.default=function(L){return m.default(L)?Array.prototype.slice.call(L):[]}},62444:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=180/Math.PI,m=function(L){return d*L};S.default=m},94753:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=parseInt},61823:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d=Math.PI/180,m=function(L){return d*L};S.default=m},25686:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(83438);S.default=function(L){return m.default(L)?"":L.toString()}},85723:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(48870),L=function(){for(var I=[],P=0;P<arguments.length;P++)I[P]=arguments[P];return m.default([].concat.apply([],I))};S.default=L},48870:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m,L){L===void 0&&(L=new Map);var I=[];if(Array.isArray(m))for(var P=0,_=m.length;P<_;P++){var T=m[P];L.has(T)||(I.push(T),L.set(T,!0))}return I}S.default=d},83355:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var d={};S.default=function(m){return m=m||"g",d[m]?d[m]+=1:d[m]=1,m+d[m]}},57319:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(25686),L=function(I){return m.default(I).toUpperCase()};S.default=L},18092:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(25686),L=function(I){var P=m.default(I);return P.charAt(0).toUpperCase()+P.substring(1)};S.default=L},44417:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(21429),L=d(83438);S.default=function(I,P){for(var _=[],T={},M=0;M<I.length;M++){var A=I[M],p=A[P];if(!L.default(p)){m.default(p)||(p=[p]);for(var w=0;w<p.length;w++){var y=p[w];T[y]||(_.push(y),T[y]=!0)}}}return _}},8026:function(lt,S,d){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var m=d(91577),L=d(91110),I=Object.values?function(P){return Object.values(P)}:function(P){var _=[];return m.default(P,function(T,M){L.default(P)&&M==="prototype"||_.push(T)}),_};S.default=I},78435:function(lt,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function d(m,L){if(m["_wrap_"+L])return m["_wrap_"+L];var I=function(P){m[L](P)};return m["_wrap_"+L]=I,I}S.default=d},51467:function(lt,S,d){"use strict";d.r(S),d.d(S,{__extends:function(){return L},__assign:function(){return I},__rest:function(){return P},__decorate:function(){return _},__param:function(){return T},__metadata:function(){return M},__awaiter:function(){return A},__generator:function(){return p},__createBinding:function(){return w},__exportStar:function(){return y},__values:function(){return b},__read:function(){return x},__spread:function(){return E},__spreadArrays:function(){return k},__await:function(){return D},__asyncGenerator:function(){return N},__asyncDelegator:function(){return z},__asyncValues:function(){return W},__makeTemplateObject:function(){return X},__importStar:function(){return U},__importDefault:function(){return et},__classPrivateFieldGet:function(){return Q},__classPrivateFieldSet:function(){return ct}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var m=function(_t,yt){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,Mt){bt.__proto__=Mt}||function(bt,Mt){for(var xt in Mt)Mt.hasOwnProperty(xt)&&(bt[xt]=Mt[xt])},m(_t,yt)};function L(Lt,_t){m(Lt,_t);function yt(){this.constructor=Lt}Lt.prototype=_t===null?Object.create(_t):(yt.prototype=_t.prototype,new yt)}var I=function(){return I=Object.assign||function(yt){for(var bt,Mt=1,xt=arguments.length;Mt<xt;Mt++){bt=arguments[Mt];for(var Bt in bt)Object.prototype.hasOwnProperty.call(bt,Bt)&&(yt[Bt]=bt[Bt])}return yt},I.apply(this,arguments)};function P(Lt,_t){var yt={};for(var bt in Lt)Object.prototype.hasOwnProperty.call(Lt,bt)&&_t.indexOf(bt)<0&&(yt[bt]=Lt[bt]);if(Lt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Mt=0,bt=Object.getOwnPropertySymbols(Lt);Mt<bt.length;Mt++)_t.indexOf(bt[Mt])<0&&Object.prototype.propertyIsEnumerable.call(Lt,bt[Mt])&&(yt[bt[Mt]]=Lt[bt[Mt]]);return yt}function _(Lt,_t,yt,bt){var Mt=arguments.length,xt=Mt<3?_t:bt===null?bt=Object.getOwnPropertyDescriptor(_t,yt):bt,Bt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")xt=Reflect.decorate(Lt,_t,yt,bt);else for(var wt=Lt.length-1;wt>=0;wt--)(Bt=Lt[wt])&&(xt=(Mt<3?Bt(xt):Mt>3?Bt(_t,yt,xt):Bt(_t,yt))||xt);return Mt>3&&xt&&Object.defineProperty(_t,yt,xt),xt}function T(Lt,_t){return function(yt,bt){_t(yt,bt,Lt)}}function M(Lt,_t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Lt,_t)}function A(Lt,_t,yt,bt){function Mt(xt){return xt instanceof yt?xt:new yt(function(Bt){Bt(xt)})}return new(yt||(yt=Promise))(function(xt,Bt){function wt(B){try{K(bt.next(B))}catch(h){Bt(h)}}function H(B){try{K(bt.throw(B))}catch(h){Bt(h)}}function K(B){B.done?xt(B.value):Mt(B.value).then(wt,H)}K((bt=bt.apply(Lt,_t||[])).next())})}function p(Lt,_t){var yt={label:0,sent:function(){if(xt[0]&1)throw xt[1];return xt[1]},trys:[],ops:[]},bt,Mt,xt,Bt;return Bt={next:wt(0),throw:wt(1),return:wt(2)},typeof Symbol=="function"&&(Bt[Symbol.iterator]=function(){return this}),Bt;function wt(K){return function(B){return H([K,B])}}function H(K){if(bt)throw new TypeError("Generator is already executing.");for(;yt;)try{if(bt=1,Mt&&(xt=K[0]&2?Mt.return:K[0]?Mt.throw||((xt=Mt.return)&&xt.call(Mt),0):Mt.next)&&!(xt=xt.call(Mt,K[1])).done)return xt;switch(Mt=0,xt&&(K=[K[0]&2,xt.value]),K[0]){case 0:case 1:xt=K;break;case 4:return yt.label++,{value:K[1],done:!1};case 5:yt.label++,Mt=K[1],K=[0];continue;case 7:K=yt.ops.pop(),yt.trys.pop();continue;default:if(xt=yt.trys,!(xt=xt.length>0&&xt[xt.length-1])&&(K[0]===6||K[0]===2)){yt=0;continue}if(K[0]===3&&(!xt||K[1]>xt[0]&&K[1]<xt[3])){yt.label=K[1];break}if(K[0]===6&&yt.label<xt[1]){yt.label=xt[1],xt=K;break}if(xt&&yt.label<xt[2]){yt.label=xt[2],yt.ops.push(K);break}xt[2]&&yt.ops.pop(),yt.trys.pop();continue}K=_t.call(Lt,yt)}catch(B){K=[6,B],Mt=0}finally{bt=xt=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}}function w(Lt,_t,yt,bt){bt===void 0&&(bt=yt),Lt[bt]=_t[yt]}function y(Lt,_t){for(var yt in Lt)yt!=="default"&&!_t.hasOwnProperty(yt)&&(_t[yt]=Lt[yt])}function b(Lt){var _t=typeof Symbol=="function"&&Symbol.iterator,yt=_t&&Lt[_t],bt=0;if(yt)return yt.call(Lt);if(Lt&&typeof Lt.length=="number")return{next:function(){return Lt&&bt>=Lt.length&&(Lt=void 0),{value:Lt&&Lt[bt++],done:!Lt}}};throw new TypeError(_t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(Lt,_t){var yt=typeof Symbol=="function"&&Lt[Symbol.iterator];if(!yt)return Lt;var bt=yt.call(Lt),Mt,xt=[],Bt;try{for(;(_t===void 0||_t-- >0)&&!(Mt=bt.next()).done;)xt.push(Mt.value)}catch(wt){Bt={error:wt}}finally{try{Mt&&!Mt.done&&(yt=bt.return)&&yt.call(bt)}finally{if(Bt)throw Bt.error}}return xt}function E(){for(var Lt=[],_t=0;_t<arguments.length;_t++)Lt=Lt.concat(x(arguments[_t]));return Lt}function k(){for(var Lt=0,_t=0,yt=arguments.length;_t<yt;_t++)Lt+=arguments[_t].length;for(var bt=Array(Lt),Mt=0,_t=0;_t<yt;_t++)for(var xt=arguments[_t],Bt=0,wt=xt.length;Bt<wt;Bt++,Mt++)bt[Mt]=xt[Bt];return bt}function D(Lt){return this instanceof D?(this.v=Lt,this):new D(Lt)}function N(Lt,_t,yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt=yt.apply(Lt,_t||[]),Mt,xt=[];return Mt={},Bt("next"),Bt("throw"),Bt("return"),Mt[Symbol.asyncIterator]=function(){return this},Mt;function Bt(mt){bt[mt]&&(Mt[mt]=function(gt){return new Promise(function(Vt,Jt){xt.push([mt,gt,Vt,Jt])>1||wt(mt,gt)})})}function wt(mt,gt){try{H(bt[mt](gt))}catch(Vt){h(xt[0][3],Vt)}}function H(mt){mt.value instanceof D?Promise.resolve(mt.value.v).then(K,B):h(xt[0][2],mt)}function K(mt){wt("next",mt)}function B(mt){wt("throw",mt)}function h(mt,gt){mt(gt),xt.shift(),xt.length&&wt(xt[0][0],xt[0][1])}}function z(Lt){var _t,yt;return _t={},bt("next"),bt("throw",function(Mt){throw Mt}),bt("return"),_t[Symbol.iterator]=function(){return this},_t;function bt(Mt,xt){_t[Mt]=Lt[Mt]?function(Bt){return(yt=!yt)?{value:D(Lt[Mt](Bt)),done:Mt==="return"}:xt?xt(Bt):Bt}:xt}}function W(Lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _t=Lt[Symbol.asyncIterator],yt;return _t?_t.call(Lt):(Lt=typeof b=="function"?b(Lt):Lt[Symbol.iterator](),yt={},bt("next"),bt("throw"),bt("return"),yt[Symbol.asyncIterator]=function(){return this},yt);function bt(xt){yt[xt]=Lt[xt]&&function(Bt){return new Promise(function(wt,H){Bt=Lt[xt](Bt),Mt(wt,H,Bt.done,Bt.value)})}}function Mt(xt,Bt,wt,H){Promise.resolve(H).then(function(K){xt({value:K,done:wt})},Bt)}}function X(Lt,_t){return Object.defineProperty?Object.defineProperty(Lt,"raw",{value:_t}):Lt.raw=_t,Lt}function U(Lt){if(Lt&&Lt.__esModule)return Lt;var _t={};if(Lt!=null)for(var yt in Lt)Object.hasOwnProperty.call(Lt,yt)&&(_t[yt]=Lt[yt]);return _t.default=Lt,_t}function et(Lt){return Lt&&Lt.__esModule?Lt:{default:Lt}}function Q(Lt,_t){if(!_t.has(Lt))throw new TypeError("attempted to get private field on non-instance");return _t.get(Lt)}function ct(Lt,_t,yt){if(!_t.has(Lt))throw new TypeError("attempted to set private field on non-instance");return _t.set(Lt,yt),yt}},95432:function(lt,S,d){"use strict";var m=d(82933);S.Z=m.Z},27067:function(lt,S,d){"use strict";var m=d(59791),L=d.n(m),I=d(87503)},80808:function(lt,S,d){"use strict";var m=d(22433);S.Z=m.Z},15215:function(lt,S,d){"use strict";var m=d(59791),L=d.n(m),I=d(87503)},73786:function(lt,S,d){var m=d(99026),L={};for(var I in m)m.hasOwnProperty(I)&&(L[m[I]]=I);var P=lt.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var _ in P)if(P.hasOwnProperty(_)){if(!("channels"in P[_]))throw new Error("missing channels property: "+_);if(!("labels"in P[_]))throw new Error("missing channel labels property: "+_);if(P[_].labels.length!==P[_].channels)throw new Error("channel and label counts mismatch: "+_);var T=P[_].channels,M=P[_].labels;delete P[_].channels,delete P[_].labels,Object.defineProperty(P[_],"channels",{value:T}),Object.defineProperty(P[_],"labels",{value:M})}P.rgb.hsl=function(p){var w=p[0]/255,y=p[1]/255,b=p[2]/255,x=Math.min(w,y,b),E=Math.max(w,y,b),k=E-x,D,N,z;return E===x?D=0:w===E?D=(y-b)/k:y===E?D=2+(b-w)/k:b===E&&(D=4+(w-y)/k),D=Math.min(D*60,360),D<0&&(D+=360),z=(x+E)/2,E===x?N=0:z<=.5?N=k/(E+x):N=k/(2-E-x),[D,N*100,z*100]},P.rgb.hsv=function(p){var w,y,b,x,E,k=p[0]/255,D=p[1]/255,N=p[2]/255,z=Math.max(k,D,N),W=z-Math.min(k,D,N),X=function(U){return(z-U)/6/W+1/2};return W===0?x=E=0:(E=W/z,w=X(k),y=X(D),b=X(N),k===z?x=b-y:D===z?x=1/3+w-b:N===z&&(x=2/3+y-w),x<0?x+=1:x>1&&(x-=1)),[x*360,E*100,z*100]},P.rgb.hwb=function(p){var w=p[0],y=p[1],b=p[2],x=P.rgb.hsl(p)[0],E=1/255*Math.min(w,Math.min(y,b));return b=1-1/255*Math.max(w,Math.max(y,b)),[x,E*100,b*100]},P.rgb.cmyk=function(p){var w=p[0]/255,y=p[1]/255,b=p[2]/255,x,E,k,D;return D=Math.min(1-w,1-y,1-b),x=(1-w-D)/(1-D)||0,E=(1-y-D)/(1-D)||0,k=(1-b-D)/(1-D)||0,[x*100,E*100,k*100,D*100]};function A(p,w){return Math.pow(p[0]-w[0],2)+Math.pow(p[1]-w[1],2)+Math.pow(p[2]-w[2],2)}P.rgb.keyword=function(p){var w=L[p];if(w)return w;var y=Infinity,b;for(var x in m)if(m.hasOwnProperty(x)){var E=m[x],k=A(p,E);k<y&&(y=k,b=x)}return b},P.keyword.rgb=function(p){return m[p]},P.rgb.xyz=function(p){var w=p[0]/255,y=p[1]/255,b=p[2]/255;w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92,b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92;var x=w*.4124+y*.3576+b*.1805,E=w*.2126+y*.7152+b*.0722,k=w*.0193+y*.1192+b*.9505;return[x*100,E*100,k*100]},P.rgb.lab=function(p){var w=P.rgb.xyz(p),y=w[0],b=w[1],x=w[2],E,k,D;return y/=95.047,b/=100,x/=108.883,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,b=b>.008856?Math.pow(b,1/3):7.787*b+16/116,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,E=116*b-16,k=500*(y-b),D=200*(b-x),[E,k,D]},P.hsl.rgb=function(p){var w=p[0]/360,y=p[1]/100,b=p[2]/100,x,E,k,D,N;if(y===0)return N=b*255,[N,N,N];b<.5?E=b*(1+y):E=b+y-b*y,x=2*b-E,D=[0,0,0];for(var z=0;z<3;z++)k=w+1/3*-(z-1),k<0&&k++,k>1&&k--,6*k<1?N=x+(E-x)*6*k:2*k<1?N=E:3*k<2?N=x+(E-x)*(2/3-k)*6:N=x,D[z]=N*255;return D},P.hsl.hsv=function(p){var w=p[0],y=p[1]/100,b=p[2]/100,x=y,E=Math.max(b,.01),k,D;return b*=2,y*=b<=1?b:2-b,x*=E<=1?E:2-E,D=(b+y)/2,k=b===0?2*x/(E+x):2*y/(b+y),[w,k*100,D*100]},P.hsv.rgb=function(p){var w=p[0]/60,y=p[1]/100,b=p[2]/100,x=Math.floor(w)%6,E=w-Math.floor(w),k=255*b*(1-y),D=255*b*(1-y*E),N=255*b*(1-y*(1-E));switch(b*=255,x){case 0:return[b,N,k];case 1:return[D,b,k];case 2:return[k,b,N];case 3:return[k,D,b];case 4:return[N,k,b];case 5:return[b,k,D]}},P.hsv.hsl=function(p){var w=p[0],y=p[1]/100,b=p[2]/100,x=Math.max(b,.01),E,k,D;return D=(2-y)*b,E=(2-y)*x,k=y*x,k/=E<=1?E:2-E,k=k||0,D/=2,[w,k*100,D*100]},P.hwb.rgb=function(p){var w=p[0]/360,y=p[1]/100,b=p[2]/100,x=y+b,E,k,D,N;x>1&&(y/=x,b/=x),E=Math.floor(6*w),k=1-b,D=6*w-E,(E&1)!=0&&(D=1-D),N=y+D*(k-y);var z,W,X;switch(E){default:case 6:case 0:z=k,W=N,X=y;break;case 1:z=N,W=k,X=y;break;case 2:z=y,W=k,X=N;break;case 3:z=y,W=N,X=k;break;case 4:z=N,W=y,X=k;break;case 5:z=k,W=y,X=N;break}return[z*255,W*255,X*255]},P.cmyk.rgb=function(p){var w=p[0]/100,y=p[1]/100,b=p[2]/100,x=p[3]/100,E,k,D;return E=1-Math.min(1,w*(1-x)+x),k=1-Math.min(1,y*(1-x)+x),D=1-Math.min(1,b*(1-x)+x),[E*255,k*255,D*255]},P.xyz.rgb=function(p){var w=p[0]/100,y=p[1]/100,b=p[2]/100,x,E,k;return x=w*3.2406+y*-1.5372+b*-.4986,E=w*-.9689+y*1.8758+b*.0415,k=w*.0557+y*-.204+b*1.057,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x*12.92,E=E>.0031308?1.055*Math.pow(E,1/2.4)-.055:E*12.92,k=k>.0031308?1.055*Math.pow(k,1/2.4)-.055:k*12.92,x=Math.min(Math.max(0,x),1),E=Math.min(Math.max(0,E),1),k=Math.min(Math.max(0,k),1),[x*255,E*255,k*255]},P.xyz.lab=function(p){var w=p[0],y=p[1],b=p[2],x,E,k;return w/=95.047,y/=100,b/=108.883,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,b=b>.008856?Math.pow(b,1/3):7.787*b+16/116,x=116*y-16,E=500*(w-y),k=200*(y-b),[x,E,k]},P.lab.xyz=function(p){var w=p[0],y=p[1],b=p[2],x,E,k;E=(w+16)/116,x=y/500+E,k=E-b/200;var D=Math.pow(E,3),N=Math.pow(x,3),z=Math.pow(k,3);return E=D>.008856?D:(E-16/116)/7.787,x=N>.008856?N:(x-16/116)/7.787,k=z>.008856?z:(k-16/116)/7.787,x*=95.047,E*=100,k*=108.883,[x,E,k]},P.lab.lch=function(p){var w=p[0],y=p[1],b=p[2],x,E,k;return x=Math.atan2(b,y),E=x*360/2/Math.PI,E<0&&(E+=360),k=Math.sqrt(y*y+b*b),[w,k,E]},P.lch.lab=function(p){var w=p[0],y=p[1],b=p[2],x,E,k;return k=b/360*2*Math.PI,x=y*Math.cos(k),E=y*Math.sin(k),[w,x,E]},P.rgb.ansi16=function(p){var w=p[0],y=p[1],b=p[2],x=1 in arguments?arguments[1]:P.rgb.hsv(p)[2];if(x=Math.round(x/50),x===0)return 30;var E=30+(Math.round(b/255)<<2|Math.round(y/255)<<1|Math.round(w/255));return x===2&&(E+=60),E},P.hsv.ansi16=function(p){return P.rgb.ansi16(P.hsv.rgb(p),p[2])},P.rgb.ansi256=function(p){var w=p[0],y=p[1],b=p[2];if(w===y&&y===b)return w<8?16:w>248?231:Math.round((w-8)/247*24)+232;var x=16+36*Math.round(w/255*5)+6*Math.round(y/255*5)+Math.round(b/255*5);return x},P.ansi16.rgb=function(p){var w=p%10;if(w===0||w===7)return p>50&&(w+=3.5),w=w/10.5*255,[w,w,w];var y=(~~(p>50)+1)*.5,b=(w&1)*y*255,x=(w>>1&1)*y*255,E=(w>>2&1)*y*255;return[b,x,E]},P.ansi256.rgb=function(p){if(p>=232){var w=(p-232)*10+8;return[w,w,w]}p-=16;var y,b=Math.floor(p/36)/5*255,x=Math.floor((y=p%36)/6)/5*255,E=y%6/5*255;return[b,x,E]},P.rgb.hex=function(p){var w=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),y=w.toString(16).toUpperCase();return"000000".substring(y.length)+y},P.hex.rgb=function(p){var w=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!w)return[0,0,0];var y=w[0];w[0].length===3&&(y=y.split("").map(function(D){return D+D}).join(""));var b=parseInt(y,16),x=b>>16&255,E=b>>8&255,k=b&255;return[x,E,k]},P.rgb.hcg=function(p){var w=p[0]/255,y=p[1]/255,b=p[2]/255,x=Math.max(Math.max(w,y),b),E=Math.min(Math.min(w,y),b),k=x-E,D,N;return k<1?D=E/(1-k):D=0,k<=0?N=0:x===w?N=(y-b)/k%6:x===y?N=2+(b-w)/k:N=4+(w-y)/k+4,N/=6,N%=1,[N*360,k*100,D*100]},P.hsl.hcg=function(p){var w=p[1]/100,y=p[2]/100,b=1,x=0;return y<.5?b=2*w*y:b=2*w*(1-y),b<1&&(x=(y-.5*b)/(1-b)),[p[0],b*100,x*100]},P.hsv.hcg=function(p){var w=p[1]/100,y=p[2]/100,b=w*y,x=0;return b<1&&(x=(y-b)/(1-b)),[p[0],b*100,x*100]},P.hcg.rgb=function(p){var w=p[0]/360,y=p[1]/100,b=p[2]/100;if(y===0)return[b*255,b*255,b*255];var x=[0,0,0],E=w%1*6,k=E%1,D=1-k,N=0;switch(Math.floor(E)){case 0:x[0]=1,x[1]=k,x[2]=0;break;case 1:x[0]=D,x[1]=1,x[2]=0;break;case 2:x[0]=0,x[1]=1,x[2]=k;break;case 3:x[0]=0,x[1]=D,x[2]=1;break;case 4:x[0]=k,x[1]=0,x[2]=1;break;default:x[0]=1,x[1]=0,x[2]=D}return N=(1-y)*b,[(y*x[0]+N)*255,(y*x[1]+N)*255,(y*x[2]+N)*255]},P.hcg.hsv=function(p){var w=p[1]/100,y=p[2]/100,b=w+y*(1-w),x=0;return b>0&&(x=w/b),[p[0],x*100,b*100]},P.hcg.hsl=function(p){var w=p[1]/100,y=p[2]/100,b=y*(1-w)+.5*w,x=0;return b>0&&b<.5?x=w/(2*b):b>=.5&&b<1&&(x=w/(2*(1-b))),[p[0],x*100,b*100]},P.hcg.hwb=function(p){var w=p[1]/100,y=p[2]/100,b=w+y*(1-w);return[p[0],(b-w)*100,(1-b)*100]},P.hwb.hcg=function(p){var w=p[1]/100,y=p[2]/100,b=1-y,x=b-w,E=0;return x<1&&(E=(b-x)/(1-x)),[p[0],x*100,E*100]},P.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},P.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},P.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},P.gray.hsl=P.gray.hsv=function(p){return[0,0,p[0]]},P.gray.hwb=function(p){return[0,100,p[0]]},P.gray.cmyk=function(p){return[0,0,0,p[0]]},P.gray.lab=function(p){return[p[0],0,0]},P.gray.hex=function(p){var w=Math.round(p[0]/100*255)&255,y=(w<<16)+(w<<8)+w,b=y.toString(16).toUpperCase();return"000000".substring(b.length)+b},P.rgb.gray=function(p){var w=(p[0]+p[1]+p[2])/3;return[w/255*100]}},83338:function(lt,S,d){var m=d(73786),L=d(3986),I={},P=Object.keys(m);function _(M){var A=function(p){return p==null?p:(arguments.length>1&&(p=Array.prototype.slice.call(arguments)),M(p))};return"conversion"in M&&(A.conversion=M.conversion),A}function T(M){var A=function(p){if(p==null)return p;arguments.length>1&&(p=Array.prototype.slice.call(arguments));var w=M(p);if(typeof w=="object")for(var y=w.length,b=0;b<y;b++)w[b]=Math.round(w[b]);return w};return"conversion"in M&&(A.conversion=M.conversion),A}P.forEach(function(M){I[M]={},Object.defineProperty(I[M],"channels",{value:m[M].channels}),Object.defineProperty(I[M],"labels",{value:m[M].labels});var A=L(M),p=Object.keys(A);p.forEach(function(w){var y=A[w];I[M][w]=T(y),I[M][w].raw=_(y)})}),lt.exports=I},3986:function(lt,S,d){var m=d(73786);function L(){for(var T={},M=Object.keys(m),A=M.length,p=0;p<A;p++)T[M[p]]={distance:-1,parent:null};return T}function I(T){var M=L(),A=[T];for(M[T].distance=0;A.length;)for(var p=A.pop(),w=Object.keys(m[p]),y=w.length,b=0;b<y;b++){var x=w[b],E=M[x];E.distance===-1&&(E.distance=M[p].distance+1,E.parent=p,A.unshift(x))}return M}function P(T,M){return function(A){return M(T(A))}}function _(T,M){for(var A=[M[T].parent,T],p=m[M[T].parent][T],w=M[T].parent;M[w].parent;)A.unshift(M[w].parent),p=P(m[M[w].parent][w],p),w=M[w].parent;return p.conversion=A,p}lt.exports=function(T){for(var M=I(T),A={},p=Object.keys(M),w=p.length,y=0;y<w;y++){var b=p[y],x=M[b];x.parent!==null&&(A[b]=_(b,M))}return A}},99026:function(lt){"use strict";lt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},45411:function(lt){"use strict";lt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},75196:function(lt,S,d){var m=d(45411),L=d(75029),I=Object.hasOwnProperty,P=Object.create(null);for(var _ in m)I.call(m,_)&&(P[m[_]]=_);var T=lt.exports={to:{},get:{}};T.get=function(p){var w=p.substring(0,3).toLowerCase(),y,b;switch(w){case"hsl":y=T.get.hsl(p),b="hsl";break;case"hwb":y=T.get.hwb(p),b="hwb";break;default:y=T.get.rgb(p),b="rgb";break}return y?{model:b,value:y}:null},T.get.rgb=function(p){if(!p)return null;var w=/^#([a-f0-9]{3,4})$/i,y=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,b=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,x=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,E=/^(\w+)$/,k=[0,0,0,1],D,N,z;if(D=p.match(y)){for(z=D[2],D=D[1],N=0;N<3;N++){var W=N*2;k[N]=parseInt(D.slice(W,W+2),16)}z&&(k[3]=parseInt(z,16)/255)}else if(D=p.match(w)){for(D=D[1],z=D[3],N=0;N<3;N++)k[N]=parseInt(D[N]+D[N],16);z&&(k[3]=parseInt(z+z,16)/255)}else if(D=p.match(b)){for(N=0;N<3;N++)k[N]=parseInt(D[N+1],0);D[4]&&(D[5]?k[3]=parseFloat(D[4])*.01:k[3]=parseFloat(D[4]))}else if(D=p.match(x)){for(N=0;N<3;N++)k[N]=Math.round(parseFloat(D[N+1])*2.55);D[4]&&(D[5]?k[3]=parseFloat(D[4])*.01:k[3]=parseFloat(D[4]))}else return(D=p.match(E))?D[1]==="transparent"?[0,0,0,0]:I.call(m,D[1])?(k=m[D[1]],k[3]=1,k):null:null;for(N=0;N<3;N++)k[N]=M(k[N],0,255);return k[3]=M(k[3],0,1),k},T.get.hsl=function(p){if(!p)return null;var w=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,y=p.match(w);if(y){var b=parseFloat(y[4]),x=(parseFloat(y[1])%360+360)%360,E=M(parseFloat(y[2]),0,100),k=M(parseFloat(y[3]),0,100),D=M(isNaN(b)?1:b,0,1);return[x,E,k,D]}return null},T.get.hwb=function(p){if(!p)return null;var w=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,y=p.match(w);if(y){var b=parseFloat(y[4]),x=(parseFloat(y[1])%360+360)%360,E=M(parseFloat(y[2]),0,100),k=M(parseFloat(y[3]),0,100),D=M(isNaN(b)?1:b,0,1);return[x,E,k,D]}return null},T.to.hex=function(){var p=L(arguments);return"#"+A(p[0])+A(p[1])+A(p[2])+(p[3]<1?A(Math.round(p[3]*255)):"")},T.to.rgb=function(){var p=L(arguments);return p.length<4||p[3]===1?"rgb("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+")":"rgba("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+", "+p[3]+")"},T.to.rgb.percent=function(){var p=L(arguments),w=Math.round(p[0]/255*100),y=Math.round(p[1]/255*100),b=Math.round(p[2]/255*100);return p.length<4||p[3]===1?"rgb("+w+"%, "+y+"%, "+b+"%)":"rgba("+w+"%, "+y+"%, "+b+"%, "+p[3]+")"},T.to.hsl=function(){var p=L(arguments);return p.length<4||p[3]===1?"hsl("+p[0]+", "+p[1]+"%, "+p[2]+"%)":"hsla("+p[0]+", "+p[1]+"%, "+p[2]+"%, "+p[3]+")"},T.to.hwb=function(){var p=L(arguments),w="";return p.length>=4&&p[3]!==1&&(w=", "+p[3]),"hwb("+p[0]+", "+p[1]+"%, "+p[2]+"%"+w+")"},T.to.keyword=function(p){return P[p.slice(0,3)]};function M(p,w,y){return Math.min(Math.max(w,p),y)}function A(p){var w=Math.round(p).toString(16).toUpperCase();return w.length<2?"0"+w:w}},57491:function(lt,S,d){"use strict";var m=d(75196),L=d(83338),I=[].slice,P=["keyword","gray","hex"],_={};Object.keys(L).forEach(function(E){_[I.call(L[E].labels).sort().join("")]=E});var T={};function M(E,k){if(!(this instanceof M))return new M(E,k);if(k&&k in P&&(k=null),k&&!(k in L))throw new Error("Unknown model: "+k);var D,N;if(E==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(E instanceof M)this.model=E.model,this.color=E.color.slice(),this.valpha=E.valpha;else if(typeof E=="string"){var z=m.get(E);if(z===null)throw new Error("Unable to parse color from string: "+E);this.model=z.model,N=L[this.model].channels,this.color=z.value.slice(0,N),this.valpha=typeof z.value[N]=="number"?z.value[N]:1}else if(E.length){this.model=k||"rgb",N=L[this.model].channels;var W=I.call(E,0,N);this.color=x(W,N),this.valpha=typeof E[N]=="number"?E[N]:1}else if(typeof E=="number")E&=16777215,this.model="rgb",this.color=[E>>16&255,E>>8&255,E&255],this.valpha=1;else{this.valpha=1;var X=Object.keys(E);"alpha"in E&&(X.splice(X.indexOf("alpha"),1),this.valpha=typeof E.alpha=="number"?E.alpha:0);var U=X.sort().join("");if(!(U in _))throw new Error("Unable to parse color from object: "+JSON.stringify(E));this.model=_[U];var et=L[this.model].labels,Q=[];for(D=0;D<et.length;D++)Q.push(E[et[D]]);this.color=x(Q)}if(T[this.model])for(N=L[this.model].channels,D=0;D<N;D++){var ct=T[this.model][D];ct&&(this.color[D]=ct(this.color[D]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}M.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(E){var k=this.model in m.to?this:this.rgb();k=k.round(typeof E=="number"?E:1);var D=k.valpha===1?k.color:k.color.concat(this.valpha);return m.to[k.model](D)},percentString:function(E){var k=this.rgb().round(typeof E=="number"?E:1),D=k.valpha===1?k.color:k.color.concat(this.valpha);return m.to.rgb.percent(D)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var E={},k=L[this.model].channels,D=L[this.model].labels,N=0;N<k;N++)E[D[N]]=this.color[N];return this.valpha!==1&&(E.alpha=this.valpha),E},unitArray:function(){var E=this.rgb().color;return E[0]/=255,E[1]/=255,E[2]/=255,this.valpha!==1&&E.push(this.valpha),E},unitObject:function(){var E=this.rgb().object();return E.r/=255,E.g/=255,E.b/=255,this.valpha!==1&&(E.alpha=this.valpha),E},round:function(E){return E=Math.max(E||0,0),new M(this.color.map(p(E)).concat(this.valpha),this.model)},alpha:function(E){return arguments.length?new M(this.color.concat(Math.max(0,Math.min(1,E))),this.model):this.valpha},red:w("rgb",0,y(255)),green:w("rgb",1,y(255)),blue:w("rgb",2,y(255)),hue:w(["hsl","hsv","hsl","hwb","hcg"],0,function(E){return(E%360+360)%360}),saturationl:w("hsl",1,y(100)),lightness:w("hsl",2,y(100)),saturationv:w("hsv",1,y(100)),value:w("hsv",2,y(100)),chroma:w("hcg",1,y(100)),gray:w("hcg",2,y(100)),white:w("hwb",1,y(100)),wblack:w("hwb",2,y(100)),cyan:w("cmyk",0,y(100)),magenta:w("cmyk",1,y(100)),yellow:w("cmyk",2,y(100)),black:w("cmyk",3,y(100)),x:w("xyz",0,y(100)),y:w("xyz",1,y(100)),z:w("xyz",2,y(100)),l:w("lab",0,y(100)),a:w("lab",1),b:w("lab",2),keyword:function(E){return arguments.length?new M(E):L[this.model].keyword(this.color)},hex:function(E){return arguments.length?new M(E):m.to.hex(this.rgb().round().color)},rgbNumber:function(){var E=this.rgb().color;return(E[0]&255)<<16|(E[1]&255)<<8|E[2]&255},luminosity:function(){for(var E=this.rgb().color,k=[],D=0;D<E.length;D++){var N=E[D]/255;k[D]=N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4)}return .2126*k[0]+.7152*k[1]+.0722*k[2]},contrast:function(E){var k=this.luminosity(),D=E.luminosity();return k>D?(k+.05)/(D+.05):(D+.05)/(k+.05)},level:function(E){var k=this.contrast(E);return k>=7.1?"AAA":k>=4.5?"AA":""},isDark:function(){var E=this.rgb().color,k=(E[0]*299+E[1]*587+E[2]*114)/1e3;return k<128},isLight:function(){return!this.isDark()},negate:function(){for(var E=this.rgb(),k=0;k<3;k++)E.color[k]=255-E.color[k];return E},lighten:function(E){var k=this.hsl();return k.color[2]+=k.color[2]*E,k},darken:function(E){var k=this.hsl();return k.color[2]-=k.color[2]*E,k},saturate:function(E){var k=this.hsl();return k.color[1]+=k.color[1]*E,k},desaturate:function(E){var k=this.hsl();return k.color[1]-=k.color[1]*E,k},whiten:function(E){var k=this.hwb();return k.color[1]+=k.color[1]*E,k},blacken:function(E){var k=this.hwb();return k.color[2]+=k.color[2]*E,k},grayscale:function(){var E=this.rgb().color,k=E[0]*.3+E[1]*.59+E[2]*.11;return M.rgb(k,k,k)},fade:function(E){return this.alpha(this.valpha-this.valpha*E)},opaquer:function(E){return this.alpha(this.valpha+this.valpha*E)},rotate:function(E){var k=this.hsl(),D=k.color[0];return D=(D+E)%360,D=D<0?360+D:D,k.color[0]=D,k},mix:function(E,k){if(!E||!E.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof E);var D=E.rgb(),N=this.rgb(),z=k===void 0?.5:k,W=2*z-1,X=D.alpha()-N.alpha(),U=((W*X==-1?W:(W+X)/(1+W*X))+1)/2,et=1-U;return M.rgb(U*D.red()+et*N.red(),U*D.green()+et*N.green(),U*D.blue()+et*N.blue(),D.alpha()*z+N.alpha()*(1-z))}},Object.keys(L).forEach(function(E){if(P.indexOf(E)===-1){var k=L[E].channels;M.prototype[E]=function(){if(this.model===E)return new M(this);if(arguments.length)return new M(arguments,E);var D=typeof arguments[k]=="number"?k:this.valpha;return new M(b(L[this.model][E].raw(this.color)).concat(D),E)},M[E]=function(D){return typeof D=="number"&&(D=x(I.call(arguments),k)),new M(D,E)}}});function A(E,k){return Number(E.toFixed(k))}function p(E){return function(k){return A(k,E)}}function w(E,k,D){return E=Array.isArray(E)?E:[E],E.forEach(function(N){(T[N]||(T[N]=[]))[k]=D}),E=E[0],function(N){var z;return arguments.length?(D&&(N=D(N)),z=this[E](),z.color[k]=N,z):(z=this[E]().color[k],D&&(z=D(z)),z)}}function y(E){return function(k){return Math.max(0,Math.min(E,k))}}function b(E){return Array.isArray(E)?E:[E]}function x(E,k){for(var D=0;D<k;D++)typeof E[D]!="number"&&(E[D]=0);return E}lt.exports=M},78971:function(lt,S,d){"use strict";d.d(S,{Il:function(){return L},xV:function(){return I},J5:function(){return P},ZP:function(){return W},SU:function(){return et},B8:function(){return Q},Ss:function(){return ct},Ym:function(){return xt}});var m=d(68456);function L(){}var I=.7,P=1/I,_="\\s*([+-]?\\d+)\\s*",T="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",M="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A=/^#([0-9a-f]{3,8})$/,p=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),w=new RegExp("^rgb\\("+[M,M,M]+"\\)$"),y=new RegExp("^rgba\\("+[_,_,_,T]+"\\)$"),b=new RegExp("^rgba\\("+[M,M,M,T]+"\\)$"),x=new RegExp("^hsl\\("+[T,M,M]+"\\)$"),E=new RegExp("^hsla\\("+[T,M,M,T]+"\\)$"),k={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};(0,m.Z)(L,W,{copy:function(H){return Object.assign(new this.constructor,this,H)},displayable:function(){return this.rgb().displayable()},hex:D,formatHex:D,formatHsl:N,formatRgb:z,toString:z});function D(){return this.rgb().formatHex()}function N(){return Mt(this).formatHsl()}function z(){return this.rgb().formatRgb()}function W(H){var K,B;return H=(H+"").trim().toLowerCase(),(K=A.exec(H))?(B=K[1].length,K=parseInt(K[1],16),B===6?X(K):B===3?new ct(K>>8&15|K>>4&240,K>>4&15|K&240,(K&15)<<4|K&15,1):B===8?U(K>>24&255,K>>16&255,K>>8&255,(K&255)/255):B===4?U(K>>12&15|K>>8&240,K>>8&15|K>>4&240,K>>4&15|K&240,((K&15)<<4|K&15)/255):null):(K=p.exec(H))?new ct(K[1],K[2],K[3],1):(K=w.exec(H))?new ct(K[1]*255/100,K[2]*255/100,K[3]*255/100,1):(K=y.exec(H))?U(K[1],K[2],K[3],K[4]):(K=b.exec(H))?U(K[1]*255/100,K[2]*255/100,K[3]*255/100,K[4]):(K=x.exec(H))?bt(K[1],K[2]/100,K[3]/100,1):(K=E.exec(H))?bt(K[1],K[2]/100,K[3]/100,K[4]):k.hasOwnProperty(H)?X(k[H]):H==="transparent"?new ct(NaN,NaN,NaN,0):null}function X(H){return new ct(H>>16&255,H>>8&255,H&255,1)}function U(H,K,B,h){return h<=0&&(H=K=B=NaN),new ct(H,K,B,h)}function et(H){return H instanceof L||(H=W(H)),H?(H=H.rgb(),new ct(H.r,H.g,H.b,H.opacity)):new ct}function Q(H,K,B,h){return arguments.length===1?et(H):new ct(H,K,B,h==null?1:h)}function ct(H,K,B,h){this.r=+H,this.g=+K,this.b=+B,this.opacity=+h}(0,m.Z)(ct,Q,(0,m.l)(L,{brighter:function(H){return H=H==null?P:Math.pow(P,H),new ct(this.r*H,this.g*H,this.b*H,this.opacity)},darker:function(H){return H=H==null?I:Math.pow(I,H),new ct(this.r*H,this.g*H,this.b*H,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lt,formatHex:Lt,formatRgb:_t,toString:_t}));function Lt(){return"#"+yt(this.r)+yt(this.g)+yt(this.b)}function _t(){var H=this.opacity;return H=isNaN(H)?1:Math.max(0,Math.min(1,H)),(H===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(H===1?")":", "+H+")")}function yt(H){return H=Math.max(0,Math.min(255,Math.round(H)||0)),(H<16?"0":"")+H.toString(16)}function bt(H,K,B,h){return h<=0?H=K=B=NaN:B<=0||B>=1?H=K=NaN:K<=0&&(H=NaN),new Bt(H,K,B,h)}function Mt(H){if(H instanceof Bt)return new Bt(H.h,H.s,H.l,H.opacity);if(H instanceof L||(H=W(H)),!H)return new Bt;if(H instanceof Bt)return H;H=H.rgb();var K=H.r/255,B=H.g/255,h=H.b/255,mt=Math.min(K,B,h),gt=Math.max(K,B,h),Vt=NaN,Jt=gt-mt,zt=(gt+mt)/2;return Jt?(K===gt?Vt=(B-h)/Jt+(B<h)*6:B===gt?Vt=(h-K)/Jt+2:Vt=(K-B)/Jt+4,Jt/=zt<.5?gt+mt:2-gt-mt,Vt*=60):Jt=zt>0&&zt<1?0:Vt,new Bt(Vt,Jt,zt,H.opacity)}function xt(H,K,B,h){return arguments.length===1?Mt(H):new Bt(H,K,B,h==null?1:h)}function Bt(H,K,B,h){this.h=+H,this.s=+K,this.l=+B,this.opacity=+h}(0,m.Z)(Bt,xt,(0,m.l)(L,{brighter:function(H){return H=H==null?P:Math.pow(P,H),new Bt(this.h,this.s,this.l*H,this.opacity)},darker:function(H){return H=H==null?I:Math.pow(I,H),new Bt(this.h,this.s,this.l*H,this.opacity)},rgb:function(){var H=this.h%360+(this.h<0)*360,K=isNaN(H)||isNaN(this.s)?0:this.s,B=this.l,h=B+(B<.5?B:1-B)*K,mt=2*B-h;return new ct(wt(H>=240?H-240:H+120,mt,h),wt(H,mt,h),wt(H<120?H+240:H-120,mt,h),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var H=this.opacity;return H=isNaN(H)?1:Math.max(0,Math.min(1,H)),(H===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(H===1?")":", "+H+")")}}));function wt(H,K,B){return(H<60?K+(B-K)*H/60:H<180?B:H<240?K+(B-K)*(240-H)/60:K)*255}},68456:function(lt,S,d){"use strict";d.d(S,{Z:function(){return m},l:function(){return L}});function m(I,P,_){I.prototype=P.prototype=_,_.constructor=I}function L(I,P){var _=Object.create(I.prototype);for(var T in P)_[T]=P[T];return _}},32718:function(lt,S,d){"use strict";d.d(S,{yD:function(){return m},_e:function(){return L},tw:function(){return I}});function m(P){return P*P*P}function L(P){return--P*P*P+1}function I(P){return((P*=2)<=1?P*P*P:(P-=2)*P*P+2)/2}},99868:function(lt,S,d){"use strict";d.r(S),d.d(S,{easeBack:function(){return gt},easeBackIn:function(){return h},easeBackInOut:function(){return gt},easeBackOut:function(){return mt},easeBounce:function(){return H},easeBounceIn:function(){return wt},easeBounceInOut:function(){return K},easeBounceOut:function(){return H},easeCircle:function(){return U},easeCircleIn:function(){return W},easeCircleInOut:function(){return U},easeCircleOut:function(){return X},easeCubic:function(){return _.tw},easeCubicIn:function(){return _.yD},easeCubicInOut:function(){return _.tw},easeCubicOut:function(){return _._e},easeElastic:function(){return oe},easeElasticIn:function(){return Qt},easeElasticInOut:function(){return se},easeElasticOut:function(){return oe},easeExp:function(){return z},easeExpIn:function(){return D},easeExpInOut:function(){return z},easeExpOut:function(){return N},easeLinear:function(){return m},easePoly:function(){return p},easePolyIn:function(){return M},easePolyInOut:function(){return p},easePolyOut:function(){return A},easeQuad:function(){return P},easeQuadIn:function(){return L},easeQuadInOut:function(){return P},easeQuadOut:function(){return I},easeSin:function(){return E},easeSinIn:function(){return b},easeSinInOut:function(){return E},easeSinOut:function(){return x}});function m(jt){return+jt}function L(jt){return jt*jt}function I(jt){return jt*(2-jt)}function P(jt){return((jt*=2)<=1?jt*jt:--jt*(2-jt)+1)/2}var _=d(32718),T=3,M=function jt(Pt){Pt=+Pt;function pt(st){return Math.pow(st,Pt)}return pt.exponent=jt,pt}(T),A=function jt(Pt){Pt=+Pt;function pt(st){return 1-Math.pow(1-st,Pt)}return pt.exponent=jt,pt}(T),p=function jt(Pt){Pt=+Pt;function pt(st){return((st*=2)<=1?Math.pow(st,Pt):2-Math.pow(2-st,Pt))/2}return pt.exponent=jt,pt}(T),w=Math.PI,y=w/2;function b(jt){return+jt==1?1:1-Math.cos(jt*y)}function x(jt){return Math.sin(jt*y)}function E(jt){return(1-Math.cos(w*jt))/2}function k(jt){return(Math.pow(2,-10*jt)-.0009765625)*1.0009775171065494}function D(jt){return k(1-+jt)}function N(jt){return 1-k(jt)}function z(jt){return((jt*=2)<=1?k(1-jt):2-k(jt-1))/2}function W(jt){return 1-Math.sqrt(1-jt*jt)}function X(jt){return Math.sqrt(1- --jt*jt)}function U(jt){return((jt*=2)<=1?1-Math.sqrt(1-jt*jt):Math.sqrt(1-(jt-=2)*jt)+1)/2}var et=4/11,Q=6/11,ct=8/11,Lt=3/4,_t=9/11,yt=10/11,bt=15/16,Mt=21/22,xt=63/64,Bt=1/et/et;function wt(jt){return 1-H(1-jt)}function H(jt){return(jt=+jt)<et?Bt*jt*jt:jt<ct?Bt*(jt-=Q)*jt+Lt:jt<yt?Bt*(jt-=_t)*jt+bt:Bt*(jt-=Mt)*jt+xt}function K(jt){return((jt*=2)<=1?1-H(1-jt):H(jt-1)+1)/2}var B=1.70158,h=function jt(Pt){Pt=+Pt;function pt(st){return(st=+st)*st*(Pt*(st-1)+st)}return pt.overshoot=jt,pt}(B),mt=function jt(Pt){Pt=+Pt;function pt(st){return--st*st*((st+1)*Pt+st)+1}return pt.overshoot=jt,pt}(B),gt=function jt(Pt){Pt=+Pt;function pt(st){return((st*=2)<1?st*st*((Pt+1)*st-Pt):(st-=2)*st*((Pt+1)*st+Pt)+2)/2}return pt.overshoot=jt,pt}(B),Vt=2*Math.PI,Jt=1,zt=.3,Qt=function jt(Pt,pt){var st=Math.asin(1/(Pt=Math.max(1,Pt)))*(pt/=Vt);function Ct(nt){return Pt*k(- --nt)*Math.sin((st-nt)/pt)}return Ct.amplitude=function(nt){return jt(nt,pt*Vt)},Ct.period=function(nt){return jt(Pt,nt)},Ct}(Jt,zt),oe=function jt(Pt,pt){var st=Math.asin(1/(Pt=Math.max(1,Pt)))*(pt/=Vt);function Ct(nt){return 1-Pt*k(nt=+nt)*Math.sin((nt+st)/pt)}return Ct.amplitude=function(nt){return jt(nt,pt*Vt)},Ct.period=function(nt){return jt(Pt,nt)},Ct}(Jt,zt),se=function jt(Pt,pt){var st=Math.asin(1/(Pt=Math.max(1,Pt)))*(pt/=Vt);function Ct(nt){return((nt=nt*2-1)<0?Pt*k(-nt)*Math.sin((st-nt)/pt):2-Pt*k(nt)*Math.sin((st+nt)/pt))/2}return Ct.amplitude=function(nt){return jt(nt,pt*Vt)},Ct.period=function(nt){return jt(Pt,nt)},Ct}(Jt,zt)},39751:function(lt,S,d){"use strict";d.d(S,{Z:function(){return I},M:function(){return P}});var m=d(45257),L=d(82265);function I(_,T){return((0,L.v)(T)?L.Z:P)(_,T)}function P(_,T){var M=T?T.length:0,A=_?Math.min(M,_.length):0,p=new Array(A),w=new Array(M),y;for(y=0;y<A;++y)p[y]=(0,m.Z)(_[y],T[y]);for(;y<M;++y)w[y]=T[y];return function(b){for(y=0;y<A;++y)w[y]=p[y](b);return w}}},53254:function(lt,S,d){"use strict";d.d(S,{Z:function(){return m}});function m(L,I){return L=+L,I=+I,function(P){return L*(1-P)+I*P}}},82265:function(lt,S,d){"use strict";d.d(S,{Z:function(){return m},v:function(){return L}});function m(I,P){P||(P=[]);var _=I?Math.min(P.length,I.length):0,T=P.slice(),M;return function(A){for(M=0;M<_;++M)T[M]=I[M]*(1-A)+P[M]*A;return T}}function L(I){return ArrayBuffer.isView(I)&&!(I instanceof DataView)}},45257:function(lt,S,d){"use strict";d.d(S,{Z:function(){return Lt}});var m=d(78971);function L(_t,yt,bt,Mt,xt){var Bt=_t*_t,wt=Bt*_t;return((1-3*_t+3*Bt-wt)*yt+(4-6*Bt+3*wt)*bt+(1+3*_t+3*Bt-3*wt)*Mt+wt*xt)/6}function I(_t){var yt=_t.length-1;return function(bt){var Mt=bt<=0?bt=0:bt>=1?(bt=1,yt-1):Math.floor(bt*yt),xt=_t[Mt],Bt=_t[Mt+1],wt=Mt>0?_t[Mt-1]:2*xt-Bt,H=Mt<yt-1?_t[Mt+2]:2*Bt-xt;return L((bt-Mt/yt)*yt,wt,xt,Bt,H)}}function P(_t){var yt=_t.length;return function(bt){var Mt=Math.floor(((bt%=1)<0?++bt:bt)*yt),xt=_t[(Mt+yt-1)%yt],Bt=_t[Mt%yt],wt=_t[(Mt+1)%yt],H=_t[(Mt+2)%yt];return L((bt-Mt/yt)*yt,xt,Bt,wt,H)}}function _(_t){return function(){return _t}}function T(_t,yt){return function(bt){return _t+bt*yt}}function M(_t,yt,bt){return _t=Math.pow(_t,bt),yt=Math.pow(yt,bt)-_t,bt=1/bt,function(Mt){return Math.pow(_t+Mt*yt,bt)}}function A(_t,yt){var bt=yt-_t;return bt?T(_t,bt>180||bt<-180?bt-360*Math.round(bt/360):bt):constant(isNaN(_t)?yt:_t)}function p(_t){return(_t=+_t)==1?w:function(yt,bt){return bt-yt?M(yt,bt,_t):_(isNaN(yt)?bt:yt)}}function w(_t,yt){var bt=yt-_t;return bt?T(_t,bt):_(isNaN(_t)?yt:_t)}var y=function _t(yt){var bt=p(yt);function Mt(xt,Bt){var wt=bt((xt=(0,m.B8)(xt)).r,(Bt=(0,m.B8)(Bt)).r),H=bt(xt.g,Bt.g),K=bt(xt.b,Bt.b),B=w(xt.opacity,Bt.opacity);return function(h){return xt.r=wt(h),xt.g=H(h),xt.b=K(h),xt.opacity=B(h),xt+""}}return Mt.gamma=_t,Mt}(1);function b(_t){return function(yt){var bt=yt.length,Mt=new Array(bt),xt=new Array(bt),Bt=new Array(bt),wt,H;for(wt=0;wt<bt;++wt)H=(0,m.B8)(yt[wt]),Mt[wt]=H.r||0,xt[wt]=H.g||0,Bt[wt]=H.b||0;return Mt=_t(Mt),xt=_t(xt),Bt=_t(Bt),H.opacity=1,function(K){return H.r=Mt(K),H.g=xt(K),H.b=Bt(K),H+""}}}var x=b(I),E=b(P),k=d(39751);function D(_t,yt){var bt=new Date;return _t=+_t,yt=+yt,function(Mt){return bt.setTime(_t*(1-Mt)+yt*Mt),bt}}var N=d(53254);function z(_t,yt){var bt={},Mt={},xt;(_t===null||typeof _t!="object")&&(_t={}),(yt===null||typeof yt!="object")&&(yt={});for(xt in yt)xt in _t?bt[xt]=Lt(_t[xt],yt[xt]):Mt[xt]=yt[xt];return function(Bt){for(xt in bt)Mt[xt]=bt[xt](Bt);return Mt}}var W=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X=new RegExp(W.source,"g");function U(_t){return function(){return _t}}function et(_t){return function(yt){return _t(yt)+""}}function Q(_t,yt){var bt=W.lastIndex=X.lastIndex=0,Mt,xt,Bt,wt=-1,H=[],K=[];for(_t=_t+"",yt=yt+"";(Mt=W.exec(_t))&&(xt=X.exec(yt));)(Bt=xt.index)>bt&&(Bt=yt.slice(bt,Bt),H[wt]?H[wt]+=Bt:H[++wt]=Bt),(Mt=Mt[0])===(xt=xt[0])?H[wt]?H[wt]+=xt:H[++wt]=xt:(H[++wt]=null,K.push({i:wt,x:(0,N.Z)(Mt,xt)})),bt=X.lastIndex;return bt<yt.length&&(Bt=yt.slice(bt),H[wt]?H[wt]+=Bt:H[++wt]=Bt),H.length<2?K[0]?et(K[0].x):U(yt):(yt=K.length,function(B){for(var h=0,mt;h<yt;++h)H[(mt=K[h]).i]=mt.x(B);return H.join("")})}var ct=d(82265);function Lt(_t,yt){var bt=typeof yt,Mt;return yt==null||bt==="boolean"?_(yt):(bt==="number"?N.Z:bt==="string"?(Mt=(0,m.ZP)(yt))?(yt=Mt,y):Q:yt instanceof m.ZP?y:yt instanceof Date?D:(0,ct.v)(yt)?ct.Z:Array.isArray(yt)?k.M:typeof yt.valueOf!="function"&&typeof yt.toString!="function"||isNaN(yt)?z:N.Z)(_t,yt)}},94454:function(lt,S){(function(d,m){m(S)})(this,function(d){"use strict";function m(yt,bt){return L(yt)||I(yt,bt)||P()}function L(yt){if(Array.isArray(yt))return yt}function I(yt,bt){var Mt=[],xt=!0,Bt=!1,wt=void 0;try{for(var H=yt[Symbol.iterator](),K;!(xt=(K=H.next()).done)&&(Mt.push(K.value),!(bt&&Mt.length===bt));xt=!0);}catch(B){Bt=!0,wt=B}finally{try{!xt&&H.return!=null&&H.return()}finally{if(Bt)throw wt}}return Mt}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _(yt,bt,Mt,xt){yt=yt.filter(function(zt,Qt){var oe=bt(zt,Qt),se=Mt(zt,Qt);return oe!=null&&isFinite(oe)&&se!=null&&isFinite(se)}),xt&&yt.sort(function(zt,Qt){return bt(zt)-bt(Qt)});for(var Bt=yt.length,wt=new Float64Array(Bt),H=new Float64Array(Bt),K=0,B=0,h,mt,gt,Vt=0;Vt<Bt;)gt=yt[Vt],wt[Vt]=h=+bt(gt,Vt,yt),H[Vt]=mt=+Mt(gt,Vt,yt),++Vt,K+=(h-K)/Vt,B+=(mt-B)/Vt;for(var Jt=0;Jt<Bt;++Jt)wt[Jt]-=K,H[Jt]-=B;return[wt,H,K,B]}function T(yt,bt,Mt,xt){for(var Bt=0,wt=0,H=yt.length;wt<H;wt++){var K=yt[wt],B=+bt(K,wt,yt),h=+Mt(K,wt,yt);B!=null&&isFinite(B)&&h!=null&&isFinite(h)&&xt(B,h,Bt++)}}function M(yt,bt,Mt,xt,Bt){var wt=0,H=0;return T(yt,bt,Mt,function(K,B){var h=B-Bt(K),mt=B-xt;wt+=h*h,H+=mt*mt}),1-wt/H}function A(yt){return Math.atan2(yt[1][1]-yt[0][1],yt[1][0]-yt[0][0])*180/Math.PI}function p(yt){return[(yt[0][0]+yt[1][0])/2,(yt[0][1]+yt[1][1])/2]}function w(yt,bt,Mt){for(var xt=Math.log(bt-yt)*Math.LOG10E+1|0,Bt=1*Math.pow(10,-xt/2-1),wt=1e4,H=[B(yt),B(bt)],K=0;h(H)&&K<wt;);return H;function B(mt){return[mt,Mt(mt)]}function h(mt){K++;for(var gt=mt.length,Vt=!1,Jt=0;Jt<gt-1;Jt++){var zt=mt[Jt],Qt=mt[Jt+1],oe=p([zt,Qt]),se=B(oe[0]),jt=A([zt,oe]),Pt=A([zt,se]),pt=Math.abs(jt-Pt);pt>Bt&&(mt.splice(Jt+1,0,se),Vt=!0)}return Vt}}function y(yt,bt,Mt,xt){var Bt=xt-yt*yt,wt=Math.abs(Bt)<1e-24?0:(Mt-yt*bt)/Bt,H=bt-wt*yt;return[H,wt]}function b(){var yt=function(wt){return wt[0]},bt=function(wt){return wt[1]},Mt;function xt(Bt){var wt=0,H=0,K=0,B=0,h=0,mt=0,gt=Mt?+Mt[0]:Infinity,Vt=Mt?+Mt[1]:-Infinity;T(Bt,yt,bt,function(Pt,pt){var st=Math.log(pt),Ct=Pt*pt;++wt,H+=(pt-H)/wt,B+=(Ct-B)/wt,mt+=(Pt*Ct-mt)/wt,K+=(pt*st-K)/wt,h+=(Ct*st-h)/wt,Mt||(Pt<gt&&(gt=Pt),Pt>Vt&&(Vt=Pt))});var Jt=y(B/H,K/H,h/H,mt/H),zt=m(Jt,2),Qt=zt[0],oe=zt[1];Qt=Math.exp(Qt);var se=function(pt){return Qt*Math.exp(oe*pt)},jt=w(gt,Vt,se);return jt.a=Qt,jt.b=oe,jt.predict=se,jt.rSquared=M(Bt,yt,bt,H,se),jt}return xt.domain=function(Bt){return arguments.length?(Mt=Bt,xt):Mt},xt.x=function(Bt){return arguments.length?(yt=Bt,xt):yt},xt.y=function(Bt){return arguments.length?(bt=Bt,xt):bt},xt}function x(){var yt=function(wt){return wt[0]},bt=function(wt){return wt[1]},Mt;function xt(Bt){var wt=0,H=0,K=0,B=0,h=0,mt=Mt?+Mt[0]:Infinity,gt=Mt?+Mt[1]:-Infinity;T(Bt,yt,bt,function(jt,Pt){++wt,H+=(jt-H)/wt,K+=(Pt-K)/wt,B+=(jt*Pt-B)/wt,h+=(jt*jt-h)/wt,Mt||(jt<mt&&(mt=jt),jt>gt&&(gt=jt))});var Vt=y(H,K,B,h),Jt=m(Vt,2),zt=Jt[0],Qt=Jt[1],oe=function(Pt){return Qt*Pt+zt},se=[[mt,oe(mt)],[gt,oe(gt)]];return se.a=Qt,se.b=zt,se.predict=oe,se.rSquared=M(Bt,yt,bt,K,oe),se}return xt.domain=function(Bt){return arguments.length?(Mt=Bt,xt):Mt},xt.x=function(Bt){return arguments.length?(yt=Bt,xt):yt},xt.y=function(Bt){return arguments.length?(bt=Bt,xt):bt},xt}function E(yt){yt.sort(function(Mt,xt){return Mt-xt});var bt=yt.length/2;return bt%1==0?(yt[bt-1]+yt[bt])/2:yt[Math.floor(bt)]}var k=2,D=1e-12;function N(){var yt=function(wt){return wt[0]},bt=function(wt){return wt[1]},Mt=.3;function xt(Bt){for(var wt=_(Bt,yt,bt,!0),H=m(wt,4),K=H[0],B=H[1],h=H[2],mt=H[3],gt=K.length,Vt=Math.max(2,~~(Mt*gt)),Jt=new Float64Array(gt),zt=new Float64Array(gt),Qt=new Float64Array(gt).fill(1),oe=-1;++oe<=k;){for(var se=[0,Vt-1],jt=0;jt<gt;++jt){for(var Pt=K[jt],pt=se[0],st=se[1],Ct=Pt-K[pt]>K[st]-Pt?pt:st,nt=0,J=0,vt=0,Tt=0,Ht=0,ue=1/Math.abs(K[Ct]-Pt||1),Ce=pt;Ce<=st;++Ce){var Fe=K[Ce],Ve=B[Ce],dr=z(Math.abs(Pt-Fe)*ue)*Qt[Ce],xr=Fe*dr;nt+=dr,J+=xr,vt+=Ve*dr,Tt+=Ve*xr,Ht+=Fe*xr}var Er=y(J/nt,vt/nt,Tt/nt,Ht/nt),Yr=m(Er,2),gr=Yr[0],ri=Yr[1];Jt[jt]=gr+ri*Pt,zt[jt]=Math.abs(B[jt]-Jt[jt]),W(K,jt+1,se)}if(oe===k)break;var bi=E(zt);if(Math.abs(bi)<D)break;for(var Qr=0,gi,hn;Qr<gt;++Qr)gi=zt[Qr]/(6*bi),Qt[Qr]=gi>=1?D:(hn=1-gi*gi)*hn}return X(K,Jt,h,mt)}return xt.bandwidth=function(Bt){return arguments.length?(Mt=Bt,xt):Mt},xt.x=function(Bt){return arguments.length?(yt=Bt,xt):yt},xt.y=function(Bt){return arguments.length?(bt=Bt,xt):bt},xt}function z(yt){return(yt=1-yt*yt*yt)*yt*yt}function W(yt,bt,Mt){var xt=yt[bt],Bt=Mt[0],wt=Mt[1]+1;if(!(wt>=yt.length))for(;bt>Bt&&yt[wt]-xt<=xt-yt[Bt];)Mt[0]=++Bt,Mt[1]=wt,++wt}function X(yt,bt,Mt,xt){for(var Bt=yt.length,wt=[],H=0,K=0,B=[],h;H<Bt;++H)h=yt[H]+Mt,B[0]===h?B[1]+=(bt[H]-B[1])/++K:(K=0,B[1]+=xt,B=[h,bt[H]],wt.push(B));return B[1]+=xt,wt}function U(){var yt=function(H){return H[0]},bt=function(H){return H[1]},Mt=Math.E,xt;function Bt(wt){var H=0,K=0,B=0,h=0,mt=0,gt=xt?+xt[0]:Infinity,Vt=xt?+xt[1]:-Infinity,Jt=Math.log(Mt);T(wt,yt,bt,function(pt,st){var Ct=Math.log(pt)/Jt;++H,K+=(Ct-K)/H,B+=(st-B)/H,h+=(Ct*st-h)/H,mt+=(Ct*Ct-mt)/H,xt||(pt<gt&&(gt=pt),pt>Vt&&(Vt=pt))});var zt=y(K,B,h,mt),Qt=m(zt,2),oe=Qt[0],se=Qt[1],jt=function(st){return se*Math.log(st)/Jt+oe},Pt=w(gt,Vt,jt);return Pt.a=se,Pt.b=oe,Pt.predict=jt,Pt.rSquared=M(wt,yt,bt,B,jt),Pt}return Bt.domain=function(wt){return arguments.length?(xt=wt,Bt):xt},Bt.x=function(wt){return arguments.length?(yt=wt,Bt):yt},Bt.y=function(wt){return arguments.length?(bt=wt,Bt):bt},Bt.base=function(wt){return arguments.length?(Mt=wt,Bt):Mt},Bt}function et(){var yt=function(wt){return wt[0]},bt=function(wt){return wt[1]},Mt;function xt(Bt){var wt=_(Bt,yt,bt),H=m(wt,4),K=H[0],B=H[1],h=H[2],mt=H[3],gt=K.length,Vt=0,Jt=0,zt=0,Qt=0,oe=0,se,jt,Pt,pt;for(se=0;se<gt;)jt=K[se],Pt=B[se++],pt=jt*jt,Vt+=(pt-Vt)/se,Jt+=(pt*jt-Jt)/se,zt+=(pt*pt-zt)/se,Qt+=(jt*Pt-Qt)/se,oe+=(pt*Pt-oe)/se;var st=0,Ct=0,nt=Mt?+Mt[0]:Infinity,J=Mt?+Mt[1]:-Infinity;T(Bt,yt,bt,function(dr,xr){Ct++,st+=(xr-st)/Ct,Mt||(dr<nt&&(nt=dr),dr>J&&(J=dr))});var vt=zt-Vt*Vt,Tt=Vt*vt-Jt*Jt,Ht=(oe*Vt-Qt*Jt)/Tt,ue=(Qt*vt-oe*Jt)/Tt,Ce=-Ht*Vt,Fe=function(xr){return xr=xr-h,Ht*xr*xr+ue*xr+Ce+mt},Ve=w(nt,J,Fe);return Ve.a=Ht,Ve.b=ue-2*Ht*h,Ve.c=Ce-ue*h+Ht*h*h+mt,Ve.predict=Fe,Ve.rSquared=M(Bt,yt,bt,st,Fe),Ve}return xt.domain=function(Bt){return arguments.length?(Mt=Bt,xt):Mt},xt.x=function(Bt){return arguments.length?(yt=Bt,xt):yt},xt.y=function(Bt){return arguments.length?(bt=Bt,xt):bt},xt}function Q(){var yt=function(H){return H[0]},bt=function(H){return H[1]},Mt=3,xt;function Bt(wt){if(Mt===1){var H=x().x(yt).y(bt).domain(xt)(wt);return H.coefficients=[H.b,H.a],delete H.a,delete H.b,H}if(Mt===2){var K=et().x(yt).y(bt).domain(xt)(wt);return K.coefficients=[K.c,K.b,K.a],delete K.a,delete K.b,delete K.c,K}var B=_(wt,yt,bt),h=m(B,4),mt=h[0],gt=h[1],Vt=h[2],Jt=h[3],zt=mt.length,Qt=[],oe=[],se=Mt+1,jt=0,Pt=0,pt=xt?+xt[0]:Infinity,st=xt?+xt[1]:-Infinity;T(wt,yt,bt,function(Fe,Ve){++Pt,jt+=(Ve-jt)/Pt,xt||(Fe<pt&&(pt=Fe),Fe>st&&(st=Fe))});var Ct,nt,J,vt,Tt;for(Ct=0;Ct<se;++Ct){for(J=0,vt=0;J<zt;++J)vt+=Math.pow(mt[J],Ct)*gt[J];for(Qt.push(vt),Tt=new Float64Array(se),nt=0;nt<se;++nt){for(J=0,vt=0;J<zt;++J)vt+=Math.pow(mt[J],Ct+nt);Tt[nt]=vt}oe.push(Tt)}oe.push(Qt);var Ht=Lt(oe),ue=function(Ve){Ve-=Vt;var dr=Jt+Ht[0]+Ht[1]*Ve+Ht[2]*Ve*Ve;for(Ct=3;Ct<se;++Ct)dr+=Ht[Ct]*Math.pow(Ve,Ct);return dr},Ce=w(pt,st,ue);return Ce.coefficients=ct(se,Ht,-Vt,Jt),Ce.predict=ue,Ce.rSquared=M(wt,yt,bt,jt,ue),Ce}return Bt.domain=function(wt){return arguments.length?(xt=wt,Bt):xt},Bt.x=function(wt){return arguments.length?(yt=wt,Bt):yt},Bt.y=function(wt){return arguments.length?(bt=wt,Bt):bt},Bt.order=function(wt){return arguments.length?(Mt=wt,Bt):Mt},Bt}function ct(yt,bt,Mt,xt){var Bt=Array(yt),wt,H,K,B;for(wt=0;wt<yt;++wt)Bt[wt]=0;for(wt=yt-1;wt>=0;--wt)for(K=bt[wt],B=1,Bt[wt]+=K,H=1;H<=wt;++H)B*=(wt+1-H)/H,Bt[wt-H]+=K*Math.pow(Mt,H)*B;return Bt[0]+=xt,Bt}function Lt(yt){var bt=yt.length-1,Mt=[],xt,Bt,wt,H,K;for(xt=0;xt<bt;++xt){for(H=xt,Bt=xt+1;Bt<bt;++Bt)Math.abs(yt[xt][Bt])>Math.abs(yt[xt][H])&&(H=Bt);for(wt=xt;wt<bt+1;++wt)K=yt[wt][xt],yt[wt][xt]=yt[wt][H],yt[wt][H]=K;for(Bt=xt+1;Bt<bt;++Bt)for(wt=bt;wt>=xt;wt--)yt[wt][Bt]-=yt[wt][xt]*yt[xt][Bt]/yt[xt][xt]}for(Bt=bt-1;Bt>=0;--Bt){for(K=0,wt=Bt+1;wt<bt;++wt)K+=yt[wt][Bt]*Mt[wt];Mt[Bt]=(yt[bt][Bt]-K)/yt[Bt][Bt]}return Mt}function _t(){var yt=function(wt){return wt[0]},bt=function(wt){return wt[1]},Mt;function xt(Bt){var wt=0,H=0,K=0,B=0,h=0,mt=0,gt=Mt?+Mt[0]:Infinity,Vt=Mt?+Mt[1]:-Infinity;T(Bt,yt,bt,function(Pt,pt){var st=Math.log(Pt),Ct=Math.log(pt);++wt,H+=(st-H)/wt,K+=(Ct-K)/wt,B+=(st*Ct-B)/wt,h+=(st*st-h)/wt,mt+=(pt-mt)/wt,Mt||(Pt<gt&&(gt=Pt),Pt>Vt&&(Vt=Pt))});var Jt=y(H,K,B,h),zt=m(Jt,2),Qt=zt[0],oe=zt[1];Qt=Math.exp(Qt);var se=function(pt){return Qt*Math.pow(pt,oe)},jt=w(gt,Vt,se);return jt.a=Qt,jt.b=oe,jt.predict=se,jt.rSquared=M(Bt,yt,bt,mt,se),jt}return xt.domain=function(Bt){return arguments.length?(Mt=Bt,xt):Mt},xt.x=function(Bt){return arguments.length?(yt=Bt,xt):yt},xt.y=function(Bt){return arguments.length?(bt=Bt,xt):bt},xt}d.regressionExp=b,d.regressionLinear=x,d.regressionLoess=N,d.regressionLog=U,d.regressionPoly=Q,d.regressionPow=_t,d.regressionQuad=et,Object.defineProperty(d,"__esModule",{value:!0})})},7802:function(lt,S,d){"use strict";d.d(S,{HT:function(){return k}});var m=0,L=0,I=0,P=1e3,_,T,M=0,A=0,p=0,w=typeof performance=="object"&&performance.now?performance:Date,y=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(U){setTimeout(U,17)};function b(){return A||(y(x),A=w.now()+p)}function x(){A=0}function E(){this._call=this._time=this._next=null}E.prototype=k.prototype={constructor:E,restart:function(U,et,Q){if(typeof U!="function")throw new TypeError("callback is not a function");Q=(Q==null?b():+Q)+(et==null?0:+et),!this._next&&T!==this&&(T?T._next=this:_=this,T=this),this._call=U,this._time=Q,X()},stop:function(){this._call&&(this._call=null,this._time=Infinity,X())}};function k(U,et,Q){var ct=new E;return ct.restart(U,et,Q),ct}function D(){b(),++m;for(var U=_,et;U;)(et=A-U._time)>=0&&U._call.call(null,et),U=U._next;--m}function N(){A=(M=w.now())+p,m=L=0;try{D()}finally{m=0,W(),A=0}}function z(){var U=w.now(),et=U-M;et>P&&(p-=et,M=U)}function W(){for(var U,et=_,Q,ct=Infinity;et;)et._call?(ct>et._time&&(ct=et._time),U=et,et=et._next):(Q=et._next,et._next=null,et=U?U._next=Q:_=Q);T=U,X(ct)}function X(U){if(!m){L&&(L=clearTimeout(L));var et=U-A;et>24?(U<Infinity&&(L=setTimeout(N,U-w.now()-p)),I&&(I=clearInterval(I))):(I||(M=w.now(),I=setInterval(z,P)),m=1,y(N))}}},92546:function(lt,S,d){lt.exports={graphlib:d(76626),layout:d(47194),debug:d(11303),util:{time:d(53063).time,notime:d(53063).notime},version:d(11897)}},81255:function(lt,S,d){"use strict";var m=d(72361),L=d(39240);lt.exports={run:I,undo:_};function I(T){var M=T.graph().acyclicer==="greedy"?L(T,A(T)):P(T);m.forEach(M,function(p){var w=T.edge(p);T.removeEdge(p),w.forwardName=p.name,w.reversed=!0,T.setEdge(p.w,p.v,w,m.uniqueId("rev"))});function A(p){return function(w){return p.edge(w).weight}}}function P(T){var M=[],A={},p={};function w(y){m.has(p,y)||(p[y]=!0,A[y]=!0,m.forEach(T.outEdges(y),function(b){m.has(A,b.w)?M.push(b):w(b.w)}),delete A[y])}return m.forEach(T.nodes(),w),M}function _(T){m.forEach(T.edges(),function(M){var A=T.edge(M);if(A.reversed){T.removeEdge(M);var p=A.forwardName;delete A.reversed,delete A.forwardName,T.setEdge(M.w,M.v,A,p)}})}},60765:function(lt,S,d){var m=d(72361),L=d(53063);lt.exports=I;function I(_){function T(M){var A=_.children(M),p=_.node(M);if(A.length&&m.forEach(A,T),m.has(p,"minRank")){p.borderLeft=[],p.borderRight=[];for(var w=p.minRank,y=p.maxRank+1;w<y;++w)P(_,"borderLeft","_bl",M,p,w),P(_,"borderRight","_br",M,p,w)}}m.forEach(_.children(),T)}function P(_,T,M,A,p,w){var y={width:0,height:0,rank:w,borderType:T},b=p[T][w-1],x=L.addDummyNode(_,"border",y,M);p[T][w]=x,_.setParent(x,A),b&&_.setEdge(b,x,{weight:1})}},13257:function(lt,S,d){"use strict";var m=d(72361);lt.exports={adjust:L,undo:I};function L(w){var y=w.graph().rankdir.toLowerCase();(y==="lr"||y==="rl")&&P(w)}function I(w){var y=w.graph().rankdir.toLowerCase();(y==="bt"||y==="rl")&&T(w),(y==="lr"||y==="rl")&&(A(w),P(w))}function P(w){m.forEach(w.nodes(),function(y){_(w.node(y))}),m.forEach(w.edges(),function(y){_(w.edge(y))})}function _(w){var y=w.width;w.width=w.height,w.height=y}function T(w){m.forEach(w.nodes(),function(y){M(w.node(y))}),m.forEach(w.edges(),function(y){var b=w.edge(y);m.forEach(b.points,M),m.has(b,"y")&&M(b)})}function M(w){w.y=-w.y}function A(w){m.forEach(w.nodes(),function(y){p(w.node(y))}),m.forEach(w.edges(),function(y){var b=w.edge(y);m.forEach(b.points,p),m.has(b,"x")&&p(b)})}function p(w){var y=w.x;w.x=w.y,w.y=y}},21135:function(lt){lt.exports=S;function S(){var L={};L._next=L._prev=L,this._sentinel=L}S.prototype.dequeue=function(){var L=this._sentinel,I=L._prev;if(I!==L)return d(I),I},S.prototype.enqueue=function(L){var I=this._sentinel;L._prev&&L._next&&d(L),L._next=I._next,I._next._prev=L,I._next=L,L._prev=I},S.prototype.toString=function(){for(var L=[],I=this._sentinel,P=I._prev;P!==I;)L.push(JSON.stringify(P,m)),P=P._prev;return"["+L.join(", ")+"]"};function d(L){L._prev._next=L._next,L._next._prev=L._prev,delete L._next,delete L._prev}function m(L,I){if(L!=="_next"&&L!=="_prev")return I}},11303:function(lt,S,d){var m=d(72361),L=d(53063),I=d(76626).Graph;lt.exports={debugOrdering:P};function P(_){var T=L.buildLayerMatrix(_),M=new I({compound:!0,multigraph:!0}).setGraph({});return m.forEach(_.nodes(),function(A){M.setNode(A,{label:A}),M.setParent(A,"layer"+_.node(A).rank)}),m.forEach(_.edges(),function(A){M.setEdge(A.v,A.w,{},A.name)}),m.forEach(T,function(A,p){var w="layer"+p;M.setNode(w,{rank:"same"}),m.reduce(A,function(y,b){return M.setEdge(y,b,{style:"invis"}),b})}),M}},76626:function(lt,S,d){var m;try{m=d(75172)}catch(L){}m||(m=window.graphlib),lt.exports=m},39240:function(lt,S,d){var m=d(72361),L=d(76626).Graph,I=d(21135);lt.exports=_;var P=m.constant(1);function _(w,y){if(w.nodeCount()<=1)return[];var b=A(w,y||P),x=T(b.graph,b.buckets,b.zeroIdx);return m.flatten(m.map(x,function(E){return w.outEdges(E.v,E.w)}),!0)}function T(w,y,b){for(var x=[],E=y[y.length-1],k=y[0],D;w.nodeCount();){for(;D=k.dequeue();)M(w,y,b,D);for(;D=E.dequeue();)M(w,y,b,D);if(w.nodeCount()){for(var N=y.length-2;N>0;--N)if(D=y[N].dequeue(),D){x=x.concat(M(w,y,b,D,!0));break}}}return x}function M(w,y,b,x,E){var k=E?[]:void 0;return m.forEach(w.inEdges(x.v),function(D){var N=w.edge(D),z=w.node(D.v);E&&k.push({v:D.v,w:D.w}),z.out-=N,p(y,b,z)}),m.forEach(w.outEdges(x.v),function(D){var N=w.edge(D),z=D.w,W=w.node(z);W.in-=N,p(y,b,W)}),w.removeNode(x.v),k}function A(w,y){var b=new L,x=0,E=0;m.forEach(w.nodes(),function(N){b.setNode(N,{v:N,in:0,out:0})}),m.forEach(w.edges(),function(N){var z=b.edge(N.v,N.w)||0,W=y(N),X=z+W;b.setEdge(N.v,N.w,X),E=Math.max(E,b.node(N.v).out+=W),x=Math.max(x,b.node(N.w).in+=W)});var k=m.range(E+x+3).map(function(){return new I}),D=x+1;return m.forEach(b.nodes(),function(N){p(k,D,b.node(N))}),{graph:b,buckets:k,zeroIdx:D}}function p(w,y,b){b.out?b.in?w[b.out-b.in+y].enqueue(b):w[w.length-1].enqueue(b):w[0].enqueue(b)}},47194:function(lt,S,d){"use strict";var m=d(72361),L=d(81255),I=d(27163),P=d(64505),_=d(53063).normalizeRanks,T=d(71970),M=d(53063).removeEmptyRanks,A=d(31733),p=d(60765),w=d(13257),y=d(62852),b=d(93021),x=d(53063),E=d(76626).Graph;lt.exports=k;function k(zt,Qt){var oe=Qt&&Qt.debugTiming?x.time:x.notime;oe("layout",function(){var se=oe("  buildLayoutGraph",function(){return _t(zt)});oe("  runLayout",function(){D(se,oe)}),oe("  updateInputGraph",function(){N(zt,se)})})}function D(zt,Qt){Qt("    makeSpaceForEdgeLabels",function(){yt(zt)}),Qt("    removeSelfEdges",function(){h(zt)}),Qt("    acyclic",function(){L.run(zt)}),Qt("    nestingGraph.run",function(){A.run(zt)}),Qt("    rank",function(){P(x.asNonCompoundGraph(zt))}),Qt("    injectEdgeLabelProxies",function(){bt(zt)}),Qt("    removeEmptyRanks",function(){M(zt)}),Qt("    nestingGraph.cleanup",function(){A.cleanup(zt)}),Qt("    normalizeRanks",function(){_(zt)}),Qt("    assignRankMinMax",function(){Mt(zt)}),Qt("    removeEdgeLabelProxies",function(){xt(zt)}),Qt("    normalize.run",function(){I.run(zt)}),Qt("    parentDummyChains",function(){T(zt)}),Qt("    addBorderSegments",function(){p(zt)}),Qt("    order",function(){y(zt)}),Qt("    insertSelfEdges",function(){mt(zt)}),Qt("    adjustCoordinateSystem",function(){w.adjust(zt)}),Qt("    position",function(){b(zt)}),Qt("    positionSelfEdges",function(){gt(zt)}),Qt("    removeBorderNodes",function(){B(zt)}),Qt("    normalize.undo",function(){I.undo(zt)}),Qt("    fixupEdgeLabelCoords",function(){H(zt)}),Qt("    undoCoordinateSystem",function(){w.undo(zt)}),Qt("    translateGraph",function(){Bt(zt)}),Qt("    assignNodeIntersects",function(){wt(zt)}),Qt("    reversePoints",function(){K(zt)}),Qt("    acyclic.undo",function(){L.undo(zt)})}function N(zt,Qt){m.forEach(zt.nodes(),function(oe){var se=zt.node(oe),jt=Qt.node(oe);se&&(se.x=jt.x,se.y=jt.y,Qt.children(oe).length&&(se.width=jt.width,se.height=jt.height))}),m.forEach(zt.edges(),function(oe){var se=zt.edge(oe),jt=Qt.edge(oe);se.points=jt.points,m.has(jt,"x")&&(se.x=jt.x,se.y=jt.y)}),zt.graph().width=Qt.graph().width,zt.graph().height=Qt.graph().height}var z=["nodesep","edgesep","ranksep","marginx","marginy"],W={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},X=["acyclicer","ranker","rankdir","align"],U=["width","height"],et={width:0,height:0},Q=["minlen","weight","width","height","labeloffset"],ct={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Lt=["labelpos"];function _t(zt){var Qt=new E({multigraph:!0,compound:!0}),oe=Jt(zt.graph());return Qt.setGraph(m.merge({},W,Vt(oe,z),m.pick(oe,X))),m.forEach(zt.nodes(),function(se){var jt=Jt(zt.node(se));Qt.setNode(se,m.defaults(Vt(jt,U),et)),Qt.setParent(se,zt.parent(se))}),m.forEach(zt.edges(),function(se){var jt=Jt(zt.edge(se));Qt.setEdge(se,m.merge({},ct,Vt(jt,Q),m.pick(jt,Lt)))}),Qt}function yt(zt){var Qt=zt.graph();Qt.ranksep/=2,m.forEach(zt.edges(),function(oe){var se=zt.edge(oe);se.minlen*=2,se.labelpos.toLowerCase()!=="c"&&(Qt.rankdir==="TB"||Qt.rankdir==="BT"?se.width+=se.labeloffset:se.height+=se.labeloffset)})}function bt(zt){m.forEach(zt.edges(),function(Qt){var oe=zt.edge(Qt);if(oe.width&&oe.height){var se=zt.node(Qt.v),jt=zt.node(Qt.w),Pt={rank:(jt.rank-se.rank)/2+se.rank,e:Qt};x.addDummyNode(zt,"edge-proxy",Pt,"_ep")}})}function Mt(zt){var Qt=0;m.forEach(zt.nodes(),function(oe){var se=zt.node(oe);se.borderTop&&(se.minRank=zt.node(se.borderTop).rank,se.maxRank=zt.node(se.borderBottom).rank,Qt=m.max(Qt,se.maxRank))}),zt.graph().maxRank=Qt}function xt(zt){m.forEach(zt.nodes(),function(Qt){var oe=zt.node(Qt);oe.dummy==="edge-proxy"&&(zt.edge(oe.e).labelRank=oe.rank,zt.removeNode(Qt))})}function Bt(zt){var Qt=Number.POSITIVE_INFINITY,oe=0,se=Number.POSITIVE_INFINITY,jt=0,Pt=zt.graph(),pt=Pt.marginx||0,st=Pt.marginy||0;function Ct(nt){var J=nt.x,vt=nt.y,Tt=nt.width,Ht=nt.height;Qt=Math.min(Qt,J-Tt/2),oe=Math.max(oe,J+Tt/2),se=Math.min(se,vt-Ht/2),jt=Math.max(jt,vt+Ht/2)}m.forEach(zt.nodes(),function(nt){Ct(zt.node(nt))}),m.forEach(zt.edges(),function(nt){var J=zt.edge(nt);m.has(J,"x")&&Ct(J)}),Qt-=pt,se-=st,m.forEach(zt.nodes(),function(nt){var J=zt.node(nt);J.x-=Qt,J.y-=se}),m.forEach(zt.edges(),function(nt){var J=zt.edge(nt);m.forEach(J.points,function(vt){vt.x-=Qt,vt.y-=se}),m.has(J,"x")&&(J.x-=Qt),m.has(J,"y")&&(J.y-=se)}),Pt.width=oe-Qt+pt,Pt.height=jt-se+st}function wt(zt){m.forEach(zt.edges(),function(Qt){var oe=zt.edge(Qt),se=zt.node(Qt.v),jt=zt.node(Qt.w),Pt,pt;oe.points?(Pt=oe.points[0],pt=oe.points[oe.points.length-1]):(oe.points=[],Pt=jt,pt=se),oe.points.unshift(x.intersectRect(se,Pt)),oe.points.push(x.intersectRect(jt,pt))})}function H(zt){m.forEach(zt.edges(),function(Qt){var oe=zt.edge(Qt);if(m.has(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function K(zt){m.forEach(zt.edges(),function(Qt){var oe=zt.edge(Qt);oe.reversed&&oe.points.reverse()})}function B(zt){m.forEach(zt.nodes(),function(Qt){if(zt.children(Qt).length){var oe=zt.node(Qt),se=zt.node(oe.borderTop),jt=zt.node(oe.borderBottom),Pt=zt.node(m.last(oe.borderLeft)),pt=zt.node(m.last(oe.borderRight));oe.width=Math.abs(pt.x-Pt.x),oe.height=Math.abs(jt.y-se.y),oe.x=Pt.x+oe.width/2,oe.y=se.y+oe.height/2}}),m.forEach(zt.nodes(),function(Qt){zt.node(Qt).dummy==="border"&&zt.removeNode(Qt)})}function h(zt){m.forEach(zt.edges(),function(Qt){if(Qt.v===Qt.w){var oe=zt.node(Qt.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:Qt,label:zt.edge(Qt)}),zt.removeEdge(Qt)}})}function mt(zt){var Qt=x.buildLayerMatrix(zt);m.forEach(Qt,function(oe){var se=0;m.forEach(oe,function(jt,Pt){var pt=zt.node(jt);pt.order=Pt+se,m.forEach(pt.selfEdges,function(st){x.addDummyNode(zt,"selfedge",{width:st.label.width,height:st.label.height,rank:pt.rank,order:Pt+ ++se,e:st.e,label:st.label},"_se")}),delete pt.selfEdges})})}function gt(zt){m.forEach(zt.nodes(),function(Qt){var oe=zt.node(Qt);if(oe.dummy==="selfedge"){var se=zt.node(oe.e.v),jt=se.x+se.width/2,Pt=se.y,pt=oe.x-jt,st=se.height/2;zt.setEdge(oe.e,oe.label),zt.removeNode(Qt),oe.label.points=[{x:jt+2*pt/3,y:Pt-st},{x:jt+5*pt/6,y:Pt-st},{x:jt+pt,y:Pt},{x:jt+5*pt/6,y:Pt+st},{x:jt+2*pt/3,y:Pt+st}],oe.label.x=oe.x,oe.label.y=oe.y}})}function Vt(zt,Qt){return m.mapValues(m.pick(zt,Qt),Number)}function Jt(zt){var Qt={};return m.forEach(zt,function(oe,se){Qt[se.toLowerCase()]=oe}),Qt}},72361:function(lt,S,d){var m;try{m={cloneDeep:d(20250),constant:d(13503),defaults:d(28548),each:d(76934),filter:d(64725),find:d(79785),flatten:d(40151),forEach:d(99204),forIn:d(23190),has:d(99946),isUndefined:d(16513),last:d(10611),map:d(9924),mapValues:d(70642),max:d(95987),merge:d(28440),min:d(73376),minBy:d(83296),now:d(5795),pick:d(89409),range:d(60859),reduce:d(16473),sortBy:d(351),uniqueId:d(95708),values:d(81229),zipObject:d(65441)}}catch(L){}m||(m=window._),lt.exports=m},31733:function(lt,S,d){var m=d(72361),L=d(53063);lt.exports={run:I,cleanup:M};function I(A){var p=L.addDummyNode(A,"root",{},"_root"),w=_(A),y=m.max(m.values(w))-1,b=2*y+1;A.graph().nestingRoot=p,m.forEach(A.edges(),function(E){A.edge(E).minlen*=b});var x=T(A)+1;m.forEach(A.children(),function(E){P(A,p,b,x,y,w,E)}),A.graph().nodeRankFactor=b}function P(A,p,w,y,b,x,E){var k=A.children(E);if(!k.length){E!==p&&A.setEdge(p,E,{weight:0,minlen:w});return}var D=L.addBorderNode(A,"_bt"),N=L.addBorderNode(A,"_bb"),z=A.node(E);A.setParent(D,E),z.borderTop=D,A.setParent(N,E),z.borderBottom=N,m.forEach(k,function(W){P(A,p,w,y,b,x,W);var X=A.node(W),U=X.borderTop?X.borderTop:W,et=X.borderBottom?X.borderBottom:W,Q=X.borderTop?y:2*y,ct=U!==et?1:b-x[E]+1;A.setEdge(D,U,{weight:Q,minlen:ct,nestingEdge:!0}),A.setEdge(et,N,{weight:Q,minlen:ct,nestingEdge:!0})}),A.parent(E)||A.setEdge(p,D,{weight:0,minlen:b+x[E]})}function _(A){var p={};function w(y,b){var x=A.children(y);x&&x.length&&m.forEach(x,function(E){w(E,b+1)}),p[y]=b}return m.forEach(A.children(),function(y){w(y,1)}),p}function T(A){return m.reduce(A.edges(),function(p,w){return p+A.edge(w).weight},0)}function M(A){var p=A.graph();A.removeNode(p.nestingRoot),delete p.nestingRoot,m.forEach(A.edges(),function(w){var y=A.edge(w);y.nestingEdge&&A.removeEdge(w)})}},27163:function(lt,S,d){"use strict";var m=d(72361),L=d(53063);lt.exports={run:I,undo:_};function I(T){T.graph().dummyChains=[],m.forEach(T.edges(),function(M){P(T,M)})}function P(T,M){var A=M.v,p=T.node(A).rank,w=M.w,y=T.node(w).rank,b=M.name,x=T.edge(M),E=x.labelRank;if(y!==p+1){T.removeEdge(M);var k,D,N;for(N=0,++p;p<y;++N,++p)x.points=[],D={width:0,height:0,edgeLabel:x,edgeObj:M,rank:p},k=L.addDummyNode(T,"edge",D,"_d"),p===E&&(D.width=x.width,D.height=x.height,D.dummy="edge-label",D.labelpos=x.labelpos),T.setEdge(A,k,{weight:x.weight},b),N===0&&T.graph().dummyChains.push(k),A=k;T.setEdge(A,w,{weight:x.weight},b)}}function _(T){m.forEach(T.graph().dummyChains,function(M){var A=T.node(M),p=A.edgeLabel,w;for(T.setEdge(A.edgeObj,p);A.dummy;)w=T.successors(M)[0],T.removeNode(M),p.points.push({x:A.x,y:A.y}),A.dummy==="edge-label"&&(p.x=A.x,p.y=A.y,p.width=A.width,p.height=A.height),M=w,A=T.node(M)})}},52205:function(lt,S,d){var m=d(72361);lt.exports=L;function L(I,P,_){var T={},M;m.forEach(_,function(A){for(var p=I.parent(A),w,y;p;){if(w=I.parent(p),w?(y=T[w],T[w]=p):(y=M,M=p),y&&y!==p){P.setEdge(y,p);return}p=w}})}},99506:function(lt,S,d){var m=d(72361);lt.exports=L;function L(I,P){return m.map(P,function(_){var T=I.inEdges(_);if(T.length){var M=m.reduce(T,function(A,p){var w=I.edge(p),y=I.node(p.v);return{sum:A.sum+w.weight*y.order,weight:A.weight+w.weight}},{sum:0,weight:0});return{v:_,barycenter:M.sum/M.weight,weight:M.weight}}else return{v:_}})}},59105:function(lt,S,d){var m=d(72361),L=d(76626).Graph;lt.exports=I;function I(_,T,M){var A=P(_),p=new L({compound:!0}).setGraph({root:A}).setDefaultNodeLabel(function(w){return _.node(w)});return m.forEach(_.nodes(),function(w){var y=_.node(w),b=_.parent(w);(y.rank===T||y.minRank<=T&&T<=y.maxRank)&&(p.setNode(w),p.setParent(w,b||A),m.forEach(_[M](w),function(x){var E=x.v===w?x.w:x.v,k=p.edge(E,w),D=m.isUndefined(k)?0:k.weight;p.setEdge(E,w,{weight:_.edge(x).weight+D})}),m.has(y,"minRank")&&p.setNode(w,{borderLeft:y.borderLeft[T],borderRight:y.borderRight[T]}))}),p}function P(_){for(var T;_.hasNode(T=m.uniqueId("_root")););return T}},45456:function(lt,S,d){"use strict";var m=d(72361);lt.exports=L;function L(P,_){for(var T=0,M=1;M<_.length;++M)T+=I(P,_[M-1],_[M]);return T}function I(P,_,T){for(var M=m.zipObject(T,m.map(T,function(x,E){return E})),A=m.flatten(m.map(_,function(x){return m.sortBy(m.map(P.outEdges(x),function(E){return{pos:M[E.w],weight:P.edge(E).weight}}),"pos")}),!0),p=1;p<T.length;)p<<=1;var w=2*p-1;p-=1;var y=m.map(new Array(w),function(){return 0}),b=0;return m.forEach(A.forEach(function(x){var E=x.pos+p;y[E]+=x.weight;for(var k=0;E>0;)E%2&&(k+=y[E+1]),E=E-1>>1,y[E]+=x.weight;b+=x.weight*k})),b}},62852:function(lt,S,d){"use strict";var m=d(72361),L=d(18043),I=d(45456),P=d(86490),_=d(59105),T=d(52205),M=d(76626).Graph,A=d(53063);lt.exports=p;function p(x){var E=A.maxRank(x),k=w(x,m.range(1,E+1),"inEdges"),D=w(x,m.range(E-1,-1,-1),"outEdges"),N=L(x);b(x,N);for(var z=Number.POSITIVE_INFINITY,W,X=0,U=0;U<4;++X,++U){y(X%2?k:D,X%4>=2),N=A.buildLayerMatrix(x);var et=I(x,N);et<z&&(U=0,W=m.cloneDeep(N),z=et)}b(x,W)}function w(x,E,k){return m.map(E,function(D){return _(x,D,k)})}function y(x,E){var k=new M;m.forEach(x,function(D){var N=D.graph().root,z=P(D,N,k,E);m.forEach(z.vs,function(W,X){D.node(W).order=X}),T(D,k,z.vs)})}function b(x,E){m.forEach(E,function(k){m.forEach(k,function(D,N){x.node(D).order=N})})}},18043:function(lt,S,d){"use strict";var m=d(72361);lt.exports=L;function L(I){var P={},_=m.filter(I.nodes(),function(w){return!I.children(w).length}),T=m.max(m.map(_,function(w){return I.node(w).rank})),M=m.map(m.range(T+1),function(){return[]});function A(w){if(!m.has(P,w)){P[w]=!0;var y=I.node(w);M[y.rank].push(w),m.forEach(I.successors(w),A)}}var p=m.sortBy(_,function(w){return I.node(w).rank});return m.forEach(p,A),M}},45926:function(lt,S,d){"use strict";var m=d(72361);lt.exports=L;function L(_,T){var M={};m.forEach(_,function(p,w){var y=M[p.v]={indegree:0,in:[],out:[],vs:[p.v],i:w};m.isUndefined(p.barycenter)||(y.barycenter=p.barycenter,y.weight=p.weight)}),m.forEach(T.edges(),function(p){var w=M[p.v],y=M[p.w];!m.isUndefined(w)&&!m.isUndefined(y)&&(y.indegree++,w.out.push(M[p.w]))});var A=m.filter(M,function(p){return!p.indegree});return I(A)}function I(_){var T=[];function M(w){return function(y){y.merged||(m.isUndefined(y.barycenter)||m.isUndefined(w.barycenter)||y.barycenter>=w.barycenter)&&P(w,y)}}function A(w){return function(y){y.in.push(w),--y.indegree==0&&_.push(y)}}for(;_.length;){var p=_.pop();T.push(p),m.forEach(p.in.reverse(),M(p)),m.forEach(p.out,A(p))}return m.map(m.filter(T,function(w){return!w.merged}),function(w){return m.pick(w,["vs","i","barycenter","weight"])})}function P(_,T){var M=0,A=0;_.weight&&(M+=_.barycenter*_.weight,A+=_.weight),T.weight&&(M+=T.barycenter*T.weight,A+=T.weight),_.vs=T.vs.concat(_.vs),_.barycenter=M/A,_.weight=A,_.i=Math.min(T.i,_.i),T.merged=!0}},86490:function(lt,S,d){var m=d(72361),L=d(99506),I=d(45926),P=d(1349);lt.exports=_;function _(A,p,w,y){var b=A.children(p),x=A.node(p),E=x?x.borderLeft:void 0,k=x?x.borderRight:void 0,D={};E&&(b=m.filter(b,function(et){return et!==E&&et!==k}));var N=L(A,b);m.forEach(N,function(et){if(A.children(et.v).length){var Q=_(A,et.v,w,y);D[et.v]=Q,m.has(Q,"barycenter")&&M(et,Q)}});var z=I(N,w);T(z,D);var W=P(z,y);if(E&&(W.vs=m.flatten([E,W.vs,k],!0),A.predecessors(E).length)){var X=A.node(A.predecessors(E)[0]),U=A.node(A.predecessors(k)[0]);m.has(W,"barycenter")||(W.barycenter=0,W.weight=0),W.barycenter=(W.barycenter*W.weight+X.order+U.order)/(W.weight+2),W.weight+=2}return W}function T(A,p){m.forEach(A,function(w){w.vs=m.flatten(w.vs.map(function(y){return p[y]?p[y].vs:y}),!0)})}function M(A,p){m.isUndefined(A.barycenter)?(A.barycenter=p.barycenter,A.weight=p.weight):(A.barycenter=(A.barycenter*A.weight+p.barycenter*p.weight)/(A.weight+p.weight),A.weight+=p.weight)}},1349:function(lt,S,d){var m=d(72361),L=d(53063);lt.exports=I;function I(T,M){var A=L.partition(T,function(D){return m.has(D,"barycenter")}),p=A.lhs,w=m.sortBy(A.rhs,function(D){return-D.i}),y=[],b=0,x=0,E=0;p.sort(_(!!M)),E=P(y,w,E),m.forEach(p,function(D){E+=D.vs.length,y.push(D.vs),b+=D.barycenter*D.weight,x+=D.weight,E=P(y,w,E)});var k={vs:m.flatten(y,!0)};return x&&(k.barycenter=b/x,k.weight=x),k}function P(T,M,A){for(var p;M.length&&(p=m.last(M)).i<=A;)M.pop(),T.push(p.vs),A++;return A}function _(T){return function(M,A){return M.barycenter<A.barycenter?-1:M.barycenter>A.barycenter?1:T?A.i-M.i:M.i-A.i}}},71970:function(lt,S,d){var m=d(72361);lt.exports=L;function L(_){var T=P(_);m.forEach(_.graph().dummyChains,function(M){for(var A=_.node(M),p=A.edgeObj,w=I(_,T,p.v,p.w),y=w.path,b=w.lca,x=0,E=y[x],k=!0;M!==p.w;){if(A=_.node(M),k){for(;(E=y[x])!==b&&_.node(E).maxRank<A.rank;)x++;E===b&&(k=!1)}if(!k){for(;x<y.length-1&&_.node(E=y[x+1]).minRank<=A.rank;)x++;E=y[x]}_.setParent(M,E),M=_.successors(M)[0]}})}function I(_,T,M,A){var p=[],w=[],y=Math.min(T[M].low,T[A].low),b=Math.max(T[M].lim,T[A].lim),x,E;x=M;do x=_.parent(x),p.push(x);while(x&&(T[x].low>y||b>T[x].lim));for(E=x,x=A;(x=_.parent(x))!==E;)w.push(x);return{path:p.concat(w.reverse()),lca:E}}function P(_){var T={},M=0;function A(p){var w=M;m.forEach(_.children(p),A),T[p]={low:w,lim:M++}}return m.forEach(_.children(),A),T}},92080:function(lt,S,d){"use strict";var m=d(72361),L=d(76626).Graph,I=d(53063);lt.exports={positionX:k,findType1Conflicts:P,findType2Conflicts:_,addConflict:M,hasConflict:A,verticalAlignment:p,horizontalCompaction:w,alignCoordinates:x,findSmallestWidthAlignment:b,balance:E};function P(z,W){var X={};function U(et,Q){var ct=0,Lt=0,_t=et.length,yt=m.last(Q);return m.forEach(Q,function(bt,Mt){var xt=T(z,bt),Bt=xt?z.node(xt).order:_t;(xt||bt===yt)&&(m.forEach(Q.slice(Lt,Mt+1),function(wt){m.forEach(z.predecessors(wt),function(H){var K=z.node(H),B=K.order;(B<ct||Bt<B)&&!(K.dummy&&z.node(wt).dummy)&&M(X,H,wt)})}),Lt=Mt+1,ct=Bt)}),Q}return m.reduce(W,U),X}function _(z,W){var X={};function U(Q,ct,Lt,_t,yt){var bt;m.forEach(m.range(ct,Lt),function(Mt){bt=Q[Mt],z.node(bt).dummy&&m.forEach(z.predecessors(bt),function(xt){var Bt=z.node(xt);Bt.dummy&&(Bt.order<_t||Bt.order>yt)&&M(X,xt,bt)})})}function et(Q,ct){var Lt=-1,_t,yt=0;return m.forEach(ct,function(bt,Mt){if(z.node(bt).dummy==="border"){var xt=z.predecessors(bt);xt.length&&(_t=z.node(xt[0]).order,U(ct,yt,Mt,Lt,_t),yt=Mt,Lt=_t)}U(ct,yt,ct.length,_t,Q.length)}),ct}return m.reduce(W,et),X}function T(z,W){if(z.node(W).dummy)return m.find(z.predecessors(W),function(X){return z.node(X).dummy})}function M(z,W,X){if(W>X){var U=W;W=X,X=U}var et=z[W];et||(z[W]=et={}),et[X]=!0}function A(z,W,X){if(W>X){var U=W;W=X,X=U}return m.has(z[W],X)}function p(z,W,X,U){var et={},Q={},ct={};return m.forEach(W,function(Lt){m.forEach(Lt,function(_t,yt){et[_t]=_t,Q[_t]=_t,ct[_t]=yt})}),m.forEach(W,function(Lt){var _t=-1;m.forEach(Lt,function(yt){var bt=U(yt);if(bt.length){bt=m.sortBy(bt,function(H){return ct[H]});for(var Mt=(bt.length-1)/2,xt=Math.floor(Mt),Bt=Math.ceil(Mt);xt<=Bt;++xt){var wt=bt[xt];Q[yt]===yt&&_t<ct[wt]&&!A(X,yt,wt)&&(Q[wt]=yt,Q[yt]=et[yt]=et[wt],_t=ct[wt])}}})}),{root:et,align:Q}}function w(z,W,X,U,et){var Q={},ct=y(z,W,X,et),Lt=et?"borderLeft":"borderRight";function _t(Mt,xt){for(var Bt=ct.nodes(),wt=Bt.pop(),H={};wt;)H[wt]?Mt(wt):(H[wt]=!0,Bt.push(wt),Bt=Bt.concat(xt(wt))),wt=Bt.pop()}function yt(Mt){Q[Mt]=ct.inEdges(Mt).reduce(function(xt,Bt){return Math.max(xt,Q[Bt.v]+ct.edge(Bt))},0)}function bt(Mt){var xt=ct.outEdges(Mt).reduce(function(wt,H){return Math.min(wt,Q[H.w]-ct.edge(H))},Number.POSITIVE_INFINITY),Bt=z.node(Mt);xt!==Number.POSITIVE_INFINITY&&Bt.borderType!==Lt&&(Q[Mt]=Math.max(Q[Mt],xt))}return _t(yt,ct.predecessors.bind(ct)),_t(bt,ct.successors.bind(ct)),m.forEach(U,function(Mt){Q[Mt]=Q[X[Mt]]}),Q}function y(z,W,X,U){var et=new L,Q=z.graph(),ct=D(Q.nodesep,Q.edgesep,U);return m.forEach(W,function(Lt){var _t;m.forEach(Lt,function(yt){var bt=X[yt];if(et.setNode(bt),_t){var Mt=X[_t],xt=et.edge(Mt,bt);et.setEdge(Mt,bt,Math.max(ct(z,yt,_t),xt||0))}_t=yt})}),et}function b(z,W){return m.minBy(m.values(W),function(X){var U=Number.NEGATIVE_INFINITY,et=Number.POSITIVE_INFINITY;return m.forIn(X,function(Q,ct){var Lt=N(z,ct)/2;U=Math.max(Q+Lt,U),et=Math.min(Q-Lt,et)}),U-et})}function x(z,W){var X=m.values(W),U=m.min(X),et=m.max(X);m.forEach(["u","d"],function(Q){m.forEach(["l","r"],function(ct){var Lt=Q+ct,_t=z[Lt],yt;if(_t!==W){var bt=m.values(_t);yt=ct==="l"?U-m.min(bt):et-m.max(bt),yt&&(z[Lt]=m.mapValues(_t,function(Mt){return Mt+yt}))}})})}function E(z,W){return m.mapValues(z.ul,function(X,U){if(W)return z[W.toLowerCase()][U];var et=m.sortBy(m.map(z,U));return(et[1]+et[2])/2})}function k(z){var W=I.buildLayerMatrix(z),X=m.merge(P(z,W),_(z,W)),U={},et;m.forEach(["u","d"],function(ct){et=ct==="u"?W:m.values(W).reverse(),m.forEach(["l","r"],function(Lt){Lt==="r"&&(et=m.map(et,function(Mt){return m.values(Mt).reverse()}));var _t=(ct==="u"?z.predecessors:z.successors).bind(z),yt=p(z,et,X,_t),bt=w(z,et,yt.root,yt.align,Lt==="r");Lt==="r"&&(bt=m.mapValues(bt,function(Mt){return-Mt})),U[ct+Lt]=bt})});var Q=b(z,U);return x(U,Q),E(U,z.graph().align)}function D(z,W,X){return function(U,et,Q){var ct=U.node(et),Lt=U.node(Q),_t=0,yt;if(_t+=ct.width/2,m.has(ct,"labelpos"))switch(ct.labelpos.toLowerCase()){case"l":yt=-ct.width/2;break;case"r":yt=ct.width/2;break}if(yt&&(_t+=X?yt:-yt),yt=0,_t+=(ct.dummy?W:z)/2,_t+=(Lt.dummy?W:z)/2,_t+=Lt.width/2,m.has(Lt,"labelpos"))switch(Lt.labelpos.toLowerCase()){case"l":yt=Lt.width/2;break;case"r":yt=-Lt.width/2;break}return yt&&(_t+=X?yt:-yt),yt=0,_t}}function N(z,W){return z.node(W).width}},93021:function(lt,S,d){"use strict";var m=d(72361),L=d(53063),I=d(92080).positionX;lt.exports=P;function P(T){T=L.asNonCompoundGraph(T),_(T),m.forEach(I(T),function(M,A){T.node(A).x=M})}function _(T){var M=L.buildLayerMatrix(T),A=T.graph().ranksep,p=0;m.forEach(M,function(w){var y=m.max(m.map(w,function(b){return T.node(b).height}));m.forEach(w,function(b){T.node(b).y=p+y/2}),p+=y+A})}},61031:function(lt,S,d){"use strict";var m=d(72361),L=d(76626).Graph,I=d(2416).slack;lt.exports=P;function P(A){var p=new L({directed:!1}),w=A.nodes()[0],y=A.nodeCount();p.setNode(w,{});for(var b,x;_(p,A)<y;)b=T(p,A),x=p.hasNode(b.v)?I(A,b):-I(A,b),M(p,A,x);return p}function _(A,p){function w(y){m.forEach(p.nodeEdges(y),function(b){var x=b.v,E=y===x?b.w:x;!A.hasNode(E)&&!I(p,b)&&(A.setNode(E,{}),A.setEdge(y,E,{}),w(E))})}return m.forEach(A.nodes(),w),A.nodeCount()}function T(A,p){return m.minBy(p.edges(),function(w){if(A.hasNode(w.v)!==A.hasNode(w.w))return I(p,w)})}function M(A,p,w){m.forEach(A.nodes(),function(y){p.node(y).rank+=w})}},64505:function(lt,S,d){"use strict";var m=d(2416),L=m.longestPath,I=d(61031),P=d(77076);lt.exports=_;function _(p){switch(p.graph().ranker){case"network-simplex":A(p);break;case"tight-tree":M(p);break;case"longest-path":T(p);break;default:A(p)}}var T=L;function M(p){L(p),I(p)}function A(p){P(p)}},77076:function(lt,S,d){"use strict";var m=d(72361),L=d(61031),I=d(2416).slack,P=d(2416).longestPath,_=d(76626).alg.preorder,T=d(76626).alg.postorder,M=d(53063).simplify;lt.exports=A,A.initLowLimValues=b,A.initCutValues=p,A.calcCutValue=y,A.leaveEdge=E,A.enterEdge=k,A.exchangeEdges=D;function A(X){X=M(X),P(X);var U=L(X);b(U),p(U,X);for(var et,Q;et=E(U);)Q=k(U,X,et),D(U,X,et,Q)}function p(X,U){var et=T(X,X.nodes());et=et.slice(0,et.length-1),m.forEach(et,function(Q){w(X,U,Q)})}function w(X,U,et){var Q=X.node(et),ct=Q.parent;X.edge(et,ct).cutvalue=y(X,U,et)}function y(X,U,et){var Q=X.node(et),ct=Q.parent,Lt=!0,_t=U.edge(et,ct),yt=0;return _t||(Lt=!1,_t=U.edge(ct,et)),yt=_t.weight,m.forEach(U.nodeEdges(et),function(bt){var Mt=bt.v===et,xt=Mt?bt.w:bt.v;if(xt!==ct){var Bt=Mt===Lt,wt=U.edge(bt).weight;if(yt+=Bt?wt:-wt,z(X,et,xt)){var H=X.edge(et,xt).cutvalue;yt+=Bt?-H:H}}}),yt}function b(X,U){arguments.length<2&&(U=X.nodes()[0]),x(X,{},1,U)}function x(X,U,et,Q,ct){var Lt=et,_t=X.node(Q);return U[Q]=!0,m.forEach(X.neighbors(Q),function(yt){m.has(U,yt)||(et=x(X,U,et,yt,Q))}),_t.low=Lt,_t.lim=et++,ct?_t.parent=ct:delete _t.parent,et}function E(X){return m.find(X.edges(),function(U){return X.edge(U).cutvalue<0})}function k(X,U,et){var Q=et.v,ct=et.w;U.hasEdge(Q,ct)||(Q=et.w,ct=et.v);var Lt=X.node(Q),_t=X.node(ct),yt=Lt,bt=!1;Lt.lim>_t.lim&&(yt=_t,bt=!0);var Mt=m.filter(U.edges(),function(xt){return bt===W(X,X.node(xt.v),yt)&&bt!==W(X,X.node(xt.w),yt)});return m.minBy(Mt,function(xt){return I(U,xt)})}function D(X,U,et,Q){var ct=et.v,Lt=et.w;X.removeEdge(ct,Lt),X.setEdge(Q.v,Q.w,{}),b(X),p(X,U),N(X,U)}function N(X,U){var et=m.find(X.nodes(),function(ct){return!U.node(ct).parent}),Q=_(X,et);Q=Q.slice(1),m.forEach(Q,function(ct){var Lt=X.node(ct).parent,_t=U.edge(ct,Lt),yt=!1;_t||(_t=U.edge(Lt,ct),yt=!0),U.node(ct).rank=U.node(Lt).rank+(yt?_t.minlen:-_t.minlen)})}function z(X,U,et){return X.hasEdge(U,et)}function W(X,U,et){return et.low<=U.lim&&U.lim<=et.lim}},2416:function(lt,S,d){"use strict";var m=d(72361);lt.exports={longestPath:L,slack:I};function L(P){var _={};function T(M){var A=P.node(M);if(m.has(_,M))return A.rank;_[M]=!0;var p=m.min(m.map(P.outEdges(M),function(w){return T(w.w)-P.edge(w).minlen}));return(p===Number.POSITIVE_INFINITY||p===void 0||p===null)&&(p=0),A.rank=p}m.forEach(P.sources(),T)}function I(P,_){return P.node(_.w).rank-P.node(_.v).rank-P.edge(_).minlen}},53063:function(lt,S,d){"use strict";var m=d(72361),L=d(76626).Graph;lt.exports={addDummyNode:I,simplify:P,asNonCompoundGraph:_,successorWeights:T,predecessorWeights:M,intersectRect:A,buildLayerMatrix:p,normalizeRanks:w,removeEmptyRanks:y,addBorderNode:b,maxRank:x,partition:E,time:k,notime:D};function I(N,z,W,X){var U;do U=m.uniqueId(X);while(N.hasNode(U));return W.dummy=z,N.setNode(U,W),U}function P(N){var z=new L().setGraph(N.graph());return m.forEach(N.nodes(),function(W){z.setNode(W,N.node(W))}),m.forEach(N.edges(),function(W){var X=z.edge(W.v,W.w)||{weight:0,minlen:1},U=N.edge(W);z.setEdge(W.v,W.w,{weight:X.weight+U.weight,minlen:Math.max(X.minlen,U.minlen)})}),z}function _(N){var z=new L({multigraph:N.isMultigraph()}).setGraph(N.graph());return m.forEach(N.nodes(),function(W){N.children(W).length||z.setNode(W,N.node(W))}),m.forEach(N.edges(),function(W){z.setEdge(W,N.edge(W))}),z}function T(N){var z=m.map(N.nodes(),function(W){var X={};return m.forEach(N.outEdges(W),function(U){X[U.w]=(X[U.w]||0)+N.edge(U).weight}),X});return m.zipObject(N.nodes(),z)}function M(N){var z=m.map(N.nodes(),function(W){var X={};return m.forEach(N.inEdges(W),function(U){X[U.v]=(X[U.v]||0)+N.edge(U).weight}),X});return m.zipObject(N.nodes(),z)}function A(N,z){var W=N.x,X=N.y,U=z.x-W,et=z.y-X,Q=N.width/2,ct=N.height/2;if(!U&&!et)throw new Error("Not possible to find intersection inside of the rectangle");var Lt,_t;return Math.abs(et)*Q>Math.abs(U)*ct?(et<0&&(ct=-ct),Lt=ct*U/et,_t=ct):(U<0&&(Q=-Q),Lt=Q,_t=Q*et/U),{x:W+Lt,y:X+_t}}function p(N){var z=m.map(m.range(x(N)+1),function(){return[]});return m.forEach(N.nodes(),function(W){var X=N.node(W),U=X.rank;m.isUndefined(U)||(z[U][X.order]=W)}),z}function w(N){var z=m.min(m.map(N.nodes(),function(W){return N.node(W).rank}));m.forEach(N.nodes(),function(W){var X=N.node(W);m.has(X,"rank")&&(X.rank-=z)})}function y(N){var z=m.min(m.map(N.nodes(),function(et){return N.node(et).rank})),W=[];m.forEach(N.nodes(),function(et){var Q=N.node(et).rank-z;W[Q]||(W[Q]=[]),W[Q].push(et)});var X=0,U=N.graph().nodeRankFactor;m.forEach(W,function(et,Q){m.isUndefined(et)&&Q%U!=0?--X:X&&m.forEach(et,function(ct){N.node(ct).rank+=X})})}function b(N,z,W,X){var U={width:0,height:0};return arguments.length>=4&&(U.rank=W,U.order=X),I(N,"border",U,z)}function x(N){return m.max(m.map(N.nodes(),function(z){var W=N.node(z).rank;if(!m.isUndefined(W))return W}))}function E(N,z){var W={lhs:[],rhs:[]};return m.forEach(N,function(X){z(X)?W.lhs.push(X):W.rhs.push(X)}),W}function k(N,z){var W=m.now();try{return z()}finally{console.log(N+" time: "+(m.now()-W)+"ms")}}function D(N,z){return z()}},11897:function(lt){lt.exports="0.8.5"},2035:function(lt,S,d){"use strict";var m=d(97671),L=this&&this.__spreadArrays||function(){for(var D=0,N=0,z=arguments.length;N<z;N++)D+=arguments[N].length;for(var W=Array(D),X=0,N=0;N<z;N++)for(var U=arguments[N],et=0,Q=U.length;et<Q;et++,X++)W[X]=U[et];return W};Object.defineProperty(S,"__esModule",{value:!0});var I=function(){function D(N,z,W){this.name=N,this.version=z,this.os=W}return D}();S.BrowserInfo=I;var P=function(){function D(N){this.version=N,this.name="node",this.os=m.platform}return D}();S.NodeInfo=P;var _=function(){function D(){this.bot=!0,this.name="bot",this.version=null,this.os=null}return D}();S.BotInfo=_;var T=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,M=/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/,A=3,p=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",T]],w=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",M]];function y(D){return D?b(D):typeof navigator!="undefined"?b(navigator.userAgent):E()}S.detect=y;function b(D){var N=D!==""&&p.reduce(function(U,et){var Q=et[0],ct=et[1];if(U)return U;var Lt=ct.exec(D);return!!Lt&&[Q,Lt]},!1);if(!N)return null;var z=N[0],W=N[1];if(z==="searchbot")return new _;var X=W[1]&&W[1].split(/[._]/).slice(0,3);return X?X.length<A&&(X=L(X,k(A-X.length))):X=[],new I(z,X.join("."),x(D))}S.parseUserAgent=b;function x(D){for(var N=0,z=w.length;N<z;N++){var W=w[N],X=W[0],U=W[1],et=U.test(D);if(et)return X}return null}S.detectOS=x;function E(){var D=typeof m!="undefined"&&m.version;return D?new P(m.version.slice(1)):null}S.getNodeVersion=E;function k(D){for(var N=[],z=0;z<D;z++)N.push("0");return N}},93229:function(lt,S,d){"use strict";d.r(S),d.d(S,{BrowserInfo:function(){return I},NodeInfo:function(){return P},SearchBotDeviceInfo:function(){return _},BotInfo:function(){return T},ReactNativeInfo:function(){return M},detect:function(){return x},browserName:function(){return k},parseUserAgent:function(){return D},detectOS:function(){return N},getNodeVersion:function(){return z}});var m=d(97671),L=function(X,U,et){if(et||arguments.length===2)for(var Q=0,ct=U.length,Lt;Q<ct;Q++)(Lt||!(Q in U))&&(Lt||(Lt=Array.prototype.slice.call(U,0,Q)),Lt[Q]=U[Q]);return X.concat(Lt||Array.prototype.slice.call(U))},I=function(){function X(U,et,Q){this.name=U,this.version=et,this.os=Q,this.type="browser"}return X}(),P=function(){function X(U){this.version=U,this.type="node",this.name="node",this.os=m.platform}return X}(),_=function(){function X(U,et,Q,ct){this.name=U,this.version=et,this.os=Q,this.bot=ct,this.type="bot-device"}return X}(),T=function(){function X(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return X}(),M=function(){function X(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return X}(),A=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,p=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,w=3,y=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",A]],b=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function x(X){return X?D(X):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new M:typeof navigator!="undefined"?D(navigator.userAgent):z()}function E(X){return X!==""&&y.reduce(function(U,et){var Q=et[0],ct=et[1];if(U)return U;var Lt=ct.exec(X);return!!Lt&&[Q,Lt]},!1)}function k(X){var U=E(X);return U?U[0]:null}function D(X){var U=E(X);if(!U)return null;var et=U[0],Q=U[1];if(et==="searchbot")return new T;var ct=Q[1]&&Q[1].split(".").join("_").split("_").slice(0,3);ct?ct.length<w&&(ct=L(L([],ct,!0),W(w-ct.length),!0)):ct=[];var Lt=ct.join("."),_t=N(X),yt=p.exec(X);return yt&&yt[1]?new _(et,Lt,_t,yt[1]):new I(et,Lt,_t)}function N(X){for(var U=0,et=b.length;U<et;U++){var Q=b[U],ct=Q[0],Lt=Q[1],_t=Lt.exec(X);if(_t)return ct}return null}function z(){var X=typeof m!="undefined"&&m.version;return X?new P(m.version.slice(1)):null}function W(X){for(var U=[],et=0;et<X;et++)U.push("0");return U}},27009:function(lt,S,d){"use strict";d.r(S),d.d(S,{assign:function(){return w},format:function(){return Mt},parse:function(){return xt},defaultI18n:function(){return k},setGlobalDateI18n:function(){return N},setGlobalDateMasks:function(){return bt}});var m=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,L="\\d\\d?",I="\\d\\d",P="\\d{3}",_="\\d{4}",T="[^\\s]+",M=/\[([^]*?)\]/gm;function A(wt,H){for(var K=[],B=0,h=wt.length;B<h;B++)K.push(wt[B].substr(0,H));return K}var p=function(wt){return function(H,K){var B=K[wt].map(function(mt){return mt.toLowerCase()}),h=B.indexOf(H.toLowerCase());return h>-1?h:null}};function w(wt){for(var H=[],K=1;K<arguments.length;K++)H[K-1]=arguments[K];for(var B=0,h=H;B<h.length;B++){var mt=h[B];for(var gt in mt)wt[gt]=mt[gt]}return wt}var y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=["January","February","March","April","May","June","July","August","September","October","November","December"],x=A(b,3),E=A(y,3),k={dayNamesShort:E,dayNames:y,monthNamesShort:x,monthNames:b,amPm:["am","pm"],DoFn:function(wt){return wt+["th","st","nd","rd"][wt%10>3?0:(wt-wt%10!=10?1:0)*wt%10]}},D=w({},k),N=function(wt){return D=w(D,wt)},z=function(wt){return wt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},W=function(wt,H){for(H===void 0&&(H=2),wt=String(wt);wt.length<H;)wt="0"+wt;return wt},X={D:function(wt){return String(wt.getDate())},DD:function(wt){return W(wt.getDate())},Do:function(wt,H){return H.DoFn(wt.getDate())},d:function(wt){return String(wt.getDay())},dd:function(wt){return W(wt.getDay())},ddd:function(wt,H){return H.dayNamesShort[wt.getDay()]},dddd:function(wt,H){return H.dayNames[wt.getDay()]},M:function(wt){return String(wt.getMonth()+1)},MM:function(wt){return W(wt.getMonth()+1)},MMM:function(wt,H){return H.monthNamesShort[wt.getMonth()]},MMMM:function(wt,H){return H.monthNames[wt.getMonth()]},YY:function(wt){return W(String(wt.getFullYear()),4).substr(2)},YYYY:function(wt){return W(wt.getFullYear(),4)},h:function(wt){return String(wt.getHours()%12||12)},hh:function(wt){return W(wt.getHours()%12||12)},H:function(wt){return String(wt.getHours())},HH:function(wt){return W(wt.getHours())},m:function(wt){return String(wt.getMinutes())},mm:function(wt){return W(wt.getMinutes())},s:function(wt){return String(wt.getSeconds())},ss:function(wt){return W(wt.getSeconds())},S:function(wt){return String(Math.round(wt.getMilliseconds()/100))},SS:function(wt){return W(Math.round(wt.getMilliseconds()/10),2)},SSS:function(wt){return W(wt.getMilliseconds(),3)},a:function(wt,H){return wt.getHours()<12?H.amPm[0]:H.amPm[1]},A:function(wt,H){return wt.getHours()<12?H.amPm[0].toUpperCase():H.amPm[1].toUpperCase()},ZZ:function(wt){var H=wt.getTimezoneOffset();return(H>0?"-":"+")+W(Math.floor(Math.abs(H)/60)*100+Math.abs(H)%60,4)},Z:function(wt){var H=wt.getTimezoneOffset();return(H>0?"-":"+")+W(Math.floor(Math.abs(H)/60),2)+":"+W(Math.abs(H)%60,2)}},U=function(wt){return+wt-1},et=[null,L],Q=[null,T],ct=["isPm",T,function(wt,H){var K=wt.toLowerCase();return K===H.amPm[0]?0:K===H.amPm[1]?1:null}],Lt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(wt){var H=(wt+"").match(/([+-]|\d\d)/gi);if(H){var K=+H[1]*60+parseInt(H[2],10);return H[0]==="+"?K:-K}return 0}],_t={D:["day",L],DD:["day",I],Do:["day",L+T,function(wt){return parseInt(wt,10)}],M:["month",L,U],MM:["month",I,U],YY:["year",I,function(wt){var H=new Date,K=+(""+H.getFullYear()).substr(0,2);return+(""+(+wt>68?K-1:K)+wt)}],h:["hour",L,void 0,"isPm"],hh:["hour",I,void 0,"isPm"],H:["hour",L],HH:["hour",I],m:["minute",L],mm:["minute",I],s:["second",L],ss:["second",I],YYYY:["year",_],S:["millisecond","\\d",function(wt){return+wt*100}],SS:["millisecond",I,function(wt){return+wt*10}],SSS:["millisecond",P],d:et,dd:et,ddd:Q,dddd:Q,MMM:["month",T,p("monthNamesShort")],MMMM:["month",T,p("monthNames")],a:ct,A:ct,ZZ:Lt,Z:Lt},yt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},bt=function(wt){return w(yt,wt)},Mt=function(wt,H,K){if(H===void 0&&(H=yt.default),K===void 0&&(K={}),typeof wt=="number"&&(wt=new Date(wt)),Object.prototype.toString.call(wt)!=="[object Date]"||isNaN(wt.getTime()))throw new Error("Invalid Date pass to format");H=yt[H]||H;var B=[];H=H.replace(M,function(mt,gt){return B.push(gt),"@@@"});var h=w(w({},D),K);return H=H.replace(m,function(mt){return X[mt](wt,h)}),H.replace(/@@@/g,function(){return B.shift()})};function xt(wt,H,K){if(K===void 0&&(K={}),typeof H!="string")throw new Error("Invalid format in fecha parse");if(H=yt[H]||H,wt.length>1e3)return null;var B=new Date,h={year:B.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},mt=[],gt=[],Vt=H.replace(M,function(vt,Tt){return gt.push(z(Tt)),"@@@"}),Jt={},zt={};Vt=z(Vt).replace(m,function(vt){var Tt=_t[vt],Ht=Tt[0],ue=Tt[1],Ce=Tt[3];if(Jt[Ht])throw new Error("Invalid format. "+Ht+" specified twice in format");return Jt[Ht]=!0,Ce&&(zt[Ce]=!0),mt.push(Tt),"("+ue+")"}),Object.keys(zt).forEach(function(vt){if(!Jt[vt])throw new Error("Invalid format. "+vt+" is required in specified format")}),Vt=Vt.replace(/@@@/g,function(){return gt.shift()});var Qt=wt.match(new RegExp(Vt,"i"));if(!Qt)return null;for(var oe=w(w({},D),K),se=1;se<Qt.length;se++){var jt=mt[se-1],Pt=jt[0],pt=jt[2],st=pt?pt(Qt[se],oe):+Qt[se];if(st==null)return null;h[Pt]=st}h.isPm===1&&h.hour!=null&&+h.hour!=12?h.hour=+h.hour+12:h.isPm===0&&+h.hour==12&&(h.hour=0);var Ct;if(h.timezoneOffset==null){Ct=new Date(h.year,h.month,h.day,h.hour,h.minute,h.second,h.millisecond);for(var nt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],se=0,J=nt.length;se<J;se++)if(Jt[nt[se][0]]&&h[nt[se][0]]!==Ct[nt[se][1]]())return null}else if(Ct=new Date(Date.UTC(h.year,h.month,h.day,h.hour,h.minute-h.timezoneOffset,h.second,h.millisecond)),h.month>11||h.month<0||h.day>31||h.day<1||h.hour>23||h.hour<0||h.minute>59||h.minute<0||h.second>59||h.second<0)return null;return Ct}var Bt={format:Mt,parse:xt,defaultI18n:k,setGlobalDateI18n:N,setGlobalDateMasks:bt};S.default=Bt},72988:function(lt,S,d){"use strict";d.d(S,{Ib:function(){return m},WT:function(){return L},FD:function(){return I}});var m=1e-6,L=typeof Float32Array!="undefined"?Float32Array:Array,I=Math.random;function P(A){L=A}var _=Math.PI/180;function T(A){return A*_}function M(A,p){return Math.abs(A-p)<=m*Math.max(1,Math.abs(A),Math.abs(p))}Math.hypot||(Math.hypot=function(){for(var A=0,p=arguments.length;p--;)A+=arguments[p]*arguments[p];return Math.sqrt(A)})},58198:function(lt,S,d){"use strict";d.r(S),d.d(S,{create:function(){return L},fromMat4:function(){return I},clone:function(){return P},copy:function(){return _},fromValues:function(){return T},set:function(){return M},identity:function(){return A},transpose:function(){return p},invert:function(){return w},adjoint:function(){return y},determinant:function(){return b},multiply:function(){return x},translate:function(){return E},rotate:function(){return k},scale:function(){return D},fromTranslation:function(){return N},fromRotation:function(){return z},fromScaling:function(){return W},fromMat2d:function(){return X},fromQuat:function(){return U},normalFromMat4:function(){return et},projection:function(){return Q},str:function(){return ct},frob:function(){return Lt},add:function(){return _t},subtract:function(){return yt},multiplyScalar:function(){return bt},multiplyScalarAndAdd:function(){return Mt},exactEquals:function(){return xt},equals:function(){return Bt},mul:function(){return wt},sub:function(){return H}});var m=d(72988);function L(){var K=new m.WT(9);return m.WT!=Float32Array&&(K[1]=0,K[2]=0,K[3]=0,K[5]=0,K[6]=0,K[7]=0),K[0]=1,K[4]=1,K[8]=1,K}function I(K,B){return K[0]=B[0],K[1]=B[1],K[2]=B[2],K[3]=B[4],K[4]=B[5],K[5]=B[6],K[6]=B[8],K[7]=B[9],K[8]=B[10],K}function P(K){var B=new m.WT(9);return B[0]=K[0],B[1]=K[1],B[2]=K[2],B[3]=K[3],B[4]=K[4],B[5]=K[5],B[6]=K[6],B[7]=K[7],B[8]=K[8],B}function _(K,B){return K[0]=B[0],K[1]=B[1],K[2]=B[2],K[3]=B[3],K[4]=B[4],K[5]=B[5],K[6]=B[6],K[7]=B[7],K[8]=B[8],K}function T(K,B,h,mt,gt,Vt,Jt,zt,Qt){var oe=new m.WT(9);return oe[0]=K,oe[1]=B,oe[2]=h,oe[3]=mt,oe[4]=gt,oe[5]=Vt,oe[6]=Jt,oe[7]=zt,oe[8]=Qt,oe}function M(K,B,h,mt,gt,Vt,Jt,zt,Qt,oe){return K[0]=B,K[1]=h,K[2]=mt,K[3]=gt,K[4]=Vt,K[5]=Jt,K[6]=zt,K[7]=Qt,K[8]=oe,K}function A(K){return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=1,K[5]=0,K[6]=0,K[7]=0,K[8]=1,K}function p(K,B){if(K===B){var h=B[1],mt=B[2],gt=B[5];K[1]=B[3],K[2]=B[6],K[3]=h,K[5]=B[7],K[6]=mt,K[7]=gt}else K[0]=B[0],K[1]=B[3],K[2]=B[6],K[3]=B[1],K[4]=B[4],K[5]=B[7],K[6]=B[2],K[7]=B[5],K[8]=B[8];return K}function w(K,B){var h=B[0],mt=B[1],gt=B[2],Vt=B[3],Jt=B[4],zt=B[5],Qt=B[6],oe=B[7],se=B[8],jt=se*Jt-zt*oe,Pt=-se*Vt+zt*Qt,pt=oe*Vt-Jt*Qt,st=h*jt+mt*Pt+gt*pt;return st?(st=1/st,K[0]=jt*st,K[1]=(-se*mt+gt*oe)*st,K[2]=(zt*mt-gt*Jt)*st,K[3]=Pt*st,K[4]=(se*h-gt*Qt)*st,K[5]=(-zt*h+gt*Vt)*st,K[6]=pt*st,K[7]=(-oe*h+mt*Qt)*st,K[8]=(Jt*h-mt*Vt)*st,K):null}function y(K,B){var h=B[0],mt=B[1],gt=B[2],Vt=B[3],Jt=B[4],zt=B[5],Qt=B[6],oe=B[7],se=B[8];return K[0]=Jt*se-zt*oe,K[1]=gt*oe-mt*se,K[2]=mt*zt-gt*Jt,K[3]=zt*Qt-Vt*se,K[4]=h*se-gt*Qt,K[5]=gt*Vt-h*zt,K[6]=Vt*oe-Jt*Qt,K[7]=mt*Qt-h*oe,K[8]=h*Jt-mt*Vt,K}function b(K){var B=K[0],h=K[1],mt=K[2],gt=K[3],Vt=K[4],Jt=K[5],zt=K[6],Qt=K[7],oe=K[8];return B*(oe*Vt-Jt*Qt)+h*(-oe*gt+Jt*zt)+mt*(Qt*gt-Vt*zt)}function x(K,B,h){var mt=B[0],gt=B[1],Vt=B[2],Jt=B[3],zt=B[4],Qt=B[5],oe=B[6],se=B[7],jt=B[8],Pt=h[0],pt=h[1],st=h[2],Ct=h[3],nt=h[4],J=h[5],vt=h[6],Tt=h[7],Ht=h[8];return K[0]=Pt*mt+pt*Jt+st*oe,K[1]=Pt*gt+pt*zt+st*se,K[2]=Pt*Vt+pt*Qt+st*jt,K[3]=Ct*mt+nt*Jt+J*oe,K[4]=Ct*gt+nt*zt+J*se,K[5]=Ct*Vt+nt*Qt+J*jt,K[6]=vt*mt+Tt*Jt+Ht*oe,K[7]=vt*gt+Tt*zt+Ht*se,K[8]=vt*Vt+Tt*Qt+Ht*jt,K}function E(K,B,h){var mt=B[0],gt=B[1],Vt=B[2],Jt=B[3],zt=B[4],Qt=B[5],oe=B[6],se=B[7],jt=B[8],Pt=h[0],pt=h[1];return K[0]=mt,K[1]=gt,K[2]=Vt,K[3]=Jt,K[4]=zt,K[5]=Qt,K[6]=Pt*mt+pt*Jt+oe,K[7]=Pt*gt+pt*zt+se,K[8]=Pt*Vt+pt*Qt+jt,K}function k(K,B,h){var mt=B[0],gt=B[1],Vt=B[2],Jt=B[3],zt=B[4],Qt=B[5],oe=B[6],se=B[7],jt=B[8],Pt=Math.sin(h),pt=Math.cos(h);return K[0]=pt*mt+Pt*Jt,K[1]=pt*gt+Pt*zt,K[2]=pt*Vt+Pt*Qt,K[3]=pt*Jt-Pt*mt,K[4]=pt*zt-Pt*gt,K[5]=pt*Qt-Pt*Vt,K[6]=oe,K[7]=se,K[8]=jt,K}function D(K,B,h){var mt=h[0],gt=h[1];return K[0]=mt*B[0],K[1]=mt*B[1],K[2]=mt*B[2],K[3]=gt*B[3],K[4]=gt*B[4],K[5]=gt*B[5],K[6]=B[6],K[7]=B[7],K[8]=B[8],K}function N(K,B){return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=1,K[5]=0,K[6]=B[0],K[7]=B[1],K[8]=1,K}function z(K,B){var h=Math.sin(B),mt=Math.cos(B);return K[0]=mt,K[1]=h,K[2]=0,K[3]=-h,K[4]=mt,K[5]=0,K[6]=0,K[7]=0,K[8]=1,K}function W(K,B){return K[0]=B[0],K[1]=0,K[2]=0,K[3]=0,K[4]=B[1],K[5]=0,K[6]=0,K[7]=0,K[8]=1,K}function X(K,B){return K[0]=B[0],K[1]=B[1],K[2]=0,K[3]=B[2],K[4]=B[3],K[5]=0,K[6]=B[4],K[7]=B[5],K[8]=1,K}function U(K,B){var h=B[0],mt=B[1],gt=B[2],Vt=B[3],Jt=h+h,zt=mt+mt,Qt=gt+gt,oe=h*Jt,se=mt*Jt,jt=mt*zt,Pt=gt*Jt,pt=gt*zt,st=gt*Qt,Ct=Vt*Jt,nt=Vt*zt,J=Vt*Qt;return K[0]=1-jt-st,K[3]=se-J,K[6]=Pt+nt,K[1]=se+J,K[4]=1-oe-st,K[7]=pt-Ct,K[2]=Pt-nt,K[5]=pt+Ct,K[8]=1-oe-jt,K}function et(K,B){var h=B[0],mt=B[1],gt=B[2],Vt=B[3],Jt=B[4],zt=B[5],Qt=B[6],oe=B[7],se=B[8],jt=B[9],Pt=B[10],pt=B[11],st=B[12],Ct=B[13],nt=B[14],J=B[15],vt=h*zt-mt*Jt,Tt=h*Qt-gt*Jt,Ht=h*oe-Vt*Jt,ue=mt*Qt-gt*zt,Ce=mt*oe-Vt*zt,Fe=gt*oe-Vt*Qt,Ve=se*Ct-jt*st,dr=se*nt-Pt*st,xr=se*J-pt*st,Er=jt*nt-Pt*Ct,Yr=jt*J-pt*Ct,gr=Pt*J-pt*nt,ri=vt*gr-Tt*Yr+Ht*Er+ue*xr-Ce*dr+Fe*Ve;return ri?(ri=1/ri,K[0]=(zt*gr-Qt*Yr+oe*Er)*ri,K[1]=(Qt*xr-Jt*gr-oe*dr)*ri,K[2]=(Jt*Yr-zt*xr+oe*Ve)*ri,K[3]=(gt*Yr-mt*gr-Vt*Er)*ri,K[4]=(h*gr-gt*xr+Vt*dr)*ri,K[5]=(mt*xr-h*Yr-Vt*Ve)*ri,K[6]=(Ct*Fe-nt*Ce+J*ue)*ri,K[7]=(nt*Ht-st*Fe-J*Tt)*ri,K[8]=(st*Ce-Ct*Ht+J*vt)*ri,K):null}function Q(K,B,h){return K[0]=2/B,K[1]=0,K[2]=0,K[3]=0,K[4]=-2/h,K[5]=0,K[6]=-1,K[7]=1,K[8]=1,K}function ct(K){return"mat3("+K[0]+", "+K[1]+", "+K[2]+", "+K[3]+", "+K[4]+", "+K[5]+", "+K[6]+", "+K[7]+", "+K[8]+")"}function Lt(K){return Math.hypot(K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],K[8])}function _t(K,B,h){return K[0]=B[0]+h[0],K[1]=B[1]+h[1],K[2]=B[2]+h[2],K[3]=B[3]+h[3],K[4]=B[4]+h[4],K[5]=B[5]+h[5],K[6]=B[6]+h[6],K[7]=B[7]+h[7],K[8]=B[8]+h[8],K}function yt(K,B,h){return K[0]=B[0]-h[0],K[1]=B[1]-h[1],K[2]=B[2]-h[2],K[3]=B[3]-h[3],K[4]=B[4]-h[4],K[5]=B[5]-h[5],K[6]=B[6]-h[6],K[7]=B[7]-h[7],K[8]=B[8]-h[8],K}function bt(K,B,h){return K[0]=B[0]*h,K[1]=B[1]*h,K[2]=B[2]*h,K[3]=B[3]*h,K[4]=B[4]*h,K[5]=B[5]*h,K[6]=B[6]*h,K[7]=B[7]*h,K[8]=B[8]*h,K}function Mt(K,B,h,mt){return K[0]=B[0]+h[0]*mt,K[1]=B[1]+h[1]*mt,K[2]=B[2]+h[2]*mt,K[3]=B[3]+h[3]*mt,K[4]=B[4]+h[4]*mt,K[5]=B[5]+h[5]*mt,K[6]=B[6]+h[6]*mt,K[7]=B[7]+h[7]*mt,K[8]=B[8]+h[8]*mt,K}function xt(K,B){return K[0]===B[0]&&K[1]===B[1]&&K[2]===B[2]&&K[3]===B[3]&&K[4]===B[4]&&K[5]===B[5]&&K[6]===B[6]&&K[7]===B[7]&&K[8]===B[8]}function Bt(K,B){var h=K[0],mt=K[1],gt=K[2],Vt=K[3],Jt=K[4],zt=K[5],Qt=K[6],oe=K[7],se=K[8],jt=B[0],Pt=B[1],pt=B[2],st=B[3],Ct=B[4],nt=B[5],J=B[6],vt=B[7],Tt=B[8];return Math.abs(h-jt)<=m.Ib*Math.max(1,Math.abs(h),Math.abs(jt))&&Math.abs(mt-Pt)<=m.Ib*Math.max(1,Math.abs(mt),Math.abs(Pt))&&Math.abs(gt-pt)<=m.Ib*Math.max(1,Math.abs(gt),Math.abs(pt))&&Math.abs(Vt-st)<=m.Ib*Math.max(1,Math.abs(Vt),Math.abs(st))&&Math.abs(Jt-Ct)<=m.Ib*Math.max(1,Math.abs(Jt),Math.abs(Ct))&&Math.abs(zt-nt)<=m.Ib*Math.max(1,Math.abs(zt),Math.abs(nt))&&Math.abs(Qt-J)<=m.Ib*Math.max(1,Math.abs(Qt),Math.abs(J))&&Math.abs(oe-vt)<=m.Ib*Math.max(1,Math.abs(oe),Math.abs(vt))&&Math.abs(se-Tt)<=m.Ib*Math.max(1,Math.abs(se),Math.abs(Tt))}var wt=x,H=yt},7124:function(lt,S,d){"use strict";d.r(S),d.d(S,{create:function(){return L},clone:function(){return I},fromValues:function(){return P},copy:function(){return _},set:function(){return T},add:function(){return M},subtract:function(){return A},multiply:function(){return p},divide:function(){return w},ceil:function(){return y},floor:function(){return b},min:function(){return x},max:function(){return E},round:function(){return k},scale:function(){return D},scaleAndAdd:function(){return N},distance:function(){return z},squaredDistance:function(){return W},length:function(){return X},squaredLength:function(){return U},negate:function(){return et},inverse:function(){return Q},normalize:function(){return ct},dot:function(){return Lt},cross:function(){return _t},lerp:function(){return yt},random:function(){return bt},transformMat2:function(){return Mt},transformMat2d:function(){return xt},transformMat3:function(){return Bt},transformMat4:function(){return wt},rotate:function(){return H},angle:function(){return K},zero:function(){return B},str:function(){return h},exactEquals:function(){return mt},equals:function(){return gt},len:function(){return Vt},sub:function(){return Jt},mul:function(){return zt},div:function(){return Qt},dist:function(){return oe},sqrDist:function(){return se},sqrLen:function(){return jt},forEach:function(){return Pt}});var m=d(72988);function L(){var pt=new m.WT(2);return m.WT!=Float32Array&&(pt[0]=0,pt[1]=0),pt}function I(pt){var st=new m.WT(2);return st[0]=pt[0],st[1]=pt[1],st}function P(pt,st){var Ct=new m.WT(2);return Ct[0]=pt,Ct[1]=st,Ct}function _(pt,st){return pt[0]=st[0],pt[1]=st[1],pt}function T(pt,st,Ct){return pt[0]=st,pt[1]=Ct,pt}function M(pt,st,Ct){return pt[0]=st[0]+Ct[0],pt[1]=st[1]+Ct[1],pt}function A(pt,st,Ct){return pt[0]=st[0]-Ct[0],pt[1]=st[1]-Ct[1],pt}function p(pt,st,Ct){return pt[0]=st[0]*Ct[0],pt[1]=st[1]*Ct[1],pt}function w(pt,st,Ct){return pt[0]=st[0]/Ct[0],pt[1]=st[1]/Ct[1],pt}function y(pt,st){return pt[0]=Math.ceil(st[0]),pt[1]=Math.ceil(st[1]),pt}function b(pt,st){return pt[0]=Math.floor(st[0]),pt[1]=Math.floor(st[1]),pt}function x(pt,st,Ct){return pt[0]=Math.min(st[0],Ct[0]),pt[1]=Math.min(st[1],Ct[1]),pt}function E(pt,st,Ct){return pt[0]=Math.max(st[0],Ct[0]),pt[1]=Math.max(st[1],Ct[1]),pt}function k(pt,st){return pt[0]=Math.round(st[0]),pt[1]=Math.round(st[1]),pt}function D(pt,st,Ct){return pt[0]=st[0]*Ct,pt[1]=st[1]*Ct,pt}function N(pt,st,Ct,nt){return pt[0]=st[0]+Ct[0]*nt,pt[1]=st[1]+Ct[1]*nt,pt}function z(pt,st){var Ct=st[0]-pt[0],nt=st[1]-pt[1];return Math.hypot(Ct,nt)}function W(pt,st){var Ct=st[0]-pt[0],nt=st[1]-pt[1];return Ct*Ct+nt*nt}function X(pt){var st=pt[0],Ct=pt[1];return Math.hypot(st,Ct)}function U(pt){var st=pt[0],Ct=pt[1];return st*st+Ct*Ct}function et(pt,st){return pt[0]=-st[0],pt[1]=-st[1],pt}function Q(pt,st){return pt[0]=1/st[0],pt[1]=1/st[1],pt}function ct(pt,st){var Ct=st[0],nt=st[1],J=Ct*Ct+nt*nt;return J>0&&(J=1/Math.sqrt(J)),pt[0]=st[0]*J,pt[1]=st[1]*J,pt}function Lt(pt,st){return pt[0]*st[0]+pt[1]*st[1]}function _t(pt,st,Ct){var nt=st[0]*Ct[1]-st[1]*Ct[0];return pt[0]=pt[1]=0,pt[2]=nt,pt}function yt(pt,st,Ct,nt){var J=st[0],vt=st[1];return pt[0]=J+nt*(Ct[0]-J),pt[1]=vt+nt*(Ct[1]-vt),pt}function bt(pt,st){st=st||1;var Ct=m.FD()*2*Math.PI;return pt[0]=Math.cos(Ct)*st,pt[1]=Math.sin(Ct)*st,pt}function Mt(pt,st,Ct){var nt=st[0],J=st[1];return pt[0]=Ct[0]*nt+Ct[2]*J,pt[1]=Ct[1]*nt+Ct[3]*J,pt}function xt(pt,st,Ct){var nt=st[0],J=st[1];return pt[0]=Ct[0]*nt+Ct[2]*J+Ct[4],pt[1]=Ct[1]*nt+Ct[3]*J+Ct[5],pt}function Bt(pt,st,Ct){var nt=st[0],J=st[1];return pt[0]=Ct[0]*nt+Ct[3]*J+Ct[6],pt[1]=Ct[1]*nt+Ct[4]*J+Ct[7],pt}function wt(pt,st,Ct){var nt=st[0],J=st[1];return pt[0]=Ct[0]*nt+Ct[4]*J+Ct[12],pt[1]=Ct[1]*nt+Ct[5]*J+Ct[13],pt}function H(pt,st,Ct,nt){var J=st[0]-Ct[0],vt=st[1]-Ct[1],Tt=Math.sin(nt),Ht=Math.cos(nt);return pt[0]=J*Ht-vt*Tt+Ct[0],pt[1]=J*Tt+vt*Ht+Ct[1],pt}function K(pt,st){var Ct=pt[0],nt=pt[1],J=st[0],vt=st[1],Tt=Math.sqrt(Ct*Ct+nt*nt)*Math.sqrt(J*J+vt*vt),Ht=Tt&&(Ct*J+nt*vt)/Tt;return Math.acos(Math.min(Math.max(Ht,-1),1))}function B(pt){return pt[0]=0,pt[1]=0,pt}function h(pt){return"vec2("+pt[0]+", "+pt[1]+")"}function mt(pt,st){return pt[0]===st[0]&&pt[1]===st[1]}function gt(pt,st){var Ct=pt[0],nt=pt[1],J=st[0],vt=st[1];return Math.abs(Ct-J)<=m.Ib*Math.max(1,Math.abs(Ct),Math.abs(J))&&Math.abs(nt-vt)<=m.Ib*Math.max(1,Math.abs(nt),Math.abs(vt))}var Vt=X,Jt=A,zt=p,Qt=w,oe=z,se=W,jt=U,Pt=function(){var pt=L();return function(st,Ct,nt,J,vt,Tt){var Ht,ue;for(Ct||(Ct=2),nt||(nt=0),J?ue=Math.min(J*Ct+nt,st.length):ue=st.length,Ht=nt;Ht<ue;Ht+=Ct)pt[0]=st[Ht],pt[1]=st[Ht+1],vt(pt,pt,Tt),st[Ht]=pt[0],st[Ht+1]=pt[1];return st}}()},92541:function(lt,S,d){"use strict";d.r(S),d.d(S,{create:function(){return L},clone:function(){return I},length:function(){return P},fromValues:function(){return _},copy:function(){return T},set:function(){return M},add:function(){return A},subtract:function(){return p},multiply:function(){return w},divide:function(){return y},ceil:function(){return b},floor:function(){return x},min:function(){return E},max:function(){return k},round:function(){return D},scale:function(){return N},scaleAndAdd:function(){return z},distance:function(){return W},squaredDistance:function(){return X},squaredLength:function(){return U},negate:function(){return et},inverse:function(){return Q},normalize:function(){return ct},dot:function(){return Lt},cross:function(){return _t},lerp:function(){return yt},hermite:function(){return bt},bezier:function(){return Mt},random:function(){return xt},transformMat4:function(){return Bt},transformMat3:function(){return wt},transformQuat:function(){return H},rotateX:function(){return K},rotateY:function(){return B},rotateZ:function(){return h},angle:function(){return mt},zero:function(){return gt},str:function(){return Vt},exactEquals:function(){return Jt},equals:function(){return zt},sub:function(){return Qt},mul:function(){return oe},div:function(){return se},dist:function(){return jt},sqrDist:function(){return Pt},len:function(){return pt},sqrLen:function(){return st},forEach:function(){return Ct}});var m=d(72988);function L(){var nt=new m.WT(3);return m.WT!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0),nt}function I(nt){var J=new m.WT(3);return J[0]=nt[0],J[1]=nt[1],J[2]=nt[2],J}function P(nt){var J=nt[0],vt=nt[1],Tt=nt[2];return Math.hypot(J,vt,Tt)}function _(nt,J,vt){var Tt=new m.WT(3);return Tt[0]=nt,Tt[1]=J,Tt[2]=vt,Tt}function T(nt,J){return nt[0]=J[0],nt[1]=J[1],nt[2]=J[2],nt}function M(nt,J,vt,Tt){return nt[0]=J,nt[1]=vt,nt[2]=Tt,nt}function A(nt,J,vt){return nt[0]=J[0]+vt[0],nt[1]=J[1]+vt[1],nt[2]=J[2]+vt[2],nt}function p(nt,J,vt){return nt[0]=J[0]-vt[0],nt[1]=J[1]-vt[1],nt[2]=J[2]-vt[2],nt}function w(nt,J,vt){return nt[0]=J[0]*vt[0],nt[1]=J[1]*vt[1],nt[2]=J[2]*vt[2],nt}function y(nt,J,vt){return nt[0]=J[0]/vt[0],nt[1]=J[1]/vt[1],nt[2]=J[2]/vt[2],nt}function b(nt,J){return nt[0]=Math.ceil(J[0]),nt[1]=Math.ceil(J[1]),nt[2]=Math.ceil(J[2]),nt}function x(nt,J){return nt[0]=Math.floor(J[0]),nt[1]=Math.floor(J[1]),nt[2]=Math.floor(J[2]),nt}function E(nt,J,vt){return nt[0]=Math.min(J[0],vt[0]),nt[1]=Math.min(J[1],vt[1]),nt[2]=Math.min(J[2],vt[2]),nt}function k(nt,J,vt){return nt[0]=Math.max(J[0],vt[0]),nt[1]=Math.max(J[1],vt[1]),nt[2]=Math.max(J[2],vt[2]),nt}function D(nt,J){return nt[0]=Math.round(J[0]),nt[1]=Math.round(J[1]),nt[2]=Math.round(J[2]),nt}function N(nt,J,vt){return nt[0]=J[0]*vt,nt[1]=J[1]*vt,nt[2]=J[2]*vt,nt}function z(nt,J,vt,Tt){return nt[0]=J[0]+vt[0]*Tt,nt[1]=J[1]+vt[1]*Tt,nt[2]=J[2]+vt[2]*Tt,nt}function W(nt,J){var vt=J[0]-nt[0],Tt=J[1]-nt[1],Ht=J[2]-nt[2];return Math.hypot(vt,Tt,Ht)}function X(nt,J){var vt=J[0]-nt[0],Tt=J[1]-nt[1],Ht=J[2]-nt[2];return vt*vt+Tt*Tt+Ht*Ht}function U(nt){var J=nt[0],vt=nt[1],Tt=nt[2];return J*J+vt*vt+Tt*Tt}function et(nt,J){return nt[0]=-J[0],nt[1]=-J[1],nt[2]=-J[2],nt}function Q(nt,J){return nt[0]=1/J[0],nt[1]=1/J[1],nt[2]=1/J[2],nt}function ct(nt,J){var vt=J[0],Tt=J[1],Ht=J[2],ue=vt*vt+Tt*Tt+Ht*Ht;return ue>0&&(ue=1/Math.sqrt(ue)),nt[0]=J[0]*ue,nt[1]=J[1]*ue,nt[2]=J[2]*ue,nt}function Lt(nt,J){return nt[0]*J[0]+nt[1]*J[1]+nt[2]*J[2]}function _t(nt,J,vt){var Tt=J[0],Ht=J[1],ue=J[2],Ce=vt[0],Fe=vt[1],Ve=vt[2];return nt[0]=Ht*Ve-ue*Fe,nt[1]=ue*Ce-Tt*Ve,nt[2]=Tt*Fe-Ht*Ce,nt}function yt(nt,J,vt,Tt){var Ht=J[0],ue=J[1],Ce=J[2];return nt[0]=Ht+Tt*(vt[0]-Ht),nt[1]=ue+Tt*(vt[1]-ue),nt[2]=Ce+Tt*(vt[2]-Ce),nt}function bt(nt,J,vt,Tt,Ht,ue){var Ce=ue*ue,Fe=Ce*(2*ue-3)+1,Ve=Ce*(ue-2)+ue,dr=Ce*(ue-1),xr=Ce*(3-2*ue);return nt[0]=J[0]*Fe+vt[0]*Ve+Tt[0]*dr+Ht[0]*xr,nt[1]=J[1]*Fe+vt[1]*Ve+Tt[1]*dr+Ht[1]*xr,nt[2]=J[2]*Fe+vt[2]*Ve+Tt[2]*dr+Ht[2]*xr,nt}function Mt(nt,J,vt,Tt,Ht,ue){var Ce=1-ue,Fe=Ce*Ce,Ve=ue*ue,dr=Fe*Ce,xr=3*ue*Fe,Er=3*Ve*Ce,Yr=Ve*ue;return nt[0]=J[0]*dr+vt[0]*xr+Tt[0]*Er+Ht[0]*Yr,nt[1]=J[1]*dr+vt[1]*xr+Tt[1]*Er+Ht[1]*Yr,nt[2]=J[2]*dr+vt[2]*xr+Tt[2]*Er+Ht[2]*Yr,nt}function xt(nt,J){J=J||1;var vt=m.FD()*2*Math.PI,Tt=m.FD()*2-1,Ht=Math.sqrt(1-Tt*Tt)*J;return nt[0]=Math.cos(vt)*Ht,nt[1]=Math.sin(vt)*Ht,nt[2]=Tt*J,nt}function Bt(nt,J,vt){var Tt=J[0],Ht=J[1],ue=J[2],Ce=vt[3]*Tt+vt[7]*Ht+vt[11]*ue+vt[15];return Ce=Ce||1,nt[0]=(vt[0]*Tt+vt[4]*Ht+vt[8]*ue+vt[12])/Ce,nt[1]=(vt[1]*Tt+vt[5]*Ht+vt[9]*ue+vt[13])/Ce,nt[2]=(vt[2]*Tt+vt[6]*Ht+vt[10]*ue+vt[14])/Ce,nt}function wt(nt,J,vt){var Tt=J[0],Ht=J[1],ue=J[2];return nt[0]=Tt*vt[0]+Ht*vt[3]+ue*vt[6],nt[1]=Tt*vt[1]+Ht*vt[4]+ue*vt[7],nt[2]=Tt*vt[2]+Ht*vt[5]+ue*vt[8],nt}function H(nt,J,vt){var Tt=vt[0],Ht=vt[1],ue=vt[2],Ce=vt[3],Fe=J[0],Ve=J[1],dr=J[2],xr=Ht*dr-ue*Ve,Er=ue*Fe-Tt*dr,Yr=Tt*Ve-Ht*Fe,gr=Ht*Yr-ue*Er,ri=ue*xr-Tt*Yr,bi=Tt*Er-Ht*xr,Qr=Ce*2;return xr*=Qr,Er*=Qr,Yr*=Qr,gr*=2,ri*=2,bi*=2,nt[0]=Fe+xr+gr,nt[1]=Ve+Er+ri,nt[2]=dr+Yr+bi,nt}function K(nt,J,vt,Tt){var Ht=[],ue=[];return Ht[0]=J[0]-vt[0],Ht[1]=J[1]-vt[1],Ht[2]=J[2]-vt[2],ue[0]=Ht[0],ue[1]=Ht[1]*Math.cos(Tt)-Ht[2]*Math.sin(Tt),ue[2]=Ht[1]*Math.sin(Tt)+Ht[2]*Math.cos(Tt),nt[0]=ue[0]+vt[0],nt[1]=ue[1]+vt[1],nt[2]=ue[2]+vt[2],nt}function B(nt,J,vt,Tt){var Ht=[],ue=[];return Ht[0]=J[0]-vt[0],Ht[1]=J[1]-vt[1],Ht[2]=J[2]-vt[2],ue[0]=Ht[2]*Math.sin(Tt)+Ht[0]*Math.cos(Tt),ue[1]=Ht[1],ue[2]=Ht[2]*Math.cos(Tt)-Ht[0]*Math.sin(Tt),nt[0]=ue[0]+vt[0],nt[1]=ue[1]+vt[1],nt[2]=ue[2]+vt[2],nt}function h(nt,J,vt,Tt){var Ht=[],ue=[];return Ht[0]=J[0]-vt[0],Ht[1]=J[1]-vt[1],Ht[2]=J[2]-vt[2],ue[0]=Ht[0]*Math.cos(Tt)-Ht[1]*Math.sin(Tt),ue[1]=Ht[0]*Math.sin(Tt)+Ht[1]*Math.cos(Tt),ue[2]=Ht[2],nt[0]=ue[0]+vt[0],nt[1]=ue[1]+vt[1],nt[2]=ue[2]+vt[2],nt}function mt(nt,J){var vt=nt[0],Tt=nt[1],Ht=nt[2],ue=J[0],Ce=J[1],Fe=J[2],Ve=Math.sqrt(vt*vt+Tt*Tt+Ht*Ht),dr=Math.sqrt(ue*ue+Ce*Ce+Fe*Fe),xr=Ve*dr,Er=xr&&Lt(nt,J)/xr;return Math.acos(Math.min(Math.max(Er,-1),1))}function gt(nt){return nt[0]=0,nt[1]=0,nt[2]=0,nt}function Vt(nt){return"vec3("+nt[0]+", "+nt[1]+", "+nt[2]+")"}function Jt(nt,J){return nt[0]===J[0]&&nt[1]===J[1]&&nt[2]===J[2]}function zt(nt,J){var vt=nt[0],Tt=nt[1],Ht=nt[2],ue=J[0],Ce=J[1],Fe=J[2];return Math.abs(vt-ue)<=m.Ib*Math.max(1,Math.abs(vt),Math.abs(ue))&&Math.abs(Tt-Ce)<=m.Ib*Math.max(1,Math.abs(Tt),Math.abs(Ce))&&Math.abs(Ht-Fe)<=m.Ib*Math.max(1,Math.abs(Ht),Math.abs(Fe))}var Qt=p,oe=w,se=y,jt=W,Pt=X,pt=P,st=U,Ct=function(){var nt=L();return function(J,vt,Tt,Ht,ue,Ce){var Fe,Ve;for(vt||(vt=3),Tt||(Tt=0),Ht?Ve=Math.min(Ht*vt+Tt,J.length):Ve=J.length,Fe=Tt;Fe<Ve;Fe+=vt)nt[0]=J[Fe],nt[1]=J[Fe+1],nt[2]=J[Fe+2],ue(nt,nt,Ce),J[Fe]=nt[0],J[Fe+1]=nt[1],J[Fe+2]=nt[2];return J}}()},75172:function(lt,S,d){var m=d(89224);lt.exports={Graph:m.Graph,json:d(17401),alg:d(54613),version:m.version}},91606:function(lt,S,d){var m=d(95329);lt.exports=L;function L(I){var P={},_=[],T;function M(A){m.has(P,A)||(P[A]=!0,T.push(A),m.each(I.successors(A),M),m.each(I.predecessors(A),M))}return m.each(I.nodes(),function(A){T=[],M(A),T.length&&_.push(T)}),_}},21482:function(lt,S,d){var m=d(95329);lt.exports=L;function L(P,_,T){m.isArray(_)||(_=[_]);var M=(P.isDirected()?P.successors:P.neighbors).bind(P),A=[],p={};return m.each(_,function(w){if(!P.hasNode(w))throw new Error("Graph does not have node: "+w);I(P,w,T==="post",p,M,A)}),A}function I(P,_,T,M,A,p){m.has(M,_)||(M[_]=!0,T||p.push(_),m.each(A(_),function(w){I(P,w,T,M,A,p)}),T&&p.push(_))}},40845:function(lt,S,d){var m=d(13746),L=d(95329);lt.exports=I;function I(P,_,T){return L.transform(P.nodes(),function(M,A){M[A]=m(P,A,_,T)},{})}},13746:function(lt,S,d){var m=d(95329),L=d(36614);lt.exports=P;var I=m.constant(1);function P(T,M,A,p){return _(T,String(M),A||I,p||function(w){return T.outEdges(w)})}function _(T,M,A,p){var w={},y=new L,b,x,E=function(k){var D=k.v!==b?k.v:k.w,N=w[D],z=A(k),W=x.distance+z;if(z<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+k+" Weight: "+z);W<N.distance&&(N.distance=W,N.predecessor=b,y.decrease(D,W))};for(T.nodes().forEach(function(k){var D=k===M?0:Number.POSITIVE_INFINITY;w[k]={distance:D},y.add(k,D)});y.size()>0&&(b=y.removeMin(),x=w[b],x.distance!==Number.POSITIVE_INFINITY);)p(b).forEach(E);return w}},59324:function(lt,S,d){var m=d(95329),L=d(94558);lt.exports=I;function I(P){return m.filter(L(P),function(_){return _.length>1||_.length===1&&P.hasEdge(_[0],_[0])})}},22893:function(lt,S,d){var m=d(95329);lt.exports=I;var L=m.constant(1);function I(_,T,M){return P(_,T||L,M||function(A){return _.outEdges(A)})}function P(_,T,M){var A={},p=_.nodes();return p.forEach(function(w){A[w]={},A[w][w]={distance:0},p.forEach(function(y){w!==y&&(A[w][y]={distance:Number.POSITIVE_INFINITY})}),M(w).forEach(function(y){var b=y.v===w?y.w:y.v,x=T(y);A[w][b]={distance:x,predecessor:w}})}),p.forEach(function(w){var y=A[w];p.forEach(function(b){var x=A[b];p.forEach(function(E){var k=x[w],D=y[E],N=x[E],z=k.distance+D.distance;z<N.distance&&(N.distance=z,N.predecessor=D.predecessor)})})}),A}},54613:function(lt,S,d){lt.exports={components:d(91606),dijkstra:d(13746),dijkstraAll:d(40845),findCycles:d(59324),floydWarshall:d(22893),isAcyclic:d(588),postorder:d(98049),preorder:d(67158),prim:d(66058),tarjan:d(94558),topsort:d(7793)}},588:function(lt,S,d){var m=d(7793);lt.exports=L;function L(I){try{m(I)}catch(P){if(P instanceof m.CycleException)return!1;throw P}return!0}},98049:function(lt,S,d){var m=d(21482);lt.exports=L;function L(I,P){return m(I,P,"post")}},67158:function(lt,S,d){var m=d(21482);lt.exports=L;function L(I,P){return m(I,P,"pre")}},66058:function(lt,S,d){var m=d(95329),L=d(6349),I=d(36614);lt.exports=P;function P(_,T){var M=new L,A={},p=new I,w;function y(x){var E=x.v===w?x.w:x.v,k=p.priority(E);if(k!==void 0){var D=T(x);D<k&&(A[E]=w,p.decrease(E,D))}}if(_.nodeCount()===0)return M;m.each(_.nodes(),function(x){p.add(x,Number.POSITIVE_INFINITY),M.setNode(x)}),p.decrease(_.nodes()[0],0);for(var b=!1;p.size()>0;){if(w=p.removeMin(),m.has(A,w))M.setEdge(w,A[w]);else{if(b)throw new Error("Input graph is not connected: "+_);b=!0}_.nodeEdges(w).forEach(y)}return M}},94558:function(lt,S,d){var m=d(95329);lt.exports=L;function L(I){var P=0,_=[],T={},M=[];function A(p){var w=T[p]={onStack:!0,lowlink:P,index:P++};if(_.push(p),I.successors(p).forEach(function(x){m.has(T,x)?T[x].onStack&&(w.lowlink=Math.min(w.lowlink,T[x].index)):(A(x),w.lowlink=Math.min(w.lowlink,T[x].lowlink))}),w.lowlink===w.index){var y=[],b;do b=_.pop(),T[b].onStack=!1,y.push(b);while(p!==b);M.push(y)}}return I.nodes().forEach(function(p){m.has(T,p)||A(p)}),M}},7793:function(lt,S,d){var m=d(95329);lt.exports=L,L.CycleException=I;function L(P){var _={},T={},M=[];function A(p){if(m.has(T,p))throw new I;m.has(_,p)||(T[p]=!0,_[p]=!0,m.each(P.predecessors(p),A),delete T[p],M.push(p))}if(m.each(P.sinks(),A),m.size(_)!==P.nodeCount())throw new I;return M}function I(){}I.prototype=new Error},36614:function(lt,S,d){var m=d(95329);lt.exports=L;function L(){this._arr=[],this._keyIndices={}}L.prototype.size=function(){return this._arr.length},L.prototype.keys=function(){return this._arr.map(function(I){return I.key})},L.prototype.has=function(I){return m.has(this._keyIndices,I)},L.prototype.priority=function(I){var P=this._keyIndices[I];if(P!==void 0)return this._arr[P].priority},L.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},L.prototype.add=function(I,P){var _=this._keyIndices;if(I=String(I),!m.has(_,I)){var T=this._arr,M=T.length;return _[I]=M,T.push({key:I,priority:P}),this._decrease(M),!0}return!1},L.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var I=this._arr.pop();return delete this._keyIndices[I.key],this._heapify(0),I.key},L.prototype.decrease=function(I,P){var _=this._keyIndices[I];if(P>this._arr[_].priority)throw new Error("New priority is greater than current priority. Key: "+I+" Old: "+this._arr[_].priority+" New: "+P);this._arr[_].priority=P,this._decrease(_)},L.prototype._heapify=function(I){var P=this._arr,_=2*I,T=_+1,M=I;_<P.length&&(M=P[_].priority<P[M].priority?_:M,T<P.length&&(M=P[T].priority<P[M].priority?T:M),M!==I&&(this._swap(I,M),this._heapify(M)))},L.prototype._decrease=function(I){for(var P=this._arr,_=P[I].priority,T;I!==0&&(T=I>>1,!(P[T].priority<_));)this._swap(I,T),I=T},L.prototype._swap=function(I,P){var _=this._arr,T=this._keyIndices,M=_[I],A=_[P];_[I]=A,_[P]=M,T[A.key]=I,T[M.key]=P}},6349:function(lt,S,d){"use strict";var m=d(95329);lt.exports=_;var L="\0",I="\0",P="";function _(y){this._isDirected=m.has(y,"directed")?y.directed:!0,this._isMultigraph=m.has(y,"multigraph")?y.multigraph:!1,this._isCompound=m.has(y,"compound")?y.compound:!1,this._label=void 0,this._defaultNodeLabelFn=m.constant(void 0),this._defaultEdgeLabelFn=m.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[I]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}_.prototype._nodeCount=0,_.prototype._edgeCount=0,_.prototype.isDirected=function(){return this._isDirected},_.prototype.isMultigraph=function(){return this._isMultigraph},_.prototype.isCompound=function(){return this._isCompound},_.prototype.setGraph=function(y){return this._label=y,this},_.prototype.graph=function(){return this._label},_.prototype.setDefaultNodeLabel=function(y){return m.isFunction(y)||(y=m.constant(y)),this._defaultNodeLabelFn=y,this},_.prototype.nodeCount=function(){return this._nodeCount},_.prototype.nodes=function(){return m.keys(this._nodes)},_.prototype.sources=function(){var y=this;return m.filter(this.nodes(),function(b){return m.isEmpty(y._in[b])})},_.prototype.sinks=function(){var y=this;return m.filter(this.nodes(),function(b){return m.isEmpty(y._out[b])})},_.prototype.setNodes=function(y,b){var x=arguments,E=this;return m.each(y,function(k){x.length>1?E.setNode(k,b):E.setNode(k)}),this},_.prototype.setNode=function(y,b){return m.has(this._nodes,y)?(arguments.length>1&&(this._nodes[y]=b),this):(this._nodes[y]=arguments.length>1?b:this._defaultNodeLabelFn(y),this._isCompound&&(this._parent[y]=I,this._children[y]={},this._children[I][y]=!0),this._in[y]={},this._preds[y]={},this._out[y]={},this._sucs[y]={},++this._nodeCount,this)},_.prototype.node=function(y){return this._nodes[y]},_.prototype.hasNode=function(y){return m.has(this._nodes,y)},_.prototype.removeNode=function(y){var b=this;if(m.has(this._nodes,y)){var x=function(E){b.removeEdge(b._edgeObjs[E])};delete this._nodes[y],this._isCompound&&(this._removeFromParentsChildList(y),delete this._parent[y],m.each(this.children(y),function(E){b.setParent(E)}),delete this._children[y]),m.each(m.keys(this._in[y]),x),delete this._in[y],delete this._preds[y],m.each(m.keys(this._out[y]),x),delete this._out[y],delete this._sucs[y],--this._nodeCount}return this},_.prototype.setParent=function(y,b){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(m.isUndefined(b))b=I;else{b+="";for(var x=b;!m.isUndefined(x);x=this.parent(x))if(x===y)throw new Error("Setting "+b+" as parent of "+y+" would create a cycle");this.setNode(b)}return this.setNode(y),this._removeFromParentsChildList(y),this._parent[y]=b,this._children[b][y]=!0,this},_.prototype._removeFromParentsChildList=function(y){delete this._children[this._parent[y]][y]},_.prototype.parent=function(y){if(this._isCompound){var b=this._parent[y];if(b!==I)return b}},_.prototype.children=function(y){if(m.isUndefined(y)&&(y=I),this._isCompound){var b=this._children[y];if(b)return m.keys(b)}else{if(y===I)return this.nodes();if(this.hasNode(y))return[]}},_.prototype.predecessors=function(y){var b=this._preds[y];if(b)return m.keys(b)},_.prototype.successors=function(y){var b=this._sucs[y];if(b)return m.keys(b)},_.prototype.neighbors=function(y){var b=this.predecessors(y);if(b)return m.union(b,this.successors(y))},_.prototype.isLeaf=function(y){var b;return this.isDirected()?b=this.successors(y):b=this.neighbors(y),b.length===0},_.prototype.filterNodes=function(y){var b=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});b.setGraph(this.graph());var x=this;m.each(this._nodes,function(D,N){y(N)&&b.setNode(N,D)}),m.each(this._edgeObjs,function(D){b.hasNode(D.v)&&b.hasNode(D.w)&&b.setEdge(D,x.edge(D))});var E={};function k(D){var N=x.parent(D);return N===void 0||b.hasNode(N)?(E[D]=N,N):N in E?E[N]:k(N)}return this._isCompound&&m.each(b.nodes(),function(D){b.setParent(D,k(D))}),b},_.prototype.setDefaultEdgeLabel=function(y){return m.isFunction(y)||(y=m.constant(y)),this._defaultEdgeLabelFn=y,this},_.prototype.edgeCount=function(){return this._edgeCount},_.prototype.edges=function(){return m.values(this._edgeObjs)},_.prototype.setPath=function(y,b){var x=this,E=arguments;return m.reduce(y,function(k,D){return E.length>1?x.setEdge(k,D,b):x.setEdge(k,D),D}),this},_.prototype.setEdge=function(){var y,b,x,E,k=!1,D=arguments[0];typeof D=="object"&&D!==null&&"v"in D?(y=D.v,b=D.w,x=D.name,arguments.length===2&&(E=arguments[1],k=!0)):(y=D,b=arguments[1],x=arguments[3],arguments.length>2&&(E=arguments[2],k=!0)),y=""+y,b=""+b,m.isUndefined(x)||(x=""+x);var N=A(this._isDirected,y,b,x);if(m.has(this._edgeLabels,N))return k&&(this._edgeLabels[N]=E),this;if(!m.isUndefined(x)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(y),this.setNode(b),this._edgeLabels[N]=k?E:this._defaultEdgeLabelFn(y,b,x);var z=p(this._isDirected,y,b,x);return y=z.v,b=z.w,Object.freeze(z),this._edgeObjs[N]=z,T(this._preds[b],y),T(this._sucs[y],b),this._in[b][N]=z,this._out[y][N]=z,this._edgeCount++,this},_.prototype.edge=function(y,b,x){var E=arguments.length===1?w(this._isDirected,arguments[0]):A(this._isDirected,y,b,x);return this._edgeLabels[E]},_.prototype.hasEdge=function(y,b,x){var E=arguments.length===1?w(this._isDirected,arguments[0]):A(this._isDirected,y,b,x);return m.has(this._edgeLabels,E)},_.prototype.removeEdge=function(y,b,x){var E=arguments.length===1?w(this._isDirected,arguments[0]):A(this._isDirected,y,b,x),k=this._edgeObjs[E];return k&&(y=k.v,b=k.w,delete this._edgeLabels[E],delete this._edgeObjs[E],M(this._preds[b],y),M(this._sucs[y],b),delete this._in[b][E],delete this._out[y][E],this._edgeCount--),this},_.prototype.inEdges=function(y,b){var x=this._in[y];if(x){var E=m.values(x);return b?m.filter(E,function(k){return k.v===b}):E}},_.prototype.outEdges=function(y,b){var x=this._out[y];if(x){var E=m.values(x);return b?m.filter(E,function(k){return k.w===b}):E}},_.prototype.nodeEdges=function(y,b){var x=this.inEdges(y,b);if(x)return x.concat(this.outEdges(y,b))};function T(y,b){y[b]?y[b]++:y[b]=1}function M(y,b){--y[b]||delete y[b]}function A(y,b,x,E){var k=""+b,D=""+x;if(!y&&k>D){var N=k;k=D,D=N}return k+P+D+P+(m.isUndefined(E)?L:E)}function p(y,b,x,E){var k=""+b,D=""+x;if(!y&&k>D){var N=k;k=D,D=N}var z={v:k,w:D};return E&&(z.name=E),z}function w(y,b){return A(y,b.v,b.w,b.name)}},89224:function(lt,S,d){lt.exports={Graph:d(6349),version:d(16544)}},17401:function(lt,S,d){var m=d(95329),L=d(6349);lt.exports={write:I,read:T};function I(M){var A={options:{directed:M.isDirected(),multigraph:M.isMultigraph(),compound:M.isCompound()},nodes:P(M),edges:_(M)};return m.isUndefined(M.graph())||(A.value=m.clone(M.graph())),A}function P(M){return m.map(M.nodes(),function(A){var p=M.node(A),w=M.parent(A),y={v:A};return m.isUndefined(p)||(y.value=p),m.isUndefined(w)||(y.parent=w),y})}function _(M){return m.map(M.edges(),function(A){var p=M.edge(A),w={v:A.v,w:A.w};return m.isUndefined(A.name)||(w.name=A.name),m.isUndefined(p)||(w.value=p),w})}function T(M){var A=new L(M.options).setGraph(M.value);return m.each(M.nodes,function(p){A.setNode(p.v,p.value),p.parent&&A.setParent(p.v,p.parent)}),m.each(M.edges,function(p){A.setEdge({v:p.v,w:p.w,name:p.name},p.value)}),A}},95329:function(lt,S,d){var m;try{m={clone:d(76833),constant:d(13503),each:d(76934),filter:d(64725),has:d(99946),isArray:d(80744),isEmpty:d(61627),isFunction:d(9363),isUndefined:d(16513),keys:d(55451),map:d(9924),reduce:d(16473),size:d(40617),transform:d(91116),union:d(44065),values:d(81229)}}catch(L){}m||(m=window._),lt.exports=m},16544:function(lt){lt.exports="2.1.8"},81104:function(lt){typeof Object.create=="function"?lt.exports=function(d,m){d.super_=m,d.prototype=Object.create(m.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:lt.exports=function(d,m){d.super_=m;var L=function(){};L.prototype=m.prototype,d.prototype=new L,d.prototype.constructor=d}},34508:function(lt){var S=[],d=[],m="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function L(P,_){if(_=_||{},P===void 0)throw new Error(m);var T=_.prepend===!0?"prepend":"append",M=_.container!==void 0?_.container:document.querySelector("head"),A=S.indexOf(M);A===-1&&(A=S.push(M)-1,d[A]={});var p;return d[A]!==void 0&&d[A][T]!==void 0?p=d[A][T]:(p=d[A][T]=I(),T==="prepend"?M.insertBefore(p,M.childNodes[0]):M.appendChild(p)),P.charCodeAt(0)===65279&&(P=P.substr(1,P.length)),p.styleSheet?p.styleSheet.cssText+=P:p.textContent+=P,p}function I(){var P=document.createElement("style");return P.setAttribute("type","text/css"),P}lt.exports=L,lt.exports.insertCss=L},22948:function(lt){lt.exports=function(d){return!d||typeof d=="string"?!1:d instanceof Array||Array.isArray(d)||d.length>=0&&(d.splice instanceof Function||Object.getOwnPropertyDescriptor(d,d.length-1)&&d.constructor.name!=="String")}},84271:function(lt,S,d){var m=d(17424);function L(I,P){var _=I==null?0:I.length;return!!_&&m(I,P,0)>-1}lt.exports=L},94874:function(lt){function S(d,m,L){for(var I=-1,P=d==null?0:d.length;++I<P;)if(L(m,d[I]))return!0;return!1}lt.exports=S},99861:function(lt){function S(d,m,L,I){var P=-1,_=d==null?0:d.length;for(I&&_&&(L=d[++P]);++P<_;)L=m(L,d[P],P,d);return L}lt.exports=S},2659:function(lt,S,d){var m=d(45029);function L(I,P,_){for(var T=-1,M=I.length;++T<M;){var A=I[T],p=P(A);if(p!=null&&(w===void 0?p===p&&!m(p):_(p,w)))var w=p,y=A}return y}lt.exports=L},32872:function(lt,S,d){var m=d(44107);function L(I,P){var _=[];return m(I,function(T,M,A){P(T,M,A)&&_.push(T)}),_}lt.exports=L},51533:function(lt){function S(d,m,L,I){for(var P=d.length,_=L+(I?1:-1);I?_--:++_<P;)if(m(d[_],_,d))return _;return-1}lt.exports=S},9256:function(lt,S,d){var m=d(57095),L=d(88133);function I(P,_,T,M,A){var p=-1,w=P.length;for(T||(T=L),A||(A=[]);++p<w;){var y=P[p];_>0&&T(y)?_>1?I(y,_-1,T,M,A):m(A,y):M||(A[A.length]=y)}return A}lt.exports=I},40302:function(lt){function S(d,m){return d>m}lt.exports=S},3251:function(lt){var S=Object.prototype,d=S.hasOwnProperty;function m(L,I){return L!=null&&d.call(L,I)}lt.exports=m},17424:function(lt,S,d){var m=d(51533),L=d(8373),I=d(49237);function P(_,T,M){return T===T?I(_,T,M):m(_,L,M)}lt.exports=P},8373:function(lt){function S(d){return d!==d}lt.exports=S},93757:function(lt){function S(d,m){return d<m}lt.exports=S},58506:function(lt,S,d){var m=d(75010),L=d(89147),I=d(95979),P=d(65487),_=d(33065),T=d(38342),M=d(11249),A=d(46962),p=d(80744);function w(y,b,x){b.length?b=m(b,function(D){return p(D)?function(N){return L(N,D.length===1?D[0]:D)}:D}):b=[A];var E=-1;b=m(b,T(I));var k=P(y,function(D,N,z){var W=m(b,function(X){return X(D)});return{criteria:W,index:++E,value:D}});return _(k,function(D,N){return M(D,N,x)})}lt.exports=w},88832:function(lt,S,d){var m=d(10867),L=d(37879);function I(P,_){return m(P,_,function(T,M){return L(P,M)})}lt.exports=I},10867:function(lt,S,d){var m=d(89147),L=d(36897),I=d(1186);function P(_,T,M){for(var A=-1,p=T.length,w={};++A<p;){var y=T[A],b=m(_,y);M(b,y)&&L(w,I(y,_),b)}return w}lt.exports=P},36121:function(lt){var S=Math.ceil,d=Math.max;function m(L,I,P,_){for(var T=-1,M=d(S((I-L)/(P||1)),0),A=Array(M);M--;)A[_?M:++T]=L,L+=P;return A}lt.exports=m},30739:function(lt){function S(d,m,L,I,P){return P(d,function(_,T,M){L=I?(I=!1,_):m(L,_,T,M)}),L}lt.exports=S},36897:function(lt,S,d){var m=d(60348),L=d(1186),I=d(70213),P=d(20816),_=d(9171);function T(M,A,p,w){if(!P(M))return M;A=L(A,M);for(var y=-1,b=A.length,x=b-1,E=M;E!=null&&++y<b;){var k=_(A[y]),D=p;if(k==="__proto__"||k==="constructor"||k==="prototype")return M;if(y!=x){var N=E[k];D=w?w(N,k,E):void 0,D===void 0&&(D=P(N)?N:I(A[y+1])?[]:{})}m(E,k,D),E=E[k]}return M}lt.exports=T},33065:function(lt){function S(d,m){var L=d.length;for(d.sort(m);L--;)d[L]=d[L].value;return d}lt.exports=S},29098:function(lt,S,d){var m=d(98924),L=d(84271),I=d(94874),P=d(1931),_=d(47506),T=d(79679),M=200;function A(p,w,y){var b=-1,x=L,E=p.length,k=!0,D=[],N=D;if(y)k=!1,x=I;else if(E>=M){var z=w?null:_(p);if(z)return T(z);k=!1,x=P,N=new m}else N=w?[]:D;t:for(;++b<E;){var W=p[b],X=w?w(W):W;if(W=y||W!==0?W:0,k&&X===X){for(var U=N.length;U--;)if(N[U]===X)continue t;w&&N.push(X),D.push(W)}else x(N,X,y)||(N!==D&&N.push(X),D.push(W))}return D}lt.exports=A},20720:function(lt,S,d){var m=d(75010);function L(I,P){return m(P,function(_){return I[_]})}lt.exports=L},94484:function(lt){function S(d,m,L){for(var I=-1,P=d.length,_=m.length,T={};++I<P;){var M=I<_?m[I]:void 0;L(T,d[I],M)}return T}lt.exports=S},83018:function(lt,S,d){var m=d(45029);function L(I,P){if(I!==P){var _=I!==void 0,T=I===null,M=I===I,A=m(I),p=P!==void 0,w=P===null,y=P===P,b=m(P);if(!w&&!b&&!A&&I>P||A&&p&&y&&!w&&!b||T&&p&&y||!_&&y||!M)return 1;if(!T&&!A&&!b&&I<P||b&&_&&M&&!T&&!A||w&&_&&M||!p&&M||!y)return-1}return 0}lt.exports=L},11249:function(lt,S,d){var m=d(83018);function L(I,P,_){for(var T=-1,M=I.criteria,A=P.criteria,p=M.length,w=_.length;++T<p;){var y=m(M[T],A[T]);if(y){if(T>=w)return y;var b=_[T];return y*(b=="desc"?-1:1)}}return I.index-P.index}lt.exports=L},19554:function(lt,S,d){var m=d(95979),L=d(24665),I=d(55451);function P(_){return function(T,M,A){var p=Object(T);if(!L(T)){var w=m(M,3);T=I(T),M=function(b){return w(p[b],b,p)}}var y=_(T,M,A);return y>-1?p[w?T[y]:y]:void 0}}lt.exports=P},76106:function(lt,S,d){var m=d(36121),L=d(8138),I=d(97341);function P(_){return function(T,M,A){return A&&typeof A!="number"&&L(T,M,A)&&(M=A=void 0),T=I(T),M===void 0?(M=T,T=0):M=I(M),A=A===void 0?T<M?1:-1:I(A),m(T,M,A,_)}}lt.exports=P},47506:function(lt,S,d){var m=d(23599),L=d(9958),I=d(79679),P=1/0,_=m&&1/I(new m([,-0]))[1]==P?function(T){return new m(T)}:L;lt.exports=_},522:function(lt,S,d){var m=d(40151),L=d(19652),I=d(71152);function P(_){return I(L(_,void 0,m),_+"")}lt.exports=P},88133:function(lt,S,d){var m=d(91869),L=d(13053),I=d(80744),P=m?m.isConcatSpreadable:void 0;function _(T){return I(T)||L(T)||!!(P&&T&&T[P])}lt.exports=_},49237:function(lt){function S(d,m,L){for(var I=L-1,P=d.length;++I<P;)if(d[I]===m)return I;return-1}lt.exports=S},76833:function(lt,S,d){var m=d(99045),L=4;function I(P){return m(P,L)}lt.exports=I},28548:function(lt,S,d){var m=d(92918),L=d(43607),I=d(8138),P=d(56730),_=Object.prototype,T=_.hasOwnProperty,M=m(function(A,p){A=Object(A);var w=-1,y=p.length,b=y>2?p[2]:void 0;for(b&&I(p[0],p[1],b)&&(y=1);++w<y;)for(var x=p[w],E=P(x),k=-1,D=E.length;++k<D;){var N=E[k],z=A[N];(z===void 0||L(z,_[N])&&!T.call(A,N))&&(A[N]=x[N])}return A});lt.exports=M},64725:function(lt,S,d){var m=d(86952),L=d(32872),I=d(95979),P=d(80744);function _(T,M){var A=P(T)?m:L;return A(T,I(M,3))}lt.exports=_},79785:function(lt,S,d){var m=d(19554),L=d(9991),I=m(L);lt.exports=I},9991:function(lt,S,d){var m=d(51533),L=d(95979),I=d(12824),P=Math.max;function _(T,M,A){var p=T==null?0:T.length;if(!p)return-1;var w=A==null?0:I(A);return w<0&&(w=P(p+w,0)),m(T,L(M,3),w)}lt.exports=_},40151:function(lt,S,d){var m=d(9256);function L(I){var P=I==null?0:I.length;return P?m(I,1):[]}lt.exports=L},23190:function(lt,S,d){var m=d(14018),L=d(11756),I=d(56730);function P(_,T){return _==null?_:m(_,L(T),I)}lt.exports=P},99946:function(lt,S,d){var m=d(3251),L=d(63100);function I(P,_){return P!=null&&L(P,_,m)}lt.exports=I},61627:function(lt,S,d){var m=d(6019),L=d(66139),I=d(13053),P=d(80744),_=d(24665),T=d(57835),M=d(7975),A=d(18397),p="[object Map]",w="[object Set]",y=Object.prototype,b=y.hasOwnProperty;function x(E){if(E==null)return!0;if(_(E)&&(P(E)||typeof E=="string"||typeof E.splice=="function"||T(E)||A(E)||I(E)))return!E.length;var k=L(E);if(k==p||k==w)return!E.size;if(M(E))return!m(E).length;for(var D in E)if(b.call(E,D))return!1;return!0}lt.exports=x},16513:function(lt){function S(d){return d===void 0}lt.exports=S},10611:function(lt){function S(d){var m=d==null?0:d.length;return m?d[m-1]:void 0}lt.exports=S},70642:function(lt,S,d){var m=d(42813),L=d(1585),I=d(95979);function P(_,T){var M={};return T=I(T,3),L(_,function(A,p,w){m(M,p,T(A,p,w))}),M}lt.exports=P},95987:function(lt,S,d){var m=d(2659),L=d(40302),I=d(46962);function P(_){return _&&_.length?m(_,I,L):void 0}lt.exports=P},73376:function(lt,S,d){var m=d(2659),L=d(93757),I=d(46962);function P(_){return _&&_.length?m(_,I,L):void 0}lt.exports=P},83296:function(lt,S,d){var m=d(2659),L=d(95979),I=d(93757);function P(_,T){return _&&_.length?m(_,L(T,2),I):void 0}lt.exports=P},9958:function(lt){function S(){}lt.exports=S},89409:function(lt,S,d){var m=d(88832),L=d(522),I=L(function(P,_){return P==null?{}:m(P,_)});lt.exports=I},60859:function(lt,S,d){var m=d(76106),L=m();lt.exports=L},16473:function(lt,S,d){var m=d(99861),L=d(44107),I=d(95979),P=d(30739),_=d(80744);function T(M,A,p){var w=_(M)?m:P,y=arguments.length<3;return w(M,I(A,4),p,y,L)}lt.exports=T},40617:function(lt,S,d){var m=d(6019),L=d(66139),I=d(24665),P=d(7941),_=d(29405),T="[object Map]",M="[object Set]";function A(p){if(p==null)return 0;if(I(p))return P(p)?_(p):p.length;var w=L(p);return w==T||w==M?p.size:m(p).length}lt.exports=A},351:function(lt,S,d){var m=d(9256),L=d(58506),I=d(92918),P=d(8138),_=I(function(T,M){if(T==null)return[];var A=M.length;return A>1&&P(T,M[0],M[1])?M=[]:A>2&&P(M[0],M[1],M[2])&&(M=[M[0]]),L(T,m(M,1),[])});lt.exports=_},91116:function(lt,S,d){var m=d(74809),L=d(35024),I=d(1585),P=d(95979),_=d(49217),T=d(80744),M=d(57835),A=d(9363),p=d(20816),w=d(18397);function y(b,x,E){var k=T(b),D=k||M(b)||w(b);if(x=P(x,4),E==null){var N=b&&b.constructor;D?E=k?new N:[]:p(b)?E=A(N)?L(_(b)):{}:E={}}return(D?m:I)(b,function(z,W,X){return x(E,z,W,X)}),E}lt.exports=y},44065:function(lt,S,d){var m=d(9256),L=d(92918),I=d(29098),P=d(41590),_=L(function(T){return I(m(T,1,P,!0))});lt.exports=_},95708:function(lt,S,d){var m=d(44140),L=0;function I(P){var _=++L;return m(P)+_}lt.exports=I},81229:function(lt,S,d){var m=d(20720),L=d(55451);function I(P){return P==null?[]:m(P,L(P))}lt.exports=I},65441:function(lt,S,d){var m=d(60348),L=d(94484);function I(P,_){return L(P||[],_||[],m)}lt.exports=I},75029:function(lt,S,d){"use strict";var m=d(22948),L=Array.prototype.concat,I=Array.prototype.slice,P=lt.exports=function(T){for(var M=[],A=0,p=T.length;A<p;A++){var w=T[A];m(w)?M=L.call(M,I.call(w)):M.push(w)}return M};P.wrap=function(_){return function(){return _(P(arguments))}}},44614:function(lt,S,d){"use strict";d.r(S),d.d(S,{__extends:function(){return L},__assign:function(){return I},__rest:function(){return P},__decorate:function(){return _},__param:function(){return T},__metadata:function(){return M},__awaiter:function(){return A},__generator:function(){return p},__createBinding:function(){return w},__exportStar:function(){return y},__values:function(){return b},__read:function(){return x},__spread:function(){return E},__spreadArrays:function(){return k},__spreadArray:function(){return D},__await:function(){return N},__asyncGenerator:function(){return z},__asyncDelegator:function(){return W},__asyncValues:function(){return X},__makeTemplateObject:function(){return U},__importStar:function(){return Q},__importDefault:function(){return ct},__classPrivateFieldGet:function(){return Lt},__classPrivateFieldSet:function(){return _t},__classPrivateFieldIn:function(){return yt}});var m=function(bt,Mt){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xt,Bt){xt.__proto__=Bt}||function(xt,Bt){for(var wt in Bt)Object.prototype.hasOwnProperty.call(Bt,wt)&&(xt[wt]=Bt[wt])},m(bt,Mt)};function L(bt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");m(bt,Mt);function xt(){this.constructor=bt}bt.prototype=Mt===null?Object.create(Mt):(xt.prototype=Mt.prototype,new xt)}var I=function(){return I=Object.assign||function(Mt){for(var xt,Bt=1,wt=arguments.length;Bt<wt;Bt++){xt=arguments[Bt];for(var H in xt)Object.prototype.hasOwnProperty.call(xt,H)&&(Mt[H]=xt[H])}return Mt},I.apply(this,arguments)};function P(bt,Mt){var xt={};for(var Bt in bt)Object.prototype.hasOwnProperty.call(bt,Bt)&&Mt.indexOf(Bt)<0&&(xt[Bt]=bt[Bt]);if(bt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,Bt=Object.getOwnPropertySymbols(bt);wt<Bt.length;wt++)Mt.indexOf(Bt[wt])<0&&Object.prototype.propertyIsEnumerable.call(bt,Bt[wt])&&(xt[Bt[wt]]=bt[Bt[wt]]);return xt}function _(bt,Mt,xt,Bt){var wt=arguments.length,H=wt<3?Mt:Bt===null?Bt=Object.getOwnPropertyDescriptor(Mt,xt):Bt,K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(bt,Mt,xt,Bt);else for(var B=bt.length-1;B>=0;B--)(K=bt[B])&&(H=(wt<3?K(H):wt>3?K(Mt,xt,H):K(Mt,xt))||H);return wt>3&&H&&Object.defineProperty(Mt,xt,H),H}function T(bt,Mt){return function(xt,Bt){Mt(xt,Bt,bt)}}function M(bt,Mt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(bt,Mt)}function A(bt,Mt,xt,Bt){function wt(H){return H instanceof xt?H:new xt(function(K){K(H)})}return new(xt||(xt=Promise))(function(H,K){function B(gt){try{mt(Bt.next(gt))}catch(Vt){K(Vt)}}function h(gt){try{mt(Bt.throw(gt))}catch(Vt){K(Vt)}}function mt(gt){gt.done?H(gt.value):wt(gt.value).then(B,h)}mt((Bt=Bt.apply(bt,Mt||[])).next())})}function p(bt,Mt){var xt={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},Bt,wt,H,K;return K={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(K[Symbol.iterator]=function(){return this}),K;function B(mt){return function(gt){return h([mt,gt])}}function h(mt){if(Bt)throw new TypeError("Generator is already executing.");for(;xt;)try{if(Bt=1,wt&&(H=mt[0]&2?wt.return:mt[0]?wt.throw||((H=wt.return)&&H.call(wt),0):wt.next)&&!(H=H.call(wt,mt[1])).done)return H;switch(wt=0,H&&(mt=[mt[0]&2,H.value]),mt[0]){case 0:case 1:H=mt;break;case 4:return xt.label++,{value:mt[1],done:!1};case 5:xt.label++,wt=mt[1],mt=[0];continue;case 7:mt=xt.ops.pop(),xt.trys.pop();continue;default:if(H=xt.trys,!(H=H.length>0&&H[H.length-1])&&(mt[0]===6||mt[0]===2)){xt=0;continue}if(mt[0]===3&&(!H||mt[1]>H[0]&&mt[1]<H[3])){xt.label=mt[1];break}if(mt[0]===6&&xt.label<H[1]){xt.label=H[1],H=mt;break}if(H&&xt.label<H[2]){xt.label=H[2],xt.ops.push(mt);break}H[2]&&xt.ops.pop(),xt.trys.pop();continue}mt=Mt.call(bt,xt)}catch(gt){mt=[6,gt],wt=0}finally{Bt=H=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}}var w=Object.create?function(bt,Mt,xt,Bt){Bt===void 0&&(Bt=xt);var wt=Object.getOwnPropertyDescriptor(Mt,xt);(!wt||("get"in wt?!Mt.__esModule:wt.writable||wt.configurable))&&(wt={enumerable:!0,get:function(){return Mt[xt]}}),Object.defineProperty(bt,Bt,wt)}:function(bt,Mt,xt,Bt){Bt===void 0&&(Bt=xt),bt[Bt]=Mt[xt]};function y(bt,Mt){for(var xt in bt)xt!=="default"&&!Object.prototype.hasOwnProperty.call(Mt,xt)&&w(Mt,bt,xt)}function b(bt){var Mt=typeof Symbol=="function"&&Symbol.iterator,xt=Mt&&bt[Mt],Bt=0;if(xt)return xt.call(bt);if(bt&&typeof bt.length=="number")return{next:function(){return bt&&Bt>=bt.length&&(bt=void 0),{value:bt&&bt[Bt++],done:!bt}}};throw new TypeError(Mt?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(bt,Mt){var xt=typeof Symbol=="function"&&bt[Symbol.iterator];if(!xt)return bt;var Bt=xt.call(bt),wt,H=[],K;try{for(;(Mt===void 0||Mt-- >0)&&!(wt=Bt.next()).done;)H.push(wt.value)}catch(B){K={error:B}}finally{try{wt&&!wt.done&&(xt=Bt.return)&&xt.call(Bt)}finally{if(K)throw K.error}}return H}function E(){for(var bt=[],Mt=0;Mt<arguments.length;Mt++)bt=bt.concat(x(arguments[Mt]));return bt}function k(){for(var bt=0,Mt=0,xt=arguments.length;Mt<xt;Mt++)bt+=arguments[Mt].length;for(var Bt=Array(bt),wt=0,Mt=0;Mt<xt;Mt++)for(var H=arguments[Mt],K=0,B=H.length;K<B;K++,wt++)Bt[wt]=H[K];return Bt}function D(bt,Mt,xt){if(xt||arguments.length===2)for(var Bt=0,wt=Mt.length,H;Bt<wt;Bt++)(H||!(Bt in Mt))&&(H||(H=Array.prototype.slice.call(Mt,0,Bt)),H[Bt]=Mt[Bt]);return bt.concat(H||Array.prototype.slice.call(Mt))}function N(bt){return this instanceof N?(this.v=bt,this):new N(bt)}function z(bt,Mt,xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Bt=xt.apply(bt,Mt||[]),wt,H=[];return wt={},K("next"),K("throw"),K("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function K(Jt){Bt[Jt]&&(wt[Jt]=function(zt){return new Promise(function(Qt,oe){H.push([Jt,zt,Qt,oe])>1||B(Jt,zt)})})}function B(Jt,zt){try{h(Bt[Jt](zt))}catch(Qt){Vt(H[0][3],Qt)}}function h(Jt){Jt.value instanceof N?Promise.resolve(Jt.value.v).then(mt,gt):Vt(H[0][2],Jt)}function mt(Jt){B("next",Jt)}function gt(Jt){B("throw",Jt)}function Vt(Jt,zt){Jt(zt),H.shift(),H.length&&B(H[0][0],H[0][1])}}function W(bt){var Mt,xt;return Mt={},Bt("next"),Bt("throw",function(wt){throw wt}),Bt("return"),Mt[Symbol.iterator]=function(){return this},Mt;function Bt(wt,H){Mt[wt]=bt[wt]?function(K){return(xt=!xt)?{value:N(bt[wt](K)),done:wt==="return"}:H?H(K):K}:H}}function X(bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Mt=bt[Symbol.asyncIterator],xt;return Mt?Mt.call(bt):(bt=typeof b=="function"?b(bt):bt[Symbol.iterator](),xt={},Bt("next"),Bt("throw"),Bt("return"),xt[Symbol.asyncIterator]=function(){return this},xt);function Bt(H){xt[H]=bt[H]&&function(K){return new Promise(function(B,h){K=bt[H](K),wt(B,h,K.done,K.value)})}}function wt(H,K,B,h){Promise.resolve(h).then(function(mt){H({value:mt,done:B})},K)}}function U(bt,Mt){return Object.defineProperty?Object.defineProperty(bt,"raw",{value:Mt}):bt.raw=Mt,bt}var et=Object.create?function(bt,Mt){Object.defineProperty(bt,"default",{enumerable:!0,value:Mt})}:function(bt,Mt){bt.default=Mt};function Q(bt){if(bt&&bt.__esModule)return bt;var Mt={};if(bt!=null)for(var xt in bt)xt!=="default"&&Object.prototype.hasOwnProperty.call(bt,xt)&&w(Mt,bt,xt);return et(Mt,bt),Mt}function ct(bt){return bt&&bt.__esModule?bt:{default:bt}}function Lt(bt,Mt,xt,Bt){if(xt==="a"&&!Bt)throw new TypeError("Private accessor was defined without a getter");if(typeof Mt=="function"?bt!==Mt||!Bt:!Mt.has(bt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return xt==="m"?Bt:xt==="a"?Bt.call(bt):Bt?Bt.value:Mt.get(bt)}function _t(bt,Mt,xt,Bt,wt){if(Bt==="m")throw new TypeError("Private method is not writable");if(Bt==="a"&&!wt)throw new TypeError("Private accessor was defined without a setter");if(typeof Mt=="function"?bt!==Mt||!wt:!Mt.has(bt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Bt==="a"?wt.call(bt,xt):wt?wt.value=xt:Mt.set(bt,xt),xt}function yt(bt,Mt){if(Mt===null||typeof Mt!="object"&&typeof Mt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof bt=="function"?Mt===bt:bt.has(Mt)}},59407:function(lt){lt.exports=function(d){return d&&typeof d=="object"&&typeof d.copy=="function"&&typeof d.fill=="function"&&typeof d.readUInt8=="function"}},2005:function(lt,S,d){var m=d(97671),L=Object.getOwnPropertyDescriptors||function(Vt){for(var Jt=Object.keys(Vt),zt={},Qt=0;Qt<Jt.length;Qt++)zt[Jt[Qt]]=Object.getOwnPropertyDescriptor(Vt,Jt[Qt]);return zt},I=/%[sdj%]/g;S.format=function(gt){if(!U(gt)){for(var Vt=[],Jt=0;Jt<arguments.length;Jt++)Vt.push(T(arguments[Jt]));return Vt.join(" ")}for(var Jt=1,zt=arguments,Qt=zt.length,oe=String(gt).replace(I,function(jt){if(jt==="%%")return"%";if(Jt>=Qt)return jt;switch(jt){case"%s":return String(zt[Jt++]);case"%d":return Number(zt[Jt++]);case"%j":try{return JSON.stringify(zt[Jt++])}catch(Pt){return"[Circular]"}default:return jt}}),se=zt[Jt];Jt<Qt;se=zt[++Jt])z(se)||!Lt(se)?oe+=" "+se:oe+=" "+T(se);return oe},S.deprecate=function(gt,Vt){if(typeof m!="undefined"&&m.noDeprecation===!0)return gt;if(typeof m=="undefined")return function(){return S.deprecate(gt,Vt).apply(this,arguments)};var Jt=!1;function zt(){if(!Jt){if(m.throwDeprecation)throw new Error(Vt);m.traceDeprecation?console.trace(Vt):console.error(Vt),Jt=!0}return gt.apply(this,arguments)}return zt};var P={},_;S.debuglog=function(gt){if(Q(_)&&(_={NODE_ENV:"production"}.NODE_DEBUG||""),gt=gt.toUpperCase(),!P[gt])if(new RegExp("\\b"+gt+"\\b","i").test(_)){var Vt=m.pid;P[gt]=function(){var Jt=S.format.apply(S,arguments);console.error("%s %d: %s",gt,Vt,Jt)}}else P[gt]=function(){};return P[gt]};function T(gt,Vt){var Jt={seen:[],stylize:A};return arguments.length>=3&&(Jt.depth=arguments[2]),arguments.length>=4&&(Jt.colors=arguments[3]),N(Vt)?Jt.showHidden=Vt:Vt&&S._extend(Jt,Vt),Q(Jt.showHidden)&&(Jt.showHidden=!1),Q(Jt.depth)&&(Jt.depth=2),Q(Jt.colors)&&(Jt.colors=!1),Q(Jt.customInspect)&&(Jt.customInspect=!0),Jt.colors&&(Jt.stylize=M),w(Jt,gt,Jt.depth)}S.inspect=T,T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function M(gt,Vt){var Jt=T.styles[Vt];return Jt?"["+T.colors[Jt][0]+"m"+gt+"["+T.colors[Jt][1]+"m":gt}function A(gt,Vt){return gt}function p(gt){var Vt={};return gt.forEach(function(Jt,zt){Vt[Jt]=!0}),Vt}function w(gt,Vt,Jt){if(gt.customInspect&&Vt&&bt(Vt.inspect)&&Vt.inspect!==S.inspect&&!(Vt.constructor&&Vt.constructor.prototype===Vt)){var zt=Vt.inspect(Jt,gt);return U(zt)||(zt=w(gt,zt,Jt)),zt}var Qt=y(gt,Vt);if(Qt)return Qt;var oe=Object.keys(Vt),se=p(oe);if(gt.showHidden&&(oe=Object.getOwnPropertyNames(Vt)),yt(Vt)&&(oe.indexOf("message")>=0||oe.indexOf("description")>=0))return b(Vt);if(oe.length===0){if(bt(Vt)){var jt=Vt.name?": "+Vt.name:"";return gt.stylize("[Function"+jt+"]","special")}if(ct(Vt))return gt.stylize(RegExp.prototype.toString.call(Vt),"regexp");if(_t(Vt))return gt.stylize(Date.prototype.toString.call(Vt),"date");if(yt(Vt))return b(Vt)}var Pt="",pt=!1,st=["{","}"];if(D(Vt)&&(pt=!0,st=["[","]"]),bt(Vt)){var Ct=Vt.name?": "+Vt.name:"";Pt=" [Function"+Ct+"]"}if(ct(Vt)&&(Pt=" "+RegExp.prototype.toString.call(Vt)),_t(Vt)&&(Pt=" "+Date.prototype.toUTCString.call(Vt)),yt(Vt)&&(Pt=" "+b(Vt)),oe.length===0&&(!pt||Vt.length==0))return st[0]+Pt+st[1];if(Jt<0)return ct(Vt)?gt.stylize(RegExp.prototype.toString.call(Vt),"regexp"):gt.stylize("[Object]","special");gt.seen.push(Vt);var nt;return pt?nt=x(gt,Vt,Jt,se,oe):nt=oe.map(function(J){return E(gt,Vt,Jt,se,J,pt)}),gt.seen.pop(),k(nt,Pt,st)}function y(gt,Vt){if(Q(Vt))return gt.stylize("undefined","undefined");if(U(Vt)){var Jt="'"+JSON.stringify(Vt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return gt.stylize(Jt,"string")}if(X(Vt))return gt.stylize(""+Vt,"number");if(N(Vt))return gt.stylize(""+Vt,"boolean");if(z(Vt))return gt.stylize("null","null")}function b(gt){return"["+Error.prototype.toString.call(gt)+"]"}function x(gt,Vt,Jt,zt,Qt){for(var oe=[],se=0,jt=Vt.length;se<jt;++se)K(Vt,String(se))?oe.push(E(gt,Vt,Jt,zt,String(se),!0)):oe.push("");return Qt.forEach(function(Pt){Pt.match(/^\d+$/)||oe.push(E(gt,Vt,Jt,zt,Pt,!0))}),oe}function E(gt,Vt,Jt,zt,Qt,oe){var se,jt,Pt;if(Pt=Object.getOwnPropertyDescriptor(Vt,Qt)||{value:Vt[Qt]},Pt.get?Pt.set?jt=gt.stylize("[Getter/Setter]","special"):jt=gt.stylize("[Getter]","special"):Pt.set&&(jt=gt.stylize("[Setter]","special")),K(zt,Qt)||(se="["+Qt+"]"),jt||(gt.seen.indexOf(Pt.value)<0?(z(Jt)?jt=w(gt,Pt.value,null):jt=w(gt,Pt.value,Jt-1),jt.indexOf(`
`)>-1&&(oe?jt=jt.split(`
`).map(function(pt){return"  "+pt}).join(`
`).substr(2):jt=`
`+jt.split(`
`).map(function(pt){return"   "+pt}).join(`
`))):jt=gt.stylize("[Circular]","special")),Q(se)){if(oe&&Qt.match(/^\d+$/))return jt;se=JSON.stringify(""+Qt),se.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(se=se.substr(1,se.length-2),se=gt.stylize(se,"name")):(se=se.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),se=gt.stylize(se,"string"))}return se+": "+jt}function k(gt,Vt,Jt){var zt=0,Qt=gt.reduce(function(oe,se){return zt++,se.indexOf(`
`)>=0&&zt++,oe+se.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Qt>60?Jt[0]+(Vt===""?"":Vt+`
 `)+" "+gt.join(`,
  `)+" "+Jt[1]:Jt[0]+Vt+" "+gt.join(", ")+" "+Jt[1]}function D(gt){return Array.isArray(gt)}S.isArray=D;function N(gt){return typeof gt=="boolean"}S.isBoolean=N;function z(gt){return gt===null}S.isNull=z;function W(gt){return gt==null}S.isNullOrUndefined=W;function X(gt){return typeof gt=="number"}S.isNumber=X;function U(gt){return typeof gt=="string"}S.isString=U;function et(gt){return typeof gt=="symbol"}S.isSymbol=et;function Q(gt){return gt===void 0}S.isUndefined=Q;function ct(gt){return Lt(gt)&&xt(gt)==="[object RegExp]"}S.isRegExp=ct;function Lt(gt){return typeof gt=="object"&&gt!==null}S.isObject=Lt;function _t(gt){return Lt(gt)&&xt(gt)==="[object Date]"}S.isDate=_t;function yt(gt){return Lt(gt)&&(xt(gt)==="[object Error]"||gt instanceof Error)}S.isError=yt;function bt(gt){return typeof gt=="function"}S.isFunction=bt;function Mt(gt){return gt===null||typeof gt=="boolean"||typeof gt=="number"||typeof gt=="string"||typeof gt=="symbol"||typeof gt=="undefined"}S.isPrimitive=Mt,S.isBuffer=d(59407);function xt(gt){return Object.prototype.toString.call(gt)}function Bt(gt){return gt<10?"0"+gt.toString(10):gt.toString(10)}var wt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var gt=new Date,Vt=[Bt(gt.getHours()),Bt(gt.getMinutes()),Bt(gt.getSeconds())].join(":");return[gt.getDate(),wt[gt.getMonth()],Vt].join(" ")}S.log=function(){console.log("%s - %s",H(),S.format.apply(S,arguments))},S.inherits=d(81104),S._extend=function(gt,Vt){if(!Vt||!Lt(Vt))return gt;for(var Jt=Object.keys(Vt),zt=Jt.length;zt--;)gt[Jt[zt]]=Vt[Jt[zt]];return gt};function K(gt,Vt){return Object.prototype.hasOwnProperty.call(gt,Vt)}var B=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;S.promisify=function(Vt){if(typeof Vt!="function")throw new TypeError('The "original" argument must be of type Function');if(B&&Vt[B]){var Jt=Vt[B];if(typeof Jt!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Jt,B,{value:Jt,enumerable:!1,writable:!1,configurable:!0}),Jt}function Jt(){for(var zt,Qt,oe=new Promise(function(Pt,pt){zt=Pt,Qt=pt}),se=[],jt=0;jt<arguments.length;jt++)se.push(arguments[jt]);se.push(function(Pt,pt){Pt?Qt(Pt):zt(pt)});try{Vt.apply(this,se)}catch(Pt){Qt(Pt)}return oe}return Object.setPrototypeOf(Jt,Object.getPrototypeOf(Vt)),B&&Object.defineProperty(Jt,B,{value:Jt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Jt,L(Vt))},S.promisify.custom=B;function h(gt,Vt){if(!gt){var Jt=new Error("Promise was rejected with a falsy value");Jt.reason=gt,gt=Jt}return Vt(gt)}function mt(gt){if(typeof gt!="function")throw new TypeError('The "original" argument must be of type Function');function Vt(){for(var Jt=[],zt=0;zt<arguments.length;zt++)Jt.push(arguments[zt]);var Qt=Jt.pop();if(typeof Qt!="function")throw new TypeError("The last argument must be of type Function");var oe=this,se=function(){return Qt.apply(oe,arguments)};gt.apply(this,Jt).then(function(jt){m.nextTick(se,null,jt)},function(jt){m.nextTick(h,jt,se)})}return Object.setPrototypeOf(Vt,Object.getPrototypeOf(gt)),Object.defineProperties(Vt,L(gt)),Vt}S.callbackify=mt}}]);
