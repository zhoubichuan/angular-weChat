{"version":3,"sources":["webpack://ant-design-pro/./src/pages/list/search/index.tsx","webpack://ant-design-pro/./src/pages/list/search/service.ts"],"names":["Search","props","path","location","pathname","replace","useState","templateData","setTemplateData","getTemplateData","template","list","current","pageSize","result","data","useEffect","handleTabChange","key","match","url","history","handleFormSubmit","value","console","log","getTabKey","tabKey","textAlign","maxWidth","width","map","item","tab","name","children","type","request","method","params","options"],"mappings":"6OAiBMA,EAA0B,SAACC,EAAU,CACzC,GAAMC,GAAeC,SAASC,SAASC,QAAQ,gBAAiB,IAChE,EAAwCC,eAAc,IAAtD,eAAOC,EAAP,KAAqBC,EAArB,KACMC,EAAe,wCAAG,0FAClBC,SAAgB,GADE,SAEDC,SAAK,SAAU,CAClCC,QAAS,EACTC,SAAU,SAJU,GAEhBC,EAFgB,OAMtBJ,EAAWI,EAAOC,KAClBP,EAAgBE,OAPM,qCAAH,qDASrBM,gBAAU,UAAM,CACdP,KACC,IACH,GAAMQ,GAAkB,SAACC,EAAgB,CACvC,GAAQC,GAAUlB,EAAVkB,MACFC,EAAMD,EAAMC,MAAQ,IAAM,GAAKD,EAAMC,IAC3CC,UAAA,UAAgBD,EAAhB,YAAuBF,KAGnBI,EAAmB,SAACC,EAAkB,CAE1CC,QAAQC,IAAIF,IAGRG,EAAY,UAAM,CACtB,GAAQP,GAAoBlB,EAApBkB,MAAOhB,EAAaF,EAAbE,SACTiB,EAAMD,EAAMjB,OAAS,IAAM,GAAKiB,EAAMjB,KACtCyB,EAASxB,EAASC,SAASC,QAAlB,UAA6Be,EAA7B,KAAqC,IACpD,MAAIO,IAAUA,IAAW,IAChBA,EAEF,YAGT,MACE,UAAC,KAAD,CACE,QACE,iBAAK,MAAO,CAAEC,UAAW,UAAzB,SACE,sBACE,YAAY,qBACZ,YAAY,eACZ,KAAK,QACL,SAAUN,EACV,MAAO,CAAEO,SAAU,IAAKC,MAAO,YAIrC,QAASvB,EAAawB,IAAI,SAACC,EAAD,OAAgB,CAAEd,IAAK,YAAcc,EAAKT,MAAOU,IAAKD,EAAKE,QACrF,aAAcR,IACd,YAAaT,EAdf,SAgBGhB,EAAMkC,YAKb,UAAenC,G,mHCvER,WAAP,oC,mEAAO,WAA2BkB,EAAakB,EAAxC,4GACEC,QAIJ,sBAAwBnB,EAAK,CAC9BoB,OAAQ,MACRC,OAAQ,CACN3B,QAAS,IACTC,SAAU,KACVuB,KAAMA,UAVL,qC,wBAcA,WAAP,sC,6CAAO,WACLhB,EACAmB,EAIAC,EANK,+FAQEH,SAIJ,aAAejB,EAAK,CACrBkB,OAAQ,MACRC,OAAQ,mBACHA,GACCC,GAAW,WAhBd,qC,wBAqBA,WAAP,kC,mEAAO,WAA0BA,EAA1B,4GACEH,QAAuB,OAASlC,SAASC,SAASC,QAAQ,gBAAiB,IAAK,CACrFiC,OAAQ,MACRvB,KAAM,cAAF,GAAQyB,GAAW,WAHpB,qC,wBAOA,WAAP,kC,mEAAO,WAAuBA,EAAvB,4GACEH,QAAuB,OAASlC,SAASC,SAASC,QAAQ,gBAAiB,IAAK,CACrFiC,OAAQ,OACRvB,KAAM,cAAF,GAAQyB,GAAW,WAHpB,qC,wBAOA,WAAP,kC,mEAAO,WAA0BA,EAA1B,4GACEH,QAA6B,OAASlC,SAASC,SAASC,QAAQ,gBAAiB,IAAK,CAC3FiC,OAAQ,SACRvB,KAAM,cAAF,GAAQyB,GAAW,WAHpB,qC,wBAOA,WAAP,kC,mEAAO,WAA0BA,EAA1B,4GACEH,QACL,OAASlC,SAASC,SAASC,QAAQ,gBAAiB,IAAM,UAC1D,CACEiC,OAAQ,OACRvB,KAAMyB,SALL,qC","file":"p__list__search.a210a866.async.js","sourcesContent":["import { PageContainer } from '@ant-design/pro-layout';\nimport { Input } from 'antd';\nimport type { FC } from 'react';\nimport React, { useState, useRef, useEffect } from 'react';\nimport { history } from 'umi';\nimport { list, addList, updateList, removeList, exportList, getTemplate } from './service';\n\ntype SearchProps = {\n  match: {\n    url: string;\n    path: string;\n  };\n  location: {\n    pathname: string;\n  };\n};\n\nconst Search: FC<SearchProps> = (props) => {\n  const path: String = location.pathname.replace('/antdpro-demo', '');\n  const [templateData, setTemplateData] = useState<any>([]);\n  const getTemplateData = async () => {\n    let template: any = [];\n    const result = await list('type/1', {\n      current: 1,\n      pageSize: 20,\n    });\n    template = result.data;\n    setTemplateData(template);\n  };\n  useEffect(() => {\n    getTemplateData();\n  }, []);\n  const handleTabChange = (key: string) => {\n    const { match } = props;\n    const url = match.url === '/' ? '' : match.url;\n    history.push(`${url}/${key}`);\n  };\n\n  const handleFormSubmit = (value: string) => {\n    // eslint-disable-next-line no-console\n    console.log(value);\n  };\n\n  const getTabKey = () => {\n    const { match, location } = props;\n    const url = match.path === '/' ? '' : match.path;\n    const tabKey = location.pathname.replace(`${url}/`, '');\n    if (tabKey && tabKey !== '/') {\n      return tabKey;\n    }\n    return 'projects';\n  };\n\n  return (\n    <PageContainer\n      content={\n        <div style={{ textAlign: 'center' }}>\n          <Input.Search\n            placeholder=\"请输入\"\n            enterButton=\"搜索\"\n            size=\"large\"\n            onSearch={handleFormSubmit}\n            style={{ maxWidth: 522, width: '100%' }}\n          />\n        </div>\n      }\n      tabList={templateData.map((item: any) => ({ key: 'projects/' + item.value, tab: item.name }))}\n      tabActiveKey={getTabKey()}\n      onTabChange={handleTabChange}\n    >\n      {props.children}\n    </PageContainer>\n  );\n};\n\nexport default Search;\n","// @ts-ignore\n/* eslint-disable */\nimport { request } from 'umi';\nimport { TableListItem } from './data';\nexport async function getTemplate(key: string, type: string) {\n  return request<{\n    data: TableListItem[];\n    total?: number;\n    success?: boolean;\n  }>('/api/list/template/' + key, {\n    method: 'GET',\n    params: {\n      current: '1',\n      pageSize: '20',\n      type: type,\n    },\n  });\n}\nexport async function list(\n  url: string,\n  params: {\n    current?: number;\n    pageSize?: number;\n  },\n  options?: { [key: string]: any },\n) {\n  return request<{\n    data: TableListItem[];\n    total?: number;\n    success?: boolean;\n  }>('/api/list/' + url, {\n    method: 'GET',\n    params: {\n      ...params,\n      ...(options || {}),\n    },\n  });\n}\n\nexport async function updateList(options?: { [key: string]: any }) {\n  return request<TableListItem>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'PUT',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function addList(options?: { [key: string]: any }) {\n  return request<TableListItem>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'POST',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function removeList(options?: { [key: string]: any }) {\n  return request<Record<string, any>>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'DELETE',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function exportList(options?: { [key: string]: any }) {\n  return request<TableListItem>(\n    '/api' + location.pathname.replace('/antdpro-demo', '') + '/export',\n    {\n      method: 'POST',\n      data: options,\n    },\n  );\n}\n"],"sourceRoot":""}