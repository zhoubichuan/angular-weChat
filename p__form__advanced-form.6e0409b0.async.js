(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8529],{34540:function(re,N,r){"use strict";var Z=r(28991),D=r(81253),$=r(85893),y=r(86190),M=r(67294),m=r(66758),b=r(92460),Q=["fieldProps","proFieldProps"],U="dateRange",O=M.forwardRef(function(w,E){var j=w.fieldProps,R=w.proFieldProps,a=(0,D.Z)(w,Q),l=(0,M.useContext)(m.Z);return(0,$.jsx)(b.Z,(0,Z.Z)({ref:E,fieldProps:(0,Z.Z)({getPopupContainer:l.getPopupContainer},j),valueType:U,proFieldProps:R,filedConfig:{valueType:U,lightFilterLabelFormatter:function(n){return(0,y.Z)(n,(j==null?void 0:j.format)||"YYYY-MM-DD")}}},a))});N.Z=O},64317:function(re,N,r){"use strict";var Z=r(28991),D=r(81253),$=r(85893),y=r(22270),M=r(67294),m=r(66758),b=r(92460),Q=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],U=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],O=M.forwardRef(function(a,l){var L=a.fieldProps,n=a.children,ne=a.params,X=a.proFieldProps,k=a.mode,ae=a.valueEnum,le=a.request,q=a.showSearch,te=a.options,oe=(0,D.Z)(a,Q),_=(0,M.useContext)(m.Z);return(0,$.jsx)(b.Z,(0,Z.Z)((0,Z.Z)({valueEnum:(0,y.h)(ae),request:le,params:ne,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,Z.Z)({options:te,mode:k,showSearch:q,getPopupContainer:_.getPopupContainer},L),ref:l,proFieldProps:X},oe),{},{children:n}))}),w=M.forwardRef(function(a,l){var L=a.fieldProps,n=a.children,ne=a.params,X=a.proFieldProps,k=a.mode,ae=a.valueEnum,le=a.request,q=a.options,te=(0,D.Z)(a,U),oe=(0,Z.Z)({options:q,mode:k||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},L),_=(0,M.useContext)(m.Z);return(0,$.jsx)(b.Z,(0,Z.Z)((0,Z.Z)({valueEnum:(0,y.h)(ae),request:le,params:ne,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,Z.Z)({getPopupContainer:_.getPopupContainer},oe),ref:l,proFieldProps:X},te),{},{children:n}))}),E=O,j=w,R=E;R.SearchSelect=j,R.displayName="ProFormComponent",N.Z=R},5966:function(re,N,r){"use strict";var Z=r(28991),D=r(81253),$=r(85893),y=r(92460),M=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],b="text",Q=function(E){var j=E.fieldProps,R=E.proFieldProps,a=(0,D.Z)(E,M);return(0,$.jsx)(y.Z,(0,Z.Z)({valueType:b,fieldProps:j,filedConfig:{valueType:b},proFieldProps:R},a))},U=function(E){var j=E.fieldProps,R=E.proFieldProps,a=(0,D.Z)(E,m);return(0,$.jsx)(y.Z,(0,Z.Z)({valueType:"password",fieldProps:j,proFieldProps:R,filedConfig:{valueType:b}},a))},O=Q;O.Password=U,O.displayName="ProFormComponent",N.Z=O},5393:function(re){re.exports={card:"card___1dsH6",errorIcon:"errorIcon___3jptF",anticon:"anticon___A0Hdx",errorPopover:"errorPopover___FGjVx",errorListItem:"errorListItem___1rmVg",errorField:"errorField___2Y7eW",editable:"editable___WRDur"}},7521:function(re,N,r){"use strict";r.r(N),r.d(N,{default:function(){return Qe}});var Z=r(58024),D=r(91894),$=r(13062),y=r(71230),M=r(89032),m=r(15746),b=r(39428),Q=r(34792),U=r(48086),O=r(3182),w=r(20136),E=r(55241),j=r(2824),R=r(73218),a=r(67294),l=r(28991),L=r(81253),n=r(85893),ne=r(86190),X=r(66758),k=r(92460),ae=["fieldProps","proFieldProps"],le=["fieldProps","proFieldProps"],q="time",te=a.forwardRef(function(e,p){var T=e.fieldProps,S=e.proFieldProps,I=(0,L.Z)(e,ae),B=(0,a.useContext)(X.Z);return(0,n.jsx)(k.Z,(0,l.Z)({ref:p,fieldProps:(0,l.Z)({getPopupContainer:B.getPopupContainer},T),valueType:"timeRange",proFieldProps:S,filedConfig:{valueType:"timeRange",lightFilterLabelFormatter:function(V){return(0,ne.Z)(V,"HH:mm:SS")}}},I))}),oe=function(p){var T=p.fieldProps,S=p.proFieldProps,I=(0,L.Z)(p,le),B=(0,a.useContext)(X.Z);return(0,n.jsx)(k.Z,(0,l.Z)({fieldProps:(0,l.Z)({getPopupContainer:B.getPopupContainer},T),valueType:q,proFieldProps:S,filedConfig:{customLightMode:!0,valueType:q}},I))},_=oe;_.RangePicker=te;var ye=_,ue=r(952),de=r(5966),ee=r(64317),je=r(34540),ur=r(9715),Re=r(55843),sr=r(57663),Te=r(71577),De=r(96156),be=r(28481),fe=r(55507),Be=r(92137),Me=r(49101),Ie=r(97462),Ae=r(78775),Oe=r(26369),he=r(22270),Le=r(48171),Se=r(60249),Ve=r(21770),Ke=r(88306),pe=r(8880),We=r(47888),Ne=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],$e=["record","position","creatorButtonText","newRecordType","parentKey","style"],Pe=a.createContext(void 0);function ge(e){var p=e.children,T=e.record,S=e.position,I=e.newRecordType,B=e.parentKey,G=(0,a.useContext)(Pe);return a.cloneElement(p,(0,l.Z)((0,l.Z)({},p.props),{},{onClick:function(){var V=(0,Be.Z)((0,fe.Z)().mark(function A(x){var F,H,u,P;return(0,fe.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(F=(H=p.props).onClick)===null||F===void 0?void 0:F.call(H,x);case 2:if(P=s.sent,P!==!1){s.next=5;break}return s.abrupt("return");case 5:G==null||(u=G.current)===null||u===void 0||u.addEditRecord(T,{position:S,newRecordType:I,parentKey:B});case 6:case"end":return s.stop()}},A)}));function K(A){return V.apply(this,arguments)}return K}()}))}function Ze(e){var p,T,S=(0,Ae.YB)(),I=e.onTableChange,B=e.maxLength,G=e.formItemProps,V=e.recordCreatorProps,K=e.rowKey,A=e.controlled,x=e.defaultValue,F=e.onChange,H=e.editableFormRef,u=(0,L.Z)(e,Ne),P=(0,Oe.Z)(e.value),g=(0,a.useRef)(),s=(0,a.useRef)();(0,a.useImperativeHandle)(u.actionRef,function(){return g.current});var Xe=(0,Ve.Z)(function(){return e.value||x||[]},{value:e.value,onChange:e.onChange}),Fe=(0,be.Z)(Xe,2),v=Fe[0],ke=Fe[1],J=a.useMemo(function(){return typeof K=="function"?K:function(f,t){return f[K]||t}},[K]),Ee=function(t){if(typeof t=="number"&&!e.name){if(t>=v.length)return t;var o=v&&v[t];return J==null?void 0:J(o,t)}if((typeof t=="string"||t>=v.length)&&e.name){var i=v.findIndex(function(d,c){var h;return(J==null||(h=J(d,c))===null||h===void 0?void 0:h.toString())===(t==null?void 0:t.toString())});return i}return t};(0,a.useImperativeHandle)(H,function(){var f=function(i){var d,c;if(i==null)throw new Error("rowIndex is required");var h=Ee(i),W=[e.name,(d=h==null?void 0:h.toString())!==null&&d!==void 0?d:""].flat(1).filter(Boolean);return(c=s.current)===null||c===void 0?void 0:c.getFieldValue(W)},t=function(){var i,d=[e.name].flat(1).filter(Boolean);if(Array.isArray(d)&&d.length===0){var c,h=(c=s.current)===null||c===void 0?void 0:c.getFieldsValue();return Array.isArray(h)?h:Object.keys(h).map(function(W){return h[W]})}return(i=s.current)===null||i===void 0?void 0:i.getFieldValue(d)};return(0,l.Z)((0,l.Z)({},s.current),{},{getRowData:f,getRowsData:t,setRowData:function(i,d){var c,h,W,ce;if(i==null)throw new Error("rowIndex is required");var me=Ee(i),or=[e.name,(c=me==null?void 0:me.toString())!==null&&c!==void 0?c:""].flat(1).filter(Boolean),ir=((h=s.current)===null||h===void 0||(W=h.getFieldsValue)===null||W===void 0?void 0:W.call(h))||{},dr=(0,pe.Z)(ir,or,(0,l.Z)((0,l.Z)({},f(i)),d||{}));return(ce=s.current)===null||ce===void 0?void 0:ce.setFieldsValue(dr)}})}),(0,a.useEffect)(function(){!e.controlled||v.forEach(function(f,t){var o;(o=s.current)===null||o===void 0||o.setFieldsValue((0,De.Z)({},J(f,t),f))},{})},[v,e.controlled]),(0,a.useEffect)(function(){if(e.name){var f;s.current=e==null||(f=e.editable)===null||f===void 0?void 0:f.form}},[(p=e.editable)===null||p===void 0?void 0:p.form,e.name]);var z=V||{},qe=z.record,se=z.position,_e=z.creatorButtonText,er=z.newRecordType,rr=z.parentKey,nr=z.style,ar=(0,L.Z)(z,$e),Ce=se==="top",ie=(0,a.useMemo)(function(){return B&&B<=(v==null?void 0:v.length)?!1:V!==!1&&(0,n.jsx)(ge,{record:(0,he.h)(qe,v==null?void 0:v.length,v)||{},position:se,parentKey:(0,he.h)(rr,v==null?void 0:v.length,v),newRecordType:er,children:(0,n.jsx)(Te.Z,(0,l.Z)((0,l.Z)({type:"dashed",style:(0,l.Z)({display:"block",margin:"10px 0",width:"100%"},nr),icon:(0,n.jsx)(Me.Z,{})},ar),{},{children:_e||S.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[V,B,v==null?void 0:v.length]),lr=(0,a.useMemo)(function(){return ie?Ce?{components:{header:{wrapper:function(t){var o,i=t.className,d=t.children;return(0,n.jsxs)("thead",{className:i,children:[d,(0,n.jsxs)("tr",{style:{position:"relative"},children:[(0,n.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:ie}),(0,n.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(o=u.columns)===null||o===void 0?void 0:o.length,children:ie})]})]})}}}}:{tableViewRender:function(t,o){var i,d;return(0,n.jsxs)(n.Fragment,{children:[(i=(d=e.tableViewRender)===null||d===void 0?void 0:d.call(e,t,o))!==null&&i!==void 0?i:o,ie]})}}:{}},[Ce,ie]),ve=(0,l.Z)({},e.editable),tr=(0,Le.J)(function(f,t){var o,i,d;if((o=e.editable)===null||o===void 0||(i=o.onValuesChange)===null||i===void 0||i.call(o,f,t),(d=e.onValuesChange)===null||d===void 0||d.call(e,t,f),e.controlled){var c;e==null||(c=e.onChange)===null||c===void 0||c.call(e,t)}});return((e==null?void 0:e.onValuesChange)||((T=e.editable)===null||T===void 0?void 0:T.onValuesChange)||e.controlled&&(e==null?void 0:e.onChange))&&(ve.onValuesChange=tr),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Pe.Provider,{value:g,children:(0,n.jsx)(We.Z,(0,l.Z)((0,l.Z)((0,l.Z)({search:!1,options:!1,pagination:!1,rowKey:K,revalidateOnFocus:!1},u),lr),{},{tableLayout:"fixed",actionRef:g,onChange:I,editable:(0,l.Z)((0,l.Z)({},ve),{},{formProps:(0,l.Z)({formRef:s},ve.formProps)}),dataSource:v,onDataSourceChange:function(t){if(ke(t),e.name&&se==="top"){var o,i=(0,pe.Z)({},[e.name].flat(1).filter(Boolean),t);(o=s.current)===null||o===void 0||o.setFieldsValue(i)}}}))}),e.name?(0,n.jsx)(Ie.Z,{name:[e.name],children:function(t){var o,i,d=(0,Ke.Z)(t,[e.name].flat(1)),c=d==null?void 0:d.find(function(h,W){return!(0,Se.Z)(h,P==null?void 0:P[W])});return c&&P&&(e==null||(o=e.editable)===null||o===void 0||(i=o.onValuesChange)===null||i===void 0||i.call(o,c,d)),null}}):null]})}function xe(e){var p=ue.ZP.useFormInstance();return e.name?(0,n.jsx)(Re.Z.Item,(0,l.Z)((0,l.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,n.jsx)(Ze,(0,l.Z)((0,l.Z)({},e),{},{editable:(0,l.Z)((0,l.Z)({},e.editable),{},{form:p})}))})):(0,n.jsx)(Ze,(0,l.Z)({},e))}xe.RecordCreator=ge;var Ue=xe,we=r(85224),Ye=r(75362),He=r(93686),Ge=r(5393),Y=r.n(Ge),C={name:"\u4ED3\u5E93\u540D",url:"\u4ED3\u5E93\u57DF\u540D",owner:"\u4ED3\u5E93\u7BA1\u7406\u5458",approver:"\u5BA1\u6279\u4EBA",dateRange:"\u751F\u6548\u65E5\u671F",type:"\u4ED3\u5E93\u7C7B\u578B",name2:"\u4EFB\u52A1\u540D",url2:"\u4EFB\u52A1\u63CF\u8FF0",owner2:"\u6267\u884C\u4EBA",approver2:"\u8D23\u4EFB\u4EBA",dateRange2:"\u751F\u6548\u65E5\u671F",type2:"\u4EFB\u52A1\u7C7B\u578B"},Je=[{key:"1",workId:"00001",name:"John Brown",department:"New York No. 1 Lake Park"},{key:"2",workId:"00002",name:"Jim Green",department:"London No. 1 Lake Park"},{key:"3",workId:"00003",name:"Joe Black",department:"Sidney No. 1 Lake Park"}],ze=function(){var p=(0,a.useState)([]),T=(0,j.Z)(p,2),S=T[0],I=T[1],B=function(x){var F=x.filter(function(P){return P.errors.length>0}).length;if(!x||F===0)return null;var H=function(g){var s=document.querySelector('label[for="'.concat(g,'"]'));s&&s.scrollIntoView(!0)},u=x.map(function(P){if(!P||P.errors.length===0)return null;var g=P.name[0];return(0,n.jsxs)("li",{className:Y().errorListItem,onClick:function(){return H(g)},children:[(0,n.jsx)(R.Z,{className:Y().errorIcon}),(0,n.jsx)("div",{className:Y().errorMessage,children:P.errors[0]}),(0,n.jsx)("div",{className:Y().errorField,children:C[g]})]},g)});return(0,n.jsxs)("span",{className:Y().errorIcon,children:[(0,n.jsx)(E.Z,{title:"\u8868\u5355\u6821\u9A8C\u4FE1\u606F",content:u,overlayClassName:Y().errorPopover,trigger:"click",getPopupContainer:function(g){return g&&g.parentNode?g.parentNode:g},children:(0,n.jsx)(R.Z,{})}),F]})},G=function(){var A=(0,O.Z)((0,b.Z)().mark(function x(F){return(0,b.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return I([]),u.prev=1,u.next=4,(0,He.v)(F);case 4:U.default.success("\u63D0\u4EA4\u6210\u529F"),u.next=9;break;case 7:u.prev=7,u.t0=u.catch(1);case 9:case"end":return u.stop()}},x,null,[[1,7]])}));return function(F){return A.apply(this,arguments)}}(),V=function(x){I(x.errorFields)},K=[{title:"\u6210\u5458\u59D3\u540D",dataIndex:"name",key:"name",width:"20%"},{title:"\u5DE5\u53F7",dataIndex:"workId",key:"workId",width:"20%"},{title:"\u6240\u5C5E\u90E8\u95E8",dataIndex:"department",key:"department",width:"40%"},{title:"\u64CD\u4F5C",key:"action",valueType:"option",render:function(x,F,H,u){return[(0,n.jsx)("a",{onClick:function(){u==null||u.startEditable(F.key)},children:"\u7F16\u8F91"},"eidit")]}}];return(0,n.jsx)(ue.ZP,{layout:"vertical",hideRequiredMark:!0,submitter:{render:function(x,F){return(0,n.jsxs)(we.Z,{children:[B(S),F]})}},initialValues:{members:Je},onFinish:G,onFinishFailed:V,children:(0,n.jsxs)(Ye.ZP,{content:"\u9AD8\u7EA7\u8868\u5355\u5E38\u89C1\u4E8E\u4E00\u6B21\u6027\u8F93\u5165\u548C\u63D0\u4EA4\u5927\u6279\u91CF\u6570\u636E\u7684\u573A\u666F\u3002",children:[(0,n.jsxs)(D.Z,{title:"\u4ED3\u5E93\u7BA1\u7406",className:Y().card,bordered:!1,children:[(0,n.jsxs)(y.Z,{gutter:16,children:[(0,n.jsx)(m.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(de.Z,{label:C.name,name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"})}),(0,n.jsx)(m.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(de.Z,{label:C.url,name:"url",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],fieldProps:{style:{width:"100%"},addonBefore:"http://",addonAfter:".com"},placeholder:"\u8BF7\u8F93\u5165"})}),(0,n.jsx)(m.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(ee.Z,{label:C.owner,name:"owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})})]}),(0,n.jsxs)(y.Z,{gutter:16,children:[(0,n.jsx)(m.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(ee.Z,{label:C.approver,name:"approver",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})}),(0,n.jsx)(m.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(je.Z,{label:C.dateRange,name:"dateRange",fieldProps:{style:{width:"100%"}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u751F\u6548\u65E5\u671F"}]})}),(0,n.jsx)(m.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(ee.Z,{label:C.type,name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,n.jsxs)(D.Z,{title:"\u4EFB\u52A1\u7BA1\u7406",className:Y().card,bordered:!1,children:[(0,n.jsxs)(y.Z,{gutter:16,children:[(0,n.jsx)(m.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(de.Z,{label:C.name2,name:"name2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}]})}),(0,n.jsx)(m.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(de.Z,{label:C.url2,name:"url2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]})}),(0,n.jsx)(m.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(ee.Z,{label:C.owner2,name:"owner2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}]})})]}),(0,n.jsxs)(y.Z,{gutter:16,children:[(0,n.jsx)(m.Z,{lg:6,md:12,sm:24,children:(0,n.jsx)(ee.Z,{label:C.approver2,name:"approver2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"})}),(0,n.jsx)(m.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,n.jsx)(ye,{label:C.dateRange2,name:"dateRange2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],placeholder:"\u63D0\u9192\u65F6\u95F4",fieldProps:{style:{width:"100%"}}})}),(0,n.jsx)(m.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,n.jsx)(ee.Z,{label:C.type2,name:"type2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,n.jsx)(D.Z,{title:"\u6210\u5458\u7BA1\u7406",bordered:!1,children:(0,n.jsx)(ue.ZP.Item,{name:"members",children:(0,n.jsx)(Ue,{recordCreatorProps:{record:function(){return{key:"0".concat(Date.now())}}},columns:K,rowKey:"key"})})})]})})},Qe=ze}}]);

//# sourceMappingURL=p__form__advanced-form.6e0409b0.async.js.map