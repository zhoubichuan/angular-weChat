(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5141],{51723:function(fe,P,u){"use strict";u.r(P),u.d(P,{default:function(){return de}});var ve=u(57338),k=u(273),Ze=u(57663),R=u(71577),w=u(2824),t=u(39428),Z=u(11849),ge=u(34792),f=u(48086),m=u(3182),G=u(49101),g=u(67294),O=u(75362),z=u(85224),K=u(16894),N=u(37476),j=u(5966),H=u(12826),ye=u(71194),J=u(50146),B=u(65554),Q=u(90672),x=u(64317),X=u(86615),q=u(22452),r=u(85893),_=function(n){return(0,r.jsxs)(B.L,{stepsProps:{size:"small"},stepsFormRender:function(a,c){return(0,r.jsx)(J.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:n.updateModalVisible,footer:c,onCancel:function(){n.onCancel()},children:a})},onFinish:n.onSubmit,children:[(0,r.jsxs)(B.L.StepForm,{initialValues:{name:n.values.name,desc:n.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,r.jsx)(j.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,r.jsx)(Q.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,r.jsxs)(B.L.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,r.jsx)(x.Z,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,r.jsx)(x.Z,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,r.jsx)(X.Z.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,r.jsxs)(B.L.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,r.jsx)(q.Z,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,r.jsx)(x.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ee=_,E=u(65465);function re(s,n){return A.apply(this,arguments)}function A(){return A=(0,m.Z)((0,t.Z)().mark(function s(n,l){return(0,t.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,E.WY)(window.antdprourl+"/api/tags",(0,Z.Z)({method:"GET",params:(0,Z.Z)({},n)},l||{})));case 1:case"end":return c.stop()}},s)})),A.apply(this,arguments)}function ae(s){return T.apply(this,arguments)}function T(){return T=(0,m.Z)((0,t.Z)().mark(function s(n){return(0,t.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)(window.antdprourl+"/api/tags",{method:"PUT",data:(0,Z.Z)({},n||{})}));case 1:case"end":return a.stop()}},s)})),T.apply(this,arguments)}function ue(s){return $.apply(this,arguments)}function $(){return $=(0,m.Z)((0,t.Z)().mark(function s(n){return(0,t.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)(window.antdprourl+"/api/tags",{method:"POST",data:(0,Z.Z)({},n||{})}));case 1:case"end":return a.stop()}},s)})),$.apply(this,arguments)}function ne(s){return D.apply(this,arguments)}function D(){return D=(0,m.Z)((0,t.Z)().mark(function s(n){return(0,t.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.WY)(window.antdprourl+"/api/tags",{method:"DELETE",data:(0,Z.Z)({},n||{})}));case 1:case"end":return a.stop()}},s)})),D.apply(this,arguments)}var te=function(){var s=(0,m.Z)((0,t.Z)().mark(function n(l){var a;return(0,t.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.default.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,ue((0,Z.Z)({},l));case 4:return a(),f.default.success("\u6DFB\u52A0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),a(),f.default.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},n,null,[[1,9]])}));return function(l){return s.apply(this,arguments)}}(),le=function(){var s=(0,m.Z)((0,t.Z)().mark(function n(l){var a;return(0,t.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.default.loading("\u6B63\u5728\u914D\u7F6E"),e.prev=1,e.next=4,ae({name:l.name,desc:l.desc,key:l.key});case 4:return a(),f.default.success("\u914D\u7F6E\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),a(),f.default.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},n,null,[[1,9]])}));return function(l){return s.apply(this,arguments)}}(),se=function(){var s=(0,m.Z)((0,t.Z)().mark(function n(l){var a;return(0,t.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.default.loading("\u6B63\u5728\u5220\u9664"),l){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,ne({key:l.map(function(b){return b.key})});case 6:return a(),f.default.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),a(),f.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},n,null,[[3,11]])}));return function(l){return s.apply(this,arguments)}}(),ie=function(){var n=(0,g.useState)(!1),l=(0,w.Z)(n,2),a=l[0],c=l[1],e=(0,g.useState)(!1),b=(0,w.Z)(e,2),oe=b[0],V=b[1],ce=(0,g.useState)(!1),L=(0,w.Z)(ce,2),me=L[0],M=L[1],y=(0,g.useRef)(),pe=(0,g.useState)(),U=(0,w.Z)(pe,2),p=U[0],S=U[1],he=(0,g.useState)([]),I=(0,w.Z)(he,2),C=I[0],W=I[1],Y=[{title:"\u7F16\u53F7",dataIndex:"code",tip:"\u89C4\u5219\u540D\u79F0\u662F\u552F\u4E00\u7684 key",render:function(d,i){return(0,r.jsx)("a",{onClick:function(){S(i),M(!0)},children:d})}},{title:"\u540D\u79F0",dataIndex:"name",valueType:"textarea"},{title:"\u7C7B\u578B",dataIndex:"type",sorter:!0,hideInForm:!0},{title:"\u6570\u636E",sorter:!0,dataIndex:"value"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(d,i){return[(0,r.jsx)("a",{onClick:function(){V(!0),S(i)},children:"\u914D\u7F6E"},"config"),(0,r.jsx)("a",{href:"https://procomponents.ant.design/",children:"\u8BA2\u9605\u8B66\u62A5"},"subscribeAlert")]}}];return(0,r.jsxs)(O.ZP,{children:[(0,r.jsx)(K.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:y,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(R.Z,{type:"primary",onClick:function(){c(!0)},children:[(0,r.jsx)(G.Z,{})," \u65B0\u5EFA"]},"primary")]},request:re,columns:Y,rowSelection:{onChange:function(d,i){W(i)}}}),(C==null?void 0:C.length)>0&&(0,r.jsxs)(z.Z,{extra:(0,r.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,r.jsx)("a",{style:{fontWeight:600},children:C.length})," ","\u9879 \xA0\xA0",(0,r.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",C.reduce(function(o,d){return o+d.callNo},0)," \u4E07"]})]}),children:[(0,r.jsx)(R.Z,{onClick:(0,m.Z)((0,t.Z)().mark(function o(){var d,i;return(0,t.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,se(C);case 2:W([]),(d=y.current)===null||d===void 0||(i=d.reloadAndRest)===null||i===void 0||i.call(d);case 4:case"end":return F.stop()}},o)})),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsx)(R.Z,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,r.jsxs)(N.Y,{title:"\u65B0\u5EFA\u6807\u7B7E",width:"400px",visible:a,onVisibleChange:c,onFinish:function(){var o=(0,m.Z)((0,t.Z)().mark(function d(i){var v;return(0,t.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,te(i);case 2:v=h.sent,v&&(c(!1),y.current&&y.current.reload());case 4:case"end":return h.stop()}},d)}));return function(d){return o.apply(this,arguments)}}(),children:[(0,r.jsx)(j.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",label:"\u7F16\u53F7",name:"code"}),(0,r.jsx)(j.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u540D\u79F0",width:"md",name:"name"}),(0,r.jsx)(j.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u7C7B\u578B",width:"md",name:"type"}),(0,r.jsx)(j.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u6570\u636E",width:"md",name:"value"})]}),(0,r.jsx)(ee,{onSubmit:function(){var o=(0,m.Z)((0,t.Z)().mark(function d(i){var v;return(0,t.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return console.log(i,"value--------------"),h.next=3,le(i);case 3:v=h.sent,v&&(V(!1),S(void 0),y.current&&y.current.reload());case 5:case"end":return h.stop()}},d)}));return function(d){return o.apply(this,arguments)}}(),onCancel:function(){V(!1),S(void 0)},updateModalVisible:oe,values:p||{}}),(0,r.jsx)(k.Z,{width:600,visible:me,onClose:function(){S(void 0),M(!1)},closable:!1,children:(p==null?void 0:p.name)&&(0,r.jsx)(H.ZP,{column:2,title:p==null?void 0:p.name,request:(0,m.Z)((0,t.Z)().mark(function o(){return(0,t.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",{data:p||{}});case 1:case"end":return i.stop()}},o)})),params:{id:p==null?void 0:p.name},columns:Y})})]})},de=ie}}]);
