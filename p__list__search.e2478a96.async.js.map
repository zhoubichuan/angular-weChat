{"version":3,"sources":["webpack://ant-design-pro/./src/pages/list/search/service.ts","webpack://ant-design-pro/./src/pages/list/search/index.tsx"],"names":["key","type","request","method","params","current","pageSize","options","location","pathname","replace","data","Search","props","path","useState","templateData","setTemplateData","getTemplateData","template","list","result","useEffect","handleTabChange","match","url","history","handleFormSubmit","value","console","log","getTabKey","tabKey","textAlign","maxWidth","width","map","item","tab","name","children"],"mappings":"wQAIO,WAAP,oC,mEAAO,WAA2BA,EAAaC,EAAxC,4GACEC,QAIJ,sBAAwBF,EAAK,CAC9BG,OAAQ,MACRC,OAAQ,CACNC,QAAS,IACTC,SAAU,KACVL,KAAMA,UAVL,qC,wBAcA,WAAP,oC,6CAAO,WACLG,EAIAG,EALK,+FAOEL,SAIJ,mBAJW,SAKZC,OAAQ,MACRC,OAAQ,WACHA,IAEDG,GAAW,UAhBZ,qC,wBAoBA,WAAP,kC,mEAAO,WAA0BA,EAA1B,4GACEL,QAAuB,OAASM,SAASC,SAASC,QAAQ,gBAAiB,IAAK,CACrFP,OAAQ,MACRQ,KAAM,cAAF,GAAQJ,GAAW,WAHpB,qC,wBAOA,WAAP,kC,mEAAO,WAAuBA,EAAvB,4GACEL,QAAuB,OAASM,SAASC,SAASC,QAAQ,gBAAiB,IAAK,CACrFP,OAAQ,OACRQ,KAAM,cAAF,GAAQJ,GAAW,WAHpB,qC,wBAOA,WAAP,kC,mEAAO,WAA0BA,EAA1B,4GACEL,QAA6B,OAASM,SAASC,SAASC,QAAQ,gBAAiB,IAAK,CAC3FP,OAAQ,SACRQ,KAAM,cAAF,GAAQJ,GAAW,WAHpB,qC,wBAOA,WAAP,kC,mEAAO,WAA0BA,EAA1B,4GACEL,QACL,OAASM,SAASC,SAASC,QAAQ,gBAAiB,IAAM,UAC1D,CACEP,OAAQ,OACRQ,KAAMJ,SALL,qC,uCC1CDK,EAA0B,SAACC,EAAU,CACzC,GAAMC,GAAeN,SAASC,SAASC,QAAQ,gBAAiB,IAChE,EAAwCK,eAAc,IAAtD,eAAOC,EAAP,KAAqBC,EAArB,KACMC,EAAe,wCAAG,0FAClBC,SAAgB,GADE,SAEDC,EACnB,CACEf,QAAS,EACTC,SAAU,IAEZ,CAAEL,KAAM,oBAPY,GAEhBoB,EAFgB,OAStBF,EAAWE,EAAOV,KAClBM,EAAgBE,OAVM,qCAAH,qDAYrBG,gBAAU,UAAM,CACdJ,KACC,IACH,GAAMK,GAAkB,SAACvB,EAAgB,CACvC,GAAQwB,GAAUX,EAAVW,MACFC,EAAMD,EAAMC,MAAQ,IAAM,GAAKD,EAAMC,IAC3C,OAAQzB,OACD,WACH0B,UAAA,UAAgBD,EAAhB,cACA,UACG,eACHC,UAAA,UAAgBD,EAAhB,kBACA,UACG,WACHC,UAAA,UAAgBD,EAAhB,cACA,cAEA,QAIAE,EAAmB,SAACC,EAAkB,CAE1CC,QAAQC,IAAIF,IAGRG,EAAY,UAAM,CACtB,GAAQP,GAAoBX,EAApBW,MAAOhB,EAAaK,EAAbL,SACTiB,EAAMD,EAAMV,OAAS,IAAM,GAAKU,EAAMV,KACtCkB,EAASxB,EAASC,SAASC,QAAlB,UAA6Be,EAA7B,KAAqC,IACpD,MAAIO,IAAUA,IAAW,IAChBA,EAEF,YAGT,MACE,UAAC,KAAD,CACE,QACE,iBAAK,MAAO,CAAEC,UAAW,UAAzB,SACE,sBACE,YAAY,qBACZ,YAAY,eACZ,KAAK,QACL,SAAUN,EACV,MAAO,CAAEO,SAAU,IAAKC,MAAO,YAIrC,QAASnB,EAAaoB,IAAI,SAACC,EAAD,OAAgB,CAAErC,IAAK,UAAWsC,IAAKD,EAAKE,QACtE,aAAcR,IACd,YAAaR,EAdf,SAgBGV,EAAM2B,YAKb,EAAe5B","file":"p__list__search.e2478a96.async.js","sourcesContent":["// @ts-ignore\n/* eslint-disable */\nimport { request } from 'umi';\nimport { TableListItem } from './data';\nexport async function getTemplate(key: string, type: string) {\n  return request<{\n    data: TableListItem[];\n    total?: number;\n    success?: boolean;\n  }>('/api/list/template/' + key, {\n    method: 'GET',\n    params: {\n      current: '1',\n      pageSize: '20',\n      type: type,\n    },\n  });\n}\nexport async function list(\n  params: {\n    current?: number;\n    pageSize?: number;\n  },\n  options?: { [key: string]: any },\n) {\n  return request<{\n    data: TableListItem[];\n    total?: number;\n    success?: boolean;\n  }>('/api/list/type/1', {\n    method: 'GET',\n    params: {\n      ...params,\n    },\n    ...(options || {}),\n  });\n}\n\nexport async function updateList(options?: { [key: string]: any }) {\n  return request<TableListItem>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'PUT',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function addList(options?: { [key: string]: any }) {\n  return request<TableListItem>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'POST',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function removeList(options?: { [key: string]: any }) {\n  return request<Record<string, any>>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'DELETE',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function exportList(options?: { [key: string]: any }) {\n  return request<TableListItem>(\n    '/api' + location.pathname.replace('/antdpro-demo', '') + '/export',\n    {\n      method: 'POST',\n      data: options,\n    },\n  );\n}\n","import { PageContainer } from '@ant-design/pro-layout';\nimport { Input } from 'antd';\nimport type { FC } from 'react';\nimport React, { useState, useRef, useEffect } from 'react';\nimport { history } from 'umi';\nimport { list, addList, updateList, removeList, exportList, getTemplate } from './service';\n\ntype SearchProps = {\n  match: {\n    url: string;\n    path: string;\n  };\n  location: {\n    pathname: string;\n  };\n};\n\nconst Search: FC<SearchProps> = (props) => {\n  const path: String = location.pathname.replace('/antdpro-demo', '');\n  const [templateData, setTemplateData] = useState<any>([]);\n  const getTemplateData = async () => {\n    let template: any = [];\n    const result = await list(\n      {\n        current: 1,\n        pageSize: 20,\n      },\n      { type: 'studentType' },\n    );\n    template = result.data;\n    setTemplateData(template);\n  };\n  useEffect(() => {\n    getTemplateData();\n  }, []);\n  const handleTabChange = (key: string) => {\n    const { match } = props;\n    const url = match.url === '/' ? '' : match.url;\n    switch (key) {\n      case 'articles':\n        history.push(`${url}/articles`);\n        break;\n      case 'applications':\n        history.push(`${url}/applications`);\n        break;\n      case 'projects':\n        history.push(`${url}/projects`);\n        break;\n      default:\n        break;\n    }\n  };\n\n  const handleFormSubmit = (value: string) => {\n    // eslint-disable-next-line no-console\n    console.log(value);\n  };\n\n  const getTabKey = () => {\n    const { match, location } = props;\n    const url = match.path === '/' ? '' : match.path;\n    const tabKey = location.pathname.replace(`${url}/`, '');\n    if (tabKey && tabKey !== '/') {\n      return tabKey;\n    }\n    return 'articles';\n  };\n\n  return (\n    <PageContainer\n      content={\n        <div style={{ textAlign: 'center' }}>\n          <Input.Search\n            placeholder=\"请输入\"\n            enterButton=\"搜索\"\n            size=\"large\"\n            onSearch={handleFormSubmit}\n            style={{ maxWidth: 522, width: '100%' }}\n          />\n        </div>\n      }\n      tabList={templateData.map((item: any) => ({ key: 'project', tab: item.name }))}\n      tabActiveKey={getTabKey()}\n      onTabChange={handleTabChange}\n    >\n      {props.children}\n    </PageContainer>\n  );\n};\n\nexport default Search;\n"],"sourceRoot":""}