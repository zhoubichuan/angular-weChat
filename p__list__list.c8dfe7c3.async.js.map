{"version":3,"sources":["webpack://ant-design-pro/./src/pages/list/list/service.ts","webpack://ant-design-pro/./src/pages/list/list/index.tsx","webpack://ant-design-pro//home/runner/work/antdpro-demo/antdpro-demo/src/pages/list|sync|/^\\.\\/.*\\.json$/"],"names":["request","location","pathname","slice","method","params","current","pageSize","options","replace","data","XLSX","require","handleExport","fields","hide","exportList","uploadprops","accept","name","headers","authorization","showUploadList","beforeUpload","file","fileList","rABS","f","reader","FileReader","onload","e","dataResult","target","result","Uint8Array","workbook","read","type","firstWorksheet","Sheets","SheetNames","jsonArr","utils","sheet_to_json","header","readAsBinaryString","readAsArrayBuffer","handleAdd","addList","handleEdit","updateList","handleDelete","selectedRows","removeList","id","map","row","formItemLayout","labelCol","xs","span","sm","wrapperCol","TableList","path","useState","createModalVisible","handleModalVisible","updateModalVisible","handleUpdateModalVisible","showDetail","setShowDetail","actionRef","useRef","currentRow","setCurrentRow","split","length","tabActiveKey","setTabActiveKey","selectedRowsState","setSelectedRows","useParams","templateData","handleOnTabChange","key","reload","history","columns","title","dataIndex","width","fixed","hideInSearch","hideInDescriptions","render","dom","entity","item","hideInTable","table","Array","isArray","i","thumbUrl","valueType","_","record","copyParams","filter","create","forEach","field","success","content","okText","cancelText","onOk","descriptions","view","ellipsis","rest","text","color","whiteSpace","height","display","flexDirection","ghost","tab","labelWidth","list","onChange","density","fullScreen","setting","showQuickJumper","pageSizeOptions","defaultPageSize","value","form","listType","undefined","edit"],"mappings":"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","file":"p__list__list.c8dfe7c3.async.js","sourcesContent":["// @ts-ignore\n/* eslint-disable */\nimport { request } from 'umi';\nimport { TableListItem } from './data';\nexport async function getTemplate() {\n  return request<{\n    data: TableListItem[];\n    total?: number;\n    success?: boolean;\n  }>('/api/list/template/' + location.pathname.slice(-1), {\n    method: 'GET',\n    params: {\n      current: '1',\n      pageSize: '20',\n    },\n  });\n}\nexport async function list(\n  params: {\n    current?: number;\n    pageSize?: number;\n  },\n  options?: { [key: string]: any },\n) {\n  return request<{\n    data: TableListItem[];\n    total?: number;\n    success?: boolean;\n  }>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'GET',\n    params: {\n      ...params,\n    },\n    ...(options || {}),\n  });\n}\n\nexport async function updateList(options?: { [key: string]: any }) {\n  return request<TableListItem>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'PUT',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function addList(options?: { [key: string]: any }) {\n  return request<TableListItem>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'POST',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function removeList(options?: { [key: string]: any }) {\n  return request<Record<string, any>>('/api' + location.pathname.replace('/antdpro-demo', ''), {\n    method: 'DELETE',\n    data: { ...(options || {}) },\n  });\n}\n\nexport async function exportList(options?: { [key: string]: any }) {\n  return request<TableListItem>(\n    '/api' + location.pathname.replace('/antdpro-demo', '') + '/export',\n    {\n      method: 'POST',\n      data: options,\n    },\n  );\n}\n","import { PlusOutlined, CloseOutlined } from '@ant-design/icons';\nimport { Button, message, Drawer, Upload, Image, Modal } from 'antd';\nimport React, { useState, useRef } from 'react';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport type { ProColumns, ActionType } from '@ant-design/pro-table';\nimport ProTable from '@ant-design/pro-table';\nimport {\n  ModalForm,\n  ProFormText,\n  ProFormTextArea,\n  ProFormSwitch,\n  ProFormSelect,\n  ProFormRadio,\n  ProFormUploadButton,\n} from '@ant-design/pro-form';\nimport type { ProDescriptionsItemProps } from '@ant-design/pro-descriptions';\nimport ProDescriptions from '@ant-design/pro-descriptions';\nimport { list, addList, updateList, removeList, exportList } from './service';\nimport type { TableListItem, TableListPagination } from './data';\nimport { useParams } from 'react-router';\nimport { history } from 'umi';\nconst XLSX = require('xlsx');\nconst handleExport = async (fields: TableListItem[]) => {\n  const hide = message.loading('正在添加');\n  try {\n    await exportList(fields);\n    hide();\n    message.success('添加成功');\n    return true;\n  } catch (error) {\n    hide();\n    message.error('添加失败！');\n    return false;\n  }\n};\nconst uploadprops = {\n  // 这里我们只接受excel2007以后版本的文件，accept就是指定文件选择框的文件类型\n  accept: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  name: 'file',\n  headers: {\n    authorization: 'authorization-text',\n  },\n  showUploadList: false,\n  // 把excel的处理放在beforeUpload事件，否则要把文件上传到通过action指定的地址去后台处理\n  // 这里我们没有指定action地址，因为没有传到后台\n  beforeUpload: (file: any, fileList: any) => {\n    const rABS = true;\n    const f = fileList[0];\n    const reader = new FileReader();\n    reader.onload = (e: any) => {\n      let dataResult = e.target.result;\n      if (!rABS) dataResult = new Uint8Array(dataResult);\n      const workbook = XLSX.read(dataResult, {\n        type: rABS ? 'binary' : 'array',\n      });\n      // 假设我们的数据在第一个标签\n      const firstWorksheet = workbook.Sheets[workbook.SheetNames[0]];\n      // XLSX自带了一个工具把导入的数据转成json\n      const jsonArr = XLSX.utils.sheet_to_json(firstWorksheet, { header: 1 });\n      // 通过自定义的方法处理Json,得到Excel原始数据传给后端，后端统一处理\n      handleExport(jsonArr);\n    };\n    if (rABS) reader.readAsBinaryString(f);\n    else reader.readAsArrayBuffer(f);\n    return false;\n  },\n};\nconst handleAdd = async (fields: TableListItem) => {\n  const hide = message.loading('正在添加');\n  try {\n    await addList({ ...fields });\n    hide();\n    message.success('添加成功');\n    return true;\n  } catch (error) {\n    hide();\n    message.error('添加失败！');\n    return false;\n  }\n};\n\nconst handleEdit = async (fields: TableListItem) => {\n  const hide = message.loading('正在配置');\n  try {\n    await updateList({ ...fields });\n    hide();\n    message.success('修改成功');\n    return true;\n  } catch (error) {\n    hide();\n    message.error('修改失败！');\n    return false;\n  }\n};\n\nconst handleDelete = async (selectedRows: TableListItem[]) => {\n  const hide = message.loading('正在删除');\n  if (!selectedRows) return true;\n  try {\n    await removeList({\n      id: selectedRows.map((row) => row.id),\n    });\n    hide();\n    message.success('删除成功，即将刷新');\n    return true;\n  } catch (error) {\n    hide();\n    message.error('删除失败，请重试');\n    return false;\n  }\n};\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 3 },\n    sm: { span: 4 },\n  },\n  wrapperCol: {\n    xs: { span: 21 },\n    sm: { span: 20 },\n  },\n};\nconst TableList: React.FC = () => {\n  const path: String = location.pathname.replace('/antdpro-demo', '');\n  const [createModalVisible, handleModalVisible] = useState<boolean>(false);\n  const [updateModalVisible, handleUpdateModalVisible] = useState<boolean>(false);\n  const [showDetail, setShowDetail] = useState<boolean>(false);\n  const actionRef = useRef<ActionType>();\n  const [currentRow, setCurrentRow] = useState<TableListItem>();\n  const [tabActiveKey, setTabActiveKey] = useState<any>(\n    path.split('/')[path.split('/').length - 1],\n  );\n  const [selectedRowsState, setSelectedRows] = useState<TableListItem[]>([]);\n  const params: any = useParams();\n  const templateData: any = require(`../${path.split('/')[2]}/${params.id}.json`);\n  const handleOnTabChange = (key: string) => {\n    setTabActiveKey(key);\n    if (actionRef.current) {\n      actionRef.current.reload();\n    }\n    history.push(path.slice(0, -1) + key);\n  };\n  const columns: ProColumns<TableListItem>[] = [\n    {\n      title: '编号',\n      dataIndex: 'id',\n      width: 160,\n      fixed: 'left',\n      hideInSearch: true,\n      hideInDescriptions: true,\n      render: (dom, entity) => {\n        return (\n          <a\n            onClick={() => {\n              setCurrentRow(entity);\n              setShowDetail(true);\n            }}\n          >\n            {dom}\n          </a>\n        );\n      },\n    },\n    ...templateData.map((item: any) => ({\n      ...item,\n      render: (dom: any) => {\n        if (!item.hideInTable && item.table && item.table.type === 'image') {\n          if (Array.isArray(dom)) {\n            return dom.map((i: any) => <Image height={100} src={i?.thumbUrl} />);\n          } else {\n            return <Image height={100} src={dom[0]?.thumbUrl} />;\n          }\n        }\n        return dom;\n      },\n    })),\n    {\n      title: '操作',\n      dataIndex: 'option',\n      valueType: 'option',\n      fixed: 'right',\n      width: 160,\n      render: (_, record) => [\n        <a\n          key=\"config\"\n          onClick={async () => {\n            const copyParams = {};\n            templateData\n              .filter((item: any) => item.create)\n              .forEach((field: any) => {\n                if (record[field.dataIndex]) {\n                  copyParams[field.dataIndex] = record[field.dataIndex];\n                }\n              });\n            const success = await handleAdd(copyParams as TableListItem);\n            if (success) {\n              handleModalVisible(false);\n              if (actionRef.current) {\n                actionRef.current.reload();\n              }\n            }\n          }}\n        >\n          添加\n        </a>,\n        <a\n          key=\"config\"\n          onClick={() => {\n            setCurrentRow(record);\n            handleUpdateModalVisible(true);\n          }}\n        >\n          修改\n        </a>,\n        <a\n          key=\"subscribeAlert\"\n          onClick={() => {\n            Modal.confirm({\n              title: '删除数据',\n              content: '确定删除该数据吗？',\n              okText: '确认',\n              cancelText: '取消',\n              onOk: async () => {\n                await handleDelete([record] as TableListItem[]);\n                if (actionRef.current) {\n                  actionRef.current.reload();\n                }\n              },\n            });\n          }}\n        >\n          删除\n        </a>,\n      ],\n    },\n  ];\n  const descriptions: ProColumns<TableListItem>[] = templateData\n    .filter((item: any) => item.view)\n    .map((item: any) => {\n      const { width, view, ellipsis, ...rest } = item;\n      return {\n        ...rest,\n        render: (text: any) => {\n          if (!item.hideInTable && item.view && item.view.type === 'image') {\n            if (Array.isArray(text)) {\n              return text.map((i: any) => <Image height={300} src={i?.thumbUrl} />);\n            } else {\n              return <Image height={300} src={text[0]?.thumbUrl} />;\n            }\n          }\n          return <div style={{ color: 'lightblue', whiteSpace: 'pre-line' }}>{text}</div>;\n        },\n      };\n    });\n  return (\n    <PageContainer\n      style={{\n        height: `calc(100vh - 208px)`,\n        display: 'flex',\n        flexDirection: 'column',\n      }}\n      onTabChange={handleOnTabChange}\n      header={{\n        title: false,\n        ghost: true,\n      }}\n      tabList={[\n        {\n          tab: '列表1',\n          key: '1',\n        },\n        {\n          tab: '列表2',\n          key: '2',\n        },\n        {\n          tab: '列表3',\n          key: '3',\n        },\n        {\n          tab: '列表4',\n          key: '4',\n        },\n        {\n          tab: '列表5',\n          key: '5',\n        },\n        {\n          tab: '列表6',\n          key: '6',\n        },\n        {\n          tab: '列表7',\n          key: '7',\n        },\n        {\n          tab: '列表8',\n          key: '8',\n        },\n      ]}\n      tabActiveKey={tabActiveKey}\n    >\n      <ProTable<TableListItem, TableListPagination>\n        style={{ height: '100%' }}\n        actionRef={actionRef}\n        ghost={true}\n        rowKey=\"id\"\n        search={{\n          labelWidth: 100,\n        }}\n        toolBarRender={() => [\n          <Button\n            type=\"primary\"\n            key=\"primary\"\n            onClick={(): any => {\n              if (!selectedRowsState.length) {\n                return message.warning('请选择数据');\n              }\n              Modal.confirm({\n                title: '删除数据',\n                content: '确定删除该数据吗？',\n                okText: '确认',\n                cancelText: '取消',\n                onOk: async () => {\n                  await handleDelete(selectedRowsState);\n                  if (actionRef.current) {\n                    actionRef.current.reload();\n                  }\n                },\n              });\n            }}\n          >\n            <PlusOutlined /> 批量删除\n          </Button>,\n          <Upload\n            {...uploadprops}\n            onChange={() => {\n              if (actionRef.current) {\n                actionRef.current.reload();\n              }\n            }}\n          >\n            <Button type=\"primary\">批量导入</Button>\n          </Upload>,\n          // <Button\n          //   type=\"primary\"\n          //   key=\"primary\"\n          //   onClick={() => {\n          //     alert('导入');\n          //   }}\n          // >\n          //   <PlusOutlined /> 导入\n          // </Button>,\n          <Button\n            type=\"primary\"\n            key=\"primary\"\n            onClick={() => {\n              handleModalVisible(true);\n            }}\n          >\n            <PlusOutlined /> 新建\n          </Button>,\n        ]}\n        request={list}\n        columns={columns}\n        rowSelection={{\n          onChange: (_, selectedRows) => {\n            setSelectedRows(selectedRows);\n          },\n        }}\n        options={{\n          density: false,\n          fullScreen: true,\n          reload: true,\n          setting: true,\n        }}\n        pagination={{\n          showQuickJumper: true,\n          pageSizeOptions: ['10', '20', '30', '40'],\n          defaultPageSize: 10,\n        }}\n      />\n      {createModalVisible && (\n        <ModalForm\n          {...formItemLayout}\n          title=\"新增\"\n          width=\"800px\"\n          layout={'horizontal'}\n          visible={createModalVisible}\n          onVisibleChange={handleModalVisible}\n          onFinish={async (value) => {\n            const success = await handleAdd(value as TableListItem);\n            if (success) {\n              handleModalVisible(false);\n              if (actionRef.current) {\n                actionRef.current.reload();\n              }\n            }\n          }}\n        >\n          {templateData\n            .filter((item: any) => item.create)\n            .map((item: any) => {\n              let form = <ProFormText {...item.create} label={item.title} name={item.dataIndex} />;\n              switch (item.create ? item.create.type || '' : '') {\n                case 'input':\n                  form = <ProFormText {...item.create} label={item.title} name={item.dataIndex} />;\n                  break;\n                case 'textArea':\n                  form = (\n                    <ProFormTextArea\n                      {...item.create}\n                      label={item.title}\n                      name={item.dataIndex}\n                      colProps={{ span: 24 }}\n                    />\n                  );\n                  break;\n                case 'select':\n                  form = (\n                    <ProFormSelect {...item.create} label={item.title} name={item.dataIndex} />\n                  );\n                  break;\n                case 'radio':\n                  form = <ProFormRadio {...item.create} label={item.title} name={item.dataIndex} />;\n                  break;\n                case 'switch':\n                  form = (\n                    <ProFormSwitch {...item.create} label={item.title} name={item.dataIndex} />\n                  );\n                case 'image':\n                  form = (\n                    <ProFormUploadButton\n                      fieldProps={{\n                        name: 'file',\n                        listType: 'picture-card',\n                      }}\n                      action=\"/upload.do\"\n                      {...item.create}\n                      label={item.title}\n                      name={item.dataIndex}\n                    />\n                  );\n                  break;\n              }\n              return form;\n            })}\n        </ModalForm>\n      )}\n      {updateModalVisible && (\n        <ModalForm\n          {...formItemLayout}\n          title=\"编辑\"\n          width=\"800px\"\n          layout={'horizontal'}\n          visible={updateModalVisible}\n          onVisibleChange={handleUpdateModalVisible}\n          onFinish={async (value) => {\n            const success = await handleEdit(value as TableListItem);\n            if (success) {\n              handleUpdateModalVisible(false);\n              setCurrentRow(undefined);\n              if (actionRef.current) {\n                actionRef.current.reload();\n              }\n            }\n          }}\n          initialValues={currentRow}\n        >\n          {templateData\n            .filter((item: any) => item.edit)\n            .map((item: any) => {\n              let form = <ProFormText {...item.edit} label={item.title} name={item.dataIndex} />;\n              switch (item.edit ? item.edit.type || '' : '') {\n                case 'input':\n                  form = <ProFormText {...item.edit} label={item.title} name={item.dataIndex} />;\n                  break;\n                case 'textArea':\n                  form = (\n                    <ProFormTextArea {...item.edit} label={item.title} name={item.dataIndex} />\n                  );\n                  break;\n                case 'select':\n                  form = <ProFormSelect {...item.edit} label={item.title} name={item.dataIndex} />;\n                  break;\n                case 'radio':\n                  form = <ProFormRadio {...item.edit} label={item.title} name={item.dataIndex} />;\n                  break;\n                case 'switch':\n                  form = <ProFormSwitch {...item.edit} label={item.title} name={item.dataIndex} />;\n                  break;\n                case 'image':\n                  form = (\n                    <ProFormUploadButton\n                      fieldProps={{\n                        name: 'file',\n                        listType: 'picture-card',\n                      }}\n                      action=\"/upload.do\"\n                      {...item.create}\n                      label={item.title}\n                      name={item.dataIndex}\n                    />\n                  );\n                  break;\n              }\n              return form;\n            })}\n        </ModalForm>\n      )}\n      <Drawer\n        title={currentRow?.id}\n        destroyOnClose\n        closable={true}\n        closeIcon={<CloseOutlined />}\n        width={'80%'}\n        open={showDetail}\n        onClose={() => {\n          setCurrentRow(undefined);\n          setShowDetail(false);\n        }}\n      >\n        {currentRow?.id && (\n          <ProDescriptions<TableListItem>\n            column={2}\n            request={async () => ({\n              data: currentRow || {},\n            })}\n            params={{\n              id: currentRow?.id,\n            }}\n            columns={descriptions as ProDescriptionsItemProps<TableListItem>[]}\n          />\n        )}\n      </Drawer>\n    </PageContainer>\n  );\n};\n\nexport default TableList;\n","var map = {\n\t\"./data/1.json\": 48981,\n\t\"./data/2.json\": 2844,\n\t\"./data/3.json\": 69434,\n\t\"./data/4.json\": 51684,\n\t\"./data/5.json\": 29267,\n\t\"./data/6.json\": 97023,\n\t\"./data/7.json\": 56498,\n\t\"./data/8.json\": 84231,\n\t\"./field/1.json\": 48105,\n\t\"./field/2.json\": 7244,\n\t\"./field/3.json\": 18723,\n\t\"./field/4.json\": 21621,\n\t\"./field/5.json\": 92463,\n\t\"./field/6.json\": 85488,\n\t\"./field/7.json\": 2709,\n\t\"./field/8.json\": 3181,\n\t\"./template/1.json\": 82734,\n\t\"./template/2.json\": 67029,\n\t\"./template/3.json\": 55893,\n\t\"./template/4.json\": 44109,\n\t\"./template/5.json\": 26843,\n\t\"./template/6.json\": 17859,\n\t\"./template/7.json\": 59774,\n\t\"./template/8.json\": 58843,\n\t\"./type/1.json\": 99407,\n\t\"./type/2.json\": 80906,\n\t\"./type/3.json\": 50416,\n\t\"./type/4.json\": 23628,\n\t\"./type/5.json\": 34292,\n\t\"./type/6.json\": 31900,\n\t\"./type/7.json\": 41834,\n\t\"./type/8.json\": 39022\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 7372;"],"sourceRoot":""}